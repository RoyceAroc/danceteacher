/*! For license information please see main.1186fee7.js.LICENSE.txt */
(()=>{var e={879:function(e,t,n){(function(){"use strict";var e;function t(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var a="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var r=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n.g&&n.g];for(var t=0;t<e.length;++t){var a=e[t];if(a&&a.Math==Math)return a}throw Error("Cannot find global object")}(this);function o(e,t){if(t)e:{var n=r;e=e.split(".");for(var o=0;o<e.length-1;o++){var i=e[o];if(!(i in n))break e;n=n[i]}(t=t(o=n[e=e[e.length-1]]))!=o&&null!=t&&a(n,e,{configurable:!0,writable:!0,value:t})}}function i(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function s(e){var n="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return n?n.call(e):{next:t(e)}}function c(e){if(!(e instanceof Array)){e=s(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}o("Symbol",(function(e){function t(e,t){this.h=e,a(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.h};var n="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",r=0;return function e(a){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new t(n+(a||"")+"_"+r++,a)}})),o("Symbol.iterator",(function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var n="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),o=0;o<n.length;o++){var s=r[n[o]];"function"===typeof s&&"function"!=typeof s.prototype[e]&&a(s.prototype,e,{configurable:!0,writable:!0,value:function(){return i(t(this))}})}return e}));var u="function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var a=arguments[n];if(a)for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};o("Object.assign",(function(e){return e||u}));var l,d="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)l=Object.setPrototypeOf;else{var p;e:{var h={};try{h.__proto__={a:!0},p=h.a;break e}catch(vn){}p=!1}l=p?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var f=l;function m(e,t){if(e.prototype=d(t.prototype),e.prototype.constructor=e,f)f(e,t);else for(var n in t)if("prototype"!=n)if(Object.defineProperties){var a=Object.getOwnPropertyDescriptor(t,n);a&&Object.defineProperty(e,n,a)}else e[n]=t[n];e.za=t.prototype}function g(){this.m=!1,this.j=null,this.i=void 0,this.h=1,this.v=this.s=0,this.l=null}function y(e){if(e.m)throw new TypeError("Generator is already running");e.m=!0}function b(e,t){e.l={ma:t,na:!0},e.h=e.s||e.v}function x(e,t,n){return e.h=n,{value:t}}function v(e){this.h=new g,this.i=e}function w(e,t,n,a){try{var r=t.call(e.h.j,n);if(!(r instanceof Object))throw new TypeError("Iterator result "+r+" is not an object");if(!r.done)return e.h.m=!1,r;var o=r.value}catch(i){return e.h.j=null,b(e.h,i),k(e)}return e.h.j=null,a.call(e.h,o),k(e)}function k(e){for(;e.h.h;)try{var t=e.i(e.h);if(t)return e.h.m=!1,{value:t.value,done:!1}}catch(n){e.h.i=void 0,b(e.h,n)}if(e.h.m=!1,e.h.l){if(t=e.h.l,e.h.l=null,t.na)throw t.ma;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function S(e){this.next=function(t){return y(e.h),e.h.j?t=w(e,e.h.j.next,t,e.h.u):(e.h.u(t),t=k(e)),t},this.throw=function(t){return y(e.h),e.h.j?t=w(e,e.h.j.throw,t,e.h.u):(b(e.h,t),t=k(e)),t},this.return=function(t){return function(e,t){y(e.h);var n=e.h.j;return n?w(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.h.return):(e.h.return(t),k(e))}(e,t)},this[Symbol.iterator]=function(){return this}}function C(e){return function(e){function t(t){return e.next(t)}function n(t){return e.throw(t)}return new Promise((function(a,r){!function e(o){o.done?a(o.value):Promise.resolve(o.value).then(t,n).then(e,r)}(e.next())}))}(new S(new v(e)))}function I(e){return e||Array.prototype.fill}g.prototype.u=function(e){this.i=e},g.prototype.return=function(e){this.l={return:e},this.h=this.v},o("Promise",(function(e){function t(e){this.i=0,this.j=void 0,this.h=[],this.u=!1;var t=this.l();try{e(t.resolve,t.reject)}catch(n){t.reject(n)}}function n(){this.h=null}function a(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;n.prototype.i=function(e){if(null==this.h){this.h=[];var t=this;this.j((function(){t.m()}))}this.h.push(e)};var o=r.setTimeout;n.prototype.j=function(e){o(e,0)},n.prototype.m=function(){for(;this.h&&this.h.length;){var e=this.h;this.h=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(a){this.l(a)}}}this.h=null},n.prototype.l=function(e){this.j((function(){throw e}))},t.prototype.l=function(){function e(e){return function(a){n||(n=!0,e.call(t,a))}}var t=this,n=!1;return{resolve:e(this.I),reject:e(this.m)}},t.prototype.I=function(e){if(e===this)this.m(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.L(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.F(e):this.s(e)}},t.prototype.F=function(e){var t=void 0;try{t=e.then}catch(n){return void this.m(n)}"function"==typeof t?this.M(t,e):this.s(e)},t.prototype.m=function(e){this.v(2,e)},t.prototype.s=function(e){this.v(1,e)},t.prototype.v=function(e,t){if(0!=this.i)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.i);this.i=e,this.j=t,2===this.i&&this.K(),this.H()},t.prototype.K=function(){var e=this;o((function(){if(e.D()){var t=r.console;"undefined"!==typeof t&&t.error(e.j)}}),1)},t.prototype.D=function(){if(this.u)return!1;var e=r.CustomEvent,t=r.Event,n=r.dispatchEvent;return"undefined"===typeof n||("function"===typeof e?e=new e("unhandledrejection",{cancelable:!0}):"function"===typeof t?e=new t("unhandledrejection",{cancelable:!0}):(e=r.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,e),e.promise=this,e.reason=this.j,n(e))},t.prototype.H=function(){if(null!=this.h){for(var e=0;e<this.h.length;++e)i.i(this.h[e]);this.h=null}};var i=new n;return t.prototype.L=function(e){var t=this.l();e.T(t.resolve,t.reject)},t.prototype.M=function(e,t){var n=this.l();try{e.call(t,n.resolve,n.reject)}catch(a){n.reject(a)}},t.prototype.then=function(e,n){function a(e,t){return"function"==typeof e?function(t){try{r(e(t))}catch(n){o(n)}}:t}var r,o,i=new t((function(e,t){r=e,o=t}));return this.T(a(e,r),a(n,o)),i},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.T=function(e,t){function n(){switch(a.i){case 1:e(a.j);break;case 2:t(a.j);break;default:throw Error("Unexpected state: "+a.i)}}var a=this;null==this.h?i.i(n):this.h.push(n),this.u=!0},t.resolve=a,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var r=s(e),o=r.next();!o.done;o=r.next())a(o.value).T(t,n)}))},t.all=function(e){var n=s(e),r=n.next();return r.done?a([]):new t((function(e,t){function o(t){return function(n){i[t]=n,0==--s&&e(i)}}var i=[],s=0;do{i.push(void 0),s++,a(r.value).T(o(i.length-1),t),r=n.next()}while(!r.done)}))},t})),o("Array.prototype.keys",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,a=!1,r={next:function(){if(!a&&n<e.length){var r=n++;return{value:t(r,e[r]),done:!1}}return a=!0,{done:!0,value:void 0}}};return r[Symbol.iterator]=function(){return r},r}(this,(function(e){return e}))}})),o("Array.prototype.fill",(function(e){return e||function(e,t,n){var a=this.length||0;for(0>t&&(t=Math.max(0,a+t)),(null==n||n>a)&&(n=a),0>(n=Number(n))&&(n=Math.max(0,a+n)),t=Number(t||0);t<n;t++)this[t]=e;return this}})),o("Int8Array.prototype.fill",I),o("Uint8Array.prototype.fill",I),o("Uint8ClampedArray.prototype.fill",I),o("Int16Array.prototype.fill",I),o("Uint16Array.prototype.fill",I),o("Int32Array.prototype.fill",I),o("Uint32Array.prototype.fill",I),o("Float32Array.prototype.fill",I),o("Float64Array.prototype.fill",I),o("Object.is",(function(e){return e||function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}})),o("Array.prototype.includes",(function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var a=n.length;for(0>(t=t||0)&&(t=Math.max(t+a,0));t<a;t++){var r=n[t];if(r===e||Object.is(r,e))return!0}return!1}})),o("String.prototype.includes",(function(e){return e||function(e,t){if(null==this)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return-1!==this.indexOf(e,t||0)}}));var N=this||self;function T(e,t){e=e.split(".");var n,a=N;e[0]in a||"undefined"==typeof a.execScript||a.execScript("var "+e[0]);for(;e.length&&(n=e.shift());)e.length||void 0===t?a=a[n]&&a[n]!==Object.prototype[n]?a[n]:a[n]={}:a[n]=t}function _(e){var t;return(t=N.navigator)&&(t=t.userAgent)||(t=""),-1!=t.indexOf(e)}var E=Array.prototype.map?function(e,t){return Array.prototype.map.call(e,t,void 0)}:function(e,t){for(var n=e.length,a=Array(n),r="string"===typeof e?e.split(""):e,o=0;o<n;o++)o in r&&(a[o]=t.call(void 0,r[o],o,e));return a},R={},A=null;function O(e){var t=e.length,n=3*t/4;n%3?n=Math.floor(n):-1!="=.".indexOf(e[t-1])&&(n=-1!="=.".indexOf(e[t-2])?n-2:n-1);var a=new Uint8Array(n),r=0;return function(e,t){function n(t){for(;a<e.length;){var n=e.charAt(a++),r=A[n];if(null!=r)return r;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return t}F();for(var a=0;;){var r=n(-1),o=n(0),i=n(64),s=n(64);if(64===s&&-1===r)break;t(r<<2|o>>4),64!=i&&(t(o<<4&240|i>>2),64!=s&&t(i<<6&192|s))}}(e,(function(e){a[r++]=e})),r!==n?a.subarray(0,r):a}function F(){if(!A){A={};for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++){var a=e.concat(t[n].split(""));R[n]=a;for(var r=0;r<a.length;r++){var o=a[r];void 0===A[o]&&(A[o]=r)}}}}var D="undefined"!==typeof Uint8Array,M=!(_("Trident")||_("MSIE"))&&"function"===typeof N.btoa;function P(e){if(!M){var t;void 0===t&&(t=0),F(),t=R[t];for(var n=Array(Math.floor(e.length/3)),a=t[64]||"",r=0,o=0;r<e.length-2;r+=3){var i=e[r],s=e[r+1],c=e[r+2],u=t[i>>2];i=t[(3&i)<<4|s>>4],s=t[(15&s)<<2|c>>6],c=t[63&c],n[o++]=u+i+s+c}switch(u=0,c=a,e.length-r){case 2:c=t[(15&(u=e[r+1]))<<2]||a;case 1:e=e[r],n[o]=t[e>>2]+t[(3&e)<<4|u>>4]+c+a}return n.join("")}for(t="";10240<e.length;)t+=String.fromCharCode.apply(null,e.subarray(0,10240)),e=e.subarray(10240);return t+=String.fromCharCode.apply(null,e),btoa(t)}var L,z=RegExp("[-_.]","g");function B(e){switch(e){case"-":return"+";case"_":return"/";case".":return"=";default:return""}}function W(e){if(!M)return O(e);z.test(e)&&(e=e.replace(z,B)),e=atob(e);for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}function U(){return L||(L=new Uint8Array(0))}var V={},G="function"===typeof Uint8Array.prototype.slice,H=0,j=0;function K(e){var t=0>e,n=(e=Math.abs(e))>>>0;e=Math.floor((e-n)/4294967296),t&&(t=(n=s(Y(n,e))).next().value,e=n.next().value,n=t),H=n>>>0,j=e>>>0}var q,X="function"===typeof BigInt;function Y(e,t){return t=~t,e?e=1+~e:t+=1,[e,t]}function Q(e,t){this.i=e>>>0,this.h=t>>>0}function Z(e){if(!e)return q||(q=new Q(0,0));if(!/^-?\d+$/.test(e))return null;if(16>e.length)K(Number(e));else if(X)e=BigInt(e),H=Number(e&BigInt(4294967295))>>>0,j=Number(e>>BigInt(32)&BigInt(4294967295));else{var t=+("-"===e[0]);j=H=0;for(var n=e.length,a=t,r=(n-t)%6+t;r<=n;a=r,r+=6)a=Number(e.slice(a,r)),j*=1e6,4294967296<=(H=1e6*H+a)&&(j+=H/4294967296|0,H%=4294967296);t&&(e=(t=s(Y(H,j))).next().value,t=t.next().value,H=e,j=t)}return new Q(H,j)}function $(e,t){return Error("Invalid wire type: "+e+" (at position "+t+")")}function J(){return Error("Failed to read varint, encoding is invalid.")}function ee(e,t){return Error("Tried to read past the end of the data "+t+" > "+e)}function te(){throw Error("Invalid UTF8")}function ne(e,t){return t=String.fromCharCode.apply(null,t),null==e?t:e+t}var ae,re,oe,ie=void 0,se="undefined"!==typeof TextDecoder,ce="undefined"!==typeof TextEncoder;function ue(e){if(e!==V)throw Error("illegal external caller")}function le(e,t){if(ue(t),this.V=e,null!=e&&0===e.length)throw Error("ByteString should be constructed with non-empty values")}function de(){return oe||(oe=new le(null,V))}function pe(e){ue(V);var t=e.V;return null==(t=null==t||D&&null!=t&&t instanceof Uint8Array?t:"string"===typeof t?W(t):null)?t:e.V=t}function he(e,t){this.i=null,this.m=!1,this.h=this.j=this.l=0,fe(this,e,t)}function fe(e,t,n){n=void 0===n?{}:n,e.S=void 0!==n.S&&n.S,t&&(t=function(e){if("string"===typeof e)return{buffer:W(e),C:!1};if(Array.isArray(e))return{buffer:new Uint8Array(e),C:!1};if(e.constructor===Uint8Array)return{buffer:e,C:!1};if(e.constructor===ArrayBuffer)return{buffer:new Uint8Array(e),C:!1};if(e.constructor===le)return{buffer:pe(e)||U(),C:!0};if(e instanceof Uint8Array)return{buffer:new Uint8Array(e.buffer,e.byteOffset,e.byteLength),C:!1};throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers")}(t),e.i=t.buffer,e.m=t.C,e.l=0,e.j=e.i.length,e.h=e.l)}function me(e,t){if(e.h=t,t>e.j)throw ee(e.j,t)}function ge(e){var t=e.i,n=e.h,a=t[n++],r=127&a;if(128&a&&(r|=(127&(a=t[n++]))<<7,128&a&&(r|=(127&(a=t[n++]))<<14,128&a&&(r|=(127&(a=t[n++]))<<21,128&a&&(r|=(a=t[n++])<<28,128&a&&128&t[n++]&&128&t[n++]&&128&t[n++]&&128&t[n++]&&128&t[n++])))))throw J();return me(e,n),r}function ye(e,t){if(0>t)throw Error("Tried to read a negative byte length: "+t);var n=e.h,a=n+t;if(a>e.j)throw ee(t,e.j-n);return e.h=a,n}he.prototype.reset=function(){this.h=this.l};var be=[];function xe(){this.h=[]}function ve(e,t,n){for(;0<n||127<t;)e.h.push(127&t|128),t=(t>>>7|n<<25)>>>0,n>>>=7;e.h.push(t)}function we(e,t){for(;127<t;)e.h.push(127&t|128),t>>>=7;e.h.push(t)}function ke(e,t){if(be.length){var n=be.pop();fe(n,e,t),e=n}else e=new he(e,t);this.h=e,this.j=this.h.h,this.i=this.l=-1,this.setOptions(t)}function Se(e){var t=e.h;if(t.h==t.j)return!1;e.j=e.h.h;var n=ge(e.h)>>>0;if(t=n>>>3,!(0<=(n&=7)&&5>=n))throw $(n,e.j);if(1>t)throw Error("Invalid field number: "+t+" (at position "+e.j+")");return e.l=t,e.i=n,!0}function Ce(e){switch(e.i){case 0:if(0!=e.i)Ce(e);else e:{for(var t=(e=e.h).h,n=t+10,a=e.i;t<n;)if(0===(128&a[t++])){me(e,t);break e}throw J()}break;case 1:me(e=e.h,e.h+8);break;case 2:2!=e.i?Ce(e):(t=ge(e.h)>>>0,me(e=e.h,e.h+t));break;case 5:me(e=e.h,e.h+4);break;case 3:for(t=e.l;;){if(!Se(e))throw Error("Unmatched start-group tag: stream EOF");if(4==e.i){if(e.l!=t)throw Error("Unmatched end-group tag");break}Ce(e)}break;default:throw $(e.i,e.j)}}xe.prototype.length=function(){return this.h.length},xe.prototype.end=function(){var e=this.h;return this.h=[],e},ke.prototype.setOptions=function(e){e=void 0===e?{}:e,this.ca=void 0!==e.ca&&e.ca},ke.prototype.reset=function(){this.h.reset(),this.j=this.h.h,this.i=this.l=-1};var Ie=[];function Ne(){this.j=[],this.i=0,this.h=new xe}function Te(e,t){0!==t.length&&(e.j.push(t),e.i+=t.length)}var _e="function"===typeof Symbol&&"symbol"===typeof Symbol()?Symbol():void 0;function Ee(e,t){return _e?e[_e]|=t:void 0!==e.A?e.A|=t:(Object.defineProperties(e,{A:{value:t,configurable:!0,writable:!0,enumerable:!1}}),t)}function Re(e,t){_e?e[_e]&&(e[_e]&=~t):void 0!==e.A&&(e.A&=~t)}function Ae(e){var t;return null==(t=_e?e[_e]:e.A)?0:t}function Oe(e,t){_e?e[_e]=t:void 0!==e.A?e.A=t:Object.defineProperties(e,{A:{value:t,configurable:!0,writable:!0,enumerable:!1}})}function Fe(e){return Ee(e,1),e}function De(e,t){Oe(t,-51&e)}function Me(e,t){Oe(t,-41&e|18)}var Pe={};function Le(e){return null!==e&&"object"===typeof e&&!Array.isArray(e)&&e.constructor===Object}var ze,Be,We=[];function Ue(e){if(2&Ae(e.o))throw Error("Cannot mutate an immutable Message")}function Ve(e){var t=e.length;(t=t?e[t-1]:void 0)&&Le(t)?t.g=1:(t={},e.push((t.g=1,t)))}function Ge(e){var t=e.i+e.G;return e.B||(e.B=e.o[t]={})}function He(e,t){return-1===t?null:t>=e.i?e.B?e.B[t]:void 0:e.o[t+e.G]}function je(e,t,n,a){Ue(e),Ke(e,t,n,a)}function Ke(e,t,n,a){e.j&&(e.j=void 0),t>=e.i||a?Ge(e)[t]=n:(e.o[t+e.G]=n,(e=e.B)&&t in e&&delete e[t])}function qe(e,t,n,a){var r=He(e,t);Array.isArray(r)||(r=ze);var o=Ae(r);if(1&o||Fe(r),a)2&o||Ee(r,2),1&n||Object.freeze(r);else{a=!(2&n);var i=2&o;1&n||!i?a&&16&o&&!i&&Re(r,16):Ke(e,t,r=Fe(Array.prototype.slice.call(r)))}return r}function Xe(e,t){var n=He(e,t),a=null==n?n:"number"===typeof n||"NaN"===n||"Infinity"===n||"-Infinity"===n?Number(n):void 0;return null!=a&&a!==n&&Ke(e,t,a),a}function Ye(e,t,n,a,r){e.h||(e.h={});var o=e.h[n],i=qe(e,n,3,r);if(!o){var s=i;o=[];var c=!!(16&Ae(e.o));i=!!(2&Ae(s));var u=s;!r&&i&&(s=Array.prototype.slice.call(s));for(var l=i,d=0;d<s.length;d++){var p=s[d],h=t,f=!1;if(f=void 0!==f&&f,void 0!==(p=Array.isArray(p)?new h(p):f?new h:void 0)){var m=f=Ae(h=p.o);i&&(m|=2),c&&(m|=16),m!=f&&Oe(h,m),h=m,l=l||!!(2&h),o.push(p)}}return e.h[n]=o,t=33|(c=Ae(s)),c!=(t=l?-9&t:8|t)&&(l=s,Object.isFrozen(l)&&(l=Array.prototype.slice.call(l)),Oe(l,t),s=l),u!==s&&Ke(e,n,s),(r||a&&i)&&Ee(o,2),a&&Object.freeze(o),o}return r||(r=Object.isFrozen(o),a&&!r?Object.freeze(o):!a&&r&&(o=Array.prototype.slice.call(o),e.h[n]=o)),o}function Qe(e,t,n){var a=!!(2&Ae(e.o));if(t=Ye(e,t,n,a,a),e=qe(e,n,3,a),!(a||8&Ae(e))){for(a=0;a<t.length;a++){if(2&Ae((n=t[a]).o)){var r=ct(n,!1);r.j=n}else r=n;n!==r&&(t[a]=r,e[a]=r.o)}Ee(e,8)}return t}function Ze(e,t,n){if(null!=n&&"number"!==typeof n)throw Error("Value of float/double field must be a number|null|undefined, found "+typeof n+": "+n);je(e,t,n)}function $e(e,t,n,a,r){Ue(e);var o=Ye(e,n,t,!1,!1);return n=null!=a?a:new n,e=qe(e,t,2,!1),void 0!=r?(o.splice(r,0,n),e.splice(r,0,n.o)):(o.push(n),e.push(n.o)),n.C()&&Re(e,8),n}function Je(e,t){return null==e?t:e}function et(e,t,n){return n=void 0===n?0:n,Je(Xe(e,t),n)}function tt(e,t,n,a){if(null!=e){if(Array.isArray(e))e=nt(e,t,n,void 0!==a);else if(Le(e)){var r,o={};for(r in e)o[r]=tt(e[r],t,n,a);e=o}else e=t(e,a);return e}}function nt(e,t,n,a){var r=Ae(e);a=a?!!(16&r):void 0,e=Array.prototype.slice.call(e);for(var o=0;o<e.length;o++)e[o]=tt(e[o],t,n,a);return n(r,e),e}function at(e){return e.ja===Pe?e.toJSON():function(e){switch(typeof e){case"number":return isFinite(e)?e:String(e);case"object":if(e)if(Array.isArray(e)){if(0!==(128&Ae(e)))return Ve(e=Array.prototype.slice.call(e)),e}else{if(D&&null!=e&&e instanceof Uint8Array)return P(e);if(e instanceof le){var t=e.V;return null==t?"":"string"===typeof t?t:e.V=P(t)}}}return e}(e)}function rt(e,t){128&e&&Ve(t)}function ot(e,t,n){if(n=void 0===n?Me:n,null!=e){if(D&&e instanceof Uint8Array)return e.length?new le(new Uint8Array(e),V):de();if(Array.isArray(e)){var a=Ae(e);return 2&a?e:!t||32&a||!(16&a||0===a)?(4&(t=Ae(e=nt(e,ot,4&a?Me:n,!0)))&&2&t&&Object.freeze(e),e):(Oe(e,2|a),e)}return e.ja===Pe?st(e):e}}function it(e,t,n,a,r,o,i){if(e=e.h&&e.h[n]){if(2&(a=Ae(e))?a=e:(Me(a,o=E(e,st)),Object.freeze(o),a=o),Ue(t),i=null==a?ze:Fe([]),null!=a){for(o=!!a.length,e=0;e<a.length;e++){var s=a[e];o=o&&!(2&Ae(s.o)),i[e]=s.o}o=1|(o?8:0),((e=Ae(i))&o)!==o&&(Object.isFrozen(i)&&(i=Array.prototype.slice.call(i)),Oe(i,e|o)),t.h||(t.h={}),t.h[n]=a}else t.h&&(t.h[n]=void 0);Ke(t,n,i,r)}else je(t,n,ot(a,o,i),r)}function st(e){return 2&Ae(e.o)||Ee((e=ct(e,!0)).o,2),e}function ct(e,t){var n=e.o,a=[];Ee(a,16);var r=e.constructor.h;if(r&&a.push(r),r=e.B){a.length=n.length,a.fill(void 0,a.length,n.length);var o={};a[a.length-1]=o}0!==(128&Ae(n))&&Ve(a),t=t||e.C()?Me:De,o=e.constructor,Be=a,a=new o(a),Be=void 0,e.R&&(a.R=e.R.slice()),o=!!(16&Ae(n));for(var i=r?n.length-1:n.length,s=0;s<i;s++)it(e,a,s-e.G,n[s],!1,o,t);if(r)for(var c in r)it(e,a,+c,r[c],!0,o,t);return a}function ut(e,t,n){null==e&&(e=Be),Be=void 0;var a,r=this.constructor.i||0,o=0<r,i=this.constructor.h,s=!1;if(null==e){var c=48,u=!0;o&&(r=0,c|=128),Oe(e=i?[i]:[],c)}else{if(!Array.isArray(e))throw Error();if(i&&i!==e[0])throw Error();var l=c=Ee(e,0);if((u=0!==(16&l))&&((s=0!==(32&l))||(l|=32)),o){if(128&l)r=0;else if(0<e.length){var d=e[e.length-1];if(Le(d)&&"g"in d){r=0,l|=128,delete d.g;var p,h=!0;for(p in d){h=!1;break}h&&e.pop()}}}else if(128&l)throw Error();c!==l&&Oe(e,l)}if(this.G=(i?0:-1)-r,this.h=void 0,this.o=e,r=(i=this.o.length)-1,i&&Le(i=this.o[r])?(this.B=i,this.i=r-this.G):void 0!==t&&-1<t?(this.i=Math.max(t,r+1-this.G),this.B=void 0):this.i=Number.MAX_VALUE,!o&&this.B&&"g"in this.B)throw Error('Unexpected "g" flag in sparse object of message that is not a group type.');if(n)for(t=u&&!s&&!0,o=this.i,u=0;u<n.length;u++)(s=n[u])<o?(r=e[s+=this.G])?lt(r,t):e[s]=ze:(a||(a=Ge(this)),(r=a[s])?lt(r,t):a[s]=ze)}function lt(e,t){if(Array.isArray(e)){var n=Ae(e),a=1;!t||2&n||(a|=16),(n&a)!==a&&Oe(e,n|a)}}function dt(e,t,n){if(n){var a,r={};for(a in n){var o=n[a],i=o.ra;i||(r.J=o.xa||o.oa.W,o.ia?(r.aa=xt(o.ia),i=function(e){return function(t,n,a){return e.J(t,n,a,e.aa)}}(r)):o.ka?(r.Z=vt(o.da.P,o.ka),i=function(e){return function(t,n,a){return e.J(t,n,a,e.Z)}}(r)):i=r.J,o.ra=i),i(t,e,o.da),r={J:r.J,aa:r.aa,Z:r.Z}}}!function(e,t){if(t=t.R){Te(e,e.h.end());for(var n=0;n<t.length;n++)Te(e,pe(t[n])||U())}}(t,e)}Oe(We,23),ze=Object.freeze(We),ut.prototype.toJSON=function(){return nt(this.o,at,rt)},ut.prototype.C=function(){return!!(2&Ae(this.o))},ut.prototype.ja=Pe,ut.prototype.toString=function(){return this.o.toString()};var pt=Symbol();function ht(e,t,n){return e[pt]||(e[pt]=function(e,a){return t(e,a,n)})}function ft(e){var t=e[pt];if(!t){var n=Ot(e);t=function(e,t){return Ft(e,t,n)},e[pt]=t}return t}function mt(e){var t=function(e){var t=e.ia;return t?ft(t):(t=e.wa)?ht(e.da.P,t,e.ka):void 0}(e),n=e.da,a=e.oa.U;return t?function(e,r){return a(e,r,n,t)}:function(e,t){return a(e,t,n)}}function gt(e,t){var n=e[t];return"function"==typeof n&&0===n.length&&(n=n(),e[t]=n),Array.isArray(n)&&(Tt in n||wt in n||0<n.length&&"function"==typeof n[0])?n:void 0}function yt(e,t,n,a,r,o){t.P=e[0];var i=1;if(e.length>i&&"number"!==typeof e[i]){var s=e[i++];n(t,s)}for(;i<e.length;){n=e[i++];for(var c=i+1;c<e.length&&"number"!==typeof e[c];)c++;switch(s=e[i++],c-=i){case 0:a(t,n,s);break;case 1:(c=gt(e,i))?(i++,r(t,n,s,c)):a(t,n,s,e[i++]);break;case 2:r(t,n,s,c=gt(e,c=i++),e[i++]);break;case 3:o(t,n,s,e[i++],e[i++],e[i++]);break;case 4:o(t,n,s,e[i++],e[i++],e[i++],e[i++]);break;default:throw Error("unexpected number of binary field arguments: "+c)}}return t}var bt=Symbol();function xt(e){var t=e[bt];if(!t){var n=Nt(e);t=function(e,t){return Dt(e,t,n)},e[bt]=t}return t}function vt(e,t){var n=e[bt];return n||(n=function(e,n){return dt(e,n,t)},e[bt]=n),n}var wt=Symbol();function kt(e,t){e.push(t)}function St(e,t,n){e.push(t,n.W)}function Ct(e,t,n,a){var r=xt(a),o=Nt(a).P,i=n.W;e.push(t,(function(e,t,n){return i(e,t,n,o,r)}))}function It(e,t,n,a,r,o){var i=vt(a,o),s=n.W;e.push(t,(function(e,t,n){return s(e,t,n,a,i)}))}function Nt(e){var t=e[wt];return t||(t=yt(e,e[wt]=[],kt,St,Ct,It),Tt in e&&wt in e&&(e.length=0),t)}var Tt=Symbol();function _t(e,t){e[0]=t}function Et(e,t,n,a){var r=n.U;e[t]=a?function(e,t,n){return r(e,t,n,a)}:r}function Rt(e,t,n,a,r){var o=n.U,i=ft(a),s=Ot(a).P;e[t]=function(e,t,n){return o(e,t,n,s,i,r)}}function At(e,t,n,a,r,o,i){var s=n.U,c=ht(a,r,o);e[t]=function(e,t,n){return s(e,t,n,a,c,i)}}function Ot(e){var t=e[Tt];return t||(t=yt(e,e[Tt]={},_t,Et,Rt,At),Tt in e&&wt in e&&(e.length=0),t)}function Ft(e,t,n){for(;Se(t)&&4!=t.i;){var a=t.l,r=n[a];if(!r){var o=n[0];o&&(o=o[a])&&(r=n[a]=mt(o))}if(!r||!r(t,e,a)){a=e,o=(r=t).j,Ce(r);var i=r;if(!i.ca){if(r=i.h.h-o,i.h.h=o,i=i.h,0==r)r=de();else{if(o=ye(i,r),i.S&&i.m)r=i.i.subarray(o,o+r);else{i=i.i;var s=o;r=s===(r=o+r)?U():G?i.slice(s,r):new Uint8Array(i.subarray(s,r))}r=0==r.length?de():new le(r,V)}(o=a.R)?o.push(r):a.R=[r]}}}return e}function Dt(e,t,n){for(var a=n.length,r=1==a%2,o=r?1:0;o<a;o+=2)(0,n[o+1])(t,e,n[o]);dt(e,t,r?n[0]:void 0)}function Mt(e,t){return{U:e,W:t}}var Pt=Mt((function(e,t,n){if(5!==e.i)return!1;var a=(e=e.h).i,r=e.h,o=a[r],i=a[r+1],s=a[r+2];return a=a[r+3],me(e,e.h+4),e=2*((i=(o|i<<8|s<<16|a<<24)>>>0)>>31)+1,o=i>>>23&255,i&=8388607,je(t,n,255==o?i?NaN:1/0*e:0==o?e*Math.pow(2,-149)*i:e*Math.pow(2,o-150)*(i+Math.pow(2,23))),!0}),(function(e,t,n){if(null!=(t=Xe(t,n))){we(e.h,8*n+5),e=e.h;var a=+t;0===a?0<1/a?H=j=0:(j=0,H=2147483648):isNaN(a)?(j=0,H=2147483647):34028234663852886e22<(a=(n=0>a?-2147483648:0)?-a:a)?(j=0,H=(2139095040|n)>>>0):11754943508222875e-54>a?(a=Math.round(a/Math.pow(2,-149)),j=0,H=(n|a)>>>0):(t=Math.floor(Math.log(a)/Math.LN2),a*=Math.pow(2,-t),16777216<=(a=Math.round(8388608*a))&&++t,j=0,H=(n|t+127<<23|8388607&a)>>>0),n=H,e.h.push(n>>>0&255),e.h.push(n>>>8&255),e.h.push(n>>>16&255),e.h.push(n>>>24&255)}})),Lt=Mt((function(e,t,n){if(0!==e.i)return!1;var a=e.h,r=0,o=e=0,i=a.i,s=a.h;do{var c=i[s++];r|=(127&c)<<o,o+=7}while(32>o&&128&c);for(32<o&&(e|=(127&c)>>4),o=3;32>o&&128&c;o+=7)e|=(127&(c=i[s++]))<<o;if(me(a,s),!(128>c))throw J();return a=r>>>0,(e=2147483648&(c=e>>>0))&&(c=~c>>>0,0==(a=1+~a>>>0)&&(c=c+1>>>0)),a=4294967296*c+(a>>>0),je(t,n,e?-a:a),!0}),(function(e,t,n){null!=(t=He(t,n))&&("string"===typeof t&&Z(t),null!=t&&(we(e.h,8*n),"number"===typeof t?(e=e.h,K(t),ve(e,H,j)):(n=Z(t),ve(e.h,n.i,n.h))))})),zt=Mt((function(e,t,n){return 0===e.i&&(je(t,n,ge(e.h)),!0)}),(function(e,t,n){if(null!=(t=He(t,n))&&null!=t)if(we(e.h,8*n),e=e.h,0<=(n=t))we(e,n);else{for(t=0;9>t;t++)e.h.push(127&n|128),n>>=7;e.h.push(1)}})),Bt=Mt((function(e,t,n){if(2!==e.i)return!1;var a=ge(e.h)>>>0,r=ye(e=e.h,a);if(e=e.i,se){var o,i=e;(o=ae)||(o=ae=new TextDecoder("utf-8",{fatal:!0})),e=r+a,i=0===r&&e===i.length?i:i.subarray(r,e);try{var s=o.decode(i)}catch(d){if(void 0===ie){try{o.decode(new Uint8Array([128]))}catch(p){}try{o.decode(new Uint8Array([97])),ie=!0}catch(p){ie=!1}}throw!ie&&(ae=void 0),d}}else{a=(s=r)+a,r=[];for(var c,u,l=null;s<a;)128>(c=e[s++])?r.push(c):224>c?s>=a?te():(u=e[s++],194>c||128!==(192&u)?(s--,te()):r.push((31&c)<<6|63&u)):240>c?s>=a-1?te():128!==(192&(u=e[s++]))||224===c&&160>u||237===c&&160<=u||128!==(192&(i=e[s++]))?(s--,te()):r.push((15&c)<<12|(63&u)<<6|63&i):244>=c?s>=a-2?te():128!==(192&(u=e[s++]))||0!==u-144+(c<<28)>>30||128!==(192&(i=e[s++]))||128!==(192&(o=e[s++]))?(s--,te()):(c=(7&c)<<18|(63&u)<<12|(63&i)<<6|63&o,c-=65536,r.push(55296+(c>>10&1023),56320+(1023&c))):te(),8192<=r.length&&(l=ne(l,r),r.length=0);s=ne(l,r)}return je(t,n,s),!0}),(function(e,t,n){if(null!=(t=He(t,n))){var a=!1;if(a=void 0!==a&&a,ce){if(a&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(t))throw Error("Found an unpaired surrogate");t=(re||(re=new TextEncoder)).encode(t)}else{for(var r=0,o=new Uint8Array(3*t.length),i=0;i<t.length;i++){var s=t.charCodeAt(i);if(128>s)o[r++]=s;else{if(2048>s)o[r++]=s>>6|192;else{if(55296<=s&&57343>=s){if(56319>=s&&i<t.length){var c=t.charCodeAt(++i);if(56320<=c&&57343>=c){s=1024*(s-55296)+c-56320+65536,o[r++]=s>>18|240,o[r++]=s>>12&63|128,o[r++]=s>>6&63|128,o[r++]=63&s|128;continue}i--}if(a)throw Error("Found an unpaired surrogate");s=65533}o[r++]=s>>12|224,o[r++]=s>>6&63|128}o[r++]=63&s|128}}t=r===o.length?o:o.subarray(0,r)}we(e.h,8*n+2),we(e.h,t.length),Te(e,e.h.end()),Te(e,t)}})),Wt=Mt((function(e,t,n,a,r){if(2!==e.i)return!1;t=$e(t,n,a),n=e.h.j,a=ge(e.h)>>>0;var o=e.h.h+a,i=o-n;if(0>=i&&(e.h.j=o,r(t,e,void 0,void 0,void 0),i=o-e.h.h),i)throw Error("Message parsing ended unexpectedly. Expected to read "+a+" bytes, instead read "+(a-i)+" bytes, either the data ended unexpectedly or the message misreported its own length");return e.h.h=o,e.h.j=n,!0}),(function(e,t,n,a,r){if(null!=(t=Qe(t,a,n)))for(a=0;a<t.length;a++){var o=e;we(o.h,8*n+2);var i=o.h.end();Te(o,i),i.push(o.i),o=i,r(t[a],e),i=e;var s=o.pop();for(s=i.i+i.h.length()-s;127<s;)o.push(127&s|128),s>>>=7,i.i++;o.push(s),i.i++}}));function Ut(e){return function(t,n){e:{if(Ie.length){var a=Ie.pop();a.setOptions(n),fe(a.h,t,n),t=a}else t=new ke(t,n);try{var r=Ot(e),o=Ft(new r.P,t,r);break e}finally{(r=t.h).i=null,r.m=!1,r.l=0,r.j=0,r.h=0,r.S=!1,t.l=-1,t.i=-1,100>Ie.length&&Ie.push(t)}o=void 0}return o}}function Vt(e){return function(){var t=new Ne;Dt(this,t,Nt(e)),Te(t,t.h.end());for(var n=new Uint8Array(t.i),a=t.j,r=a.length,o=0,i=0;i<r;i++){var s=a[i];n.set(s,o),o+=s.length}return t.j=[n],n}}function Gt(e){ut.call(this,e)}m(Gt,ut);var Ht=[Gt,1,zt,2,Pt,3,Bt,4,Bt];function jt(e){ut.call(this,e,-1,Kt)}Gt.prototype.l=Vt(Ht),m(jt,ut),jt.prototype.addClassification=function(e,t){return $e(this,1,Gt,e,t),this};var Kt=[1],qt=Ut([jt,1,Wt,Ht]);function Xt(e){ut.call(this,e)}m(Xt,ut);var Yt=[Xt,1,Pt,2,Pt,3,Pt,4,Pt,5,Pt];function Qt(e){ut.call(this,e,-1,Zt)}Xt.prototype.l=Vt(Yt),m(Qt,ut);var Zt=[1],$t=Ut([Qt,1,Wt,Yt]);function Jt(e){ut.call(this,e)}m(Jt,ut);var en=[Jt,1,Pt,2,Pt,3,Pt,4,Pt,5,Pt,6,Lt],tn=Ut(en);function nn(e,t,n){if(n=e.createShader(0===n?e.VERTEX_SHADER:e.FRAGMENT_SHADER),e.shaderSource(n,t),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS))throw Error("Could not compile WebGL shader.\n\n"+e.getShaderInfoLog(n));return n}function an(e){return Qe(e,Gt,1).map((function(e){var t=He(e,1);return{index:null==t?0:t,qa:et(e,2),label:null!=He(e,3)?Je(He(e,3),""):void 0,displayName:null!=He(e,4)?Je(He(e,4),""):void 0}}))}function rn(e){return{x:et(e,1),y:et(e,2),z:et(e,3),visibility:null!=Xe(e,4)?et(e,4):void 0}}function on(e){return Qe($t(e),Xt,1).map(rn)}function sn(e,t){this.i=e,this.h=t,this.m=0}function cn(e,t,n){return function(e,t){var n=e.h;if(void 0===e.s){var a=nn(n,"\n  attribute vec2 aVertex;\n  attribute vec2 aTex;\n  varying vec2 vTex;\n  void main(void) {\n    gl_Position = vec4(aVertex, 0.0, 1.0);\n    vTex = aTex;\n  }",0),r=nn(n,"\n  precision mediump float;\n  varying vec2 vTex;\n  uniform sampler2D sampler0;\n  void main(){\n    gl_FragColor = texture2D(sampler0, vTex);\n  }",1),o=n.createProgram();if(n.attachShader(o,a),n.attachShader(o,r),n.linkProgram(o),!n.getProgramParameter(o,n.LINK_STATUS))throw Error("Could not compile WebGL program.\n\n"+n.getProgramInfoLog(o));a=e.s=o,n.useProgram(a),r=n.getUniformLocation(a,"sampler0"),e.l={O:n.getAttribLocation(a,"aVertex"),N:n.getAttribLocation(a,"aTex"),ya:r},e.v=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,e.v),n.enableVertexAttribArray(e.l.O),n.vertexAttribPointer(e.l.O,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),e.u=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,e.u),n.enableVertexAttribArray(e.l.N),n.vertexAttribPointer(e.l.N,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),n.uniform1i(r,0)}a=e.l,n.useProgram(e.s),n.canvas.width=t.width,n.canvas.height=t.height,n.viewport(0,0,t.width,t.height),n.activeTexture(n.TEXTURE0),e.i.bindTexture2d(t.glName),n.enableVertexAttribArray(a.O),n.bindBuffer(n.ARRAY_BUFFER,e.v),n.vertexAttribPointer(a.O,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(a.N),n.bindBuffer(n.ARRAY_BUFFER,e.u),n.vertexAttribPointer(a.N,2,n.FLOAT,!1,0,0),n.bindFramebuffer(n.DRAW_FRAMEBUFFER?n.DRAW_FRAMEBUFFER:n.FRAMEBUFFER,null),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.colorMask(!0,!0,!0,!0),n.drawArrays(n.TRIANGLE_FAN,0,4),n.disableVertexAttribArray(a.O),n.disableVertexAttribArray(a.N),n.bindBuffer(n.ARRAY_BUFFER,null),e.i.bindTexture2d(0)}(e,t),"function"===typeof e.h.canvas.transferToImageBitmap?Promise.resolve(e.h.canvas.transferToImageBitmap()):n?Promise.resolve(e.h.canvas):"function"===typeof createImageBitmap?createImageBitmap(e.h.canvas):(void 0===e.j&&(e.j=document.createElement("canvas")),new Promise((function(t){e.j.height=e.h.canvas.height,e.j.width=e.h.canvas.width,e.j.getContext("2d",{}).drawImage(e.h.canvas,0,0,e.h.canvas.width,e.h.canvas.height),t(e.j)})))}function un(e){this.h=e}Jt.prototype.l=Vt(en);var ln=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function dn(e,t){return t+e}function pn(e,t){window[e]=t}function hn(e){if(this.h=e,this.listeners={},this.l={},this.L={},this.s={},this.v={},this.M=this.u=this.ga=!0,this.I=Promise.resolve(),this.fa="",this.D={},this.locateFile=e&&e.locateFile||dn,"object"===typeof window)var t=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else{if("undefined"===typeof location)throw Error("solutions can only be loaded on a web page or in a web worker");t=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/"}if(this.ha=t,e.options)for(var n=(t=s(Object.keys(e.options))).next();!n.done;n=t.next()){n=n.value;var a=e.options[n].default;void 0!==a&&(this.l[n]="function"===typeof a?a():a)}}function fn(e){var t,n,a,r,o,i,s,u,l,d,p;return C((function(h){switch(h.h){case 1:return e.ga?(t=void 0===e.h.files?[]:"function"===typeof e.h.files?e.h.files(e.l):e.h.files,x(h,C((function(e){switch(e.h){case 1:return e.s=2,x(e,WebAssembly.instantiate(ln),4);case 4:e.h=3,e.s=0;break;case 2:return e.s=0,e.l=null,e.return(!1);case 3:return e.return(!0)}})),2)):h.return();case 2:if(n=h.i,"object"===typeof window)return pn("createMediapipeSolutionsWasm",{locateFile:e.locateFile}),pn("createMediapipeSolutionsPackedAssets",{locateFile:e.locateFile}),i=t.filter((function(e){return void 0!==e.data})),s=t.filter((function(e){return void 0===e.data})),u=Promise.all(i.map((function(t){var n=mn(e,t.url);if(void 0!==t.path){var a=t.path;n=n.then((function(t){return e.overrideFile(a,t),Promise.resolve(t)}))}return n}))),l=Promise.all(s.map((function(t){return void 0===t.simd||t.simd&&n||!t.simd&&!n?function(e){var t=document.createElement("script");return t.setAttribute("src",e),t.setAttribute("crossorigin","anonymous"),new Promise((function(e){t.addEventListener("load",(function(){e()}),!1),t.addEventListener("error",(function(){e()}),!1),document.body.appendChild(t)}))}(e.locateFile(t.url,e.ha)):Promise.resolve()}))).then((function(){var t,n,a;return C((function(r){if(1==r.h)return t=window.createMediapipeSolutionsWasm,n=window.createMediapipeSolutionsPackedAssets,a=e,x(r,t(n),2);a.i=r.i,r.h=0}))})),d=C((function(t){return e.h.graph&&e.h.graph.url?t=x(t,mn(e,e.h.graph.url),0):(t.h=0,t=void 0),t})),x(h,Promise.all([l,u,d]),7);if("function"!==typeof importScripts)throw Error("solutions can only be loaded on a web page or in a web worker");return a=t.filter((function(e){return void 0===e.simd||e.simd&&n||!e.simd&&!n})).map((function(t){return e.locateFile(t.url,e.ha)})),importScripts.apply(null,c(a)),r=e,x(h,createMediapipeSolutionsWasm(Module),6);case 6:r.i=h.i,e.m=new OffscreenCanvas(1,1),e.i.canvas=e.m,o=e.i.GL.createContext(e.m,{antialias:!1,alpha:!1,va:"undefined"!==typeof WebGL2RenderingContext?2:1}),e.i.GL.makeContextCurrent(o),h.h=4;break;case 7:if(e.m=document.createElement("canvas"),!(p=e.m.getContext("webgl2",{}))&&!(p=e.m.getContext("webgl",{})))return alert("Failed to create WebGL canvas context when passing video frame."),h.return();e.K=p,e.i.canvas=e.m,e.i.createContext(e.m,!0,!0,{});case 4:e.j=new e.i.SolutionWasm,e.ga=!1,h.h=0}}))}function mn(e,t){var n,a;return C((function(r){return t in e.L?r.return(e.L[t]):(n=e.locateFile(t,""),a=fetch(n).then((function(e){return e.arrayBuffer()})),e.L[t]=a,r.return(a))}))}function gn(e,t,n){var a,r,o,i,c,u,l,d,p,h,f,m,g,y;return C((function(b){switch(b.h){case 1:if(!n)return b.return(t);for(a={},r=0,o=s(Object.keys(n)),i=o.next();!i.done;i=o.next())c=i.value,"string"!==typeof(u=n[c])&&"texture"===u.type&&void 0!==t[u.stream]&&++r;1<r&&(e.M=!1),l=s(Object.keys(n)),i=l.next();case 2:if(i.done){b.h=4;break}if(d=i.value,"string"===typeof(p=n[d]))return g=a,y=d,x(b,function(e,t,n){var a;return C((function(r){return"number"===typeof n||n instanceof Uint8Array||n instanceof e.i.Uint8BlobList?r.return(n):n instanceof e.i.Texture2dDataOut?((a=e.v[t])||(a=new sn(e.i,e.K),e.v[t]=a),r.return(cn(a,n,e.M))):r.return(void 0)}))}(e,d,t[p]),14);if(h=t[p.stream],"detection_list"===p.type){if(h){for(var v=h.getRectList(),w=h.getLandmarksList(),k=h.getClassificationsList(),S=[],I=0;I<v.size();++I){var N=tn(v.get(I)),T=void 0;T=void 0===T?0:T,N={la:{sa:et(N,1),ta:et(N,2),height:et(N,3),width:et(N,4),rotation:et(N,5,0),pa:Je(He(N,6),T)},ea:on(w.get(I)),ba:an(qt(k.get(I)))},S.push(N)}v=S}else v=[];a[d]=v,b.h=7;break}if("proto_list"===p.type){if(h){for(v=Array(h.size()),w=0;w<h.size();w++)v[w]=h.get(w);h.delete()}else v=[];a[d]=v,b.h=7;break}if(void 0===h){b.h=3;break}if("float_list"===p.type){a[d]=h,b.h=7;break}if("proto"===p.type){a[d]=h,b.h=7;break}if("texture"!==p.type)throw Error("Unknown output config type: '"+p.type+"'");return(f=e.v[d])||(f=new sn(e.i,e.K),e.v[d]=f),x(b,cn(f,h,e.M),13);case 13:m=b.i,a[d]=m;case 7:p.transform&&a[d]&&(a[d]=p.transform(a[d])),b.h=3;break;case 14:g[y]=b.i;case 3:i=l.next(),b.h=2;break;case 4:return b.return(a)}}))}function yn(e,t){for(var n=t.name||"$",a=[].concat(c(t.wants)),r=new e.i.StringList,o=s(t.wants),i=o.next();!i.done;i=o.next())r.push_back(i.value);o=e.i.PacketListener.implement({onResults:function(r){for(var o={},i=0;i<t.wants.length;++i)o[a[i]]=r.get(i);var s=e.listeners[n];s&&(e.I=gn(e,o,t.outs).then((function(n){n=s(n);for(var r=0;r<t.wants.length;++r){var i=o[a[r]];"object"===typeof i&&i.hasOwnProperty&&i.hasOwnProperty("delete")&&i.delete()}n&&(e.I=n)})))}}),e.j.attachMultiListener(r,o),r.delete()}function bn(e){switch(void 0===e&&(e=0),e){case 1:return"pose_landmark_full.tflite";case 2:return"pose_landmark_heavy.tflite";default:return"pose_landmark_lite.tflite"}}function xn(e){var t=this;e=e||{},this.h=new hn({locateFile:e.locateFile,files:function(e){return[{url:"pose_solution_packed_assets_loader.js"},{simd:!1,url:"pose_solution_wasm_bin.js"},{simd:!0,url:"pose_solution_simd_wasm_bin.js"},{data:!0,url:bn(e.modelComplexity)}]},graph:{url:"pose_web.binarypb"},listeners:[{wants:["pose_landmarks","world_landmarks","segmentation_mask","image_transformed"],outs:{image:{type:"texture",stream:"image_transformed"},poseLandmarks:{type:"proto",stream:"pose_landmarks",transform:on},poseWorldLandmarks:{type:"proto",stream:"world_landmarks",transform:on},segmentationMask:{type:"texture",stream:"segmentation_mask"}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"object"===typeof window&&void 0!==window.navigator&&("iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document)},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},modelComplexity:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelComplexity",fieldName:"int_value"},onChange:function(e){var n,a,r;return C((function(o){return 1==o.h?(n=bn(e),a="third_party/mediapipe/modules/pose_landmark/"+n,x(o,mn(t.h,n),2)):(r=o.i,t.h.overrideFile(a,r),o.return(!0))}))}},smoothLandmarks:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorSmoothLandmarks",fieldName:"bool_value"}},enableSegmentation:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorEnableSegmentation",fieldName:"bool_value"}},smoothSegmentation:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorSmoothSegmentation",fieldName:"bool_value"}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"poselandmarkgpu__posedetectiongpu__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"poselandmarkgpu__poselandmarkbyroigpu__tensorstoposelandmarksandsegmentation__ThresholdingCalculator",fieldName:"threshold"}}}})}(e=hn.prototype).close=function(){return this.j&&this.j.delete(),Promise.resolve()},e.reset=function(){var e=this;return C((function(t){e.j&&(e.j.reset(),e.s={},e.v={}),t.h=0}))},e.setOptions=function(e,t){var n=this;if(t=t||this.h.options){for(var a=[],r=[],o={},i=s(Object.keys(e)),c=i.next();!c.done;o={X:o.X,Y:o.Y},c=i.next())if(!((c=c.value)in this.l)||this.l[c]!==e[c]){this.l[c]=e[c];var u=t[c];void 0!==u&&(u.onChange&&(o.X=u.onChange,o.Y=e[c],a.push(function(e){return function(){return C((function(t){if(1==t.h)return x(t,e.X(e.Y),2);!0===t.i&&(n.u=!0),t.h=0}))}}(o))),u.graphOptionXref&&(c=Object.assign({},{calculatorName:"",calculatorIndex:0},u.graphOptionXref,{valueNumber:1===u.type?e[c]:0,valueBoolean:0===u.type&&e[c],valueString:2===u.type?e[c]:""}),r.push(c)))}0===a.length&&0===r.length||(this.u=!0,this.H=(void 0===this.H?[]:this.H).concat(r),this.F=(void 0===this.F?[]:this.F).concat(a))}},e.initialize=function(){var e=this;return C((function(t){return 1==t.h?x(t,fn(e),2):3!=t.h?x(t,function(e){var t,n,a,r,o,i,c,u;return C((function(l){if(1==l.h)return e.h.graph&&e.h.graph.url&&e.fa===e.h.graph.url?l.return():(e.u=!0,e.h.graph&&e.h.graph.url?(e.fa=e.h.graph.url,x(l,mn(e,e.h.graph.url),3)):void(l.h=2));for(2!=l.h&&(t=l.i,e.j.loadGraph(t)),n=s(Object.keys(e.D)),a=n.next();!a.done;a=n.next())r=a.value,e.j.overrideFile(r,e.D[r]);if(e.D={},e.h.listeners)for(o=s(e.h.listeners),i=o.next();!i.done;i=o.next())c=i.value,yn(e,c);u=e.l,e.l={},e.setOptions(u),l.h=0}))}(e),3):x(t,function(e){var t,n,a,r,o,i;return C((function(c){switch(c.h){case 1:if(!e.u)return c.return();if(!e.F){c.h=2;break}t=s(e.F),n=t.next();case 3:if(n.done){c.h=5;break}return x(c,(0,n.value)(),4);case 4:n=t.next(),c.h=3;break;case 5:e.F=void 0;case 2:if(e.H){for(a=new e.i.GraphOptionChangeRequestList,r=s(e.H),o=r.next();!o.done;o=r.next())i=o.value,a.push_back(i);e.j.changeOptions(a),a.delete(),e.H=void 0}e.u=!1,c.h=0}}))}(e),0)}))},e.overrideFile=function(e,t){this.j?this.j.overrideFile(e,t):this.D[e]=t},e.clearOverriddenFiles=function(){this.D={},this.j&&this.j.clearOverriddenFiles()},e.send=function(e,t){var n,a,r,o,i,c,u,l,d,p=this;return C((function(h){switch(h.h){case 1:return p.h.inputs?(n=1e3*(void 0===t||null===t?performance.now():t),x(h,p.I,2)):h.return();case 2:return x(h,p.initialize(),3);case 3:for(a=new p.i.PacketDataList,r=s(Object.keys(e)),o=r.next();!o.done;o=r.next())if(i=o.value,c=p.h.inputs[i]){e:{var f=e[i];switch(c.type){case"video":var m=p.s[c.stream];if(m||(m=new sn(p.i,p.K),p.s[c.stream]=m),0===m.m&&(m.m=m.i.createTexture()),"undefined"!==typeof HTMLVideoElement&&f instanceof HTMLVideoElement)var g=f.videoWidth,y=f.videoHeight;else"undefined"!==typeof HTMLImageElement&&f instanceof HTMLImageElement?(g=f.naturalWidth,y=f.naturalHeight):(g=f.width,y=f.height);y={glName:m.m,width:g,height:y},(g=m.h).canvas.width=y.width,g.canvas.height=y.height,g.activeTexture(g.TEXTURE0),m.i.bindTexture2d(m.m),g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,f),m.i.bindTexture2d(0),m=y;break e;case"detections":for((m=p.s[c.stream])||(m=new un(p.i),p.s[c.stream]=m),m.data||(m.data=new m.h.DetectionListData),m.data.reset(f.length),y=0;y<f.length;++y){g=f[y];var b=m.data,v=b.setBoundingBox,w=y,k=g.la,S=new Jt;if(Ze(S,1,k.sa),Ze(S,2,k.ta),Ze(S,3,k.height),Ze(S,4,k.width),Ze(S,5,k.rotation),je(S,6,k.pa),k=S.l(),v.call(b,w,k),g.ea)for(b=0;b<g.ea.length;++b){S=g.ea[b],w=(v=m.data).addNormalizedLandmark,k=y,S=Object.assign({},S,{visibility:S.visibility?S.visibility:0});var C=new Xt;Ze(C,1,S.x),Ze(C,2,S.y),Ze(C,3,S.z),S.visibility&&Ze(C,4,S.visibility),S=C.l(),w.call(v,k,S)}if(g.ba)for(b=0;b<g.ba.length;++b)w=(v=m.data).addClassification,k=y,S=g.ba[b],Ze(C=new Gt,2,S.qa),S.index&&je(C,1,S.index),S.label&&je(C,3,S.label),S.displayName&&je(C,4,S.displayName),S=C.l(),w.call(v,k,S)}m=m.data;break e;default:m={}}}switch(u=m,l=c.stream,c.type){case"video":a.pushTexture2d(Object.assign({},u,{stream:l,timestamp:n}));break;case"detections":(d=u).stream=l,d.timestamp=n,a.pushDetectionList(d);break;default:throw Error("Unknown input config type: '"+c.type+"'")}}return p.j.send(a),x(h,p.I,4);case 4:a.delete(),h.h=0}}))},e.onResults=function(e,t){this.listeners[t||"$"]=e},T("Solution",hn),T("OptionType",{BOOL:0,NUMBER:1,ua:2,0:"BOOL",1:"NUMBER",2:"STRING"}),(e=xn.prototype).reset=function(){this.h.reset()},e.close=function(){return this.h.close(),Promise.resolve()},e.onResults=function(e){this.h.onResults(e)},e.initialize=function(){var e=this;return C((function(t){return x(t,e.h.initialize(),0)}))},e.send=function(e,t){var n=this;return C((function(a){return x(a,n.h.send(e,t),0)}))},e.setOptions=function(e){this.h.setOptions(e)},T("Pose",xn),T("POSE_CONNECTIONS",[[0,1],[1,2],[2,3],[3,7],[0,4],[4,5],[5,6],[6,8],[9,10],[11,12],[11,13],[13,15],[15,17],[15,19],[15,21],[17,19],[12,14],[14,16],[16,18],[16,20],[16,22],[18,20],[11,23],[12,24],[23,24],[23,25],[24,26],[25,27],[26,28],[27,29],[28,30],[29,31],[30,32],[27,31],[28,32]]),T("POSE_LANDMARKS",{NOSE:0,LEFT_EYE_INNER:1,LEFT_EYE:2,LEFT_EYE_OUTER:3,RIGHT_EYE_INNER:4,RIGHT_EYE:5,RIGHT_EYE_OUTER:6,LEFT_EAR:7,RIGHT_EAR:8,LEFT_RIGHT:9,RIGHT_LEFT:10,LEFT_SHOULDER:11,RIGHT_SHOULDER:12,LEFT_ELBOW:13,RIGHT_ELBOW:14,LEFT_WRIST:15,RIGHT_WRIST:16,LEFT_PINKY:17,RIGHT_PINKY:18,LEFT_INDEX:19,RIGHT_INDEX:20,LEFT_THUMB:21,RIGHT_THUMB:22,LEFT_HIP:23,RIGHT_HIP:24,LEFT_KNEE:25,RIGHT_KNEE:26,LEFT_ANKLE:27,RIGHT_ANKLE:28,LEFT_HEEL:29,RIGHT_HEEL:30,LEFT_FOOT_INDEX:31,RIGHT_FOOT_INDEX:32}),T("POSE_LANDMARKS_LEFT",{LEFT_EYE_INNER:1,LEFT_EYE:2,LEFT_EYE_OUTER:3,LEFT_EAR:7,LEFT_RIGHT:9,LEFT_SHOULDER:11,LEFT_ELBOW:13,LEFT_WRIST:15,LEFT_PINKY:17,LEFT_INDEX:19,LEFT_THUMB:21,LEFT_HIP:23,LEFT_KNEE:25,LEFT_ANKLE:27,LEFT_HEEL:29,LEFT_FOOT_INDEX:31}),T("POSE_LANDMARKS_RIGHT",{RIGHT_EYE_INNER:4,RIGHT_EYE:5,RIGHT_EYE_OUTER:6,RIGHT_EAR:8,RIGHT_LEFT:10,RIGHT_SHOULDER:12,RIGHT_ELBOW:14,RIGHT_WRIST:16,RIGHT_PINKY:18,RIGHT_INDEX:20,RIGHT_THUMB:22,RIGHT_HIP:24,RIGHT_KNEE:26,RIGHT_ANKLE:28,RIGHT_HEEL:30,RIGHT_FOOT_INDEX:32}),T("POSE_LANDMARKS_NEUTRAL",{NOSE:0}),T("VERSION","0.5.1675469404")}).call(this)},764:(e,t,n)=>{var a=(()=>{var e="undefined"!==typeof document&&document.currentScript?document.currentScript.src:void 0;return e=e||"/index.js",function(t){function a(){return A.buffer!=P&&j(A.buffer),L}function r(){return A.buffer!=P&&j(A.buffer),z}function o(){return A.buffer!=P&&j(A.buffer),B}function i(){return A.buffer!=P&&j(A.buffer),W}function s(){return A.buffer!=P&&j(A.buffer),U}var c,u,l,d="undefined"!=typeof(t=t||{})?t:{};d.ready=new Promise((function(e,t){c=e,u=t})),"undefined"!==typeof process&&process.listeners&&(l={uncaughtException:process.listeners("uncaughtException"),unhandledRejection:process.listeners("unhandledRejection")});var p,h,f,m=Object.assign({},d),g=[],y=(e,t)=>{throw t},b="object"==typeof window,x="function"==typeof importScripts,v="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,w=d.ENVIRONMENT_IS_PTHREAD||!1,k="";function S(e){return d.locateFile?d.locateFile(e,k):k+e}if(v){var C=n(893),I=n(281);let e;k=x?I.dirname(k)+"/":"//",p=(e,t)=>(e=ie(e)?new URL(e):I.normalize(e),C.readFileSync(e,t?void 0:"utf8")),f=e=>{var t=p(e,!0);return t.buffer||(t=new Uint8Array(t)),t},h=(e,t,n)=>{e=ie(e)?new URL(e):I.normalize(e),C.readFile(e,(function(e,a){e?n(e):t(a.buffer)}))},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),g=process.argv.slice(2),process.on("uncaughtException",(function(e){if(!(e instanceof ue))throw e})),process.on("unhandledRejection",(function(e){throw e})),y=(e,t)=>{if(Z())throw process.exitCode=e,t;!function(e){if(e instanceof ue)return;E("exiting due to exception: "+e)}(t),process.exit(e)},d.inspect=function(){return"[Emscripten Module object]"};try{e=n(556)}catch(Qe){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),Qe}n.g.Worker=e.Worker}else(b||x)&&(x?k=self.location.href:"undefined"!=typeof document&&document.currentScript&&(k=document.currentScript.src),"undefined"!==typeof e&&e&&(k=e),k=0!==k.indexOf("blob:")?k.substr(0,k.replace(/[?#].*/,"").lastIndexOf("/")+1):"",v||(p=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},x&&(f=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),h=(e,t,n)=>{var a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType="arraybuffer",a.onload=()=>{200==a.status||0==a.status&&a.response?t(a.response):n()},a.onerror=n,a.send(null)}),e=>document.title=e);v&&"undefined"==typeof performance&&(n.g.performance=n(244).performance);var N=console.log.bind(console),T=console.warn.bind(console);v&&(N=e=>C.writeSync(1,e+"\n"),T=e=>C.writeSync(2,e+"\n"));var _=d.print||N,E=d.printErr||T;Object.assign(d,m),m=null,d.arguments&&(g=d.arguments),d.thisProgram&&d.thisProgram,d.quit&&(y=d.quit);var R;Atomics.load,Atomics.store,Atomics.compareExchange;d.wasmBinary&&(R=d.wasmBinary);var A,O,F=d.noExitRuntime||!0;"object"!=typeof WebAssembly&&ne("no native wasm support detected");var D,M=!1;var P,L,z,B,W,U,V="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function G(e,t,n){for(var a=(t>>>=0)+n,r=t;e[r]&&!(r>=a);)++r;if(r-t>16&&e.buffer&&V)return V.decode(e.buffer instanceof SharedArrayBuffer?e.slice(t,r):e.subarray(t,r));for(var o="";t<r;){var i=e[t++];if(128&i){var s=63&e[t++];if(192!=(224&i)){var c=63&e[t++];if((i=224==(240&i)?(15&i)<<12|s<<6|c:(7&i)<<18|s<<12|c<<6|63&e[t++])<65536)o+=String.fromCharCode(i);else{var u=i-65536;o+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else o+=String.fromCharCode((31&i)<<6|s)}else o+=String.fromCharCode(i)}return o}function H(e,t){return(e>>>=0)?G(r(),e,t):""}function j(e){P=e,d.HEAP8=L=new Int8Array(e),d.HEAP16=new Int16Array(e),d.HEAP32=B=new Int32Array(e),d.HEAPU8=z=new Uint8Array(e),d.HEAPU16=new Uint16Array(e),d.HEAPU32=W=new Uint32Array(e),d.HEAPF32=new Float32Array(e),d.HEAPF64=U=new Float64Array(e)}w&&(P=d.buffer);var K,q=d.INITIAL_MEMORY||16777216;if(w)A=d.wasmMemory,P=d.buffer;else if(d.wasmMemory)A=d.wasmMemory;else if(!((A=new WebAssembly.Memory({initial:q/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw E("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),v&&E("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");A&&(P=A.buffer),q=P.byteLength,j(P);var X=[],Y=[],Q=[];function Z(){return F}function $(){w||me(Y)}var J=0,ee=null,te=null;function ne(e){d.onAbort&&d.onAbort(e),E(e="Aborted("+e+")"),M=!0,D=1,e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);throw u(t),t}var ae,re="data:application/octet-stream;base64,";function oe(e){return e.startsWith(re)}function ie(e){return e.startsWith("file://")}function se(e){try{if(e==ae&&R)return new Uint8Array(R);if(f)return f(e);throw"both async and sync fetching of the wasm failed"}catch(E){ne(E)}}oe(ae="tfjs-backend-wasm-threaded-simd.wasm")||(ae=S(ae));var ce={};function ue(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function le(e){var t,n=fe.pthreads[e];n||ne(t),fe.returnWorkerToPool(n)}function de(e){var t=fe.getNewWorker();if(!t)return 6;fe.runningWorkers.push(t),fe.pthreads[e.pthread_ptr]=t,t.pthread_ptr=e.pthread_ptr;var n={cmd:"run",start_routine:e.startRoutine,arg:e.arg,pthread_ptr:e.pthread_ptr};return t.runPthread=()=>{v&&t.ref(),t.postMessage(n,e.transferList),delete t.runPthread},t.loaded&&t.runPthread(),0}function pe(e){if(w)return Se(1,1,e);D=e,Z()||(fe.terminateAllThreads(),d.onExit&&d.onExit(e),M=!0),y(e,new ue(e))}var he=function(e,t){if(D=e,!t&&w)throw ge(e),"unwind";pe(e)};var fe={unusedWorkers:[],runningWorkers:[],tlsInitFunctions:[],pthreads:{},init:function(){w?fe.initWorker():fe.initMainThread()},initMainThread:function(){for(var e=8;e--;)fe.allocateUnusedWorker()},initWorker:function(){F=!1},setExitStatus:function(e){D=e},terminateAllThreads:function(){for(var e of Object.values(fe.pthreads))fe.returnWorkerToPool(e);for(var e of fe.unusedWorkers)e.terminate();fe.unusedWorkers=[]},returnWorkerToPool:function(e){var t=e.pthread_ptr;delete fe.pthreads[t],fe.unusedWorkers.push(e),fe.runningWorkers.splice(fe.runningWorkers.indexOf(e),1),e.pthread_ptr=0,v&&e.unref(),Ve(t)},receiveObjectTransfer:function(e){},threadInitTLS:function(){fe.tlsInitFunctions.forEach((e=>e()))},loadWasmModuleToWorker:function(t,n){t.onmessage=e=>{var a,r=e.data,o=r.cmd;if(t.pthread_ptr&&(fe.currentProxiedOperationCallerThread=t.pthread_ptr),r.targetThread&&r.targetThread!=ze()){var i=fe.pthreads[r.targetThread];return i?i.postMessage(r,r.transferList):E('Internal error! Worker sent a message "'+o+'" to target pthread '+r.targetThread+", but that thread no longer exists!"),void(fe.currentProxiedOperationCallerThread=void 0)}"processProxyingQueue"===o?we(r.queue):"spawnThread"===o?de(r):"cleanupThread"===o?le(r.thread):"killThread"===o?function(e){var t=fe.pthreads[e];delete fe.pthreads[e],t.terminate(),Ve(e),fe.runningWorkers.splice(fe.runningWorkers.indexOf(t),1),t.pthread_ptr=0}(r.thread):"cancelThread"===o?(a=r.thread,fe.pthreads[a].postMessage({cmd:"cancel"})):"loaded"===o?(t.loaded=!0,v&&t.unref(),n&&n(t),t.runPthread&&t.runPthread()):"print"===o?_("Thread "+r.threadId+": "+r.text):"printErr"===o?E("Thread "+r.threadId+": "+r.text):"alert"===o?alert("Thread "+r.threadId+": "+r.text):"setimmediate"===r.target?t.postMessage(r):"callHandler"===o?d[r.handler](...r.args):o&&E("worker sent an unknown command "+o),fe.currentProxiedOperationCallerThread=void 0},t.onerror=e=>{throw E("worker sent an error! "+e.filename+":"+e.lineno+": "+e.message),e},v&&(t.on("message",(function(e){t.onmessage({data:e})})),t.on("error",(function(e){t.onerror(e)})),t.on("detachedExit",(function(){})));var a=[];for(var r of["onExit","onAbort","print","printErr"])d.hasOwnProperty(r)&&a.push(r);t.postMessage({cmd:"load",handlers:a,urlOrBlob:d.mainScriptUrlOrBlob||e,wasmMemory:A,wasmModule:O})},allocateUnusedWorker:function(){var e,t=S("tfjs-backend-wasm-threaded-simd.worker.js");e=new Worker(t),fe.unusedWorkers.push(e)},getNewWorker:function(){return 0==fe.unusedWorkers.length&&(fe.allocateUnusedWorker(),fe.loadWasmModuleToWorker(fe.unusedWorkers[0])),fe.unusedWorkers.pop()}};function me(e){for(;e.length>0;)e.shift()(d)}function ge(e){if(w)return Se(2,0,e);try{he(e)}catch(Qe){!function(e){if(e instanceof ue||"unwind"==e)return D;y(1,e)}(Qe)}}d.PThread=fe,d.establishStackSpace=function(){var e=ze(),t=o()[e+52>>>2],n=o()[e+56>>>2];He(t,t-n),Ke(t)};var ye=[];function be(e,t,n,a){return w?Se(3,1,e,t,n,a):xe(e,t,n,a)}function xe(e,t,n,a){if("undefined"==typeof SharedArrayBuffer)return E("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var r=[];if(w&&0===r.length)return be(e,t,n,a);var o={startRoutine:n,pthread_ptr:e,arg:a,transferList:r};return w?(o.cmd="spawnThread",postMessage(o,r),0):de(o)}d.invokeEntryPoint=function(e,t){var n=function(e){var t=ye[e];return t||(e>=ye.length&&(ye.length=e+1),ye[e]=t=K.get(e)),t}(e)(t);Z()?fe.setExitStatus(n):Ge(n)};var ve;function we(e){Atomics.store(o(),e>>2,1),ze()&&Ue(e),Atomics.compareExchange(o(),e>>2,1,0)}function ke(e){ke.shown||(ke.shown={}),ke.shown[e]||(ke.shown[e]=1,v&&(e="warning: "+e),E(e))}function Se(e,t){var n=arguments.length-2,a=arguments;return function(e){var t=je(),n=e();return Ke(t),n}((()=>{for(var r=n,o=qe(8*r),i=o>>3,c=0;c<n;c++){var u=a[2+c];s()[i+c>>>0]=u}return We(e,r,o,t)}))}d.executeNotifiedProxyingQueue=we,ve=v?()=>{var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:()=>performance.timeOrigin+performance.now();var Ce=[];function Ie(e){try{return A.grow(e-P.byteLength+65535>>>16),j(A.buffer),1}catch(Qe){}}function Ne(e){return w?Se(4,1,e):52}function Te(e,t,n,a,r){return w?Se(5,1,e,t,n,a,r):70}var _e=[null,[],[]];function Ee(e,t){var n=_e[e];0===t||10===t?((1===e?_:E)(G(n,0)),n.length=0):n.push(t)}function Re(e,t,n,a){if(w)return Se(6,1,e,t,n,a);for(var o=0,s=0;s<n;s++){var c=i()[t>>>2],u=i()[t+4>>>2];t+=8;for(var l=0;l<u;l++)Ee(e,r()[c+l>>>0]);o+=u}return i()[a>>>2]=o,0}function Ae(e){return d["_"+e]}function Oe(e,t,n,o,i){var s={string:e=>{var t=0;if(null!==e&&void 0!==e&&0!==e){var n=1+(e.length<<2);(function(e,t,n){(function(e,t,n,a){if(!(a>0))return 0;for(var r=n>>>=0,o=n+a-1,i=0;i<e.length;++i){var s=e.charCodeAt(i);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++i)),s<=127){if(n>=o)break;t[n++>>>0]=s}else if(s<=2047){if(n+1>=o)break;t[n++>>>0]=192|s>>6,t[n++>>>0]=128|63&s}else if(s<=65535){if(n+2>=o)break;t[n++>>>0]=224|s>>12,t[n++>>>0]=128|s>>6&63,t[n++>>>0]=128|63&s}else{if(n+3>=o)break;t[n++>>>0]=240|s>>18,t[n++>>>0]=128|s>>12&63,t[n++>>>0]=128|s>>6&63,t[n++>>>0]=128|63&s}}t[n>>>0]=0})(e,r(),t,n)})(e,t=qe(n),n)}return t},array:e=>{var t=qe(e.length);return function(e,t){a().set(e,t>>>0)}(e,t),t}};var c=Ae(e),u=[],l=0;if(o)for(var d=0;d<o.length;d++){var p=s[n[d]];p?(0===l&&(l=je()),u[d]=p(o[d])):u[d]=o[d]}var h=c.apply(null,u);return h=function(e){return 0!==l&&Ke(l),function(e){return"string"===t?H(e):"boolean"===t?Boolean(e):e}(e)}(h)}fe.init();var Fe,De,Me,Pe=[null,pe,ge,be,Ne,Te,Re],Le={__emscripten_init_main_thread_js:function(e){Be(e,!x,1,!b),fe.threadInitTLS()},__emscripten_thread_cleanup:function(e){w?postMessage({cmd:"cleanupThread",thread:e}):le(e)},__pthread_create_js:xe,_emscripten_default_pthread_stack_size:function(){return 65536},_emscripten_get_now_is_monotonic:function(){return true},_emscripten_notify_task_queue:function(e,t,n,a){if(e==t)setTimeout((()=>we(a)));else if(w)postMessage({targetThread:e,cmd:"processProxyingQueue",queue:a});else{var r=fe.pthreads[e];if(!r)return;r.postMessage({cmd:"processProxyingQueue",queue:a})}return 1},_emscripten_set_offscreencanvas_size:function(e,t,n){return-1},abort:function(){ne("")},emscripten_check_blocking_allowed:function(){v||x||ke("Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread")},emscripten_date_now:function(){return Date.now()},emscripten_get_heap_max:function(){return 4294901760},emscripten_get_now:ve,emscripten_memcpy_big:function(e,t,n){r().copyWithin(e>>>0,t>>>0,t+n>>>0)},emscripten_num_logical_cores:function(){return v?n(74).cpus().length:navigator.hardwareConcurrency},emscripten_receive_on_main_thread_js:function(e,t,n){Ce.length=t;for(var a=n>>3,r=0;r<t;r++)Ce[r]=s()[a+r>>>0];return(e<0?ce[-e-1]:Pe[e]).apply(null,Ce)},emscripten_resize_heap:function(e){var t=r().length;if((e>>>=0)<=t)return!1;var n,a,o=4294901760;if(e>o)return!1;for(var i=1;i<=4;i*=2){var s=t*(1+.2/i);if(s=Math.min(s,e+100663296),Ie(Math.min(o,(n=Math.max(e,s))+((a=65536)-n%a)%a)))return!0}return!1},emscripten_unwind_to_js_event_loop:function(){throw"unwind"},exit:he,fd_close:Ne,fd_seek:Te,fd_write:Re,memory:A||d.wasmMemory},ze=(function(){var e={env:Le,wasi_snapshot_preview1:Le};function t(e,t){var n,a,r=e.exports;if(d.asm=r,n=d.asm._emscripten_tls_init,fe.tlsInitFunctions.push(n),K=d.asm.__indirect_function_table,a=d.asm.__wasm_call_ctors,Y.unshift(a),O=t,!w){var o=fe.unusedWorkers.length;fe.unusedWorkers.forEach((function(e){fe.loadWasmModuleToWorker(e,(function(){--o||function(){if(J--,d.monitorRunDependencies&&d.monitorRunDependencies(J),0==J&&(null!==ee&&(clearInterval(ee),ee=null),te)){var e=te;te=null,e()}}()}))}))}}function n(e){t(e.instance,e.module)}function a(t){return function(){if(!R&&(b||x)){if("function"==typeof fetch&&!ie(ae))return fetch(ae,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+ae+"'";return e.arrayBuffer()})).catch((function(){return se(ae)}));if(h)return new Promise((function(e,t){h(ae,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return se(ae)}))}().then((function(t){return WebAssembly.instantiate(t,e)})).then((function(e){return e})).then(t,(function(e){E("failed to asynchronously prepare wasm: "+e),ne(e)}))}if(w||(J++,d.monitorRunDependencies&&d.monitorRunDependencies(J)),d.instantiateWasm)try{return d.instantiateWasm(e,t)}catch(Qe){E("Module.instantiateWasm callback failed with error: "+Qe),u(Qe)}(R||"function"!=typeof WebAssembly.instantiateStreaming||oe(ae)||ie(ae)||v||"function"!=typeof fetch?a(n):fetch(ae,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(n,(function(e){return E("wasm streaming compile failed: "+e),E("falling back to ArrayBuffer instantiation"),a(n)}))}))).catch(u)}(),d.___wasm_call_ctors=function(){return(d.___wasm_call_ctors=d.asm.__wasm_call_ctors).apply(null,arguments)},d._init=function(){return(d._init=d.asm.init).apply(null,arguments)},d._init_with_threads_count=function(){return(d._init_with_threads_count=d.asm.init_with_threads_count).apply(null,arguments)},d._get_threads_count=function(){return(d._get_threads_count=d.asm.get_threads_count).apply(null,arguments)},d._register_tensor=function(){return(d._register_tensor=d.asm.register_tensor).apply(null,arguments)},d._dispose_data=function(){return(d._dispose_data=d.asm.dispose_data).apply(null,arguments)},d._dispose=function(){return(d._dispose=d.asm.dispose).apply(null,arguments)},d._Abs=function(){return(d._Abs=d.asm.Abs).apply(null,arguments)},d._Acos=function(){return(d._Acos=d.asm.Acos).apply(null,arguments)},d._Acosh=function(){return(d._Acosh=d.asm.Acosh).apply(null,arguments)},d._Add=function(){return(d._Add=d.asm.Add).apply(null,arguments)},d._AddN=function(){return(d._AddN=d.asm.AddN).apply(null,arguments)},d._All=function(){return(d._All=d.asm.All).apply(null,arguments)},d._Any=function(){return(d._Any=d.asm.Any).apply(null,arguments)},d._ArgMax=function(){return(d._ArgMax=d.asm.ArgMax).apply(null,arguments)},d._ArgMin=function(){return(d._ArgMin=d.asm.ArgMin).apply(null,arguments)},d._Asin=function(){return(d._Asin=d.asm.Asin).apply(null,arguments)},d._Asinh=function(){return(d._Asinh=d.asm.Asinh).apply(null,arguments)},d._Atan=function(){return(d._Atan=d.asm.Atan).apply(null,arguments)},d._Atan2=function(){return(d._Atan2=d.asm.Atan2).apply(null,arguments)},d._Atanh=function(){return(d._Atanh=d.asm.Atanh).apply(null,arguments)},d._AvgPool=function(){return(d._AvgPool=d.asm.AvgPool).apply(null,arguments)},d._AvgPool3D=function(){return(d._AvgPool3D=d.asm.AvgPool3D).apply(null,arguments)},d._AvgPool3DGrad=function(){return(d._AvgPool3DGrad=d.asm.AvgPool3DGrad).apply(null,arguments)},d._AvgPoolGrad=function(){return(d._AvgPoolGrad=d.asm.AvgPoolGrad).apply(null,arguments)},d._BatchMatMul=function(){return(d._BatchMatMul=d.asm.BatchMatMul).apply(null,arguments)},d._Bincount=function(){return(d._Bincount=d.asm.Bincount).apply(null,arguments)},d._BitwiseAnd=function(){return(d._BitwiseAnd=d.asm.BitwiseAnd).apply(null,arguments)},d._Ceil=function(){return(d._Ceil=d.asm.Ceil).apply(null,arguments)},d._ClipByValue=function(){return(d._ClipByValue=d.asm.ClipByValue).apply(null,arguments)},d._Conv2D=function(){return(d._Conv2D=d.asm.Conv2D).apply(null,arguments)},d._Conv2DBackpropInput=function(){return(d._Conv2DBackpropInput=d.asm.Conv2DBackpropInput).apply(null,arguments)},d._Conv3D=function(){return(d._Conv3D=d.asm.Conv3D).apply(null,arguments)},d._Conv3DBackpropFilterV2=function(){return(d._Conv3DBackpropFilterV2=d.asm.Conv3DBackpropFilterV2).apply(null,arguments)},d._Conv3DBackpropInputV2=function(){return(d._Conv3DBackpropInputV2=d.asm.Conv3DBackpropInputV2).apply(null,arguments)},d._Cos=function(){return(d._Cos=d.asm.Cos).apply(null,arguments)},d._Cosh=function(){return(d._Cosh=d.asm.Cosh).apply(null,arguments)},d._CropAndResize=function(){return(d._CropAndResize=d.asm.CropAndResize).apply(null,arguments)},d._Cumprod=function(){return(d._Cumprod=d.asm.Cumprod).apply(null,arguments)},d._Cumsum=function(){return(d._Cumsum=d.asm.Cumsum).apply(null,arguments)},d._DenseBincount=function(){return(d._DenseBincount=d.asm.DenseBincount).apply(null,arguments)},d._DepthToSpace=function(){return(d._DepthToSpace=d.asm.DepthToSpace).apply(null,arguments)},d._DepthwiseConv2dNative=function(){return(d._DepthwiseConv2dNative=d.asm.DepthwiseConv2dNative).apply(null,arguments)},d._Diag=function(){return(d._Diag=d.asm.Diag).apply(null,arguments)},d._Dilation2D=function(){return(d._Dilation2D=d.asm.Dilation2D).apply(null,arguments)},d._Dilation2DBackpropFilter=function(){return(d._Dilation2DBackpropFilter=d.asm.Dilation2DBackpropFilter).apply(null,arguments)},d._Dilation2DBackpropInput=function(){return(d._Dilation2DBackpropInput=d.asm.Dilation2DBackpropInput).apply(null,arguments)},d._Elu=function(){return(d._Elu=d.asm.Elu).apply(null,arguments)},d._EluGrad=function(){return(d._EluGrad=d.asm.EluGrad).apply(null,arguments)},d._Equal=function(){return(d._Equal=d.asm.Equal).apply(null,arguments)},d._Erf=function(){return(d._Erf=d.asm.Erf).apply(null,arguments)},d._Exp=function(){return(d._Exp=d.asm.Exp).apply(null,arguments)},d._Expm1=function(){return(d._Expm1=d.asm.Expm1).apply(null,arguments)},d._FlipLeftRight=function(){return(d._FlipLeftRight=d.asm.FlipLeftRight).apply(null,arguments)},d._Floor=function(){return(d._Floor=d.asm.Floor).apply(null,arguments)},d._FloorDiv=function(){return(d._FloorDiv=d.asm.FloorDiv).apply(null,arguments)},d._FusedBatchNorm=function(){return(d._FusedBatchNorm=d.asm.FusedBatchNorm).apply(null,arguments)},d._FusedConv2D=function(){return(d._FusedConv2D=d.asm.FusedConv2D).apply(null,arguments)},d._FusedDepthwiseConv2D=function(){return(d._FusedDepthwiseConv2D=d.asm.FusedDepthwiseConv2D).apply(null,arguments)},d._Gather=function(){return(d._Gather=d.asm.Gather).apply(null,arguments)},d._GatherNd=function(){return(d._GatherNd=d.asm.GatherNd).apply(null,arguments)},d._Greater=function(){return(d._Greater=d.asm.Greater).apply(null,arguments)},d._GreaterEqual=function(){return(d._GreaterEqual=d.asm.GreaterEqual).apply(null,arguments)},d._IsFinite=function(){return(d._IsFinite=d.asm.IsFinite).apply(null,arguments)},d._IsInf=function(){return(d._IsInf=d.asm.IsInf).apply(null,arguments)},d._IsNan=function(){return(d._IsNan=d.asm.IsNan).apply(null,arguments)},d._LRN=function(){return(d._LRN=d.asm.LRN).apply(null,arguments)},d._LRNGrad=function(){return(d._LRNGrad=d.asm.LRNGrad).apply(null,arguments)},d._LeakyRelu=function(){return(d._LeakyRelu=d.asm.LeakyRelu).apply(null,arguments)},d._Less=function(){return(d._Less=d.asm.Less).apply(null,arguments)},d._LessEqual=function(){return(d._LessEqual=d.asm.LessEqual).apply(null,arguments)},d._LinSpace=function(){return(d._LinSpace=d.asm.LinSpace).apply(null,arguments)},d._Log=function(){return(d._Log=d.asm.Log).apply(null,arguments)},d._Log1p=function(){return(d._Log1p=d.asm.Log1p).apply(null,arguments)},d._LogicalAnd=function(){return(d._LogicalAnd=d.asm.LogicalAnd).apply(null,arguments)},d._LogicalNot=function(){return(d._LogicalNot=d.asm.LogicalNot).apply(null,arguments)},d._LogicalOr=function(){return(d._LogicalOr=d.asm.LogicalOr).apply(null,arguments)},d._LogicalXor=function(){return(d._LogicalXor=d.asm.LogicalXor).apply(null,arguments)},d._Max=function(){return(d._Max=d.asm.Max).apply(null,arguments)},d._MaxPool=function(){return(d._MaxPool=d.asm.MaxPool).apply(null,arguments)},d._MaxPool3D=function(){return(d._MaxPool3D=d.asm.MaxPool3D).apply(null,arguments)},d._MaxPool3DGrad=function(){return(d._MaxPool3DGrad=d.asm.MaxPool3DGrad).apply(null,arguments)},d._MaxPoolGrad=function(){return(d._MaxPoolGrad=d.asm.MaxPoolGrad).apply(null,arguments)},d._MaxPoolWithArgmax=function(){return(d._MaxPoolWithArgmax=d.asm.MaxPoolWithArgmax).apply(null,arguments)},d._Maximum=function(){return(d._Maximum=d.asm.Maximum).apply(null,arguments)},d._Mean=function(){return(d._Mean=d.asm.Mean).apply(null,arguments)},d._Min=function(){return(d._Min=d.asm.Min).apply(null,arguments)},d._Minimum=function(){return(d._Minimum=d.asm.Minimum).apply(null,arguments)},d._MirrorPad=function(){return(d._MirrorPad=d.asm.MirrorPad).apply(null,arguments)},d._Mod=function(){return(d._Mod=d.asm.Mod).apply(null,arguments)},d._Multinomial=function(){return(d._Multinomial=d.asm.Multinomial).apply(null,arguments)},d._Multiply=function(){return(d._Multiply=d.asm.Multiply).apply(null,arguments)},d._Neg=function(){return(d._Neg=d.asm.Neg).apply(null,arguments)},d._NonMaxSuppressionV3=function(){return(d._NonMaxSuppressionV3=d.asm.NonMaxSuppressionV3).apply(null,arguments)},d._NonMaxSuppressionV4=function(){return(d._NonMaxSuppressionV4=d.asm.NonMaxSuppressionV4).apply(null,arguments)},d._NonMaxSuppressionV5=function(){return(d._NonMaxSuppressionV5=d.asm.NonMaxSuppressionV5).apply(null,arguments)},d._NotEqual=function(){return(d._NotEqual=d.asm.NotEqual).apply(null,arguments)},d._OneHot=function(){return(d._OneHot=d.asm.OneHot).apply(null,arguments)},d._PadV2=function(){return(d._PadV2=d.asm.PadV2).apply(null,arguments)},d._Pow=function(){return(d._Pow=d.asm.Pow).apply(null,arguments)},d._Prelu=function(){return(d._Prelu=d.asm.Prelu).apply(null,arguments)},d._Prod=function(){return(d._Prod=d.asm.Prod).apply(null,arguments)},d._RealDiv=function(){return(d._RealDiv=d.asm.RealDiv).apply(null,arguments)},d._Reciprocal=function(){return(d._Reciprocal=d.asm.Reciprocal).apply(null,arguments)},d._Relu=function(){return(d._Relu=d.asm.Relu).apply(null,arguments)},d._Relu6=function(){return(d._Relu6=d.asm.Relu6).apply(null,arguments)},d._ResizeBilinear=function(){return(d._ResizeBilinear=d.asm.ResizeBilinear).apply(null,arguments)},d._ResizeBilinearGrad=function(){return(d._ResizeBilinearGrad=d.asm.ResizeBilinearGrad).apply(null,arguments)},d._ResizeNearestNeighbor=function(){return(d._ResizeNearestNeighbor=d.asm.ResizeNearestNeighbor).apply(null,arguments)},d._ResizeNearestNeighborGrad=function(){return(d._ResizeNearestNeighborGrad=d.asm.ResizeNearestNeighborGrad).apply(null,arguments)},d._Reverse=function(){return(d._Reverse=d.asm.Reverse).apply(null,arguments)},d._RotateWithOffset=function(){return(d._RotateWithOffset=d.asm.RotateWithOffset).apply(null,arguments)},d._Round=function(){return(d._Round=d.asm.Round).apply(null,arguments)},d._Rsqrt=function(){return(d._Rsqrt=d.asm.Rsqrt).apply(null,arguments)},d._ScatterNd=function(){return(d._ScatterNd=d.asm.ScatterNd).apply(null,arguments)},d._SearchSorted=function(){return(d._SearchSorted=d.asm.SearchSorted).apply(null,arguments)},d._SelectV2=function(){return(d._SelectV2=d.asm.SelectV2).apply(null,arguments)},d._Selu=function(){return(d._Selu=d.asm.Selu).apply(null,arguments)},d._Sigmoid=function(){return(d._Sigmoid=d.asm.Sigmoid).apply(null,arguments)},d._Sign=function(){return(d._Sign=d.asm.Sign).apply(null,arguments)},d._Sin=function(){return(d._Sin=d.asm.Sin).apply(null,arguments)},d._Sinh=function(){return(d._Sinh=d.asm.Sinh).apply(null,arguments)},d._Softmax=function(){return(d._Softmax=d.asm.Softmax).apply(null,arguments)},d._Softplus=function(){return(d._Softplus=d.asm.Softplus).apply(null,arguments)},d._SparseFillEmptyRows=function(){return(d._SparseFillEmptyRows=d.asm.SparseFillEmptyRows).apply(null,arguments)},d._SparseReshape=function(){return(d._SparseReshape=d.asm.SparseReshape).apply(null,arguments)},d._SparseSegmentReduction=function(){return(d._SparseSegmentReduction=d.asm.SparseSegmentReduction).apply(null,arguments)},d._SparseToDense=function(){return(d._SparseToDense=d.asm.SparseToDense).apply(null,arguments)},d._Sqrt=function(){return(d._Sqrt=d.asm.Sqrt).apply(null,arguments)},d._Square=function(){return(d._Square=d.asm.Square).apply(null,arguments)},d._SquaredDifference=function(){return(d._SquaredDifference=d.asm.SquaredDifference).apply(null,arguments)},d._Step=function(){return(d._Step=d.asm.Step).apply(null,arguments)},d._StridedSlice=function(){return(d._StridedSlice=d.asm.StridedSlice).apply(null,arguments)},d._Sub=function(){return(d._Sub=d.asm.Sub).apply(null,arguments)},d._Sum=function(){return(d._Sum=d.asm.Sum).apply(null,arguments)},d._Tan=function(){return(d._Tan=d.asm.Tan).apply(null,arguments)},d._Tanh=function(){return(d._Tanh=d.asm.Tanh).apply(null,arguments)},d._TensorScatterUpdate=function(){return(d._TensorScatterUpdate=d.asm.TensorScatterUpdate).apply(null,arguments)},d._Tile=function(){return(d._Tile=d.asm.Tile).apply(null,arguments)},d._TopK=function(){return(d._TopK=d.asm.TopK).apply(null,arguments)},d._Transform=function(){return(d._Transform=d.asm.Transform).apply(null,arguments)},d._Transpose=function(){return(d._Transpose=d.asm.Transpose).apply(null,arguments)},d.__FusedMatMul=function(){return(d.__FusedMatMul=d.asm._FusedMatMul).apply(null,arguments)},d._malloc=function(){return(d._malloc=d.asm.malloc).apply(null,arguments)},d._free=function(){return(d._free=d.asm.free).apply(null,arguments)},d.__emscripten_tls_init=function(){return(d.__emscripten_tls_init=d.asm._emscripten_tls_init).apply(null,arguments)},d._pthread_self=function(){return(ze=d._pthread_self=d.asm.pthread_self).apply(null,arguments)}),Be=(d.___errno_location=function(){return(d.___errno_location=d.asm.__errno_location).apply(null,arguments)},d.__emscripten_thread_init=function(){return(Be=d.__emscripten_thread_init=d.asm._emscripten_thread_init).apply(null,arguments)}),We=(d.__emscripten_thread_crashed=function(){return(d.__emscripten_thread_crashed=d.asm._emscripten_thread_crashed).apply(null,arguments)},d._emscripten_main_thread_process_queued_calls=function(){return(d._emscripten_main_thread_process_queued_calls=d.asm.emscripten_main_thread_process_queued_calls).apply(null,arguments)},d._emscripten_main_browser_thread_id=function(){return(d._emscripten_main_browser_thread_id=d.asm.emscripten_main_browser_thread_id).apply(null,arguments)},d._emscripten_run_in_main_runtime_thread_js=function(){return(We=d._emscripten_run_in_main_runtime_thread_js=d.asm.emscripten_run_in_main_runtime_thread_js).apply(null,arguments)}),Ue=(d._emscripten_dispatch_to_thread_=function(){return(d._emscripten_dispatch_to_thread_=d.asm.emscripten_dispatch_to_thread_).apply(null,arguments)},d.__emscripten_proxy_execute_task_queue=function(){return(Ue=d.__emscripten_proxy_execute_task_queue=d.asm._emscripten_proxy_execute_task_queue).apply(null,arguments)}),Ve=d.__emscripten_thread_free_data=function(){return(Ve=d.__emscripten_thread_free_data=d.asm._emscripten_thread_free_data).apply(null,arguments)},Ge=d.__emscripten_thread_exit=function(){return(Ge=d.__emscripten_thread_exit=d.asm._emscripten_thread_exit).apply(null,arguments)},He=d._emscripten_stack_set_limits=function(){return(He=d._emscripten_stack_set_limits=d.asm.emscripten_stack_set_limits).apply(null,arguments)},je=d.stackSave=function(){return(je=d.stackSave=d.asm.stackSave).apply(null,arguments)},Ke=d.stackRestore=function(){return(Ke=d.stackRestore=d.asm.stackRestore).apply(null,arguments)},qe=d.stackAlloc=function(){return(qe=d.stackAlloc=d.asm.stackAlloc).apply(null,arguments)};d.dynCall_iijjiiii=function(){return(d.dynCall_iijjiiii=d.asm.dynCall_iijjiiii).apply(null,arguments)},d.dynCall_jiji=function(){return(d.dynCall_jiji=d.asm.dynCall_jiji).apply(null,arguments)};function Xe(e){if(e=e||g,!(J>0)){if(w)return c(d),$(),void startWorker(d);!function(){if(d.preRun)for("function"==typeof d.preRun&&(d.preRun=[d.preRun]);d.preRun.length;)e=d.preRun.shift(),X.unshift(e);var e;me(X)}(),J>0||(d.setStatus?(d.setStatus("Running..."),setTimeout((function(){setTimeout((function(){d.setStatus("")}),1),t()}),1)):t())}function t(){Fe||(Fe=!0,d.calledRun=!0,M||($(),c(d),d.onRuntimeInitialized&&d.onRuntimeInitialized(),function(){if(!w){if(d.postRun)for("function"==typeof d.postRun&&(d.postRun=[d.postRun]);d.postRun.length;)e=d.postRun.shift(),Q.unshift(e);var e;me(Q)}}()))}}if(d.keepRuntimeAlive=Z,d.wasmMemory=A,d.cwrap=function(e,t,n,a){var r=(n=n||[]).every((e=>"number"===e||"boolean"===e));return"string"!==t&&r&&!a?Ae(e):function(){return Oe(e,t,n,arguments)}},d.ExitStatus=ue,d.PThread=fe,te=function e(){Fe||Xe(),Fe||(te=e)},d.preInit)for("function"==typeof d.preInit&&(d.preInit=[d.preInit]);d.preInit.length>0;)d.preInit.pop()();if(Xe(),l&&(De={uncaughtException:process.listeners("uncaughtException").filter((function(e){return!l.uncaughtException.indexOf(e)>-1})),unhandledRejection:process.listeners("unhandledRejection").filter((function(e){return!l.unhandledRejection.indexOf(e)>-1}))}),"undefined"!==typeof WasmBackendModule)Me=WasmBackendModule;else{if("undefined"===typeof t)throw new Error("Could not find wasm module in post.js");Me=t}if(De){var Ye=Me._dispose;Me._dispose=function(){Ye(),De.uncaughtException.forEach((function(e){process.removeListener("uncaughtException",e)})),De.unhandledRejection.forEach((function(e){process.removeListener("unhandledRejection",e)}))}}return t.ready}})();e.exports=a},562:e=>{e.exports.$='"use strict";var Module={};var ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads");var parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",data=>onmessage({data:data}));var fs=require("fs");Object.assign(global,{self:global,require:require,Module:Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:function(f){(0,eval)(fs.readFileSync(f,"utf8")+"//# sourceURL="+f)},postMessage:function(msg){parentPort.postMessage(msg)},performance:global.performance||{now:function(){return Date.now()}}})}var initializedJS=false;var pendingNotifiedProxyingQueues=[];function threadPrintErr(){var text=Array.prototype.slice.call(arguments).join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,text+"\n");return}console.error(text)}function threadAlert(){var text=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:text,threadId:Module["_pthread_self"]()})}var err=threadPrintErr;self.alert=threadAlert;Module["instantiateWasm"]=(info,receiveInstance)=>{var instance=new WebAssembly.Instance(Module["wasmModule"],info);receiveInstance(instance);Module["wasmModule"]=null;return instance.exports};self.onunhandledrejection=e=>{throw e.reason??e};self.startWorker=instance=>{Module=instance;postMessage({"cmd":"loaded"})};self.onmessage=e=>{try{if(e.data.cmd==="load"){Module["wasmModule"]=e.data.wasmModule;for(const handler of e.data.handlers){Module[handler]=function(){postMessage({cmd:"callHandler",handler:handler,args:[...arguments]})}}Module["wasmMemory"]=e.data.wasmMemory;Module["buffer"]=Module["wasmMemory"].buffer;Module["ENVIRONMENT_IS_PTHREAD"]=true;if(typeof e.data.urlOrBlob=="string"){importScripts(e.data.urlOrBlob)}else{var objectUrl=URL.createObjectURL(e.data.urlOrBlob);importScripts(objectUrl);URL.revokeObjectURL(objectUrl)}WasmBackendModuleThreadedSimd(Module)}else if(e.data.cmd==="run"){Module["__emscripten_thread_init"](e.data.pthread_ptr,0,0,1);Module["establishStackSpace"]();Module["PThread"].receiveObjectTransfer(e.data);Module["PThread"].threadInitTLS();if(!initializedJS){pendingNotifiedProxyingQueues.forEach(queue=>{Module["executeNotifiedProxyingQueue"](queue)});pendingNotifiedProxyingQueues=[];initializedJS=true}try{Module["invokeEntryPoint"](e.data.start_routine,e.data.arg)}catch(ex){if(ex!="unwind"){if(ex instanceof Module["ExitStatus"]){if(Module["keepRuntimeAlive"]()){}else{Module["__emscripten_thread_exit"](ex.status)}}else{throw ex}}}}else if(e.data.cmd==="cancel"){if(Module["_pthread_self"]()){Module["__emscripten_thread_exit"](-1)}}else if(e.data.target==="setimmediate"){}else if(e.data.cmd==="processProxyingQueue"){if(initializedJS){Module["executeNotifiedProxyingQueue"](e.data.queue)}else{pendingNotifiedProxyingQueues.push(e.data.queue)}}else if(e.data.cmd){err("worker.js received unknown command "+e.data.cmd);err(e.data)}}catch(ex){if(Module["__emscripten_thread_crashed"]){Module["__emscripten_thread_crashed"]()}throw ex}};'},372:(e,t,n)=>{var a=(()=>{var e="undefined"!==typeof document&&document.currentScript?document.currentScript.src:void 0;return e=e||"/index.js",function(t){var a,r,o,i="undefined"!=typeof(t=t||{})?t:{};i.ready=new Promise((function(e,t){a=e,r=t})),"undefined"!==typeof process&&process.listeners&&(o={uncaughtException:process.listeners("uncaughtException"),unhandledRejection:process.listeners("unhandledRejection")});var s,c,u,l=Object.assign({},i),d=[],p="object"==typeof window,h="function"==typeof importScripts,f="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,m="";if(f){var g=n(893),y=n(281);m=h?y.dirname(m)+"/":"//",s=(e,t)=>(e=G(e)?new URL(e):y.normalize(e),g.readFileSync(e,t?void 0:"utf8")),u=e=>{var t=s(e,!0);return t.buffer||(t=new Uint8Array(t)),t},c=(e,t,n)=>{e=G(e)?new URL(e):y.normalize(e),g.readFile(e,(function(e,a){e?n(e):t(a.buffer)}))},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),d=process.argv.slice(2),process.on("uncaughtException",(function(e){if(!(e instanceof j))throw e})),process.on("unhandledRejection",(function(e){throw e})),i.inspect=function(){return"[Emscripten Module object]"}}else(p||h)&&(h?m=self.location.href:"undefined"!=typeof document&&document.currentScript&&(m=document.currentScript.src),e&&(m=e),m=0!==m.indexOf("blob:")?m.substr(0,m.replace(/[?#].*/,"").lastIndexOf("/")+1):"",s=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},h&&(u=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),c=(e,t,n)=>{var a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType="arraybuffer",a.onload=()=>{200==a.status||0==a.status&&a.response?t(a.response):n()},a.onerror=n,a.send(null)},e=>document.title=e);var b=i.print||console.log.bind(console),x=i.printErr||console.warn.bind(console);Object.assign(i,l),l=null,i.arguments&&(d=i.arguments),i.thisProgram&&i.thisProgram,i.quit&&i.quit;var v;i.wasmBinary&&(v=i.wasmBinary);var w,k=i.noExitRuntime||!0;"object"!=typeof WebAssembly&&z("no native wasm support detected");var S=!1;var C,I,N,T,_="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function E(e,t,n){for(var a=(t>>>=0)+n,r=t;e[r]&&!(r>=a);)++r;if(r-t>16&&e.buffer&&_)return _.decode(e.subarray(t,r));for(var o="";t<r;){var i=e[t++];if(128&i){var s=63&e[t++];if(192!=(224&i)){var c=63&e[t++];if((i=224==(240&i)?(15&i)<<12|s<<6|c:(7&i)<<18|s<<12|c<<6|63&e[t++])<65536)o+=String.fromCharCode(i);else{var u=i-65536;o+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else o+=String.fromCharCode((31&i)<<6|s)}else o+=String.fromCharCode(i)}return o}function R(e,t){return(e>>>=0)?E(N,e,t):""}function A(e){C=e,i.HEAP8=I=new Int8Array(e),i.HEAP16=new Int16Array(e),i.HEAP32=new Int32Array(e),i.HEAPU8=N=new Uint8Array(e),i.HEAPU16=new Uint16Array(e),i.HEAPU32=T=new Uint32Array(e),i.HEAPF32=new Float32Array(e),i.HEAPF64=new Float64Array(e)}i.INITIAL_MEMORY;var O=[],F=[],D=[];var M=0,P=null,L=null;function z(e){i.onAbort&&i.onAbort(e),x(e="Aborted("+e+")"),S=!0,e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);throw r(t),t}var B,W,U="data:application/octet-stream;base64,";function V(e){return e.startsWith(U)}function G(e){return e.startsWith("file://")}function H(e){try{if(e==B&&v)return new Uint8Array(v);if(u)return u(e);throw"both async and sync fetching of the wasm failed"}catch(x){z(x)}}function j(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function K(e){for(;e.length>0;)e.shift()(i)}function q(e){try{return w.grow(e-C.byteLength+65535>>>16),A(w.buffer),1}catch(t){}}V(B="tfjs-backend-wasm.wasm")||(W=B,B=i.locateFile?i.locateFile(W,m):m+W);var X=[null,[],[]];function Y(e,t){var n=X[e];0===t||10===t?((1===e?b:x)(E(n,0)),n.length=0):n.push(t)}function Q(e){return i["_"+e]}function Z(e,t,n,a,r){var o={string:e=>{var t=0;if(null!==e&&void 0!==e&&0!==e){var n=1+(e.length<<2);(function(e,t,n){(function(e,t,n,a){if(!(a>0))return 0;for(var r=n>>>=0,o=n+a-1,i=0;i<e.length;++i){var s=e.charCodeAt(i);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++i)),s<=127){if(n>=o)break;t[n++>>>0]=s}else if(s<=2047){if(n+1>=o)break;t[n++>>>0]=192|s>>6,t[n++>>>0]=128|63&s}else if(s<=65535){if(n+2>=o)break;t[n++>>>0]=224|s>>12,t[n++>>>0]=128|s>>6&63,t[n++>>>0]=128|63&s}else{if(n+3>=o)break;t[n++>>>0]=240|s>>18,t[n++>>>0]=128|s>>12&63,t[n++>>>0]=128|s>>6&63,t[n++>>>0]=128|63&s}}t[n>>>0]=0})(e,N,t,n)})(e,t=re(n),n)}return t},array:e=>{var t=re(e.length);return function(e,t){I.set(e,t>>>0)}(e,t),t}};var i=Q(e),s=[],c=0;if(a)for(var u=0;u<a.length;u++){var l=o[n[u]];l?(0===c&&(c=ne()),s[u]=l(a[u])):s[u]=a[u]}var d=i.apply(null,s);return d=function(e){return 0!==c&&ae(c),function(e){return"string"===t?R(e):"boolean"===t?Boolean(e):e}(e)}(d)}var $,J,ee,te={abort:function(){z("")},emscripten_get_heap_max:function(){return 4294901760},emscripten_memcpy_big:function(e,t,n){N.copyWithin(e>>>0,t>>>0,t+n>>>0)},emscripten_resize_heap:function(e){var t,n,a=N.length,r=4294901760;if((e>>>=0)>r)return!1;for(var o=1;o<=4;o*=2){var i=a*(1+.2/o);if(i=Math.min(i,e+100663296),q(Math.min(r,(t=Math.max(e,i))+((n=65536)-t%n)%n)))return!0}return!1},fd_close:function(e){return 52},fd_seek:function(e,t,n,a,r){return 70},fd_write:function(e,t,n,a){for(var r=0,o=0;o<n;o++){var i=T[t>>>2],s=T[t+4>>>2];t+=8;for(var c=0;c<s;c++)Y(e,N[i+c>>>0]);r+=s}return T[a>>>2]=r,0}},ne=(function(){var e={env:te,wasi_snapshot_preview1:te};function t(e,t){var n,a=e.exports;i.asm=a,A((w=i.asm.memory).buffer),i.asm.__indirect_function_table,n=i.asm.__wasm_call_ctors,F.unshift(n),function(){if(M--,i.monitorRunDependencies&&i.monitorRunDependencies(M),0==M&&(null!==P&&(clearInterval(P),P=null),L)){var e=L;L=null,e()}}()}function n(e){t(e.instance)}function a(t){return function(){if(!v&&(p||h)){if("function"==typeof fetch&&!G(B))return fetch(B,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+B+"'";return e.arrayBuffer()})).catch((function(){return H(B)}));if(c)return new Promise((function(e,t){c(B,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return H(B)}))}().then((function(t){return WebAssembly.instantiate(t,e)})).then((function(e){return e})).then(t,(function(e){x("failed to asynchronously prepare wasm: "+e),z(e)}))}if(M++,i.monitorRunDependencies&&i.monitorRunDependencies(M),i.instantiateWasm)try{return i.instantiateWasm(e,t)}catch(o){x("Module.instantiateWasm callback failed with error: "+o),r(o)}(v||"function"!=typeof WebAssembly.instantiateStreaming||V(B)||G(B)||f||"function"!=typeof fetch?a(n):fetch(B,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(n,(function(e){return x("wasm streaming compile failed: "+e),x("falling back to ArrayBuffer instantiation"),a(n)}))}))).catch(r)}(),i.___wasm_call_ctors=function(){return(i.___wasm_call_ctors=i.asm.__wasm_call_ctors).apply(null,arguments)},i._init=function(){return(i._init=i.asm.init).apply(null,arguments)},i._init_with_threads_count=function(){return(i._init_with_threads_count=i.asm.init_with_threads_count).apply(null,arguments)},i._get_threads_count=function(){return(i._get_threads_count=i.asm.get_threads_count).apply(null,arguments)},i._register_tensor=function(){return(i._register_tensor=i.asm.register_tensor).apply(null,arguments)},i._dispose_data=function(){return(i._dispose_data=i.asm.dispose_data).apply(null,arguments)},i._dispose=function(){return(i._dispose=i.asm.dispose).apply(null,arguments)},i._Abs=function(){return(i._Abs=i.asm.Abs).apply(null,arguments)},i._Acos=function(){return(i._Acos=i.asm.Acos).apply(null,arguments)},i._Acosh=function(){return(i._Acosh=i.asm.Acosh).apply(null,arguments)},i._Add=function(){return(i._Add=i.asm.Add).apply(null,arguments)},i._AddN=function(){return(i._AddN=i.asm.AddN).apply(null,arguments)},i._All=function(){return(i._All=i.asm.All).apply(null,arguments)},i._Any=function(){return(i._Any=i.asm.Any).apply(null,arguments)},i._ArgMax=function(){return(i._ArgMax=i.asm.ArgMax).apply(null,arguments)},i._ArgMin=function(){return(i._ArgMin=i.asm.ArgMin).apply(null,arguments)},i._Asin=function(){return(i._Asin=i.asm.Asin).apply(null,arguments)},i._Asinh=function(){return(i._Asinh=i.asm.Asinh).apply(null,arguments)},i._Atan=function(){return(i._Atan=i.asm.Atan).apply(null,arguments)},i._Atan2=function(){return(i._Atan2=i.asm.Atan2).apply(null,arguments)},i._Atanh=function(){return(i._Atanh=i.asm.Atanh).apply(null,arguments)},i._AvgPool=function(){return(i._AvgPool=i.asm.AvgPool).apply(null,arguments)},i._AvgPool3D=function(){return(i._AvgPool3D=i.asm.AvgPool3D).apply(null,arguments)},i._AvgPool3DGrad=function(){return(i._AvgPool3DGrad=i.asm.AvgPool3DGrad).apply(null,arguments)},i._AvgPoolGrad=function(){return(i._AvgPoolGrad=i.asm.AvgPoolGrad).apply(null,arguments)},i._BatchMatMul=function(){return(i._BatchMatMul=i.asm.BatchMatMul).apply(null,arguments)},i._Bincount=function(){return(i._Bincount=i.asm.Bincount).apply(null,arguments)},i._BitwiseAnd=function(){return(i._BitwiseAnd=i.asm.BitwiseAnd).apply(null,arguments)},i._Ceil=function(){return(i._Ceil=i.asm.Ceil).apply(null,arguments)},i._ClipByValue=function(){return(i._ClipByValue=i.asm.ClipByValue).apply(null,arguments)},i._Conv2D=function(){return(i._Conv2D=i.asm.Conv2D).apply(null,arguments)},i._Conv2DBackpropInput=function(){return(i._Conv2DBackpropInput=i.asm.Conv2DBackpropInput).apply(null,arguments)},i._Conv3D=function(){return(i._Conv3D=i.asm.Conv3D).apply(null,arguments)},i._Conv3DBackpropFilterV2=function(){return(i._Conv3DBackpropFilterV2=i.asm.Conv3DBackpropFilterV2).apply(null,arguments)},i._Conv3DBackpropInputV2=function(){return(i._Conv3DBackpropInputV2=i.asm.Conv3DBackpropInputV2).apply(null,arguments)},i._Cos=function(){return(i._Cos=i.asm.Cos).apply(null,arguments)},i._Cosh=function(){return(i._Cosh=i.asm.Cosh).apply(null,arguments)},i._CropAndResize=function(){return(i._CropAndResize=i.asm.CropAndResize).apply(null,arguments)},i._Cumprod=function(){return(i._Cumprod=i.asm.Cumprod).apply(null,arguments)},i._Cumsum=function(){return(i._Cumsum=i.asm.Cumsum).apply(null,arguments)},i._DenseBincount=function(){return(i._DenseBincount=i.asm.DenseBincount).apply(null,arguments)},i._DepthToSpace=function(){return(i._DepthToSpace=i.asm.DepthToSpace).apply(null,arguments)},i._DepthwiseConv2dNative=function(){return(i._DepthwiseConv2dNative=i.asm.DepthwiseConv2dNative).apply(null,arguments)},i._Diag=function(){return(i._Diag=i.asm.Diag).apply(null,arguments)},i._Dilation2D=function(){return(i._Dilation2D=i.asm.Dilation2D).apply(null,arguments)},i._Dilation2DBackpropFilter=function(){return(i._Dilation2DBackpropFilter=i.asm.Dilation2DBackpropFilter).apply(null,arguments)},i._Dilation2DBackpropInput=function(){return(i._Dilation2DBackpropInput=i.asm.Dilation2DBackpropInput).apply(null,arguments)},i._Elu=function(){return(i._Elu=i.asm.Elu).apply(null,arguments)},i._EluGrad=function(){return(i._EluGrad=i.asm.EluGrad).apply(null,arguments)},i._Equal=function(){return(i._Equal=i.asm.Equal).apply(null,arguments)},i._Erf=function(){return(i._Erf=i.asm.Erf).apply(null,arguments)},i._Exp=function(){return(i._Exp=i.asm.Exp).apply(null,arguments)},i._Expm1=function(){return(i._Expm1=i.asm.Expm1).apply(null,arguments)},i._FlipLeftRight=function(){return(i._FlipLeftRight=i.asm.FlipLeftRight).apply(null,arguments)},i._Floor=function(){return(i._Floor=i.asm.Floor).apply(null,arguments)},i._FloorDiv=function(){return(i._FloorDiv=i.asm.FloorDiv).apply(null,arguments)},i._FusedBatchNorm=function(){return(i._FusedBatchNorm=i.asm.FusedBatchNorm).apply(null,arguments)},i._FusedConv2D=function(){return(i._FusedConv2D=i.asm.FusedConv2D).apply(null,arguments)},i._FusedDepthwiseConv2D=function(){return(i._FusedDepthwiseConv2D=i.asm.FusedDepthwiseConv2D).apply(null,arguments)},i._Gather=function(){return(i._Gather=i.asm.Gather).apply(null,arguments)},i._GatherNd=function(){return(i._GatherNd=i.asm.GatherNd).apply(null,arguments)},i._Greater=function(){return(i._Greater=i.asm.Greater).apply(null,arguments)},i._GreaterEqual=function(){return(i._GreaterEqual=i.asm.GreaterEqual).apply(null,arguments)},i._IsFinite=function(){return(i._IsFinite=i.asm.IsFinite).apply(null,arguments)},i._IsInf=function(){return(i._IsInf=i.asm.IsInf).apply(null,arguments)},i._IsNan=function(){return(i._IsNan=i.asm.IsNan).apply(null,arguments)},i._LRN=function(){return(i._LRN=i.asm.LRN).apply(null,arguments)},i._LRNGrad=function(){return(i._LRNGrad=i.asm.LRNGrad).apply(null,arguments)},i._LeakyRelu=function(){return(i._LeakyRelu=i.asm.LeakyRelu).apply(null,arguments)},i._Less=function(){return(i._Less=i.asm.Less).apply(null,arguments)},i._LessEqual=function(){return(i._LessEqual=i.asm.LessEqual).apply(null,arguments)},i._LinSpace=function(){return(i._LinSpace=i.asm.LinSpace).apply(null,arguments)},i._Log=function(){return(i._Log=i.asm.Log).apply(null,arguments)},i._Log1p=function(){return(i._Log1p=i.asm.Log1p).apply(null,arguments)},i._LogicalAnd=function(){return(i._LogicalAnd=i.asm.LogicalAnd).apply(null,arguments)},i._LogicalNot=function(){return(i._LogicalNot=i.asm.LogicalNot).apply(null,arguments)},i._LogicalOr=function(){return(i._LogicalOr=i.asm.LogicalOr).apply(null,arguments)},i._LogicalXor=function(){return(i._LogicalXor=i.asm.LogicalXor).apply(null,arguments)},i._Max=function(){return(i._Max=i.asm.Max).apply(null,arguments)},i._MaxPool=function(){return(i._MaxPool=i.asm.MaxPool).apply(null,arguments)},i._MaxPool3D=function(){return(i._MaxPool3D=i.asm.MaxPool3D).apply(null,arguments)},i._MaxPool3DGrad=function(){return(i._MaxPool3DGrad=i.asm.MaxPool3DGrad).apply(null,arguments)},i._MaxPoolGrad=function(){return(i._MaxPoolGrad=i.asm.MaxPoolGrad).apply(null,arguments)},i._MaxPoolWithArgmax=function(){return(i._MaxPoolWithArgmax=i.asm.MaxPoolWithArgmax).apply(null,arguments)},i._Maximum=function(){return(i._Maximum=i.asm.Maximum).apply(null,arguments)},i._Mean=function(){return(i._Mean=i.asm.Mean).apply(null,arguments)},i._Min=function(){return(i._Min=i.asm.Min).apply(null,arguments)},i._Minimum=function(){return(i._Minimum=i.asm.Minimum).apply(null,arguments)},i._MirrorPad=function(){return(i._MirrorPad=i.asm.MirrorPad).apply(null,arguments)},i._Mod=function(){return(i._Mod=i.asm.Mod).apply(null,arguments)},i._Multinomial=function(){return(i._Multinomial=i.asm.Multinomial).apply(null,arguments)},i._Multiply=function(){return(i._Multiply=i.asm.Multiply).apply(null,arguments)},i._Neg=function(){return(i._Neg=i.asm.Neg).apply(null,arguments)},i._NonMaxSuppressionV3=function(){return(i._NonMaxSuppressionV3=i.asm.NonMaxSuppressionV3).apply(null,arguments)},i._NonMaxSuppressionV4=function(){return(i._NonMaxSuppressionV4=i.asm.NonMaxSuppressionV4).apply(null,arguments)},i._NonMaxSuppressionV5=function(){return(i._NonMaxSuppressionV5=i.asm.NonMaxSuppressionV5).apply(null,arguments)},i._NotEqual=function(){return(i._NotEqual=i.asm.NotEqual).apply(null,arguments)},i._OneHot=function(){return(i._OneHot=i.asm.OneHot).apply(null,arguments)},i._PadV2=function(){return(i._PadV2=i.asm.PadV2).apply(null,arguments)},i._Pow=function(){return(i._Pow=i.asm.Pow).apply(null,arguments)},i._Prelu=function(){return(i._Prelu=i.asm.Prelu).apply(null,arguments)},i._Prod=function(){return(i._Prod=i.asm.Prod).apply(null,arguments)},i._RealDiv=function(){return(i._RealDiv=i.asm.RealDiv).apply(null,arguments)},i._Reciprocal=function(){return(i._Reciprocal=i.asm.Reciprocal).apply(null,arguments)},i._Relu=function(){return(i._Relu=i.asm.Relu).apply(null,arguments)},i._Relu6=function(){return(i._Relu6=i.asm.Relu6).apply(null,arguments)},i._ResizeBilinear=function(){return(i._ResizeBilinear=i.asm.ResizeBilinear).apply(null,arguments)},i._ResizeBilinearGrad=function(){return(i._ResizeBilinearGrad=i.asm.ResizeBilinearGrad).apply(null,arguments)},i._ResizeNearestNeighbor=function(){return(i._ResizeNearestNeighbor=i.asm.ResizeNearestNeighbor).apply(null,arguments)},i._ResizeNearestNeighborGrad=function(){return(i._ResizeNearestNeighborGrad=i.asm.ResizeNearestNeighborGrad).apply(null,arguments)},i._Reverse=function(){return(i._Reverse=i.asm.Reverse).apply(null,arguments)},i._RotateWithOffset=function(){return(i._RotateWithOffset=i.asm.RotateWithOffset).apply(null,arguments)},i._Round=function(){return(i._Round=i.asm.Round).apply(null,arguments)},i._Rsqrt=function(){return(i._Rsqrt=i.asm.Rsqrt).apply(null,arguments)},i._ScatterNd=function(){return(i._ScatterNd=i.asm.ScatterNd).apply(null,arguments)},i._SearchSorted=function(){return(i._SearchSorted=i.asm.SearchSorted).apply(null,arguments)},i._SelectV2=function(){return(i._SelectV2=i.asm.SelectV2).apply(null,arguments)},i._Selu=function(){return(i._Selu=i.asm.Selu).apply(null,arguments)},i._Sigmoid=function(){return(i._Sigmoid=i.asm.Sigmoid).apply(null,arguments)},i._Sign=function(){return(i._Sign=i.asm.Sign).apply(null,arguments)},i._Sin=function(){return(i._Sin=i.asm.Sin).apply(null,arguments)},i._Sinh=function(){return(i._Sinh=i.asm.Sinh).apply(null,arguments)},i._Softmax=function(){return(i._Softmax=i.asm.Softmax).apply(null,arguments)},i._Softplus=function(){return(i._Softplus=i.asm.Softplus).apply(null,arguments)},i._SparseFillEmptyRows=function(){return(i._SparseFillEmptyRows=i.asm.SparseFillEmptyRows).apply(null,arguments)},i._SparseReshape=function(){return(i._SparseReshape=i.asm.SparseReshape).apply(null,arguments)},i._SparseSegmentReduction=function(){return(i._SparseSegmentReduction=i.asm.SparseSegmentReduction).apply(null,arguments)},i._SparseToDense=function(){return(i._SparseToDense=i.asm.SparseToDense).apply(null,arguments)},i._Sqrt=function(){return(i._Sqrt=i.asm.Sqrt).apply(null,arguments)},i._Square=function(){return(i._Square=i.asm.Square).apply(null,arguments)},i._SquaredDifference=function(){return(i._SquaredDifference=i.asm.SquaredDifference).apply(null,arguments)},i._Step=function(){return(i._Step=i.asm.Step).apply(null,arguments)},i._StridedSlice=function(){return(i._StridedSlice=i.asm.StridedSlice).apply(null,arguments)},i._Sub=function(){return(i._Sub=i.asm.Sub).apply(null,arguments)},i._Sum=function(){return(i._Sum=i.asm.Sum).apply(null,arguments)},i._Tan=function(){return(i._Tan=i.asm.Tan).apply(null,arguments)},i._Tanh=function(){return(i._Tanh=i.asm.Tanh).apply(null,arguments)},i._TensorScatterUpdate=function(){return(i._TensorScatterUpdate=i.asm.TensorScatterUpdate).apply(null,arguments)},i._Tile=function(){return(i._Tile=i.asm.Tile).apply(null,arguments)},i._TopK=function(){return(i._TopK=i.asm.TopK).apply(null,arguments)},i._Transform=function(){return(i._Transform=i.asm.Transform).apply(null,arguments)},i._Transpose=function(){return(i._Transpose=i.asm.Transpose).apply(null,arguments)},i.__FusedMatMul=function(){return(i.__FusedMatMul=i.asm._FusedMatMul).apply(null,arguments)},i._malloc=function(){return(i._malloc=i.asm.malloc).apply(null,arguments)},i._free=function(){return(i._free=i.asm.free).apply(null,arguments)},i.___errno_location=function(){return(i.___errno_location=i.asm.__errno_location).apply(null,arguments)},i.stackSave=function(){return(ne=i.stackSave=i.asm.stackSave).apply(null,arguments)}),ae=i.stackRestore=function(){return(ae=i.stackRestore=i.asm.stackRestore).apply(null,arguments)},re=i.stackAlloc=function(){return(re=i.stackAlloc=i.asm.stackAlloc).apply(null,arguments)};i.dynCall_iijjiiii=function(){return(i.dynCall_iijjiiii=i.asm.dynCall_iijjiiii).apply(null,arguments)},i.dynCall_jiji=function(){return(i.dynCall_jiji=i.asm.dynCall_jiji).apply(null,arguments)};function oe(e){function t(){$||($=!0,i.calledRun=!0,S||(K(F),a(i),i.onRuntimeInitialized&&i.onRuntimeInitialized(),function(){if(i.postRun)for("function"==typeof i.postRun&&(i.postRun=[i.postRun]);i.postRun.length;)e=i.postRun.shift(),D.unshift(e);var e;K(D)}()))}e=e||d,M>0||(!function(){if(i.preRun)for("function"==typeof i.preRun&&(i.preRun=[i.preRun]);i.preRun.length;)e=i.preRun.shift(),O.unshift(e);var e;K(O)}(),M>0||(i.setStatus?(i.setStatus("Running..."),setTimeout((function(){setTimeout((function(){i.setStatus("")}),1),t()}),1)):t()))}if(i.cwrap=function(e,t,n,a){var r=(n=n||[]).every((e=>"number"===e||"boolean"===e));return"string"!==t&&r&&!a?Q(e):function(){return Z(e,t,n,arguments)}},L=function e(){$||oe(),$||(L=e)},i.preInit)for("function"==typeof i.preInit&&(i.preInit=[i.preInit]);i.preInit.length>0;)i.preInit.pop()();if(oe(),o&&(J={uncaughtException:process.listeners("uncaughtException").filter((function(e){return!o.uncaughtException.indexOf(e)>-1})),unhandledRejection:process.listeners("unhandledRejection").filter((function(e){return!o.unhandledRejection.indexOf(e)>-1}))}),"undefined"!==typeof t)ee=t;else{if("undefined"===typeof WasmBackendModuleThreadedSimd)throw new Error("Could not find wasm module in post.js");ee=WasmBackendModuleThreadedSimd}if(J){var ie=ee._dispose;ee._dispose=function(){ie(),J.uncaughtException.forEach((function(e){process.removeListener("uncaughtException",e)})),J.unhandledRejection.forEach((function(e){process.removeListener("unhandledRejection",e)}))}}return t.ready}})();e.exports=a},353:e=>{e.exports=n;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(I){}function n(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function a(e){return!0===(e&&e.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=a;var r={},o={};function i(e,t){var n,a,i;return t?(i=0<=(e>>>=0)&&e<256)&&(a=o[e])?a:(n=c(e,(0|e)<0?-1:0,!0),i&&(o[e]=n),n):(i=-128<=(e|=0)&&e<128)&&(a=r[e])?a:(n=c(e,e<0?-1:0,!1),i&&(r[e]=n),n)}function s(e,t){if(isNaN(e))return t?y:g;if(t){if(e<0)return y;if(e>=h)return k}else{if(e<=-f)return S;if(e+1>=f)return w}return e<0?s(-e,t).neg():c(e%p|0,e/p|0,t)}function c(e,t,a){return new n(e,t,a)}n.fromInt=i,n.fromNumber=s,n.fromBits=c;var u=Math.pow;function l(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return g;if("number"===typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var a;if((a=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===a)return l(e.substring(1),t,n).neg();for(var r=s(u(n,8)),o=g,i=0;i<e.length;i+=8){var c=Math.min(8,e.length-i),d=parseInt(e.substring(i,i+c),n);if(c<8){var p=s(u(n,c));o=o.mul(p).add(s(d))}else o=(o=o.mul(r)).add(s(d))}return o.unsigned=t,o}function d(e,t){return"number"===typeof e?s(e,t):"string"===typeof e?l(e,t):c(e.low,e.high,"boolean"===typeof t?t:e.unsigned)}n.fromString=l,n.fromValue=d;var p=4294967296,h=p*p,f=h/2,m=i(1<<24),g=i(0);n.ZERO=g;var y=i(0,!0);n.UZERO=y;var b=i(1);n.ONE=b;var x=i(1,!0);n.UONE=x;var v=i(-1);n.NEG_ONE=v;var w=c(-1,2147483647,!1);n.MAX_VALUE=w;var k=c(-1,-1,!0);n.MAX_UNSIGNED_VALUE=k;var S=c(0,-2147483648,!1);n.MIN_VALUE=S;var C=n.prototype;C.toInt=function(){return this.unsigned?this.low>>>0:this.low},C.toNumber=function(){return this.unsigned?(this.high>>>0)*p+(this.low>>>0):this.high*p+(this.low>>>0)},C.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(S)){var t=s(e),n=this.div(t),a=n.mul(t).sub(this);return n.toString(e)+a.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var r=s(u(e,6),this.unsigned),o=this,i="";;){var c=o.div(r),l=(o.sub(c.mul(r)).toInt()>>>0).toString(e);if((o=c).isZero())return l+i;for(;l.length<6;)l="0"+l;i=""+l+i}},C.getHighBits=function(){return this.high},C.getHighBitsUnsigned=function(){return this.high>>>0},C.getLowBits=function(){return this.low},C.getLowBitsUnsigned=function(){return this.low>>>0},C.getNumBitsAbs=function(){if(this.isNegative())return this.eq(S)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},C.isZero=function(){return 0===this.high&&0===this.low},C.eqz=C.isZero,C.isNegative=function(){return!this.unsigned&&this.high<0},C.isPositive=function(){return this.unsigned||this.high>=0},C.isOdd=function(){return 1===(1&this.low)},C.isEven=function(){return 0===(1&this.low)},C.equals=function(e){return a(e)||(e=d(e)),(this.unsigned===e.unsigned||this.high>>>31!==1||e.high>>>31!==1)&&(this.high===e.high&&this.low===e.low)},C.eq=C.equals,C.notEquals=function(e){return!this.eq(e)},C.neq=C.notEquals,C.ne=C.notEquals,C.lessThan=function(e){return this.comp(e)<0},C.lt=C.lessThan,C.lessThanOrEqual=function(e){return this.comp(e)<=0},C.lte=C.lessThanOrEqual,C.le=C.lessThanOrEqual,C.greaterThan=function(e){return this.comp(e)>0},C.gt=C.greaterThan,C.greaterThanOrEqual=function(e){return this.comp(e)>=0},C.gte=C.greaterThanOrEqual,C.ge=C.greaterThanOrEqual,C.compare=function(e){if(a(e)||(e=d(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},C.comp=C.compare,C.negate=function(){return!this.unsigned&&this.eq(S)?S:this.not().add(b)},C.neg=C.negate,C.add=function(e){a(e)||(e=d(e));var t=this.high>>>16,n=65535&this.high,r=this.low>>>16,o=65535&this.low,i=e.high>>>16,s=65535&e.high,u=e.low>>>16,l=0,p=0,h=0,f=0;return h+=(f+=o+(65535&e.low))>>>16,p+=(h+=r+u)>>>16,l+=(p+=n+s)>>>16,l+=t+i,c((h&=65535)<<16|(f&=65535),(l&=65535)<<16|(p&=65535),this.unsigned)},C.subtract=function(e){return a(e)||(e=d(e)),this.add(e.neg())},C.sub=C.subtract,C.multiply=function(e){if(this.isZero())return g;if(a(e)||(e=d(e)),t)return c(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return g;if(this.eq(S))return e.isOdd()?S:g;if(e.eq(S))return this.isOdd()?S:g;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(m)&&e.lt(m))return s(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,r=65535&this.high,o=this.low>>>16,i=65535&this.low,u=e.high>>>16,l=65535&e.high,p=e.low>>>16,h=65535&e.low,f=0,y=0,b=0,x=0;return b+=(x+=i*h)>>>16,y+=(b+=o*h)>>>16,b&=65535,y+=(b+=i*p)>>>16,f+=(y+=r*h)>>>16,y&=65535,f+=(y+=o*p)>>>16,y&=65535,f+=(y+=i*l)>>>16,f+=n*h+r*p+o*l+i*u,c((b&=65535)<<16|(x&=65535),(f&=65535)<<16|(y&=65535),this.unsigned)},C.mul=C.multiply,C.divide=function(e){if(a(e)||(e=d(e)),e.isZero())throw Error("division by zero");var n,r,o;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?c((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?y:g;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return y;if(e.gt(this.shru(1)))return x;o=y}else{if(this.eq(S))return e.eq(b)||e.eq(v)?S:e.eq(S)?b:(n=this.shr(1).div(e).shl(1)).eq(g)?e.isNegative()?b:v:(r=this.sub(e.mul(n)),o=n.add(r.div(e)));if(e.eq(S))return this.unsigned?y:g;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=g}for(r=this;r.gte(e);){n=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var i=Math.ceil(Math.log(n)/Math.LN2),l=i<=48?1:u(2,i-48),p=s(n),h=p.mul(e);h.isNegative()||h.gt(r);)h=(p=s(n-=l,this.unsigned)).mul(e);p.isZero()&&(p=b),o=o.add(p),r=r.sub(h)}return o},C.div=C.divide,C.modulo=function(e){return a(e)||(e=d(e)),t?c((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},C.mod=C.modulo,C.rem=C.modulo,C.not=function(){return c(~this.low,~this.high,this.unsigned)},C.and=function(e){return a(e)||(e=d(e)),c(this.low&e.low,this.high&e.high,this.unsigned)},C.or=function(e){return a(e)||(e=d(e)),c(this.low|e.low,this.high|e.high,this.unsigned)},C.xor=function(e){return a(e)||(e=d(e)),c(this.low^e.low,this.high^e.high,this.unsigned)},C.shiftLeft=function(e){return a(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?c(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):c(0,this.low<<e-32,this.unsigned)},C.shl=C.shiftLeft,C.shiftRight=function(e){return a(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?c(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):c(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},C.shr=C.shiftRight,C.shiftRightUnsigned=function(e){if(a(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?c(this.low>>>e|t<<32-e,t>>>e,this.unsigned):c(32===e?t:t>>>e-32,0,this.unsigned)},C.shru=C.shiftRightUnsigned,C.shr_u=C.shiftRightUnsigned,C.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},C.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},C.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},C.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},C.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,a){return a?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},730:(e,t,n)=>{"use strict";var a=n(43),r=n(853);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,s={};function c(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(s[e]=t,e=0;e<t.length;e++)i.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},f={};function m(e,t,n,a,r,o,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=a,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=i}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function x(e,t,n,a){var r=g.hasOwnProperty(t)?g[t]:null;(null!==r?0!==r.type:a||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,a){if(null===t||"undefined"===typeof t||function(e,t,n,a){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!a&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,a))return!0;if(a)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,a)&&(n=null),a||null===r?function(e){return!!d.call(f,e)||!d.call(h,e)&&(p.test(e)?f[e]=!0:(h[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,a=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,a?e.setAttributeNS(a,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,b);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,b);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,b);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var v=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),k=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),T=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var F=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function M(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var P,L=Object.assign;function z(e){if(void 0===P)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);P=t&&t[1]||""}return"\n"+P+e}var B=!1;function W(e,t){if(!e||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var a=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){a=u}e.call(t.prototype)}else{try{throw Error()}catch(u){a=u}e()}}catch(u){if(u&&a&&"string"===typeof u.stack){for(var r=u.stack.split("\n"),o=a.stack.split("\n"),i=r.length-1,s=o.length-1;1<=i&&0<=s&&r[i]!==o[s];)s--;for(;1<=i&&0<=s;i--,s--)if(r[i]!==o[s]){if(1!==i||1!==s)do{if(i--,0>--s||r[i]!==o[s]){var c="\n"+r[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=i&&0<=s);break}}}finally{B=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function U(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=W(e.type,!1);case 11:return e=W(e.type.render,!1);case 1:return e=W(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case k:return"Portal";case I:return"Profiler";case C:return"StrictMode";case E:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case N:return(e._context.displayName||"Context")+".Provider";case _:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return V(e(t))}catch(n){}}return null}function G(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function j(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=j(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){a=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return a},setValue:function(e){a=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),a="";return e&&(a=j(e)?e.checked?"true":"false":e.value),(e=a)!==n&&(t.setValue(e),!0)}function X(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Q(e,t){var n=null==t.defaultValue?"":t.defaultValue,a=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:a,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Z(e,t){null!=(t=t.checked)&&x(e,"checked",t,!1)}function $(e,t){Z(e,t);var n=H(t.value),a=t.type;if(null!=n)"number"===a?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===a||"reset"===a)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!("submit"!==a&&"reset"!==a||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,a){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&a&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(a&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function ae(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function oe(e,t){var n=H(t.value),a=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=a&&(e.defaultValue=""+a)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ce(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,le,de=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,a){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function pe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||he.hasOwnProperty(e)&&he[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var a=0===n.indexOf("--"),r=me(n,t[n],a);"float"===n&&(n="cssFloat"),a?e.setProperty(n,r):e[n]=r}}Object.keys(he).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),he[t]=he[e]}))}));var ye=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function be(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function xe(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ve=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,Se=null,Ce=null;function Ie(e){if(e=xr(e)){if("function"!==typeof ke)throw Error(o(280));var t=e.stateNode;t&&(t=wr(t),ke(e.stateNode,e.type,t))}}function Ne(e){Se?Ce?Ce.push(e):Ce=[e]:Se=e}function Te(){if(Se){var e=Se,t=Ce;if(Ce=Se=null,Ie(e),t)for(e=0;e<t.length;e++)Ie(t[e])}}function _e(e,t){return e(t)}function Ee(){}var Re=!1;function Ae(e,t,n){if(Re)return e(t,n);Re=!0;try{return _e(e,t,n)}finally{Re=!1,(null!==Se||null!==Ce)&&(Ee(),Te())}}function Oe(e,t){var n=e.stateNode;if(null===n)return null;var a=wr(n);if(null===a)return null;n=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(a=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!a;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Fe=!1;if(l)try{var De={};Object.defineProperty(De,"passive",{get:function(){Fe=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(le){Fe=!1}function Me(e,t,n,a,r,o,i,s,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(l){this.onError(l)}}var Pe=!1,Le=null,ze=!1,Be=null,We={onError:function(e){Pe=!0,Le=e}};function Ue(e,t,n,a,r,o,i,s,c){Pe=!1,Le=null,Me.apply(We,arguments)}function Ve(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ge(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Ve(e)!==e)throw Error(o(188))}function je(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,a=t;;){var r=n.return;if(null===r)break;var i=r.alternate;if(null===i){if(null!==(a=r.return)){n=a;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return He(r),e;if(i===a)return He(r),t;i=i.sibling}throw Error(o(188))}if(n.return!==a.return)n=r,a=i;else{for(var s=!1,c=r.child;c;){if(c===n){s=!0,n=r,a=i;break}if(c===a){s=!0,a=r,n=i;break}c=c.sibling}if(!s){for(c=i.child;c;){if(c===n){s=!0,n=i,a=r;break}if(c===a){s=!0,a=i,n=r;break}c=c.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==a)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var qe=r.unstable_scheduleCallback,Xe=r.unstable_cancelCallback,Ye=r.unstable_shouldYield,Qe=r.unstable_requestPaint,Ze=r.unstable_now,$e=r.unstable_getCurrentPriorityLevel,Je=r.unstable_ImmediatePriority,et=r.unstable_UserBlockingPriority,tt=r.unstable_NormalPriority,nt=r.unstable_LowPriority,at=r.unstable_IdlePriority,rt=null,ot=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/ct|0)|0},st=Math.log,ct=Math.LN2;var ut=64,lt=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function pt(e,t){var n=e.pendingLanes;if(0===n)return 0;var a=0,r=e.suspendedLanes,o=e.pingedLanes,i=268435455&n;if(0!==i){var s=i&~r;0!==s?a=dt(s):0!==(o&=i)&&(a=dt(o))}else 0!==(i=n&~r)?a=dt(i):0!==o&&(a=dt(o));if(0===a)return 0;if(0!==t&&t!==a&&0===(t&r)&&((r=a&-a)>=(o=t&-t)||16===r&&0!==(4194240&o)))return t;if(0!==(4&a)&&(a|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=a;0<t;)r=1<<(n=31-it(t)),a|=e[n],t&=~r;return a}function ht(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ut;return 0===(4194240&(ut<<=1))&&(ut=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=n}function bt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var a=31-it(n),r=1<<a;r&t|e[a]&t&&(e[a]|=t),n&=~r}}var xt=0;function vt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,kt,St,Ct,It,Nt=!1,Tt=[],_t=null,Et=null,Rt=null,At=new Map,Ot=new Map,Ft=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mt(e,t){switch(e){case"focusin":case"focusout":_t=null;break;case"dragenter":case"dragleave":Et=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function Pt(e,t,n,a,r,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:a,nativeEvent:o,targetContainers:[r]},null!==t&&(null!==(t=xr(t))&&kt(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function Lt(e){var t=br(e.target);if(null!==t){var n=Ve(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ge(n)))return e.blockedOn=t,void It(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function zt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=xr(n))&&kt(t),e.blockedOn=n,!1;var a=new(n=e.nativeEvent).constructor(n.type,n);ve=a,n.target.dispatchEvent(a),ve=null,t.shift()}return!0}function Bt(e,t,n){zt(e)&&n.delete(t)}function Wt(){Nt=!1,null!==_t&&zt(_t)&&(_t=null),null!==Et&&zt(Et)&&(Et=null),null!==Rt&&zt(Rt)&&(Rt=null),At.forEach(Bt),Ot.forEach(Bt)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,Nt||(Nt=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Wt)))}function Vt(e){function t(t){return Ut(t,e)}if(0<Tt.length){Ut(Tt[0],e);for(var n=1;n<Tt.length;n++){var a=Tt[n];a.blockedOn===e&&(a.blockedOn=null)}}for(null!==_t&&Ut(_t,e),null!==Et&&Ut(Et,e),null!==Rt&&Ut(Rt,e),At.forEach(t),Ot.forEach(t),n=0;n<Ft.length;n++)(a=Ft[n]).blockedOn===e&&(a.blockedOn=null);for(;0<Ft.length&&null===(n=Ft[0]).blockedOn;)Lt(n),null===n.blockedOn&&Ft.shift()}var Gt=v.ReactCurrentBatchConfig,Ht=!0;function jt(e,t,n,a){var r=xt,o=Gt.transition;Gt.transition=null;try{xt=1,qt(e,t,n,a)}finally{xt=r,Gt.transition=o}}function Kt(e,t,n,a){var r=xt,o=Gt.transition;Gt.transition=null;try{xt=4,qt(e,t,n,a)}finally{xt=r,Gt.transition=o}}function qt(e,t,n,a){if(Ht){var r=Yt(e,t,n,a);if(null===r)Ha(e,t,a,Xt,n),Mt(e,a);else if(function(e,t,n,a,r){switch(t){case"focusin":return _t=Pt(_t,e,t,n,a,r),!0;case"dragenter":return Et=Pt(Et,e,t,n,a,r),!0;case"mouseover":return Rt=Pt(Rt,e,t,n,a,r),!0;case"pointerover":var o=r.pointerId;return At.set(o,Pt(At.get(o)||null,e,t,n,a,r)),!0;case"gotpointercapture":return o=r.pointerId,Ot.set(o,Pt(Ot.get(o)||null,e,t,n,a,r)),!0}return!1}(r,e,t,n,a))a.stopPropagation();else if(Mt(e,a),4&t&&-1<Dt.indexOf(e)){for(;null!==r;){var o=xr(r);if(null!==o&&wt(o),null===(o=Yt(e,t,n,a))&&Ha(e,t,a,Xt,n),o===r)break;r=o}null!==r&&a.stopPropagation()}else Ha(e,t,a,null,n)}}var Xt=null;function Yt(e,t,n,a){if(Xt=null,null!==(e=br(e=we(a))))if(null===(t=Ve(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ge(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Je:return 1;case et:return 4;case tt:case nt:return 16;case at:return 536870912;default:return 16}default:return 16}}var Zt=null,$t=null,Jt=null;function en(){if(Jt)return Jt;var e,t,n=$t,a=n.length,r="value"in Zt?Zt.value:Zt.textContent,o=r.length;for(e=0;e<a&&n[e]===r[e];e++);var i=a-e;for(t=1;t<=i&&n[a-t]===r[o-t];t++);return Jt=r.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function an(){return!1}function rn(e){function t(t,n,a,r,o){for(var i in this._reactName=t,this._targetInst=a,this.type=n,this.nativeEvent=r,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(r):r[i]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:an,this.isPropagationStopped=an,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,cn,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=rn(un),dn=L({},un,{view:0,detail:0}),pn=rn(dn),hn=L({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:In,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cn&&(cn&&"mousemove"===e.type?(on=e.screenX-cn.screenX,sn=e.screenY-cn.screenY):sn=on=0,cn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),fn=rn(hn),mn=rn(L({},hn,{dataTransfer:0})),gn=rn(L({},dn,{relatedTarget:0})),yn=rn(L({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=L({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xn=rn(bn),vn=rn(L({},un,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function In(){return Cn}var Nn=L({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:In,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=rn(Nn),_n=rn(L({},hn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),En=rn(L({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:In})),Rn=rn(L({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=L({},hn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=rn(An),Fn=[9,13,27,32],Dn=l&&"CompositionEvent"in window,Mn=null;l&&"documentMode"in document&&(Mn=document.documentMode);var Pn=l&&"TextEvent"in window&&!Mn,Ln=l&&(!Dn||Mn&&8<Mn&&11>=Mn),zn=String.fromCharCode(32),Bn=!1;function Wn(e,t){switch(e){case"keyup":return-1!==Fn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Vn=!1;var Gn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Gn[e.type]:"textarea"===t}function jn(e,t,n,a){Ne(a),0<(t=Ka(t,"onChange")).length&&(n=new ln("onChange","change",null,n,a),e.push({event:n,listeners:t}))}var Kn=null,qn=null;function Xn(e){za(e,0)}function Yn(e){if(q(vr(e)))return e}function Qn(e,t){if("change"===e)return t}var Zn=!1;if(l){var $n;if(l){var Jn="oninput"in document;if(!Jn){var ea=document.createElement("div");ea.setAttribute("oninput","return;"),Jn="function"===typeof ea.oninput}$n=Jn}else $n=!1;Zn=$n&&(!document.documentMode||9<document.documentMode)}function ta(){Kn&&(Kn.detachEvent("onpropertychange",na),qn=Kn=null)}function na(e){if("value"===e.propertyName&&Yn(qn)){var t=[];jn(t,qn,e,we(e)),Ae(Xn,t)}}function aa(e,t,n){"focusin"===e?(ta(),qn=n,(Kn=t).attachEvent("onpropertychange",na)):"focusout"===e&&ta()}function ra(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(qn)}function oa(e,t){if("click"===e)return Yn(t)}function ia(e,t){if("input"===e||"change"===e)return Yn(t)}var sa="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ca(e,t){if(sa(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var r=n[a];if(!d.call(t,r)||!sa(e[r],t[r]))return!1}return!0}function ua(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function la(e,t){var n,a=ua(e);for(e=0;a;){if(3===a.nodeType){if(n=e+a.textContent.length,e<=t&&n>=t)return{node:a,offset:t-e};e=n}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=ua(a)}}function da(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?da(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function pa(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(a){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function ha(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fa(e){var t=pa(),n=e.focusedElem,a=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&da(n.ownerDocument.documentElement,n)){if(null!==a&&ha(n))if(t=a.start,void 0===(e=a.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=n.textContent.length,o=Math.min(a.start,r);a=void 0===a.end?o:Math.min(a.end,r),!e.extend&&o>a&&(r=a,a=o,o=r),r=la(n,o);var i=la(n,a);r&&i&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),o>a?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ma=l&&"documentMode"in document&&11>=document.documentMode,ga=null,ya=null,ba=null,xa=!1;function va(e,t,n){var a=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xa||null==ga||ga!==X(a)||("selectionStart"in(a=ga)&&ha(a)?a={start:a.selectionStart,end:a.selectionEnd}:a={anchorNode:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset},ba&&ca(ba,a)||(ba=a,0<(a=Ka(ya,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:a}),t.target=ga)))}function wa(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ka={animationend:wa("Animation","AnimationEnd"),animationiteration:wa("Animation","AnimationIteration"),animationstart:wa("Animation","AnimationStart"),transitionend:wa("Transition","TransitionEnd")},Sa={},Ca={};function Ia(e){if(Sa[e])return Sa[e];if(!ka[e])return e;var t,n=ka[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ca)return Sa[e]=n[t];return e}l&&(Ca=document.createElement("div").style,"AnimationEvent"in window||(delete ka.animationend.animation,delete ka.animationiteration.animation,delete ka.animationstart.animation),"TransitionEvent"in window||delete ka.transitionend.transition);var Na=Ia("animationend"),Ta=Ia("animationiteration"),_a=Ia("animationstart"),Ea=Ia("transitionend"),Ra=new Map,Aa="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Oa(e,t){Ra.set(e,t),c(t,[e])}for(var Fa=0;Fa<Aa.length;Fa++){var Da=Aa[Fa];Oa(Da.toLowerCase(),"on"+(Da[0].toUpperCase()+Da.slice(1)))}Oa(Na,"onAnimationEnd"),Oa(Ta,"onAnimationIteration"),Oa(_a,"onAnimationStart"),Oa("dblclick","onDoubleClick"),Oa("focusin","onFocus"),Oa("focusout","onBlur"),Oa(Ea,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ma="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Pa=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ma));function La(e,t,n){var a=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,a,r,i,s,c,u){if(Ue.apply(this,arguments),Pe){if(!Pe)throw Error(o(198));var l=Le;Pe=!1,Le=null,ze||(ze=!0,Be=l)}}(a,t,void 0,e),e.currentTarget=null}function za(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var a=e[n],r=a.event;a=a.listeners;e:{var o=void 0;if(t)for(var i=a.length-1;0<=i;i--){var s=a[i],c=s.instance,u=s.currentTarget;if(s=s.listener,c!==o&&r.isPropagationStopped())break e;La(r,s,u),o=c}else for(i=0;i<a.length;i++){if(c=(s=a[i]).instance,u=s.currentTarget,s=s.listener,c!==o&&r.isPropagationStopped())break e;La(r,s,u),o=c}}}if(ze)throw e=Be,ze=!1,Be=null,e}function Ba(e,t){var n=t[mr];void 0===n&&(n=t[mr]=new Set);var a=e+"__bubble";n.has(a)||(Ga(t,e,2,!1),n.add(a))}function Wa(e,t,n){var a=0;t&&(a|=4),Ga(n,e,a,t)}var Ua="_reactListening"+Math.random().toString(36).slice(2);function Va(e){if(!e[Ua]){e[Ua]=!0,i.forEach((function(t){"selectionchange"!==t&&(Pa.has(t)||Wa(t,!1,e),Wa(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ua]||(t[Ua]=!0,Wa("selectionchange",!1,t))}}function Ga(e,t,n,a){switch(Qt(t)){case 1:var r=jt;break;case 4:r=Kt;break;default:r=qt}n=r.bind(null,t,n,e),r=void 0,!Fe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),a?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Ha(e,t,n,a,r){var o=a;if(0===(1&t)&&0===(2&t)&&null!==a)e:for(;;){if(null===a)return;var i=a.tag;if(3===i||4===i){var s=a.stateNode.containerInfo;if(s===r||8===s.nodeType&&s.parentNode===r)break;if(4===i)for(i=a.return;null!==i;){var c=i.tag;if((3===c||4===c)&&((c=i.stateNode.containerInfo)===r||8===c.nodeType&&c.parentNode===r))return;i=i.return}for(;null!==s;){if(null===(i=br(s)))return;if(5===(c=i.tag)||6===c){a=o=i;continue e}s=s.parentNode}}a=a.return}Ae((function(){var a=o,r=we(n),i=[];e:{var s=Ra.get(e);if(void 0!==s){var c=ln,u=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":c=Tn;break;case"focusin":u="focus",c=gn;break;case"focusout":u="blur",c=gn;break;case"beforeblur":case"afterblur":c=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=En;break;case Na:case Ta:case _a:c=yn;break;case Ea:c=Rn;break;case"scroll":c=pn;break;case"wheel":c=On;break;case"copy":case"cut":case"paste":c=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=_n}var l=0!==(4&t),d=!l&&"scroll"===e,p=l?null!==s?s+"Capture":null:s;l=[];for(var h,f=a;null!==f;){var m=(h=f).stateNode;if(5===h.tag&&null!==m&&(h=m,null!==p&&(null!=(m=Oe(f,p))&&l.push(ja(f,m,h)))),d)break;f=f.return}0<l.length&&(s=new c(s,u,null,n,r),i.push({event:s,listeners:l}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===ve||!(u=n.relatedTarget||n.fromElement)||!br(u)&&!u[fr])&&(c||s)&&(s=r.window===r?r:(s=r.ownerDocument)?s.defaultView||s.parentWindow:window,c?(c=a,null!==(u=(u=n.relatedTarget||n.toElement)?br(u):null)&&(u!==(d=Ve(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(c=null,u=a),c!==u)){if(l=fn,m="onMouseLeave",p="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(l=_n,m="onPointerLeave",p="onPointerEnter",f="pointer"),d=null==c?s:vr(c),h=null==u?s:vr(u),(s=new l(m,f+"leave",c,n,r)).target=d,s.relatedTarget=h,m=null,br(r)===a&&((l=new l(p,f+"enter",u,n,r)).target=h,l.relatedTarget=d,m=l),d=m,c&&u)e:{for(p=u,f=0,h=l=c;h;h=qa(h))f++;for(h=0,m=p;m;m=qa(m))h++;for(;0<f-h;)l=qa(l),f--;for(;0<h-f;)p=qa(p),h--;for(;f--;){if(l===p||null!==p&&l===p.alternate)break e;l=qa(l),p=qa(p)}l=null}else l=null;null!==c&&Xa(i,s,c,l,!1),null!==u&&null!==d&&Xa(i,d,u,l,!0)}if("select"===(c=(s=a?vr(a):window).nodeName&&s.nodeName.toLowerCase())||"input"===c&&"file"===s.type)var g=Qn;else if(Hn(s))if(Zn)g=ia;else{g=ra;var y=aa}else(c=s.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=oa);switch(g&&(g=g(e,a))?jn(i,g,n,r):(y&&y(e,s,a),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&ee(s,"number",s.value)),y=a?vr(a):window,e){case"focusin":(Hn(y)||"true"===y.contentEditable)&&(ga=y,ya=a,ba=null);break;case"focusout":ba=ya=ga=null;break;case"mousedown":xa=!0;break;case"contextmenu":case"mouseup":case"dragend":xa=!1,va(i,n,r);break;case"selectionchange":if(ma)break;case"keydown":case"keyup":va(i,n,r)}var b;if(Dn)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Vn?Wn(e,n)&&(x="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(x="onCompositionStart");x&&(Ln&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==x?"onCompositionEnd"===x&&Vn&&(b=en()):($t="value"in(Zt=r)?Zt.value:Zt.textContent,Vn=!0)),0<(y=Ka(a,x)).length&&(x=new vn(x,e,null,n,r),i.push({event:x,listeners:y}),b?x.data=b:null!==(b=Un(n))&&(x.data=b))),(b=Pn?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(Bn=!0,zn);case"textInput":return(e=t.data)===zn&&Bn?null:e;default:return null}}(e,n):function(e,t){if(Vn)return"compositionend"===e||!Dn&&Wn(e,t)?(e=en(),Jt=$t=Zt=null,Vn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(a=Ka(a,"onBeforeInput")).length&&(r=new vn("onBeforeInput","beforeinput",null,n,r),i.push({event:r,listeners:a}),r.data=b))}za(i,t)}))}function ja(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ka(e,t){for(var n=t+"Capture",a=[];null!==e;){var r=e,o=r.stateNode;5===r.tag&&null!==o&&(r=o,null!=(o=Oe(e,n))&&a.unshift(ja(e,o,r)),null!=(o=Oe(e,t))&&a.push(ja(e,o,r))),e=e.return}return a}function qa(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Xa(e,t,n,a,r){for(var o=t._reactName,i=[];null!==n&&n!==a;){var s=n,c=s.alternate,u=s.stateNode;if(null!==c&&c===a)break;5===s.tag&&null!==u&&(s=u,r?null!=(c=Oe(n,o))&&i.unshift(ja(n,c,s)):r||null!=(c=Oe(n,o))&&i.push(ja(n,c,s))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var Ya=/\r\n?/g,Qa=/\u0000|\uFFFD/g;function Za(e){return("string"===typeof e?e:""+e).replace(Ya,"\n").replace(Qa,"")}function $a(e,t,n){if(t=Za(t),Za(e)!==t&&n)throw Error(o(425))}function Ja(){}var er=null,tr=null;function nr(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ar="function"===typeof setTimeout?setTimeout:void 0,rr="function"===typeof clearTimeout?clearTimeout:void 0,or="function"===typeof Promise?Promise:void 0,ir="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof or?function(e){return or.resolve(null).then(e).catch(sr)}:ar;function sr(e){setTimeout((function(){throw e}))}function cr(e,t){var n=t,a=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===a)return e.removeChild(r),void Vt(t);a--}else"$"!==n&&"$?"!==n&&"$!"!==n||a++;n=r}while(n);Vt(t)}function ur(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function lr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var dr=Math.random().toString(36).slice(2),pr="__reactFiber$"+dr,hr="__reactProps$"+dr,fr="__reactContainer$"+dr,mr="__reactEvents$"+dr,gr="__reactListeners$"+dr,yr="__reactHandles$"+dr;function br(e){var t=e[pr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fr]||n[pr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=lr(e);null!==e;){if(n=e[pr])return n;e=lr(e)}return t}n=(e=n).parentNode}return null}function xr(e){return!(e=e[pr]||e[fr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function vr(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function wr(e){return e[hr]||null}var kr=[],Sr=-1;function Cr(e){return{current:e}}function Ir(e){0>Sr||(e.current=kr[Sr],kr[Sr]=null,Sr--)}function Nr(e,t){Sr++,kr[Sr]=e.current,e.current=t}var Tr={},_r=Cr(Tr),Er=Cr(!1),Rr=Tr;function Ar(e,t){var n=e.type.contextTypes;if(!n)return Tr;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var r,o={};for(r in n)o[r]=t[r];return a&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Or(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Fr(){Ir(Er),Ir(_r)}function Dr(e,t,n){if(_r.current!==Tr)throw Error(o(168));Nr(_r,t),Nr(Er,n)}function Mr(e,t,n){var a=e.stateNode;if(t=t.childContextTypes,"function"!==typeof a.getChildContext)return n;for(var r in a=a.getChildContext())if(!(r in t))throw Error(o(108,G(e)||"Unknown",r));return L({},n,a)}function Pr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Tr,Rr=_r.current,Nr(_r,e),Nr(Er,Er.current),!0}function Lr(e,t,n){var a=e.stateNode;if(!a)throw Error(o(169));n?(e=Mr(e,t,Rr),a.__reactInternalMemoizedMergedChildContext=e,Ir(Er),Ir(_r),Nr(_r,e)):Ir(Er),Nr(Er,n)}var zr=null,Br=!1,Wr=!1;function Ur(e){null===zr?zr=[e]:zr.push(e)}function Vr(){if(!Wr&&null!==zr){Wr=!0;var e=0,t=xt;try{var n=zr;for(xt=1;e<n.length;e++){var a=n[e];do{a=a(!0)}while(null!==a)}zr=null,Br=!1}catch(r){throw null!==zr&&(zr=zr.slice(e+1)),qe(Je,Vr),r}finally{xt=t,Wr=!1}}return null}var Gr=[],Hr=0,jr=null,Kr=0,qr=[],Xr=0,Yr=null,Qr=1,Zr="";function $r(e,t){Gr[Hr++]=Kr,Gr[Hr++]=jr,jr=e,Kr=t}function Jr(e,t,n){qr[Xr++]=Qr,qr[Xr++]=Zr,qr[Xr++]=Yr,Yr=e;var a=Qr;e=Zr;var r=32-it(a)-1;a&=~(1<<r),n+=1;var o=32-it(t)+r;if(30<o){var i=r-r%5;o=(a&(1<<i)-1).toString(32),a>>=i,r-=i,Qr=1<<32-it(t)+r|n<<r|a,Zr=o+e}else Qr=1<<o|n<<r|a,Zr=e}function eo(e){null!==e.return&&($r(e,1),Jr(e,1,0))}function to(e){for(;e===jr;)jr=Gr[--Hr],Gr[Hr]=null,Kr=Gr[--Hr],Gr[Hr]=null;for(;e===Yr;)Yr=qr[--Xr],qr[Xr]=null,Zr=qr[--Xr],qr[Xr]=null,Qr=qr[--Xr],qr[Xr]=null}var no=null,ao=null,ro=!1,oo=null;function io(e,t){var n=Au(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function so(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ao=ur(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ao=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yr?{id:Qr,overflow:Zr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Au(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ao=null,!0);default:return!1}}function co(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function uo(e){if(ro){var t=ao;if(t){var n=t;if(!so(e,t)){if(co(e))throw Error(o(418));t=ur(n.nextSibling);var a=no;t&&so(e,t)?io(a,n):(e.flags=-4097&e.flags|2,ro=!1,no=e)}}else{if(co(e))throw Error(o(418));e.flags=-4097&e.flags|2,ro=!1,no=e}}}function lo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function po(e){if(e!==no)return!1;if(!ro)return lo(e),ro=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!nr(e.type,e.memoizedProps)),t&&(t=ao)){if(co(e))throw ho(),Error(o(418));for(;t;)io(e,t),t=ur(t.nextSibling)}if(lo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ao=ur(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ao=null}}else ao=no?ur(e.stateNode.nextSibling):null;return!0}function ho(){for(var e=ao;e;)e=ur(e.nextSibling)}function fo(){ao=no=null,ro=!1}function mo(e){null===oo?oo=[e]:oo.push(e)}var go=v.ReactCurrentBatchConfig;function yo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var a=n.stateNode}if(!a)throw Error(o(147,e));var r=a,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function bo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function xo(e){return(0,e._init)(e._payload)}function vo(e){function t(t,n){if(e){var a=t.deletions;null===a?(t.deletions=[n],t.flags|=16):a.push(n)}}function n(n,a){if(!e)return null;for(;null!==a;)t(n,a),a=a.sibling;return null}function a(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=Fu(e,t)).index=0,e.sibling=null,e}function i(t,n,a){return t.index=a,e?null!==(a=t.alternate)?(a=a.index)<n?(t.flags|=2,n):a:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function c(e,t,n,a){return null===t||6!==t.tag?((t=Lu(n,e.mode,a)).return=e,t):((t=r(t,n)).return=e,t)}function u(e,t,n,a){var o=n.type;return o===S?d(e,t,n.props.children,a,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===O&&xo(o)===t.type)?((a=r(t,n.props)).ref=yo(e,t,n),a.return=e,a):((a=Du(n.type,n.key,n.props,null,e.mode,a)).ref=yo(e,t,n),a.return=e,a)}function l(e,t,n,a){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=zu(n,e.mode,a)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function d(e,t,n,a,o){return null===t||7!==t.tag?((t=Mu(n,e.mode,a,o)).return=e,t):((t=r(t,n)).return=e,t)}function p(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Lu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Du(t.type,t.key,t.props,null,e.mode,n)).ref=yo(e,null,t),n.return=e,n;case k:return(t=zu(t,e.mode,n)).return=e,t;case O:return p(e,(0,t._init)(t._payload),n)}if(te(t)||M(t))return(t=Mu(t,e.mode,n,null)).return=e,t;bo(e,t)}return null}function h(e,t,n,a){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:c(e,t,""+n,a);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===r?u(e,t,n,a):null;case k:return n.key===r?l(e,t,n,a):null;case O:return h(e,t,(r=n._init)(n._payload),a)}if(te(n)||M(n))return null!==r?null:d(e,t,n,a,null);bo(e,n)}return null}function f(e,t,n,a,r){if("string"===typeof a&&""!==a||"number"===typeof a)return c(t,e=e.get(n)||null,""+a,r);if("object"===typeof a&&null!==a){switch(a.$$typeof){case w:return u(t,e=e.get(null===a.key?n:a.key)||null,a,r);case k:return l(t,e=e.get(null===a.key?n:a.key)||null,a,r);case O:return f(e,t,n,(0,a._init)(a._payload),r)}if(te(a)||M(a))return d(t,e=e.get(n)||null,a,r,null);bo(t,a)}return null}function m(r,o,s,c){for(var u=null,l=null,d=o,m=o=0,g=null;null!==d&&m<s.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=h(r,d,s[m],c);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(r,d),o=i(y,o,m),null===l?u=y:l.sibling=y,l=y,d=g}if(m===s.length)return n(r,d),ro&&$r(r,m),u;if(null===d){for(;m<s.length;m++)null!==(d=p(r,s[m],c))&&(o=i(d,o,m),null===l?u=d:l.sibling=d,l=d);return ro&&$r(r,m),u}for(d=a(r,d);m<s.length;m++)null!==(g=f(d,r,m,s[m],c))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),o=i(g,o,m),null===l?u=g:l.sibling=g,l=g);return e&&d.forEach((function(e){return t(r,e)})),ro&&$r(r,m),u}function g(r,s,c,u){var l=M(c);if("function"!==typeof l)throw Error(o(150));if(null==(c=l.call(c)))throw Error(o(151));for(var d=l=null,m=s,g=s=0,y=null,b=c.next();null!==m&&!b.done;g++,b=c.next()){m.index>g?(y=m,m=null):y=m.sibling;var x=h(r,m,b.value,u);if(null===x){null===m&&(m=y);break}e&&m&&null===x.alternate&&t(r,m),s=i(x,s,g),null===d?l=x:d.sibling=x,d=x,m=y}if(b.done)return n(r,m),ro&&$r(r,g),l;if(null===m){for(;!b.done;g++,b=c.next())null!==(b=p(r,b.value,u))&&(s=i(b,s,g),null===d?l=b:d.sibling=b,d=b);return ro&&$r(r,g),l}for(m=a(r,m);!b.done;g++,b=c.next())null!==(b=f(m,r,g,b.value,u))&&(e&&null!==b.alternate&&m.delete(null===b.key?g:b.key),s=i(b,s,g),null===d?l=b:d.sibling=b,d=b);return e&&m.forEach((function(e){return t(r,e)})),ro&&$r(r,g),l}return function e(a,o,i,c){if("object"===typeof i&&null!==i&&i.type===S&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case w:e:{for(var u=i.key,l=o;null!==l;){if(l.key===u){if((u=i.type)===S){if(7===l.tag){n(a,l.sibling),(o=r(l,i.props.children)).return=a,a=o;break e}}else if(l.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===O&&xo(u)===l.type){n(a,l.sibling),(o=r(l,i.props)).ref=yo(a,l,i),o.return=a,a=o;break e}n(a,l);break}t(a,l),l=l.sibling}i.type===S?((o=Mu(i.props.children,a.mode,c,i.key)).return=a,a=o):((c=Du(i.type,i.key,i.props,null,a.mode,c)).ref=yo(a,o,i),c.return=a,a=c)}return s(a);case k:e:{for(l=i.key;null!==o;){if(o.key===l){if(4===o.tag&&o.stateNode.containerInfo===i.containerInfo&&o.stateNode.implementation===i.implementation){n(a,o.sibling),(o=r(o,i.children||[])).return=a,a=o;break e}n(a,o);break}t(a,o),o=o.sibling}(o=zu(i,a.mode,c)).return=a,a=o}return s(a);case O:return e(a,o,(l=i._init)(i._payload),c)}if(te(i))return m(a,o,i,c);if(M(i))return g(a,o,i,c);bo(a,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==o&&6===o.tag?(n(a,o.sibling),(o=r(o,i)).return=a,a=o):(n(a,o),(o=Lu(i,a.mode,c)).return=a,a=o),s(a)):n(a,o)}}var wo=vo(!0),ko=vo(!1),So=Cr(null),Co=null,Io=null,No=null;function To(){No=Io=Co=null}function _o(e){var t=So.current;Ir(So),e._currentValue=t}function Eo(e,t,n){for(;null!==e;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==a&&(a.childLanes|=t)):null!==a&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===n)break;e=e.return}}function Ro(e,t){Co=e,No=Io=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(xs=!0),e.firstContext=null)}function Ao(e){var t=e._currentValue;if(No!==e)if(e={context:e,memoizedValue:t,next:null},null===Io){if(null===Co)throw Error(o(308));Io=e,Co.dependencies={lanes:0,firstContext:e}}else Io=Io.next=e;return t}var Oo=null;function Fo(e){null===Oo?Oo=[e]:Oo.push(e)}function Do(e,t,n,a){var r=t.interleaved;return null===r?(n.next=n,Fo(t)):(n.next=r.next,r.next=n),t.interleaved=n,Mo(e,a)}function Mo(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Po=!1;function Lo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Bo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Wo(e,t,n){var a=e.updateQueue;if(null===a)return null;if(a=a.shared,0!==(2&_c)){var r=a.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),a.pending=t,Mo(e,n)}return null===(r=a.interleaved)?(t.next=t,Fo(a)):(t.next=r.next,r.next=t),a.interleaved=t,Mo(e,n)}function Uo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var a=t.lanes;n|=a&=e.pendingLanes,t.lanes=n,bt(e,n)}}function Vo(e,t){var n=e.updateQueue,a=e.alternate;if(null!==a&&n===(a=a.updateQueue)){var r=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?r=o=i:o=o.next=i,n=n.next}while(null!==n);null===o?r=o=t:o=o.next=t}else r=o=t;return n={baseState:a.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:a.shared,effects:a.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Go(e,t,n,a){var r=e.updateQueue;Po=!1;var o=r.firstBaseUpdate,i=r.lastBaseUpdate,s=r.shared.pending;if(null!==s){r.shared.pending=null;var c=s,u=c.next;c.next=null,null===i?o=u:i.next=u,i=c;var l=e.alternate;null!==l&&((s=(l=l.updateQueue).lastBaseUpdate)!==i&&(null===s?l.firstBaseUpdate=u:s.next=u,l.lastBaseUpdate=c))}if(null!==o){var d=r.baseState;for(i=0,l=u=c=null,s=o;;){var p=s.lane,h=s.eventTime;if((a&p)===p){null!==l&&(l=l.next={eventTime:h,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var f=e,m=s;switch(p=t,h=n,m.tag){case 1:if("function"===typeof(f=m.payload)){d=f.call(h,d,p);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(p="function"===typeof(f=m.payload)?f.call(h,d,p):f)||void 0===p)break e;d=L({},d,p);break e;case 2:Po=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(p=r.effects)?r.effects=[s]:p.push(s))}else h={eventTime:h,lane:p,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===l?(u=l=h,c=d):l=l.next=h,i|=p;if(null===(s=s.next)){if(null===(s=r.shared.pending))break;s=(p=s).next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}if(null===l&&(c=d),r.baseState=c,r.firstBaseUpdate=u,r.lastBaseUpdate=l,null!==(t=r.shared.interleaved)){r=t;do{i|=r.lane,r=r.next}while(r!==t)}else null===o&&(r.shared.lanes=0);Pc|=i,e.lanes=i,e.memoizedState=d}}function Ho(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var a=e[t],r=a.callback;if(null!==r){if(a.callback=null,a=n,"function"!==typeof r)throw Error(o(191,r));r.call(a)}}}var jo={},Ko=Cr(jo),qo=Cr(jo),Xo=Cr(jo);function Yo(e){if(e===jo)throw Error(o(174));return e}function Qo(e,t){switch(Nr(Xo,t),Nr(qo,e),Nr(Ko,jo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ce(null,"");break;default:t=ce(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ir(Ko),Nr(Ko,t)}function Zo(){Ir(Ko),Ir(qo),Ir(Xo)}function $o(e){Yo(Xo.current);var t=Yo(Ko.current),n=ce(t,e.type);t!==n&&(Nr(qo,e),Nr(Ko,n))}function Jo(e){qo.current===e&&(Ir(Ko),Ir(qo))}var ei=Cr(0);function ti(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ni=[];function ai(){for(var e=0;e<ni.length;e++)ni[e]._workInProgressVersionPrimary=null;ni.length=0}var ri=v.ReactCurrentDispatcher,oi=v.ReactCurrentBatchConfig,ii=0,si=null,ci=null,ui=null,li=!1,di=!1,pi=0,hi=0;function fi(){throw Error(o(321))}function mi(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sa(e[n],t[n]))return!1;return!0}function gi(e,t,n,a,r,i){if(ii=i,si=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ri.current=null===e||null===e.memoizedState?Ji:es,e=n(a,r),di){i=0;do{if(di=!1,pi=0,25<=i)throw Error(o(301));i+=1,ui=ci=null,t.updateQueue=null,ri.current=ts,e=n(a,r)}while(di)}if(ri.current=$i,t=null!==ci&&null!==ci.next,ii=0,ui=ci=si=null,li=!1,t)throw Error(o(300));return e}function yi(){var e=0!==pi;return pi=0,e}function bi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ui?si.memoizedState=ui=e:ui=ui.next=e,ui}function xi(){if(null===ci){var e=si.alternate;e=null!==e?e.memoizedState:null}else e=ci.next;var t=null===ui?si.memoizedState:ui.next;if(null!==t)ui=t,ci=e;else{if(null===e)throw Error(o(310));e={memoizedState:(ci=e).memoizedState,baseState:ci.baseState,baseQueue:ci.baseQueue,queue:ci.queue,next:null},null===ui?si.memoizedState=ui=e:ui=ui.next=e}return ui}function vi(e,t){return"function"===typeof t?t(e):t}function wi(e){var t=xi(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var a=ci,r=a.baseQueue,i=n.pending;if(null!==i){if(null!==r){var s=r.next;r.next=i.next,i.next=s}a.baseQueue=r=i,n.pending=null}if(null!==r){i=r.next,a=a.baseState;var c=s=null,u=null,l=i;do{var d=l.lane;if((ii&d)===d)null!==u&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),a=l.hasEagerState?l.eagerState:e(a,l.action);else{var p={lane:d,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===u?(c=u=p,s=a):u=u.next=p,si.lanes|=d,Pc|=d}l=l.next}while(null!==l&&l!==i);null===u?s=a:u.next=c,sa(a,t.memoizedState)||(xs=!0),t.memoizedState=a,t.baseState=s,t.baseQueue=u,n.lastRenderedState=a}if(null!==(e=n.interleaved)){r=e;do{i=r.lane,si.lanes|=i,Pc|=i,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ki(e){var t=xi(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var a=n.dispatch,r=n.pending,i=t.memoizedState;if(null!==r){n.pending=null;var s=r=r.next;do{i=e(i,s.action),s=s.next}while(s!==r);sa(i,t.memoizedState)||(xs=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,a]}function Si(){}function Ci(e,t){var n=si,a=xi(),r=t(),i=!sa(a.memoizedState,r);if(i&&(a.memoizedState=r,xs=!0),a=a.queue,Pi(Ti.bind(null,n,a,e),[e]),a.getSnapshot!==t||i||null!==ui&&1&ui.memoizedState.tag){if(n.flags|=2048,Ai(9,Ni.bind(null,n,a,r,t),void 0,null),null===Ec)throw Error(o(349));0!==(30&ii)||Ii(n,t,r)}return r}function Ii(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=si.updateQueue)?(t={lastEffect:null,stores:null},si.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ni(e,t,n,a){t.value=n,t.getSnapshot=a,_i(t)&&Ei(e)}function Ti(e,t,n){return n((function(){_i(t)&&Ei(e)}))}function _i(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sa(e,n)}catch(a){return!0}}function Ei(e){var t=Mo(e,1);null!==t&&nu(t,e,1,-1)}function Ri(e){var t=bi();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:e},t.queue=e,e=e.dispatch=Xi.bind(null,si,e),[t.memoizedState,e]}function Ai(e,t,n,a){return e={tag:e,create:t,destroy:n,deps:a,next:null},null===(t=si.updateQueue)?(t={lastEffect:null,stores:null},si.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(a=n.next,n.next=e,e.next=a,t.lastEffect=e),e}function Oi(){return xi().memoizedState}function Fi(e,t,n,a){var r=bi();si.flags|=e,r.memoizedState=Ai(1|t,n,void 0,void 0===a?null:a)}function Di(e,t,n,a){var r=xi();a=void 0===a?null:a;var o=void 0;if(null!==ci){var i=ci.memoizedState;if(o=i.destroy,null!==a&&mi(a,i.deps))return void(r.memoizedState=Ai(t,n,o,a))}si.flags|=e,r.memoizedState=Ai(1|t,n,o,a)}function Mi(e,t){return Fi(8390656,8,e,t)}function Pi(e,t){return Di(2048,8,e,t)}function Li(e,t){return Di(4,2,e,t)}function zi(e,t){return Di(4,4,e,t)}function Bi(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Wi(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Di(4,4,Bi.bind(null,t,e),n)}function Ui(){}function Vi(e,t){var n=xi();t=void 0===t?null:t;var a=n.memoizedState;return null!==a&&null!==t&&mi(t,a[1])?a[0]:(n.memoizedState=[e,t],e)}function Gi(e,t){var n=xi();t=void 0===t?null:t;var a=n.memoizedState;return null!==a&&null!==t&&mi(t,a[1])?a[0]:(e=e(),n.memoizedState=[e,t],e)}function Hi(e,t,n){return 0===(21&ii)?(e.baseState&&(e.baseState=!1,xs=!0),e.memoizedState=n):(sa(n,t)||(n=mt(),si.lanes|=n,Pc|=n,e.baseState=!0),t)}function ji(e,t){var n=xt;xt=0!==n&&4>n?n:4,e(!0);var a=oi.transition;oi.transition={};try{e(!1),t()}finally{xt=n,oi.transition=a}}function Ki(){return xi().memoizedState}function qi(e,t,n){var a=tu(e);if(n={lane:a,action:n,hasEagerState:!1,eagerState:null,next:null},Yi(e))Qi(t,n);else if(null!==(n=Do(e,t,n,a))){nu(n,e,a,eu()),Zi(n,t,a)}}function Xi(e,t,n){var a=tu(e),r={lane:a,action:n,hasEagerState:!1,eagerState:null,next:null};if(Yi(e))Qi(t,r);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var i=t.lastRenderedState,s=o(i,n);if(r.hasEagerState=!0,r.eagerState=s,sa(s,i)){var c=t.interleaved;return null===c?(r.next=r,Fo(t)):(r.next=c.next,c.next=r),void(t.interleaved=r)}}catch(u){}null!==(n=Do(e,t,r,a))&&(nu(n,e,a,r=eu()),Zi(n,t,a))}}function Yi(e){var t=e.alternate;return e===si||null!==t&&t===si}function Qi(e,t){di=li=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Zi(e,t,n){if(0!==(4194240&n)){var a=t.lanes;n|=a&=e.pendingLanes,t.lanes=n,bt(e,n)}}var $i={readContext:Ao,useCallback:fi,useContext:fi,useEffect:fi,useImperativeHandle:fi,useInsertionEffect:fi,useLayoutEffect:fi,useMemo:fi,useReducer:fi,useRef:fi,useState:fi,useDebugValue:fi,useDeferredValue:fi,useTransition:fi,useMutableSource:fi,useSyncExternalStore:fi,useId:fi,unstable_isNewReconciler:!1},Ji={readContext:Ao,useCallback:function(e,t){return bi().memoizedState=[e,void 0===t?null:t],e},useContext:Ao,useEffect:Mi,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Fi(4194308,4,Bi.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Fi(4194308,4,e,t)},useInsertionEffect:function(e,t){return Fi(4,2,e,t)},useMemo:function(e,t){var n=bi();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var a=bi();return t=void 0!==n?n(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=qi.bind(null,si,e),[a.memoizedState,e]},useRef:function(e){return e={current:e},bi().memoizedState=e},useState:Ri,useDebugValue:Ui,useDeferredValue:function(e){return bi().memoizedState=e},useTransition:function(){var e=Ri(!1),t=e[0];return e=ji.bind(null,e[1]),bi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var a=si,r=bi();if(ro){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Ec)throw Error(o(349));0!==(30&ii)||Ii(a,t,n)}r.memoizedState=n;var i={value:n,getSnapshot:t};return r.queue=i,Mi(Ti.bind(null,a,i,e),[e]),a.flags|=2048,Ai(9,Ni.bind(null,a,i,n,t),void 0,null),n},useId:function(){var e=bi(),t=Ec.identifierPrefix;if(ro){var n=Zr;t=":"+t+"R"+(n=(Qr&~(1<<32-it(Qr)-1)).toString(32)+n),0<(n=pi++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=hi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},es={readContext:Ao,useCallback:Vi,useContext:Ao,useEffect:Pi,useImperativeHandle:Wi,useInsertionEffect:Li,useLayoutEffect:zi,useMemo:Gi,useReducer:wi,useRef:Oi,useState:function(){return wi(vi)},useDebugValue:Ui,useDeferredValue:function(e){return Hi(xi(),ci.memoizedState,e)},useTransition:function(){return[wi(vi)[0],xi().memoizedState]},useMutableSource:Si,useSyncExternalStore:Ci,useId:Ki,unstable_isNewReconciler:!1},ts={readContext:Ao,useCallback:Vi,useContext:Ao,useEffect:Pi,useImperativeHandle:Wi,useInsertionEffect:Li,useLayoutEffect:zi,useMemo:Gi,useReducer:ki,useRef:Oi,useState:function(){return ki(vi)},useDebugValue:Ui,useDeferredValue:function(e){var t=xi();return null===ci?t.memoizedState=e:Hi(t,ci.memoizedState,e)},useTransition:function(){return[ki(vi)[0],xi().memoizedState]},useMutableSource:Si,useSyncExternalStore:Ci,useId:Ki,unstable_isNewReconciler:!1};function ns(e,t){if(e&&e.defaultProps){for(var n in t=L({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function as(e,t,n,a){n=null===(n=n(a,t=e.memoizedState))||void 0===n?t:L({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var rs={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var a=eu(),r=tu(e),o=Bo(a,r);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Wo(e,o,r))&&(nu(t,e,r,a),Uo(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var a=eu(),r=tu(e),o=Bo(a,r);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Wo(e,o,r))&&(nu(t,e,r,a),Uo(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=eu(),a=tu(e),r=Bo(n,a);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=Wo(e,r,a))&&(nu(t,e,a,n),Uo(t,e,a))}};function os(e,t,n,a,r,o,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(a,o,i):!t.prototype||!t.prototype.isPureReactComponent||(!ca(n,a)||!ca(r,o))}function is(e,t,n){var a=!1,r=Tr,o=t.contextType;return"object"===typeof o&&null!==o?o=Ao(o):(r=Or(t)?Rr:_r.current,o=(a=null!==(a=t.contextTypes)&&void 0!==a)?Ar(e,r):Tr),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=rs,e.stateNode=t,t._reactInternals=e,a&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=o),t}function ss(e,t,n,a){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,a),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,a),t.state!==e&&rs.enqueueReplaceState(t,t.state,null)}function cs(e,t,n,a){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs={},Lo(e);var o=t.contextType;"object"===typeof o&&null!==o?r.context=Ao(o):(o=Or(t)?Rr:_r.current,r.context=Ar(e,o)),r.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(as(e,t,o,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&rs.enqueueReplaceState(r,r.state,null),Go(e,n,r,a),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}function us(e,t){try{var n="",a=t;do{n+=U(a),a=a.return}while(a);var r=n}catch(o){r="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:r,digest:null}}function ls(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ds(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ps="function"===typeof WeakMap?WeakMap:Map;function hs(e,t,n){(n=Bo(-1,n)).tag=3,n.payload={element:null};var a=t.value;return n.callback=function(){Hc||(Hc=!0,jc=a),ds(0,t)},n}function fs(e,t,n){(n=Bo(-1,n)).tag=3;var a=e.type.getDerivedStateFromError;if("function"===typeof a){var r=t.value;n.payload=function(){return a(r)},n.callback=function(){ds(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){ds(0,t),"function"!==typeof a&&(null===Kc?Kc=new Set([this]):Kc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var a=e.pingCache;if(null===a){a=e.pingCache=new ps;var r=new Set;a.set(t,r)}else void 0===(r=a.get(t))&&(r=new Set,a.set(t,r));r.has(n)||(r.add(n),e=Iu.bind(null,e,t,n),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ys(e,t,n,a,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Bo(-1,1)).tag=2,Wo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}var bs=v.ReactCurrentOwner,xs=!1;function vs(e,t,n,a){t.child=null===e?ko(t,null,n,a):wo(t,e.child,n,a)}function ws(e,t,n,a,r){n=n.render;var o=t.ref;return Ro(t,r),a=gi(e,t,n,a,o,r),n=yi(),null===e||xs?(ro&&n&&eo(t),t.flags|=1,vs(e,t,a,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Hs(e,t,r))}function ks(e,t,n,a,r){if(null===e){var o=n.type;return"function"!==typeof o||Ou(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Du(n.type,null,a,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Ss(e,t,o,a,r))}if(o=e.child,0===(e.lanes&r)){var i=o.memoizedProps;if((n=null!==(n=n.compare)?n:ca)(i,a)&&e.ref===t.ref)return Hs(e,t,r)}return t.flags|=1,(e=Fu(o,a)).ref=t.ref,e.return=t,t.child=e}function Ss(e,t,n,a,r){if(null!==e){var o=e.memoizedProps;if(ca(o,a)&&e.ref===t.ref){if(xs=!1,t.pendingProps=a=o,0===(e.lanes&r))return t.lanes=e.lanes,Hs(e,t,r);0!==(131072&e.flags)&&(xs=!0)}}return Ns(e,t,n,a,r)}function Cs(e,t,n){var a=t.pendingProps,r=a.children,o=null!==e?e.memoizedState:null;if("hidden"===a.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Nr(Fc,Oc),Oc|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Nr(Fc,Oc),Oc|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=null!==o?o.baseLanes:n,Nr(Fc,Oc),Oc|=a}else null!==o?(a=o.baseLanes|n,t.memoizedState=null):a=n,Nr(Fc,Oc),Oc|=a;return vs(e,t,r,n),t.child}function Is(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ns(e,t,n,a,r){var o=Or(n)?Rr:_r.current;return o=Ar(t,o),Ro(t,r),n=gi(e,t,n,a,o,r),a=yi(),null===e||xs?(ro&&a&&eo(t),t.flags|=1,vs(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Hs(e,t,r))}function Ts(e,t,n,a,r){if(Or(n)){var o=!0;Pr(t)}else o=!1;if(Ro(t,r),null===t.stateNode)Gs(e,t),is(t,n,a),cs(t,n,a,r),a=!0;else if(null===e){var i=t.stateNode,s=t.memoizedProps;i.props=s;var c=i.context,u=n.contextType;"object"===typeof u&&null!==u?u=Ao(u):u=Ar(t,u=Or(n)?Rr:_r.current);var l=n.getDerivedStateFromProps,d="function"===typeof l||"function"===typeof i.getSnapshotBeforeUpdate;d||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(s!==a||c!==u)&&ss(t,i,a,u),Po=!1;var p=t.memoizedState;i.state=p,Go(t,a,i,r),c=t.memoizedState,s!==a||p!==c||Er.current||Po?("function"===typeof l&&(as(t,n,l,a),c=t.memoizedState),(s=Po||os(t,n,s,a,p,c,u))?(d||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=c),i.props=a,i.state=c,i.context=u,a=s):("function"===typeof i.componentDidMount&&(t.flags|=4194308),a=!1)}else{i=t.stateNode,zo(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:ns(t.type,s),i.props=u,d=t.pendingProps,p=i.context,"object"===typeof(c=n.contextType)&&null!==c?c=Ao(c):c=Ar(t,c=Or(n)?Rr:_r.current);var h=n.getDerivedStateFromProps;(l="function"===typeof h||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(s!==d||p!==c)&&ss(t,i,a,c),Po=!1,p=t.memoizedState,i.state=p,Go(t,a,i,r);var f=t.memoizedState;s!==d||p!==f||Er.current||Po?("function"===typeof h&&(as(t,n,h,a),f=t.memoizedState),(u=Po||os(t,n,u,a,p,f,c)||!1)?(l||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(a,f,c),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(a,f,c)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=f),i.props=a,i.state=f,i.context=c,a=u):("function"!==typeof i.componentDidUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),a=!1)}return _s(e,t,n,a,o,r)}function _s(e,t,n,a,r,o){Is(e,t);var i=0!==(128&t.flags);if(!a&&!i)return r&&Lr(t,n,!1),Hs(e,t,o);a=t.stateNode,bs.current=t;var s=i&&"function"!==typeof n.getDerivedStateFromError?null:a.render();return t.flags|=1,null!==e&&i?(t.child=wo(t,e.child,null,o),t.child=wo(t,null,s,o)):vs(e,t,s,o),t.memoizedState=a.state,r&&Lr(t,n,!0),t.child}function Es(e){var t=e.stateNode;t.pendingContext?Dr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Dr(0,t.context,!1),Qo(e,t.containerInfo)}function Rs(e,t,n,a,r){return fo(),mo(r),t.flags|=256,vs(e,t,n,a),t.child}var As,Os,Fs,Ds,Ms={dehydrated:null,treeContext:null,retryLane:0};function Ps(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ls(e,t,n){var a,r=t.pendingProps,i=ei.current,s=!1,c=0!==(128&t.flags);if((a=c)||(a=(null===e||null!==e.memoizedState)&&0!==(2&i)),a?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Nr(ei,1&i),null===e)return uo(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(c=r.children,e=r.fallback,s?(r=t.mode,s=t.child,c={mode:"hidden",children:c},0===(1&r)&&null!==s?(s.childLanes=0,s.pendingProps=c):s=Pu(c,r,0,null),e=Mu(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ps(n),t.memoizedState=Ms,e):zs(t,c));if(null!==(i=e.memoizedState)&&null!==(a=i.dehydrated))return function(e,t,n,a,r,i,s){if(n)return 256&t.flags?(t.flags&=-257,Bs(e,t,s,a=ls(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=a.fallback,r=t.mode,a=Pu({mode:"visible",children:a.children},r,0,null),(i=Mu(i,r,s,null)).flags|=2,a.return=t,i.return=t,a.sibling=i,t.child=a,0!==(1&t.mode)&&wo(t,e.child,null,s),t.child.memoizedState=Ps(s),t.memoizedState=Ms,i);if(0===(1&t.mode))return Bs(e,t,s,null);if("$!"===r.data){if(a=r.nextSibling&&r.nextSibling.dataset)var c=a.dgst;return a=c,Bs(e,t,s,a=ls(i=Error(o(419)),a,void 0))}if(c=0!==(s&e.childLanes),xs||c){if(null!==(a=Ec)){switch(s&-s){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(a.suspendedLanes|s))?0:r)&&r!==i.retryLane&&(i.retryLane=r,Mo(e,r),nu(a,e,r,-1))}return mu(),Bs(e,t,s,a=ls(Error(o(421))))}return"$?"===r.data?(t.flags|=128,t.child=e.child,t=Tu.bind(null,e),r._reactRetry=t,null):(e=i.treeContext,ao=ur(r.nextSibling),no=t,ro=!0,oo=null,null!==e&&(qr[Xr++]=Qr,qr[Xr++]=Zr,qr[Xr++]=Yr,Qr=e.id,Zr=e.overflow,Yr=t),t=zs(t,a.children),t.flags|=4096,t)}(e,t,c,r,a,i,n);if(s){s=r.fallback,c=t.mode,a=(i=e.child).sibling;var u={mode:"hidden",children:r.children};return 0===(1&c)&&t.child!==i?((r=t.child).childLanes=0,r.pendingProps=u,t.deletions=null):(r=Fu(i,u)).subtreeFlags=14680064&i.subtreeFlags,null!==a?s=Fu(a,s):(s=Mu(s,c,n,null)).flags|=2,s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,c=null===(c=e.child.memoizedState)?Ps(n):{baseLanes:c.baseLanes|n,cachePool:null,transitions:c.transitions},s.memoizedState=c,s.childLanes=e.childLanes&~n,t.memoizedState=Ms,r}return e=(s=e.child).sibling,r=Fu(s,{mode:"visible",children:r.children}),0===(1&t.mode)&&(r.lanes=n),r.return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function zs(e,t){return(t=Pu({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Bs(e,t,n,a){return null!==a&&mo(a),wo(t,e.child,null,n),(e=zs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ws(e,t,n){e.lanes|=t;var a=e.alternate;null!==a&&(a.lanes|=t),Eo(e.return,t,n)}function Us(e,t,n,a,r){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:r}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=a,o.tail=n,o.tailMode=r)}function Vs(e,t,n){var a=t.pendingProps,r=a.revealOrder,o=a.tail;if(vs(e,t,a.children,n),0!==(2&(a=ei.current)))a=1&a|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ws(e,n,t);else if(19===e.tag)Ws(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(Nr(ei,a),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===ti(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Us(t,!1,r,n,o);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===ti(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Us(t,!0,n,null,o);break;case"together":Us(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Gs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Pc|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Fu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Fu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function js(e,t){if(!ro)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var a=null;null!==n;)null!==n.alternate&&(a=n),n=n.sibling;null===a?t||null===e.tail?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Ks(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,a=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,a|=14680064&r.subtreeFlags,a|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,a|=r.subtreeFlags,a|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=a,e.childLanes=n,t}function qs(e,t,n){var a=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ks(t),null;case 1:case 17:return Or(t.type)&&Fr(),Ks(t),null;case 3:return a=t.stateNode,Zo(),Ir(Er),Ir(_r),ai(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),null!==e&&null!==e.child||(po(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(iu(oo),oo=null))),Os(e,t),Ks(t),null;case 5:Jo(t);var r=Yo(Xo.current);if(n=t.type,null!==e&&null!=t.stateNode)Fs(e,t,n,a,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(null===t.stateNode)throw Error(o(166));return Ks(t),null}if(e=Yo(Ko.current),po(t)){a=t.stateNode,n=t.type;var i=t.memoizedProps;switch(a[pr]=t,a[hr]=i,e=0!==(1&t.mode),n){case"dialog":Ba("cancel",a),Ba("close",a);break;case"iframe":case"object":case"embed":Ba("load",a);break;case"video":case"audio":for(r=0;r<Ma.length;r++)Ba(Ma[r],a);break;case"source":Ba("error",a);break;case"img":case"image":case"link":Ba("error",a),Ba("load",a);break;case"details":Ba("toggle",a);break;case"input":Q(a,i),Ba("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!i.multiple},Ba("invalid",a);break;case"textarea":re(a,i),Ba("invalid",a)}for(var c in be(n,i),r=null,i)if(i.hasOwnProperty(c)){var u=i[c];"children"===c?"string"===typeof u?a.textContent!==u&&(!0!==i.suppressHydrationWarning&&$a(a.textContent,u,e),r=["children",u]):"number"===typeof u&&a.textContent!==""+u&&(!0!==i.suppressHydrationWarning&&$a(a.textContent,u,e),r=["children",""+u]):s.hasOwnProperty(c)&&null!=u&&"onScroll"===c&&Ba("scroll",a)}switch(n){case"input":K(a),J(a,i,!0);break;case"textarea":K(a),ie(a);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(a.onclick=Ja)}a=r,t.updateQueue=a,null!==a&&(t.flags|=4)}else{c=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof a.is?e=c.createElement(n,{is:a.is}):(e=c.createElement(n),"select"===n&&(c=e,a.multiple?c.multiple=!0:a.size&&(c.size=a.size))):e=c.createElementNS(e,n),e[pr]=t,e[hr]=a,As(e,t,!1,!1),t.stateNode=e;e:{switch(c=xe(n,a),n){case"dialog":Ba("cancel",e),Ba("close",e),r=a;break;case"iframe":case"object":case"embed":Ba("load",e),r=a;break;case"video":case"audio":for(r=0;r<Ma.length;r++)Ba(Ma[r],e);r=a;break;case"source":Ba("error",e),r=a;break;case"img":case"image":case"link":Ba("error",e),Ba("load",e),r=a;break;case"details":Ba("toggle",e),r=a;break;case"input":Q(e,a),r=Y(e,a),Ba("invalid",e);break;case"option":default:r=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},r=L({},a,{value:void 0}),Ba("invalid",e);break;case"textarea":re(e,a),r=ae(e,a),Ba("invalid",e)}for(i in be(n,r),u=r)if(u.hasOwnProperty(i)){var l=u[i];"style"===i?ge(e,l):"dangerouslySetInnerHTML"===i?null!=(l=l?l.__html:void 0)&&de(e,l):"children"===i?"string"===typeof l?("textarea"!==n||""!==l)&&pe(e,l):"number"===typeof l&&pe(e,""+l):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(s.hasOwnProperty(i)?null!=l&&"onScroll"===i&&Ba("scroll",e):null!=l&&x(e,i,l,c))}switch(n){case"input":K(e),J(e,a,!1);break;case"textarea":K(e),ie(e);break;case"option":null!=a.value&&e.setAttribute("value",""+H(a.value));break;case"select":e.multiple=!!a.multiple,null!=(i=a.value)?ne(e,!!a.multiple,i,!1):null!=a.defaultValue&&ne(e,!!a.multiple,a.defaultValue,!0);break;default:"function"===typeof r.onClick&&(e.onclick=Ja)}switch(n){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ks(t),null;case 6:if(e&&null!=t.stateNode)Ds(e,t,e.memoizedProps,a);else{if("string"!==typeof a&&null===t.stateNode)throw Error(o(166));if(n=Yo(Xo.current),Yo(Ko.current),po(t)){if(a=t.stateNode,n=t.memoizedProps,a[pr]=t,(i=a.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:$a(a.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$a(a.nodeValue,n,0!==(1&e.mode))}i&&(t.flags|=4)}else(a=(9===n.nodeType?n:n.ownerDocument).createTextNode(a))[pr]=t,t.stateNode=a}return Ks(t),null;case 13:if(Ir(ei),a=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ro&&null!==ao&&0!==(1&t.mode)&&0===(128&t.flags))ho(),fo(),t.flags|=98560,i=!1;else if(i=po(t),null!==a&&null!==a.dehydrated){if(null===e){if(!i)throw Error(o(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(o(317));i[pr]=t}else fo(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ks(t),i=!1}else null!==oo&&(iu(oo),oo=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((a=null!==a)!==(null!==e&&null!==e.memoizedState)&&a&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ei.current)?0===Dc&&(Dc=3):mu())),null!==t.updateQueue&&(t.flags|=4),Ks(t),null);case 4:return Zo(),Os(e,t),null===e&&Va(t.stateNode.containerInfo),Ks(t),null;case 10:return _o(t.type._context),Ks(t),null;case 19:if(Ir(ei),null===(i=t.memoizedState))return Ks(t),null;if(a=0!==(128&t.flags),null===(c=i.rendering))if(a)js(i,!1);else{if(0!==Dc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(c=ti(e))){for(t.flags|=128,js(i,!1),null!==(a=c.updateQueue)&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=n,n=t.child;null!==n;)e=a,(i=n).flags&=14680066,null===(c=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=c.childLanes,i.lanes=c.lanes,i.child=c.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=c.memoizedProps,i.memoizedState=c.memoizedState,i.updateQueue=c.updateQueue,i.type=c.type,e=c.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Nr(ei,1&ei.current|2),t.child}e=e.sibling}null!==i.tail&&Ze()>Vc&&(t.flags|=128,a=!0,js(i,!1),t.lanes=4194304)}else{if(!a)if(null!==(e=ti(c))){if(t.flags|=128,a=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),js(i,!0),null===i.tail&&"hidden"===i.tailMode&&!c.alternate&&!ro)return Ks(t),null}else 2*Ze()-i.renderingStartTime>Vc&&1073741824!==n&&(t.flags|=128,a=!0,js(i,!1),t.lanes=4194304);i.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=i.last)?n.sibling=c:t.child=c,i.last=c)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Ze(),t.sibling=null,n=ei.current,Nr(ei,a?1&n|2:1&n),t):(Ks(t),null);case 22:case 23:return du(),a=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==a&&(t.flags|=8192),a&&0!==(1&t.mode)?0!==(1073741824&Oc)&&(Ks(t),6&t.subtreeFlags&&(t.flags|=8192)):Ks(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Xs(e,t){switch(to(t),t.tag){case 1:return Or(t.type)&&Fr(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Zo(),Ir(Er),Ir(_r),ai(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Jo(t),null;case 13:if(Ir(ei),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));fo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ir(ei),null;case 4:return Zo(),null;case 10:return _o(t.type._context),null;case 22:case 23:return du(),null;default:return null}}As=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Os=function(){},Fs=function(e,t,n,a){var r=e.memoizedProps;if(r!==a){e=t.stateNode,Yo(Ko.current);var o,i=null;switch(n){case"input":r=Y(e,r),a=Y(e,a),i=[];break;case"select":r=L({},r,{value:void 0}),a=L({},a,{value:void 0}),i=[];break;case"textarea":r=ae(e,r),a=ae(e,a),i=[];break;default:"function"!==typeof r.onClick&&"function"===typeof a.onClick&&(e.onclick=Ja)}for(l in be(n,a),n=null,r)if(!a.hasOwnProperty(l)&&r.hasOwnProperty(l)&&null!=r[l])if("style"===l){var c=r[l];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(s.hasOwnProperty(l)?i||(i=[]):(i=i||[]).push(l,null));for(l in a){var u=a[l];if(c=null!=r?r[l]:void 0,a.hasOwnProperty(l)&&u!==c&&(null!=u||null!=c))if("style"===l)if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(l,n)),n=u;else"dangerouslySetInnerHTML"===l?(u=u?u.__html:void 0,c=c?c.__html:void 0,null!=u&&c!==u&&(i=i||[]).push(l,u)):"children"===l?"string"!==typeof u&&"number"!==typeof u||(i=i||[]).push(l,""+u):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(s.hasOwnProperty(l)?(null!=u&&"onScroll"===l&&Ba("scroll",e),i||c===u||(i=[])):(i=i||[]).push(l,u))}n&&(i=i||[]).push("style",n);var l=i;(t.updateQueue=l)&&(t.flags|=4)}},Ds=function(e,t,n,a){n!==a&&(t.flags|=4)};var Ys=!1,Qs=!1,Zs="function"===typeof WeakSet?WeakSet:Set,$s=null;function Js(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(a){Cu(e,t,a)}else n.current=null}function ec(e,t,n){try{n()}catch(a){Cu(e,t,a)}}var tc=!1;function nc(e,t,n){var a=t.updateQueue;if(null!==(a=null!==a?a.lastEffect:null)){var r=a=a.next;do{if((r.tag&e)===e){var o=r.destroy;r.destroy=void 0,void 0!==o&&ec(t,n,o)}r=r.next}while(r!==a)}}function ac(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var a=n.create;n.destroy=a()}n=n.next}while(n!==t)}}function rc(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function oc(e){var t=e.alternate;null!==t&&(e.alternate=null,oc(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[pr],delete t[hr],delete t[mr],delete t[gr],delete t[yr])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ic(e){return 5===e.tag||3===e.tag||4===e.tag}function sc(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ic(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cc(e,t,n){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Ja));else if(4!==a&&null!==(e=e.child))for(cc(e,t,n),e=e.sibling;null!==e;)cc(e,t,n),e=e.sibling}function uc(e,t,n){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==a&&null!==(e=e.child))for(uc(e,t,n),e=e.sibling;null!==e;)uc(e,t,n),e=e.sibling}var lc=null,dc=!1;function pc(e,t,n){for(n=n.child;null!==n;)hc(e,t,n),n=n.sibling}function hc(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(rt,n)}catch(s){}switch(n.tag){case 5:Qs||Js(n,t);case 6:var a=lc,r=dc;lc=null,pc(e,t,n),dc=r,null!==(lc=a)&&(dc?(e=lc,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):lc.removeChild(n.stateNode));break;case 18:null!==lc&&(dc?(e=lc,n=n.stateNode,8===e.nodeType?cr(e.parentNode,n):1===e.nodeType&&cr(e,n),Vt(e)):cr(lc,n.stateNode));break;case 4:a=lc,r=dc,lc=n.stateNode.containerInfo,dc=!0,pc(e,t,n),lc=a,dc=r;break;case 0:case 11:case 14:case 15:if(!Qs&&(null!==(a=n.updateQueue)&&null!==(a=a.lastEffect))){r=a=a.next;do{var o=r,i=o.destroy;o=o.tag,void 0!==i&&(0!==(2&o)||0!==(4&o))&&ec(n,t,i),r=r.next}while(r!==a)}pc(e,t,n);break;case 1:if(!Qs&&(Js(n,t),"function"===typeof(a=n.stateNode).componentWillUnmount))try{a.props=n.memoizedProps,a.state=n.memoizedState,a.componentWillUnmount()}catch(s){Cu(n,t,s)}pc(e,t,n);break;case 21:pc(e,t,n);break;case 22:1&n.mode?(Qs=(a=Qs)||null!==n.memoizedState,pc(e,t,n),Qs=a):pc(e,t,n);break;default:pc(e,t,n)}}function fc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Zs),t.forEach((function(t){var a=_u.bind(null,e,t);n.has(t)||(n.add(t),t.then(a,a))}))}}function mc(e,t){var n=t.deletions;if(null!==n)for(var a=0;a<n.length;a++){var r=n[a];try{var i=e,s=t,c=s;e:for(;null!==c;){switch(c.tag){case 5:lc=c.stateNode,dc=!1;break e;case 3:case 4:lc=c.stateNode.containerInfo,dc=!0;break e}c=c.return}if(null===lc)throw Error(o(160));hc(i,s,r),lc=null,dc=!1;var u=r.alternate;null!==u&&(u.return=null),r.return=null}catch(l){Cu(r,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gc(t,e),t=t.sibling}function gc(e,t){var n=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mc(t,e),yc(e),4&a){try{nc(3,e,e.return),ac(3,e)}catch(g){Cu(e,e.return,g)}try{nc(5,e,e.return)}catch(g){Cu(e,e.return,g)}}break;case 1:mc(t,e),yc(e),512&a&&null!==n&&Js(n,n.return);break;case 5:if(mc(t,e),yc(e),512&a&&null!==n&&Js(n,n.return),32&e.flags){var r=e.stateNode;try{pe(r,"")}catch(g){Cu(e,e.return,g)}}if(4&a&&null!=(r=e.stateNode)){var i=e.memoizedProps,s=null!==n?n.memoizedProps:i,c=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===c&&"radio"===i.type&&null!=i.name&&Z(r,i),xe(c,s);var l=xe(c,i);for(s=0;s<u.length;s+=2){var d=u[s],p=u[s+1];"style"===d?ge(r,p):"dangerouslySetInnerHTML"===d?de(r,p):"children"===d?pe(r,p):x(r,d,p,l)}switch(c){case"input":$(r,i);break;case"textarea":oe(r,i);break;case"select":var h=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var f=i.value;null!=f?ne(r,!!i.multiple,f,!1):h!==!!i.multiple&&(null!=i.defaultValue?ne(r,!!i.multiple,i.defaultValue,!0):ne(r,!!i.multiple,i.multiple?[]:"",!1))}r[hr]=i}catch(g){Cu(e,e.return,g)}}break;case 6:if(mc(t,e),yc(e),4&a){if(null===e.stateNode)throw Error(o(162));r=e.stateNode,i=e.memoizedProps;try{r.nodeValue=i}catch(g){Cu(e,e.return,g)}}break;case 3:if(mc(t,e),yc(e),4&a&&null!==n&&n.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(g){Cu(e,e.return,g)}break;case 4:default:mc(t,e),yc(e);break;case 13:mc(t,e),yc(e),8192&(r=e.child).flags&&(i=null!==r.memoizedState,r.stateNode.isHidden=i,!i||null!==r.alternate&&null!==r.alternate.memoizedState||(Uc=Ze())),4&a&&fc(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Qs=(l=Qs)||d,mc(t,e),Qs=l):mc(t,e),yc(e),8192&a){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!d&&0!==(1&e.mode))for($s=e,d=e.child;null!==d;){for(p=$s=d;null!==$s;){switch(f=(h=$s).child,h.tag){case 0:case 11:case 14:case 15:nc(4,h,h.return);break;case 1:Js(h,h.return);var m=h.stateNode;if("function"===typeof m.componentWillUnmount){a=h,n=h.return;try{t=a,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Cu(a,n,g)}}break;case 5:Js(h,h.return);break;case 22:if(null!==h.memoizedState){wc(p);continue}}null!==f?(f.return=h,$s=f):wc(p)}d=d.sibling}e:for(d=null,p=e;;){if(5===p.tag){if(null===d){d=p;try{r=p.stateNode,l?"function"===typeof(i=r.style).setProperty?i.setProperty("display","none","important"):i.display="none":(c=p.stateNode,s=void 0!==(u=p.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,c.style.display=me("display",s))}catch(g){Cu(e,e.return,g)}}}else if(6===p.tag){if(null===d)try{p.stateNode.nodeValue=l?"":p.memoizedProps}catch(g){Cu(e,e.return,g)}}else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===e)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;null===p.sibling;){if(null===p.return||p.return===e)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:mc(t,e),yc(e),4&a&&fc(e);case 21:}}function yc(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ic(n)){var a=n;break e}n=n.return}throw Error(o(160))}switch(a.tag){case 5:var r=a.stateNode;32&a.flags&&(pe(r,""),a.flags&=-33),uc(e,sc(e),r);break;case 3:case 4:var i=a.stateNode.containerInfo;cc(e,sc(e),i);break;default:throw Error(o(161))}}catch(s){Cu(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bc(e,t,n){$s=e,xc(e,t,n)}function xc(e,t,n){for(var a=0!==(1&e.mode);null!==$s;){var r=$s,o=r.child;if(22===r.tag&&a){var i=null!==r.memoizedState||Ys;if(!i){var s=r.alternate,c=null!==s&&null!==s.memoizedState||Qs;s=Ys;var u=Qs;if(Ys=i,(Qs=c)&&!u)for($s=r;null!==$s;)c=(i=$s).child,22===i.tag&&null!==i.memoizedState?kc(r):null!==c?(c.return=i,$s=c):kc(r);for(;null!==o;)$s=o,xc(o,t,n),o=o.sibling;$s=r,Ys=s,Qs=u}vc(e)}else 0!==(8772&r.subtreeFlags)&&null!==o?(o.return=r,$s=o):vc(e)}}function vc(e){for(;null!==$s;){var t=$s;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qs||ac(5,t);break;case 1:var a=t.stateNode;if(4&t.flags&&!Qs)if(null===n)a.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:ns(t.type,n.memoizedProps);a.componentDidUpdate(r,n.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&Ho(t,i,a);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ho(t,s,n)}break;case 5:var c=t.stateNode;if(null===n&&4&t.flags){n=c;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var d=l.memoizedState;if(null!==d){var p=d.dehydrated;null!==p&&Vt(p)}}}break;default:throw Error(o(163))}Qs||512&t.flags&&rc(t)}catch(h){Cu(t,t.return,h)}}if(t===e){$s=null;break}if(null!==(n=t.sibling)){n.return=t.return,$s=n;break}$s=t.return}}function wc(e){for(;null!==$s;){var t=$s;if(t===e){$s=null;break}var n=t.sibling;if(null!==n){n.return=t.return,$s=n;break}$s=t.return}}function kc(e){for(;null!==$s;){var t=$s;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ac(4,t)}catch(c){Cu(t,n,c)}break;case 1:var a=t.stateNode;if("function"===typeof a.componentDidMount){var r=t.return;try{a.componentDidMount()}catch(c){Cu(t,r,c)}}var o=t.return;try{rc(t)}catch(c){Cu(t,o,c)}break;case 5:var i=t.return;try{rc(t)}catch(c){Cu(t,i,c)}}}catch(c){Cu(t,t.return,c)}if(t===e){$s=null;break}var s=t.sibling;if(null!==s){s.return=t.return,$s=s;break}$s=t.return}}var Sc,Cc=Math.ceil,Ic=v.ReactCurrentDispatcher,Nc=v.ReactCurrentOwner,Tc=v.ReactCurrentBatchConfig,_c=0,Ec=null,Rc=null,Ac=0,Oc=0,Fc=Cr(0),Dc=0,Mc=null,Pc=0,Lc=0,zc=0,Bc=null,Wc=null,Uc=0,Vc=1/0,Gc=null,Hc=!1,jc=null,Kc=null,qc=!1,Xc=null,Yc=0,Qc=0,Zc=null,$c=-1,Jc=0;function eu(){return 0!==(6&_c)?Ze():-1!==$c?$c:$c=Ze()}function tu(e){return 0===(1&e.mode)?1:0!==(2&_c)&&0!==Ac?Ac&-Ac:null!==go.transition?(0===Jc&&(Jc=mt()),Jc):0!==(e=xt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function nu(e,t,n,a){if(50<Qc)throw Qc=0,Zc=null,Error(o(185));yt(e,n,a),0!==(2&_c)&&e===Ec||(e===Ec&&(0===(2&_c)&&(Lc|=n),4===Dc&&su(e,Ac)),au(e,a),1===n&&0===_c&&0===(1&t.mode)&&(Vc=Ze()+500,Br&&Vr()))}function au(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,a=e.pingedLanes,r=e.expirationTimes,o=e.pendingLanes;0<o;){var i=31-it(o),s=1<<i,c=r[i];-1===c?0!==(s&n)&&0===(s&a)||(r[i]=ht(s,t)):c<=t&&(e.expiredLanes|=s),o&=~s}}(e,t);var a=pt(e,e===Ec?Ac:0);if(0===a)null!==n&&Xe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(null!=n&&Xe(n),1===t)0===e.tag?function(e){Br=!0,Ur(e)}(cu.bind(null,e)):Ur(cu.bind(null,e)),ir((function(){0===(6&_c)&&Vr()})),n=null;else{switch(vt(a)){case 1:n=Je;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=at}n=Eu(n,ru.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ru(e,t){if($c=-1,Jc=0,0!==(6&_c))throw Error(o(327));var n=e.callbackNode;if(ku()&&e.callbackNode!==n)return null;var a=pt(e,e===Ec?Ac:0);if(0===a)return null;if(0!==(30&a)||0!==(a&e.expiredLanes)||t)t=gu(e,a);else{t=a;var r=_c;_c|=2;var i=fu();for(Ec===e&&Ac===t||(Gc=null,Vc=Ze()+500,pu(e,t));;)try{bu();break}catch(c){hu(e,c)}To(),Ic.current=i,_c=r,null!==Rc?t=0:(Ec=null,Ac=0,t=Dc)}if(0!==t){if(2===t&&(0!==(r=ft(e))&&(a=r,t=ou(e,r))),1===t)throw n=Mc,pu(e,0),su(e,a),au(e,Ze()),n;if(6===t)su(e,a);else{if(r=e.current.alternate,0===(30&a)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var a=0;a<n.length;a++){var r=n[a],o=r.getSnapshot;r=r.value;try{if(!sa(o(),r))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=gu(e,a))&&(0!==(i=ft(e))&&(a=i,t=ou(e,i))),1===t))throw n=Mc,pu(e,0),su(e,a),au(e,Ze()),n;switch(e.finishedWork=r,e.finishedLanes=a,t){case 0:case 1:throw Error(o(345));case 2:case 5:wu(e,Wc,Gc);break;case 3:if(su(e,a),(130023424&a)===a&&10<(t=Uc+500-Ze())){if(0!==pt(e,0))break;if(((r=e.suspendedLanes)&a)!==a){eu(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=ar(wu.bind(null,e,Wc,Gc),t);break}wu(e,Wc,Gc);break;case 4:if(su(e,a),(4194240&a)===a)break;for(t=e.eventTimes,r=-1;0<a;){var s=31-it(a);i=1<<s,(s=t[s])>r&&(r=s),a&=~i}if(a=r,10<(a=(120>(a=Ze()-a)?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*Cc(a/1960))-a)){e.timeoutHandle=ar(wu.bind(null,e,Wc,Gc),a);break}wu(e,Wc,Gc);break;default:throw Error(o(329))}}}return au(e,Ze()),e.callbackNode===n?ru.bind(null,e):null}function ou(e,t){var n=Bc;return e.current.memoizedState.isDehydrated&&(pu(e,t).flags|=256),2!==(e=gu(e,t))&&(t=Wc,Wc=n,null!==t&&iu(t)),e}function iu(e){null===Wc?Wc=e:Wc.push.apply(Wc,e)}function su(e,t){for(t&=~zc,t&=~Lc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-it(t),a=1<<n;e[n]=-1,t&=~a}}function cu(e){if(0!==(6&_c))throw Error(o(327));ku();var t=pt(e,0);if(0===(1&t))return au(e,Ze()),null;var n=gu(e,t);if(0!==e.tag&&2===n){var a=ft(e);0!==a&&(t=a,n=ou(e,a))}if(1===n)throw n=Mc,pu(e,0),su(e,t),au(e,Ze()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wu(e,Wc,Gc),au(e,Ze()),null}function uu(e,t){var n=_c;_c|=1;try{return e(t)}finally{0===(_c=n)&&(Vc=Ze()+500,Br&&Vr())}}function lu(e){null!==Xc&&0===Xc.tag&&0===(6&_c)&&ku();var t=_c;_c|=1;var n=Tc.transition,a=xt;try{if(Tc.transition=null,xt=1,e)return e()}finally{xt=a,Tc.transition=n,0===(6&(_c=t))&&Vr()}}function du(){Oc=Fc.current,Ir(Fc)}function pu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,rr(n)),null!==Rc)for(n=Rc.return;null!==n;){var a=n;switch(to(a),a.tag){case 1:null!==(a=a.type.childContextTypes)&&void 0!==a&&Fr();break;case 3:Zo(),Ir(Er),Ir(_r),ai();break;case 5:Jo(a);break;case 4:Zo();break;case 13:case 19:Ir(ei);break;case 10:_o(a.type._context);break;case 22:case 23:du()}n=n.return}if(Ec=e,Rc=e=Fu(e.current,null),Ac=Oc=t,Dc=0,Mc=null,zc=Lc=Pc=0,Wc=Bc=null,null!==Oo){for(t=0;t<Oo.length;t++)if(null!==(a=(n=Oo[t]).interleaved)){n.interleaved=null;var r=a.next,o=n.pending;if(null!==o){var i=o.next;o.next=r,a.next=i}n.pending=a}Oo=null}return e}function hu(e,t){for(;;){var n=Rc;try{if(To(),ri.current=$i,li){for(var a=si.memoizedState;null!==a;){var r=a.queue;null!==r&&(r.pending=null),a=a.next}li=!1}if(ii=0,ui=ci=si=null,di=!1,pi=0,Nc.current=null,null===n||null===n.return){Dc=1,Mc=t,Rc=null;break}e:{var i=e,s=n.return,c=n,u=t;if(t=Ac,c.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var l=u,d=c,p=d.tag;if(0===(1&d.mode)&&(0===p||11===p||15===p)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=gs(s);if(null!==f){f.flags&=-257,ys(f,s,c,0,t),1&f.mode&&ms(i,l,t),u=l;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(u),t.updateQueue=g}else m.add(u);break e}if(0===(1&t)){ms(i,l,t),mu();break e}u=Error(o(426))}else if(ro&&1&c.mode){var y=gs(s);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),ys(y,s,c,0,t),mo(us(u,c));break e}}i=u=us(u,c),4!==Dc&&(Dc=2),null===Bc?Bc=[i]:Bc.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,Vo(i,hs(0,u,t));break e;case 1:c=u;var b=i.type,x=i.stateNode;if(0===(128&i.flags)&&("function"===typeof b.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===Kc||!Kc.has(x)))){i.flags|=65536,t&=-t,i.lanes|=t,Vo(i,fs(i,c,t));break e}}i=i.return}while(null!==i)}vu(n)}catch(v){t=v,Rc===n&&null!==n&&(Rc=n=n.return);continue}break}}function fu(){var e=Ic.current;return Ic.current=$i,null===e?$i:e}function mu(){0!==Dc&&3!==Dc&&2!==Dc||(Dc=4),null===Ec||0===(268435455&Pc)&&0===(268435455&Lc)||su(Ec,Ac)}function gu(e,t){var n=_c;_c|=2;var a=fu();for(Ec===e&&Ac===t||(Gc=null,pu(e,t));;)try{yu();break}catch(r){hu(e,r)}if(To(),_c=n,Ic.current=a,null!==Rc)throw Error(o(261));return Ec=null,Ac=0,Dc}function yu(){for(;null!==Rc;)xu(Rc)}function bu(){for(;null!==Rc&&!Ye();)xu(Rc)}function xu(e){var t=Sc(e.alternate,e,Oc);e.memoizedProps=e.pendingProps,null===t?vu(e):Rc=t,Nc.current=null}function vu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=qs(n,t,Oc)))return void(Rc=n)}else{if(null!==(n=Xs(n,t)))return n.flags&=32767,void(Rc=n);if(null===e)return Dc=6,void(Rc=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Rc=t);Rc=t=e}while(null!==t);0===Dc&&(Dc=5)}function wu(e,t,n){var a=xt,r=Tc.transition;try{Tc.transition=null,xt=1,function(e,t,n,a){do{ku()}while(null!==Xc);if(0!==(6&_c))throw Error(o(327));n=e.finishedWork;var r=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-it(n),o=1<<r;t[r]=0,a[r]=-1,e[r]=-1,n&=~o}}(e,i),e===Ec&&(Rc=Ec=null,Ac=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||qc||(qc=!0,Eu(tt,(function(){return ku(),null}))),i=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||i){i=Tc.transition,Tc.transition=null;var s=xt;xt=1;var c=_c;_c|=4,Nc.current=null,function(e,t){if(er=Ht,ha(e=pa())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var a=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(a&&0!==a.rangeCount){n=a.anchorNode;var r=a.anchorOffset,i=a.focusNode;a=a.focusOffset;try{n.nodeType,i.nodeType}catch(w){n=null;break e}var s=0,c=-1,u=-1,l=0,d=0,p=e,h=null;t:for(;;){for(var f;p!==n||0!==r&&3!==p.nodeType||(c=s+r),p!==i||0!==a&&3!==p.nodeType||(u=s+a),3===p.nodeType&&(s+=p.nodeValue.length),null!==(f=p.firstChild);)h=p,p=f;for(;;){if(p===e)break t;if(h===n&&++l===r&&(c=s),h===i&&++d===a&&(u=s),null!==(f=p.nextSibling))break;h=(p=h).parentNode}p=f}n=-1===c||-1===u?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(tr={focusedElem:e,selectionRange:n},Ht=!1,$s=t;null!==$s;)if(e=(t=$s).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,$s=e;else for(;null!==$s;){t=$s;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,b=t.stateNode,x=b.getSnapshotBeforeUpdate(t.elementType===t.type?g:ns(t.type,g),y);b.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var v=t.stateNode.containerInfo;1===v.nodeType?v.textContent="":9===v.nodeType&&v.documentElement&&v.removeChild(v.documentElement);break;default:throw Error(o(163))}}catch(w){Cu(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,$s=e;break}$s=t.return}m=tc,tc=!1}(e,n),gc(n,e),fa(tr),Ht=!!er,tr=er=null,e.current=n,bc(n,e,r),Qe(),_c=c,xt=s,Tc.transition=i}else e.current=n;if(qc&&(qc=!1,Xc=e,Yc=r),i=e.pendingLanes,0===i&&(Kc=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),au(e,Ze()),null!==t)for(a=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],a(r.value,{componentStack:r.stack,digest:r.digest});if(Hc)throw Hc=!1,e=jc,jc=null,e;0!==(1&Yc)&&0!==e.tag&&ku(),i=e.pendingLanes,0!==(1&i)?e===Zc?Qc++:(Qc=0,Zc=e):Qc=0,Vr()}(e,t,n,a)}finally{Tc.transition=r,xt=a}return null}function ku(){if(null!==Xc){var e=vt(Yc),t=Tc.transition,n=xt;try{if(Tc.transition=null,xt=16>e?16:e,null===Xc)var a=!1;else{if(e=Xc,Xc=null,Yc=0,0!==(6&_c))throw Error(o(331));var r=_c;for(_c|=4,$s=e.current;null!==$s;){var i=$s,s=i.child;if(0!==(16&$s.flags)){var c=i.deletions;if(null!==c){for(var u=0;u<c.length;u++){var l=c[u];for($s=l;null!==$s;){var d=$s;switch(d.tag){case 0:case 11:case 15:nc(8,d,i)}var p=d.child;if(null!==p)p.return=d,$s=p;else for(;null!==$s;){var h=(d=$s).sibling,f=d.return;if(oc(d),d===l){$s=null;break}if(null!==h){h.return=f,$s=h;break}$s=f}}}var m=i.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}$s=i}}if(0!==(2064&i.subtreeFlags)&&null!==s)s.return=i,$s=s;else e:for(;null!==$s;){if(0!==(2048&(i=$s).flags))switch(i.tag){case 0:case 11:case 15:nc(9,i,i.return)}var b=i.sibling;if(null!==b){b.return=i.return,$s=b;break e}$s=i.return}}var x=e.current;for($s=x;null!==$s;){var v=(s=$s).child;if(0!==(2064&s.subtreeFlags)&&null!==v)v.return=s,$s=v;else e:for(s=x;null!==$s;){if(0!==(2048&(c=$s).flags))try{switch(c.tag){case 0:case 11:case 15:ac(9,c)}}catch(k){Cu(c,c.return,k)}if(c===s){$s=null;break e}var w=c.sibling;if(null!==w){w.return=c.return,$s=w;break e}$s=c.return}}if(_c=r,Vr(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(rt,e)}catch(k){}a=!0}return a}finally{xt=n,Tc.transition=t}}return!1}function Su(e,t,n){e=Wo(e,t=hs(0,t=us(n,t),1),1),t=eu(),null!==e&&(yt(e,1,t),au(e,t))}function Cu(e,t,n){if(3===e.tag)Su(e,e,n);else for(;null!==t;){if(3===t.tag){Su(t,e,n);break}if(1===t.tag){var a=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof a.componentDidCatch&&(null===Kc||!Kc.has(a))){t=Wo(t,e=fs(t,e=us(n,e),1),1),e=eu(),null!==t&&(yt(t,1,e),au(t,e));break}}t=t.return}}function Iu(e,t,n){var a=e.pingCache;null!==a&&a.delete(t),t=eu(),e.pingedLanes|=e.suspendedLanes&n,Ec===e&&(Ac&n)===n&&(4===Dc||3===Dc&&(130023424&Ac)===Ac&&500>Ze()-Uc?pu(e,0):zc|=n),au(e,t)}function Nu(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=eu();null!==(e=Mo(e,t))&&(yt(e,t,n),au(e,n))}function Tu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Nu(e,n)}function _u(e,t){var n=0;switch(e.tag){case 13:var a=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(o(314))}null!==a&&a.delete(t),Nu(e,n)}function Eu(e,t){return qe(e,t)}function Ru(e,t,n,a){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Au(e,t,n,a){return new Ru(e,t,n,a)}function Ou(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Fu(e,t){var n=e.alternate;return null===n?((n=Au(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Du(e,t,n,a,r,i){var s=2;if(a=e,"function"===typeof e)Ou(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case S:return Mu(n.children,r,i,t);case C:s=8,r|=8;break;case I:return(e=Au(12,n,t,2|r)).elementType=I,e.lanes=i,e;case E:return(e=Au(13,n,t,r)).elementType=E,e.lanes=i,e;case R:return(e=Au(19,n,t,r)).elementType=R,e.lanes=i,e;case F:return Pu(n,r,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case N:s=10;break e;case T:s=9;break e;case _:s=11;break e;case A:s=14;break e;case O:s=16,a=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Au(s,n,t,r)).elementType=e,t.type=a,t.lanes=i,t}function Mu(e,t,n,a){return(e=Au(7,e,a,t)).lanes=n,e}function Pu(e,t,n,a){return(e=Au(22,e,a,t)).elementType=F,e.lanes=n,e.stateNode={isHidden:!1},e}function Lu(e,t,n){return(e=Au(6,e,null,t)).lanes=n,e}function zu(e,t,n){return(t=Au(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bu(e,t,n,a,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=a,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Wu(e,t,n,a,r,o,i,s,c){return e=new Bu(e,t,n,s,c),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Au(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:a,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Lo(o),e}function Uu(e){if(!e)return Tr;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Or(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Or(n))return Mr(e,n,t)}return t}function Vu(e,t,n,a,r,o,i,s,c){return(e=Wu(n,a,!0,e,0,o,0,s,c)).context=Uu(null),n=e.current,(o=Bo(a=eu(),r=tu(n))).callback=void 0!==t&&null!==t?t:null,Wo(n,o,r),e.current.lanes=r,yt(e,r,a),au(e,a),e}function Gu(e,t,n,a){var r=t.current,o=eu(),i=tu(r);return n=Uu(n),null===t.context?t.context=n:t.pendingContext=n,(t=Bo(o,i)).payload={element:e},null!==(a=void 0===a?null:a)&&(t.callback=a),null!==(e=Wo(r,t,i))&&(nu(e,r,i,o),Uo(e,r,i)),i}function Hu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function ju(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Ku(e,t){ju(e,t),(e=e.alternate)&&ju(e,t)}Sc=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Er.current)xs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return xs=!1,function(e,t,n){switch(t.tag){case 3:Es(t),fo();break;case 5:$o(t);break;case 1:Or(t.type)&&Pr(t);break;case 4:Qo(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,r=t.memoizedProps.value;Nr(So,a._currentValue),a._currentValue=r;break;case 13:if(null!==(a=t.memoizedState))return null!==a.dehydrated?(Nr(ei,1&ei.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ls(e,t,n):(Nr(ei,1&ei.current),null!==(e=Hs(e,t,n))?e.sibling:null);Nr(ei,1&ei.current);break;case 19:if(a=0!==(n&t.childLanes),0!==(128&e.flags)){if(a)return Vs(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Nr(ei,ei.current),a)break;return null;case 22:case 23:return t.lanes=0,Cs(e,t,n)}return Hs(e,t,n)}(e,t,n);xs=0!==(131072&e.flags)}else xs=!1,ro&&0!==(1048576&t.flags)&&Jr(t,Kr,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;Gs(e,t),e=t.pendingProps;var r=Ar(t,_r.current);Ro(t,n),r=gi(null,t,a,e,r,n);var i=yi();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Or(a)?(i=!0,Pr(t)):i=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,Lo(t),r.updater=rs,t.stateNode=r,r._reactInternals=t,cs(t,a,e,n),t=_s(null,t,a,!0,i,n)):(t.tag=0,ro&&i&&eo(t),vs(null,t,r,n),t=t.child),t;case 16:a=t.elementType;e:{switch(Gs(e,t),e=t.pendingProps,a=(r=a._init)(a._payload),t.type=a,r=t.tag=function(e){if("function"===typeof e)return Ou(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===_)return 11;if(e===A)return 14}return 2}(a),e=ns(a,e),r){case 0:t=Ns(null,t,a,e,n);break e;case 1:t=Ts(null,t,a,e,n);break e;case 11:t=ws(null,t,a,e,n);break e;case 14:t=ks(null,t,a,ns(a.type,e),n);break e}throw Error(o(306,a,""))}return t;case 0:return a=t.type,r=t.pendingProps,Ns(e,t,a,r=t.elementType===a?r:ns(a,r),n);case 1:return a=t.type,r=t.pendingProps,Ts(e,t,a,r=t.elementType===a?r:ns(a,r),n);case 3:e:{if(Es(t),null===e)throw Error(o(387));a=t.pendingProps,r=(i=t.memoizedState).element,zo(e,t),Go(t,a,null,n);var s=t.memoizedState;if(a=s.element,i.isDehydrated){if(i={element:a,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Rs(e,t,a,n,r=us(Error(o(423)),t));break e}if(a!==r){t=Rs(e,t,a,n,r=us(Error(o(424)),t));break e}for(ao=ur(t.stateNode.containerInfo.firstChild),no=t,ro=!0,oo=null,n=ko(t,null,a,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fo(),a===r){t=Hs(e,t,n);break e}vs(e,t,a,n)}t=t.child}return t;case 5:return $o(t),null===e&&uo(t),a=t.type,r=t.pendingProps,i=null!==e?e.memoizedProps:null,s=r.children,nr(a,r)?s=null:null!==i&&nr(a,i)&&(t.flags|=32),Is(e,t),vs(e,t,s,n),t.child;case 6:return null===e&&uo(t),null;case 13:return Ls(e,t,n);case 4:return Qo(t,t.stateNode.containerInfo),a=t.pendingProps,null===e?t.child=wo(t,null,a,n):vs(e,t,a,n),t.child;case 11:return a=t.type,r=t.pendingProps,ws(e,t,a,r=t.elementType===a?r:ns(a,r),n);case 7:return vs(e,t,t.pendingProps,n),t.child;case 8:case 12:return vs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(a=t.type._context,r=t.pendingProps,i=t.memoizedProps,s=r.value,Nr(So,a._currentValue),a._currentValue=s,null!==i)if(sa(i.value,s)){if(i.children===r.children&&!Er.current){t=Hs(e,t,n);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var c=i.dependencies;if(null!==c){s=i.child;for(var u=c.firstContext;null!==u;){if(u.context===a){if(1===i.tag){(u=Bo(-1,n&-n)).tag=2;var l=i.updateQueue;if(null!==l){var d=(l=l.shared).pending;null===d?u.next=u:(u.next=d.next,d.next=u),l.pending=u}}i.lanes|=n,null!==(u=i.alternate)&&(u.lanes|=n),Eo(i.return,n,t),c.lanes|=n;break}u=u.next}}else if(10===i.tag)s=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(s=i.return))throw Error(o(341));s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),Eo(s,n,t),s=i.sibling}else s=i.child;if(null!==s)s.return=i;else for(s=i;null!==s;){if(s===t){s=null;break}if(null!==(i=s.sibling)){i.return=s.return,s=i;break}s=s.return}i=s}vs(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,a=t.pendingProps.children,Ro(t,n),a=a(r=Ao(r)),t.flags|=1,vs(e,t,a,n),t.child;case 14:return r=ns(a=t.type,t.pendingProps),ks(e,t,a,r=ns(a.type,r),n);case 15:return Ss(e,t,t.type,t.pendingProps,n);case 17:return a=t.type,r=t.pendingProps,r=t.elementType===a?r:ns(a,r),Gs(e,t),t.tag=1,Or(a)?(e=!0,Pr(t)):e=!1,Ro(t,n),is(t,a,r),cs(t,a,r,n),_s(null,t,a,!0,e,n);case 19:return Vs(e,t,n);case 22:return Cs(e,t,n)}throw Error(o(156,t.tag))};var qu="function"===typeof reportError?reportError:function(e){console.error(e)};function Xu(e){this._internalRoot=e}function Yu(e){this._internalRoot=e}function Qu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $u(){}function Ju(e,t,n,a,r){var o=n._reactRootContainer;if(o){var i=o;if("function"===typeof r){var s=r;r=function(){var e=Hu(i);s.call(e)}}Gu(t,i,e,r)}else i=function(e,t,n,a,r){if(r){if("function"===typeof a){var o=a;a=function(){var e=Hu(i);o.call(e)}}var i=Vu(t,a,e,0,null,!1,0,"",$u);return e._reactRootContainer=i,e[fr]=i.current,Va(8===e.nodeType?e.parentNode:e),lu(),i}for(;r=e.lastChild;)e.removeChild(r);if("function"===typeof a){var s=a;a=function(){var e=Hu(c);s.call(e)}}var c=Wu(e,0,!1,null,0,!1,0,"",$u);return e._reactRootContainer=c,e[fr]=c.current,Va(8===e.nodeType?e.parentNode:e),lu((function(){Gu(t,c,n,a)})),c}(n,t,e,r,a);return Hu(i)}Yu.prototype.render=Xu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Gu(e,t,null,null)},Yu.prototype.unmount=Xu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;lu((function(){Gu(null,e,null,null)})),t[fr]=null}},Yu.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ct();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ft.length&&0!==t&&t<Ft[n].priority;n++);Ft.splice(n,0,e),0===n&&Lt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(bt(t,1|n),au(t,Ze()),0===(6&_c)&&(Vc=Ze()+500,Vr()))}break;case 13:lu((function(){var t=Mo(e,1);if(null!==t){var n=eu();nu(t,e,1,n)}})),Ku(e,1)}},kt=function(e){if(13===e.tag){var t=Mo(e,134217728);if(null!==t)nu(t,e,134217728,eu());Ku(e,134217728)}},St=function(e){if(13===e.tag){var t=tu(e),n=Mo(e,t);if(null!==n)nu(n,e,t,eu());Ku(e,t)}},Ct=function(){return xt},It=function(e,t){var n=xt;try{return xt=e,t()}finally{xt=n}},ke=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var a=n[t];if(a!==e&&a.form===e.form){var r=wr(a);if(!r)throw Error(o(90));q(a),$(a,r)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},_e=uu,Ee=lu;var el={usingClientEntryPoint:!1,Events:[xr,vr,wr,Ne,Te,uu]},tl={findFiberByHostInstance:br,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nl={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:v.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=je(e))?null:e.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var al=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!al.isDisabled&&al.supportsFiber)try{rt=al.inject(nl),ot=al}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=el,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qu(t))throw Error(o(200));return function(e,t,n){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==a?null:""+a,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Qu(e))throw Error(o(299));var n=!1,a="",r=qu;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(a=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=Wu(e,1,!1,null,0,n,0,a,r),e[fr]=t.current,Va(8===e.nodeType?e.parentNode:e),new Xu(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=je(t))?null:e.stateNode},t.flushSync=function(e){return lu(e)},t.hydrate=function(e,t,n){if(!Zu(t))throw Error(o(200));return Ju(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Qu(e))throw Error(o(405));var a=null!=n&&n.hydratedSources||null,r=!1,i="",s=qu;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Vu(t,null,e,1,null!=n?n:null,r,0,i,s),e[fr]=t.current,Va(e),a)for(e=0;e<a.length;e++)r=(r=(n=a[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new Yu(t)},t.render=function(e,t,n){if(!Zu(t))throw Error(o(200));return Ju(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Zu(e))throw Error(o(40));return!!e._reactRootContainer&&(lu((function(){Ju(null,null,e,!1,(function(){e._reactRootContainer=null,e[fr]=null}))})),!0)},t.unstable_batchedUpdates=uu,t.unstable_renderSubtreeIntoContainer=function(e,t,n,a){if(!Zu(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return Ju(e,t,n,!1,a)},t.version="18.3.1-next-f1338f8080-20240426"},391:(e,t,n)=>{"use strict";var a=n(950);t.createRoot=a.createRoot,t.hydrateRoot=a.hydrateRoot},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},153:(e,t,n)=>{"use strict";var a=n(43),r=Symbol.for("react.element"),o=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,s=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var a,o={},u=null,l=null;for(a in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(l=t.ref),t)i.call(t,a)&&!c.hasOwnProperty(a)&&(o[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===o[a]&&(o[a]=t[a]);return{$$typeof:r,type:e,key:u,ref:l,props:o,_owner:s.current}}t.Fragment=o,t.jsx=u,t.jsxs=u},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),a=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),h=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function b(){}function x(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=y.prototype;var v=x.prototype=new b;v.constructor=x,m(v,y.prototype),v.isPureReactComponent=!0;var w=Array.isArray,k=Object.prototype.hasOwnProperty,S={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function I(e,t,a){var r,o={},i=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(i=""+t.key),t)k.call(t,r)&&!C.hasOwnProperty(r)&&(o[r]=t[r]);var c=arguments.length-2;if(1===c)o.children=a;else if(1<c){for(var u=Array(c),l=0;l<c;l++)u[l]=arguments[l+2];o.children=u}if(e&&e.defaultProps)for(r in c=e.defaultProps)void 0===o[r]&&(o[r]=c[r]);return{$$typeof:n,type:e,key:i,ref:s,props:o,_owner:S.current}}function N(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function _(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function E(e,t,r,o,i){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var c=!1;if(null===e)c=!0;else switch(s){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case n:case a:c=!0}}if(c)return i=i(c=e),e=""===o?"."+_(c,0):o,w(i)?(r="",null!=e&&(r=e.replace(T,"$&/")+"/"),E(i,t,r,"",(function(e){return e}))):null!=i&&(N(i)&&(i=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,r+(!i.key||c&&c.key===i.key?"":(""+i.key).replace(T,"$&/")+"/")+e)),t.push(i)),1;if(c=0,o=""===o?".":o+":",w(e))for(var u=0;u<e.length;u++){var l=o+_(s=e[u],u);c+=E(s,t,r,l,i)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),u=0;!(s=e.next()).done;)c+=E(s=s.value,t,r,l=o+_(s,u++),i);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function R(e,t,n){if(null==e)return e;var a=[],r=0;return E(e,a,"","",(function(e){return t.call(n,e,r++)})),a}function A(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},F={transition:null},D={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:F,ReactCurrentOwner:S};function M(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:R,forEach:function(e,t,n){R(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return R(e,(function(){t++})),t},toArray:function(e){return R(e,(function(e){return e}))||[]},only:function(e){if(!N(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=r,t.Profiler=i,t.PureComponent=x,t.StrictMode=o,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.act=M,t.cloneElement=function(e,t,a){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=m({},e.props),o=e.key,i=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,s=S.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(u in t)k.call(t,u)&&!C.hasOwnProperty(u)&&(r[u]=void 0===t[u]&&void 0!==c?c[u]:t[u])}var u=arguments.length-2;if(1===u)r.children=a;else if(1<u){c=Array(u);for(var l=0;l<u;l++)c[l]=arguments[l+2];r.children=c}return{$$typeof:n,type:e.type,key:o,ref:i,props:r,_owner:s}},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=I,t.createFactory=function(e){var t=I.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=N,t.lazy=function(e){return{$$typeof:p,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=F.transition;F.transition={};try{e()}finally{F.transition=t}},t.unstable_act=M,t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,n){return O.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,n){return O.current.useReducer(e,t,n)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return O.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return O.current.useTransition()},t.version="18.3.1"},43:(e,t,n)=>{"use strict";e.exports=n(202)},579:(e,t,n)=>{"use strict";e.exports=n(153)},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var a=n-1>>>1,r=e[a];if(!(0<o(r,t)))break e;e[a]=t,e[n]=r,n=a}}function a(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var a=0,r=e.length,i=r>>>1;a<i;){var s=2*(a+1)-1,c=e[s],u=s+1,l=e[u];if(0>o(c,n))u<r&&0>o(l,c)?(e[a]=l,e[u]=n,a=u):(e[a]=c,e[s]=n,a=s);else{if(!(u<r&&0>o(l,n)))break e;e[a]=l,e[u]=n,a=u}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var s=Date,c=s.now();t.unstable_now=function(){return s.now()-c}}var u=[],l=[],d=1,p=null,h=3,f=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,x="undefined"!==typeof setImmediate?setImmediate:null;function v(e){for(var t=a(l);null!==t;){if(null===t.callback)r(l);else{if(!(t.startTime<=e))break;r(l),t.sortIndex=t.expirationTime,n(u,t)}t=a(l)}}function w(e){if(g=!1,v(e),!m)if(null!==a(u))m=!0,F(k);else{var t=a(l);null!==t&&D(w,t.startTime-e)}}function k(e,n){m=!1,g&&(g=!1,b(N),N=-1),f=!0;var o=h;try{for(v(n),p=a(u);null!==p&&(!(p.expirationTime>n)||e&&!E());){var i=p.callback;if("function"===typeof i){p.callback=null,h=p.priorityLevel;var s=i(p.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?p.callback=s:p===a(u)&&r(u),v(n)}else r(u);p=a(u)}if(null!==p)var c=!0;else{var d=a(l);null!==d&&D(w,d.startTime-n),c=!1}return c}finally{p=null,h=o,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,C=!1,I=null,N=-1,T=5,_=-1;function E(){return!(t.unstable_now()-_<T)}function R(){if(null!==I){var e=t.unstable_now();_=e;var n=!0;try{n=I(!0,e)}finally{n?S():(C=!1,I=null)}}else C=!1}if("function"===typeof x)S=function(){x(R)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,O=A.port2;A.port1.onmessage=R,S=function(){O.postMessage(null)}}else S=function(){y(R,0)};function F(e){I=e,C||(C=!0,S())}function D(e,n){N=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,F(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return a(u)},t.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},t.unstable_scheduleCallback=function(e,r,o){var i=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?i+o:i:o=i,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:r,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>i?(e.sortIndex=o,n(l,e),null===a(u)&&e===a(l)&&(g?(b(N),N=-1):g=!0,D(w,o-i))):(e.sortIndex=s,n(u,e),m||f||(m=!0,F(k))),e},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}},853:(e,t,n)=>{"use strict";e.exports=n(234)},334:(e,t,n)=>{var a=n(359),r=n(66),o=n(16),i=n(538),s=n(288),c=n(262),u=n(430);u.alea=a,u.xor128=r,u.xorwow=o,u.xorshift7=i,u.xor4096=s,u.tychei=c,e.exports=u},359:function(e,t,n){var a;!function(e,r){function o(e){var t=this,n=function(){var e=4022871197,t=function(t){t=String(t);for(var n=0;n<t.length;n++){var a=.02519603282416938*(e+=t.charCodeAt(n));a-=e=a>>>0,e=(a*=e)>>>0,e+=4294967296*(a-=e)}return 2.3283064365386963e-10*(e>>>0)};return t}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function i(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function s(e,t){var n=new o(e),a=t&&t.state,r=n.next;return r.int32=function(){return 4294967296*n.next()|0},r.double=function(){return r()+11102230246251565e-32*(2097152*r()|0)},r.quick=r,a&&("object"==typeof a&&i(a,n),r.state=function(){return i(n,{})}),r}r&&r.exports?r.exports=s:n.amdD&&n.amdO?void 0===(a=function(){return s}.call(t,n,t,r))||(r.exports=a):this.alea=s}(0,e=n.nmd(e),n.amdD)},262:function(e,t,n){var a;!function(e,r){function o(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,a=t.d,r=t.a;return e=e<<25^e>>>7^n,n=n-a|0,a=a<<24^a>>>8^r,r=r-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-a|0,t.d=a<<16^n>>>16^r,t.a=r-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var a=0;a<n.length+20;a++)t.b^=0|n.charCodeAt(a),t.next()}function i(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function s(e,t){var n=new o(e),a=t&&t.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=n.next,r.quick=r,a&&("object"==typeof a&&i(a,n),r.state=function(){return i(n,{})}),r}r&&r.exports?r.exports=s:n.amdD&&n.amdO?void 0===(a=function(){return s}.call(t,n,t,r))||(r.exports=a):this.tychei=s}(0,e=n.nmd(e),n.amdD)},66:function(e,t,n){var a;!function(e,r){function o(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var a=0;a<n.length+64;a++)t.x^=0|n.charCodeAt(a),t.next()}function i(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function s(e,t){var n=new o(e),a=t&&t.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=n.next,r.quick=r,a&&("object"==typeof a&&i(a,n),r.state=function(){return i(n,{})}),r}r&&r.exports?r.exports=s:n.amdD&&n.amdO?void 0===(a=function(){return s}.call(t,n,t,r))||(r.exports=a):this.xor128=s}(0,e=n.nmd(e),n.amdD)},288:function(e,t,n){var a;!function(e,r){function o(e){var t=this;t.next=function(){var e,n,a=t.w,r=t.X,o=t.i;return t.w=a=a+1640531527|0,n=r[o+34&127],e=r[o=o+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=r[o]=n^e,t.i=o,n+(a^a>>>16)|0},function(e,t){var n,a,r,o,i,s=[],c=128;for(t===(0|t)?(a=t,t=null):(t+="\0",a=0,c=Math.max(c,t.length)),r=0,o=-32;o<c;++o)t&&(a^=t.charCodeAt((o+32)%t.length)),0===o&&(i=a),a^=a<<10,a^=a>>>15,a^=a<<4,a^=a>>>13,o>=0&&(i=i+1640531527|0,r=0==(n=s[127&o]^=a+i)?r+1:0);for(r>=128&&(s[127&(t&&t.length||0)]=-1),r=127,o=512;o>0;--o)a=s[r+34&127],n=s[r=r+1&127],a^=a<<13,n^=n<<17,a^=a>>>15,n^=n>>>12,s[r]=a^n;e.w=i,e.X=s,e.i=r}(t,e)}function i(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function s(e,t){null==e&&(e=+new Date);var n=new o(e),a=t&&t.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=n.next,r.quick=r,a&&(a.X&&i(a,n),r.state=function(){return i(n,{})}),r}r&&r.exports?r.exports=s:n.amdD&&n.amdO?void 0===(a=function(){return s}.call(t,n,t,r))||(r.exports=a):this.xor4096=s}(0,e=n.nmd(e),n.amdD)},538:function(e,t,n){var a;!function(e,r){function o(e){var t=this;t.next=function(){var e,n,a=t.x,r=t.i;return e=a[r],n=(e^=e>>>7)^e<<24,n^=(e=a[r+1&7])^e>>>10,n^=(e=a[r+3&7])^e>>>3,n^=(e=a[r+4&7])^e<<7,e=a[r+7&7],n^=(e^=e<<13)^e<<9,a[r]=n,t.i=r+1&7,n},function(e,t){var n,a=[];if(t===(0|t))a[0]=t;else for(t=""+t,n=0;n<t.length;++n)a[7&n]=a[7&n]<<15^t.charCodeAt(n)+a[n+1&7]<<13;for(;a.length<8;)a.push(0);for(n=0;n<8&&0===a[n];++n);for(8==n?a[7]=-1:a[n],e.x=a,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function i(e,t){return t.x=e.x.slice(),t.i=e.i,t}function s(e,t){null==e&&(e=+new Date);var n=new o(e),a=t&&t.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=n.next,r.quick=r,a&&(a.x&&i(a,n),r.state=function(){return i(n,{})}),r}r&&r.exports?r.exports=s:n.amdD&&n.amdO?void 0===(a=function(){return s}.call(t,n,t,r))||(r.exports=a):this.xorshift7=s}(0,e=n.nmd(e),n.amdD)},16:function(e,t,n){var a;!function(e,r){function o(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var a=0;a<n.length+64;a++)t.x^=0|n.charCodeAt(a),a==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function i(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function s(e,t){var n=new o(e),a=t&&t.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=n.next,r.quick=r,a&&("object"==typeof a&&i(a,n),r.state=function(){return i(n,{})}),r}r&&r.exports?r.exports=s:n.amdD&&n.amdO?void 0===(a=function(){return s}.call(t,n,t,r))||(r.exports=a):this.xorwow=s}(0,e=n.nmd(e),n.amdD)},430:function(e,t,n){var a;!function(r,o,i){var s,c=256,u=i.pow(c,6),l=i.pow(2,52),d=2*l,p=c-1;function h(e,t,n){var a=[],p=y(g((t=1==t?{entropy:!0}:t||{}).entropy?[e,b(o)]:null==e?function(){try{var e;return s&&(e=s.randomBytes)?e=e(c):(e=new Uint8Array(c),(r.crypto||r.msCrypto).getRandomValues(e)),b(e)}catch(a){var t=r.navigator,n=t&&t.plugins;return[+new Date,r,n,r.screen,b(o)]}}():e,3),a),h=new f(a),x=function(){for(var e=h.g(6),t=u,n=0;e<l;)e=(e+n)*c,t*=c,n=h.g(1);for(;e>=d;)e/=2,t/=2,n>>>=1;return(e+n)/t};return x.int32=function(){return 0|h.g(4)},x.quick=function(){return h.g(4)/4294967296},x.double=x,y(b(h.S),o),(t.pass||n||function(e,t,n,a){return a&&(a.S&&m(a,h),e.state=function(){return m(h,{})}),n?(i.random=e,t):e})(x,p,"global"in t?t.global:this==i,t.state)}function f(e){var t,n=e.length,a=this,r=0,o=a.i=a.j=0,i=a.S=[];for(n||(e=[n++]);r<c;)i[r]=r++;for(r=0;r<c;r++)i[r]=i[o=p&o+e[r%n]+(t=i[r])],i[o]=t;(a.g=function(e){for(var t,n=0,r=a.i,o=a.j,i=a.S;e--;)t=i[r=p&r+1],n=n*c+i[p&(i[r]=i[o=p&o+t])+(i[o]=t)];return a.i=r,a.j=o,n})(c)}function m(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function g(e,t){var n,a=[],r=typeof e;if(t&&"object"==r)for(n in e)try{a.push(g(e[n],t-1))}catch(o){}return a.length?a:"string"==r?e:e+"\0"}function y(e,t){for(var n,a=e+"",r=0;r<a.length;)t[p&r]=p&(n^=19*t[p&r])+a.charCodeAt(r++);return b(t)}function b(e){return String.fromCharCode.apply(0,e)}if(y(i.random(),o),e.exports){e.exports=h;try{s=n(996)}catch(x){}}else void 0===(a=function(){return h}.call(t,n,t,e))||(e.exports=a)}("undefined"!==typeof self?self:this,[],Math)},893:()=>{},74:()=>{},281:()=>{},244:()=>{},556:()=>{},817:()=>{},590:()=>{},996:()=>{}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var o=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=e,n.amdD=function(){throw new Error("define cannot be used indirect")},n.amdO={},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(a,r){if(1&r&&(a=this(a)),8&r)return a;if("object"===typeof a&&a){if(4&r&&a.__esModule)return a;if(16&r&&"function"===typeof a.then)return a}var o=Object.create(null);n.r(o);var i={};e=e||[null,t({}),t([]),t(t)];for(var s=2&r&&a;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>i[e]=()=>a[e]));return i.default=()=>a,n.d(o,i),o}})(),n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,a)=>(n.f[a](e,t),t)),[])),n.u=e=>"static/js/"+e+".10775fd0.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="danceteacher:";n.l=(a,r,o,i)=>{if(e[a])e[a].push(r);else{var s,c;if(void 0!==o)for(var u=document.getElementsByTagName("script"),l=0;l<u.length;l++){var d=u[l];if(d.getAttribute("src")==a||d.getAttribute("data-webpack")==t+o){s=d;break}}s||(c=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+o),s.src=a),e[a]=[r];var p=(t,n)=>{s.onerror=s.onload=null,clearTimeout(h);var r=e[a];if(delete e[a],s.parentNode&&s.parentNode.removeChild(s),r&&r.forEach((e=>e(n))),t)return t(n)},h=setTimeout(p.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=p.bind(null,s.onerror),s.onload=p.bind(null,s.onload),c&&document.head.appendChild(s)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.p="/danceteacher/",(()=>{var e={792:0};n.f.j=(t,a)=>{var r=n.o(e,t)?e[t]:void 0;if(0!==r)if(r)a.push(r[2]);else{var o=new Promise(((n,a)=>r=e[t]=[n,a]));a.push(r[2]=o);var i=n.p+n.u(t),s=new Error;n.l(i,(a=>{if(n.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var o=a&&("load"===a.type?"missing":a.type),i=a&&a.target&&a.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",s.name="ChunkLoadError",s.type=o,s.request=i,r[1](s)}}),"chunk-"+t,t)}};var t=(t,a)=>{var r,o,i=a[0],s=a[1],c=a[2],u=0;if(i.some((t=>0!==e[t]))){for(r in s)n.o(s,r)&&(n.m[r]=s[r]);if(c)c(n)}for(t&&t(a);u<i.length;u++)o=i[u],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0},a=self.webpackChunkdanceteacher=self.webpackChunkdanceteacher||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{CompositeArrayBuffer:()=>Yi,browserFiles:()=>Lc,browserHTTPRequest:()=>Kc,concatenateArrayBuffers:()=>fs,copyModel:()=>Js,decodeWeights:()=>os,decodeWeightsStream:()=>ls,encodeWeights:()=>rs,fromMemory:()=>Qc,fromMemorySync:()=>Zc,getLoadHandlers:()=>Is,getModelArtifactsForJSON:()=>bs,getModelArtifactsForJSONSync:()=>ys,getModelArtifactsInfoForJSON:()=>xs,getSaveHandlers:()=>Cs,getWeightSpecs:()=>vs,http:()=>jc,isHTTPScheme:()=>Gc,listModels:()=>Zs,loadWeights:()=>Wc,moveModel:()=>ec,registerLoadRouter:()=>Ss,registerSaveRouter:()=>ks,removeModel:()=>$s,weightsLoaderFactory:()=>Uc,withSaveHandler:()=>$c,withSaveHandlerSync:()=>Jc});var t={};n.r(t),n.d(t,{assertParamsValid:()=>hu,computeFlatOffset:()=>Nu,computeOutShape:()=>mu,getNormalizedAxes:()=>xu,isSliceContinous:()=>Iu,maskToAxes:()=>fu,parseSliceParams:()=>Tu,sliceInfo:()=>_u,startForAxis:()=>Su,startIndicesWithElidedDims:()=>vu,stopForAxis:()=>Cu,stopIndicesWithElidedDims:()=>wu,stridesForAxis:()=>ku,stridesWithElidedDims:()=>gu});var a={};n.r(a),n.d(a,{conv2d:()=>zh,depthwiseConv2d:()=>Uh,matMul:()=>Vh});var r={};n.r(r),n.d(r,{collectGatherOpShapeInfo:()=>Xm,computeOutShape:()=>qm,segOpComputeOptimalWindowSize:()=>Km});var o={};n.r(o),n.d(o,{ERF_A1:()=>lm,ERF_A2:()=>dm,ERF_A3:()=>pm,ERF_A4:()=>hm,ERF_A5:()=>fm,ERF_P:()=>um,PARALLELIZE_THRESHOLD:()=>Jf,RowPartitionType:()=>Xf,SELU_SCALE:()=>cm,SELU_SCALEALPHA:()=>sm,applyActivation:()=>Ph,assertAndGetBroadcastShape:()=>Rc,assertAxesAreInnerMostDims:()=>td,assertParamsConsistent:()=>Kf,assignToTypedArray:()=>vm,axesAreInnerMostDims:()=>Zl,calculateShapes:()=>lu,checkEinsumDimSizes:()=>Em,checkPadOnDimRoundingMode:()=>nl,combineLocations:()=>$l,combineRaggedTensorToTensorShapes:()=>Yf,complexWithEvenIndex:()=>ym,complexWithOddIndex:()=>bm,computeConv2DInfo:()=>ju,computeConv3DInfo:()=>Ku,computeDefaultPad:()=>qu,computeDilation2DInfo:()=>Vu,computeOptimalWindowSize:()=>em,computeOutAndReduceShapes:()=>Jl,computeOutShape:()=>qf,computePool2DInfo:()=>Gu,computePool3DInfo:()=>Hu,convertConv2DDataFormat:()=>tl,decodeEinsumEquation:()=>Tm,eitherStridesOrDilationsAreOne:()=>Ju,expandShapeToKeepDim:()=>ed,exponent:()=>km,exponents:()=>wm,fromStringArrayToUint8:()=>Qm,fromUint8ToStringArray:()=>Ym,getAxesPermutation:()=>nd,getBroadcastDims:()=>_c,getComplexWithIndex:()=>xm,getEinsumComputePath:()=>Rm,getEinsumPermutation:()=>_m,getFusedBiasGradient:()=>Mh,getFusedDyActivation:()=>Dh,getImageCenter:()=>tm,getInnerMostAxes:()=>rd,getPermuted:()=>am,getRaggedRank:()=>Zf,getReductionAxes:()=>Ec,getReshaped:()=>nm,getReshapedPermuted:()=>rm,getRowPartitionTypesHelper:()=>Qf,getSliceBeginCoords:()=>om,getSliceSize:()=>im,getSparseFillEmptyRowsIndicesDenseShapeMismatch:()=>Dm,getSparseFillEmptyRowsNegativeIndexErrorMessage:()=>Mm,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:()=>Pm,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:()=>Bm,getSparseReshapeInputOutputMismatchErrorMessage:()=>Um,getSparseReshapeInputOutputMultipleErrorMessage:()=>Wm,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:()=>Lm,getSparseReshapeNegativeOutputDimErrorMessage:()=>zm,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:()=>jm,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:()=>Vm,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:()=>Gm,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:()=>Hm,getUndoAxesPermutation:()=>ad,isIdentityPermutation:()=>Am,log:()=>wo,mergeRealAndImagArrays:()=>mm,prepareAndValidate:()=>su,prepareSplitSize:()=>Fm,segment_util:()=>r,shouldFuse:()=>Lh,slice_util:()=>t,splitRealAndImagArrays:()=>gm,stridesOrDilationsArePositive:()=>el,tupleValuesAreOne:()=>$u,upcastType:()=>wi,validateDefaultValueShape:()=>$f,validateInput:()=>uu,validateUpdateShape:()=>cu,warn:()=>vo});var i={};n.r(i),n.d(i,{mx:()=>Oy,XI:()=>Dy,Nk:()=>My,f6:()=>Py,ct:()=>_y,YG:()=>Wy,hH:()=>Uy,z3:()=>Vy,sG:()=>Gy,uM:()=>Hy,C1:()=>Ky,vS:()=>jy,qB:()=>qy,GG:()=>Xy,lg:()=>Qy,rq:()=>Yy,cu:()=>$y,WR:()=>Zy,GE:()=>Jy,px:()=>eb,jC:()=>tb,He:()=>nb,hE:()=>ab,BF:()=>rb,Dk:()=>ib,cl:()=>sb,_B:()=>ub,ub:()=>hb,_f:()=>mb,Ku:()=>vb,qy:()=>wb,Zy:()=>kb,bu:()=>Sb,zv:()=>Cb,dH:()=>ky,HS:()=>Ib,yH:()=>Nb,l3:()=>Tb,z9:()=>_b,x6:()=>Eb,_m:()=>Rb,eW:()=>Ab,GK:()=>Fb,SP:()=>Mb,yr:()=>Pb,dl:()=>Lb,Dw:()=>Bb,xT:()=>Vb,_X:()=>cb,wz:()=>Gb});var s={};n.r(s),n.d(s,{json:()=>FU});var c={};n.r(c),n.d(c,{json:()=>DU});var u={};n.r(u),n.d(u,{json:()=>MU});var l={};n.r(l),n.d(l,{json:()=>PU});var d={};n.r(d),n.d(d,{json:()=>LU});var p={};n.r(p),n.d(p,{json:()=>zU});var h={};n.r(h),n.d(h,{json:()=>BU});var f={};n.r(f),n.d(f,{json:()=>WU});var m={};n.r(m),n.d(m,{json:()=>UU});var g={};n.r(g),n.d(g,{json:()=>VU});var y={};n.r(y),n.d(y,{json:()=>GU});var b={};n.r(b),n.d(b,{json:()=>HU});var x={};n.r(x),n.d(x,{json:()=>jU});var v={};n.r(v),n.d(v,{json:()=>KU});var w={};n.r(w),n.d(w,{json:()=>qU});var k={};n.r(k),n.d(k,{json:()=>XU});var S={};n.r(S),n.d(S,{json:()=>YU});var C={};n.r(C),n.d(C,{json:()=>QU});var I={};n.r(I),n.d(I,{json:()=>ZU});var N={};n.r(N),n.d(N,{OP_SCOPE_SUFFIX:()=>Gi,abs:()=>Tc,acos:()=>Ru,acosh:()=>Au,add:()=>uc,addN:()=>Ou,all:()=>Fu,any:()=>Du,argMax:()=>Mu,argMin:()=>Pu,asin:()=>Lu,asinh:()=>zu,atan:()=>Bu,atan2:()=>Wu,atanh:()=>Uu,avgPool:()=>rl,avgPool3d:()=>ol,basicLSTMCell:()=>dl,batchNorm:()=>hl,batchNorm2d:()=>fl,batchNorm3d:()=>ml,batchNorm4d:()=>gl,batchToSpaceND:()=>pl,bincount:()=>yl,bitwiseAnd:()=>bl,booleanMaskAsync:()=>Sh,broadcastArgs:()=>xl,broadcastTo:()=>vl,buffer:()=>oc,cast:()=>ic,ceil:()=>wl,clipByValue:()=>kl,clone:()=>sc,complex:()=>ji,concat:()=>il,concat1d:()=>Sl,concat2d:()=>Cl,concat3d:()=>Il,concat4d:()=>Nl,conv1d:()=>_l,conv2d:()=>Tl,conv2dTranspose:()=>Rl,conv3d:()=>Al,conv3dTranspose:()=>Fl,cos:()=>Dl,cosh:()=>Ml,cosineWindow:()=>Ah,cumprod:()=>Pl,cumsum:()=>Ll,denseBincount:()=>zl,depthToSpace:()=>Bl,depthwiseConv2d:()=>Wl,diag:()=>Ul,dilation2d:()=>Vl,div:()=>dc,divNoNan:()=>jl,dot:()=>Kl,dropout:()=>Eh,einsum:()=>ql,elu:()=>Xl,enclosingPowerOfTwo:()=>Rh,ensureShape:()=>Yl,equal:()=>Gl,erf:()=>Ql,euclideanNorm:()=>ld,exp:()=>dd,expandDims:()=>pd,expm1:()=>hd,eye:()=>md,fft:()=>Zp,fill:()=>Cc,floor:()=>gd,floorDiv:()=>lc,fused:()=>a,gather:()=>yd,gatherND:()=>_h,greater:()=>bd,greaterEqual:()=>xd,ifft:()=>$p,imag:()=>vd,image:()=>Wf,inTopKAsync:()=>Oh,irfft:()=>Jp,isFinite:()=>wd,isInf:()=>kd,isNaN:()=>Sd,leakyRelu:()=>Cd,less:()=>Id,lessEqual:()=>Nd,linalg:()=>Uf,linspace:()=>Td,localResponseNormalization:()=>_d,log:()=>Ed,log1p:()=>Rd,logSigmoid:()=>Fd,logSoftmax:()=>Dd,logSumExp:()=>Md,logicalAnd:()=>Pd,logicalNot:()=>Ld,logicalOr:()=>zd,logicalXor:()=>Bd,losses:()=>Vf,lowerBound:()=>Vd,matMul:()=>sl,max:()=>od,maxPool:()=>Gd,maxPool3d:()=>Hd,maxPoolWithArgmax:()=>jd,maximum:()=>Ac,mean:()=>Kd,meshgrid:()=>Yd,min:()=>id,minimum:()=>Qd,mirrorPad:()=>Zd,mod:()=>$d,moments:()=>Jd,movingAverage:()=>Ih,mul:()=>pc,multiRNNCell:()=>ep,multinomial:()=>tp,neg:()=>Ad,norm:()=>ud,notEqual:()=>np,oneHot:()=>ap,ones:()=>Xd,onesLike:()=>rp,op:()=>Hi,outerProduct:()=>op,pad:()=>ip,pad1d:()=>sp,pad2d:()=>cp,pad3d:()=>up,pad4d:()=>lp,pool:()=>pp,pow:()=>Ic,prelu:()=>hp,print:()=>cc,prod:()=>fp,raggedGather:()=>mp,raggedRange:()=>gp,raggedTensorToTensor:()=>yp,rand:()=>bp,randomGamma:()=>Sp,randomNormal:()=>Cp,randomStandardNormal:()=>Ip,randomUniform:()=>Np,randomUniformInt:()=>Tp,range:()=>_p,real:()=>Ep,reciprocal:()=>Rp,relu:()=>Ap,relu6:()=>Op,reshape:()=>al,reverse:()=>Fp,reverse1d:()=>Dp,reverse2d:()=>Mp,reverse3d:()=>Pp,reverse4d:()=>Lp,rfft:()=>th,round:()=>zp,rsqrt:()=>Bp,scalar:()=>yc,scatterND:()=>Nh,searchSorted:()=>Ud,selu:()=>Wp,separableConv2d:()=>Up,setdiff1dAsync:()=>Vp,sigmoid:()=>cl,sign:()=>Gp,signal:()=>Bf,sin:()=>Hp,sinh:()=>jp,slice:()=>ul,slice1d:()=>Kp,slice2d:()=>qp,slice3d:()=>Xp,slice4d:()=>Yp,softmax:()=>Qp,softplus:()=>Od,spaceToBatchND:()=>dp,sparse:()=>Gf,sparseToDense:()=>Th,spectral:()=>zf,split:()=>eh,sqrt:()=>hc,square:()=>fc,squaredDifference:()=>nh,squeeze:()=>ah,stack:()=>rh,step:()=>oh,stridedSlice:()=>ih,string:()=>Hf,sub:()=>Nc,sum:()=>sd,tan:()=>sh,tanh:()=>ll,tensor:()=>qi,tensor1d:()=>ch,tensor2d:()=>uh,tensor3d:()=>eu,tensor4d:()=>lh,tensor5d:()=>dh,tensor6d:()=>ph,tensorScatterUpdate:()=>hh,tile:()=>fd,topk:()=>fh,transpose:()=>Ch,truncatedNormal:()=>mh,unique:()=>gh,unsortedSegmentSum:()=>yh,unstack:()=>bh,upperBound:()=>xh,variable:()=>vh,where:()=>Hl,whereAsync:()=>kh,zeros:()=>qd,zerosLike:()=>mc});var T=n(43),_=n.t(T,2),E=n(391);const R=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then((t=>{let{getCLS:n,getFID:a,getFCP:r,getLCP:o,getTTFB:i}=t;n(e),a(e),r(e),o(e),i(e)}))};var A,O=n(950),F=n.t(O,2);function D(){return D=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},D.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(A||(A={}));const M="popstate";function P(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function L(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function z(e,t){return{usr:e.state,key:e.key,idx:t}}function B(e,t,n,a){return void 0===n&&(n=null),D({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?U(t):t,{state:n,key:t&&t.key||a||Math.random().toString(36).substr(2,8)})}function W(e){let{pathname:t="/",search:n="",hash:a=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),a&&"#"!==a&&(t+="#"===a.charAt(0)?a:"#"+a),t}function U(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let a=e.indexOf("?");a>=0&&(t.search=e.substr(a),e=e.substr(0,a)),e&&(t.pathname=e)}return t}function V(e,t,n,a){void 0===a&&(a={});let{window:r=document.defaultView,v5Compat:o=!1}=a,i=r.history,s=A.Pop,c=null,u=l();function l(){return(i.state||{idx:null}).idx}function d(){s=A.Pop;let e=l(),t=null==e?null:e-u;u=e,c&&c({action:s,location:h.location,delta:t})}function p(e){let t="null"!==r.location.origin?r.location.origin:r.location.href,n="string"===typeof e?e:W(e);return n=n.replace(/ $/,"%20"),P(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==u&&(u=0,i.replaceState(D({},i.state,{idx:u}),""));let h={get action(){return s},get location(){return e(r,i)},listen(e){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(M,d),c=e,()=>{r.removeEventListener(M,d),c=null}},createHref:e=>t(r,e),createURL:p,encodeLocation(e){let t=p(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){s=A.Push;let a=B(h.location,e,t);n&&n(a,e),u=l()+1;let d=z(a,u),p=h.createHref(a);try{i.pushState(d,"",p)}catch(f){if(f instanceof DOMException&&"DataCloneError"===f.name)throw f;r.location.assign(p)}o&&c&&c({action:s,location:h.location,delta:1})},replace:function(e,t){s=A.Replace;let a=B(h.location,e,t);n&&n(a,e),u=l();let r=z(a,u),d=h.createHref(a);i.replaceState(r,"",d),o&&c&&c({action:s,location:h.location,delta:0})},go:e=>i.go(e)};return h}var G;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(G||(G={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function H(e,t,n){return void 0===n&&(n="/"),j(e,t,n,!1)}function j(e,t,n,a){let r=oe(("string"===typeof t?U(t):t).pathname||"/",n);if(null==r)return null;let o=K(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(o);let i=null;for(let s=0;null==i&&s<o.length;++s){let e=re(r);i=ne(o[s],e,a)}return i}function K(e,t,n,a){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===a&&(a="");let r=(e,r,o)=>{let i={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:r,route:e};i.relativePath.startsWith("/")&&(P(i.relativePath.startsWith(a),'Absolute route path "'+i.relativePath+'" nested under path "'+a+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),i.relativePath=i.relativePath.slice(a.length));let s=le([a,i.relativePath]),c=n.concat(i);e.children&&e.children.length>0&&(P(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),K(e.children,t,c,s)),(null!=e.path||e.index)&&t.push({path:s,score:te(s,e.index),routesMeta:c})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let a of q(e.path))r(e,t,a);else r(e,t)})),t}function q(e){let t=e.split("/");if(0===t.length)return[];let[n,...a]=t,r=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===a.length)return r?[o,""]:[o];let i=q(a.join("/")),s=[];return s.push(...i.map((e=>""===e?o:[o,e].join("/")))),r&&s.push(...i),s.map((t=>e.startsWith("/")&&""===t?"/":t))}const X=/^:[\w-]+$/,Y=3,Q=2,Z=1,$=10,J=-2,ee=e=>"*"===e;function te(e,t){let n=e.split("/"),a=n.length;return n.some(ee)&&(a+=J),t&&(a+=Q),n.filter((e=>!ee(e))).reduce(((e,t)=>e+(X.test(t)?Y:""===t?Z:$)),a)}function ne(e,t,n){void 0===n&&(n=!1);let{routesMeta:a}=e,r={},o="/",i=[];for(let s=0;s<a.length;++s){let e=a[s],c=s===a.length-1,u="/"===o?t:t.slice(o.length)||"/",l=ae({path:e.relativePath,caseSensitive:e.caseSensitive,end:c},u),d=e.route;if(!l&&c&&n&&!a[a.length-1].route.index&&(l=ae({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},u)),!l)return null;Object.assign(r,l.params),i.push({params:r,pathname:le([o,l.pathname]),pathnameBase:de(le([o,l.pathnameBase])),route:d}),"/"!==l.pathnameBase&&(o=le([o,l.pathnameBase]))}return i}function ae(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,a]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);L("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let a=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(a.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(a.push({paramName:"*"}),r+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":""!==e&&"/"!==e&&(r+="(?:(?=\\/|$))");let o=new RegExp(r,t?void 0:"i");return[o,a]}(e.path,e.caseSensitive,e.end),r=t.match(n);if(!r)return null;let o=r[0],i=o.replace(/(.)\/+$/,"$1"),s=r.slice(1);return{params:a.reduce(((e,t,n)=>{let{paramName:a,isOptional:r}=t;if("*"===a){let e=s[n]||"";i=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}const c=s[n];return e[a]=r&&!c?void 0:(c||"").replace(/%2F/g,"/"),e}),{}),pathname:o,pathnameBase:i,pattern:e}}function re(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return L(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function oe(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,a=e.charAt(n);return a&&"/"!==a?null:e.slice(n)||"/"}function ie(e,t,n,a){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(a)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function se(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function ce(e,t){let n=se(e);return t?n.map(((e,t)=>t===n.length-1?e.pathname:e.pathnameBase)):n.map((e=>e.pathnameBase))}function ue(e,t,n,a){let r;void 0===a&&(a=!1),"string"===typeof e?r=U(e):(r=D({},e),P(!r.pathname||!r.pathname.includes("?"),ie("?","pathname","search",r)),P(!r.pathname||!r.pathname.includes("#"),ie("#","pathname","hash",r)),P(!r.search||!r.search.includes("#"),ie("#","search","hash",r)));let o,i=""===e||""===r.pathname,s=i?"/":r.pathname;if(null==s)o=n;else{let e=t.length-1;if(!a&&s.startsWith("..")){let t=s.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}o=e>=0?t[e]:"/"}let c=function(e,t){void 0===t&&(t="/");let{pathname:n,search:a="",hash:r=""}="string"===typeof e?U(e):e,o=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:o,search:pe(a),hash:he(r)}}(r,o),u=s&&"/"!==s&&s.endsWith("/"),l=(i||"."===s)&&n.endsWith("/");return c.pathname.endsWith("/")||!u&&!l||(c.pathname+="/"),c}const le=e=>e.join("/").replace(/\/\/+/g,"/"),de=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),pe=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",he=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function fe(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const me=["post","put","patch","delete"],ge=(new Set(me),["get",...me]);new Set(ge),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function ye(){return ye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ye.apply(this,arguments)}const be=T.createContext(null);const xe=T.createContext(null);const ve=T.createContext(null);const we=T.createContext(null);const ke=T.createContext({outlet:null,matches:[],isDataRoute:!1});const Se=T.createContext(null);function Ce(){return null!=T.useContext(we)}function Ie(){return Ce()||P(!1),T.useContext(we).location}function Ne(e){T.useContext(ve).static||T.useLayoutEffect(e)}function Te(){let{isDataRoute:e}=T.useContext(ke);return e?function(){let{router:e}=ze(Pe.UseNavigateStable),t=We(Le.UseNavigateStable),n=T.useRef(!1);return Ne((()=>{n.current=!0})),T.useCallback((function(a,r){void 0===r&&(r={}),n.current&&("number"===typeof a?e.navigate(a):e.navigate(a,ye({fromRouteId:t},r)))}),[e,t])}():function(){Ce()||P(!1);let e=T.useContext(be),{basename:t,future:n,navigator:a}=T.useContext(ve),{matches:r}=T.useContext(ke),{pathname:o}=Ie(),i=JSON.stringify(ce(r,n.v7_relativeSplatPath)),s=T.useRef(!1);Ne((()=>{s.current=!0}));let c=T.useCallback((function(n,r){if(void 0===r&&(r={}),!s.current)return;if("number"===typeof n)return void a.go(n);let c=ue(n,JSON.parse(i),o,"path"===r.relative);null==e&&"/"!==t&&(c.pathname="/"===c.pathname?t:le([t,c.pathname])),(r.replace?a.replace:a.push)(c,r.state,r)}),[t,a,i,o,e]);return c}()}const _e=T.createContext(null);function Ee(e,t){let{relative:n}=void 0===t?{}:t,{future:a}=T.useContext(ve),{matches:r}=T.useContext(ke),{pathname:o}=Ie(),i=JSON.stringify(ce(r,a.v7_relativeSplatPath));return T.useMemo((()=>ue(e,JSON.parse(i),o,"path"===n)),[e,i,o,n])}function Re(e,t,n,a){Ce()||P(!1);let{navigator:r}=T.useContext(ve),{matches:o}=T.useContext(ke),i=o[o.length-1],s=i?i.params:{},c=(i&&i.pathname,i?i.pathnameBase:"/");i&&i.route;let u,l=Ie();if(t){var d;let e="string"===typeof t?U(t):t;"/"===c||(null==(d=e.pathname)?void 0:d.startsWith(c))||P(!1),u=e}else u=l;let p=u.pathname||"/",h=p;if("/"!==c){let e=c.replace(/^\//,"").split("/");h="/"+p.replace(/^\//,"").split("/").slice(e.length).join("/")}let f=H(e,{pathname:h});let m=Me(f&&f.map((e=>Object.assign({},e,{params:Object.assign({},s,e.params),pathname:le([c,r.encodeLocation?r.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:le([c,r.encodeLocation?r.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),o,n,a);return t&&m?T.createElement(we.Provider,{value:{location:ye({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:A.Pop}},m):m}function Ae(){let e=function(){var e;let t=T.useContext(Se),n=Be(Le.UseRouteError),a=We(Le.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[a]}(),t=fe(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:a};return T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},t),n?T.createElement("pre",{style:r},n):null,null)}const Oe=T.createElement(Ae,null);class Fe extends T.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?T.createElement(ke.Provider,{value:this.props.routeContext},T.createElement(Se.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function De(e){let{routeContext:t,match:n,children:a}=e,r=T.useContext(be);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),T.createElement(ke.Provider,{value:t},a)}function Me(e,t,n,a){var r;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===a&&(a=null),null==e){var o;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(o=a)&&o.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let i=e,s=null==(r=n)?void 0:r.errors;if(null!=s){let e=i.findIndex((e=>e.route.id&&void 0!==(null==s?void 0:s[e.route.id])));e>=0||P(!1),i=i.slice(0,Math.min(i.length,e+1))}let c=!1,u=-1;if(n&&a&&a.v7_partialHydration)for(let l=0;l<i.length;l++){let e=i[l];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=l),e.route.id){let{loaderData:t,errors:a}=n,r=e.route.loader&&void 0===t[e.route.id]&&(!a||void 0===a[e.route.id]);if(e.route.lazy||r){c=!0,i=u>=0?i.slice(0,u+1):[i[0]];break}}}return i.reduceRight(((e,a,r)=>{let o,l=!1,d=null,p=null;var h;n&&(o=s&&a.route.id?s[a.route.id]:void 0,d=a.route.errorElement||Oe,c&&(u<0&&0===r?(h="route-fallback",!1||Ue[h]||(Ue[h]=!0),l=!0,p=null):u===r&&(l=!0,p=a.route.hydrateFallbackElement||null)));let f=t.concat(i.slice(0,r+1)),m=()=>{let t;return t=o?d:l?p:a.route.Component?T.createElement(a.route.Component,null):a.route.element?a.route.element:e,T.createElement(De,{match:a,routeContext:{outlet:e,matches:f,isDataRoute:null!=n},children:t})};return n&&(a.route.ErrorBoundary||a.route.errorElement||0===r)?T.createElement(Fe,{location:n.location,revalidation:n.revalidation,component:d,error:o,children:m(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):m()}),null)}var Pe=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Pe||{}),Le=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Le||{});function ze(e){let t=T.useContext(be);return t||P(!1),t}function Be(e){let t=T.useContext(xe);return t||P(!1),t}function We(e){let t=function(){let e=T.useContext(ke);return e||P(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||P(!1),n.route.id}const Ue={};_.startTransition;function Ve(e){return function(e){let t=T.useContext(ke).outlet;return t?T.createElement(_e.Provider,{value:e},t):t}(e.context)}function Ge(e){P(!1)}function He(e){let{basename:t="/",children:n=null,location:a,navigationType:r=A.Pop,navigator:o,static:i=!1,future:s}=e;Ce()&&P(!1);let c=t.replace(/^\/*/,"/"),u=T.useMemo((()=>({basename:c,navigator:o,static:i,future:ye({v7_relativeSplatPath:!1},s)})),[c,s,o,i]);"string"===typeof a&&(a=U(a));let{pathname:l="/",search:d="",hash:p="",state:h=null,key:f="default"}=a,m=T.useMemo((()=>{let e=oe(l,c);return null==e?null:{location:{pathname:e,search:d,hash:p,state:h,key:f},navigationType:r}}),[c,l,d,p,h,f,r]);return null==m?null:T.createElement(ve.Provider,{value:u},T.createElement(we.Provider,{children:n,value:m}))}function je(e){let{children:t,location:n}=e;return Re(Ke(t),n)}new Promise((()=>{}));T.Component;function Ke(e,t){void 0===t&&(t=[]);let n=[];return T.Children.forEach(e,((e,a)=>{if(!T.isValidElement(e))return;let r=[...t,a];if(e.type===T.Fragment)return void n.push.apply(n,Ke(e.props.children,r));e.type!==Ge&&P(!1),e.props.index&&e.props.children&&P(!1);let o={id:e.props.id||r.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=Ke(e.props.children,r)),n.push(o)})),n}function qe(){return qe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},qe.apply(this,arguments)}function Xe(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Ye=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];try{window.__reactRouterVersion="6"}catch(jj){}new Map;const Qe=_.startTransition;F.flushSync,_.useId;function Ze(e){let{basename:t,children:n,future:a,window:r}=e,o=T.useRef();var i;null==o.current&&(o.current=(void 0===(i={window:r,v5Compat:!0})&&(i={}),V((function(e,t){let{pathname:n,search:a,hash:r}=e.location;return B("",{pathname:n,search:a,hash:r},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:W(t)}),null,i)));let s=o.current,[c,u]=T.useState({action:s.action,location:s.location}),{v7_startTransition:l}=a||{},d=T.useCallback((e=>{l&&Qe?Qe((()=>u(e))):u(e)}),[u,l]);return T.useLayoutEffect((()=>s.listen(d)),[s,d]),T.createElement(He,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:s,future:a})}const $e="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Je=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,et=T.forwardRef((function(e,t){let n,{onClick:a,relative:r,reloadDocument:o,replace:i,state:s,target:c,to:u,preventScrollReset:l,unstable_viewTransition:d}=e,p=Xe(e,Ye),{basename:h}=T.useContext(ve),f=!1;if("string"===typeof u&&Je.test(u)&&(n=u,$e))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),n=oe(t.pathname,h);t.origin===e.origin&&null!=n?u=n+t.search+t.hash:f=!0}catch(jj){}let m=function(e,t){let{relative:n}=void 0===t?{}:t;Ce()||P(!1);let{basename:a,navigator:r}=T.useContext(ve),{hash:o,pathname:i,search:s}=Ee(e,{relative:n}),c=i;return"/"!==a&&(c="/"===i?a:le([a,i])),r.createHref({pathname:c,search:s,hash:o})}(u,{relative:r}),g=function(e,t){let{target:n,replace:a,state:r,preventScrollReset:o,relative:i,unstable_viewTransition:s}=void 0===t?{}:t,c=Te(),u=Ie(),l=Ee(e,{relative:i});return T.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==a?a:W(u)===W(l);c(e,{replace:n,state:r,preventScrollReset:o,relative:i,unstable_viewTransition:s})}}),[u,c,l,a,r,n,e,o,i,s])}(u,{replace:i,state:s,target:c,preventScrollReset:l,relative:r,unstable_viewTransition:d});return T.createElement("a",qe({},p,{href:n||m,onClick:f||o?a:function(e){a&&a(e),e.defaultPrevented||g(e)},ref:t,target:c}))}));var tt,nt;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(tt||(tt={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(nt||(nt={}));var at=n(579);const rt=function(){return(0,at.jsxs)(at.Fragment,{children:[(0,at.jsx)("nav",{className:"navbar",children:(0,at.jsx)(et,{to:"https://github.com/RoyceAroc/danceteacher/",children:"GitHub"})}),(0,at.jsx)(Ve,{})]})},ot=n.p+"static/media/Dance1.bbe52e5f124a8912e86c.png",it=n.p+"static/media/Dance2.bbe52e5f124a8912e86c.png",st=n.p+"static/media/Dance3.bbe52e5f124a8912e86c.png",ct=n.p+"static/media/dancer.18d4eb7c2c248ce148ba.png",ut=n.p+"static/media/repeatA.32af11bd75a28ad1ca9d.png",lt=n.p+"static/media/repeatB.5a4f72e21d8e57bda398.png";const dt=function(){const[e,t]=(0,T.useState)(""),n=window.innerWidth,a=Math.ceil(n/(19.6-.08)),r=e=>{setTimeout((()=>{window.location.href="/danceteacher/learn?data=sample".concat(e)}),10)};return(0,at.jsxs)("main",{className:"main-page",style:{background:"black"},children:["(",(0,at.jsxs)(at.Fragment,{children:[(0,at.jsxs)("div",{className:"header",children:[(0,at.jsx)("header",{children:" Dance "}),(0,at.jsx)("header",{children:" Teacher "})]}),(0,at.jsx)("p",{id:"lower-header",style:{color:"white"},children:(0,at.jsx)("center",{children:" Practice dancing for hours without touching your device \xb7 No Cloud Server (Everything Running Locally) \xb7 Real Time Rendering"})}),(0,at.jsxs)("div",{className:"input-container",children:[(0,at.jsx)("input",{type:"text",placeholder:"Enter YouTube link",className:"youtube-input-field",value:e,onChange:e=>{t(e.target.value)},onKeyPress:n=>{"Enter"===n.key&&e&&fetch("https://l73smpwh.use.devtunnels.ms:5000/download",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e})}).then((e=>e.json())).then((e=>{e.error&&console.error(e.error),window.location.href="/danceteacher/learn?data=".concat(e.video_url)})).catch((e=>{console.error("Error:",e)})).finally((()=>{t("")}))}}),(0,at.jsx)("div",{style:{margin:"0 10px",fontSize:"18px",color:"white",alignSelf:"center",fontFamily:"Roboto",fontWeight:"500",fontStyle:"normal"},children:"OR"}),(0,at.jsx)("label",{className:"mp4-input-field",htmlFor:"mp4-input",children:"Choose MP4 File"}),(0,at.jsx)("input",{type:"file",accept:"video/mp4",id:"mp4-input",className:"mp4-input-hidden",onChange:e=>{let t=e.target.files[0];const n=new FormData;n.append("video",t),fetch("https://l73smpwh.use.devtunnels.ms:5000/upload",{method:"POST",body:n}).then((e=>e.json())).then((e=>{window.location.href="/danceteacher/learn?data=".concat(e.video_url)})).catch((e=>console.error(e)))}})]}),(0,at.jsxs)("div",{className:"image-button-container",children:[(0,at.jsx)("div",{style:{textAlign:"center",color:"white",fontSize:"18px",marginBottom:"10px",fontFamily:"Roboto",fontWeight:"500",fontStyle:"normal"},children:"OR CHOOSE A SAMPLE"}),(0,at.jsxs)("div",{className:"image-buttons",children:[(0,at.jsx)("img",{src:ot,alt:"Button 1",className:"image-button",onClick:()=>r(1)}),(0,at.jsx)("img",{src:it,alt:"Button 2",className:"image-button",onClick:()=>r(2)}),(0,at.jsx)("img",{src:st,alt:"Button 3",className:"image-button",onClick:()=>r(3)})]})]}),(0,at.jsx)("img",{src:ct,alt:"Dancer",style:{width:"30%",position:"fixed",bottom:"0px",left:"0px",borderRadius:"40% 40% 0 0"}}),[...Array(a).keys()].map((e=>(0,at.jsx)(T.Fragment,{children:(0,at.jsx)("img",{src:e%2===0?lt:ut,alt:"Repeat",style:{width:"".concat(9.8,"%"),position:"fixed",bottom:"0px",left:"".concat(30+9.72*e,"%")}})},e)))]}),")"]})},pt=()=>(0,at.jsx)(dt,{}),ht=()=>(0,at.jsx)("h1",{style:{color:"white"},children:"Investors page"}),ft=()=>(0,at.jsx)("h1",{style:{color:"white"},children:"404"});class mt{constructor(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,t){this.dataIdsCount++,this.data.set(e,t)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class gt{refCount(e){return yt("refCount")}incRef(e){return yt("incRef")}timerAvailable(){return!0}time(e){return yt("time")}read(e){return yt("read")}readSync(e){return yt("readSync")}readToGPU(e,t){return yt("readToGPU")}numDataIds(){return yt("numDataIds")}disposeData(e,t){return yt("disposeData")}write(e,t,n){return yt("write")}move(e,t,n,a,r){return yt("move")}createTensorFromGPUData(e,t,n){return yt("createTensorFromGPUData")}memory(){return yt("memory")}floatPrecision(){return yt("floatPrecision")}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}dispose(){return yt("dispose")}}function yt(e){throw new Error("'".concat(e,"' not yet implemented or not found in the registry. ")+"This kernel may not be supported by the tfjs backend you have chosen")}function bt(e,t,n){return Math.max(e,Math.min(t,n))}function xt(e){return e%2===0?e:e+1}function vt(e,t,n){const a=e[t];e[t]=e[n],e[n]=a}function wt(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}function kt(e,t){if(!e)throw new Error("string"===typeof t?t:t())}function St(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";kt(Tt(e,t),(()=>n+" Shapes ".concat(e," and ").concat(t," must match")))}function Ct(e){kt(null!=e,(()=>"The input to the tensor constructor must be a non-null value."))}function It(e){if(0===e.length)return 1;let t=e[0];for(let n=1;n<e.length;n++)t*=e[n];return t}function Nt(e){return 0===e.length}function Tt(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function _t(e){return e%1===0}function Et(e){const t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function Rt(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function At(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>0,n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;return new Promise(((r,o)=>{let i=0;const s=()=>{if(e())return void r();i++;const c=t(i);null!=n&&i>=n?o():null!=a?a(s,c):setTimeout(s,c)};s()}))}function Ot(e,t){let n=1,a=-1;for(let o=0;o<e.length;++o)if(e[o]>=0)n*=e[o];else if(-1===e[o]){if(-1!==a)throw Error("Shapes can only have 1 implicit size. "+"Found -1 at dim ".concat(a," and dim ").concat(o));a=o}else if(e[o]<0)throw Error("Shapes can not be < 0. Found ".concat(e[o]," at dim ").concat(o));if(-1===a){if(t>0&&t!==n)throw Error("Size(".concat(t,") must match the product of shape ").concat(e));return e}if(0===n)throw Error("Cannot infer the missing size in [".concat(e,"] when ")+"there are 0 elements");if(t%n!==0)throw Error("The implicit shape can't be a fractional number. "+"Got ".concat(t," / ").concat(n));const r=e.slice();return r[a]=t/n,r}function Ft(e,t){const n=t.length;return kt((e=null==e?t.map(((e,t)=>t)):[].concat(e)).every((e=>e>=-n&&e<n)),(()=>"All values in axis param must be in range [-".concat(n,", ").concat(n,") but ")+"got axis ".concat(e))),kt(e.every((e=>_t(e))),(()=>"All values in axis param must be integers but "+"got axis ".concat(e))),e.map((e=>e<0?n+e:e))}function Dt(e,t){const n=[],a=[],r=null!=t&&Array.isArray(t)&&0===t.length,o=null==t||r?null:Ft(t,e).sort();let i=0;for(let s=0;s<e.length;++s){if(null!=o){if(o[i]===s&&1!==e[s])throw new Error("Can't squeeze axis ".concat(s," since its dim '").concat(e[s],"' is not 1"));(null==o[i]||o[i]>s)&&1===e[s]&&(n.push(e[s]),a.push(s)),o[i]<=s&&i++}1!==e[s]&&(n.push(e[s]),a.push(s))}return{newShape:n,keptDims:a}}function Mt(e,t){return Pt(e,t)}function Pt(e,t){let n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type ".concat(e));n=new Array(t)}return n}function Lt(e,t){return"complex64"!==t&&(("float32"!==t||"complex64"===e)&&(("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)))}function zt(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype ".concat(e))}function Bt(e){return"string"===typeof e||e instanceof String}function Wt(e){return Array.isArray(e)?Wt(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":"number"===typeof e?"float32":Bt(e)?"string":function(e){return"boolean"===typeof e}(e)?"bool":"float32"}function Ut(e){return!!(e&&e.constructor&&e.call&&e.apply)}function Vt(e,t){for(let n=t;n<e;++n)if(e%n===0)return n;return e}function Gt(e){const t=e.length;if(t<2)return[];const n=new Array(t-1);n[t-2]=e[t-1];for(let a=t-3;a>=0;--a)n[a]=n[a+1]*e[a+1];return n}function Ht(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=new Array;if(1===t.length){const o=t[0]*(a?2:1);for(let t=0;t<o;t++)r[t]=n[e+t]}else{const o=t[0],i=t.slice(1),s=i.reduce(((e,t)=>e*t))*(a?2:1);for(let t=0;t<o;t++)r[t]=Ht(e+t*s,i,n,a)}return r}function jt(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0===e.length)return t[0];const a=e.reduce(((e,t)=>e*t))*(n?2:1);if(0===a)return[];if(a!==t.length)throw new Error("[".concat(e,"] does not match the input size ").concat(t.length).concat(n?" for a complex tensor":"","."));return Ht(0,e,t,n)}function Kt(e,t){if(Array.isArray(e))return e;if("float32"===t)return e instanceof Float32Array?e:new Float32Array(e);if("int32"===t)return e instanceof Int32Array?e:new Int32Array(e);if("bool"===t||"string"===t)return Uint8Array.from(new Int32Array(e));throw new Error("Unknown dtype ".concat(t))}function qt(e,t){const n=Xt(e,t);for(let a=0;a<n.length;a++)n[a]=1;return n}function Xt(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type ".concat(t))}function Yt(e){e.forEach((t=>{kt(Number.isInteger(t)&&t>=0,(()=>"Tensor must have a shape comprised of positive integers but got "+"shape [".concat(e,"].")))}))}function Qt(e,t,n){if(0===t)return 0;if(1===t)return e[0];let a=e[e.length-1];for(let r=0;r<e.length-1;++r)a+=n[r]*e[r];return a}function Zt(e,t,n){if(0===t)return[];if(1===t)return[e];const a=new Array(t);for(let r=0;r<a.length-1;++r)a[r]=Math.floor(e/n[r]),e-=a[r]*n[r];return a[a.length-1]=e,a}function $t(e){return e&&e.then&&"function"===typeof e.then}const Jt="tfjsflags";class en{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=tn,this.populateURLFlags()}setPlatform(e,t){null!=this.platform&&(nn().getBool("IS_TEST")||nn().getBool("PROD")||console.warn("Platform ".concat(this.platformName," has already been set. ")+"Overwriting the platform with ".concat(e,"."))),this.platformName=e,this.platform=t}registerFlag(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){const t=this.urlFlags[e];nn().getBool("IS_TEST")||nn().getBool("PROD")||console.warn("Setting feature override from URL ".concat(e,": ").concat(t,".")),this.set(e,t)}}async getAsync(e){return e in this.flags||(this.flags[e]=await this.evaluateFlag(e)),this.flags[e]}get(e){if(e in this.flags)return this.flags[e];const t=this.evaluateFlag(e);if($t(t))throw new Error("Flag ".concat(e," cannot be synchronously evaluated. ")+"Please use getAsync() instead.");return this.flags[e]=t,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag ".concat(e," as it has not been registered."));this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}evaluateFlag(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '".concat(e,"': no evaluation function found."));return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if("undefined"===typeof this.global||"undefined"===typeof this.global.location||"undefined"===typeof this.global.location.search)return;const e=this.getQueryParams(this.global.location.search);if(Jt in e){e[Jt].split(",").forEach((e=>{const[t,n]=e.split(":");this.urlFlags[t]=function(e,t){const n=t.toLowerCase();return"true"===n||"false"===n?"true"===n:"".concat(+n)===n?+n:t}(0,n)}))}}}function tn(e){const t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];return function(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}(t,a[0],a[1]),a.join("=")})),t}function nn(){return rn}let an,rn=null;function on(){if(null==an){let e;if("undefined"!==typeof window)e=window;else if("undefined"!==typeof n.g)e=n.g;else if("undefined"!==typeof process)e=process;else{if("undefined"===typeof self)throw new Error("Could not find a global object");e=self}an=e}return an}function sn(e,t){const n=function(){const e=on();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);{const a=t();return n.set(e,a),n.get(e)}}const cn="Abs",un="Acos",ln="Acosh",dn="Add",pn="AddN",hn="All",fn="Any",mn="ArgMax",gn="ArgMin",yn="Asin",bn="Asinh",xn="Atan",vn="Atanh",wn="Atan2",kn="AvgPool",Sn="AvgPoolGrad",Cn="AvgPool3D",In="AvgPool3DGrad",Nn="BatchMatMul",Tn="BatchToSpaceND",_n="Bincount",En="BitwiseAnd",Rn="BroadcastArgs",An="Cast",On="Ceil",Fn="ClipByValue",Dn="Complex",Mn="ComplexAbs",Pn="Concat",Ln="Conv2D",zn="Conv2DBackpropFilter",Bn="Conv2DBackpropInput",Wn="Conv3D",Un="Conv3DBackpropFilterV2",Vn="Conv3DBackpropInputV2",Gn="Cos",Hn="Cosh",jn="Cumprod",Kn="Cumsum",qn="CropAndResize",Xn="DenseBincount",Yn="DepthToSpace",Qn="DepthwiseConv2dNative",Zn="DepthwiseConv2dNativeBackpropFilter",$n="DepthwiseConv2dNativeBackpropInput",Jn="Diag",ea="Dilation2D",ta="Dilation2DBackpropInput",na="Dilation2DBackpropFilter",aa="Draw",ra="RealDiv",oa="Einsum",ia="Elu",sa="EluGrad",ca="Erf",ua="Equal",la="Exp",da="ExpandDims",pa="Expm1",ha="FFT",fa="Fill",ma="FlipLeftRight",ga="Floor",ya="FloorDiv",ba="FusedBatchNorm",xa="GatherV2",va="GatherNd",wa="Greater",ka="GreaterEqual",Sa="Identity",Ca="IFFT",Ia="Imag",Na="IsFinite",Ta="IsInf",_a="IsNan",Ea="LeakyRelu",Ra="Less",Aa="LessEqual",Oa="LinSpace",Fa="Log",Da="Log1p",Ma="LogicalAnd",Pa="LogicalNot",La="LogicalOr",za="LRN",Ba="LRNGrad",Wa="Max",Ua="Maximum",Va="MaxPool",Ga="MaxPoolGrad",Ha="MaxPool3D",ja="MaxPool3DGrad",Ka="MaxPoolWithArgmax",qa="Mean",Xa="Min",Ya="Minimum",Qa="MirrorPad",Za="Mod",$a="Multinomial",Ja="Multiply",er="Neg",tr="NotEqual",nr="NonMaxSuppressionV3",ar="NonMaxSuppressionV4",rr="NonMaxSuppressionV5",or="OnesLike",ir="OneHot",sr="Pack",cr="PadV2",ur="Pow",lr="Prelu",dr="Prod",pr="RaggedGather",hr="RaggedRange",fr="RaggedTensorToTensor",mr="Range",gr="Real",yr="Reciprocal",br="Relu",xr="Reshape",vr="ResizeNearestNeighbor",wr="ResizeNearestNeighborGrad",kr="ResizeBilinear",Sr="ResizeBilinearGrad",Cr="Relu6",Ir="Reverse",Nr="Round",Tr="Rsqrt",_r="ScatterNd",Er="TensorScatterUpdate",Rr="SearchSorted",Ar="Select",Or="Selu",Fr="Slice",Dr="Sin",Mr="Sinh",Pr="Sign",Lr="Sigmoid",zr="Softplus",Br="Sqrt",Wr="Sum",Ur="SpaceToBatchND",Vr="SplitV",Gr="Softmax",Hr="SparseFillEmptyRows",jr="SparseReshape",Kr="SparseSegmentMean",qr="SparseSegmentSum",Xr="SparseToDense",Yr="SquaredDifference",Qr="Square",Zr="StaticRegexReplace",$r="StridedSlice",Jr="StringNGrams",eo="StringSplit",to="StringToHashBucketFast",no="Sub",ao="Tan",ro="Tanh",oo="Tile",io="TopK",so="Transform",co="Transpose",uo="Unique",lo="Unpack",po="UnsortedSegmentSum",ho="ZerosLike",fo="Step",mo="FromPixels",go="RotateWithOffset",yo="_FusedMatMul",bo="FusedConv2D",xo="FusedDepthwiseConv2D";function vo(){nn().getBool("IS_TEST")||nn().getBool("PROD")||console.warn(...arguments)}function wo(){nn().getBool("IS_TEST")||nn().getBool("PROD")||console.log(...arguments)}const ko=sn("kernelRegistry",(()=>new Map)),So=sn("gradRegistry",(()=>new Map));function Co(e,t){const n=_o(e,t);return ko.get(n)}function Io(e){return So.get(e)}function No(e){const t=ko.entries(),n=[];for(;;){const{done:a,value:r}=t.next();if(a)break;const[o,i]=r,[s]=o.split("_");s===e&&n.push(i)}return n}function To(e){const{kernelName:t,backendName:n}=e,a=_o(t,n);ko.has(a)&&vo("The kernel '".concat(t,"' for backend ")+"'".concat(n,"' is already registered")),ko.set(a,e)}function _o(e,t){return"".concat(t,"_").concat(e)}function Eo(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}var Ro=n(353);const Ao=n.n(Ro)()||Ro;function Oo(e){return Ao.fromString(e,!0,16)}const Fo=Oo("c3a5c85c97cb3127"),Do=Oo("b492b66fbe98f273"),Mo=Oo("9ae16a3b2f90404f");function Po(e){return e.xor(e.shru(47))}function Lo(e,t,n){const a=e.slice(t,t+n);return Ao.fromBytes(Array.from(a),!0,!0)}function zo(e,t){return Lo(e,t,8)}function Bo(e,t){return Lo(e,t,4)}function Wo(e,t){return 0===t?e:e.shru(t).or(e.shl(64-t))}function Uo(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Oo("9ddfea08eb382d69"),a=e.xor(t).mul(n);a=a.xor(a.shru(47));let r=t.xor(a).mul(n);return r=r.xor(r.shru(47)),r=r.mul(n),r}function Vo(e,t,n,a){return function(e,t,n,a,r,o){r=r.add(e),o=Wo(o.add(r).add(a),21);const i=r;return r=(r=r.add(t)).add(n),o=o.add(Wo(r,44)),[r.add(a),o.add(i)]}(zo(e,t),zo(e,t+8),zo(e,t+16),zo(e,t+24),n,a)}function Go(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;const n=Ao.fromNumber(81,!0);if(t<=32)return t<=16?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;if(t>=8){const n=Mo.add(2*t),a=zo(e,0).add(Mo),r=zo(e,t-8);return Uo(Wo(r,37).mul(n).add(a),Wo(a,25).add(r).mul(n),n)}if(t>=4){const n=Mo.add(2*t);return Uo(Bo(e,0).shl(3).add(t),Bo(e,t-4),n)}if(t>0){const n=e[0]+(e[t>>1]<<8),a=t+(e[t-1]<<2);return Po(Mo.mul(n).xor(Fo.mul(a))).mul(Mo)}return Mo}(e,t):function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;const n=Mo.add(2*t),a=zo(e,0).mul(Do),r=zo(e,8),o=zo(e,t-8).mul(n),i=zo(e,t-16).mul(Mo);return Uo(Wo(a.add(r),43).add(Wo(o,30)).add(i),a.add(Wo(r.add(Mo),18)).add(o),n)}(e,t);if(t<=64)return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;const n=Mo.add(2*t),a=zo(e,0).mul(Mo),r=zo(e,8),o=zo(e,t-8).mul(n),i=zo(e,t-16).mul(Mo),s=Wo(a.add(r),43).add(Wo(o,30)).add(i),c=Uo(s,a.add(Wo(r.add(Mo),18)).add(o),n),u=zo(e,16).mul(n),l=zo(e,24),d=s.add(zo(e,t-32)).mul(n),p=c.add(zo(e,t-24)).mul(n);return Uo(Wo(u.add(l),43).add(Wo(d,30)).add(p),u.add(Wo(l.add(a),18)).add(d),n)}(e,t);let a=n,r=n.mul(Do).add(113),o=Po(r.mul(Mo).add(113)).mul(Mo),i=[Ao.UZERO,Ao.UZERO],s=[Ao.UZERO,Ao.UZERO];a=a.mul(Mo).add(zo(e,0));let c=0;const u=64*(t-1>>6),l=u+(t-1&63)-63;do{a=Wo(a.add(r).add(i[0]).add(zo(e,c+8)),37).mul(Do),r=Wo(r.add(i[1]).add(zo(e,c+48)),42).mul(Do),a=a.xor(s[1]),r=r.add(i[0]).add(zo(e,c+40)),o=Wo(o.add(s[0]),33).mul(Do),i=Vo(e,c,i[1].mul(Do),a.add(s[0])),s=Vo(e,c+32,o.add(s[1]),r.add(zo(e,c+16))),[o,a]=[a,o],c+=64}while(c!==u);const d=Do.add(o.and(255).shl(1));return c=l,s[0]=s[0].add(t-1&63),i[0]=i[0].add(s[0]),s[0]=s[0].add(i[0]),a=Wo(a.add(r).add(i[0]).add(zo(e,c+8)),37).mul(d),r=Wo(r.add(i[1]).add(zo(e,c+48)),42).mul(d),a=a.xor(s[1].mul(9)),r=r.add(i[0].mul(9).add(zo(e,c+40))),o=Wo(o.add(s[0]),33).mul(d),i=Vo(e,c,i[1].mul(d),a.add(s[0])),s=Vo(e,c+32,o.add(s[1]),r.add(zo(e,c+16))),[o,a]=[a,o],Uo(Uo(i[0],s[0],d).add(Po(r).mul(Fo)).add(o),Uo(i[1],s[1],d).add(a),d)}function Ho(e,t){return"string"===t?qo(e):jo([e],t)}function jo(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=Qo(e)),nn().getBool("DEBUG")&&function(e,t){for(let n=0;n<e.length;n++){const a=e[n];if(isNaN(a)||!isFinite(a))throw Error("A tensor of type ".concat(t," being uploaded contains ").concat(a,"."))}}(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){const t=new Uint8Array(e.length);for(let n=0;n<t.length;++n)0!==Math.round(e[n])&&(t[n]=1);return t}throw new Error("Unknown data type ".concat(t))}function Ko(){return nn().platform.now()}function qo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",nn().platform.encode(e,t)}function Xo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",nn().platform.decode(e,t)}function Yo(e){return null!=nn().platform.isTypedArray?nn().platform.isTypedArray(e):Eo(e)}function Qo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==t&&(t=[]),"boolean"===typeof e||"number"===typeof e||"string"===typeof e||$t(e)||null==e||Yo(e)&&n)t.push(e);else if(Array.isArray(e)||Yo(e))for(let a=0;a<e.length;++a)Qo(e[a],t,n);else{let a=-1;for(const t of Object.keys(e))/^([1-9]+[0-9]*|0)$/.test(t)&&(a=Math.max(a,Number(t)));for(let r=0;r<=a;r++)Qo(e[r],t,n)}return t}class Zo{constructor(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new Jo)}profileKernel(e,t,n){let a;const r=()=>{a=n()};let o;const i=Ko();if(this.backendTimer.timerAvailable())o=this.backendTimer.time(r);else{r();for(const e of a)e.dataSync();o=Promise.resolve({kernelMs:Ko()-i})}if(nn().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let s=0;s<a.length;s++){const t=a[s];t.data().then((n=>{$o(n,t.dtype,e)}))}return{kernelName:e,outputs:a,inputs:t,timeMs:o.then((e=>e.kernelMs)),extraInfo:o.then((e=>null!=e.getExtraProfileInfo?e.getExtraProfileInfo():""))}}logKernelProfile(e){const{kernelName:t,outputs:n,timeMs:a,inputs:r,extraInfo:o}=e;n.forEach((e=>{Promise.all([e.data(),a,o]).then((n=>{this.logger.logKernelProfile(t,e,n[0],n[1],r,n[2])}))}))}}function $o(e,t,n){if("float32"!==t)return!1;for(let a=0;a<e.length;a++){const t=e[a];if(isNaN(t)||!isFinite(t))return console.warn("Found ".concat(t," in the result of '").concat(n,"'")),!0}return!1}class Jo{logKernelProfile(e,t,n,a,r,o){const i="number"===typeof a?Rt("".concat(a,"ms"),9):a.error,s=Rt(e,25),c=t.rank,u=t.size,l=Rt(t.shape.toString(),14);let d="";for(const p in r){const e=r[p];if(null!=e){const n=e.shape||t.shape,a=n.length;d+="".concat(p,": ").concat(a,"D ").concat(a>0?n:""," ")}}console.log("%c".concat(s,"\t%c").concat(i,"\t%c").concat(c,"D ").concat(l,"\t%c").concat(u,"\t%c").concat(d,"\t%c").concat(o),"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}const ei=20,ti=3,ni=7;function ai(e,t,n,a){const r=Gt(t),o=function(e,t,n,a){const r=It(t),o=a[a.length-1],i=new Array(o).fill(0),s=t.length,c="complex64"===n?si(e):e;if(s>1)for(let u=0;u<r/o;u++){const e=u*o;for(let t=0;t<o;t++)i[t]=Math.max(i[t],ri(c[e+t],0,n).length)}return i}(e,t,n,r),i=t.length,s=ii(e,t,n,r,o),c=["Tensor"];return a&&(c.push("  dtype: ".concat(n)),c.push("  rank: ".concat(i)),c.push("  shape: [".concat(t,"]")),c.push("  values:")),c.push(s.map((e=>"    "+e)).join("\n")),c.join("\n")}function ri(e,t,n){let a;return a=Array.isArray(e)?"".concat(parseFloat(e[0].toFixed(ni))," + ")+"".concat(parseFloat(e[1].toFixed(ni)),"j"):Bt(e)?"'".concat(e,"'"):"bool"===n?oi(e):parseFloat(e.toFixed(ni)).toString(),Rt(a,t)}function oi(e){return 0===e?"false":"true"}function ii(e,t,n,a,r){let o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];const i="complex64"===n?2:1,s=t[0],c=t.length;if(0===c){if("complex64"===n){return[ri(si(e)[0],0,n)]}return"bool"===n?[oi(e[0])]:[e[0].toString()]}if(1===c){if(s>ei){const t=ti*i;let a=Array.from(e.slice(0,t)),o=Array.from(e.slice((s-ti)*i,s*i));return"complex64"===n&&(a=si(a),o=si(o)),["["+a.map(((e,t)=>ri(e,r[t],n))).join(", ")+", ..., "+o.map(((e,t)=>ri(e,r[s-ti+t],n))).join(", ")+"]"]}return["["+("complex64"===n?si(e):Array.from(e)).map(((e,t)=>ri(e,r[t],n))).join(", ")+"]"]}const u=t.slice(1),l=a.slice(1),d=a[0]*i,p=[];if(s>ei){for(let t=0;t<ti;t++){const a=t*d,o=a+d;p.push(...ii(e.slice(a,o),u,n,l,r,!1))}p.push("...");for(let t=s-ti;t<s;t++){const a=t*d,o=a+d;p.push(...ii(e.slice(a,o),u,n,l,r,t===s-1))}}else for(let m=0;m<s;m++){const t=m*d,a=t+d;p.push(...ii(e.slice(t,a),u,n,l,r,m===s-1))}const h=2===c?",":"";p[0]="["+(s>0?p[0]+h:"");for(let m=1;m<p.length-1;m++)p[m]=" "+p[m]+h;let f=",\n";for(let m=2;m<c;m++)f+="\n";return p[p.length-1]=" "+p[p.length-1]+"]"+(o?"":f),p}function si(e){const t=[];for(let n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}class ci{constructor(e,t,n){if(this.dtype=t,this.shape=e.slice(),this.size=It(e),null!=n){const e=n.length;kt(e===this.size,(()=>"Length of values '".concat(e,"' does not match the size ")+"inferred by the shape '".concat(this.size,"'.")))}if("complex64"===t)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||Pt(t,this.size),this.strides=Gt(e)}set(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];0===n.length&&(n=[0]),kt(n.length===this.rank,(()=>"The number of provided coordinates (".concat(n.length,") must ")+"match the rank (".concat(this.rank,")")));const r=this.locToIndex(n);this.values[r]=e}get(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];0===t.length&&(t=[0]);let a=0;for(const o of t){if(o<0||o>=this.shape[a]){const e="Requested out of range element at ".concat(t,". ")+"  Buffer shape=".concat(this.shape);throw new Error(e)}a++}let r=t[t.length-1];for(let o=0;o<t.length-1;++o)r+=this.strides[o]*t[o];return this.values[r]}locToIndex(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];let t=e[e.length-1];for(let n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}indexToLoc(e){if(0===this.rank)return[];if(1===this.rank)return[e];const t=new Array(this.shape.length);for(let n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}get rank(){return this.shape.length}toTensor(){return ui().makeTensor(this.values,this.shape,this.dtype)}}let ui=null,li=null,di=null;class pi{constructor(e,t,n,a){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=It(e),this.strides=Gt(e),this.dataId=n,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return li.buffer(this.shape,this.dtype,e)}bufferSync(){return li.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return jt(this.shape,e,"complex64"===this.dtype)}arraySync(){return jt(this.shape,this.dataSync(),"complex64"===this.dtype)}async data(){this.throwIfDisposed();const e=ui().read(this.dataId);if("string"===this.dtype){const n=await e;try{return n.map((e=>Xo(e)))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),ui().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=ui().readSync(this.dataId);if("string"===this.dtype)try{return e.map((e=>Xo(e)))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await ui().read(this.dataId);return"string"===this.dtype?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),ui().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return li.print(this,e)}clone(){return this.throwIfDisposed(),li.clone(this)}toString(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return ai(this.dataSync(),this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),li.cast(this,e)}variable(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.throwIfDisposed(),ui().makeVariable(this,e,t,n)}}function hi(){return sn("Tensor",(()=>pi))}Object.defineProperty(pi,Symbol.hasInstance,{value:e=>!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}),hi();class fi extends pi{constructor(e,t,n,a){super(e.shape,e.dtype,e.dataId,a),this.trainable=t,this.name=n}assign(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value (".concat(e.dtype,") and ")+"previous value (".concat(this.dtype,") must match"));if(!Tt(e.shape,this.shape))throw new Error("shape of the new value (".concat(e.shape,") and ")+"previous value (".concat(this.shape,") must match"));ui().disposeTensor(this),this.dataId=e.dataId,ui().incRef(this,null)}dispose(){ui().disposeVariable(this),this.isDisposedInternal=!0}}var mi,gi,yi,bi,xi;Object.defineProperty(fi,Symbol.hasInstance,{value:e=>e instanceof pi&&null!=e.assign&&e.assign instanceof Function}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(mi||(mi={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(gi||(gi={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(yi||(yi={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(bi||(bi={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(xi||(xi={}));const vi={float32:bi,int32:gi,bool:yi,complex64:xi};function wi(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast ".concat(e," with ").concat(t))}return vi[e][t]}function ki(e){return wi(e,"int32")}function Si(e){return null!=e&&"object"===typeof e&&"texture"in e&&e.texture instanceof WebGLTexture}function Ci(e){return"undefined"!==typeof GPUBuffer&&null!=e&&"object"===typeof e&&"buffer"in e&&e.buffer instanceof GPUBuffer}function Ii(e,t){if(e.dtype===t.dtype)return[e,t];const n=wi(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function Ni(e){const t=[];return Ti(e,t,new Set),t}function Ti(e,t,n){if(null==e)return;if(e instanceof pi)return void t.push(e);if(a=e,!Array.isArray(a)&&"object"!==typeof a)return;var a;const r=e;for(const o in r){const e=r[o];n.has(e)||(n.add(e),Ti(e,t,n))}}function _i(e){return null!=e.kernelName}class Ei{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map((e=>e.name))))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class Ri{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new Ei}async ready(){if(null!=this.pendingBackendInit)return this.pendingBackendInit.then((()=>{}));if(null!=this.backendInstance)return;const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const n=e[t];if(await this.initializeBackend(n).success)return void await this.setBackend(n)}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(null!=this.pendingBackendInit)throw new Error("Backend '".concat(this.backendName,"' has not yet been initialized. Make ")+"sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){const{name:e,asyncInit:t}=this.initializeBackendsAndReturnBest();if(t)throw new Error("The highest priority backend '".concat(e,"' has not yet been ")+"initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;{const{asyncInit:t}=this.initializeBackend(e);if(t)return null}}return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e in this.registryFactory?(vo("".concat(e," backend was already registered. ")+"Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}async setBackend(e){if(null==this.registryFactory[e])throw new Error("Backend name '".concat(e,"' not found in registry"));if(this.backendName=e,null==this.registry[e]){this.backendInstance=null;const{success:t,asyncInit:n}=this.initializeBackend(e);if(!(n?await t:t))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new Zo(this.backendInstance),!0}setupRegisteredKernels(){No(this.backendName).forEach((e=>{null!=e.setupFunc&&e.setupFunc(this.backendInstance)}))}disposeRegisteredKernels(e){No(e).forEach((t=>{null!=t.disposeFunc&&t.disposeFunc(this.registry[e])}))}initializeBackend(e){const t=this.registryFactory[e];if(null==t)throw new Error("Cannot initialize backend ".concat(e,", no registration found."));try{const n=t.factory();if(!n||n instanceof gt||"function"!==typeof n.then)return this.registry[e]=n,{success:!0,asyncInit:!1};{const t=++this.pendingBackendInitId,a=n.then((n=>!(t<this.pendingBackendInitId)&&(this.registry[e]=n,this.pendingBackendInit=null,!0))).catch((n=>(t<this.pendingBackendInitId||(this.pendingBackendInit=null,vo("Initialization of backend ".concat(e," failed")),vo(n.stack||n.message)),!1)));return this.pendingBackendInit=a,{success:a,asyncInit:!0}}}catch(n){return vo("Initialization of backend ".concat(e," failed")),vo(n.stack||n.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error("".concat(e," backend not found in registry"));this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(((e,t)=>this.registryFactory[t].priority-this.registryFactory[e].priority))}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const n=e[t],{success:a,asyncInit:r}=this.initializeBackend(n);if(r||a)return{name:n,asyncInit:r}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,t){const n=this.state.tensorInfo.get(t),a=n.backend,r=this.readSync(t),o=a.refCount(t);a.disposeData(t,!0),n.backend=e,e.move(t,r,n.shape,n.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,t){let n,a=null;if(null==t){if("function"!==typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!==typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!==typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=e}return this.scopedRun((()=>this.startScope(a)),(()=>this.endScope(n)),(()=>(n=t(),n instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n)))}scopedRun(e,t,n){e();try{const e=n();return t(),e}catch(a){throw t(),a}}nextTensorId(){return Ri.nextTensorId++}nextVariableId(){return Ri.nextVariableId++}clone(e){const t=Oi.runKernel(Sa,{x:e}),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(e=>({x:()=>{const t={x:e},n={dtype:"float32"};return Oi.runKernel(An,t,n)}})),[],{}),t}runKernel(e,t,n){null==this.backendName&&this.backend;if(!(null!=Co(e,this.backendName)))throw new Error("Kernel '".concat(e,"' not registered for backend '").concat(this.backendName,"'"));return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,t,n){const a=this.backend.numDataIds();let r=0;n.forEach((e=>{r+="complex64"===e.dtype?3:1}));const o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],i=a-t-r-o;if(i>0)throw new Error("Backend '".concat(this.backendName,"' has an internal memory leak ")+"(".concat(i," data ids) after running '").concat(e,"'"))}runKernelFunc(e){let t,n=[];const a=this.isTapeOn(),r=this.state.numBytes,o=this.state.numTensors;let i,s;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;const c=_i(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(_i(e)){const{kernelName:t,inputs:r,attrs:o}=e;null==this.backendName&&this.backend;const c=Co(t,this.backendName);kt(null!=c,(()=>"Cannot find registered kernel '".concat(t,"' for backend '").concat(this.backendName,"'"))),i=()=>{const e=this.backend.numDataIds();s=c.kernelFunc({inputs:r,attrs:o,backend:this.backend});const i=Array.isArray(s)?s:[s];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(t,e,i);const u=i.map((e=>null!=e.rank?e:this.makeTensorFromTensorInfo(e)));if(a){const e=this.getTensorsForGradient(t,r,u);n=this.saveTensorsForBackwardMode(e)}return u}}else{const{forwardFunc:t}=e,r=e=>{a&&(n=e.map((e=>this.keep(this.clone(e)))))};i=()=>{const e=this.backend.numDataIds();s=this.tidy((()=>t(this.backend,r)));const n=Array.isArray(s)?s:[s];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(c,e,n),n}}const{inputs:u,attrs:l}=e,d=_i(e)?null:e.backwardsFunc;let p;return this.scopedRun((()=>this.state.kernelDepth++),(()=>this.state.kernelDepth--),(()=>{this.ENV.getBool("DEBUG")||this.state.profiling?(p=this.profiler.profileKernel(c,u,(()=>i())),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(p),t=p.outputs):t=i()})),a&&this.addTapeNode(c,u,t,d,n,l),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-r,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-o,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(u).map((e=>null!=u[e]?u[e].shape:null)),outputShapes:t.map((e=>e.shape)),kernelTimeMs:p.timeMs,extraInfo:p.extraInfo}),Array.isArray(s)?t:t[0]}saveTensorsForBackwardMode(e){const t=e.map((e=>this.keep(this.clone(e))));return t}getTensorsForGradient(e,t,n){const a=Io(e);if(null!=a){const e=a.inputsToSave||[],r=a.outputsToSave||[];let o;a.saveAllInputs?(kt(Array.isArray(t),(()=>"saveAllInputs is true, expected inputs to be an array.")),o=Object.keys(t).map((e=>t[e]))):o=e.map((e=>t[e]));const i=n.filter(((e,t)=>r[t]));return o.concat(i)}return[]}makeTensor(e,t,n,a){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",a=a||this.backend;let r=e;"string"===n&&Bt(e[0])&&(r=e.map((e=>qo(e))));const o=a.write(r,t,n),i=new pi(t,n,o,this.nextTensorId());if(this.trackTensor(i,a),"string"===n){const e=this.state.tensorInfo.get(o),t=function(e){if(null==e)return 0;let t=0;return e.forEach((e=>t+=e.length)),t}(r);this.state.numBytes+=t-e.bytes,e.bytes=t}return i}makeTensorFromDataId(e,t,n,a){const r={dataId:e,shape:t,dtype:n=n||"float32"};return this.makeTensorFromTensorInfo(r,a)}makeTensorFromTensorInfo(e,t){const{dataId:n,shape:a,dtype:r}=e,o=new pi(a,r,n,this.nextTensorId());return this.trackTensor(o,t),o}makeVariable(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;n=n||this.nextVariableId().toString(),null!=a&&a!==e.dtype&&(e=e.cast(a));const r=new fi(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[r.name])throw new Error("Variable with name ".concat(r.name," was already registered"));return this.state.registeredVariables[r.name]=r,this.incRef(r,this.backend),r}trackTensor(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;let n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*zt(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof fi||this.track(e)}incRef(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}removeDataId(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){const t=e.size*zt(e.dtype);this.state.numBytes-=t}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const t=this.state.registeredVariables[e];this.disposeVariable(t)}}disposeVariable(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const t=this.state.numBytes,n=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map((e=>e.totalBytesSnapshot))),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n;for(const a of this.state.activeProfile.kernels)a.kernelTimeMs=await a.kernelTimeMs,a.extraInfo=await a.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}addTapeNode(e,t,n,a,r,o){const i={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:r},s=Io(e);null!=s&&(a=s.gradFunc),null!=a&&(i.gradient=e=>(e=e.map(((e,t)=>{if(null==e){const e=n[t],a=Xt(e.size,e.dtype);return this.makeTensor(a,e.shape,e.dtype)}return e})),a(e.length>1?e:e[0],r,o))),this.state.activeTape.push(i)}keep(e){return e.kept=!0,e}startTape(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}endScope(e){const t=Ni(e),n=new Set(t.map((e=>e.id)));for(let r=0;r<this.state.activeScope.track.length;r++){const e=this.state.activeScope.track[r];e.kept||n.has(e.id)||e.dispose()}const a=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],t.forEach((e=>{e.kept||e.scopeId!==a.id||this.track(e)}))}gradients(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(kt(t.length>0,(()=>"gradients() received an empty list of xs.")),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '".concat(n.dtype,"'"));const r=this.scopedRun((()=>this.startTape()),(()=>this.endTape()),(()=>this.tidy("forward",e)));kt(r instanceof pi,(()=>"The result y returned by f() must be a tensor."));const o=function(e,t,n){const a={},r={};for(let c=0;c<t.length;c++)a[t[c].id]=!0;for(let c=0;c<e.length;c++){const n=e[c],o=n.inputs;for(const e in o){const i=o[e];let s=!1;for(let e=0;e<t.length;e++)if(a[i.id]){n.outputs.forEach((e=>a[e.id]=!0)),s=!0,r[n.id]=!0;break}if(s)break}}const o={};o[n.id]=!0;const i={};for(let c=e.length-1;c>=0;c--){const t=e[c],n=t.inputs;for(let e=0;e<t.outputs.length;e++)if(o[t.outputs[e].id]){for(const e in n)o[n[e].id]=!0,i[t.id]=!0;break}}const s=[];for(let c=0;c<e.length;c++){const t=e[c];if(r[t.id]&&i[t.id]){const e={};for(const r in t.inputs){const n=t.inputs[r];a[n.id]&&(e[r]=n)}const n=Object.assign({},t);n.inputs=e,n.outputs=t.outputs,s.push(n)}}return s}(this.state.activeTape,t,r);if(!a&&0===o.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(()=>{const e={};e[r.id]=null==n?function(e){const t=qt(It(e),"float32");return Oi.makeTensor(t,e,"float32")}(r.shape):n,function(e,t,n,a){for(let r=t.length-1;r>=0;r--){const o=t[r],i=[];if(o.outputs.forEach((t=>{const n=e[t.id];null!=n?i.push(n):i.push(null)})),null==o.gradient)throw new Error("Cannot compute gradient: gradient function not found "+"for ".concat(o.kernelName,"."));const s=o.gradient(i);for(const t in o.inputs){if(!(t in s))throw new Error("Cannot backprop through input ".concat(t,". ")+"Available gradients found: ".concat(Object.keys(s),"."));const r=n((()=>s[t]()));if("float32"!==r.dtype)throw new Error("Error in gradient for op ".concat(o.kernelName,". The gradient of input ")+"".concat(t," must have 'float32' dtype, but has '").concat(r.dtype,"'"));const i=o.inputs[t];if(!Tt(r.shape,i.shape))throw new Error("Error in gradient for op ".concat(o.kernelName,". The gradient of input ")+"'".concat(t,"' has shape '").concat(r.shape,"', which does not match ")+"the shape of the input '".concat(i.shape,"'"));if(null==e[i.id])e[i.id]=r;else{const t=e[i.id];e[i.id]=a(t,r),t.dispose()}}}}(e,o,(e=>this.tidy(e)),Fi);const a=t.map((t=>e[t.id]));return 0===this.state.gradientDepth&&(this.state.activeTape.forEach((e=>{for(const t of e.saved)t.dispose()})),this.state.activeTape=null),{value:r,grads:a}}))}customGrad(e){var t=this;return kt(Ut(e),(()=>"The f passed in customGrad(f) must be a function.")),function(){for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];let o;kt(a.every((e=>e instanceof pi)),(()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors"));const i={};a.forEach(((e,t)=>{i[t]=e}));return t.runKernelFunc({forwardFunc:(t,n)=>(o=e(...a,n),kt(o.value instanceof pi,(()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor")),kt(Ut(o.gradFunc),(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function.")),o.value),backwardsFunc:(e,t)=>{const n=o.gradFunc(e,t),r=Array.isArray(n)?n:[n];kt(r.length===a.length,(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...).")),kt(r.every((e=>e instanceof pi)),(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."));const i={};return r.forEach(((e,t)=>{i[t]=()=>e})),i},inputs:i})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}async time(e){const t=Ko(),n=await this.backend.time(e);return n.wallMs=Ko()-t,n}track(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new Ei;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}function Ai(){const e=on();if(null==e._tfengine){const t=new en(e);e._tfengine=new Ri(t)}var t;return t=e._tfengine.ENV,rn=t,function(e){ui=e}((()=>e._tfengine)),e._tfengine}Ri.nextTensorId=0,Ri.nextVariableId=0;const Oi=Ai();function Fi(e,t){const n={a:e,b:t};return Oi.runKernel(dn,n)}let Di;function Mi(e){if(void 0!==Di)return Di;if(e||"undefined"!==typeof navigator&&null!=navigator){if(e||(e=navigator),"ReactNative"===e.product)return!0;const t=e.userAgent||e.vendor||("undefined"!==typeof window?window.opera:"");if(!t){const t=e;return t.userAgentData&&t.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function Pi(){return"undefined"!==typeof window&&null!=window.document||"undefined"!==typeof WorkerGlobalScope}const Li=nn();function zi(e,t){let n=e;if(Yo(e))return"string"===t?[]:[e.length];if(Si(e)){const t=e.channels||"RGBA";return[e.height,e.width*t.length]}if(Ci(e))return[e.buffer.size/(null==t?4:zt(t))];if(!Array.isArray(e))return[];const a=[];for(;Array.isArray(n)||Yo(n)&&"string"!==t;)a.push(n.length),n=n[0];return Array.isArray(e)&&nn().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&Bi(e,a,[]),a}function Bi(e,t,n){if(n=n||[],!Array.isArray(e)&&!Yo(e))return void kt(0===t.length,(()=>"Element arr[".concat(n.join("]["),"] is a primitive, ")+"but should be an array/TypedArray of ".concat(t[0]," elements")));kt(t.length>0,(()=>"Element arr[".concat(n.join("]["),"] should be a primitive, ")+"but is an array of ".concat(e.length," elements"))),kt(e.length===t[0],(()=>"Element arr[".concat(n.join("]["),"] should have ").concat(t[0]," ")+"elements, but has ".concat(e.length," elements")));const a=t.slice(1);for(let r=0;r<e.length;++r)Bi(e[r],a,n.concat(r))}function Wi(e,t,n,a){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error("Argument '".concat(n,"' passed to '").concat(a,"' must ")+"be ".concat(e," tensor, but got ").concat(t," tensor"))}}function Ui(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(e instanceof hi())return Wi(a,e.dtype,t,n),e;let r=Wt(e);if("string"!==r&&["bool","int32","float32"].indexOf(a)>=0&&(r=a),Wi(a,r,t,n),null==e||!Yo(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e){const a=null==e?"null":e.constructor.name;throw new Error("Argument '".concat(t,"' passed to '").concat(n,"' must be a ")+"Tensor or TensorLike, but got '".concat(a,"'"))}const o=zi(e,r);Yo(e)||Array.isArray(e)||(e=[e]);const i="string"!==r?jo(e,r):Qo(e,[],!0);return Oi.makeTensor(i,o,r)}function Vi(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(!Array.isArray(e))throw new Error("Argument ".concat(t," passed to ").concat(n," must be a ")+"`Tensor[]` or `TensorLike[]`");return e.map(((e,r)=>Ui(e,"".concat(t,"[").concat(r,"]"),n,a)))}Li.registerFlag("DEBUG",(()=>!1),(e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),Li.registerFlag("IS_BROWSER",(()=>Pi())),Li.registerFlag("IS_NODE",(()=>"undefined"!==typeof process&&"undefined"!==typeof process.versions&&"undefined"!==typeof process.versions.node)),Li.registerFlag("IS_CHROME",(()=>"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor))),Li.registerFlag("IS_SAFARI",(()=>"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor))),Li.registerFlag("PROD",(()=>!1)),Li.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(()=>Li.getBool("DEBUG"))),Li.registerFlag("DEPRECATION_WARNINGS_ENABLED",(()=>!0)),Li.registerFlag("IS_TEST",(()=>!1)),Li.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(()=>Li.getBool("DEBUG"))),Li.registerFlag("WRAP_TO_IMAGEBITMAP",(()=>!1)),Li.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",(()=>!1)),Li.registerFlag("USE_SETTIMEOUTCUSTOM",(()=>!1));const Gi="__op";function Hi(e){const t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+"".concat(t.length," keys."));let n=t[0];const a=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+=Gi;const r=function(){Oi.startScope(n);try{const e=a(...arguments);return $t(e)&&console.error("Cannot return a Promise inside of tidy."),Oi.endScope(e),e}catch(e){throw Oi.endScope(null),e}};return Object.defineProperty(r,"name",{value:n,configurable:!0}),r}const ji=Hi({complex_:function(e,t){const n=Ui(e,"real","complex"),a=Ui(t,"imag","complex");St(n.shape,a.shape,"real and imag shapes, ".concat(n.shape," and ").concat(a.shape,", ")+"must match in call to tf.complex().");const r={real:n,imag:a};return Oi.runKernel(Dn,r)}});function Ki(e,t,n,a){if(null==a)a=Wt(e);else if("complex64"===a)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(Ci(e)||Si(e)){if("float32"!==a&&"int32"!==a)throw new Error("Creating tensor from GPU data only supports "+"'float32'|'int32' dtype, while the dtype is ".concat(a,"."));return Oi.backend.createTensorFromGPUData(e,t||n,a)}if(!Yo(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){Yt(t);const e=It(t),a=It(n);kt(e===a,(()=>"Based on the provided shape, [".concat(t,"], the tensor should have ")+"".concat(e," values but has ").concat(a)));for(let r=0;r<n.length;++r){const e=n[r],a=r!==n.length-1||e!==It(t.slice(r));kt(n[r]===t[r]||!a,(()=>"Error creating a new Tensor. Inferred shape "+"(".concat(n,") does not match the provided ")+"shape (".concat(t,"). ")))}}return Yo(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==a?jo(e,a):Qo(e,[],!0),Oi.makeTensor(e,t,a)}function qi(e,t,n){return Ki(e,t,zi(e,n),n)}const Xi={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};class Yi{static join(e){return new Yi(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,null==e)return;if(e instanceof Array||(e=[e]),0===(e=e.map((e=>Yo(e)?e.buffer:e))).length)return;this.bufferUniformSize=e[0].byteLength;let t=0;for(let n=0;n<e.length;n++){const a=e[n];n!==e.length-1&&a.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const r=t+a.byteLength;this.shards.push({buffer:a,start:t,end:r}),t=r}0===this.shards.length&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.byteLength;if(0===this.shards.length)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,t=isNaN(Number(t))?0:t,e=Math.max(0,e),t=Math.min(this.byteLength,t),t<=e)return new ArrayBuffer(0);const n=this.findShardForByte(e);if(-1===n)throw new Error("Could not find start shard for byte ".concat(e));const a=new ArrayBuffer(t-e),r=new Uint8Array(a);let o=0;for(let i=n;i<this.shards.length;i++){const n=this.shards[i],a=e+o-n.start,s=o,c=Math.min(t,n.end)-n.start,u=new Uint8Array(n.buffer,a,c-a);if(r.set(u,s),o+=u.length,t<n.end)break}return a}findShardForByte(e){if(0===this.shards.length||e<0||e>=this.byteLength)return-1;if(null!=this.bufferUniformSize)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function t(t){return e<t.start?-1:e>=t.end?1:0}if(0===t(this.shards[this.previousShardIndex]))return this.previousShardIndex;const n=function(e,t){let n=0,a=e.length;for(;n<=a;){const r=Math.floor((a-n)/2)+n,o=t(e[r]);if(0===o)return r;o<0?a=r:n=r+1}return-1}(this.shards,t);return-1===n?-1:(this.previousShardIndex=n,this.previousShardIndex)}}function Qi(){return Oi}function Zi(e,t){return Oi.tidy(e,t)}function $i(e){Ni(e).forEach((e=>e.dispose()))}function Ji(e){return Oi.keep(e)}function es(){return Oi.backendName}function ts(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Oi.registerBackend(e,t,n)}function ns(){return Oi.backend}!function(e){di=e}((function(e){nn().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}));const as=4;async function rs(e,t){const n=[],a=[],r=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);for(let o=0;o<r.length;++o){const i=r[o],s=Array.isArray(e)?e[o].tensor:e[i];if("float32"!==s.dtype&&"int32"!==s.dtype&&"bool"!==s.dtype&&"string"!==s.dtype&&"complex64"!==s.dtype)throw new Error("Unsupported dtype in weight '".concat(i,"': ").concat(s.dtype));const c={name:i,shape:s.shape,dtype:s.dtype};if("string"===s.dtype){const e=new Promise((async e=>{const t=await s.bytes(),n=t.reduce(((e,t)=>e+t.length),0)+as*t.length,a=new Uint8Array(n);let r=0;for(let o=0;o<t.length;o++){const e=t[o],n=new Uint8Array(new Uint32Array([e.length]).buffer);a.set(n,r),r+=as,a.set(e,r),r+=e.length}e(a)}));a.push(e)}else a.push(s.data());null!=t&&(c.group=t),n.push(c)}return{data:ds(await Promise.all(a)),specs:n}}function os(e,t){const n=new Yi(e),a={};let r=0;for(const o of t){const e=is(o,((e,t)=>n.slice(r+e,r+t)));a[o.name]=cs(o,n.slice(r,r+e)),r+=e}return a}function is(e,t){const n=It(e.shape);let a;if("quantization"in e){const t=e.quantization;a=Xi[t.dtype]}else{if("string"===e.dtype){let e=0;for(let a=0;a<n;a++)e+=as+new Uint32Array(t(e,e+as))[0];return e}a=Xi[e.dtype]}return n*a}async function ss(e,t){const n=It(e.shape);let a;if("quantization"in e){const t=e.quantization;a=Xi[t.dtype]}else{if("string"===e.dtype){let e=0;for(let a=0;a<n;a++)e+=as+new Uint32Array(await t(e,e+as))[0];return e}a=Xi[e.dtype]}return n*a}function cs(e,t){const n=e.name,a=e.dtype,r=e.shape,o=It(r);let i,s=0;if("quantization"in e){const r=e.quantization;if("uint8"===r.dtype||"uint16"===r.dtype){if(!("min"in r)||!("scale"in r))throw new Error("Weight ".concat(e.name," with quantization ").concat(r.dtype," ")+"doesn't have corresponding metadata min and scale.")}else{if("float16"!==r.dtype)throw new Error("Weight ".concat(e.name," has unknown ")+"quantization dtype ".concat(r.dtype,". ")+"Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.");if("float32"!==a)throw new Error("Weight ".concat(e.name," is quantized with ").concat(r.dtype," ")+"which only supports weights of type float32 not ".concat(a,"."))}const c=Xi[r.dtype],u="uint8"===r.dtype?new Uint8Array(t):new Uint16Array(t);if("float32"===a)if("uint8"===r.dtype||"uint16"===r.dtype){i=new Float32Array(u.length);for(let e=0;e<u.length;e++){const t=u[e];i[e]=t*r.scale+r.min}}else{if("float16"!==r.dtype)throw new Error("Unsupported quantization type ".concat(r.dtype," ")+"for weight type float32.");{const e=function(){const e=function(){const e=e=>{let t=e<<13,n=0;for(;0===(8388608&t);)n-=8388608,t<<=1;return t&=-8388609,n+=947912704,t|n},t=new Uint32Array(2048);t[0]=0;for(let n=1;n<1024;n++)t[n]=e(n);for(let n=1024;n<2048;n++)t[n]=939524096+(n-1024<<13);return t}(),t=function(){const e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(let t=1;t<31;t++)e[t]=t<<23;for(let t=33;t<63;t++)e[t]=2147483648+(t-32<<23);return e}(),n=function(){const e=new Uint32Array(64);for(let t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}();return a=>{const r=new ArrayBuffer(4*a.length),o=new Uint32Array(r);for(let i=0;i<a.length;i++){const r=a[i],s=e[n[r>>10]+(1023&r)]+t[r>>10];o[i]=s}return new Float32Array(r)}}();i=e(u)}}else{if("int32"!==a)throw new Error("Unsupported dtype in weight '".concat(n,"': ").concat(a));if("uint8"!==r.dtype&&"uint16"!==r.dtype)throw new Error("Unsupported quantization type ".concat(r.dtype," ")+"for weight type int32.");i=new Int32Array(u.length);for(let e=0;e<u.length;e++){const t=u[e];i[e]=Math.round(t*r.scale+r.min)}}s+=o*c}else if("string"===a){const n=It(e.shape);i=[];for(let e=0;e<n;e++){const e=new Uint32Array(t.slice(s,s+as))[0];s+=as;const n=new Uint8Array(t.slice(s,s+e));i.push(n),s+=e}}else{const e=Xi[a];if("float32"===a)i=new Float32Array(t);else if("int32"===a)i=new Int32Array(t);else{if("bool"!==a){if("complex64"===a){i=new Float32Array(t);const e=new Float32Array(i.length/2),n=new Float32Array(i.length/2);for(let t=0;t<e.length;t++)e[t]=i[2*t],n[t]=i[2*t+1];const a=qi(e,r,"float32"),o=qi(n,r,"float32"),s=ji(a,o);return a.dispose(),o.dispose(),s}throw new Error("Unsupported dtype in weight '".concat(n,"': ").concat(a))}i=new Uint8Array(t)}s+=o*e}return qi(i,r,a)}async function us(e,t,n){let a=new Uint8Array(t);for(;a.byteLength<n;){const{done:t,value:r}=await e.read();if(t&&null==r){const e=n-a.byteLength;throw new Error("Reader is done but ".concat(e," bytes are still expected"))}const o=new Uint8Array(a.length+r.byteLength);o.set(a,0),o.set(new Uint8Array(r),a.length),a=o}return a.buffer}async function ls(e,t){const n={},a=e.getReader();let r=new ArrayBuffer(0);for(const o of t){const e=await ss(o,(async(e,t)=>(r=await us(a,r,t),r.slice(e,t))));r=await us(a,r,e);const t=r.slice(0,e);r=r.slice(e);const i=cs(o,t);if(n[o.name]=i,"webgpu"===es()){const e=ns();"uploadToGPU"in e&&It(i.shape)>=nn().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&e.uploadToGPU(i.dataId)}}return n}function ds(e){if(null===e)throw new Error("Invalid input value: ".concat(JSON.stringify(e)));let t=0;const n=[];e.forEach((e=>{if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: ".concat(e.constructor.name))}));const a=new Uint8Array(t);let r=0;return n.forEach((e=>{a.set(new Uint8Array(e.buffer),r),r+=e.byteLength})),a.buffer}const ps="undefined"!==typeof Buffer&&("undefined"===typeof Blob||"undefined"===typeof atob||"undefined"===typeof btoa);function hs(e){return ps?Buffer.byteLength(e,"utf8"):new Blob([e]).size}function fs(e){return Yi.join(e)}function ms(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);const t=e.split("/");return t[t.length-1]}function gs(e,t){const n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(n.initializerSignature=e.initializerSignature),null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),n}function ys(e,t,n){const a={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(null!=e.trainingConfig&&(a.trainingConfig=e.trainingConfig),null!=e.weightsManifest){if(!t)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");a.weightSpecs=t,a.weightData=n}return null!=e.signature&&(a.signature=e.signature),null!=e.userDefinedMetadata&&(a.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(a.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(a.initializerSignature=e.initializerSignature),a}async function bs(e,t){let n,a;return null!=e.weightsManifest&&([n,a]=await t(e.weightsManifest)),ys(e,n,a)}function xs(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:hs(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:hs(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:new Yi(e.weightData).byteLength}}function vs(e){const t=[];for(const n of e)t.push(...n.weights);return t}class ws{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return null==ws.instance&&(ws.instance=new ws),ws.instance}static registerSaveRouter(e){ws.getInstance().saveRouters.push(e)}static registerLoadRouter(e){ws.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return ws.getHandlers(e,"save")}static getLoadHandlers(e,t){return ws.getHandlers(e,"load",t)}static getHandlers(e,t,n){const a=[];return("load"===t?ws.getInstance().loadRouters:ws.getInstance().saveRouters).forEach((t=>{const r=t(e,n);null!==r&&a.push(r)})),a}}const ks=e=>ws.registerSaveRouter(e),Ss=e=>ws.registerLoadRouter(e),Cs=e=>ws.getSaveHandlers(e),Is=(e,t)=>ws.getLoadHandlers(e,t),Ns="tensorflowjs",Ts="models_store",_s="model_info_store";function Es(){if(!nn().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const e="undefined"===typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function Rs(e){const t=e.result;t.createObjectStore(Ts,{keyPath:"modelPath"}),t.createObjectStore(_s,{keyPath:"modelPath"})}class As{constructor(e){if(this.indexedDB=Es(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,t){return new Promise(((e,n)=>{const a=this.indexedDB.open(Ns,1);a.onupgradeneeded=()=>Rs(a),a.onsuccess=()=>{const r=a.result;if(null==t){const t=r.transaction(Ts,"readonly"),a=t.objectStore(Ts).get(this.modelPath);a.onsuccess=()=>{if(null==a.result)return r.close(),n(new Error("Cannot find model with path '".concat(this.modelPath,"' ")+"in IndexedDB."));e(a.result.modelArtifacts)},a.onerror=e=>(r.close(),n(a.error)),t.oncomplete=()=>r.close()}else{t.weightData=Yi.join(t.weightData);const a=xs(t),i=r.transaction(_s,"readwrite");let s,c,u=i.objectStore(_s);try{s=u.put({modelPath:this.modelPath,modelArtifactsInfo:a})}catch(o){return n(o)}s.onsuccess=()=>{c=r.transaction(Ts,"readwrite");const s=c.objectStore(Ts);let l;try{l=s.put({modelPath:this.modelPath,modelArtifacts:t,modelArtifactsInfo:a})}catch(o){return n(o)}l.onsuccess=()=>e({modelArtifactsInfo:a}),l.onerror=e=>{u=i.objectStore(_s);const t=u.delete(this.modelPath);t.onsuccess=()=>(r.close(),n(l.error)),t.onerror=e=>(r.close(),n(l.error))}},s.onerror=e=>(r.close(),n(s.error)),i.oncomplete=()=>{null==c?r.close():c.oncomplete=()=>r.close()}}},a.onerror=e=>n(a.error)}))}}As.URL_SCHEME="indexeddb://";const Os=e=>{return nn().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(As.URL_SCHEME)?(t=e.slice(As.URL_SCHEME.length),new As(t)):null;var t};ws.registerSaveRouter(Os),ws.registerLoadRouter(Os);class Fs{constructor(){this.indexedDB=Es()}async listModels(){return new Promise(((e,t)=>{const n=this.indexedDB.open(Ns,1);n.onupgradeneeded=()=>Rs(n),n.onsuccess=()=>{const a=n.result,r=a.transaction(_s,"readonly"),o=r.objectStore(_s).getAll();o.onsuccess=()=>{const t={};for(const e of o.result)t[e.modelPath]=e.modelArtifactsInfo;e(t)},o.onerror=e=>(a.close(),t(o.error)),r.oncomplete=()=>a.close()},n.onerror=e=>t(n.error)}))}async removeModel(e){var t;return e=(t=e).startsWith(As.URL_SCHEME)?t.slice(As.URL_SCHEME.length):t,new Promise(((t,n)=>{const a=this.indexedDB.open(Ns,1);a.onupgradeneeded=()=>Rs(a),a.onsuccess=()=>{const r=a.result,o=r.transaction(_s,"readwrite"),i=o.objectStore(_s),s=i.get(e);let c;s.onsuccess=()=>{if(null==s.result)return r.close(),n(new Error("Cannot find model with path '".concat(e,"' ")+"in IndexedDB."));{const a=i.delete(e),o=()=>{c=r.transaction(Ts,"readwrite");const a=c.objectStore(Ts).delete(e);a.onsuccess=()=>t(s.result.modelArtifactsInfo),a.onerror=e=>n(s.error)};a.onsuccess=o,a.onerror=e=>(o(),r.close(),n(s.error))}},s.onerror=e=>(r.close(),n(s.error)),o.oncomplete=()=>{null==c?r.close():c.oncomplete=()=>r.close()}},a.onerror=e=>n(a.error)}))}}const Ds="/",Ms="tensorflowjs_models",Ps="info",Ls="model_topology",zs="weight_specs",Bs="weight_data",Ws="model_metadata";function Us(e){return{info:[Ms,e,Ps].join(Ds),topology:[Ms,e,Ls].join(Ds),weightSpecs:[Ms,e,zs].join(Ds),weightData:[Ms,e,Bs].join(Ds),modelMetadata:[Ms,e,Ws].join(Ds)}}function Vs(e){for(const t of Object.values(e))window.localStorage.removeItem(t)}function Gs(e){const t=e.split(Ds);if(t.length<3)throw new Error("Invalid key format: ".concat(e));return t.slice(1,t.length-1).join(Ds)}class Hs{constructor(e){if(!nn().getBool("IS_BROWSER")||"undefined"===typeof window||"undefined"===typeof window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=Us(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),a=JSON.stringify(e.weightSpecs),r=xs(e),o=Yi.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,a),this.LS.setItem(this.keys.weightData,function(e){if(ps)return Buffer.from(e).toString("base64");const t=new Uint8Array(e);let n="";for(let a=0,r=t.length;a<r;a++)n+=String.fromCharCode(t[a]);return btoa(n)}(o));const t={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:null!=e.signature?e.signature:void 0,userDefinedMetadata:null!=e.userDefinedMetadata?e.userDefinedMetadata:void 0,modelInitializer:null!=e.modelInitializer?e.modelInitializer:void 0,initializerSignature:null!=e.initializerSignature?e.initializerSignature:void 0,trainingConfig:null!=e.trainingConfig?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(t)),{modelArtifactsInfo:r}}catch(t){throw Vs(this.keys),new Error("Failed to save model '".concat(this.modelPath,"' to local storage: ")+"size quota being exceeded is a possible cause of this failure: "+"modelTopologyBytes=".concat(r.modelTopologyBytes,", ")+"weightSpecsBytes=".concat(r.weightSpecsBytes,", ")+"weightDataBytes=".concat(r.weightDataBytes,"."))}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(null==e)throw new Error("In local storage, there is no model with name '".concat(this.modelPath,"'"));if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const t={},n=JSON.parse(this.LS.getItem(this.keys.topology));if(null==n)throw new Error("In local storage, the topology of model '".concat(this.modelPath,"' ")+"is missing.");t.modelTopology=n;const a=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(null==a)throw new Error("In local storage, the weight specs of model '".concat(this.modelPath,"' ")+"are missing.");t.weightSpecs=a;const r=this.LS.getItem(this.keys.modelMetadata);if(null!=r){const e=JSON.parse(r);t.format=e.format,t.generatedBy=e.generatedBy,t.convertedBy=e.convertedBy,null!=e.signature&&(t.signature=e.signature),null!=e.userDefinedMetadata&&(t.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(t.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(t.initializerSignature=e.initializerSignature),null!=e.trainingConfig&&(t.trainingConfig=e.trainingConfig)}const o=this.LS.getItem(this.keys.weightData);if(null==o)throw new Error("In local storage, the binary weight values of model "+"'".concat(this.modelPath,"' are missing."));return t.weightData=function(e){if(ps){const t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}const t=atob(e),n=new Uint8Array(t.length);for(let a=0;a<t.length;++a)n.set([t.charCodeAt(a)],a);return n.buffer}(o),t}}Hs.URL_SCHEME="localstorage://";const js=e=>{return nn().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Hs.URL_SCHEME)?(t=e.slice(Hs.URL_SCHEME.length),new Hs(t)):null;var t};ws.registerSaveRouter(js),ws.registerLoadRouter(js);class Ks{constructor(){kt(nn().getBool("IS_BROWSER"),(()=>"Current environment is not a web browser")),kt("undefined"===typeof window||"undefined"!==typeof window.localStorage,(()=>"Current browser does not appear to support localStorage")),this.LS=window.localStorage}async listModels(){const e={},t=Ms+Ds,n=Ds+Ps;for(let a=0;a<this.LS.length;++a){const r=this.LS.key(a);if(r.startsWith(t)&&r.endsWith(n)){e[Gs(r)]=JSON.parse(this.LS.getItem(r))}}return e}async removeModel(e){var t;const n=Us(e=(t=e).startsWith(Hs.URL_SCHEME)?t.slice(Hs.URL_SCHEME.length):t);if(null==this.LS.getItem(n.info))throw new Error("Cannot find model at path '".concat(e,"'"));const a=JSON.parse(this.LS.getItem(n.info));return Vs(n),a}}const qs="://";class Xs{constructor(){this.managers={}}static getInstance(){return null==Xs.instance&&(Xs.instance=new Xs),Xs.instance}static registerManager(e,t){kt(null!=e,(()=>"scheme must not be undefined or null.")),e.endsWith(qs)&&(e=e.slice(0,e.indexOf(qs))),kt(e.length>0,(()=>"scheme must not be an empty string."));const n=Xs.getInstance();kt(null==n.managers[e],(()=>"A model store manager is already registered for scheme '".concat(e,"'."))),n.managers[e]=t}static getManager(e){const t=Xs.getInstance().managers[e];if(null==t)throw new Error("Cannot find model manager for scheme '".concat(e,"'"));return t}static getSchemes(){return Object.keys(Xs.getInstance().managers)}}function Ys(e){if(-1===e.indexOf(qs))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+"".concat(Xs.getSchemes().join(",")));return{scheme:e.split(qs)[0],path:e.split(qs)[1]}}async function Qs(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];kt(e!==t,(()=>"Old path and new path are the same: '".concat(e,"'")));const a=ws.getLoadHandlers(e);kt(a.length>0,(()=>"Copying failed because no load handler is found for source URL ".concat(e,"."))),kt(a.length<2,(()=>"Copying failed because more than one (".concat(a.length,") ")+"load handlers for source URL ".concat(e,".")));const r=a[0],o=ws.getSaveHandlers(t);kt(o.length>0,(()=>"Copying failed because no save handler is found for destination "+"URL ".concat(t,"."))),kt(o.length<2,(()=>"Copying failed because more than one (".concat(a.length,") ")+"save handlers for destination URL ".concat(t,".")));const i=o[0],s=Ys(e).scheme,c=Ys(e).path,u=s===Ys(e).scheme,l=await r.load();n&&u&&await Xs.getManager(s).removeModel(c);const d=await i.save(l);return n&&!u&&await Xs.getManager(s).removeModel(c),d.modelArtifactsInfo}async function Zs(){const e=Xs.getSchemes(),t={};for(const n of e){const e=await Xs.getManager(n).listModels();for(const a in e){t[n+qs+a]=e[a]}}return t}async function $s(e){const t=Ys(e);return Xs.getManager(t.scheme).removeModel(t.path)}async function Js(e,t){return Qs(e,t,!1)}async function ec(e,t){return Qs(e,t,!0)}class tc{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,t){return fetch(e,t)}now(){return performance.now()}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got ".concat(t));return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,t){return new TextDecoder(t).decode(e)}setTimeoutCustom(e,t){"undefined"!==typeof window&&nn().getBool("USE_SETTIMEOUTCUSTOM")?(this.functionRefs.push(e),setTimeout((()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")}),t),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",(e=>{if(e.source===window&&e.data.name===this.messageName){e.stopPropagation();(0,this.functionRefs[e.data.index])(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}}),!0))):setTimeout(e,t)}isTypedArray(e){return Eo(e)}}if(nn().get("IS_BROWSER")){nn().setPlatform("browser",new tc);try{Xs.registerManager(Hs.URL_SCHEME,new Ks)}catch(Kj){}try{Xs.registerManager(As.URL_SCHEME,new Fs)}catch(Kj){}}const nc=()=>n(817);let ac;class rc{constructor(){this.util=n(590),this.textEncoder=new this.util.TextEncoder}fetch(e,t){return null!=nn().global.fetch?nn().global.fetch(e,t):(null==ac&&(ac=nc()),ac(e,t))}now(){const e=process.hrtime();return 1e3*e[0]+e[1]/1e6}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got ".concat(t));return this.textEncoder.encode(e)}decode(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}function oc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2?arguments[2]:void 0;return t=t||"float32",Yt(e),new ci(e,t,n)}nn().get("IS_NODE")&&!nn().get("IS_BROWSER")&&nn().setPlatform("node",new rc);const ic=Hi({cast_:function(e,t){const n=Ui(e,"x","cast");if(!function(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}(t))throw new Error("Failed to cast to unknown dtype ".concat(t));if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");const a={x:n},r={dtype:t};return Oi.runKernel(An,a,r)}});const sc=Hi({clone_:function(e){const t={x:Ui(e,"x","clone","string_or_numeric")};return Oi.runKernel(Sa,t)}});function cc(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(e.toString(t))}Ai();li={buffer:oc,cast:ic,clone:sc,print:cc};const uc=Hi({add_:function(e,t){let n=Ui(e,"a","add"),a=Ui(t,"b","add");[n,a]=Ii(n,a);const r={a:n,b:a};return Oi.runKernel(dn,r)}});const lc=Hi({floorDiv_:function(e,t){let n=Ui(e,"a","floorDiv"),a=Ui(t,"b","floorDiv");[n,a]=Ii(n,a);const r={a:n,b:a};return Oi.runKernel(ya,r)}});const dc=Hi({div_:function(e,t){let n=Ui(e,"a","div"),a=Ui(t,"b","div");if([n,a]=Ii(n,a),"int32"===n.dtype&&"int32"===a.dtype)return lc(n,a);const r={a:n,b:a};return Oi.runKernel(ra,r,{})}});const pc=Hi({mul_:function(e,t){let n=Ui(e,"a","mul"),a=Ui(t,"b","mul");[n,a]=Ii(n,a);const r={a:n,b:a};return Oi.runKernel(Ja,r)}});const hc=Hi({sqrt_:function(e){const t={x:Ui(e,"x","sqrt","float32")};return Oi.runKernel(Br,t)}});const fc=Hi({square_:function(e){const t=Ui(e,"x","square");return Oi.runKernel("Square",{x:t},{})}});const mc=Hi({zerosLike_:function(e){const t={x:Ui(e,"x","zerosLike")};return Oi.runKernel(ho,t)}});function gc(e){return Oi.customGrad(e)}function yc(e,t){if((Yo(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&Yo(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Ki(e,[],[],t)}const bc=new Map,xc=new Map;class vc{getClassName(){return this.constructor.className}static fromConfig(e,t){return new e(t)}}class wc{constructor(){this.classNameMap={}}static getMap(){return null==wc.instance&&(wc.instance=new wc),wc.instance}static register(e){wc.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function kc(e,t,n){kt(null!=e.className,(()=>"Class being registered does not have the static className property defined.")),kt("string"===typeof e.className,(()=>"className is required to be a string, but got type "+typeof e.className)),kt(e.className.length>0,(()=>"Class being registered has an empty-string as its className, which is disallowed.")),"undefined"===typeof t&&(t="Custom"),"undefined"===typeof n&&(n=e.className);const a=t+">"+n;return wc.register(e),bc.set(a,e),xc.set(e,a),e}class Sc extends vc{minimize(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;const{value:a,grads:r}=this.computeGradients(e,n);if(null!=n){const e=n.map((e=>({name:e.name,tensor:r[e.name]})));this.applyGradients(e)}else this.applyGradients(r);return $i(r),t?a:(a.dispose(),null)}get iterations(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,t){return function(e,t){kt(Ut(e),(()=>"The f passed in variableGrads(f) must be a function")),kt(null==t||Array.isArray(t)&&t.every((e=>e instanceof fi)),(()=>"The varList passed in variableGrads(f, varList) must be an array of variables"));const n=null!=t;if(!n){t=[];for(const e in Oi.registeredVariables)t.push(Oi.registeredVariables[e])}const a=n?t.filter((e=>!e.trainable)):null,r=t.length;t=t.filter((e=>e.trainable)),kt(t.length>0,(()=>"variableGrads() expects at least one of the input variables to "+"be trainable, but none of the ".concat(r," variables is ")+"trainable."));const{value:o,grads:i}=Oi.gradients(e,t,null,!0);kt(i.some((e=>null!=e)),(()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize().")),kt(0===o.rank,(()=>"The f passed in variableGrads(f) must return a scalar, but it "+"returned a rank-".concat(o.rank," tensor")));const s={};return t.forEach(((e,t)=>{null!=i[t]&&(s[e.name]=i[t])})),null!=a&&a.forEach((e=>s[e.name]=null)),{value:o,grads:s}}(e,t)}dispose(){null!=this.iterations_&&$i(this.iterations_)}async saveIterations(){return null==this.iterations_&&(this.iterations_=0),{name:"iter",tensor:yc(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for this optimizer class "+"".concat(this.getClassName()))}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(Sc,Symbol.hasInstance,{value:e=>null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients});function Cc(e,t,n){Yt(e);const a={shape:e,value:t,dtype:n=n||Wt(t)};return Oi.runKernel(fa,{},a)}const Ic=Hi({pow_:function(e,t){let n=Ui(e,"base","pow"),a=Ui(t,"exp","pow");[n,a]=Ii(n,a);const r={a:n,b:a};return Oi.runKernel(ur,r)}});const Nc=Hi({sub_:function(e,t){let n=Ui(e,"a","sub"),a=Ui(t,"b","sub");[n,a]=Ii(n,a);const r={a:n,b:a};return Oi.runKernel(no,r)}});const Tc=Hi({abs_:function(e){const t=Ui(e,"x","abs");if("complex64"===t.dtype){const e={x:t};return Oi.runKernel(Mn,e)}{const e={x:t};return Oi.runKernel(cn,e)}}});function _c(e,t){const n=e.length,a=[];for(let r=0;r<n;r++){const o=n-1-r,i=e[o]||1;(t[t.length-1-r]||1)>1&&1===i&&a.unshift(o)}return a}function Ec(e,t){const n=[];for(let a=0;a<t.length;a++){const r=e[e.length-a-1],o=t.length-a-1,i=t[o];(null==r||1===r&&i>1)&&n.unshift(o)}return n}function Rc(e,t){const n=Math.max(e.length,t.length),a=new Array(n);for(let r=0;r<n;r++){let o=e[e.length-r-1];null==o&&(o=1);let i=t[t.length-r-1];if(null==i&&(i=1),1===o)a[n-r-1]=i;else if(1===i)a[n-r-1]=o;else{if(o!==i){const n="Operands could not be broadcast together with shapes "+"".concat(e," and ").concat(t,".");throw Error(n)}a[n-r-1]=o}}return a}const Ac=Hi({maximum_:function(e,t){let n=Ui(e,"a","maximum"),a=Ui(t,"b","maximum");[n,a]=Ii(n,a),"bool"===n.dtype&&(n=ic(n,"int32"),a=ic(a,"int32")),Rc(n.shape,a.shape);const r={a:n,b:a};return Oi.runKernel(Ua,r)}});class Oc extends Sc{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const a=Array.isArray(e)?e[n].tensor:e[t];if(null==a)return;const r=Oi.registeredVariables[t];Zi((()=>{const e=uc(pc(this.c,a),r);r.assign(e)}))})),this.incrementIterations()}setLearningRate(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=Ji(yc(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(0!==(e=await this.extractIterations(e)).length)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,t){return new e(t.learningRate)}}const Fc=[class extends Sc{static get className(){return"Adadelta"}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;super(),this.learningRate=e,this.rho=t,this.epsilon=n,this.accumulatedGrads=[],this.accumulatedUpdates=[],null==n&&(this.epsilon=Oi.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const a=Oi.registeredVariables[t],r=!1;null==this.accumulatedGrads[n]&&(this.accumulatedGrads[n]={originalName:"".concat(t,"/accum_grad"),variable:Zi((()=>mc(a).variable(r)))}),null==this.accumulatedUpdates[n]&&(this.accumulatedUpdates[n]={originalName:"".concat(t,"/accum_var"),variable:Zi((()=>mc(a).variable(r)))});const o=Array.isArray(e)?e[n].tensor:e[t];if(null==o)return;const i=this.accumulatedGrads[n].variable,s=this.accumulatedUpdates[n].variable;Zi((()=>{const e=uc(pc(i,this.rho),pc(fc(o),1-this.rho)),t=pc(dc(hc(uc(s,this.epsilon)),hc(uc(i,this.epsilon))),o),n=uc(pc(s,this.rho),pc(fc(t),1-this.rho));i.assign(e),s.assign(n);const r=uc(pc(t,-this.learningRate),a);a.assign(r)}))})),this.incrementIterations()}dispose(){null!=this.accumulatedUpdates&&($i(this.accumulatedGrads.map((e=>e.variable))),$i(this.accumulatedUpdates.map((e=>e.variable))))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){const t=(e=await this.extractIterations(e)).length/2,n=!1;this.accumulatedGrads=e.slice(0,t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))),this.accumulatedUpdates=e.slice(t,2*t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)})))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.rho,t.epsilon)}},class extends Sc{static get className(){return"Adagrad"}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;super(),this.learningRate=e,this.initialAccumulatorValue=t,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const a=Oi.registeredVariables[t];if(null==this.accumulatedGrads[n]){const e=!1;this.accumulatedGrads[n]={originalName:"".concat(t,"/accumulator"),variable:Zi((()=>Cc(a.shape,this.initialAccumulatorValue).variable(e)))}}const r=Array.isArray(e)?e[n].tensor:e[t];if(null==r)return;const o=this.accumulatedGrads[n].variable;Zi((()=>{const e=uc(o,fc(r));o.assign(e);const t=uc(pc(dc(r,hc(uc(e,Oi.backend.epsilon()))),-this.learningRate),a);a.assign(t)}))})),this.incrementIterations()}dispose(){null!=this.accumulatedGrads&&$i(this.accumulatedGrads.map((e=>e.variable)))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e);this.accumulatedGrads=e.map((e=>({originalName:e.name,variable:e.tensor.variable(false)})))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}},class extends Sc{static get className(){return"Adam"}constructor(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=a,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],Zi((()=>{this.accBeta1=yc(t).variable(),this.accBeta2=yc(n).variable()})),null==a&&(this.epsilon=Oi.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);Zi((()=>{const n=Nc(1,this.accBeta1),a=Nc(1,this.accBeta2);t.forEach(((t,r)=>{const o=Oi.registeredVariables[t],i=!1;null==this.accumulatedFirstMoment[r]&&(this.accumulatedFirstMoment[r]={originalName:"".concat(t,"/m"),variable:Zi((()=>mc(o).variable(i)))}),null==this.accumulatedSecondMoment[r]&&(this.accumulatedSecondMoment[r]={originalName:"".concat(t,"/v"),variable:Zi((()=>mc(o).variable(i)))});const s=Array.isArray(e)?e[r].tensor:e[t];if(null==s)return;const c=this.accumulatedFirstMoment[r].variable,u=this.accumulatedSecondMoment[r].variable,l=uc(pc(c,this.beta1),pc(s,1-this.beta1)),d=uc(pc(u,this.beta2),pc(fc(s),1-this.beta2)),p=dc(l,n),h=dc(d,a);c.assign(l),u.assign(d);const f=uc(pc(dc(p,uc(hc(h),this.epsilon)),-this.learningRate),o);o.assign(f)})),this.accBeta1.assign(pc(this.accBeta1,this.beta1)),this.accBeta2.assign(pc(this.accBeta2,this.beta2))})),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&$i(this.accumulatedFirstMoment.map((e=>e.variable))),null!=this.accumulatedSecondMoment&&$i(this.accumulatedSecondMoment.map((e=>e.variable)))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e),Zi((()=>{this.accBeta1.assign(Ic(this.beta1,this.iterations_+1)),this.accBeta2.assign(Ic(this.beta2,this.iterations_+1))}));const t=e.length/2,n=!1;this.accumulatedFirstMoment=e.slice(0,t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))),this.accumulatedSecondMoment=e.slice(t,2*t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)})))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}},class extends Sc{static get className(){return"Adamax"}constructor(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=a,this.decay=r,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],Zi((()=>{this.iteration=yc(0).variable(),this.accBeta1=yc(t).variable()})),null==a&&(this.epsilon=Oi.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);Zi((()=>{const n=Nc(1,this.accBeta1),a=dc(-this.learningRate,uc(pc(this.iteration,this.decay),1));t.forEach(((t,r)=>{const o=Oi.registeredVariables[t],i=!1;null==this.accumulatedFirstMoment[r]&&(this.accumulatedFirstMoment[r]={originalName:"".concat(t,"/m"),variable:mc(o).variable(i)}),null==this.accumulatedWeightedInfNorm[r]&&(this.accumulatedWeightedInfNorm[r]={originalName:"".concat(t,"/v"),variable:mc(o).variable(i)});const s=Array.isArray(e)?e[r].tensor:e[t];if(null==s)return;const c=this.accumulatedFirstMoment[r].variable,u=this.accumulatedWeightedInfNorm[r].variable,l=uc(pc(c,this.beta1),pc(s,1-this.beta1)),d=pc(u,this.beta2),p=Tc(s),h=Ac(d,p);c.assign(l),u.assign(h);const f=uc(pc(dc(a,n),dc(l,uc(h,this.epsilon))),o);o.assign(f)})),this.iteration.assign(uc(this.iteration,1)),this.accBeta1.assign(pc(this.accBeta1,this.beta1))})),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&$i(this.accumulatedFirstMoment.map((e=>e.variable))),null!=this.accumulatedWeightedInfNorm&&$i(this.accumulatedWeightedInfNorm.map((e=>e.variable)))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}},class extends Oc{static get className(){return"Momentum"}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(e),this.learningRate=e,this.momentum=t,this.useNesterov=n,this.accumulations=[],this.m=yc(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const a=Oi.registeredVariables[t];if(null==this.accumulations[n]){const e=!1;this.accumulations[n]={originalName:"".concat(t,"/momentum"),variable:Zi((()=>mc(a).variable(e)))}}const r=this.accumulations[n].variable,o=Array.isArray(e)?e[n].tensor:e[t];null!=o&&Zi((()=>{let e;const t=uc(pc(this.m,r),o);e=this.useNesterov?uc(pc(this.c,uc(o,pc(t,this.m))),a):uc(pc(this.c,t),a),r.assign(t),a.assign(e)}))})),this.incrementIterations()}dispose(){this.m.dispose(),null!=this.accumulations&&$i(this.accumulations.map((e=>e.variable)))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e);this.accumulations=e.map((e=>({originalName:e.name,variable:e.tensor.variable(false)})))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}},class extends Sc{static get className(){return"RMSProp"}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(super(),this.learningRate=e,this.decay=t,this.momentum=n,this.epsilon=a,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=r,null==a&&(this.epsilon=Oi.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const a=Oi.registeredVariables[t],r=!1;null==this.accumulatedMeanSquares[n]&&(this.accumulatedMeanSquares[n]={originalName:"".concat(t,"/rms"),variable:Zi((()=>mc(a).variable(r)))}),null==this.accumulatedMoments[n]&&(this.accumulatedMoments[n]={originalName:"".concat(t,"/momentum"),variable:Zi((()=>mc(a).variable(r)))}),null==this.accumulatedMeanGrads[n]&&this.centered&&(this.accumulatedMeanGrads[n]={originalName:"".concat(t,"/mg"),variable:Zi((()=>mc(a).variable(r)))});const o=Array.isArray(e)?e[n].tensor:e[t];if(null==o)return;const i=this.accumulatedMeanSquares[n].variable,s=this.accumulatedMoments[n].variable;Zi((()=>{const e=uc(pc(i,this.decay),pc(fc(o),1-this.decay));if(this.centered){const t=this.accumulatedMeanGrads[n].variable,r=uc(pc(t,this.decay),pc(o,1-this.decay)),c=dc(pc(o,this.learningRate),hc(Nc(e,uc(fc(r),this.epsilon)))),u=uc(pc(s,this.momentum),c);i.assign(e),t.assign(r),s.assign(u);const l=Nc(a,u);a.assign(l)}else{const e=uc(pc(i,this.decay),pc(fc(o),1-this.decay)),t=uc(pc(s,this.momentum),dc(pc(o,this.learningRate),hc(uc(e,this.epsilon))));i.assign(e),s.assign(t);const n=Nc(a,t);a.assign(n)}}))})),this.incrementIterations()}dispose(){null!=this.accumulatedMeanSquares&&$i(this.accumulatedMeanSquares.map((e=>e.variable))),null!=this.accumulatedMeanGrads&&this.centered&&$i(this.accumulatedMeanGrads.map((e=>e.variable))),null!=this.accumulatedMoments&&$i(this.accumulatedMoments.map((e=>e.variable)))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e);const t=this.centered?e.length/3:e.length/2,n=!1;this.accumulatedMeanSquares=e.slice(0,t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))),this.accumulatedMoments=e.slice(t,2*t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))),this.centered&&(this.accumulatedMeanGrads=e.slice(2*t,3*t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}},Oc];function Dc(e){return new Promise((e=>setTimeout(e))).then(e)}class Mc{constructor(e){if(!nn().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(Mc.URL_SCHEME)&&(e=e.slice(Mc.URL_SCHEME.length)),null!=e&&0!==e.length||(e="model"),this.modelJsonFileName=e+".json",this.weightDataFileName=e+".weights.bin"}async save(e){if("undefined"===typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");const t=Yi.join(e.weightData),n=window.URL.createObjectURL(new Blob([t],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const t=gs(e,[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}]),a=window.URL.createObjectURL(new Blob([JSON.stringify(t)],{type:"application/json"})),r=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor;if(r.download=this.modelJsonFileName,r.href=a,await Dc((()=>r.dispatchEvent(new MouseEvent("click")))),null!=e.weightData){const e=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor;e.download=this.weightDataFileName,e.href=n,await Dc((()=>e.dispatchEvent(new MouseEvent("click"))))}return{modelArtifactsInfo:xs(e)}}}}Mc.URL_SCHEME="downloads://";class Pc{constructor(e){if(null==e||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, "+"but received ".concat(e));this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise(((e,t)=>{const n=new FileReader;n.onload=n=>{const a=JSON.parse(n.target.result),r=a.modelTopology;if(null==r)return void t(new Error("modelTopology field is missing from file ".concat(this.jsonFile.name)));if(null==a.weightsManifest)return void t(new Error("weightManifest field is missing from file ".concat(this.jsonFile.name)));if(0===this.weightsFiles.length)return void e({modelTopology:r});const o=bs(a,(e=>this.loadWeights(e)));e(o)},n.onerror=e=>t("Failed to read model topology and weights manifest JSON "+"from file '".concat(this.jsonFile.name,"'. BrowserFiles supports loading ")+"Keras-style tf.Model artifacts only."),n.readAsText(this.jsonFile)}))}loadWeights(e){const t=[],n=[];for(const o of e)t.push(...o.weights),n.push(...o.paths);const a=this.checkManifestAndWeightFiles(e),r=n.map((e=>this.loadWeightsFile(e,a[e])));return Promise.all(r).then((e=>[t,e]))}loadWeightsFile(e,t){return new Promise(((n,a)=>{const r=new FileReader;r.onload=e=>{const t=e.target.result;n(t)},r.onerror=t=>a("Failed to weights data from file of path '".concat(e,"'.")),r.readAsArrayBuffer(t)}))}checkManifestAndWeightFiles(e){const t=[],n=this.weightsFiles.map((e=>ms(e.name))),a={};for(const r of e)r.paths.forEach((e=>{const r=ms(e);if(-1!==t.indexOf(r))throw new Error("Duplicate file basename found in weights manifest: "+"'".concat(r,"'"));if(t.push(r),-1===n.indexOf(r))throw new Error("Weight file with basename '".concat(r,"' is not provided."));a[e]=this.weightsFiles[n.indexOf(r)]}));if(t.length!==this.weightsFiles.length)throw new Error("Mismatch in the number of files in weights manifest "+"(".concat(t.length,") and the number of weight files provided ")+"(".concat(this.weightsFiles.length,")."));return a}}function Lc(e){return new Pc(e)}function zc(e,t,n,a){!function(e){kt(null!=e&&Array.isArray(e)&&e.length>0,(()=>"promises must be a none empty array"))}(e),function(e,t){kt(e>=0&&e<=1,(()=>"Progress fraction must be in range [0, 1], but "+"got startFraction ".concat(e))),kt(t>=0&&t<=1,(()=>"Progress fraction must be in range [0, 1], but "+"got endFraction ".concat(t))),kt(t>=e,(()=>"startFraction must be no more than endFraction, but "+"got startFraction ".concat(e," and endFraction ")+"".concat(t)))}(n=null==n?0:n,a=null==a?1:a);let r=0;return Promise.all(e.map((o=>(o.then((o=>{const i=n+ ++r/e.length*(a-n);return t(i),o})),o))))}async function Bc(e,t){null==t&&(t={});const n=null==t.fetchFunc?nn().platform.fetch:t.fetchFunc,a=e.map((e=>n(e,t.requestInit,{isBinary:!0}))),r=(null==t.onProgress?await Promise.all(a):await zc(a,t.onProgress,0,.5)).map((e=>e.arrayBuffer()));return null==t.onProgress?await Promise.all(r):await zc(r,t.onProgress,.5,1)}async function Wc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;return Uc((e=>Bc(e,{requestInit:a})))(e,t,n)}function Uc(e){return async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2?arguments[2]:void 0;const r=t.map((()=>!1)),o={},i=null!=a?a.map((()=>!1)):[],s=[];if(t.forEach(((e,t)=>{let n=0;e.weights.forEach((e=>{const c="quantization"in e?e.quantization.dtype:e.dtype,u=Xi[c]*It(e.shape),l=()=>{r[t]=!0,null==o[t]&&(o[t]=[]),o[t].push({manifestEntry:e,groupOffset:n,sizeBytes:u})};null!=a?a.forEach(((t,n)=>{t===e.name&&(l(),i[n]=!0)})):l(),s.push(e.name),n+=u}))})),!i.every((e=>e))){const e=a.filter(((e,t)=>!i[t]));throw new Error("Could not find weights in manifest with names: "+"".concat(e.join(", "),". \n")+"Manifest JSON has weights with names: "+"".concat(s.join(", "),"."))}const c=r.reduce(((e,t,n)=>(t&&e.push(n),e)),[]),u=[];c.forEach((e=>{t[e].paths.forEach((e=>{const t=n+(n.endsWith("/")?"":"/")+e;u.push(t)}))}));const l=await e(u),d={};let p=0;return c.forEach((e=>{const n=t[e].paths.length,a=new Yi(l.slice(p,p+n));o[e].forEach((e=>{const t=os(a.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(const n in t)d[n]=t[n]})),p+=n})),d}}ws.registerSaveRouter((e=>nn().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Mc.URL_SCHEME)?function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"model";return new Mc(e)}(e.slice(Mc.URL_SCHEME.length)):null));class Vc{constructor(e,t){if(this.DEFAULT_METHOD="POST",null==t&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.weightUrlConverter=t.weightUrlConverter,null!=t.fetchFunc?(kt("function"===typeof t.fetchFunc,(()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)")),this.fetch=t.fetchFunc):this.fetch=nn().platform.fetch,kt(null!=e&&e.length>0,(()=>"URL path for http must not be null, undefined or empty.")),Array.isArray(e)&&kt(2===e.length,(()=>"URL paths for http must have a length of 2, "+"(actual length is ".concat(e.length,")."))),this.path=e,null!=t.requestInit&&null!=t.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{},this.loadOptions=t}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);t.body=new FormData;const n=gs(e,[{paths:["./model.weights.bin"],weights:e.weightSpecs}]);if(t.body.append("model.json",new Blob([JSON.stringify(n)],{type:"application/json"}),"model.json"),null!=e.weightData){const n=Yi.join(e.weightData);t.body.append("model.weights.bin",new Blob([n],{type:"application/octet-stream"}),"model.weights.bin")}const a=await this.fetch(this.path,t);if(a.ok)return{modelArtifactsInfo:xs(e),responses:[a]};throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+"".concat(a.status,"."))}async loadModelJSON(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error("Request to ".concat(this.path," failed with status code ")+"".concat(e.status,". Please verify this URL points to ")+"the model JSON of the model to load.");let t;try{t=await e.json()}catch(jj){let t="Failed to parse model JSON of response from ".concat(this.path,".");throw this.path.endsWith(".pb")?t+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":t+=" Please make sure the server is serving valid JSON for this request.",new Error(t)}const n=t.modelTopology,a=t.weightsManifest;if(null==n&&null==a)throw new Error("The JSON from HTTP path ".concat(this.path," contains neither model ")+"topology or manifest for weights.");return t}async load(){if(this.loadOptions.streamWeights)return this.loadStream();return bs(await this.loadModelJSON(),(e=>this.loadWeights(e)))}async loadStream(){const e=await this.loadModelJSON(),t=await this.getWeightUrls(e.weightsManifest),n=vs(e.weightsManifest);return Object.assign(Object.assign({},e),{weightSpecs:n,getWeightStream:()=>function(e,t){var n;const a=null==t.fetchFunc?nn().platform.fetch:t.fetchFunc;let r,o=0;return null===(n=t.onProgress)||void 0===n||n.call(t,0),new ReadableStream({pull:async n=>{for(var i;o<e.length;){if(!r){const n=(await a(e[o],t.requestInit,{isBinary:!0})).body;r=n.getReader()}const{done:s,value:c}=await r.read();if(!s)return void n.enqueue(c);o++,r=void 0,null===(i=t.onProgress)||void 0===i||i.call(t,o/e.length)}n.close()}})}(t,this.loadOptions)})}async getWeightUrls(e){const t=Array.isArray(this.path)?this.path[1]:this.path,[n,a]=function(e){const t=e.lastIndexOf("/"),n=e.lastIndexOf("?"),a=e.substring(0,t),r=n>t?e.substring(n):"";return[a+"/",r]}(t),r=this.weightPathPrefix||n,o=[],i=[];for(const s of e)for(const e of s.paths)null!=this.weightUrlConverter?i.push(this.weightUrlConverter(e)):o.push(r+e+a);return this.weightUrlConverter&&o.push(...await Promise.all(i)),o}async loadWeights(e){const t=await this.getWeightUrls(e);return[vs(e),await Bc(t,this.loadOptions)]}}function Gc(e){return null!=e.match(Vc.URL_SCHEME_REGEX)}Vc.URL_SCHEME_REGEX=/^https?:\/\//;const Hc=(e,t)=>{if("undefined"===typeof fetch&&(null==t||null==t.fetchFunc))return null;{let n=!0;if(n=Array.isArray(e)?e.every((e=>Gc(e))):Gc(e),n)return jc(e,t)}return null};function jc(e,t){return new Vc(e,t)}function Kc(e,t){return jc(e,t)}ws.registerSaveRouter(Hc),ws.registerLoadRouter(Hc);class qc{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}}class Xc{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}}class Yc{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=t=>Promise.resolve(e.save(t)))}}function Qc(e,t,n,a){return new Yc(Zc(...arguments))}function Zc(e,t,n,a){if(1===arguments.length){return null!=e.modelTopology||null!=e.weightSpecs?new qc(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new qc({modelTopology:e}))}return console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new qc({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:a})}function $c(e){return new Xc(e)}function Jc(e){return new Xc(e)}function eu(e,t,n){if(Ct(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");const a=zi(e,n);if(3!==a.length&&1!==a.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===a.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Ki(e,t,a,n)}let tu,nu=!1;function au(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,a=!1,r=!1,o=!1,i=!1,s=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!==typeof ImageData&&e instanceof ImageData)a=!0;else if("undefined"!==typeof HTMLVideoElement&&e instanceof HTMLVideoElement)r=!0;else if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement)o=!0;else if(null!=e.getContext)i=!0;else{if(!("undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, "+"but was ".concat(e.constructor.name));s=!0}if(null!=Co(mo,Oi.backendName)){const n={pixels:e},a={numChannels:t};return Oi.runKernel(mo,n,a)}const[c,u]=r?[e.videoWidth,e.videoHeight]:[e.width,e.height];let l,d;if(i)l=e.getContext("2d").getImageData(0,0,c,u).data;else if(a||n)l=e.data;else if(o||r||s){if(null==tu)if("undefined"===typeof document){if("undefined"===typeof OffscreenCanvas||"undefined"===typeof OffscreenCanvasRenderingContext2D)throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");tu=new OffscreenCanvas(1,1).getContext("2d")}else tu=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});tu.canvas.width=c,tu.canvas.height=u,tu.drawImage(e,0,0,c,u),l=tu.getImageData(0,0,c,u).data}if(4===t)d=new Int32Array(l);else{const e=c*u;d=new Int32Array(e*t);for(let n=0;n<e;n++)for(let e=0;e<t;++e)d[n*t+e]=l[4*n+e]}return eu(d,[u,c,t],"int32")}function ru(e){if(2!==e.rank&&3!==e.rank)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank ".concat(e.rank,"."));const t=2===e.rank?1:e.shape[2];if(t>4||2===t)throw new Error("toPixels only supports depth of size "+"1, 3 or 4 but got ".concat(t));if("float32"!==e.dtype&&"int32"!==e.dtype)throw new Error("Unsupported type for toPixels: ".concat(e.dtype,".")+" Please use float32 or int32 tensors.")}async function ou(e,t){let n=Ui(e,"img","toPixels");if(!(e instanceof pi)){const e=n;n=ic(e,"int32"),e.dispose()}ru(n);const[a,r]=n.shape.slice(0,2),o=2===n.rank?1:n.shape[2],i=await n.data(),s="float32"===n.dtype?255:1,c=new Uint8ClampedArray(r*a*4);for(let u=0;u<a*r;++u){const e=[0,0,0,255];for(let a=0;a<o;a++){const t=i[u*o+a];if("float32"===n.dtype){if(t<0||t>1)throw new Error("Tensor values for a float32 Tensor must be in the "+"range [0 - 1] but encountered ".concat(t,"."))}else if("int32"===n.dtype&&(t<0||t>255))throw new Error("Tensor values for a int32 Tensor must be in the "+"range [0 - 255] but encountered ".concat(t,"."));1===o?(e[0]=t*s,e[1]=t*s,e[2]=t*s):e[a]=t*s}const t=4*u;c[t+0]=Math.round(e[0]),c[t+1]=Math.round(e[1]),c[t+2]=Math.round(e[2]),c[t+3]=Math.round(e[3])}if(null!=t){if(!nu){null!=Co(aa,Oi.backendName)&&(console.warn("tf.browser.toPixels is not efficient to draw tensor on canvas. Please try tf.browser.draw instead."),nu=!0)}t.width=r,t.height=a;const e=t.getContext("2d"),n=new ImageData(c,r,a);e.putImageData(n,0,0)}return n!==e&&n.dispose(),c}const iu=Hi({fromPixels_:au});function su(e,t){const n=e.shape.length,a=t.shape.length;if(n<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher,"+" but the rank was ".concat(n,"."));if(a<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(a,"."));if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type,"+" but the dtype was ".concat(t.dtype,"."));if(t.shape[a-1]>n)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+"".concat(t.shape[a-1]," vs. ").concat(n));if(0===It(e.shape))throw new Error("Requested more than 0 entries, but input is empty."+" Input shape: ".concat(e.shape,"."));const r=t.shape,o=r[r.length-1];let i=1;for(let d=0;d<r.length-1;++d)i*=r[d];const s=e.shape,c=r.slice();c.pop();let u=1;for(let d=o;d<n;++d)u*=s[d],c.push(s[d]);const l=[...Gt(e.shape).map((e=>e/u)),1].slice(0,o);return[c,i,u,l]}function cu(e,t,n){const a=t.rank>1?t.shape[t.rank-1]:1,r=t.rank>1?t.rank-1:1,o="Must have updates.shape = indices.shape[:batchDim] + "+"shape[sliceDim:], got updates.shape: ".concat(n.shape)+", indices.shape: ".concat(t.shape,", shape: ").concat(e)+", sliceDim: ".concat(a,", and batchDim: ").concat(r,".");if(n.rank<r)throw new Error(o+" update.rank < ".concat(r,". "));if(e.length<a+(n.rank-r))throw new Error(o+" Output shape length < ".concat(a+(n.rank-r)));if(n.rank!==r+e.length-a)throw new Error(o+" update.rank != ".concat(r+e.length-a));for(let i=0;i<r;++i)if(n.shape[i]!==t.shape[i])throw new Error(o+" updates.shape[".concat(i,"] (").concat(n.shape[i],") != indices.shape[").concat(i,"] (").concat(t.shape[i],")."));for(let i=0;i<n.rank-r;++i)if(n.shape[i+r]!==e[i+a])throw new Error(o+" updates.shape[".concat(i+r,"] (").concat(n.shape[i+r],") != shape[").concat(i+r,"] (").concat(e[i+r],")"))}function uu(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(t.rank,"."));if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher,"+" but the rank was ".concat(e.rank,"."));if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: ".concat(t.dtype));if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: ".concat(n));if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: ".concat(t.shape));if(0===e.size)throw new Error("Updates specified for empty output. updates shape: ".concat(e.shape))}cu(n,t,e)}function lu(e,t,n){const a=t.shape.length,r=a>1?t.shape[a-1]:1,o=n.length;let i=1;for(let c=r;c<o;++c)i*=n[c];const s=r<1?1:r;return{sliceRank:r,numUpdates:It(t.shape)/s,sliceSize:i,strides:[...Gt(n.slice(0,r)),1],outputSize:It(n)}}const du=-2,pu=-1;function hu(e,t,n){const a=e.shape.length;kt(a===t.length,(()=>"Error in slice".concat(a,"D: Length of begin ").concat(t," must ")+"match the rank of the array (".concat(a,")."))),kt(a===n.length,(()=>"Error in slice".concat(a,"D: Length of size ").concat(n," must ")+"match the rank of the array (".concat(a,").")));for(let r=0;r<a;++r)kt(t[r]+n[r]<=e.shape[r],(()=>"Error in slice".concat(a,"D: begin[").concat(r,"] + size[").concat(r,"] ")+"(".concat(t[r]+n[r],") would overflow input.shape[").concat(r,"] (").concat(e.shape[r],")")))}function fu(e){const t=[];let n=0;for(;e>0;)1&e&&t.push(n),e/=2,n++;return t}function mu(e,t,n){const a=[];for(let r=0;r<e.length;r++)a[r]=Math.ceil((t[r]-e[r])/n[r]);return a}function gu(e,t,n,a){const r=[...e];for(let o=r.length;o<a.length;o++)r.push(1);for(let o=0;o<n;o++)0===o?r[t]=1:(r.splice(t,0,1),r.pop());return r}function yu(e,t,n){return n<=e?n:n-(t-1)}function bu(e,t){const n=[];for(let a=0;a<e;a++)n.push(t+a);return n}function xu(e,t,n,a,r,o,i,s,c){const u=e.length;let l=new Array(u),d=new Array(u),p=new Array(u);if(t.length&&n>0){const c=t[0],u=n+1;l=vu(i,c,u,a,e),d=wu(s,c,u,r,e),p=gu(o,c,u,e)}else for(let h=0;h<u;h++)l[h]=Su(i,a,o,e,h,c),d[h]=Cu(s,r,o,e,h,c),p[h]=ku(o,h,c);return{begin:l,end:d,strides:p}}function vu(e,t,n,a,r){const o=[...r],i=bu(n,t);for(let s=0;s<o.length;s++)if(i.indexOf(s)>-1)o[s]=0;else{const r=yu(t,n,s);let i=a[r];e&1<<r&&(i=0),o[s]=i}return o}function wu(e,t,n,a,r){const o=[...r],i=bu(n,t);for(let s=0;s<o.length;s++)if(i.indexOf(s)>-1)o[s]=Number.MAX_SAFE_INTEGER;else{const r=yu(t,n,s);let i=a[r];e&1<<r&&(i=Number.MAX_SAFE_INTEGER),o[s]=i}for(let s=0;s<o.length;s++){const e=r[s];o[s]<0&&(o[s]+=e),o[s]=bt(0,o[s],r[s])}return o}function ku(e,t,n){let a=e[t];return(n&1<<t||null==a)&&(a=1),a}function Su(e,t,n,a,r,o){let i=t[r];const s=n[r]||1;(e&1<<r||o&1<<r||null==i)&&(i=s>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);const c=a[r];return i<0&&(i+=c),i=bt(0,i,c-1),i}function Cu(e,t,n,a,r,o){let i=t[r];const s=n[r]||1;(e&1<<r||o&1<<r||null==i)&&(i=s>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);const c=a[r];return i<0&&(i+=c),i=s>0?bt(0,i,c):bt(-1,i,c-1),i}function Iu(e,t,n){let a=n.length;for(let r=0;r<n.length;r++)if(n[r]>1){a=r;break}for(let r=a+1;r<n.length;r++)if(t[r]>0||n[r]!==e[r])return!1;return!0}function Nu(e,t){let n=e.length>0?e[e.length-1]:1;for(let a=0;a<e.length-1;a++)n+=e[a]*t[a];return n}function Tu(e,t,n){let a;const r=e.shape.length;let o;return a="number"===typeof t?[t,...new Array(r-1).fill(0)]:t.length<r?t.concat(new Array(r-t.length).fill(0)):t.slice(),a.forEach((e=>{kt(-1!==e,(()=>"slice() does not support negative begin indexing."))})),o=null==n?new Array(r).fill(-1):"number"===typeof n?[n,...new Array(r-1).fill(-1)]:n.length<r?n.concat(new Array(r-n.length).fill(-1)):n,o=o.map(((t,n)=>t>=0?t:(kt(-1===t,(()=>"Negative size values should be exactly -1 but got "+"".concat(t," for the slice() size at index ").concat(n,"."))),e.shape[n]-a[n]))),[a,o]}function _u(e,t,n,a,r,o,i,s,c){let u;if(null==a?(u=new Array(t.length),u.fill(1)):u=a,null!=i&&0!==(i&i-1))throw new Error("Multiple ellipses in slice is not allowed.");let l=!1;const d={dims:u.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:u.slice(),beginMask:r,endMask:o,ellipsisMask:i,newAxisMask:s,shrinkAxisMask:c};for(let b=0;b<d.dims;b++)l&&0!==(1<<b&s)&&d.numAddAxisAfterEllipsis++,1<<b&i&&(l=!0);l||(d.ellipsisMask|=1<<d.dims,d.dims++);const p={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;let n=0;t.beginValid=null!=e.begin,t.endValid=null!=e.end,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(let a=0;a<e.dims;a++)if(1<<a&e.ellipsisMask){const r=Math.min(t.dims-(e.dims-a)+1+e.numAddAxisAfterEllipsis,t.dims);for(;n<r;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=a}else if(1<<a&e.newAxisMask)t.finalShapeGatherIndices.push(du),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error("Index out of range using input dim ".concat(n,"; input ")+"has only ".concat(t.dims," dims, ").concat(t.begin.length,"."));null!=e.begin&&(t.begin[n]=e.begin[a]),null!=e.end&&(t.end[n]=e.end[a]),t.strides[n]=e.strides[a],e.beginMask&1<<a&&(t.beginMask|=1<<n),e.endMask&1<<a&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<a?(t.finalShapeGatherIndices.push(pu),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(a)),t.inputShapeGatherIndicesSparse[n]=a,n++}}(d,p);let h=!0,f=!0,m=!0;const g=[],y=[];for(let b=0;b<e.length;++b){if(0===p.strides[b])throw Error("strides[".concat(b,"] must be non-zero"));const t=!!(p.shrinkAxisMask&1<<b),n=e[b];if(-1===n){g.push(t?1:-1);continue}const a=[p.beginMask&1<<b,p.endMask&1<<b],r=[p.strides[b]>0?0:-1,p.strides[b]>0?n:n-1];if(t&&p.strides[b]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&1===p.strides[b];const o=!!(p.beginMask&1<<b&&p.endMask&1<<b);if(p.beginValid&&p.endValid){if(t){const e=p.begin[b]<0?n+p.begin[b]:p.begin[b];if(p.begin[b]=e,p.end[b]=p.begin[b]+1,e<0||e>=n)throw Error("slice index ".concat(p.begin[b]," of dimension ").concat(b," out of bounds."))}else p.begin[b]=Eu(p.begin[b],0,p.strides[b],n,a,r),p.end[b]=Eu(p.end[b],1,p.strides[b],n,a,r);const e=1===p.strides[b]&&0===p.begin[b]&&p.end[b]===n;h=h&&e,f=f&&(0===b&&1===p.strides[b]||e)}else h=h&&1===p.strides[b]&&o,f=f&&(0===b&&1===p.strides[b]||o);let i,s=!1;if(p.beginValid&&p.endValid?(i=p.end[b]-p.begin[b],s=!0):t?(i=1,s=!0):o&&n>=0&&(i=p.strides[b]<0?-n:n,s=!0),s){let e;e=0===i||i<0!==p.strides[b]<0?0:Math.trunc(i/p.strides[b])+(i%p.strides[b]!==0?1:0),g.push(e)}else g.push(-1)}for(let b=0;b<p.finalShapeGatherIndices.length;++b){const e=p.finalShapeGatherIndices[b];e>=0?y.push(g[e]):e===du&&y.push(1)}return{finalShapeSparse:y.filter(((e,t)=>p.finalShapeGatherIndices[t]!==du)),finalShape:y,isIdentity:h,sliceDim0:f,isSimpleSlice:m,begin:p.begin,end:p.end,strides:p.strides}}function Eu(e,t,n,a,r,o){if(r[t])return n>0?o[t]:o[t+1&1];{const t=e<0?a+e:e;return t<o[0]?o[0]:t>o[1]?o[1]:t}}const Ru=Hi({acos_:function(e){const t={x:Ui(e,"x","acos")};return Oi.runKernel(un,t)}});const Au=Hi({acosh_:function(e){const t={x:Ui(e,"x","acosh")};return Oi.runKernel(ln,t)}});const Ou=Hi({addN_:function(e){kt(Array.isArray(e),(()=>"The argument passed to tf.addN() must be a list of tensors")),kt(e.length>=1,(()=>"Must pass at least one tensor to tf.addN(), but got "+"".concat(e.length)));const t=e.map(((e,t)=>Ui(e,"tensors".concat(t),"addN"))),n=t[0];t.forEach((e=>{if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),t.forEach((e=>{if(!Tt(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));const a=t;return Oi.runKernel(pn,a)}});const Fu=Hi({all_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const a={x:Ui(e,"x","all","bool")},r={axis:t,keepDims:n};return Oi.runKernel(hn,a,r)}});const Du=Hi({any_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const a={x:Ui(e,"x","any","bool")},r={axis:t,keepDims:n};return Oi.runKernel(fn,a,r)}});const Mu=Hi({argMax_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n={x:Ui(e,"x","argMax")},a={axis:t};return Oi.runKernel(mn,n,a)}});const Pu=Hi({argMin_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n={x:Ui(e,"x","argMin")},a={axis:t};return Oi.runKernel(gn,n,a)}});const Lu=Hi({asin_:function(e){const t={x:Ui(e,"x","asin")};return Oi.runKernel(yn,t)}});const zu=Hi({asinh_:function(e){const t={x:Ui(e,"x","asinh")};return Oi.runKernel(bn,t)}});const Bu=Hi({atan_:function(e){const t={x:Ui(e,"x","atan")};return Oi.runKernel(xn,t)}});const Wu=Hi({atan2_:function(e,t){let n=Ui(e,"a","atan2"),a=Ui(t,"b","atan2");[n,a]=Ii(n,a);const r={a:n,b:a};return Oi.runKernel(wn,r)}});const Uu=Hi({atanh_:function(e){const t={x:Ui(e,"x","atanh")};return Oi.runKernel(vn,t)}});function Vu(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",o=arguments.length>5?arguments[5]:void 0;return ju(e,[...t,e[3]],n,o,a,null,null,tl(r))}function Gu(e,t,n,a,r,o){let i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast";const[s,c]=Xu(t);let u;if("channelsLast"===i)u=[s,c,e[3],e[3]];else{if("channelsFirst"!==i)throw new Error("Unknown dataFormat ".concat(i));u=[s,c,e[1],e[1]]}return ju(e,u,n,a,r,o,!1,i)}function Hu(e,t,n,a,r,o){let i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NDHWC";const[s,c,u]=Yu(t);let l,d;if("NDHWC"===i)d="channelsLast",l=[s,c,u,e[4],e[4]];else{if("NCDHW"!==i)throw new Error("Unknown dataFormat ".concat(i));d="channelsFirst",l=[s,c,u,e[1],e[1]]}return Ku(e,l,n,a,r,!1,d,o)}function ju(e,t,n,a,r,o){let i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"channelsLast",[c,u,l,d]=[-1,-1,-1,-1];if("channelsLast"===s)[c,u,l,d]=e;else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));[c,d,u,l]=e}const[p,h,,f]=t,[m,g]=Xu(n),[y,b]=Xu(a),x=Qu(p,y),v=Qu(h,b),{padInfo:w,outHeight:k,outWidth:S}=function(e,t,n,a,r,o,i,s,c){let u,l,d;if("number"===typeof e){u={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};const r=function(e,t,n,a,r){null==a&&(a=qu(e,t,n));const o=e[0],i=e[1],s=Zu((o-t+2*a)/n+1,r),c=Zu((i-t+2*a)/n+1,r);return[s,c]}([t,n],o,a,e,s);l=r[0],d=r[1]}else if("same"===e){l=Math.ceil(t/a),d=Math.ceil(n/r);const e=Math.max(0,(l-1)*a+o-t),s=Math.max(0,(d-1)*r+i-n),c=Math.floor(e/2),p=e-c,h=Math.floor(s/2);u={top:c,bottom:p,left:h,right:s-h,type:"SAME"}}else if("valid"===e)u={top:0,bottom:0,left:0,right:0,type:"VALID"},l=Math.ceil((t-o+1)/a),d=Math.ceil((n-i+1)/r);else{if("object"!==typeof e)throw Error("Unknown padding parameter: ".concat(e));{const p="channelsLast"===c?e[1][0]:e[2][0],h="channelsLast"===c?e[1][1]:e[2][1],f="channelsLast"===c?e[2][0]:e[3][0],m="channelsLast"===c?e[2][1]:e[3][1];u={top:p,bottom:h,left:f,right:m,type:0===p&&0===h&&0===f&&0===m?"VALID":"EXPLICIT"},l=Zu((t-o+p+h)/a+1,s),d=Zu((n-i+f+m)/r+1,s)}}return{padInfo:u,outHeight:l,outWidth:d}}(r,u,l,m,g,x,v,o,s),C=i?f*d:f;let I;return"channelsFirst"===s?I=[c,C,k,S]:"channelsLast"===s&&(I=[c,k,S,C]),{batchSize:c,dataFormat:s,inHeight:u,inWidth:l,inChannels:d,outHeight:k,outWidth:S,outChannels:C,padInfo:w,strideHeight:m,strideWidth:g,filterHeight:p,filterWidth:h,effectiveFilterHeight:x,effectiveFilterWidth:v,dilationHeight:y,dilationWidth:b,inShape:e,outShape:I,filterShape:t}}function Ku(e,t,n,a,r){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",s=arguments.length>7?arguments[7]:void 0,[c,u,l,d,p]=[-1,-1,-1,-1,-1];if("channelsLast"===i)[c,u,l,d,p]=e;else{if("channelsFirst"!==i)throw new Error("Unknown dataFormat ".concat(i));[c,p,u,l,d]=e}const[h,f,m,,g]=t,[y,b,x]=Yu(n),[v,w,k]=Yu(a),S=Qu(h,v),C=Qu(f,w),I=Qu(m,k),{padInfo:N,outDepth:T,outHeight:_,outWidth:E}=function(e,t,n,a,r,o,i,s,c,u,l){let d,p,h,f;"valid"===e&&(e=0);if("number"===typeof e){d={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};const m=function(e,t,n,a,r,o){null==r&&(r=qu(e,t[0],a[0]));const i=[0,0,0,n];for(let s=0;s<3;s++)e[s]+2*r>=t[s]&&(i[s]=Zu((e[s]-t[s]+2*r)/a[s]+1,o));return i}([t,n,a,1],[s,c,u],1,[r,o,i],e,l);p=m[0],h=m[1],f=m[2]}else{if("same"!==e)throw Error("Unknown padding parameter: ".concat(e));{p=Math.ceil(t/r),h=Math.ceil(n/o),f=Math.ceil(a/i);const e=(p-1)*r+s-t,l=(h-1)*o+c-n,m=(f-1)*i+u-a,g=Math.floor(e/2),y=e-g,b=Math.floor(l/2),x=l-b,v=Math.floor(m/2);d={top:b,bottom:x,left:v,right:m-v,front:g,back:y,type:"SAME"}}}return{padInfo:d,outDepth:p,outHeight:h,outWidth:f}}(r,u,l,d,y,b,x,S,C,I,s),R=o?g*p:g;let A;return"channelsFirst"===i?A=[c,R,T,_,E]:"channelsLast"===i&&(A=[c,T,_,E,R]),{batchSize:c,dataFormat:i,inDepth:u,inHeight:l,inWidth:d,inChannels:p,outDepth:T,outHeight:_,outWidth:E,outChannels:R,padInfo:N,strideDepth:y,strideHeight:b,strideWidth:x,filterDepth:h,filterHeight:f,filterWidth:m,effectiveFilterDepth:S,effectiveFilterHeight:C,effectiveFilterWidth:I,dilationDepth:v,dilationHeight:w,dilationWidth:k,inShape:e,outShape:A,filterShape:t}}function qu(e,t,n){const a=Qu(t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:1);return Math.floor((e[0]*(n-1)-n+a)/2)}function Xu(e){return"number"===typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function Yu(e){return"number"===typeof e?[e,e,e]:e}function Qu(e,t){return t<=1?e:e+(e-1)*(t-1)}function Zu(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode ".concat(t))}}function $u(e){const[t,n,a]=Xu(e);return 1===t&&1===n&&1===a}function Ju(e,t){return $u(e)||$u(t)}function el(e){return Xu(e).every((e=>e>0))}function tl(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat ".concat(e))}function nl(e,t,n){if(null!=n){if("string"===typeof t)throw Error("Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,"."));if("number"===typeof t)kt(_t(t),(()=>"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,".")));else{if("object"!==typeof t)throw Error("Error in ".concat(e,": Unknown padding parameter: ").concat(t));t.forEach((t=>{t.forEach((t=>{kt(_t(t),(()=>"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,".")))}))}))}}}const al=Hi({reshape_:function(e,t){const n={x:Ui(e,"x","reshape","string_or_numeric")},a={shape:t};return Oi.runKernel(xr,n,a)}});const rl=Hi({avgPool_:function(e,t,n,a,r){const o=Ui(e,"x","avgPool","float32");kt(Ju(n,1),(()=>"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")));let i=o,s=!1;3===o.rank&&(s=!0,i=al(o,[1,o.shape[0],o.shape[1],o.shape[2]])),kt(4===i.rank,(()=>"Error in avgPool: x must be rank 4 but got rank ".concat(i.rank,"."))),nl("avgPool",a,r);const c={x:i},u={filterSize:t,strides:n,pad:a,dimRoundingMode:r};let l=Oi.runKernel(kn,c,u);return l=ic(l,o.dtype),s?al(l,[l.shape[1],l.shape[2],l.shape[3]]):l}});const ol=Hi({avgPool3d_:function(e,t,n,a,r){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC";const i=Ui(e,"x","avgPool3d","float32");let s=i,c=!1;4===i.rank&&(c=!0,s=al(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),kt(5===s.rank,(()=>"Error in avgPool3d: x must be rank 5 but got rank ".concat(s.rank,"."))),kt("NDHWC"===o,(()=>"Error in avgPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(o))),kt("number"===typeof n&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,(()=>"Error in avgPool3d: Stride must be > 0, but got '".concat(n,"'"))),nl("avgPool3d",a,r);const u={x:s},l={filterSize:t,strides:n,pad:a,dimRoundingMode:r,dataFormat:o};let d=Oi.runKernel(Cn,u,l);return d=ic(d,s.dtype),c?al(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});const il=Hi({concat_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;kt(e.length>=1,(()=>"Pass at least one tensor to concat"));const n=Vi(e,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach((e=>{if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype ".concat(e.dtype,". "))})),1===n.length)return sc(n[0]);const a=n,r={axis:t};return Oi.runKernel(Pn,a,r)}});const sl=Hi({matMul_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=Ui(e,"a","matMul"),o=Ui(t,"b","matMul");[r,o]=Ii(r,o);const i={a:r,b:o},s={transposeA:n,transposeB:a};return Oi.runKernel(Nn,i,s)}});const cl=Hi({sigmoid_:function(e){const t={x:Ui(e,"x","sigmoid","float32")};return Oi.runKernel(Lr,t)}});const ul=Hi({slice_:function(e,t,n){const a=Ui(e,"x","slice","string_or_numeric");if(0===a.rank)throw new Error("Slicing scalar is not possible");const r={x:a},o={begin:t,size:n};return Oi.runKernel(Fr,r,o)}});const ll=Hi({tanh_:function(e){const t={x:Ui(e,"x","tanh","float32")};return Oi.runKernel(ro,t)}});const dl=Hi({basicLSTMCell_:function(e,t,n,a,r,o){const i=Ui(e,"forgetBias","basicLSTMCell"),s=Ui(t,"lstmKernel","basicLSTMCell"),c=Ui(n,"lstmBias","basicLSTMCell"),u=Ui(a,"data","basicLSTMCell"),l=Ui(r,"c","basicLSTMCell"),d=Ui(o,"h","basicLSTMCell"),p=il([u,d],1),h=sl(p,s),f=uc(h,c),m=f.shape[0],g=f.shape[1]/4,y=[m,g],b=ul(f,[0,0],y),x=ul(f,[0,g],y),v=ul(f,[0,2*g],y),w=ul(f,[0,3*g],y),k=uc(pc(cl(b),ll(x)),pc(l,cl(uc(i,v))));return[k,pc(ll(k),cl(w))]}});const pl=Hi({batchToSpaceND_:function(e,t,n){const a=Ui(e,"x","batchToSpaceND"),r=t.reduce(((e,t)=>e*t));kt(a.rank>=1+t.length,(()=>"input rank is ".concat(a.rank," but should be > than blockShape.length ").concat(t.length))),kt(n.length===t.length,(()=>"crops.length is ".concat(n.length," but should be equal to blockShape.length  ").concat(t.length))),kt(a.shape[0]%r===0,(()=>"input tensor batch is ".concat(a.shape[0]," but is not divisible by the product of ")+"the elements of blockShape ".concat(t.join(" * ")," === ").concat(r)));const o={x:a},i={blockShape:t,crops:n};return Oi.runKernel(Tn,o,i)}});const hl=Hi({batchNorm_:function(e,t,n,a,r,o){null==o&&(o=.001);const i=Ui(e,"x","batchNorm"),s=Ui(t,"mean","batchNorm"),c=Ui(n,"variance","batchNorm");let u,l;null!=r&&(u=Ui(r,"scale","batchNorm")),null!=a&&(l=Ui(a,"offset","batchNorm")),kt(s.rank===c.rank,(()=>"Batch normalization gradient requires mean and variance to have equal ranks.")),kt(null==l||s.rank===l.rank,(()=>"Batch normalization gradient requires mean and offset to have equal ranks.")),kt(null==u||s.rank===u.rank,(()=>"Batch normalization gradient requires mean and scale to have equal ranks."));const d={x:function(e){let t;return t=0===e.rank||1===e.rank?al(e,[1,1,1,e.size]):2===e.rank?al(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?al(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e,t}(i),scale:u,offset:l,mean:s,variance:c},p={varianceEpsilon:o},h=Oi.runKernel(ba,d,p);return al(h,i.shape)}});const fl=Hi({batchNorm2d_:function(e,t,n,a,r,o){const i=Ui(e,"x","batchNorm"),s=Ui(t,"mean","batchNorm"),c=Ui(n,"variance","batchNorm");let u,l;return null!=r&&(u=Ui(r,"scale","batchNorm")),null!=a&&(l=Ui(a,"offset","batchNorm")),kt(2===i.rank,(()=>"Error in batchNorm2D: x must be rank 2 but got rank "+"".concat(i.rank,"."))),kt(2===s.rank||1===s.rank,(()=>"Error in batchNorm2D: mean must be rank 2 or rank 1 but "+"got rank ".concat(s.rank,"."))),kt(2===c.rank||1===c.rank,(()=>"Error in batchNorm2D: variance must be rank 2 or rank 1 "+"but got rank ".concat(c.rank,"."))),null!=u&&kt(2===u.rank||1===u.rank,(()=>"Error in batchNorm2D: scale must be rank 2 or rank 1 "+"but got rank ".concat(u.rank,"."))),null!=l&&kt(2===l.rank||1===l.rank,(()=>"Error in batchNorm2D: offset must be rank 2 or rank 1 "+"but got rank ".concat(l.rank,"."))),hl(i,s,c,l,u,o)}});const ml=Hi({batchNorm3d_:function(e,t,n,a,r,o){const i=Ui(e,"x","batchNorm"),s=Ui(t,"mean","batchNorm"),c=Ui(n,"variance","batchNorm");let u,l;return null!=r&&(u=Ui(r,"scale","batchNorm")),null!=a&&(l=Ui(a,"offset","batchNorm")),kt(3===i.rank,(()=>"Error in batchNorm3D: x must be rank 3 but got rank "+"".concat(i.rank,"."))),kt(3===s.rank||1===s.rank,(()=>"Error in batchNorm3D: mean must be rank 3 or rank 1 but "+"got rank ".concat(s.rank,"."))),kt(3===c.rank||1===c.rank,(()=>"Error in batchNorm3D: variance must be rank 3 or rank 1 "+"but got rank ".concat(c.rank,"."))),null!=u&&kt(3===u.rank||1===u.rank,(()=>"Error in batchNorm3D: scale must be rank 3 or rank 1 "+"but got rank ".concat(u.rank,"."))),null!=l&&kt(3===l.rank||1===l.rank,(()=>"Error in batchNorm3D: offset must be rank 3 or rank 1 "+"but got rank ".concat(l.rank,"."))),hl(i,s,c,l,u,o)}});const gl=Hi({batchNorm4d_:function(e,t,n,a,r,o){const i=Ui(e,"x","batchNorm"),s=Ui(t,"mean","batchNorm"),c=Ui(n,"variance","batchNorm");let u,l;return null!=r&&(u=Ui(r,"scale","batchNorm")),null!=a&&(l=Ui(a,"offset","batchNorm")),kt(4===i.rank,(()=>"Error in batchNorm4D: x must be rank 4 but got rank "+"".concat(i.rank,"."))),kt(4===s.rank||1===s.rank,(()=>"Error in batchNorm4D: mean must be rank 4 or rank 1 but "+"got rank ".concat(s.rank,"."))),kt(4===c.rank||1===c.rank,(()=>"Error in batchNorm4D: variance must be rank 4 or rank 1 "+"but got rank ".concat(c.rank,"."))),null!=u&&kt(4===u.rank||1===u.rank,(()=>"Error in batchNorm4D: scale must be rank 4 or rank 1 "+"but got rank ".concat(u.rank,"."))),null!=l&&kt(4===l.rank||1===l.rank,(()=>"Error in batchNorm4D: offset must be rank 4 or rank 1 "+"but got rank ".concat(l.rank,"."))),hl(i,s,c,l,u,o)}});const yl=Hi({bincount_:function(e,t,n){const a=Ui(e,"x","bincount"),r=Ui(t,"weights","bincount");kt("int32"===a.dtype,(()=>"Error in bincount: input "+"dtype must be int32, but got ".concat(a.dtype))),kt(n>=0,(()=>"size must be non-negative, but got ".concat(n,"."))),kt(r.size===a.size||0===r.size,(()=>"Error in bincount: weights must have the same size as input or"+"0-length, but got input shape: ".concat(a.shape,", weights shape: ")+"".concat(r.shape,".")));const o={x:a,weights:r},i={size:n};return Oi.runKernel(_n,o,i)}});const bl=Hi({bitwiseAnd_:function(e,t){const n=Ui(e,"x","bitwiseAnd"),a=Ui(t,"y","bitwiseAnd");if(!Tt(n.shape,a.shape))throw new Error("BitwiseAnd: Tensors must have the same shape. x: ".concat(n.shape,", y: ").concat(a.shape));if("int32"!==n.dtype||"int32"!==a.dtype)throw new Error("BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ".concat(n.dtype," and type of y: ").concat(a.dtype));const r={a:n,b:a};return Oi.runKernel(En,r)}});const xl=Hi({broadcastArgs_:function(e,t){const n=Ui(e,"s0","broadcastArgs","int32"),a=Ui(t,"s1","broadcastArgs","int32");if(1!==n.rank)throw new Error("broadcastArgs(): first input must be a vector (rank=1). "+"Has rank ".concat(n.rank));if(1!==a.rank)throw new Error("broadcastArgs(): second input must be a vector (rank=1). "+"Has rank ".concat(a.rank));const r={s0:n,s1:a};return Oi.runKernel(Rn,r)}});const vl=Hi({broadcastTo_:function(e,t){let n=Ui(e,"broadcastTo","x");const a=n.shape;if(Yt(t),t.length<n.rank)throw new Error("broadcastTo(): shape.length=".concat(t.length," < input.rank=").concat(n.rank,"."));if(t.length>n.rank){const e=n.shape.slice();for(;e.length<t.length;)e.unshift(1);n=al(n,e)}const r=n.shape,o=Array.from(t);for(let c=t.length-1;c>=0;c--)if(r[c]===t[c])o[c]=1;else if(1!==n.shape[c])throw new Error("broadcastTo(): [".concat(a,"] cannot be broadcast to [").concat(t,"]."));if(0===o.map(((e,t)=>e>1?t:-1)).filter((e=>e>=0)).length)return sc(n);const i={x:n},s={reps:o};return Oi.runKernel(oo,i,s)}});const wl=Hi({ceil_:function(e){const t={x:Ui(e,"x","ceil","float32")};return Oi.runKernel(On,t)}});const kl=Hi({clipByValue_:function(e,t,n){const a=Ui(e,"x","clipByValue");if(kt(t<=n,(()=>"Error in clip: min (".concat(t,") must be ")+"less than or equal to max (".concat(n,")."))),t===n)return Cc(a.shape,t,a.dtype);const r={x:a},o={clipValueMin:t,clipValueMax:n};return Oi.runKernel(Fn,r,o)}});const Sl=Hi({concat1d_:function(e){return il(e,0)}});const Cl=Hi({concat2d_:function(e,t){return il(e,t)}});const Il=Hi({concat3d_:function(e,t){return il(e,t)}});const Nl=Hi({concat4d_:function(e,t){return il(e,t)}});const Tl=Hi({conv2d_:function(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6?arguments[6]:void 0;const s=Ui(e,"x","conv2d","float32"),c=Ui(t,"filter","conv2d","float32");let u=s,l=!1;3===s.rank&&(l=!0,u=al(s,[1,s.shape[0],s.shape[1],s.shape[2]])),kt(4===u.rank,(()=>"Error in conv2d: input must be rank 4, but got rank ".concat(u.rank,"."))),kt(4===c.rank,(()=>"Error in conv2d: filter must be rank 4, but got rank "+"".concat(c.rank,"."))),nl("conv2d",a,i);const d="NHWC"===r?u.shape[3]:u.shape[1];kt(d===c.shape[2],(()=>"Error in conv2d: depth of input (".concat(d,") must match ")+"input depth for filter ".concat(c.shape[2],"."))),kt(Ju(n,o),(()=>"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(o,"'"))),kt(el(o),(()=>"Error in conv2D: Dilated rates should be larger than 0.")),kt(el(n),(()=>"Error in conv2D: Strides should be larger than 0."));const p={x:u,filter:c},h={strides:n,pad:a,dataFormat:r,dilations:o,dimRoundingMode:i},f=Oi.runKernel(Ln,p,h);return l?al(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});const _l=Hi({conv1d_:function(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NWC",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,i=arguments.length>6?arguments[6]:void 0;const s=Ui(e,"x","conv1d"),c=Ui(t,"filter","conv1d");let u=s,l=!1;2===s.rank&&(l=!0,u=al(s,[1,s.shape[0],s.shape[1]])),kt(3===u.rank,(()=>"Error in conv1d: input must be rank 3, but got rank ".concat(u.rank,"."))),kt(3===c.rank,(()=>"Error in conv1d: filter must be rank 3, but got rank "+"".concat(c.rank,"."))),nl("conv1d",a,i),kt(u.shape[2]===c.shape[1],(()=>"Error in conv1d: depth of input (".concat(u.shape[2],") must match ")+"input depth for filter ".concat(c.shape[1],"."))),kt(Ju(n,o),(()=>"Error in conv1D: Either stride or dilation must be 1. "+"Got stride ".concat(n," and dilation '").concat(o,"'"))),kt(el(o),(()=>"Error in conv1D: Dilated rates should be larger than 0.")),kt(el(n),(()=>"Error in conv1D: Stride should be larger than 0.")),kt("NWC"===r,(()=>"Error in conv1d: got dataFormat of ".concat(r," but only NWC is currently supported.")));const d=al(c,[1,c.shape[0],c.shape[1],c.shape[2]]),p=al(u,[u.shape[0],1,u.shape[1],u.shape[2]]),h=Tl(p,d,[1,n],a,"NHWC",[1,o],i);return al(h,l?[h.shape[2],h.shape[3]]:[h.shape[0],h.shape[2],h.shape[3]])}});const El=Hi({conv2DBackpropInput_:function(e,t,n,a,r){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",i=arguments.length>6?arguments[6]:void 0;kt(e.length===t.rank,(()=>"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")));let s=e,c=t,u=!1;3===t.rank&&(u=!0,c=al(t,[1,t.shape[0],t.shape[1],t.shape[2]]),s=[1,e[0],e[1],e[2]]),kt(4===s.length,(()=>"Error in conv2dDerInput: inShape must be length 4, but got length "+"".concat(s.length,"."))),kt(4===c.rank,(()=>"Error in conv2dDerInput: dy must be rank 4, but got "+"rank ".concat(c.rank))),kt(4===n.rank,(()=>"Error in conv2dDerInput: filter must be rank 4, but got "+"rank ".concat(n.rank)));const l="NHWC"===o?s[3]:s[1],d="NHWC"===o?c.shape[3]:c.shape[1];kt(l===n.shape[2],(()=>"Error in conv2dDerInput: depth of input (".concat(l,") must ")+"match input depth for filter ".concat(n.shape[2],"."))),kt(d===n.shape[3],(()=>"Error in conv2dDerInput: depth of output (".concat(d,") must ")+"match output depth for filter ".concat(n.shape[3],"."))),nl("conv2dDerInput",r,i);const p={dy:c,filter:n},h={strides:a,pad:r,dataFormat:o,dimRoundingMode:i,inputShape:s},f=Oi.runKernel(Bn,p,h);return u?al(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});const Rl=Hi({conv2dTranspose_:function(e,t,n,a,r,o){const i=Ui(e,"x","conv2dTranspose"),s=Ui(t,"filter","conv2dTranspose");return El(n,i,s,a,r,"NHWC",o)}});const Al=Hi({conv3d_:function(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NDHWC",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1,1];const i=Ui(e,"x","conv3d"),s=Ui(t,"filter","conv3d");let c=i,u=!1;4===i.rank&&(u=!0,c=al(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),kt(5===c.rank,(()=>"Error in conv3d: input must be rank 5, but got rank ".concat(c.rank,"."))),kt(5===s.rank,(()=>"Error in conv3d: filter must be rank 5, but got rank "+"".concat(s.rank,"."))),kt(c.shape[4]===s.shape[3],(()=>"Error in conv3d: depth of input (".concat(c.shape[4],") must match ")+"input depth for filter ".concat(s.shape[3],"."))),kt(Ju(n,o),(()=>"Error in conv3D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(o,"'"))),kt("NDHWC"===r,(()=>"Error in conv3d: got dataFormat of ".concat(r," but only NDHWC is currently supported."))),kt(el(o),(()=>"Error in conv3D: Dilated rates should be larger than 0.")),kt(el(n),(()=>"Error in conv3D: Strides should be larger than 0."));const l={x:c,filter:s},d={strides:n,pad:a,dataFormat:r,dilations:o},p=Oi.runKernel(Wn,l,d);return u?al(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}});const Ol=Hi({conv3DBackpropInput_:function(e,t,n,a,r){kt(e.length===t.rank,(()=>"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")));let o=e,i=t,s=!1;4===t.rank&&(s=!0,i=al(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),o=[1,e[0],e[1],e[2],e[3]]);const c=o[4],u=i.shape[4];kt(5===o.length,(()=>"Error in conv3dDerInput: inShape must be length 5, but got length "+"".concat(o.length,"."))),kt(5===i.rank,(()=>"Error in conv3dDerInput: dy must be rank 5, but got "+"rank ".concat(i.rank))),kt(5===n.rank,(()=>"Error in conv3dDerInput: filter must be rank 5, but got "+"rank ".concat(n.rank))),kt(c===n.shape[3],(()=>"Error in conv3dDerInput: depth of input (".concat(c,") must ")+"match input depth for filter ".concat(n.shape[3],"."))),kt(u===n.shape[4],(()=>"Error in conv3dDerInput: depth of output (".concat(u,") must ")+"match output depth for filter ".concat(n.shape[4],".")));const l={dy:i,filter:n},d={pad:r,strides:a,inputShape:o},p=Oi.runKernel(Vn,l,d);return s?al(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}});const Fl=Hi({conv3dTranspose_:function(e,t,n,a,r){const o=Ui(e,"x","conv3dTranspose"),i=Ui(t,"filter","conv3dTranspose");return Ol(n,o,i,a,r)}});const Dl=Hi({cos_:function(e){const t={x:Ui(e,"x","cos","float32")};return Oi.runKernel(Gn,t)}});const Ml=Hi({cosh_:function(e){const t={x:Ui(e,"x","cosh","float32")};return Oi.runKernel(Hn,t)}});const Pl=Hi({cumprod_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r={x:Ui(e,"x","cumprod")},o={axis:t,exclusive:n,reverse:a};return Oi.runKernel(jn,r,o)}});const Ll=Hi({cumsum_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r={x:Ui(e,"x","cumsum")},o={axis:t,exclusive:n,reverse:a};return Oi.runKernel(Kn,r,o)}});const zl=Hi({denseBincount_:function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=Ui(e,"x","denseBincount"),o=Ui(t,"weights","denseBincount");kt("int32"===r.dtype,(()=>"Error in denseBincount: input "+"dtype must be int32, but got ".concat(r.dtype))),kt(r.rank<=2,(()=>"Error in denseBincount: input must be at most rank 2, but got "+"rank ".concat(r.rank,"."))),kt(n>=0,(()=>"size must be non-negative, but got ".concat(n,"."))),kt(o.size===r.size||0===o.size,(()=>"Error in denseBincount: weights must have the same shape as x or "+"0-length, but got x shape: ".concat(r.shape,", weights shape: ")+"".concat(o.shape,".")));const i={x:r,weights:o},s={size:n,binaryOutput:a};return Oi.runKernel(Xn,i,s)}});const Bl=Hi({depthToSpace_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"NHWC";const a=Ui(e,"x","depthToSpace","float32"),r="NHWC"===n?a.shape[1]:a.shape[2],o="NHWC"===n?a.shape[2]:a.shape[3],i="NHWC"===n?a.shape[3]:a.shape[1];kt(t>1,(()=>"blockSize should be > 1 for depthToSpace, but was: ".concat(t))),kt(r*t>=0,(()=>"Negative dimension size caused by overflow when multiplying\n    ".concat(r," and ").concat(t,"  for depthToSpace with input shape\n    ").concat(a.shape))),kt(o*t>=0,(()=>"Negative dimension size caused by overflow when multiplying\n    ".concat(o," and ").concat(t," for depthToSpace with input shape\n        ").concat(a.shape))),kt(i%(t*t)===0,(()=>"Dimension size must be evenly divisible by ".concat(t*t," but is ").concat(i," for depthToSpace with input shape ").concat(a.shape)));const s={x:a},c={blockSize:t,dataFormat:n};return Oi.runKernel(Yn,s,c)}});const Wl=Hi({depthwiseConv2d_:function(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6?arguments[6]:void 0;const s=Ui(e,"x","depthwiseConv2d","float32"),c=Ui(t,"filter","depthwiseConv2d","float32");let u=s,l=!1;3===s.rank&&(l=!0,u=al(s,[1,s.shape[0],s.shape[1],s.shape[2]])),kt(4===u.rank,(()=>"Error in depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(u.rank,"."))),kt(4===c.rank,(()=>"Error in depthwiseConv2d: filter must be rank 4, but got rank "+"".concat(c.rank,".")));const d="NHWC"===r?u.shape[3]:u.shape[1];kt(d===c.shape[2],(()=>"Error in depthwiseConv2d: number of input channels "+"(".concat(d,") must match the inChannels dimension in ")+"filter ".concat(c.shape[2],"."))),nl("depthwiseConv2d",a,i);const p={x:u,filter:c},h={strides:n,pad:a,dataFormat:r,dilations:o,dimRoundingMode:i},f=Oi.runKernel(Qn,p,h);return l?al(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});const Ul=Hi({diag_:function(e){const t={x:Ui(e,"x","diag")};return Oi.runKernel(Jn,t)}});const Vl=Hi({dilation2d_:function(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[1,1],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC";const i=Ui(e,"x","dilation2d"),s=Ui(t,"filter","dilation2d");kt(3===i.rank||4===i.rank,(()=>"Error in dilation2d: input must be rank 3 or 4, but got rank "+"".concat(i.rank,"."))),kt(3===s.rank,(()=>"Error in dilation2d: filter must be rank 3, but got rank "+"".concat(s.rank,"."))),kt("NHWC"===o,(()=>"Error in dilation2d: Only NHWC is currently supported, "+"but got dataFormat of ".concat(o)));let c=i,u=!1;3===i.rank&&(c=al(i,[1,i.shape[0],i.shape[1],i.shape[2]]),u=!0),kt(c.shape[3]===s.shape[2],(()=>"Error in dilation2d:  input and filter must have the same depth: ".concat(c.shape[3]," vs ").concat(s.shape[2])));const l={x:c,filter:s},d={strides:n,pad:a,dilations:r},p=Oi.runKernel(ea,l,d);return u?al(p,[p.shape[1],p.shape[2],p.shape[3]]):p}});const Gl=Hi({equal_:function(e,t){let n=Ui(e,"a","equal","string_or_numeric"),a=Ui(t,"b","equal","string_or_numeric");[n,a]=Ii(n,a),Rc(n.shape,a.shape);const r={a:n,b:a};return Oi.runKernel(ua,r)}});const Hl=Hi({where_:function(e,t,n){const a=Ui(t,"a","where"),r=Ui(n,"b","where"),o=Ui(e,"condition","where","bool"),i=Rc(Rc(o.shape,a.shape),r.shape),s={condition:vl(o,i),t:vl(a,i),e:vl(r,i)};return Oi.runKernel(Ar,s)}});const jl=Hi({divNoNan_:function(e,t){let n=Ui(e,"a","div"),a=Ui(t,"b","div");[n,a]=Ii(n,a);const r=dc(n,a),o=mc(r),i=Gl(a,o);return Hl(i,o,r)}});const Kl=Hi({dot_:function(e,t){const n=Ui(e,"t1","dot"),a=Ui(t,"t2","dot");kt((1===n.rank||2===n.rank)&&(1===a.rank||2===a.rank),(()=>"Error in dot: inputs must all be rank 1 or 2, but got ranks "+"".concat(n.rank," and ").concat(a.rank,".")));const r=1===n.rank?n.size:n.shape[1],o=1===a.rank?a.size:a.shape[0];if(kt(r===o,(()=>"Error in dot: inner dimensions of inputs must match, but got "+"".concat(r," and ").concat(o,"."))),1===n.rank&&1===a.rank){const e=al(n,[1,-1]),t=al(a,[-1,1]),r=sl(e,t);return al(r,[])}if(1===n.rank&&2===a.rank){const e=al(n,[1,-1]),t=al(a,[a.shape[0],a.shape[1]]),r=sl(e,t);return al(r,[r.size])}if(2===n.rank&&1===a.rank){const e=al(a,[-1,1]),t=sl(n,e);return al(t,[t.size])}{const e=al(a,[a.shape[0],a.shape[1]]);return sl(n,e)}}});const ql=Hi({einsum_:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];const r=n.map(((e,t)=>Ui(e,"tensors".concat(t),"einsum"))),o={equation:e};return Oi.runKernel(oa,r,o)}});const Xl=Hi({elu_:function(e){const t={x:Ui(e,"x","elu","float32")};return Oi.runKernel(ia,t)}});const Yl=Hi({ensureShape_:function(e,t){const n=Ui(e,"x","ensureShape","string_or_numeric");if(!function(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(null!==e[n]&&null!==t[n]&&e[n]!==t[n])return!1;return!0}(n.shape,t))throw new Error("EnsureShape: Shape of tensor ".concat(n.shape," is not compatible with expected shape ").concat(t));return e}});const Ql=Hi({erf_:function(e){let t=Ui(e,"x","erf");kt("int32"===t.dtype||"float32"===t.dtype,(()=>"Input dtype must be `int32` or `float32`.")),"int32"===t.dtype&&(t=ic(t,"float32"));const n={x:t};return Oi.runKernel(ca,n)}});function Zl(e,t){for(let n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function $l(e,t,n){const a=e.length+t.length,r=[];let o=0,i=0;for(let s=0;s<a;s++)-1===n.indexOf(s)?r.push(e[o++]):r.push(t[i++]);return r}function Jl(e,t){const n=[],a=e.length;for(let r=0;r<a;r++)-1===t.indexOf(r)&&n.push(e[r]);return[n,t.map((t=>e[t]))]}function ed(e,t){return $l(e,t.map((e=>1)),t)}function td(e,t,n){kt(Zl(t,n),(()=>"".concat(e," supports only inner-most axes for now. ")+"Got axes ".concat(t," and rank-").concat(n," input.")))}function nd(e,t){if(Zl(e,t))return null;const n=[];for(let a=0;a<t;++a)-1===e.indexOf(a)&&n.push(a);return e.forEach((e=>n.push(e))),n}function ad(e){return e.map(((e,t)=>[t,e])).sort(((e,t)=>e[1]-t[1])).map((e=>e[0]))}function rd(e,t){const n=[];for(let a=t-e;a<t;++a)n.push(a);return n}const od=Hi({max_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const a={x:Ui(e,"x","max")},r={reductionIndices:t,keepDims:n};return Oi.runKernel(Wa,a,r)}});const id=Hi({min_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const a={x:Ui(e,"x","min")},r={axis:t,keepDims:n};return Oi.runKernel(Xa,a,r)}});const sd=Hi({sum_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=Ui(e,"x","sum");"bool"===a.dtype&&(a=ic(a,"int32"));const r={x:a},o={axis:t,keepDims:n};return Oi.runKernel(Wr,r,o)}});function cd(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(0===e.rank)return Tc(e);if(1!==e.rank&&null===n)return cd(al(e,[-1]),t,n);if(1===e.rank||"number"===typeof n||Array.isArray(n)&&1===n.length){if(1===t)return sd(Tc(e),n);if(t===1/0)return od(Tc(e),n);if(t===-1/0)return id(Tc(e),n);if("euclidean"===t||2===t)return hc(sd(Ic(Tc(e),yc(2,"int32")),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}if(Array.isArray(n)&&2===n.length){if(1===t)return od(sd(Tc(e),n[0]),n[1]-1);if(t===1/0)return od(sd(Tc(e),n[1]),n[0]);if(t===-1/0)return id(sd(Tc(e),n[1]),n[0]);if("fro"===t||"euclidean"===t)return hc(sd(fc(e),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}throw new Error("Error in norm: invalid axis: ".concat(n))}const ud=Hi({norm_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"euclidean",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=cd(e=Ui(e,"x","norm"),t,n);let o=r.shape;if(a){const t=Ft(n,e.shape);o=ed(r.shape,t)}return al(r,o)}});const ld=Hi({euclideanNorm_:function(e){return ud(e,"euclidean",arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]&&arguments[2])}});const dd=Hi({exp_:function(e){const t={x:Ui(e,"x","exp")};return Oi.runKernel(la,t)}});const pd=Hi({expandDims_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=Ui(e,"x","expandDims","string_or_numeric");kt(t<=n.rank,(()=>"Axis must be <= rank of the tensor"));const a={input:n},r={dim:t};return Oi.runKernel(da,a,r)}});const hd=Hi({expm1_:function(e){const t={x:Ui(e,"x","expm1")};return Oi.runKernel(pa,t)}});const fd=Hi({tile_:function(e,t){const n=Ui(e,"x","tile","string_or_numeric");kt(n.rank===t.length,(()=>"Error in transpose: rank of input ".concat(n.rank," ")+"must match length of reps ".concat(t,".")));const a={x:n},r={reps:t};return Oi.runKernel(oo,a,r)}});const md=Hi({eye_:function(e,t,n){null==t&&(t=e);const a=oc([e,t],arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32"),r=e<=t?e:t;for(let i=0;i<r;++i)a.set(1,i,i);const o=al(a.toTensor(),[e,t]);if(null==n)return o;if(1===n.length)return fd(pd(o,0),[n[0],1,1]);if(2===n.length)return fd(pd(pd(o,0),0),[n[0],n[1],1,1]);if(3===n.length)return fd(pd(pd(pd(o,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D "+"batchShapes, but received ".concat(n.length,"D."))}});const gd=Hi({floor_:function(e){const t={x:Ui(e,"x","floor","float32")};return Oi.runKernel(ga,t)}});const yd=Hi({gather_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const r={x:Ui(e,"x","gather"),indices:Ui(t,"indices","gather","int32")},o={axis:n,batchDims:a};return Oi.runKernel(xa,r,o)}});const bd=Hi({greater_:function(e,t){let n=Ui(e,"a","greater","string_or_numeric"),a=Ui(t,"b","greater","string_or_numeric");[n,a]=Ii(n,a),Rc(n.shape,a.shape);const r={a:n,b:a};return Oi.runKernel(wa,r)}});const xd=Hi({greaterEqual_:function(e,t){let n=Ui(e,"a","greaterEqual","string_or_numeric"),a=Ui(t,"b","greaterEqual","string_or_numeric");[n,a]=Ii(n,a),Rc(n.shape,a.shape);const r={a:n,b:a};return Oi.runKernel(ka,r)}});const vd=Hi({imag_:function(e){const t={input:Ui(e,"input","imag")};return Oi.runKernel(Ia,t)}});const wd=Hi({isFinite_:function(e){const t={x:Ui(e,"x","isFinite")};return Oi.runKernel(Na,t)}});const kd=Hi({isInf_:function(e){const t={x:Ui(e,"x","isInf")};return Oi.runKernel(Ta,t)}});const Sd=Hi({isNaN_:function(e){const t={x:Ui(e,"x","isNaN")};return Oi.runKernel(_a,t)}});const Cd=Hi({leakyRelu_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2;const n={x:Ui(e,"x","leakyRelu")},a={alpha:t};return Oi.runKernel(Ea,n,a)}});const Id=Hi({less_:function(e,t){let n=Ui(e,"a","less","string_or_numeric"),a=Ui(t,"b","less","string_or_numeric");[n,a]=Ii(n,a),Rc(n.shape,a.shape);const r={a:n,b:a};return Oi.runKernel(Ra,r)}});const Nd=Hi({lessEqual_:function(e,t){let n=Ui(e,"a","lessEqual","string_or_numeric"),a=Ui(t,"b","lessEqual","string_or_numeric");[n,a]=Ii(n,a),Rc(n.shape,a.shape);const r={a:n,b:a};return Oi.runKernel(Aa,r)}});function Td(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");const a={start:e,stop:t,num:n};return Oi.runKernel(Oa,{},a)}const _d=Hi({localResponseNormalization_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5;const o=Ui(e,"x","localResponseNormalization");kt(4===o.rank||3===o.rank,(()=>"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ".concat(o.rank,"."))),kt(_t(t),(()=>"Error in localResponseNormalization: depthRadius must be an "+"integer but got depthRadius ".concat(t,".")));let i=o,s=!1;3===o.rank&&(s=!0,i=al(o,[1,o.shape[0],o.shape[1],o.shape[2]]));const c={x:i},u={depthRadius:t,bias:n,alpha:a,beta:r},l=Oi.runKernel(za,c,u);return s?al(l,[l.shape[1],l.shape[2],l.shape[3]]):l}});const Ed=Hi({log_:function(e){const t={x:Ui(e,"x","log","float32")};return Oi.runKernel(Fa,t)}});const Rd=Hi({log1p_:function(e){const t={x:Ui(e,"x","log1p")};return Oi.runKernel(Da,t)}});const Ad=Hi({neg_:function(e){const t={x:Ui(e,"x","neg")};return Oi.runKernel(er,t)}});const Od=Hi({softplus_:function(e){const t={x:Ui(e,"x","softplus")};return Oi.runKernel(zr,t)}});const Fd=Hi({logSigmoid_:function(e){const t=Ui(e,"x","logSigmoid");return gc((e=>({value:Ad(Od(Ad(e))),gradFunc:t=>pc(t,cl(Ad(e)))})))(t)}});const Dd=Hi({logSoftmax_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;const n=Ui(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and axis was ").concat(t));const a=gc(((e,n)=>{const a=od(e,t,!0),r=Nc(e,a),o=Nc(ic(r,"float32"),Ed(sd(dd(r),t,!0)));n([o]);return{value:o,gradFunc:(e,n)=>{const[a]=n,r=dd(a);return Nc(e,pc(sd(e,t,!0),r))}}}));return a(n)}});const Md=Hi({logSumExp_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const a=Ui(e,"x","logSumExp"),r=Ft(t,a.shape),o=od(a,r,!0),i=Nc(a,o),s=dd(i),c=sd(s,r),u=Ed(c),l=uc(al(o,u.shape),u);if(n){const e=ed(l.shape,r);return al(l,e)}return l}});const Pd=Hi({logicalAnd_:function(e,t){const n=Ui(e,"a","logicalAnd","bool"),a=Ui(t,"b","logicalAnd","bool");Rc(n.shape,a.shape);const r={a:n,b:a};return Oi.runKernel(Ma,r)}});const Ld=Hi({logicalNot_:function(e){const t={x:Ui(e,"x","logicalNot","bool")};return Oi.runKernel(Pa,t)}});const zd=Hi({logicalOr_:function(e,t){const n=Ui(e,"a","logicalOr","bool"),a=Ui(t,"b","logicalOr","bool");Rc(n.shape,a.shape);const r={a:n,b:a};return Oi.runKernel(La,r)}});const Bd=Hi({logicalXor_:function(e,t){const n=Ui(e,"a","logicalXor","bool"),a=Ui(t,"b","logicalXor","bool");return Rc(n.shape,a.shape),Pd(zd(e,t),Ld(Pd(e,t)))}}),Wd=2147483648;const Ud=Hi({searchSorted_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"left";const a=Ui(e,"sortedSequence","searchSorted"),r=Ui(t,"values","searchSorted"),o=a.shape[a.shape.length-1],i=r.shape[r.shape.length-1],s=al(a,[-1,o]),c=al(r,[-1,i]);if(s.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(s.shape[0]!==c.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(It(c.shape)>=Wd)throw new Error("values tensor size must less than ".concat(Wd));if(s.shape[1]>=Wd)throw new Error("trailing dim_size must less than ".concat(Wd," for int32 output type, was ").concat(s.shape[1]));const u={sortedSequence:s,values:c},l={side:n};return Oi.runKernel(Rr,u,l)}});function Vd(e,t){return Ud(e,t,"left")}const Gd=Hi({maxPool_:function(e,t,n,a,r){const o=Ui(e,"x","maxPool");let i=o,s=!1;3===o.rank&&(s=!0,i=al(o,[1,o.shape[0],o.shape[1],o.shape[2]])),kt(4===i.rank,(()=>"Error in maxPool: input must be rank 4 but got rank ".concat(i.rank,"."))),kt(Ju(n,1),(()=>"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'"))),nl("maxPool",a,r);const c={x:i},u={filterSize:t,strides:n,pad:a,dimRoundingMode:r},l=Oi.runKernel(Va,c,u);return s?al(l,[l.shape[1],l.shape[2],l.shape[3]]):l}});const Hd=Hi({maxPool3d_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1,1],n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC";const i=Ui(e,"x","maxPool3d");let s=i,c=!1;4===i.rank&&(c=!0,s=al(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),kt(5===s.rank,(()=>"Error in maxPool3d: x must be rank 5 but got rank ".concat(s.rank,"."))),kt("NDHWC"===o,(()=>"Error in maxPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(o))),nl("maxPool3d",a,r);const u={x:s},l={filterSize:t,strides:n,pad:a,dimRoundingMode:r,dataFormat:o},d=Oi.runKernel(Ha,u,l);return c?al(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});const jd=Hi({maxPoolWithArgmax_:function(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const o={x:Ui(e,"x","maxPoolWithArgmax")},i={filterSize:t,strides:n,pad:a,includeBatchInIndex:r},s=Oi.runKernel(Ka,o,i);return{result:s[0],indexes:s[1]}}});const Kd=Hi({mean_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const a={x:Ui(e,"x","mean")},r={axis:t,keepDims:n};return Oi.runKernel(qa,a,r)}});function qd(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if(Yt(e),"complex64"===t){const t=qd(e,"float32"),n=qd(e,"float32");return ji(t,n)}const n=Xt(It(e),t);return Oi.makeTensor(n,e,t)}function Xd(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if(Yt(e),"complex64"===t){const t=Xd(e,"float32"),n=qd(e,"float32");return ji(t,n)}const n=qt(It(e),t);return Oi.makeTensor(n,e,t)}function Yd(e,t){let{indexing:n="xy"}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("xy"!==n&&"ij"!==n)throw new TypeError("".concat(n," is not a valid third argument to meshgrid"));if(void 0===e)return[];let a=Ui(e,"x","meshgrid",e instanceof pi?e.dtype:"float32");if(void 0===t)return[a];let r=Ui(t,"y","meshgrid",t instanceof pi?t.dtype:"float32");const o=It(a.shape),i=It(r.shape);return"xy"===n?(a=al(a,[1,-1]),r=al(r,[-1,1]),[sl(Xd([i,1],a.dtype),a),sl(r,Xd([1,o],r.dtype))]):(a=al(a,[-1,1]),r=al(r,[1,-1]),[sl(a,Xd([1,i],a.dtype)),sl(Xd([o,1],r.dtype),r)])}const Qd=Hi({minimum_:function(e,t){let n=Ui(e,"a","minimum"),a=Ui(t,"b","minimum");[n,a]=Ii(n,a),"bool"===n.dtype&&(n=ic(n,"int32"),a=ic(a,"int32")),Rc(n.shape,a.shape);const r={a:n,b:a};return Oi.runKernel(Ya,r)}});const Zd=Hi({mirrorPad_:function(e,t,n){kt("reflect"===n||"symmetric"===n,(()=>"Invalid mode. Mode must be either reflect or symmetric. "+"Got ".concat(n,".")));const a=Ui(e,"x","mirrorPad");if(0===a.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");kt(t.length===a.rank,(()=>"Padding doesn't match input. Must be ".concat(a.rank,". ")+"Got ".concat(t.length,".")));const r="reflect"===n?1:0;for(let s=0;s<a.rank;s++)kt(2===t[s].length,(()=>"Invalid number of paddings. Must be length of 2 each.")),kt(t[s][0]>=0&&t[s][0]<=a.shape[s]-r&&t[s][1]>=0&&t[s][1]<=a.shape[s]-r,(()=>"Padding in dimension ".concat(s," cannot be greater than or equal ")+"to ".concat(a.shape[s]-r," or less than 0 for input of ")+"shape ".concat(a.shape)));const o={paddings:t,mode:n},i={x:a};return Oi.runKernel(Qa,i,o)}});const $d=Hi({mod_:function(e,t){let n=Ui(e,"a","mod"),a=Ui(t,"b","mod");[n,a]=Ii(n,a);const r={a:n,b:a};return Oi.runKernel(Za,r)}});const Jd=Hi({moments_:function(e){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=Ft(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,(e=Ui(e,"x","moments")).shape),a=Kd(e,n,t);let r=a.shape;t||(r=ed(a.shape,n));const o=fc(Nc(ic(e,"float32"),al(a,r)));return{mean:a,variance:Kd(o,n,t)}}});const ep=Hi({multiRNNCell_:function(e,t,n,a){const r=Ui(t,"data","multiRNNCell"),o=Vi(n,"c","multiRNNCell"),i=Vi(a,"h","multiRNNCell");let s=r;const c=[];for(let d=0;d<e.length;d++){const t=e[d](s,o[d],i[d]);c.push(t[0]),c.push(t[1]),s=t[1]}const u=[],l=[];for(let d=0;d<c.length;d+=2)u.push(c[d]),l.push(c[d+1]);return[u,l]}});const tp=Hi({multinomial_:function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=Ui(e,"logits","multinomial"),o=r.size,i=r.rank;if(o<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+"".concat(o,"."));if(i>2)throw new Error("Rank of probabilities must be 1 or 2, but is ".concat(i));n=n||Math.random();const s={logits:1===i?al(r,[1,-1]):r},c={numSamples:t,seed:n,normalized:a},u=Oi.runKernel($a,s,c);return 1===i?al(u,[u.size]):u}});const np=Hi({notEqual_:function(e,t){let n=Ui(e,"a","notEqual","string_or_numeric"),a=Ui(t,"b","notEqual","string_or_numeric");[n,a]=Ii(n,a),Rc(n.shape,a.shape);const r={a:n,b:a};return Oi.runKernel(tr,r)}});const ap=Hi({oneHot_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"int32";if(t<2)throw new Error("Error in oneHot: depth must be >=2, but it is ".concat(t));const o={indices:Ui(e,"indices","oneHot","int32")},i={dtype:r,depth:t,onValue:n,offValue:a};return Oi.runKernel(ir,o,i)}});const rp=Hi({onesLike_:function(e){const t={x:Ui(e,"x","onesLike")};return Oi.runKernel(or,t)}});const op=Hi({outerProduct_:function(e,t){const n=Ui(e,"v1","outerProduct"),a=Ui(t,"v2","outerProduct");kt(1===n.rank&&1===a.rank,(()=>"Error in outerProduct: inputs must be rank 1, but got ranks "+"".concat(n.rank," and ").concat(a.rank,".")));const r=al(n,[-1,1]),o=al(a,[1,-1]);return sl(r,o)}});const ip=Hi({pad_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const a=Ui(e,"x","pad");if(0===a.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const r={paddings:t,constantValue:n},o={x:a};return Oi.runKernel(cr,o,r)}});const sp=Hi({pad1d_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return kt(2===t.length,(()=>"Invalid number of paddings. Must be length of 2.")),ip(e,[t],n)}});const cp=Hi({pad2d_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return kt(2===t.length&&2===t[0].length&&2===t[1].length,(()=>"Invalid number of paddings. Must be length of 2 each.")),ip(e,t,n)}});const up=Hi({pad3d_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return kt(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,(()=>"Invalid number of paddings. Must be length of 2 each.")),ip(e,t,n)}});const lp=Hi({pad4d_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return kt(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,(()=>"Invalid number of paddings. Must be length of 2 each.")),ip(e,t,n)}});const dp=Hi({spaceToBatchND_:function(e,t,n){const a=Ui(e,"x","spaceToBatchND");kt(a.rank>=1+t.length,(()=>"input rank ".concat(a.rank," should be > than [blockShape] ").concat(t.length))),kt(n.length===t.length,(()=>"paddings.shape[0] ".concat(n.length," must be equal to [blockShape] ").concat(t.length))),kt(a.shape.reduce(((e,a,r)=>r>0&&r<=t.length?e&&(a+n[r-1][0]+n[r-1][1])%t[r-1]===0:e),!0),(()=>"input spatial dimensions ".concat(a.shape.slice(1)," with paddings ").concat(n.toString()," must be divisible by blockShapes ").concat(t.toString())));const r={x:a},o={blockShape:t,paddings:n};return Oi.runKernel(Ur,r,o)}});const pp=Hi({pool_:function(e,t,n,a,r,o,i){null==r&&(r=[1,1]),null==o&&(o=1),0===a&&(a="valid");const s=Ui(e,"x","maxPool");let c=s,u=!1;3===s.rank&&(u=!0,c=al(s,[1,s.shape[0],s.shape[1],s.shape[2]])),kt(Ju(o,r),(()=>"Error in pool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(r,"'")));const l=Gu(c.shape,t,o,r,a),d=[l.dilationHeight,l.dilationWidth];let p;p="same"===a?function(e,t){const n=e.map(((e,n)=>e+(e-1)*(t[n]-1))),a=n.map((e=>e-1)),r=a.map((e=>Math.floor(e/2))),o=a.map(((e,t)=>e-r[t]));return a.map(((e,t)=>[r[t],o[t]]))}([l.filterHeight,l.filterWidth],d):[[0,0],[0,0]];const h=1===d[0]&&1===d[1],[f,m]=function(e,t,n){const a=n.map((e=>e[0])),r=n.map((e=>e[1])),o=e.concat(a,r),i=t.map(((e,t)=>(e-o[t]%e)%e)),s=r.map(((e,t)=>e+i[t])),c=t.map(((e,t)=>[a[t],s[t]])),u=t.map(((e,t)=>[0,i[t]]));return[c,u]}([l.inHeight,l.inWidth],d,p),g=h?a:"valid",y=h?c:dp(c,d,f),b=("avg"===n?()=>rl(y,t,o,g,i):()=>Gd(y,t,o,g,i))(),x=h?b:pl(b,d,m);return u?al(x,[x.shape[1],x.shape[2],x.shape[3]]):x}});const hp=Hi({prelu_:function(e,t){const n={x:Ui(e,"x","prelu"),alpha:Ui(t,"alpha","prelu")};return Oi.runKernel(lr,n)}});const fp=Hi({prod_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=Ui(e,"x","prod");"bool"===a.dtype&&(a=ic(a,"int32"));const r={x:a},o={axis:t,keepDims:n};return Oi.runKernel(dr,r,o)}});const mp=Hi({raggedGather_:function(e,t,n,a){const r={paramsNestedSplits:e.map(((e,t)=>Ui(e,"tensors".concat(t),"raggedGather","int32"))),paramsDenseValues:Ui(t,"paramsDenseValues","raggedGather"),indices:Ui(n,"indices","raggedGather","int32")},o={outputRaggedRank:a},i=Oi.runKernel(pr,r,o);return{outputNestedSplits:i.slice(0,i.length-1),outputDenseValues:i[i.length-1]}}});const gp=Hi({raggedRange_:function(e,t,n){const a=Ui(e,"starts","raggedRange"),r={starts:a,limits:Ui(t,"limits","raggedRange",a.dtype),deltas:Ui(n,"deltas","raggedRange",a.dtype)},o=Oi.runKernel(hr,r);return{rtNestedSplits:o[0],rtDenseValues:o[1]}}});const yp=Hi({raggedTensorToTensor_:function(e,t,n,a,r){const o=Ui(e,"shape","raggedTensorToTensor","int32"),i=Ui(t,"values","raggedTensorToTensor"),s={shape:o,values:i,defaultValue:Ui(n,"defaultValue","raggedTensorToTensor",i.dtype),rowPartitionTensors:a.map(((e,t)=>Ui(e,"tensors".concat(t),"raggedTensorToTensor","int32")))},c={rowPartitionTypes:r};return Oi.runKernel(fr,s,c)}});const bp=Hi({rand_:function(e,t,n){Yt(e);const a=It(e);let r=null;if(null==n||"float32"===n)r=new Float32Array(a);else if("int32"===n)r=new Int32Array(a);else{if("bool"!==n)throw new Error("Unknown data type ".concat(n));r=new Uint8Array(a)}for(let o=0;o<a;o++)r[o]=t();return Oi.makeTensor(r,e,n)}});var xp=n(334);class vp{constructor(e,t,n,a,r){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);const o=r||Math.random();this.random=xp.alea(o.toString())}nextValue(){if(!isNaN(this.nextVal)){const e=this.nextVal;return this.nextVal=NaN,e}let e,t,n=!1;for(;!n;){let a,r,o;do{a=2*this.random()-1,r=2*this.random()-1,o=a*a+r*r}while(o>=1||0===o);const i=Math.sqrt(-2*Math.log(o)/o);e=this.mean+this.stdDev*a*i,t=this.mean+this.stdDev*r*i,this.truncated&&!this.isValidTruncated(e)||(n=!0)}return this.truncated&&!this.isValidTruncated(t)||(this.nextVal=this.convertValue(t)),this.convertValue(e)}convertValue(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class wp{constructor(e,t,n,a){this.alpha=e,this.beta=1/t,this.dtype=n;const r=a||Math.random();this.randu=xp.alea(r.toString()),this.randn=new vp(0,1,n,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,t,n,a,r,o;for(;;){do{a=this.randn.nextValue(),o=1+this.c*a}while(o<=0);if(o*=o*o,e=a*a,t=1-.331*e*e,n=.5*e+this.d*(1-o+Math.log(o)),r=this.randu(),r<t||Math.log(r)<n)break}return o=1/this.beta*this.d*o,this.alpha<1&&(o*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(o)}convertValue(e){return"float32"===this.dtype?e:Math.round(e)}}class kp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;if(this.canReturnFloat=()=>null==this.dtype||"float32"===this.dtype,this.min=e,this.range=t-e,this.dtype=n,null==a&&(a=Math.random()),"number"===typeof a&&(a=a.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between ".concat(e," - ").concat(t," <= 1 and dtype is not float"));this.random=xp.alea(a)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}const Sp=Hi({randomGamma_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",r=arguments.length>4?arguments[4]:void 0;if(Yt(e),null==n&&(n=1),null==a&&(a="float32"),"float32"!==a&&"int32"!==a)throw new Error("Unsupported data type ".concat(a));const o=new wp(t,n,a,r),i=oc(e,a);for(let s=0;s<i.values.length;s++)i.values[s]=o.nextValue();return i.toTensor()}});const Cp=Hi({randomNormal_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;if(Yt(e),null!=a&&"bool"===a)throw new Error("Unsupported data type ".concat(a));const o=new vp(t,n,a,!1,r),i=oc(e,a);for(let s=0;s<i.values.length;s++)i.values[s]=o.nextValue();return i.toTensor()}});const Ip=Hi({randomStandardNormal_:function(e,t,n){if(null!=t&&"bool"===t)throw new Error("Unsupported data type ".concat(t));return Cp(e,0,1,t,n)}});const Np=Hi({randomUniform_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",r=arguments.length>4?arguments[4]:void 0;Yt(e);const o=oc(e,a),i=new kp(t,n,null,r);for(let s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});const Tp=Hi({randomUniformInt_:function(e,t,n,a){return Np(e,t,n,"int32",a)}});function _p(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";if(0===n)throw new Error("Cannot have a step of zero");const r={start:e,stop:t,step:n,dtype:a};return Oi.runKernel(mr,{},r)}const Ep=Hi({real_:function(e){const t={input:Ui(e,"input","real")};return Oi.runKernel(gr,t)}});const Rp=Hi({reciprocal_:function(e){const t={x:Ui(e,"x","reciprocal")};return Oi.runKernel(yr,t)}});const Ap=Hi({relu_:function(e){const t={x:Ui(e,"x","relu")};return Oi.runKernel(br,t)}});const Op=Hi({relu6_:function(e){const t={x:Ui(e,"x","relu6")};return Oi.runKernel(Cr,t)}});const Fp=Hi({reverse_:function(e,t){const n={x:Ui(e,"x","reverse")},a={dims:t};return Oi.runKernel(Ir,n,a)}});const Dp=Hi({reverse1d_:function(e){const t=Ui(e,"x","reverse");return kt(1===t.rank,(()=>"Error in reverse1D: x must be rank 1 but got rank ".concat(t.rank,"."))),Fp(t,0)}});const Mp=Hi({reverse2d_:function(e,t){const n=Ui(e,"x","reverse");return kt(2===n.rank,(()=>"Error in reverse2D: x must be rank 2 but got rank ".concat(n.rank,"."))),Fp(n,t)}});const Pp=Hi({reverse3d_:function(e,t){const n=Ui(e,"x","reverse");return kt(3===n.rank,(()=>"Error in reverse3D: x must be rank 3 but got rank ".concat(n.rank,"."))),Fp(n,t)}});const Lp=Hi({reverse4d_:function(e,t){const n=Ui(e,"x","reverse");return kt(4===n.rank,(()=>"Error in reverse4D: x must be rank 4 but got rank ".concat(n.rank,"."))),Fp(n,t)}});const zp=Hi({round_:function(e){const t={x:Ui(e,"x","round")};return Oi.runKernel(Nr,t)}});const Bp=Hi({rsqrt_:function(e){const t={x:Ui(e,"x","rsqrt","float32")};return Oi.runKernel(Tr,t)}});const Wp=Hi({selu_:function(e){const t={x:Ui(e,"x","selu")};return Oi.runKernel(Or,t)}});const Up=Hi({separableConv2d_:function(e,t,n,a,r){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NHWC";const s=Ui(e,"x","separableConv2d"),c=Ui(t,"depthwiseFilter","separableConv2d"),u=Ui(n,"pointwiseFilter","separableConv2d");let l=s,d=!1;if(3===s.rank&&(d=!0,l=al(s,[1,s.shape[0],s.shape[1],s.shape[2]])),"NCHW"===i)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");kt(4===l.rank,(()=>"Error in separableConv2d: input must be rank 4, but got "+"rank ".concat(l.rank,"."))),kt(4===c.rank,(()=>"Error in separableConv2d: depthwise filter must be rank 4, but "+"got rank ".concat(c.rank,"."))),kt(4===u.rank,(()=>"Error in separableConv2d: pointwise filter must be rank 4, but "+"got rank ".concat(c.rank,"."))),kt(1===u.shape[0],(()=>"Error in separableConv2d: the first dimension of pointwise filter "+" must be 1, but got ".concat(u.shape[0],"."))),kt(1===u.shape[1],(()=>"Error in separableConv2d: the second dimension of pointwise "+"filter must be 1, but got ".concat(u.shape[1],".")));const p=c.shape[2],h=c.shape[3];kt(u.shape[2]===p*h,(()=>"Error in separableConv2d: the third dimension of pointwise filter "+"must be ".concat(p*h,", ")+"but got ".concat(u.shape[2],".")));const f=Wl(l,c,a,r,i,o),m=Tl(f,u,1,"valid",i);return d?al(m,[m.shape[1],m.shape[2],m.shape[3]]):m}});const Vp=async function(e,t){const n=Ui(e,"x","setdiff1d"),a=Ui(t,"y","setdiff1d");kt(n.dtype===a.dtype,(()=>"x and y should have the same dtype, but got x (".concat(n.dtype,") and y (").concat(a.dtype,")."))),kt(1===n.rank,(()=>"x should be 1D tensor, but got x (".concat(n.shape,")."))),kt(1===a.rank,(()=>"y should be 1D tensor, but got y (".concat(a.shape,").")));const r=await n.data(),o=await a.data(),i=new Set(o);let s=0;for(let l=0;l<r.length;l++)i.has(r[l])||s++;const c=new ci([s],n.dtype),u=new ci([s],"int32");for(let l=0,d=0;l<r.length;l++)i.has(r[l])||(c.values[d]=r[l],u.values[d]=l,d++);return[c.toTensor(),u.toTensor()]};const Gp=Hi({sign_:function(e){const t={x:Ui(e,"x","sign")};return Oi.runKernel(Pr,t)}});const Hp=Hi({sin_:function(e){const t={x:Ui(e,"x","sin","float32")};return Oi.runKernel(Dr,t)}});const jp=Hi({sinh_:function(e){const t={x:Ui(e,"x","sinh")};return Oi.runKernel(Mr,t)}});const Kp=Hi({slice1d_:function(e,t,n){const a=Ui(e,"x","slice1d");return kt(1===a.rank,(()=>"slice1d expects a rank-1 tensor, but got a rank-".concat(a.rank," tensor"))),ul(a,[t],[n])}});const qp=Hi({slice2d_:function(e,t,n){const a=Ui(e,"x","slice2d");return kt(2===a.rank,(()=>"slice2d expects a rank-2 tensor, but got a rank-".concat(a.rank," tensor"))),ul(a,t,n)}});const Xp=Hi({slice3d_:function(e,t,n){const a=Ui(e,"x","slice3d");return kt(3===a.rank,(()=>"slice3d expects a rank-3 tensor, but got a rank-".concat(a.rank," tensor"))),ul(a,t,n)}});const Yp=Hi({slice4d_:function(e,t,n){const a=Ui(e,"x","slice4d");return kt(4===a.rank,(()=>"slice4d expects a rank-4 tensor, but got a rank-".concat(a.rank," tensor"))),ul(a,t,n)}});const Qp=Hi({softmax_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;const n=Ui(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and dim was ").concat(t));const a={logits:n},r={dim:t};return Oi.runKernel(Gr,a,r)}});const Zp=Hi({fft_:function(e){kt("complex64"===e.dtype,(()=>"The dtype for tf.spectral.fft() must be complex64 "+"but got ".concat(e.dtype,".")));const t={input:e};return Oi.runKernel(ha,t)}});const $p=Hi({ifft_:function(e){kt("complex64"===e.dtype,(()=>"The dtype for tf.spectral.ifft() must be complex64 "+"but got ".concat(e.dtype,".")));const t={input:e};return Oi.runKernel(Ca,t)}});const Jp=Hi({irfft_:function(e){const t=e.shape[e.shape.length-1],n=e.size/t;let a;if(t<=2){const r=al(e,[n,t]);a=$p(r)}else{const r=[n,2*(t-1)],o=al(Ep(e),[n,t]),i=al(vd(e),[n,t]),s=Fp(ul(o,[0,1],[n,t-2]),1),c=pc(Fp(ul(i,[0,1],[n,t-2]),1),yc(-1)),u=il([o,s],1),l=il([i,c],1),d=al(ji(u,l),[r[0],r[1]]);a=$p(d)}if(a=Ep(a),3===e.rank&&0!==e.shape[0]){const t=a,n=e.shape[0];a=al(a,[n,a.shape[0]/n,a.shape[1]]),t.dispose()}return a}});const eh=Hi({split_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const a={x:Ui(e,"x","split")},r={numOrSizeSplits:t,axis:n};return Oi.runKernel(Vr,a,r)}});const th=Hi({rfft_:function(e,t){kt("float32"===e.dtype,(()=>"The dtype for rfft() must be real value but got ".concat(e.dtype)));let n=e.shape[e.shape.length-1];const a=e.size/n;let r;if(null!=t&&t<n){const a=e.shape.map((e=>0)),o=e.shape.map((e=>e));o[e.shape.length-1]=t,r=ul(e,a,o),n=t}else if(null!=t&&t>n){const a=e.shape.map((e=>e));a[e.shape.length-1]=t-n,r=il([e,qd(a)],e.shape.length-1),n=t}else r=e;const o=mc(r),i=al(ji(r,o),[a,n]),s=Zp(i),c=Math.floor(n/2)+1,u=Ep(s),l=vd(s),d=eh(u,[c,n-c],u.shape.length-1),p=eh(l,[c,n-c],l.shape.length-1),h=r.shape.slice();return h[r.shape.length-1]=c,al(ji(d[0],p[0]),h)}});const nh=Hi({squaredDifference_:function(e,t){let n=Ui(e,"a","squaredDifference"),a=Ui(t,"b","squaredDifference");[n,a]=Ii(n,a),Rc(n.shape,a.shape);const r={a:n,b:a};return Oi.runKernel(Yr,r,{})}});const ah=Hi({squeeze_:function(e,t){const n=Ui(e,"x","squeeze","string_or_numeric");return al(n,Dt(n.shape,t).newShape)}});const rh=Hi({stack_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=Vi(e,"tensors","stack","string_or_numeric");kt(n.length>=1,(()=>"Pass at least one tensor to tf.stack")),n.length>0&&kt(t<=n[0].rank,(()=>"Axis must be <= rank of the tensor"));const a=n,r={axis:t};return Oi.runKernel(sr,a,r)}});const oh=Hi({step_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n={x:Ui(e,"x","step")},a={alpha:t};return Oi.runKernel(fo,n,a)}});const ih=Hi({stridedSlice_:function(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;const u={x:Ui(e,"x","stridedSlice","string_or_numeric")},l={begin:t,end:n,strides:a,beginMask:r,endMask:o,ellipsisMask:i,newAxisMask:s,shrinkAxisMask:c};return Oi.runKernel($r,u,l)}});const sh=Hi({tan_:function(e){const t={x:Ui(e,"x","tan","float32")};return Oi.runKernel(ao,t)}});function ch(e,t){Ct(e);const n=zi(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Ki(e,null,n,t)}function uh(e,t,n){if(Ct(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");const a=zi(e,n);if(2!==a.length&&1!==a.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===a.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Ki(e,t,a,n)}function lh(e,t,n){if(Ct(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");const a=zi(e,n);if(4!==a.length&&1!==a.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===a.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Ki(e,t,a,n)}function dh(e,t,n){if(Ct(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");const a=zi(e,n);if(5!==a.length&&1!==a.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===a.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Ki(e,t,a,n)}function ph(e,t,n){if(Ct(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");const a=zi(e,n);if(6!==a.length&&1!==a.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===a.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return Ki(e,t=t||a,a,n)}const hh=Hi({tensorScatterUpdate_:function(e,t,n){const a=Ui(e,"tensor","tensorScatterupdate"),r=Ui(t,"indices","tensorScatterupdate","int32"),o=Ui(n,"updates","tensorScatterupdate");if(uu(o,r,a.shape),a.dtype!==o.dtype)throw new Error("tensor and updates must have the same dtype, instead they are ".concat(a.dtype," and ").concat(o.dtype,"."));const i={tensor:a,indices:r,updates:o};return Oi.runKernel(Er,i,{})}});const fh=Hi({topk_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const a=Ui(e,"x","topk");if(0===a.rank)throw new Error("topk() expects the input to be of rank 1 or higher");const r=a.shape[a.shape.length-1];if(t<0)throw new Error("'k' passed to topk() must be >= 0 but got ".concat(t));if(t>r)throw new Error("'k' passed to topk() must be <= the last dimension (".concat(r,") ")+"but got ".concat(t));const o={x:a},i={k:t,sorted:n},[s,c]=Oi.runKernel(io,o,i);return{values:s,indices:c}}});const mh=Hi({truncatedNormal_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;if(Yt(e),null!=a&&"bool"===a)throw new Error("Unsupported data type $ { dtype }");const o=new vp(t,n,a,!0,r),i=oc(e,a);for(let s=0;s<i.values.length;s++)i.values[s]=o.nextValue();return i.toTensor()}});const gh=Hi({unique_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=Ui(e,"x","unique","string_or_numeric");kt(n.rank>0,(()=>"The input tensor must be at least 1D"));const a={x:n},r={axis:t},[o,i]=Oi.runKernel(uo,a,r);return{values:o,indices:i}}});const yh=Hi({unsortedSegmentSum_:function(e,t,n){const a=Ui(e,"x","unsortedSegmentSum"),r=Ui(t,"segmentIds","unsortedSegmentSum","int32");kt(_t(n),(()=>"numSegments must be of dtype int"));const o={x:a,segmentIds:r},i={numSegments:n};return Oi.runKernel(po,o,i)}});const bh=Hi({unstack_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=Ui(e,"x","unstack","string_or_numeric");kt(t>=-n.shape.length&&t<n.shape.length,(()=>"Axis = ".concat(t," is not in [-").concat(n.shape.length,", ").concat(n.shape.length,")")));const a={value:n},r={axis:t};return Oi.runKernel(lo,a,r)}});function xh(e,t){return Ud(e,t,"right")}function vh(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;return Oi.makeVariable(e,t,n,a)}function wh(e,t){const n=[];for(let o=0;o<t.length;o++)t[o]&&n.push(o);const a=oc(e,"int32"),r=oc([n.length,e.length],"int32");for(let o=0;o<n.length;o++){const t=a.indexToLoc(n[o]),i=o*e.length;r.values.set(t,i)}return r.toTensor()}const kh=async function(e){const t=Ui(e,"condition","whereAsync","bool"),n=await t.data(),a=wh(t.shape,n);return e!==t&&t.dispose(),a};const Sh=async function(e,t,n){const a=Ui(e,"tensor","boolMask"),r=Ui(t,"mask","boolMask","bool"),o=null==n?0:n,i=r.rank,s=a.shape;kt(i>0,(()=>"mask cannot be scalar")),St(s.slice(o,o+i),r.shape,"mask's shape must match the first K dimensions of tensor's shape,");let c=1;for(let m=o;m<o+i;m++)c*=s[m];const u=s.slice(0,o).concat([c],s.slice(o+i)),l=al(a,u),d=al(r,[-1]),p=await kh(d),h=ah(p,[1]),f=yd(l,h,o);return e!==a&&a.dispose(),t!==r&&r.dispose(),h.dispose(),l.dispose(),d.dispose(),p.dispose(),f};const Ch=Hi({transpose_:function(e,t,n){const a=Ui(e,"x","transpose");if(null==t&&(t=a.shape.map(((e,t)=>t)).reverse()),kt(a.rank===t.length,(()=>"Error in transpose: rank of input ".concat(a.rank," ")+"must match length of perm ".concat(t,"."))),t.forEach((e=>{kt(e>=0&&e<a.rank,(()=>"All entries in 'perm' must be between 0 and ".concat(a.rank-1)+" but got ".concat(t)))})),a.rank<=1)return a.clone();const r={x:a},o={perm:t};return"complex64"===a.dtype?Zi((()=>{let e=Ep(a),t=vd(a);return e=Oi.runKernel(co,{x:e},o),t=Oi.runKernel(co,{x:t},o),n&&(t=Ad(t)),ji(e,t)})):Oi.runKernel(co,r,o)}});const Ih=Hi({movingAverage_:function(e,t,n,a){let r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];const o=Ui(e,"v","movingAverage"),i=Ui(t,"x","movingAverage"),s=Ui(n,"decay","movingAverage");var c,u;u=i,kt((c=o).dtype===u.dtype,(()=>"The dtypes of the first(".concat(c.dtype,") and")+" second(".concat(u.dtype,") input must match"))),kt(Tt(o.shape,i.shape),(()=>"Shape mismatch in v and x"));const l=yc(1),d=Nc(l,s);let p=pc(Nc(i,o),d);if(r){kt(null!=a,(()=>"When using zeroDebias: true, step is required."));const e=Ui(a,"step","movingAverage");p=dc(p,Nc(l,Ic(s,e)))}return uc(o,p)}});const Nh=Hi({scatterND_:function(e,t,n){Yt(n);const a=Ui(e,"indices","scatterND","int32"),r=Ui(t,"updates","scatterND");uu(r,a,n);const o={indices:a,updates:r},i={shape:n};return Oi.runKernel(_r,o,i)}});const Th=Hi({sparseToDense_:function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;Yt(n);const r=Ui(e,"sparseIndices","sparseToDense","int32"),o=Ui(t,"sparseValues","sparseToDense","string_or_numeric"),i=Ui(a,"defaultValue","sparseToDense",o.dtype);!function(e,t,n,a){if("int32"!==e.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type,"+" but the dtype was ".concat(e.dtype,"."));if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix,"+" but got shape ".concat(e.shape,"."));const r=e.rank>0?e.shape[0]:1,o=e.rank>1?e.shape[1]:1;if(n.length!==o)throw new Error("outputShape has incorrect number of elements:,"+" ".concat(n.length,", should be: ").concat(o,"."));const i=t.size;if(0!==t.rank&&(1!==t.rank||i!==r))throw new Error("sparseValues has incorrect shape "+"".concat(t.shape,", should be [] or [").concat(r,"]"));if(t.dtype!==a.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(r,o,n,i);const s={sparseIndices:r,sparseValues:o,defaultValue:i},c={outputShape:n};return Oi.runKernel(Xr,s,c)}});const _h=Hi({gatherND_:function(e,t){const n=Ui(t,"indices","gatherND","int32"),a={params:Ui(e,"x","gatherND","string_or_numeric"),indices:n};return Oi.runKernel(va,a)}});const Eh=Hi({dropout_:function(e,t,n,a){const r=Ui(e,"x","dropout");if(kt("float32"===r.dtype,(()=>"x has to be a floating point tensor since it's going to be "+"scaled, but got a ".concat(r.dtype," tensor instead."))),kt(t>=0&&t<1,(()=>"rate must be a float in the range [0, 1), but got ".concat(t,"."))),0===t)return e instanceof pi?r.clone():r;const o=function(e,t){if(null==t)return e.shape.slice();if(Tt(e.shape,t))return t;if(e.shape.length===t.length){const n=[];for(let a=0;a<e.shape.length;a++)null==t[a]&&null!=e.shape[a]?n.push(e.shape[a]):n.push(t[a]);return n}return t}(r,n),i=1-t,s=dc(gd(uc(Np(o,0,1,"float32",a),i)),i);return pc(r,s)}});function Rh(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function Ah(e,t,n){const a=1-e%2,r=new Float32Array(e);for(let o=0;o<e;++o){const i=2*Math.PI*o/(e+a-1);r[o]=t-n*Math.cos(i)}return ch(r,"float32")}const Oh=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const a=Ui(e,"predictions","inTopK"),r=Ui(t,"targets","inTopK");kt(a.rank>1,(()=>"inTopK() expects the predictions to be of rank 2 or higher, "+"but got ".concat(a.rank))),kt(a.rank-1===r.rank,(()=>"predictions rank should be 1 larger than targets rank, but got predictions rank "+"".concat(a.rank," and targets rank ").concat(r.rank))),St(a.shape.slice(0,a.shape.length-1),r.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const o=a.shape[a.shape.length-1];kt(n>0&&n<=o,(()=>"'k' passed to inTopK() must be > 0 && <= the predictions last "+"dimension (".concat(o,"), but got ").concat(n)));const i=await a.data(),s=await r.data(),[c,u]=[i.length/o,o],l=Mt("bool",c);for(let d=0;d<c;d++){const e=d*u,t=i.subarray(e,e+u),a=[];for(let n=0;n<t.length;n++)a.push({value:t[n],index:n});a.sort(((e,t)=>t.value-e.value)),l[d]=0;for(let r=0;r<n;r++)if(a[r].index===s[d]){l[d]=1;break}}return e!==a&&a.dispose(),t!==r&&r.dispose(),qi(l,r.shape,"bool")};const Fh=Hi({conv2DBackpropFilter_:function(e,t,n,a,r){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",i=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=al(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let c=t;3===c.rank&&(c=al(t,[1,t.shape[0],t.shape[1],t.shape[2]])),kt(4===s.rank,(()=>"Error in conv2dDerFilter: input must be rank 4, but got shape "+"".concat(s.shape,"."))),kt(4===c.rank,(()=>"Error in conv2dDerFilter: dy must be rank 4, but got shape "+"".concat(c.shape,"."))),kt(4===n.length,(()=>"Error in conv2dDerFilter: filterShape must be length 4, but got "+"".concat(n,".")));const u="NHWC"===o?s.shape[3]:s.shape[1],l="NHWC"===o?c.shape[3]:c.shape[1];kt(u===n[2],(()=>"Error in conv2dDerFilter: depth of input ".concat(u,") must ")+"match input depth in filter (".concat(n[2],"."))),kt(l===n[3],(()=>"Error in conv2dDerFilter: depth of dy (".concat(l,") must ")+"match output depth for filter (".concat(n[3],")."))),nl("conv2dDerFilter",r,i);const d={x:s,dy:c},p={strides:a,pad:r,dataFormat:o,dimRoundingMode:i,filterShape:n};return Oi.runKernel(zn,d,p)}});function Dh(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return pc(e,oh(t));throw new Error("Cannot compute gradient for fused activation ".concat(n,"."))}function Mh(e,t){let n=t;const a=Ec(e.shape,t.shape);return a.length>0&&(n=sd(n,a)),al(n,e.shape)}function Ph(e,t,n,a){if("linear"===t)return e;if("relu"===t)return Ap(e);if("elu"===t)return Xl(e);if("relu6"===t)return Op(e);if("prelu"===t)return hp(e,n);if("leakyrelu"===t)return Cd(e,a);if("sigmoid"===t)return cl(e);throw new Error("Unknown fused activation ".concat(t,"."))}const Lh=(e,t)=>!(e>0)||"linear"===t;const zh=Hi({fusedConv2d_:function(e){let{x:t,filter:n,strides:a,pad:r,dataFormat:o="NHWC",dilations:i=[1,1],dimRoundingMode:s,bias:c,activation:u="linear",preluActivationWeights:l,leakyreluAlpha:d}=e;if(u=u||"linear",!1===Lh(Oi.state.gradientDepth,u)){kt("NHWC"===o,(()=>"Error in fused conv2d: got dataFormat of ".concat(o," but ")+"only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear."));let e=Tl(t,n,a,r,o,i,s);return null!=c&&(e=uc(e,c)),Ph(e,u,l,d)}const p=Ui(t,"x","conv2d","float32"),h=Ui(n,"filter","conv2d","float32");let f=p,m=!1;3===p.rank&&(m=!0,f=al(p,[1,p.shape[0],p.shape[1],p.shape[2]])),kt(4===f.rank,(()=>"Error in fused conv2d: input must be rank 4, but got rank "+"".concat(f.rank,"."))),kt(4===h.rank,(()=>"Error in fused conv2d: filter must be rank 4, but got rank "+"".concat(h.rank,"."))),nl("fused conv2d",r,s);const g="NHWC"===o?f.shape[3]:f.shape[1];kt(h.shape[2]===g,(()=>"Error in conv2d: depth of input (".concat(g,") must match ")+"input depth for filter ".concat(h.shape[2],"."))),kt(Ju(a,i),(()=>"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(a," and dilations '").concat(i,"'")));const y=ju(f.shape,h.shape,a,i,r,s);let b,x;if(null!=c&&(b=Ui(c,"bias","fused conv2d"),[b]=Ii(b,p),"NHWC"===o?Rc(y.outShape,b.shape):(kt(b.shape.length<=1,(()=>"Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of "+"rank-".concat(b.shape.length,"."))),kt(0===b.shape.length||b.shape[0]===y.outChannels||1===b.shape[0],(()=>"Error in fused conv2d: bias shape (".concat(b.shape,") is not ")+"compatible with the number of output channels "+"(".concat(y.outChannels,")"))))),null!=l){const e=l.shape;if(kt(e.length<=1||3===e.length,(()=>"Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of "+"rank-".concat(e.length,"."))),1===e.length)kt(1===e[0]||e[0]===y.outChannels,(()=>"Error in fused conv2d: PReLU activation weights "+"(".concat(e,") is not compatible with the number of output ")+"channels (".concat(y.outChannels,").")));else if(3===e.length)try{Rc(e,y.outShape)}catch(jj){const n="Error in fused conv2d: PReLU activation weights (".concat(e,") ")+"is not compatible with the output shape of the conv2d "+"(".concat(y.outShape,").");throw Error(n)}x=Ui(l,"prelu weights","fused conv2d")}const v=(e,t)=>{kt("NHWC"===o,(()=>"Error in gradient of fused conv2D: got dataFormat of ".concat(o," but only NHWC is currently supported.")));const[n,s,c,l]=t,d=Dh(e,c,u);kt($u(i),(()=>"Error in gradient of fused conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(i,"'")));const p=[El(s.shape,d,n,a,r),Fh(s,d,n.shape,a,r)];if(null!=l){const e=Mh(l,d);p.push(e)}return p},w={x:f,filter:h,bias:b,preluActivationWeights:x},k={strides:a,pad:r,dataFormat:o,dilations:i,dimRoundingMode:s,activation:u,leakyreluAlpha:d};if(null==c){const e=gc(((e,t,n)=>{let a=Oi.runKernel(bo,w,k);return n([t,e,a]),m&&(a=al(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:v}}));return e(f,h)}{const e=gc(((e,t,n,a)=>{let r=Oi.runKernel(bo,w,k);return a([t,e,r,n]),m&&(r=al(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:v}}));return e(f,h,b)}}});const Bh=Hi({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,a,r){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=al(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let c=t;3===c.rank&&(c=al(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const u={x:s,dy:c},l={strides:a,pad:r,dimRoundingMode:i,dilations:o,filterShape:n};return Oi.runKernel(Zn,u,l)}});const Wh=Hi({depthwiseConv2dNativeBackpropInput_:function(e,t,n,a,r){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6?arguments[6]:void 0,s=t,c=!1;3===t.rank&&(c=!0,s=al(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const u={dy:s,filter:n},l={strides:a,pad:r,dimRoundingMode:i,dilations:o,inputShape:e},d=Oi.runKernel($n,u,l);return c?al(d,[d.shape[1],d.shape[2],d.shape[3]]):d}});const Uh=Hi({fusedDepthwiseConv2d_:function(e){let{x:t,filter:n,strides:a,pad:r,dataFormat:o="NHWC",dilations:i=[1,1],dimRoundingMode:s,bias:c,activation:u="linear",preluActivationWeights:l,leakyreluAlpha:d}=e;if(!1===Lh(Oi.state.gradientDepth,u)){let e=Wl(t,n,a,r,o,i,s);return null!=c&&(e=uc(e,c)),Ph(e,u,l,d)}const p=Ui(t,"x","depthwiseConv2d","float32"),h=Ui(n,"filter","depthwiseConv2d","float32");let f=p,m=!1;3===p.rank&&(m=!0,f=al(p,[1,p.shape[0],p.shape[1],p.shape[2]])),kt(4===f.rank,(()=>"Error in fused depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(f.rank,"."))),kt(4===h.rank,(()=>"Error in fused depthwiseConv2d: filter must be rank 4, "+"but got rank ".concat(h.rank,"."))),kt(f.shape[3]===h.shape[2],(()=>"Error in fused depthwiseConv2d: number of input channels "+"(".concat(f.shape[3],") must match the inChannels dimension in ")+"filter ".concat(h.shape[2],"."))),null==i&&(i=[1,1]),kt(Ju(a,i),(()=>"Error in fused depthwiseConv2d: Either strides or dilations must "+"be 1. Got strides ".concat(a," and dilations '").concat(i,"'"))),nl("fused depthwiseConv2d",r,s);const g=ju(f.shape,h.shape,a,i,r,s,!0);let y,b;null!=c&&(y=Ui(c,"bias","fused conv2d"),[y]=Ii(y,p),Rc(g.outShape,y.shape)),null!=l&&(b=Ui(l,"prelu weights","fused depthwiseConv2d"));const x=(e,t)=>{kt($u(i),(()=>"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(i,"'")));const[n,o,c,l]=t,d=Dh(e,c,u),p=Wh(o.shape,d,n,a,r,i,s),h=Bh(o,d,n.shape,a,r,i,s);if(null!=l){return[p,h,Mh(y,d)]}return[p,h]},v={x:f,filter:h,bias:y,preluActivationWeights:b},w={strides:a,pad:r,dataFormat:o,dilations:i,dimRoundingMode:s,activation:u,leakyreluAlpha:d};if(null==c){const e=gc(((e,t,n)=>{let a=Oi.runKernel(xo,v,w);return n([t,e,a]),m&&(a=al(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:x}}));return e(f,h)}{const e=gc(((e,t,n,a)=>{let r=Oi.runKernel(xo,v,w);return a([t,e,r,n]),m&&(r=al(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:x}}));return e(f,h,y)}}});const Vh=Hi({fusedMatMul_:function(e){let{a:t,b:n,transposeA:a=!1,transposeB:r=!1,bias:o,activation:i="linear",preluActivationWeights:s,leakyreluAlpha:c=.2}=e;if(!1===Lh(Oi.state.gradientDepth,i)){let e=sl(t,n,a,r);return null!=o&&(e=uc(e,o)),Ph(e,i,s,c)}let u=Ui(t,"a","fused matMul"),l=Ui(n,"b","fused matMul");[u,l]=Ii(u,l);const d=a?u.shape[u.rank-2]:u.shape[u.rank-1],p=r?l.shape[l.rank-1]:l.shape[l.rank-2],h=a?u.shape[u.rank-1]:u.shape[u.rank-2],f=r?l.shape[l.rank-2]:l.shape[l.rank-1],m=u.shape.slice(0,-2),g=l.shape.slice(0,-2),y=It(m),b=It(g);kt(d===p,(()=>"Error in fused matMul: inner shapes (".concat(d,") and (")+"".concat(p,") of Tensors with shapes ").concat(u.shape," and ")+"".concat(l.shape," and transposeA=").concat(a)+" and transposeB=".concat(r," must match.")));const x=Rc(u.shape.slice(0,-2),l.shape.slice(0,-2)).concat([h,f]),v=al(u,a?[y,d,h]:[y,h,d]),w=al(l,r?[b,f,p]:[b,p,f]);let k,S;null!=o&&(k=Ui(o,"bias","fused matMul"),[k]=Ii(k,u),Rc(x,k.shape)),null!=s&&(S=Ui(s,"prelu weights","fused matMul"));const C=(e,t)=>{const[n,s,c,u]=t,l=Dh(al(e,c.shape),c,i);let d,p;if(a||r?!a&&r?(d=sl(l,s,!1,!1),p=sl(l,n,!0,!1)):a&&!r?(d=sl(s,l,!1,!0),p=sl(n,l,!1,!1)):(d=sl(s,l,!0,!0),p=sl(l,n,!0,!0)):(d=sl(l,s,!1,!0),p=sl(n,l,!0,!1)),null!=o){return[d,p,Mh(u,l)]}return[d,p]},I={a:v,b:w,bias:k,preluActivationWeights:S},N={transposeA:a,transposeB:r,activation:i,leakyreluAlpha:c};if(null==o){const e=gc(((e,t,n)=>{const a=Oi.runKernel(yo,I,N);return n([e,t,a]),{value:al(a,x),gradFunc:C}}));return e(v,w)}{const e=gc(((e,t,n,a)=>{const r=Oi.runKernel(yo,I,N);return a([e,t,r,n]),{value:al(r,x),gradFunc:C}}));return e(v,w,k)}}});const Gh=Hi({hammingWindow_:function(e){return Ah(e,.54,.46)}});const Hh=Hi({hannWindow_:function(e){return Ah(e,.5,.5)}});const jh=Hi({frame_:function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=0;const i=[];for(;o+t<=e.size;)i.push(ul(e,o,t)),o+=n;if(a)for(;o<e.size;){const a=o+t-e.size,s=il([ul(e,o,t-a),Cc([a],r)]);i.push(s),o+=n}return 0===i.length?uh([],[0,t]):al(il(i),[i.length,t])}});const Kh=Hi({stft_:function(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Hh;null==a&&(a=Rh(t));const o=jh(e,t,n),i=pc(o,r(t));return th(i,a)}});const qh=Hi({cropAndResize_:function(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"bilinear",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const i=Ui(e,"image","cropAndResize"),s=Ui(t,"boxes","cropAndResize","float32"),c=Ui(n,"boxInd","cropAndResize","int32"),u=s.shape[0];kt(4===i.rank,(()=>"Error in cropAndResize: image must be rank 4,"+"but got rank ".concat(i.rank,"."))),kt(2===s.rank&&4===s.shape[1],(()=>"Error in cropAndResize: boxes must be have size [".concat(u,",4] ")+"but had shape ".concat(s.shape,"."))),kt(1===c.rank&&c.shape[0]===u,(()=>"Error in cropAndResize: boxInd must be have size [".concat(u,"] ")+"but had shape ".concat(s.shape,"."))),kt(2===a.length,(()=>"Error in cropAndResize: cropSize must be of length 2, but got "+"length ".concat(a.length,"."))),kt(a[0]>=1&&a[1]>=1,(()=>"cropSize must be atleast [1,1], but was ".concat(a))),kt("bilinear"===r||"nearest"===r,(()=>"method must be bilinear or nearest, but was ".concat(r)));const l={image:i,boxes:s,boxInd:c},d={method:r,extrapolationValue:o,cropSize:a};return Oi.runKernel(qn,l,d)}});const Xh=Hi({flipLeftRight_:function(e){const t=Ui(e,"image","flipLeftRight","float32");kt(4===t.rank,(()=>"Error in flipLeftRight: image must be rank 4,"+"but got rank ".concat(t.rank,".")));const n={image:t};return Oi.runKernel(ma,n,{})}});const Yh=Hi({grayscaleToRGB_:function(e){const t=Ui(e,"image","grayscaleToRGB"),n=t.rank-1,a=t.shape[n];kt(t.rank>=2,(()=>"Error in grayscaleToRGB: images must be at least rank 2, "+"but got rank ".concat(t.rank,"."))),kt(1===a,(()=>"Error in grayscaleToRGB: last dimension of a grayscale image "+"should be size 1, but got size ".concat(a,".")));const r=new Array(t.rank);return r.fill(1,0,n),r[n]=3,fd(t,r)}});const Qh=Hi({rgbToGrayscale_:function(e){const t=Ui(e,"image","RGBToGrayscale"),n=t.rank-1,a=t.shape[n];kt(t.rank>=2,(()=>"Error in RGBToGrayscale: images must be at least rank 2, "+"but got rank ".concat(t.rank,"."))),kt(3===a,(()=>"Error in RGBToGrayscale: last dimension of an RGB image "+"should be size 3, but got size ".concat(a,".")));const r=t.dtype,o=ic(t,"float32"),i=ch([.2989,.587,.114]);let s;switch(t.rank){case 2:s=ql("ij,j->i",o,i);break;case 3:s=ql("ijk,k->ij",o,i);break;case 4:s=ql("ijkl,l->ijk",o,i);break;case 5:s=ql("ijklm,m->ijkl",o,i);break;case 6:s=ql("ijklmn,n->ijklm",o,i);break;default:throw new Error("Not a valid tensor rank.")}return s=pd(s,-1),ic(s,r)}});const Zh=Hi({rotateWithOffset_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;const r=Ui(e,"image","rotateWithOffset","float32");kt(4===r.rank,(()=>"Error in rotateWithOffset: image must be rank 4,"+"but got rank ".concat(r.rank,".")));const o={image:r},i={radians:t,fillValue:n,center:a};return Oi.runKernel(go,o,i)}});function $h(e,t,n,a,r,o){null==a&&(a=.5),null==r&&(r=Number.NEGATIVE_INFINITY),null==o&&(o=0);const i=e.shape[0];return n=Math.min(n,i),kt(0<=a&&a<=1,(()=>"iouThreshold must be in [0, 1], but was '".concat(a,"'"))),kt(2===e.rank,(()=>"boxes must be a 2D tensor, but was of rank '".concat(e.rank,"'"))),kt(4===e.shape[1],(()=>"boxes must have 4 columns, but 2nd dimension was ".concat(e.shape[1]))),kt(1===t.rank,(()=>"scores must be a 1D tensor")),kt(t.shape[0]===i,(()=>"scores has incompatible shape with boxes. Expected ".concat(i,", ")+"but was ".concat(t.shape[0]))),kt(0<=o&&o<=1,(()=>"softNmsSigma must be in [0, 1], but was '".concat(o,"'"))),{maxOutputSize:n,iouThreshold:a,scoreThreshold:r,softNmsSigma:o}}const Jh=Hi({nonMaxSuppression_:function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY;const o=Ui(e,"boxes","nonMaxSuppression","float32"),i=Ui(t,"scores","nonMaxSuppression","float32"),s=$h(o,i,n,a,r);n=s.maxOutputSize,a=s.iouThreshold,r=s.scoreThreshold;const c={maxOutputSize:n,iouThreshold:a,scoreThreshold:r};return Oi.runKernel(nr,{boxes:o,scores:i},c)}});function ef(e,t,n){const a=function(e,t,n){return function(e,t,n){let a=0,r=e.length,o=0,i=!1;for(;a<r;){o=a+(r-a>>>1);const s=n(t,e[o]);s>0?a=o+1:(r=o,i=!s)}return i?a:-a-1}(e,t,n||tf)}(e,t,n),r=a<0?-(a+1):a;e.splice(r,0,t)}function tf(e,t){return e>t?1:e<t?-1:0}function nf(e,t,n,a,r){return of(e,t,n,a,r,0)}function af(e,t,n,a,r,o){return of(e,t,n,a,r,0,!1,o,!0)}function rf(e,t,n,a,r,o){return of(e,t,n,a,r,o,!0)}function of(e,t,n,a,r,o){let i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8&&void 0!==arguments[8]&&arguments[8];const u=[];for(let g=0;g<t.length;g++)t[g]>r&&u.push({score:t[g],boxIndex:g,suppressBeginIndex:0});u.sort(uf);const l=o>0?-.5/o:0,d=[],p=[];for(;d.length<n&&u.length>0;){const t=u.pop(),{score:n,boxIndex:o,suppressBeginIndex:i}=t;if(n<r)break;let s=!1;for(let c=d.length-1;c>=i;--c){const n=sf(e,o,d[c]);if(n>=a){s=!0;break}if(t.score=t.score*cf(a,l,n),t.score<=r)break}t.suppressBeginIndex=d.length,s||(t.score===n?(d.push(o),p.push(t.score)):t.score>r&&ef(u,t,uf))}const h=d.length,f=n-h;s&&f>0&&(d.push(...new Array(f).fill(0)),p.push(...new Array(f).fill(0)));const m={selectedIndices:d};return i&&(m.selectedScores=p),c&&(m.validOutputs=h),m}function sf(e,t,n){const a=e.subarray(4*t,4*t+4),r=e.subarray(4*n,4*n+4),o=Math.min(a[0],a[2]),i=Math.min(a[1],a[3]),s=Math.max(a[0],a[2]),c=Math.max(a[1],a[3]),u=Math.min(r[0],r[2]),l=Math.min(r[1],r[3]),d=Math.max(r[0],r[2]),p=Math.max(r[1],r[3]),h=(s-o)*(c-i),f=(d-u)*(p-l);if(h<=0||f<=0)return 0;const m=Math.max(o,u),g=Math.max(i,l),y=Math.min(s,d),b=Math.min(c,p),x=Math.max(y-m,0)*Math.max(b-g,0);return x/(h+f-x)}function cf(e,t,n){const a=Math.exp(t*n*n);return n<=e?a:0}function uf(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}const lf=async function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY;const o=Ui(e,"boxes","nonMaxSuppressionAsync"),i=Ui(t,"scores","nonMaxSuppressionAsync"),s=$h(o,i,n,a,r);n=s.maxOutputSize,a=s.iouThreshold,r=s.scoreThreshold;const c=await Promise.all([o.data(),i.data()]),u=c[0],l=c[1],{selectedIndices:d}=nf(u,l,n,a,r);return o!==e&&o.dispose(),i!==t&&i.dispose(),ch(d,"int32")};const df=Hi({nonMaxSuppressionWithScore_:function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const i=Ui(e,"boxes","nonMaxSuppression"),s=Ui(t,"scores","nonMaxSuppression"),c=$h(i,s,n,a,r,o);n=c.maxOutputSize,a=c.iouThreshold,r=c.scoreThreshold,o=c.softNmsSigma;const u={boxes:i,scores:s},l={maxOutputSize:n,iouThreshold:a,scoreThreshold:r,softNmsSigma:o},d=Oi.runKernel(rr,u,l);return{selectedIndices:d[0],selectedScores:d[1]}}});const pf=async function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const i=Ui(e,"boxes","nonMaxSuppressionAsync"),s=Ui(t,"scores","nonMaxSuppressionAsync"),c=$h(i,s,n,a,r,o);n=c.maxOutputSize,a=c.iouThreshold,r=c.scoreThreshold,o=c.softNmsSigma;const u=await Promise.all([i.data(),s.data()]),l=u[0],d=u[1],{selectedIndices:p,selectedScores:h}=rf(l,d,n,a,r,o);return i!==e&&i.dispose(),s!==t&&s.dispose(),{selectedIndices:ch(p,"int32"),selectedScores:ch(h)}};const hf=Hi({nonMaxSuppressionPadded_:function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const i=Ui(e,"boxes","nonMaxSuppression"),s=Ui(t,"scores","nonMaxSuppression"),c=$h(i,s,n,a,r,null),u={boxes:i,scores:s},l={maxOutputSize:c.maxOutputSize,iouThreshold:c.iouThreshold,scoreThreshold:c.scoreThreshold,padToMaxOutputSize:o},d=Oi.runKernel(ar,u,l);return{selectedIndices:d[0],validOutputs:d[1]}}});const ff=async function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const i=Ui(e,"boxes","nonMaxSuppressionAsync"),s=Ui(t,"scores","nonMaxSuppressionAsync"),c=$h(i,s,n,a,r,null),u=c.maxOutputSize,l=c.iouThreshold,d=c.scoreThreshold,[p,h]=await Promise.all([i.data(),s.data()]),{selectedIndices:f,validOutputs:m}=af(p,h,u,l,d,o);return i!==e&&i.dispose(),s!==t&&s.dispose(),{selectedIndices:ch(f,"int32"),validOutputs:yc(m,"int32")}};const mf=Hi({resizeBilinear_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=Ui(e,"images","resizeBilinear");kt(3===r.rank||4===r.rank,(()=>"Error in resizeBilinear: x must be rank 3 or 4, but got "+"rank ".concat(r.rank,"."))),kt(2===t.length,(()=>"Error in resizeBilinear: new shape must 2D, but got shape "+"".concat(t,"."))),kt(!1===a||!1===n,(()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."));let o=r,i=!1;3===r.rank&&(i=!0,o=al(r,[1,r.shape[0],r.shape[1],r.shape[2]]));const[]=t,s={images:o},c={alignCorners:n,halfPixelCenters:a,size:t},u=Oi.runKernel(kr,s,c);return i?al(u,[u.shape[1],u.shape[2],u.shape[3]]):u}});const gf=Hi({resizeNearestNeighbor_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=Ui(e,"images","resizeNearestNeighbor");kt(3===r.rank||4===r.rank,(()=>"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got "+"rank ".concat(r.rank,"."))),kt(2===t.length,(()=>"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+"".concat(t,"."))),kt("float32"===r.dtype||"int32"===r.dtype,(()=>"`images` must have `int32` or `float32` as dtype")),kt(!1===a||!1===n,(()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."));let o=r,i=!1;3===r.rank&&(i=!0,o=al(r,[1,r.shape[0],r.shape[1],r.shape[2]]));const[]=t,s={images:o},c={alignCorners:n,halfPixelCenters:a,size:t},u=Oi.runKernel(vr,s,c);return i?al(u,[u.shape[1],u.shape[2],u.shape[3]]):u}});const yf=Hi({threshold_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"binary",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;const r=Ui(e,"image","threshold"),o=r.shape[0]*r.shape[1];let i,s,c,u,l=pc(ch([a]),255);if(kt(3===r.rank,(()=>"Error in threshold: image must be rank 3,"+"but got rank ".concat(r.rank,"."))),kt(3===r.shape[2]||1===r.shape[2],(()=>"Error in threshold: image color channel must be equal to 3 or 1"+"but got ".concat(r.shape[2],"."))),kt("int32"===r.dtype||"float32"===r.dtype,(()=>"Error in dtype: image dtype must be int32 or float32,"+"but got dtype ".concat(r.dtype,"."))),kt("otsu"===t||"binary"===t,(()=>"Method must be binary or otsu, but was ".concat(t))),3===r.shape[2]){[i,s,c]=eh(r,[1,1,1],-1);const e=pc(i,.2989),t=pc(s,.587),n=pc(c,.114);u=uc(uc(e,t),n)}else u=e;if("otsu"===t){l=function(e,t){let n,a,r,o,i,s,c=ch([-1]),u=ch([0]),l=ch([0]);for(let d=0;d<e.size-1;d++){n=ul(e,0,d+1),a=ul(e,d+1),i=dc(sd(n),t),s=dc(sd(a),t);const p=sd(pc(n,_p(0,n.size)));r=dc(p,sd(n));const h=Cc(a.shape,n.size),f=uc(_p(0,a.size),h),m=pc(a,f);o=dc(sd(m),sd(a));const g=Nc(r,o),y=Nc(r,o),b=pc(i,s);l=pc(pc(b,g),y);const x=bd(l,u);u=Hl(x,l,u),c=Hl(x,ch([d]),c)}return c}(yl(ic(zp(u),"int32"),qi([]),256),o)}const d=n?Nd(u,l):bd(u,l);return ic(pc(d,255),"int32")}});const bf=Hi({transform_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nearest",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"constant",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5?arguments[5]:void 0;const i=Ui(e,"image","transform","float32"),s=Ui(t,"transforms","transform","float32");kt(4===i.rank,(()=>"Error in transform: image must be rank 4,"+"but got rank ".concat(i.rank,"."))),kt(2===s.rank&&(s.shape[0]===i.shape[0]||1===s.shape[0])&&8===s.shape[1],(()=>"Error in transform: Input transform should be batch x 8 or 1 x 8")),kt(null==o||2===o.length,(()=>"Error in transform: outputShape must be [height, width] or null, "+"but got ".concat(o,".")));const c={image:i,transforms:s},u={interpolation:n,fillMode:a,fillValue:r,outputShape:o};return Oi.runKernel(so,c,u)}});const xf=Hi({bandPart_:function(e,t,n){const a=Ui(e,"a","bandPart");kt(a.rank>=2,(()=>"bandPart(): Rank must be at least 2, got ".concat(a.rank,".")));const r=a.shape,[o,i]=a.shape.slice(-2);let s,c;"number"===typeof t?(kt(t%1===0,(()=>"bandPart(): numLower must be an integer, got ".concat(t,"."))),kt(t<=o,(()=>"bandPart(): numLower (".concat(t,")")+" must not be greater than the number of rows (".concat(o,")."))),s=Ui(t<0?o:t,"numLower","bandPart")):(kt("int32"===t.dtype,(()=>"bandPart(): numLower's dtype must be an int32.")),s=Hl(Id(t,0),o,Qd(t,o))),"number"===typeof n?(kt(n%1===0,(()=>"bandPart(): numUpper must be an integer, got ".concat(n,"."))),kt(n<=i,(()=>"bandPart(): numUpper (".concat(n,")")+" must not be greater than the number of columns (".concat(i,")."))),c=Ui(n<0?i:n,"numUpper","bandPart")):(kt("int32"===n.dtype,(()=>"bandPart(): numUpper's dtype must be an int32.")),c=Hl(Id(n,0),i,Qd(n,i)));const u=al(_p(0,o,1,"int32"),[-1,1]),l=_p(0,i,1,"int32"),d=Nc(u,l),p=Pd(Nd(d,s),xd(d,Ad(c))),h=qd([o,i],a.dtype);return al(rh(bh(al(a,[-1,o,i])).map((e=>Hl(p,e,h)))),r)}});const vf=Hi({gramSchmidt_:function(e){let t;if(Array.isArray(e)){t=!1,kt(null!=e&&e.length>0,(()=>"Gram-Schmidt process: input must not be null, undefined, or empty"));const n=e[0].shape[0];for(let t=1;t<e.length;++t)kt(e[t].shape[0]===n,(()=>"Gram-Schmidt: Non-unique lengths found in the input vectors: "+"(".concat(e[t].shape[0]," vs. ").concat(n,")")))}else t=!0,e=eh(e,e.shape[0],0).map((e=>ah(e,[0])));kt(e.length<=e[0].shape[0],(()=>"Gram-Schmidt: Number of vectors (".concat(e.length,") exceeds ")+"number of dimensions (".concat(e[0].shape[0],").")));const n=[],a=e;for(let r=0;r<e.length;++r)n.push(Oi.tidy((()=>{let e=a[r];if(r>0)for(let t=0;t<r;++t){const a=pc(sd(pc(n[t],e)),n[t]);e=Nc(e,a)}return dc(e,ud(e,"euclidean"))})));return t?rh(n,0):n}});function wf(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Oi.tidy((()=>{kt(2===e.shape.length,(()=>"qr2d() requires a 2D Tensor, but got a ".concat(e.shape.length,"D Tensor.")));const n=e.shape[0],a=e.shape[1];let r=md(n),o=sc(e);const i=uh([[1]],[1,1]);let s=sc(i);const c=n>=a?a:n;for(let e=0;e<c;++e){const t=o,c=s,u=r;[s,o,r]=Oi.tidy((()=>{const t=ul(o,[e,e],[n-e,1]),c=ud(t),u=ul(o,[e,e],[1,1]),l=Hl(bd(u,0),uh([[-1]]),uh([[1]])),d=Nc(u,pc(l,c)),p=dc(t,d);s=1===p.shape[0]?sc(i):il([i,ul(p,[1,0],[p.shape[0]-1,p.shape[1]])],0);const h=Ad(dc(sl(l,d),c)),f=ul(o,[e,0],[n-e,a]),m=pc(h,s),g=Ch(s);if(0===e)o=Nc(f,sl(m,sl(g,f)));else{const t=Nc(f,sl(m,sl(g,f)));o=il([ul(o,[0,0],[e,a]),t],0)}const y=Ch(m),b=ul(r,[0,e],[n,r.shape[1]-e]);if(0===e)r=Nc(b,sl(sl(b,s),y));else{const t=Nc(b,sl(sl(b,s),y));r=il([ul(r,[0,0],[n,e]),t],1)}return[s,o,r]})),$i([t,c,u])}return!t&&n>a&&(r=ul(r,[0,0],[n,a]),o=ul(o,[0,0],[a,a])),[r,o]}))}const kf=Hi({qr_:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(kt(e.rank>=2,(()=>"qr() requires input tensor to have a rank >= 2, but got rank ".concat(e.rank))),2===e.rank)return wf(e,t);{const n=e.shape.slice(0,e.shape.length-2).reduce(((e,t)=>e*t)),a=bh(al(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),r=[],o=[];a.forEach((e=>{const[n,a]=wf(e,t);r.push(n),o.push(a)}));return[al(rh(r,0),e.shape),al(rh(o,0),e.shape)]}}});var Sf;!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(Sf||(Sf={}));const Cf=Hi({computeWeightedLoss_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Sf.SUM_BY_NONZERO_WEIGHTS;const a=Ui(e,"losses","computeWeightedLoss");let r=null;null!=t&&(r=Ui(t,"weights","computeWeightedLoss"));const o=null==r?a:pc(a,r);if(n===Sf.NONE)return o;if(n===Sf.SUM)return sd(o);if(n===Sf.MEAN){if(null==r)return Kd(o);{const e=a.size/r.size,t=dc(sd(o),sd(r));return e>1?dc(t,yc(e)):t}}if(n===Sf.SUM_BY_NONZERO_WEIGHTS){if(null==r)return dc(sd(o),yc(a.size));{const e=pc(r,Xd(a.shape)),t=ic(sd(np(e,yc(0))),"float32");return dc(sd(o),t)}}throw Error("Unknown reduction: ".concat(n))}});const If=Hi({absoluteDifference_:function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Sf.SUM_BY_NONZERO_WEIGHTS;const r=Ui(e,"labels","absoluteDifference"),o=Ui(t,"predictions","absoluteDifference");let i=null;null!=n&&(i=Ui(n,"weights","absoluteDifference")),St(r.shape,o.shape,"Error in absoluteDifference: ");const s=Tc(Nc(r,o));return Cf(s,i,a)}});const Nf=Hi({cosineDistance_:function(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Sf.SUM_BY_NONZERO_WEIGHTS;const o=Ui(e,"labels","cosineDistance"),i=Ui(t,"predictions","cosineDistance");let s=null;null!=a&&(s=Ui(a,"weights","cosineDistance")),St(o.shape,i.shape,"Error in cosineDistance: ");const c=yc(1),u=Nc(c,sd(pc(o,i),n,!0));return Cf(u,s,r)}});const Tf=Hi({hingeLoss_:function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Sf.SUM_BY_NONZERO_WEIGHTS,r=Ui(e,"labels","hingeLoss");const o=Ui(t,"predictions","hingeLoss");let i=null;null!=n&&(i=Ui(n,"weights","hingeLoss")),St(r.shape,o.shape,"Error in hingeLoss: ");const s=yc(1);r=Nc(pc(yc(2),r),s);const c=Ap(Nc(s,pc(r,o)));return Cf(c,i,a)}});const _f=Hi({huberLoss_:function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Sf.SUM_BY_NONZERO_WEIGHTS;const o=Ui(e,"labels","huberLoss"),i=Ui(t,"predictions","huberLoss");let s=null;null!=n&&(s=Ui(n,"weights","huberLoss")),St(o.shape,i.shape,"Error in huberLoss: ");const c=yc(a),u=Tc(Nc(i,o)),l=Qd(u,c),d=Nc(u,l),p=uc(pc(yc(.5),fc(l)),pc(c,d));return Cf(p,s,r)}});const Ef=Hi({logLoss_:function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-7,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Sf.SUM_BY_NONZERO_WEIGHTS;const o=Ui(e,"labels","logLoss"),i=Ui(t,"predictions","logLoss");let s=null;null!=n&&(s=Ui(n,"weights","logLoss")),St(o.shape,i.shape,"Error in logLoss: ");const c=yc(1),u=yc(a),l=Ad(pc(o,Ed(uc(i,u)))),d=pc(Nc(c,o),Ed(uc(Nc(c,i),u))),p=Nc(l,d);return Cf(p,s,r)}});const Rf=Hi({meanSquaredError_:function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Sf.SUM_BY_NONZERO_WEIGHTS;const r=Ui(e,"labels","meanSquaredError"),o=Ui(t,"predictions","meanSquaredError");let i=null;null!=n&&(i=Ui(n,"weights","meanSquaredError")),St(r.shape,o.shape,"Error in meanSquaredError: ");const s=nh(r,o);return Cf(s,i,a)}});const Af=Hi({sigmoidCrossEntropy_:function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Sf.SUM_BY_NONZERO_WEIGHTS,o=Ui(e,"multiClassLabels","sigmoidCrossEntropy");const i=Ui(t,"logits","sigmoidCrossEntropy");let s=null;if(null!=n&&(s=Ui(n,"weights","sigmoidCrossEntropy")),St(o.shape,i.shape,"Error in sigmoidCrossEntropy: "),a>0){const e=yc(a),t=yc(1),n=yc(.5);o=uc(pc(o,Nc(t,e)),pc(n,e))}const c=function(e,t){const n=Ui(e,"labels","sigmoidCrossEntropyWithLogits"),a=Ui(t,"logits","sigmoidCrossEntropyWithLogits");St(n.shape,a.shape,"Error in sigmoidCrossEntropyWithLogits: ");const r=Ap(a),o=pc(a,n),i=Rd(dd(Ad(Tc(a))));return uc(Nc(r,o),i)}(o,i);return Cf(c,s,r)}});const Of=Hi({softmaxCrossEntropy_:function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Sf.SUM_BY_NONZERO_WEIGHTS,o=Ui(e,"onehotLabels","softmaxCrossEntropy");const i=Ui(t,"logits","softmaxCrossEntropy");let s=null;if(null!=n&&(s=Ui(n,"weights","softmaxCrossEntropy")),St(o.shape,i.shape,"Error in softmaxCrossEntropy: "),a>0){const e=yc(a),t=yc(1),n=yc(o.shape[1]);o=uc(pc(o,Nc(t,e)),dc(e,n))}const c=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet "+"supported. Labels / logits was rank ".concat(t.rank," ")+"and dim was ".concat(n));const a=gc(((e,t,a)=>{const r=Md(t,[n],!0),o=Nc(ic(t,"float32"),r);a([e,o]);const i=Ad(pc(o,e));return{value:sd(i,[n]),gradFunc:(e,t)=>{const[a,r]=t,o=ed(e.shape,[n]);return[pc(al(e,o),Nc(ic(a,"float32"),dd(r))),pc(al(e,o),Nc(dd(r),ic(a,"float32")))]}}}));return a(e,t)}(o,i);return Cf(c,s,r)}});const Ff=Hi({sparseFillEmptyRows_:function(e,t,n,a){const r=Ui(e,"indices","sparseFillEmptyRows","int32"),o=Ui(t,"values","sparseFillEmptyRows"),i=Ui(n,"denseShape","sparseFillEmptyRows","int32"),s=Ui(a,"defaultValue","sparseFillEmptyRows",o.dtype);if(2!==r.rank)throw new Error("Indices should be Tensor2D but received shape\n        ".concat(r.shape));if(1!==o.rank)throw new Error("Values should be Tensor1D but received shape ".concat(o.shape));if(1!==i.rank)throw new Error("Dense shape should be Tensor1D but received shape ".concat(i.shape));if(0!==s.rank)throw new Error("Default value should be a scalar but received shape ".concat(s.shape));const c={indices:r,values:o,denseShape:i,defaultValue:s},u=Oi.runKernel(Hr,c);return{outputIndices:u[0],outputValues:u[1],emptyRowIndicator:u[2],reverseIndexMap:u[3]}}});const Df=Hi({sparseReshape_:function(e,t,n){const a=Ui(e,"inputIndices","sparseReshape","int32"),r=Ui(t,"inputShape","sparseReshape","int32"),o=Ui(n,"newShape","sparseReshape","int32");if(2!==a.rank)throw new Error("Input indices should be Tensor2D but received shape\n        ".concat(a.shape));if(1!==r.rank)throw new Error("Input shape should be Tensor1D but received shape ".concat(r.shape));if(1!==o.rank)throw new Error("New shape should be Tensor1D but received shape ".concat(o.shape));const i={inputIndices:a,inputShape:r,newShape:o},s=Oi.runKernel(jr,i);return{outputIndices:s[0],outputShape:s[1]}}});const Mf=Hi({sparseSegmentMean_:function(e,t,n){const a=Ui(e,"data","sparseSegmentMean"),r=Ui(t,"indices","sparseSegmentMean","int32"),o=Ui(n,"segmentIds","sparseSegmentMean","int32");if(a.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==r.rank)throw new Error("Indices should be Tensor1D but received shape\n          ".concat(r.shape));if(1!==o.rank)throw new Error("Segment ids should be Tensor1D but received shape\n          ".concat(o.shape));const i={data:a,indices:r,segmentIds:o};return Oi.runKernel(Kr,i)}});const Pf=Hi({sparseSegmentSum_:function(e,t,n){const a=Ui(e,"data","sparseSegmentSum"),r=Ui(t,"indices","sparseSegmentSum","int32"),o=Ui(n,"segmentIds","sparseSegmentSum","int32");if(a.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==r.rank)throw new Error("Indices should be Tensor1D but received shape\n         ".concat(r.shape));if(1!==o.rank)throw new Error("Segment ids should be Tensor1D but received shape\n         ".concat(o.shape));const i={data:a,indices:r,segmentIds:o};return Oi.runKernel(qr,i)}});const Lf=Hi({stringNGrams_:function(e,t,n,a,r,o,i,s){const c=Ui(e,"data","stringNGrams","string");if("string"!==c.dtype)throw new Error("Data must be of datatype string");if(1!==c.shape.length)throw new Error("Data must be a vector, saw: ".concat(c.shape));const u=Ui(t,"dataSplits","stringNGrams");if("int32"!==u.dtype)throw new Error("Data splits must be of datatype int32");const l={separator:n,nGramWidths:a,leftPad:r,rightPad:o,padWidth:i,preserveShortSequences:s},d={data:c,dataSplits:u},p=Oi.runKernel(Jr,d,l);return{nGrams:p[0],nGramsSplits:p[1]}}});const zf={fft:Zp,ifft:$p,rfft:th,irfft:Jp},Bf={hammingWindow:Gh,hannWindow:Hh,frame:jh,stft:Kh},Wf={flipLeftRight:Xh,grayscaleToRGB:Yh,resizeNearestNeighbor:gf,resizeBilinear:mf,rgbToGrayscale:Qh,rotateWithOffset:Zh,cropAndResize:qh,nonMaxSuppression:Jh,nonMaxSuppressionAsync:lf,nonMaxSuppressionWithScore:df,nonMaxSuppressionWithScoreAsync:pf,nonMaxSuppressionPadded:hf,nonMaxSuppressionPaddedAsync:ff,threshold:yf,transform:bf},Uf={bandPart:xf,gramSchmidt:vf,qr:kf},Vf={absoluteDifference:If,computeWeightedLoss:Cf,cosineDistance:Nf,hingeLoss:Tf,huberLoss:_f,logLoss:Ef,meanSquaredError:Rf,sigmoidCrossEntropy:Af,softmaxCrossEntropy:Of},Gf={sparseFillEmptyRows:Ff,sparseReshape:Df,sparseSegmentMean:Mf,sparseSegmentSum:Pf},Hf={stringNGrams:Lf,stringSplit:Hi({stringSplit_:function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const a=Ui(e,"input","stringSplit","string"),r=Ui(t,"delimiter","stringSplit","string");if(1!==a.rank)throw new Error("Input should be Tensor1D but received shape ".concat(a.shape));if(0!==r.rank)throw new Error("Delimiter should be a scalar but received shape ".concat(r.shape));const o={skipEmpty:n},i={input:a,delimiter:r},s=Oi.runKernel(eo,i,o);return{indices:s[0],values:s[1],shape:s[2]}}}),stringToHashBucketFast:Hi({stringToHashBucketFast_:function(e,t){const n=Ui(e,"input","stringToHashBucketFast","string"),a={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");const r={input:n};return Oi.runKernel(to,r,a)}}),staticRegexReplace:Hi({staticRegexReplace_:function(e,t,n){let a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const r=Ui(e,"input","staticRegexReplace","string"),o={pattern:t,rewrite:n,replaceGlobal:a};return Oi.runKernel(Zr,{x:r},o)}})},jf="undefined"!==typeof requestAnimationFrame?requestAnimationFrame:"undefined"!==typeof setImmediate?setImmediate:e=>e();function Kf(e,t){const n=e[0].length;e.forEach(((e,t)=>{kt(e.length===n,(()=>"Error in concat".concat(n,"D: rank of tensors[").concat(t,"] must be the same ")+"as the rank of the rest (".concat(n,")")))})),kt(t>=0&&t<n,(()=>"Error in concat".concat(n,"D: axis must be between 0 and ").concat(n-1,".")));const a=e[0];e.forEach(((e,r)=>{for(let o=0;o<n;o++)kt(o===t||e[o]===a[o],(()=>"Error in concat".concat(n,"D: Shape of tensors[").concat(r,"] (").concat(e,") ")+"does not match the shape of the rest (".concat(a,") ")+"along the non-concatenated axis ".concat(r,".")))}))}function qf(e,t){const n=e[0].slice();for(let a=1;a<e.length;a++)n[t]+=e[a][t];return n}var Xf;function Yf(e,t,n){let a=new Array;if(null==n&&null==t)return a;if(null==t)for(;a.length<e+n.length;)a.push(-1);else a=t.slice();if(null==n)return a;if(e+n.length!==a.length)throw new Error("rt input.shape and shape=".concat(t," are incompatible: rt input.rank = ").concat(e+n.length,", but shape.rank = ").concat(a.length));for(let r=1;r<n.length;++r){const o=n[r],i=a[a.length-n.length+r],s=a[i];if(o>=0)if(s>=0){if(s!==o)throw new Error("rt input.shape and shape=".concat(t," are incompatible: rt input.shape[").concat(r+e,"] = ").concat(o," but shape[").concat(r+e,"] = ").concat(s))}else a[i]=o}return a}function Qf(e){const t={FIRST_DIM_SIZE:Xf.FIRST_DIM_SIZE,VALUE_ROWIDS:Xf.VALUE_ROWIDS,ROW_LENGTHS:Xf.ROW_LENGTHS,ROW_SPLITS:Xf.ROW_SPLITS,ROW_LIMITS:Xf.ROW_LIMITS,ROW_STARTS:Xf.ROW_STARTS},n=[];for(const a of e){if(!(a in t))break;n.push(t[a])}return n}function Zf(e){return 0===e.length?0:e[0]===Xf.FIRST_DIM_SIZE?e.length-1:e.length}function $f(e,t){if(null==e||null==t)return;const n=e.length,a=t.length;if(n>=a)throw new Error("defaultValue.shape=".concat(e," and ragged tensor flatValues.shape=").concat(t,", are incompatible: defaultValue.rank = ").concat(n," must be less than ragged tensor input flatValues.rank = ").concat(a,")"));for(let r=0;r<Math.min(n,a-1);++r){const n=e[r],a=t[r+1];if(n>=0&&a>=0&&1!==n&&n!==a)throw new Error("defaultValue.shape=".concat(e,", and ragged tensor input flatValues.shape=").concat(t," are incompatible: defaultValue.shape[").concat(r-e.length,"] = ").concat(n," but ragged tensor input.flatValues.shape[").concat(r-e.length,"] = ").concat(a))}}!function(e){e[e.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",e[e.VALUE_ROWIDS=1]="VALUE_ROWIDS",e[e.ROW_LENGTHS=2]="ROW_LENGTHS",e[e.ROW_SPLITS=3]="ROW_SPLITS",e[e.ROW_LIMITS=4]="ROW_LIMITS",e[e.ROW_STARTS=5]="ROW_STARTS"}(Xf||(Xf={}));const Jf=30;function em(e){return e<=Jf?e:Vt(e,Math.floor(Math.sqrt(e)))}function tm(e,t,n){return[n*("number"===typeof e?e:e[0]),t*("number"===typeof e?e:e[1])]}function nm(e,t,n){let a=[];if(!(arguments.length>3&&void 0!==arguments[3])||arguments[3])a=a.concat(t.slice(0)),a.push(e[0]/n),a=a.concat(e.slice(1));else{a=a.concat(e[0]);const n=t.length;for(let r=0;r<n;++r)a=a.concat([e[r+1]/t[r],t[r]]);a=a.concat(e.slice(n+1))}return a}function am(e,t){const n=[];if(!(arguments.length>2&&void 0!==arguments[2])||arguments[2]){n.push(t);for(let a=t+1;a<e;++a)a<=2*t?(n.push(a),n.push(a-(t+1))):n.push(a)}else{const a=[],r=[];for(let n=1;n<e;++n)n>=2*t+1||n%2===1?r.push(n):a.push(n);n.push(...a),n.push(0),n.push(...r)}return n}function rm(e,t,n){let a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const r=[];a?r.push(e[0]/n):r.push(e[0]*n);for(let o=1;o<e.length;++o)o<=t.length?a?r.push(t[o-1]*e[o]):r.push(e[o]/t[o-1]):r.push(e[o]);return r}function om(e,t){const n=[0];for(let a=0;a<t;++a)n.push(e[a][0]);return n}function im(e,t,n){const a=e.slice(0,1);for(let r=0;r<n;++r)a.push(e[r+1]-t[r][0]-t[r][1]);return a}const sm=1.7580993408473768,cm=1.0507009873554805,um=.3275911,lm=.254829592,dm=-.284496736,pm=1.421413741,hm=-1.453152027,fm=1.061405429;function mm(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+"".concat(e.length,", imag: ").concat(t.length,"."));const n=new Float32Array(2*e.length);for(let a=0;a<n.length;a+=2)n[a]=e[a/2],n[a+1]=t[a/2];return n}function gm(e){const t=new Float32Array(e.length/2),n=new Float32Array(e.length/2);for(let a=0;a<e.length;a+=2)t[a/2]=e[a],n[a/2]=e[a+1];return{real:t,imag:n}}function ym(e){const t=Math.ceil(e.length/4),n=new Float32Array(t),a=new Float32Array(t);for(let r=0;r<e.length;r+=4)n[Math.floor(r/4)]=e[r],a[Math.floor(r/4)]=e[r+1];return{real:n,imag:a}}function bm(e){const t=Math.floor(e.length/4),n=new Float32Array(t),a=new Float32Array(t);for(let r=2;r<e.length;r+=4)n[Math.floor(r/4)]=e[r],a[Math.floor(r/4)]=e[r+1];return{real:n,imag:a}}function xm(e,t){return{real:e[2*t],imag:e[2*t+1]}}function vm(e,t,n,a){e[2*a]=t,e[2*a+1]=n}function wm(e,t){const n=new Float32Array(e/2),a=new Float32Array(e/2);for(let r=0;r<Math.ceil(e/2);r++){const o=(t?2:-2)*Math.PI*(r/e);n[r]=Math.cos(o),a[r]=Math.sin(o)}return{real:n,imag:a}}function km(e,t,n){const a=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(a),imag:Math.sin(a)}}const Sm="->",Cm=/->/g,Im=",",Nm="...";function Tm(e,t){const n=((e=e.replace(/\s/g,"")).length-e.replace(Cm,"").length)/Sm.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error('Equation must contain exactly one arrow ("'.concat(Sm,'").'));const[a,r]=e.split(Sm);kt(-1===a.indexOf(Nm),(()=>'The ellipsis notation ("'.concat(Nm,'") is not supported yet.')));const o=a.split(Im),i=o.length;if(t!==i)throw new Error("Expected ".concat(i," input tensors, received ").concat(t));if(i>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const s=[];for(let d=0;d<r.length;++d){const e=r[d];if(!o.some((t=>-1!==t.indexOf(e))))throw new Error("Output subscripts contain the label ".concat(e," ")+"not present in the input subscripts.");-1===s.indexOf(e)&&s.push(e)}for(let d=0;d<a.length;++d){const e=a[d];-1===s.indexOf(e)&&e!==Im&&s.push(e)}const c=new Array(o.length);for(let d=0;d<i;++d){if(new Set(o[d].split("")).size!==o[d].length)throw new Error("Found duplicate axes in input component ".concat(o[d],". ")+"Support for duplicate axes in input is not implemented yet.");c[d]=[];for(let e=0;e<o[d].length;++e)c[d].push(s.indexOf(o[d][e]))}const u=s.length,l=[];for(let d=r.length;d<u;++d)l.push(d);return{allDims:s,summedDims:l,idDims:c}}function _m(e,t){let n=new Array(e);n.fill(-1);for(let r=0;r<t.length;++r)n[t[r]]=r;const a=[];for(let r=0;r<e;++r)-1===n[r]&&a.push(r);return n=n.filter((e=>-1!==e)),{permutationIndices:n,expandDims:a}}function Em(e,t,n){const a=new Array(e);for(let r=0;r<n.length;++r){const e=n[r].shape;for(let n=0;n<t[r].length;++n)void 0===a[t[r][n]]?a[t[r][n]]=e[n]:kt(a[t[r][n]]===e[n],(()=>"Expected dimension ".concat(a[t[r][n]]," at axis ").concat(n," ")+"of input shaped ".concat(JSON.stringify(e),", ")+"but got dimension ".concat(e[n])))}}function Rm(e,t){const n=e,a=[];let r=0;0===e.length&&n.push(-1),r=e.length+1;for(let i=0;i<r;++i)a.push([]);const o=[];for(let i=0;i<n.length;++i){const e=Om(t,n[i]);for(const t of e)-1===o.indexOf(t)&&(a[i].push(t),o.push(t))}return{path:n,steps:a}}function Am(e){return e.every(((e,t)=>e===t))}function Om(e,t){const n=[];for(let a=0;a<e.length;++a)0!==e[a].length&&-1===e[a].indexOf(t)&&-1!==t||n.push(a);return n}function Fm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=[];if("number"===typeof t)kt(e.shape[n]%t===0,(()=>"Number of splits must evenly divide the axis.")),a=new Array(t).fill(e.shape[n]/t);else{kt(t.reduce(((e,t)=>(-1===t&&(e+=1),e)),0)<=1,(()=>"There should be only one negative value in split array."));const r=t.indexOf(-1);if(-1!==r){const a=t.reduce(((e,t)=>t>0?e+t:e));t[r]=e.shape[n]-a}kt(e.shape[n]===t.reduce(((e,t)=>e+t)),(()=>"The sum of sizes must match the size of the axis dimension.")),a=t}return a}function Dm(e){return"Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = ".concat(e)}function Mm(e,t){return"indices(".concat(e,", 0) is invalid: ").concat(t," < 0")}function Pm(e,t,n){return"indices(".concat(e,", 0) is invalid: ").concat(t," >= ").concat(n)}function Lm(e,t){return"only one output dimension may be -1, not both ".concat(e," and ").concat(t)}function zm(e,t){return"size ".concat(e," must be non-negative, not ").concat(t)}function Bm(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function Wm(e,t){const n=It(e),a=It(t);return"Input to reshape is a SparseTensor with ".concat(n,"\n  dense values, but the requested shape requires a multiple of ").concat(a,". inputShape=").concat(e," outputShape= ").concat(t)}function Um(e,t){const n=It(e),a=It(t);return"Input to reshape is a tensor with ".concat(n," dense values, but the requested shape has ").concat(a,". inputShape=").concat(e," outputShape=").concat(t)}function Vm(){return"segment ids must be >= 0"}function Gm(){return"segment ids are not increasing"}function Hm(e,t){return"Segment id ".concat(e," out of range [0, ").concat(t,"), possibly because segmentIds input is not sorted.")}function jm(e,t,n){return"Bad: indices[".concat(e,"] == ").concat(t," out of range [0, ").concat(n,")")}function Km(e,t){let n,a=!1;for(e<=Jf?(n=e,a=!0):n=Vt(e,Math.floor(Math.sqrt(e)));!a;)n>t||n===e?a=!0:n=Vt(e,n+1);return n}function qm(e,t,n){const a=[],r=e.length;for(let o=0;o<r;o++)o!==t?a.push(e[o]):a.push(n);return a}function Xm(e,t,n,a){const r=t.shape.length,o=e.shape.length;if(0!==a&&(a<-r||a>r))throw new Error("Expect batchDims in the range of [-".concat(r,", ").concat(r,"], but got ").concat(a));if(a<0&&(a+=r),a>o)throw new Error("batchDims (".concat(a,") must be less than rank(x) (\n    ").concat(o,")."));if(n<a)throw new Error("batchDims (".concat(a,") must be less than or equal to axis (").concat(n,")."));for(let d=0;d<a;++d)if(e.shape[d]!==t.shape[d])throw new Error("x.shape[".concat(d,"]: ").concat(e.shape[d]," should be equal to indices.shape[").concat(d,"]: ").concat(t.shape[d],"."));const i=e.shape[n],s=[];let c=1,u=1,l=1;for(let d=0;d<a;++d)s.push(e.shape[d]),c*=e.shape[d];for(let d=a;d<n;d++)s.push(e.shape[d]),u*=e.shape[d];for(let d=a;d<r;d++)s.push(t.shape[d]);for(let d=n+1;d<o;d++)s.push(e.shape[d]),l*=e.shape[d];return{batchSize:c,sliceSize:l,outerSize:u,dimSize:i,outputShape:s}}function Ym(e){try{return e.map((e=>Xo(e)))}catch(Kj){throw new Error("Failed to decode encoded string bytes into utf-8, error: ".concat(Kj))}}function Qm(e){return e.map((e=>qo(e)))}!function(){for(const e of Fc)kc(e)}();const Zm={},$m={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function Jm(e,t){if(!(e in Zm)||null!=t){const n=function(e,t){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=null==t?function(e){if(nn().getBool("IS_SAFARI")||"undefined"===typeof OffscreenCanvas||2!==e){if("undefined"!==typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}return new OffscreenCanvas(300,150)}(e):t;n.addEventListener("webglcontextlost",(t=>{t.preventDefault(),delete Zm[e]}),!1),nn().getBool("SOFTWARE_WEBGL_ENABLED")&&($m.failIfMajorPerformanceCaveat=!1);if(1===e)return n.getContext("webgl",$m)||n.getContext("experimental-webgl",$m);return n.getContext("webgl2",$m)}(e,t);if(null===n)return console.log("Could not get context for WebGL version",e),null;Zm[e]=n}const n=Zm[e];return null==n||n.isContextLost()?(delete Zm[e],Jm(e)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),Zm[e])}var eg,tg,ng;function ag(e,t){return[t,e]}function rg(e){const t=It(e);return Et(Math.ceil(t/4))}function og(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function ig(e,t){const n=e;let a,r,o,i,s,c,u,l,d,p;return 2===nn().getNumber("WEBGL_VERSION")?(a=n.R32F,r=n.R16F,o=n.RGBA16F,i=n.RGBA32F,s=n.RED,u=4,l=1,d=n.HALF_FLOAT,p=n.FLOAT,c=n.RGBA8):(a=e.RGBA,r=e.RGBA,o=e.RGBA,i=n.RGBA,s=e.RGBA,u=4,l=4,d=null!=t?t.HALF_FLOAT_OES:null,p=e.FLOAT,c=e.RGBA),{internalFormatFloat:a,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:o,internalFormatPackedFloat:i,textureFormatFloat:s,downloadTextureFormat:c,downloadUnpackNumChannels:u,defaultNumChannels:l,textureTypeHalfFloat:d,textureTypeFloat:p}}function sg(e,t){const n=t();return nn().getBool("DEBUG")&&function(e){const t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+function(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code ".concat(t)}}(e,t))}(e),n}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(eg||(eg={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(tg||(tg={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(ng||(ng={}));function cg(e){return!!(nn().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function ug(e,t){return bg(e,(()=>e.getExtension(t)),'Extension "'+t+'" not supported on this browser.')}const lg=/ERROR: [0-9]+:([0-9]+):/g;function dg(e,t){const n=lg.exec(t);if(null==n)return console.log("Couldn't parse line number in error: ".concat(t)),void console.log(e);const a=+n[1],r=e.split("\n"),o=r.length.toString().length+2,i=r.map(((e,t)=>Rt((t+1).toString(),o)+e));let s=0;for(let d=0;d<i.length;d++)s=Math.max(i[d].length,s);const c=i.slice(0,a-1),u=i.slice(a-1,a),l=i.slice(a);console.log(c.join("\n")),console.log(t.split("\n")[0]),console.log("%c ".concat(Rt(u[0],s)),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(l.join("\n"))}function pg(e,t){if(sg(e,(()=>e.validateProgram(t))),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function hg(e,t,n,a,r,o,i){const s=e.getAttribLocation(t,n);return-1!==s&&(sg(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,a))),sg(e,(()=>e.vertexAttribPointer(s,r,e.FLOAT,!1,o,i))),sg(e,(()=>e.enableVertexAttribArray(s))),!0)}function fg(e,t,n,a){sg(e,(()=>function(e,t,n){xg(e,n),sg(e,(()=>e.activeTexture(e.TEXTURE0+n))),sg(e,(()=>e.bindTexture(e.TEXTURE_2D,t)))}(e,t,a))),sg(e,(()=>e.uniform1i(n,a)))}function mg(e,t,n){sg(e,(()=>e.bindFramebuffer(e.FRAMEBUFFER,n))),sg(e,(()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)))}function gg(e,t){sg(e,(()=>e.bindFramebuffer(e.FRAMEBUFFER,t))),sg(e,(()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)))}function yg(e){const t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error ".concat(t)}}(e,t))}function bg(e,t,n){const a=sg(e,(()=>t()));if(null==a)throw new Error(n);return a}function xg(e,t){const n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,a=t+e.TEXTURE0;if(a<e.TEXTURE0||a>n){const e="[gl.TEXTURE0, gl.TEXTURE".concat(n,"]");throw new Error("textureUnit must be in ".concat(e,"."))}}function vg(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return It(e.slice(0,e.length-t))}function wg(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function kg(e){let t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[vg(e),...wg(e)]),t}function Sg(e){return e%2===0}function Cg(e,t){if(Tt(e=e.slice(-2),t=t.slice(-2)))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){const n=e[e.length-1],a=t[t.length-1];if(n===a)return!0;if(Sg(n)&&Sg(a)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&Sg(e[0])&&Sg(t[0])}let Ig,Ng;function Tg(e,t){return null!=e.getExtension(t)}function _g(e){try{if(null!=Jm(e))return!0}catch(jj){return console.log("Error when getting WebGL context: ",jj),!1}return!1}function Eg(e){if(0===e)return!1;const t=Jm(e);if(1!==e){if(Tg(t,"EXT_color_buffer_float"))return Rg(t);const e="EXT_color_buffer_half_float";if(Tg(t,e)){const n=t.getExtension(e);return function(e,t){const n=ig(e,t),a=e.createTexture();e.bindTexture(e.TEXTURE_2D,a);const r=1,o=1;e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,r,o,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const i=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,i),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,a,0);const s=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(a),e.deleteFramebuffer(i),s}(t,n)}return!1}if(!Tg(t,"OES_texture_float"))return!1;if(!Tg(t,"WEBGL_color_buffer_float"))return!1;return Rg(t)}function Rg(e){const t=ig(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);const a=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,a),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);const r=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(a),r}function Ag(e,t){Array.isArray(e)||(e=[e]),e.forEach((e=>{null!=e&&kt("complex64"!==e.dtype,(()=>"".concat(t," does not support complex64 tensors ")+"in the WebGL backend."))}))}const Og=nn();function Fg(){let e,t,n,a,r,o,i,s,c,u;return 2===nn().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",a="in",r="texture",o="outputColor",i="out vec4 outputColor;",s=nn().getBool("WEBGL2_ISNAN_CUSTOM")?"\n      bool isnan_custom(float val) {\n        uint floatToUint = floatBitsToUint(val);\n        return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ":"",c="",u="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",a="varying",r="texture2D",o="gl_FragColor",i="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",c="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",u="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:a,texture2D:r,output:o,defineOutput:i,defineSpecialNaN:s,defineSpecialInf:c,defineRound:u}}function Dg(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index";const a=Gt(t);return a.map(((t,r)=>{const o="int ".concat(e[r]," = ").concat(n," / ").concat(t),i=r===a.length-1?"int ".concat(e[r+1]," = ").concat(n," - ").concat(e[r]," * ").concat(t):"index -= ".concat(e[r]," * ").concat(t);return"".concat(o,"; ").concat(i,";")})).join("")}function Mg(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index";const a=Gt(t);return a.map(((t,r)=>{const o="int ".concat(e[r]," = ").concat(n," / outShapeStrides[").concat(r,"]"),i=r===a.length-1?"int ".concat(e[r+1]," = ").concat(n," - ").concat(e[r]," * outShapeStrides[").concat(r,"]"):"index -= ".concat(e[r]," * outShapeStrides[").concat(r,"]");return"".concat(o,"; ").concat(i,";")})).join("")}function Pg(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index";const a=function(e,t){const n=e.length,a=e.map((e=>"".concat(t,"[").concat(e,"]"))),r=new Array(n-1);r[n-2]=a[n-1];for(let o=n-3;o>=0;--o)r[o]="(".concat(r[o+1]," * ").concat(a[o+1],")");return r}(e.map(((e,t)=>t)),t);return a.map(((t,r)=>{const o="int ".concat(e[r]," = ").concat(n," / ").concat(a[r]),i=r===a.length-1?"int ".concat(e[r+1]," = ").concat(n," - ").concat(e[r]," * ").concat(a[r]):"index -= ".concat(e[r]," * ").concat(a[r]);return"".concat(o,"; ").concat(i,";")})).join("")}function Lg(e){const t=Gt(e).map((e=>e.toString()));return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ".concat(t[0]," + coords.y * ").concat(t[1]," + coords.z;\n  }\n")}Og.registerFlag("HAS_WEBGL",(()=>Og.getNumber("WEBGL_VERSION")>0)),Og.registerFlag("WEBGL_VERSION",(()=>_g(2)?2:_g(1)?1:0)),Og.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",(()=>!1)),Og.registerFlag("WEBGL_BUFFER_SUPPORTED",(()=>2===Og.get("WEBGL_VERSION"))),Og.registerFlag("WEBGL_CPU_FORWARD",(()=>!0)),Og.registerFlag("WEBGL_FORCE_F16_TEXTURES",(()=>!1)),Og.registerFlag("WEBGL_PACK",(()=>Og.getBool("HAS_WEBGL"))),Og.registerFlag("WEBGL_PACK_NORMALIZATION",(()=>Og.getBool("WEBGL_PACK"))),Og.registerFlag("WEBGL_PACK_CLIP",(()=>Og.getBool("WEBGL_PACK"))),Og.registerFlag("WEBGL_PACK_DEPTHWISECONV",(()=>Og.getBool("WEBGL_PACK"))),Og.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(()=>Og.getBool("WEBGL_PACK"))),Og.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(()=>Og.getBool("WEBGL_PACK"))),Og.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(()=>Og.getBool("WEBGL_PACK"))),Og.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(()=>Og.getBool("WEBGL_PACK"))),Og.registerFlag("WEBGL_PACK_REDUCE",(()=>Og.getBool("WEBGL_PACK"))),Og.registerFlag("WEBGL_LAZILY_UNPACK",(()=>Og.getBool("WEBGL_PACK"))),Og.registerFlag("WEBGL_CONV_IM2COL",(()=>Og.getBool("WEBGL_PACK"))),Og.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",(()=>Og.getBool("WEBGL_PACK"))),Og.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(()=>function(e){if(null==Ig){const t=Jm(e);Ig=t.getParameter(t.MAX_TEXTURE_SIZE)}return Ig}(Og.getNumber("WEBGL_VERSION")))),Og.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(()=>function(e){if(null==Ng){const t=Jm(e);Ng=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,Ng)}(Og.getNumber("WEBGL_VERSION")))),Og.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(()=>{const e=Og.getNumber("WEBGL_VERSION");return 0===e?0:function(e){if(0===e)return 0;let t;const n=Jm(e);return t=Tg(n,"EXT_disjoint_timer_query_webgl2")&&2===e?2:Tg(n,"EXT_disjoint_timer_query")?1:0,t}(e)})),Og.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(()=>Og.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!Mi())),Og.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(()=>function(e){if(0===e)return!1;const t=Jm(e);if(1===e){if(!Tg(t,"OES_texture_float"))return!1}else if(!Tg(t,"EXT_color_buffer_float"))return!1;return Rg(t)}(Og.getNumber("WEBGL_VERSION")))),Og.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(()=>!Og.getBool("WEBGL_FORCE_F16_TEXTURES")&&Og.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))),Og.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(()=>Eg(Og.getNumber("WEBGL_VERSION")))),Og.registerFlag("WEBGL_FENCE_API_ENABLED",(()=>{return 2===(e=Og.getNumber("WEBGL_VERSION"))&&null!=Jm(e).fenceSync;var e})),Og.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(()=>Og.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0)),Og.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",(()=>-1),(e=>{if("number"!==typeof e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but "+"got ".concat(e,"."));if(e<0&&-1!==e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never "+"delete) or at least 0, but got ".concat(e,"."))})),Og.registerFlag("WEBGL_FLUSH_THRESHOLD",(()=>Mi()?1:-1),(e=>{if("number"!==typeof e)throw new Error("WEBGL_FLUSH_THRESHOLD must be a number but got "+"".concat(e,"."));if(e<0&&-1!==e)throw new Error("WEBGL_FLUSH_THRESHOLD must be -1 (indicating never "+"manual flush) or at least 0, but got ".concat(e,"."))})),Og.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",(()=>128)),Og.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",(()=>!1)),Og.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",(()=>1e5)),Og.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",(()=>128)),Og.registerFlag("WEBGL_EXP_CONV",(()=>!1)),Og.registerFlag("SOFTWARE_WEBGL_ENABLED",(()=>Og.getBool("IS_TEST"))),Og.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",(()=>1/0)),Og.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",(()=>!1)),Og.registerFlag("WEBGL2_ISNAN_CUSTOM",(()=>!1)),Og.registerFlag("ENGINE_COMPILE_ONLY",(()=>!1));const zg="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",{getBroadcastDims:Bg}=o;function Wg(e,t,n){const a=[];if(e.forEach((e=>{const t=It(e.shapeInfo.logicalShape);if(e.shapeInfo.isUniform?a.push("uniform float ".concat(e.name).concat(t>1?"[".concat(t,"]"):"",";")):(a.push("uniform sampler2D ".concat(e.name,";")),a.push("uniform int offset".concat(e.name,";"))),n.enableShapeUniforms){const{uniformShape:t}=Qg(n.packedInputs,e.shapeInfo.logicalShape,e.shapeInfo.texShape);switch(t.length){case 1:a.push("uniform int ".concat(e.name,"Shape;"));break;case 2:a.push("uniform ivec2 ".concat(e.name,"Shape;"));break;case 3:a.push("uniform ivec3 ".concat(e.name,"Shape;"));break;case 4:a.push("uniform ivec4 ".concat(e.name,"Shape;"))}a.push("uniform ivec2 ".concat(e.name,"TexShape;"))}})),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:a.push("uniform int outShape;");break;case 2:a.push("uniform ivec2 outShape;"),a.push("uniform int outShapeStrides;");break;case 3:a.push("uniform ivec3 outShape;"),a.push("uniform ivec2 outShapeStrides;");break;case 4:a.push("uniform ivec4 outShape;"),a.push("uniform ivec3 outShapeStrides;")}a.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach((e=>{a.push("uniform ".concat(e.type," ").concat(e.name).concat(e.arrayIndex?"[".concat(e.arrayIndex,"]"):"",";"))}));const r=a.join("\n"),o=e.map((e=>function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3?arguments[3]:void 0,r="";r+=n?Vg(e,a):Ug(e,a);const o=e.shapeInfo.logicalShape,i=t.logicalShape;o.length<=i.length&&(r+=n?function(e,t){const n=e.name,a=n.charAt(0).toUpperCase()+n.slice(1),r="get"+a+"AtOutCoords",o=e.shapeInfo.logicalShape.length,i=t.logicalShape.length,s=Bg(e.shapeInfo.logicalShape,t.logicalShape),c=Yg(i),u=i-o;let l;const d=["x","y","z","w","u","v"];l=0===o?"":i<2&&s.length>=1?"coords = 0;":s.map((e=>"coords.".concat(d[e+u]," = 0;"))).join("\n");let p="";p=i<2&&o>0?"coords":e.shapeInfo.logicalShape.map(((e,t)=>"coords.".concat(d[t+u]))).join(", ");let h="return outputValue;";const f=1===It(e.shapeInfo.logicalShape),m=It(t.logicalShape),g=1===m;if(1!==o||f||g){if(f&&!g)h=1===i?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(s.length){const e=o-2,t=o-1;s.indexOf(e)>-1&&s.indexOf(t)>-1?h="return vec4(outputValue.x);":s.indexOf(e)>-1?h="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":s.indexOf(t)>-1&&(h="return vec4(outputValue.xx, outputValue.zz);")}}else h="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 ".concat(r,"() {\n      ").concat(c," coords = getOutputCoords();\n      ").concat(l,"\n      vec4 outputValue = get").concat(a,"(").concat(p,");\n      ").concat(h,"\n    }\n  ")}(e,t):function(e,t){const n=e.name,a=n.charAt(0).toUpperCase()+n.slice(1),r="get"+a+"AtOutCoords",o=t.texShape,i=e.shapeInfo.texShape,s=e.shapeInfo.logicalShape.length,c=t.logicalShape.length;if(!e.shapeInfo.isUniform&&s===c&&null==e.shapeInfo.flatOffset&&Tt(i,o))return"\n      float ".concat(r,"() {\n        return sampleTexture(").concat(n,", resultUV);\n      }\n    ");const u=Yg(c),l=Bg(e.shapeInfo.logicalShape,t.logicalShape),d=c-s;let p;const h=["x","y","z","w","u","v"];p=0===s?"":c<2&&l.length>=1?"coords = 0;":l.map((e=>"coords.".concat(h[e+d]," = 0;"))).join("\n");let f="";f=c<2&&s>0?"coords":e.shapeInfo.logicalShape.map(((e,t)=>"coords.".concat(h[t+d]))).join(", ");return"\n    float ".concat(r,"() {\n      ").concat(u," coords = getOutputCoords();\n      ").concat(p,"\n      return get").concat(a,"(").concat(f,");\n    }\n  ")}(e,t));return r}(e,t,n.packedInputs,n.enableShapeUniforms))).join("\n"),i=t.texShape,s=Fg(),c=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ".concat(e.texture2D,"(textureSampler, uv).r;\n    }\n  ")}(s);let u,l,d=function(e){const t="".concat(e.version,"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ").concat(e.varyingFs," vec2 resultUV;\n    ").concat(e.defineOutput,"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ").concat(e.defineSpecialNaN,"\n    ").concat(e.defineSpecialInf,"\n    ").concat(e.defineRound,"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ").concat(Gg,"\n    ").concat(Hg,"\n    ").concat(jg,"\n  ");return t}(s);t.isPacked?(u=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){const a=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(1===a[0])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ".concat(a[1],".0);\n      }\n    ");if(1===a[1])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ".concat(a[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(a[0],", ").concat(a[1],"));\n      return 2 * (resTexRC.x * ").concat(a[1]," + resTexRC.y);\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){const a=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(Tt(e,t))return n?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(".concat(a[0],", ").concat(a[1],"));\n      }\n    ");const r=Math.ceil(e[1]/2);if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(a[0],", ").concat(a[1],"));\n\n      int index = resTexRC.x * ").concat(a[1]," + resTexRC.y;\n      int r = 2 * (index / ").concat(r,");\n      int c = imod(index, ").concat(r,") * 2;\n\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";const a=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],r=Math.ceil(e[2]/2),o=r*Math.ceil(e[1]/2);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(a[0],", ").concat(a[1],"));\n      int index = resTexRC.x * ").concat(a[1]," + resTexRC.y;\n\n      int b = index / ").concat(o,";\n      index -= b * ").concat(o,";\n\n      int r = 2 * (index / ").concat(r,");\n      int c = imod(index, ").concat(r,") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ")}(e,t,n);default:return function(e,t,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";const a=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],r=Math.ceil(e[e.length-1]/2),o=r*Math.ceil(e[e.length-2]/2);let i=o,s="",c="b, r, c";for(let u=2;u<e.length-1;u++)i*=e[e.length-u-1],s="\n      int b".concat(u," = index / ").concat(i,";\n      index -= b").concat(u," * ").concat(i,";\n    ")+s,c="b".concat(u,", ")+c;return"\n    ivec".concat(e.length," getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(").concat(a[0],", ").concat(a[1],"));\n      int index = resTexRC.x * ").concat(a[1]," + resTexRC.y;\n\n      ").concat(s,"\n\n      int b = index / ").concat(o,";\n      index -= b * ").concat(o,";\n\n      int r = 2 * (index / ").concat(r,");\n      int c = imod(index, ").concat(r,") * 2;\n\n      return ivec").concat(e.length,"(").concat(c,");\n    }\n  ")}(e,t,n)}}(t.logicalShape,i,n.enableShapeUniforms),l=function(e){return"\n    void setOutput(vec4 val) {\n      ".concat(e.output," = val;\n    }\n  ")}(s)):(u=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){if(1===t[0])return n?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.x * ".concat(t[1],".0);\n      }\n    ");if(1===t[1])return n?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.y * ".concat(t[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      return resTexRC.x * ").concat(t[1]," + resTexRC.y;\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){if(Tt(e,t))return n?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(".concat(t[0],", ").concat(t[1],"));\n      }\n    ");if(1===e[1])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ");if(1===e[0])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ");if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      int r = index / ").concat(e[1],";\n      int c = index - r * ").concat(e[1],";\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n){const t=Mg(["r","c","d"],e);return"\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ".concat(t,"\n    return ivec3(r, c, d);\n  }\n")}const a=Dg(["r","c","d"],e);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(a,"\n      return ivec3(r, c, d);\n    }\n  ")}(e,t,n);case 4:return function(e,t,n){if(n){const t=Mg(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ".concat(t,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}const a=Dg(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(a,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}(e,t,n);case 5:return function(e,t){const n=Dg(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(".concat(t[0],",\n                             ").concat(t[1],"));\n\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  ")}(e,t);case 6:return function(e,t){const n=Dg(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  ")}(e,t);default:throw new Error("".concat(e.length,"-D output sampling is not yet supported"))}}(t.logicalShape,i,n.enableShapeUniforms),l=function(e){return"\n    void setOutput(float val) {\n      ".concat(e.output," = vec4(val, 0, 0, 0);\n    }\n  ")}(s)),n.packedInputs&&(d+=Kg);return[d,c,l,r,u,o,n.userCode].join("\n")}function Ug(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e.shapeInfo.logicalShape;switch(n.length){case 0:return function(e,t){const n=e.name,a="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"float ".concat(a,"() {return ").concat(n,";}");const[r,o]=e.shapeInfo.texShape;if(1===r&&1===o)return"\n      float ".concat(a,"() {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");const i=qg(n);if(t)return"\n    float ".concat(a,"() {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], ").concat(i,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");const[s,c]=e.shapeInfo.texShape;return"\n    float ".concat(a,"() {\n      vec2 uv = uvFromFlat(").concat(s,", ").concat(c,", ").concat(i,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e,t);case 1:return function(e,t){const n=e.name,a="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int index) {\n        ").concat(Xg(e),"\n      }\n    ");const r=e.shapeInfo.texShape,o=r[0],i=r[1];if(1===i&&1===o)return"\n      float ".concat(a,"(int index) {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");const s=qg(n);if(1===i)return t?"\n      float ".concat(a,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[0]));\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(a,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / ").concat(o,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(1===o)return t?"\n      float ".concat(a,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(a,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / ").concat(i,".0, 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(t)return"\n    float ".concat(a,"(int index) {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");return"\n    float ".concat(a,"(int index) {\n      vec2 uv = uvFromFlat(").concat(o,", ").concat(i,", index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e,t);case 2:return function(e,t){const n=e.shapeInfo.logicalShape,a=e.name,r="get"+a.charAt(0).toUpperCase()+a.slice(1),o=e.shapeInfo.texShape;if(null!=o&&Tt(n,o)){if(t)return"\n      float ".concat(r,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(a,"TexShape[1], ").concat(a,"TexShape[0]);\n        return sampleTexture(").concat(a,", uv);\n      }\n    ");const e=o[0],n=o[1];return"\n    float ".concat(r,"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(n,".0, ").concat(e,".0);\n      return sampleTexture(").concat(a,", uv);\n    }\n  ")}const{newShape:i,keptDims:s}=Dt(n),c=i;if(c.length<n.length){const n=Zg(e,c),a=["row","col"];return"\n      ".concat(Ug(n,t),"\n      float ").concat(r,"(int row, int col) {\n        return ").concat(r,"(").concat($g(a,s),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(").concat(n[1],", 1)));\n        ").concat(Xg(e),"\n      }\n    ");const u=o[0],l=o[1],d=qg(a);if(1===l)return t?"\n      float ".concat(r,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(d,"), vec3(").concat(a,"Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(").concat(a,"TexShape[0]));\n        return sampleTexture(").concat(a,", uv);\n      }\n    "):"\n    float ".concat(r,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(d,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ").concat(u,".0);\n      return sampleTexture(").concat(a,", uv);\n    }\n  ");if(1===u)return t?"\n      float ".concat(r,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(d,"), vec3(").concat(a,"Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(").concat(a,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(a,", uv);\n      }\n    "):"\n    float ".concat(r,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(d,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2((index + 0.5) / ").concat(l,".0, 0.5);\n      return sampleTexture(").concat(a,", uv);\n    }\n  ");if(t)return"\n      float ".concat(r,"(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(a,"Shape[1] + col + ").concat(d,";\n        vec2 uv = uvFromFlat(").concat(a,"TexShape[0], ").concat(a,"TexShape[1], index);\n        return sampleTexture(").concat(a,", uv);\n      }\n    ");return"\n  float ".concat(r,"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ").concat(n[1]," + col + ").concat(d,";\n    vec2 uv = uvFromFlat(").concat(u,", ").concat(l,", index);\n    return sampleTexture(").concat(a,", uv);\n  }\n")}(e,t);case 3:return function(e,t){const n=e.shapeInfo.logicalShape,a=e.name,r="get"+a.charAt(0).toUpperCase()+a.slice(1),o=n[1]*n[2],i=n[2],{newShape:s,keptDims:c}=Dt(n),u=s;if(u.length<n.length){const n=Zg(e,u),a=["row","col","depth"];return"\n        ".concat(Ug(n,t),"\n        float ").concat(r,"(int row, int col, int depth) {\n          return ").concat(r,"(").concat($g(a,c),");\n        }\n      ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(").concat(o,", ").concat(i,", 1)));\n        ").concat(Xg(e),"\n      }\n    ");const l=e.shapeInfo.texShape,d=l[0],p=l[1],h=e.shapeInfo.flatOffset;if(p===o&&null==h)return t?"\n      float ".concat(r,"(int row, int col, int depth) {\n        int stride1 = ").concat(a,"Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(a,"TexShape[1], ").concat(a,"TexShape[0]);\n        return sampleTexture(").concat(a,", uv);\n      }\n    "):"\n        float ".concat(r,"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(").concat(i,", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(").concat(p,".0, ").concat(d,".0);\n          return sampleTexture(").concat(a,", uv);\n        }\n      ");if(p===i&&null==h)return t?"\n      float ".concat(r,"(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(").concat(a,"Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(a,"TexShape[1], ").concat(a,"TexShape[0]);\n        return sampleTexture(").concat(a,", uv);\n      }\n    "):"\n    float ".concat(r,"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(").concat(n[1],", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(p,".0, ").concat(d,".0);\n      return sampleTexture(").concat(a,", uv);\n    }\n  ");const f=qg(a);if(t)return"\n    float ".concat(r,"(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ").concat(a,"Shape[1] * ").concat(a,"Shape[2];\n      int stride1 = ").concat(a,"Shape[2];\n      int index = row * stride0 + col * stride1 + depth + ").concat(f,";\n      vec2 uv = uvFromFlat(").concat(a,"TexShape[0], ").concat(a,"TexShape[1], index);\n      return sampleTexture(").concat(a,", uv);\n    }\n    ");return"\n      float ".concat(r,"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(o," + col * ").concat(i," + depth + ").concat(f,";\n        vec2 uv = uvFromFlat(").concat(d,", ").concat(p,", index);\n        return sampleTexture(").concat(a,", uv);\n      }\n  ")}(e,t);case 4:return function(e,t){const n=e.shapeInfo.logicalShape,a=e.name,r="get"+a.charAt(0).toUpperCase()+a.slice(1),o=n[3],i=n[2]*o,s=n[1]*i,{newShape:c,keptDims:u}=Dt(n);if(c.length<n.length){const n=Zg(e,c),a=["row","col","depth","depth2"];return"\n      ".concat(Ug(n,t),"\n      float ").concat(r,"(int row, int col, int depth, int depth2) {\n        return ").concat(r,"(").concat($g(a,u),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(").concat(s,", ").concat(i,", ").concat(o,", 1)));\n        ").concat(Xg(e),"\n      }\n    ");const l=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,p=d[0],h=d[1],f="int stride2 = ".concat(a,"Shape[3];"),m="int stride1 = ".concat(a,"Shape[2] * stride2;"),g="int stride0 = ".concat(a,"Shape[1] * stride1;");if(h===s&&null==l)return t?"\n      float ".concat(r,"(int row, int col, int depth, int depth2) {\n        ").concat(f,"\n        ").concat(m,"\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(a,"TexShape[1], ").concat(a,"TexShape[0]);\n        return sampleTexture(").concat(a,", uv);\n      }\n    "):"\n      float ".concat(r,"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(").concat(i,", ").concat(o,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(h,".0, ").concat(p,".0);\n        return sampleTexture(").concat(a,", uv);\n      }\n    ");if(h===o&&null==l)return t?"\n      float ".concat(r,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(a,"Shape[1] * ").concat(a,"Shape[2], ").concat(a,"Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(a,"TexShape[1], ").concat(a,"TexShape[0]);\n        return sampleTexture(").concat(a,", uv);\n      }\n    "):"\n      float ".concat(r,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(n[1]*n[2],", ").concat(n[2],", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(h,".0, ").concat(p,".0);\n        return sampleTexture(").concat(a,", uv);\n      }\n    ");const y=qg(a);if(t)return"\n    float ".concat(r,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ").concat(f,"\n      ").concat(m,"\n      ").concat(g,"\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(").concat(a,"TexShape[0], ").concat(a,"TexShape[1], index + ").concat(y,");\n      return sampleTexture(").concat(a,", uv);\n    }\n  ");return"\n    float ".concat(r,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(i," +\n          depth * ").concat(o," + depth2;\n      vec2 uv = uvFromFlat(").concat(p,", ").concat(h,", index + ").concat(y,");\n      return sampleTexture(").concat(a,", uv);\n    }\n  ")}(e,t);case 5:return function(e){const t=e.shapeInfo.logicalShape,n=e.name,a="get"+n.charAt(0).toUpperCase()+n.slice(1),r=t[4],o=t[3]*r,i=t[2]*o,s=t[1]*i,{newShape:c,keptDims:u}=Dt(t);if(c.length<t.length){const t=Zg(e,c),n=["row","col","depth","depth2","depth3"];return"\n      ".concat(Ug(t),"\n      float ").concat(a,"(int row, int col, int depth, int depth2, int depth3) {\n        return ").concat(a,"(").concat($g(n,u),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(s,", ").concat(i,", ").concat(o,", ").concat(r,")) +\n          depth3;\n        ").concat(Xg(e),"\n      }\n    ");const l=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,p=d[0],h=d[1];if(h===s&&null==l)return"\n      float ".concat(a,"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(").concat(i,", ").concat(o,", ").concat(r,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(h,".0, ").concat(p,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(h===r&&null==l)return"\n      float ".concat(a,"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3],",\n               ").concat(t[2]*t[3],", ").concat(t[3],", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(h,".0, ").concat(p,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");const f=qg(n);return"\n    float ".concat(a,"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(i," + depth * ").concat(o," +\n          depth2 * ").concat(r," + depth3 + ").concat(f,";\n      vec2 uv = uvFromFlat(").concat(p,", ").concat(h,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e);case 6:return function(e){const t=e.shapeInfo.logicalShape,n=e.name,a="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:r,keptDims:o}=Dt(t);if(r.length<t.length){const t=Zg(e,r),n=["row","col","depth","depth2","depth3","depth4"];return"\n      ".concat(Ug(t),"\n      float ").concat(a,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ").concat(a,"(").concat($g(n,o),");\n      }\n    ")}const i=t[5],s=t[4]*i,c=t[3]*s,u=t[2]*c,l=t[1]*u;if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(l,", ").concat(u,", ").concat(c,", ").concat(s,")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(").concat(i,", 1)));\n        ").concat(Xg(e),"\n      }\n    ");const d=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,h=p[0],f=p[1];if(f===l&&null==d)return"\n      float ".concat(a,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(").concat(u,", ").concat(c,", ").concat(s,", ").concat(i,")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(f,".0, ").concat(h,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(f===i&&null==d)return"\n      float ".concat(a,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3]*t[4],",\n               ").concat(t[2]*t[3]*t[4],",\n               ").concat(t[3]*t[4],",\n               ").concat(t[4],")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(f,".0, ").concat(h,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");const m=qg(n);return"\n    float ".concat(a,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(l," + col * ").concat(u," + depth * ").concat(c," +\n          depth2 * ").concat(s," + depth3 * ").concat(i," + depth4 + ").concat(m,";\n      vec2 uv = uvFromFlat(").concat(h,", ").concat(f,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e);default:throw new Error("".concat(n.length,"-D input sampling")+" is not yet supported")}}function Vg(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return function(e){const t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),a=Fg();return"\n    vec4 ".concat(n,"() {\n      return ").concat(a.texture2D,"(").concat(t,", halfCR);\n    }\n  ")}(e);case 1:return function(e,t){const n=e.name,a="get"+n.charAt(0).toUpperCase()+n.slice(1),r=e.shapeInfo.texShape,o=Fg();if(t)return"\n    vec4 ".concat(a,"(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ").concat(o.texture2D,"(").concat(n,", uv);\n    }\n  ");const i=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)];return"\n    vec4 ".concat(a,"(int index) {\n      vec2 uv = packedUVfrom1D(\n        ").concat(i[0],", ").concat(i[1],", index);\n      return ").concat(o.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t);case 2:return function(e,t){const n=e.shapeInfo.logicalShape,a=e.name,r="get"+a.charAt(0).toUpperCase()+a.slice(1),o=e.shapeInfo.texShape,i=o[0],s=o[1],c=Fg();if(null!=o&&Tt(n,o))return t?"\n      vec4 ".concat(r,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(a,"TexShape[1], ").concat(a,"TexShape[0]);\n\n        return ").concat(c.texture2D,"(").concat(a,", uv);\n      }\n    "):"\n      vec4 ".concat(r,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(s,".0, ").concat(i,".0);\n\n        return ").concat(c.texture2D,"(").concat(a,", uv);\n      }\n    ");if(t)return"\n    vec4 ".concat(r,"(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(a,"TexShape[0]) / 2.0), ceil(float(").concat(a,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(a,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ").concat(c.texture2D,"(").concat(a,", uv);\n    }\n  ");const u=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],l=Math.ceil(n[1]/2);return"\n    vec4 ".concat(r,"(int row, int col) {\n      vec2 uv = packedUVfrom2D(").concat(l,", ").concat(u[0],", ").concat(u[1],", row, col);\n      return ").concat(c.texture2D,"(").concat(a,", uv);\n    }\n  ")}(e,t);case 3:return function(e,t){const n=e.shapeInfo.logicalShape,a=e.name,r="get"+a.charAt(0).toUpperCase()+a.slice(1),o=e.shapeInfo.texShape,i=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];if(1===n[0]){const a=[1,2],o=Zg(e,n.slice(1)),i=["b","row","col"];return"\n        ".concat(Vg(o,t),"\n        vec4 ").concat(r,"(int b, int row, int col) {\n          return ").concat(r,"(").concat($g(i,a),");\n        }\n      ")}const s=Fg();if(t)return"\n    vec4 ".concat(r,"(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(a,"TexShape[0]) / 2.0), ceil(float(").concat(a,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(a,"Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(a,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ").concat(s.texture2D,"(").concat(a,", uv);\n    }\n  ");const c=i[0],u=i[1],l=Math.ceil(n[2]/2),d=l*Math.ceil(n[1]/2);return"\n    vec4 ".concat(r,"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ").concat(c,", ").concat(u,", ").concat(d,", ").concat(l,", b, row, col);\n      return ").concat(s.texture2D,"(").concat(a,", uv);\n    }\n  ")}(e,t);default:return function(e,t){const n=e.name,a="get"+n.charAt(0).toUpperCase()+n.slice(1),r=Fg();if(t)return"\n    vec4 ".concat(a,"(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(").concat(n,"Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(n,"Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ").concat(n,"Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ").concat(r.texture2D,"(").concat(n,", uv);\n    }\n  ");const o=e.shapeInfo.logicalShape,i=o.length,s=e.shapeInfo.texShape,c=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],u=c[0],l=c[1],d=Math.ceil(o[i-1]/2);let p=d*Math.ceil(o[i-2]/2),h="int b, int row, int col",f="b * ".concat(p," + (row / 2) * ").concat(d," + (col / 2)");for(let m=2;m<i-1;m++)h="int b".concat(m,", ")+h,p*=o[i-m-1],f="b".concat(m," * ").concat(p," + ")+f;return"\n    vec4 ".concat(a,"(").concat(h,") {\n      int index = ").concat(f,";\n      int texR = index / ").concat(l,";\n      int texC = index - texR * ").concat(l,";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(l,", ").concat(u,");\n      return ").concat(r.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t)}}const Gg="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Hg="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",jg="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Kg="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function qg(e){return"offset".concat(e)}function Xg(e){const t=e.name,n=It(e.shapeInfo.logicalShape);return n<2?"return ".concat(t,";"):"\n    for (int i = 0; i < ".concat(n,"; i++) {\n      if (i == index) {\n        return ").concat(t,"[i];\n      }\n    }\n  ")}function Yg(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank ".concat(e," is not yet supported"))}function Qg(e,t,n){const{newShape:a,keptDims:r}=Dt(t),o=t.length,i=e&&3===o&&1===t[0],s=i?t.slice(1):a,c=!e&&o>1&&!Tt(t,n)&&a.length<o||i;return{useSqueezeShape:c,uniformShape:c?s:t,keptDims:r}}function Zg(e,t){const n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function $g(e,t){return t.map((t=>e[t])).join(", ")}function Jg(e,t,n,a){const r=n.map(((e,n)=>{const a={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(a.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:a}})),o=r.map((e=>e.shapeInfo)),i={logicalShape:a.shape,texShape:a.texData.texShape,isUniform:!1,isPacked:a.texData.isPacked,flatOffset:null},s=Wg(r,i,t),c=function(e,t){const n=bg(e,(()=>e.createShader(e.FRAGMENT_SHADER)),"Unable to create fragment WebGLShader.");if(sg(e,(()=>e.shaderSource(n,t))),sg(e,(()=>e.compileShader(n))),nn().get("ENGINE_COMPILE_ONLY"))return n;if(!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw dg(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}(e.gl,s),u=e.createProgram(c);return nn().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:c,source:s,webGLProgram:u,inShapeInfos:o,outShapeInfo:i,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(e.buildVao(u),Object.assign({program:t,fragmentShader:c,source:s,webGLProgram:u,inShapeInfos:o,outShapeInfo:i},ey(e,t,u)))}function ey(e,t,n){const a=[],r=[];let o,i,s,c=null,u=null;u=e.getUniformLocation(n,"NAN",!1),1===nn().getNumber("WEBGL_VERSION")&&(c=e.getUniformLocation(n,"INFINITY",!1));const l=!1;for(const d of t.variableNames){const r={name:d,uniform:e.getUniformLocation(n,d,l),offset:e.getUniformLocation(n,"offset".concat(d),l)};t.enableShapeUniforms&&(r.shape=e.getUniformLocation(n,"".concat(d,"Shape"),l),r.texShape=e.getUniformLocation(n,"".concat(d,"TexShape"),l)),a.push(r)}if(t.enableShapeUniforms&&(o=e.getUniformLocation(n,"outShape",l),s=e.getUniformLocation(n,"outShapeStrides",l),i=e.getUniformLocation(n,"outTexShape",l)),t.customUniforms)for(const d of t.customUniforms)r.push(e.getUniformLocation(n,d.name,l));return{variablesLocations:a,customUniformLocations:r,infLoc:c,nanLoc:u,outShapeLocation:o,outShapeStridesLocation:s,outTexShapeLocation:i}}function ty(e,t){if(e.length!==t.length)throw Error("Binary was compiled with ".concat(e.length," inputs, but ")+"was executed with ".concat(t.length," inputs"));e.forEach(((e,n)=>{const a=e.logicalShape,r=t[n],o=r.shape;if(!Tt(a,o))throw Error("Binary was compiled with different shapes than "+"the current args. Shapes ".concat(a," and ").concat(o," must match"));if(e.isUniform&&r.isUniform)return;const i=e.texShape,s=r.isUniform?null:r.texData.texShape;if(!Tt(i,s))throw Error("Binary was compiled with different texture shapes than the"+" current args. Shape ".concat(i," and ").concat(s," must match"))}))}function ny(e){return nn().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}class ay{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=eg.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=Fg();this.outputShape=e,this.enableShapeUniforms=ny(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?Mg(["r","c","d"],e):Dg(["r","c","d"],e),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ").concat(t.output," = result;\n      }\n    ")}}class ry{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=eg.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=Fg();this.outputShape=e,this.enableShapeUniforms=ny(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?Mg(["r","c","d"],e):Dg(["r","c","d"],e),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ").concat(t.output," = result;\n      }\n    ")}}class oy{constructor(e){this.variableNames=["A"],this.outTexUsage=tg.DOWNLOAD;const t=Fg();this.outputShape=e,this.userCode="\n      ".concat(zg,"\n\n      void main() {\n        float x = getAAtOutCoords();\n        ").concat(t.output," = encode_float(x);\n      }\n    ")}}class iy{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=tg.DOWNLOAD;const t=Fg();this.outputShape=e,this.userCode="\n      ".concat(zg,"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ").concat(t.output," = encode_float(x);\n      }\n    ")}}const sy={R:0,G:1,B:2,A:3};class cy{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"RGBA";this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const a=Fg();this.outputShape=e,this.enableShapeUniforms=ny(this.outputShape.length);let r="result";t&&(r="floor(result * 255. + 0.5)");let o="";for(let i=0;i<n.length;i++){const e=n[i];o+="\n          if(offset == ".concat(i,") {\n            result = values[").concat(sy[e],"];\n          }")}this.userCode="\n      ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":Lg(e),"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int flatIndex = getFlatIndex(coords);\n        float result = 0.;\n        int offset = imod(flatIndex, ").concat(n.length,");\n\n        flatIndex = idiv(flatIndex, ").concat(n.length,", 1.);\n\n        int r = flatIndex / texShape[1];\n        if (r < texShape[0]) {\n          int c = imod(flatIndex, texShape[1]);\n          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n          vec4 values = ").concat(a.texture2D,"(A, uv);\n          ").concat(o,"\n        }\n        ").concat(a.output," = vec4(").concat(r,", 0., 0., 0.);\n      }\n    ")}}class uy{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Fg();this.outputShape=e,this.enableShapeUniforms=ny(this.outputShape.length);let a="",r="result";t&&(r="floor(result * 255. + 0.5)");for(let o=0;o<=1;o++)for(let t=0;t<=1;t++){const r=2*o+t;a+="\n          localCoords = coords;\n          if(localCoords[2] + ".concat(t," < ").concat(this.enableShapeUniforms?"outShape[2]":"".concat(e[2]),") {\n          localCoords[2] += ").concat(t,";\n          if (localCoords[1] + ").concat(o," < ").concat(this.enableShapeUniforms?"outShape[1]":"".concat(e[1]),") {\n            localCoords[1] += ").concat(o,";\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ").concat(n.texture2D,"(A, uv);\n\n            if (offset == 0) {\n              result[").concat(r,"] = values[0];\n            } else if (offset == 1) {\n              result[").concat(r,"] = values[1];\n            } else if (offset == 2) {\n              result[").concat(r,"] = values[2];\n            } else {\n              result[").concat(r,"] = values[3];\n            }\n          }\n        }\n        ")}this.userCode="\n        ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":Lg(e),"\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ").concat(a,"\n\n          ").concat(n.output," = ").concat(r,";\n        }\n    ")}}function ly(e){const t=Fg();return function(e,t){const n=bg(e,(()=>e.createShader(e.VERTEX_SHADER)),"Unable to create vertex WebGLShader.");if(sg(e,(()=>e.shaderSource(n,t))),sg(e,(()=>e.compileShader(n))),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}(e,"".concat(t.version,"\n    precision highp float;\n    ").concat(t.attribute," vec3 clipSpacePos;\n    ").concat(t.attribute," vec2 uv;\n    ").concat(t.varyingVs," vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }"))}function dy(e){return function(e,t){const n=bg(e,(()=>e.createBuffer()),"Unable to create WebGLBuffer");return sg(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,n))),sg(e,(()=>e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW))),n}(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function py(e){return function(e,t){const n=bg(e,(()=>e.createBuffer()),"Unable to create WebGLBuffer");return sg(e,(()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n))),sg(e,(()=>e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW))),n}(e,new Uint16Array([0,1,2,2,1,3]))}function hy(e,t,n,a,r,o){!function(e,t){const n=nn().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){const n="[".concat(e,"x").concat(t,"]");throw new Error("Requested texture size "+n+" is invalid.")}if(e>n||t>n){const a="[".concat(e,"x").concat(t,"]"),r="[".concat(n,"x").concat(n,"]");throw new Error("Requested texture size "+a+" greater than WebGL maximum on this browser / GPU "+r+".")}}(t,n);const i=function(e){return bg(e,(()=>e.createTexture()),"Unable to create WebGLTexture.")}(e),s=e.TEXTURE_2D;return sg(e,(()=>e.bindTexture(s,i))),sg(e,(()=>e.texParameteri(s,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE))),sg(e,(()=>e.texParameteri(s,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE))),sg(e,(()=>e.texParameteri(s,e.TEXTURE_MIN_FILTER,e.NEAREST))),sg(e,(()=>e.texParameteri(s,e.TEXTURE_MAG_FILTER,e.NEAREST))),1===nn().getNumber("WEBGL_VERSION")?sg(e,(()=>e.texImage2D(s,0,a,t,n,0,r,o,null))):sg(e,(()=>e.texStorage2D(s,1,a,t,n))),sg(e,(()=>e.bindTexture(e.TEXTURE_2D,null))),{texture:i,texShape:[n,t]}}function fy(e){return e.internalFormatFloat}function my(e){return e.internalFormatHalfFloat}function gy(e){return e.downloadTextureFormat}function yy(e){return e.internalFormatPackedFloat}function by(e){return e.internalFormatPackedHalfFloat}function xy(e,t,n,a,r,o,i,s){const c=e,u=new Float32Array(function(e,t){const[n,a]=og(e,t);return n*a*4}(o,i));return c.bindBuffer(c.PIXEL_PACK_BUFFER,t),c.getBufferSubData(c.PIXEL_PACK_BUFFER,0,u),c.bindBuffer(c.PIXEL_PACK_BUFFER,null),u}class vy{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const t=nn().getNumber("WEBGL_VERSION");if(null!=e?(this.gl=e,function(e,t){Zm[e]=t}(t,e)):this.gl=Jm(t),e=this.gl,2===nn().getNumber("WEBGL_VERSION")){const t=e;this.createVertexArray=()=>sg(t,(()=>t.createVertexArray())),this.bindVertexArray=e=>sg(t,(()=>t.bindVertexArray(e))),this.deleteVertexArray=e=>sg(t,(()=>t.deleteVertexArray(e))),this.getVertexArray=()=>sg(t,(()=>t.getParameter(t.VERTEX_ARRAY_BINDING)))}else if(null!=e){const t=e.getExtension("OES_vertex_array_object");if(null==t)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>sg(e,(()=>t.createVertexArrayOES())),this.bindVertexArray=n=>sg(e,(()=>t.bindVertexArrayOES(n))),this.deleteVertexArray=n=>sg(e,(()=>t.deleteVertexArrayOES(n))),this.getVertexArray=()=>sg(e,(()=>e.getParameter(t.VERTEX_ARRAY_BINDING_OES)))}let n="WEBGL_color_buffer_float";const a="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),1===nn().getNumber("WEBGL_VERSION")){const e="OES_texture_float",t="OES_texture_half_float";if(this.textureFloatExtension=ug(this.gl,e),Tg(this.gl,t))this.textureHalfFloatExtension=ug(this.gl,t);else if(nn().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),Tg(this.gl,a))this.colorBufferHalfFloatExtension=ug(this.gl,a);else if(nn().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",Tg(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else{if(!Tg(this.gl,a))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(a)}this.vertexBuffer=dy(this.gl),this.indexBuffer=py(this.gl),this.framebuffer=function(e){return bg(e,(()=>e.createFramebuffer()),"Unable to create WebGLFramebuffer.")}(this.gl),this.textureConfig=ig(this.gl,this.textureHalfFloatExtension)}get debug(){return nn().getBool("DEBUG")}dispose(){if(this.disposed)return;null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;sg(e,(()=>e.finish())),sg(e,(()=>e.bindFramebuffer(e.FRAMEBUFFER,null))),sg(e,(()=>e.deleteFramebuffer(this.framebuffer))),sg(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,null))),sg(e,(()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null))),sg(e,(()=>e.deleteBuffer(this.indexBuffer))),this.disposed=!0}createFloat32MatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,a){const[r,o]=ag(t,n);return hy(e,r,o,fy(a),a.textureFormatFloat,e.FLOAT)}(this.gl,e,t,this.textureConfig)}createFloat16MatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,a){const[r,o]=ag(t,n);return hy(e,r,o,my(a),a.textureFormatFloat,a.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}createUnsignedBytesMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,a){const[r,o]=ag(t,n);return hy(e,r,o,gy(a),e.RGBA,e.UNSIGNED_BYTE)}(this.gl,e,t,this.textureConfig)}uploadPixelDataToTexture(e,t){this.throwIfDisposed(),function(e,t,n){sg(e,(()=>e.bindTexture(e.TEXTURE_2D,t))),n.data instanceof Uint8Array?2===nn().getNumber("WEBGL_VERSION")?sg(e,(()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data))):sg(e,(()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data))):2===nn().getNumber("WEBGL_VERSION")?sg(e,(()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n))):sg(e,(()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n))),sg(e,(()=>e.bindTexture(e.TEXTURE_2D,null)))}(this.gl,e,t)}uploadDenseMatrixToTexture(e,t,n,a){this.throwIfDisposed(),function(e,t,n,a,r,o){let i,s,c;sg(e,(()=>e.bindTexture(e.TEXTURE_2D,t))),r instanceof Uint8Array?(i=new Uint8Array(n*a*4),s=e.UNSIGNED_BYTE,c=e.RGBA):(i=new Float32Array(n*a*4),s=e.FLOAT,c=o.internalFormatPackedFloat),i.set(r),2===nn().getNumber("WEBGL_VERSION")?sg(e,(()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,a,e.RGBA,s,i))):sg(e,(()=>e.texImage2D(e.TEXTURE_2D,0,c,n,a,0,e.RGBA,s,i))),sg(e,(()=>e.bindTexture(e.TEXTURE_2D,null)))}(this.gl,e,t,n,a,this.textureConfig)}createFloat16PackedMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,a){const[r,o]=og(t,n);return hy(e,r,o,by(a),e.RGBA,a.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}createPackedMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,a){const[r,o]=og(t,n);return hy(e,r,o,yy(a),e.RGBA,e.FLOAT)}(this.gl,e,t,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(gg(this.gl,this.framebuffer),this.outputTexture=null),sg(this.gl,(()=>this.gl.deleteTexture(e)))}downloadByteEncodedFloatMatrixFromOutputTexture(e,t,n){return this.downloadMatrixDriver(e,(()=>function(e,t,n,a){const[r,o]=ag(t,n),i=new Uint8Array(t*n*4);return sg(e,(()=>e.readPixels(0,0,r,o,a.downloadTextureFormat,e.UNSIGNED_BYTE,i))),new Float32Array(i.buffer)}(this.gl,t,n,this.textureConfig)))}downloadPackedMatrixFromBuffer(e,t,n,a,r,o){return xy(this.gl,e,0,0,0,r,o,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,t){return function(e,t,n){const a=e,r=new Float32Array(n);return a.bindBuffer(a.PIXEL_PACK_BUFFER,t),a.getBufferSubData(a.PIXEL_PACK_BUFFER,0,r),a.bindBuffer(a.PIXEL_PACK_BUFFER,null),r}(this.gl,e,t)}createBufferFromTexture(e,t,n){this.bindTextureToFrameBuffer(e);const a=function(e,t,n){const a=e.createBuffer();sg(e,(()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,a)));const r=16*t*n;return sg(e,(()=>e.bufferData(e.PIXEL_PACK_BUFFER,r,e.STREAM_READ))),sg(e,(()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0))),sg(e,(()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,null))),a}(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),a}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let t,n;if(nn().getBool("WEBGL_FENCE_API_ENABLED")){const a=e,r=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=()=>{const e=a.clientWaitSync(r,0,0);return e===a.ALREADY_SIGNALED||e===a.CONDITION_SATISFIED},t=r}else nn().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=()=>this.isQueryAvailable(t,nn().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):n=()=>!0;return{query:t,isFencePassed:n}}downloadMatrixFromPackedTexture(e,t,n){return this.downloadMatrixDriver(e,(()=>function(e,t,n){const a=new Float32Array(t*n*4);return sg(e,(()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,a))),a}(this.gl,t,n)))}createProgram(e){this.throwIfDisposed();const t=this.gl;null==this.vertexShader&&(this.vertexShader=ly(t));const n=function(e){return bg(e,(()=>e.createProgram()),"Unable to create WebGLProgram.")}(t);sg(t,(()=>t.attachShader(n,this.vertexShader))),sg(t,(()=>t.attachShader(n,e))),function(e,t){if(sg(e,(()=>e.linkProgram(t))),!nn().get("ENGINE_COMPILE_ONLY")&&!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}(t,n);const a=Object.assign(n,{vao:this.createVertexArray()});return this.debug&&pg(t,a),a}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const t=this.gl;sg(t,(()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer))),function(e,t,n){sg(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,n))),hg(e,t,"clipSpacePos",n,3,20,0)&&hg(e,t,"uv",n,2,20,12)}(t,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&(sg(this.gl,(()=>this.gl.deleteProgram(e))),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&pg(this.gl,this.program),sg(this.gl,(()=>this.gl.useProgram(e)))}getUniformLocation(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.throwIfDisposed(),n?function(e,t,n){return bg(e,(()=>e.getUniformLocation(t,n)),'uniform "'+n+'" not present in program.')}(this.gl,e,t):function(e,t,n){return e.getUniformLocation(t,n)}(this.gl,e,t)}getAttributeLocation(e,t){return this.throwIfDisposed(),sg(this.gl,(()=>this.gl.getAttribLocation(e,t)))}getUniformLocationNoThrow(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}setInputMatrixTexture(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),fg(this.gl,e,t,n)}setOutputMatrixTexture(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}setOutputPackedMatrixTexture(e,t,n){this.throwIfDisposed();const[a,r]=og(t,n);this.setOutputMatrixTextureDriver(e,a,r)}setOutputMatrixWriteRegion(e,t,n,a){this.setOutputMatrixWriteRegionDriver(n,e,a,t)}setOutputPackedMatrixWriteRegion(e,t,n,a){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){null!=this.program&&pg(this.gl,this.program),yg(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const e=this.getVertexArray();console.assert(e===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}sg(e,(()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),sg(this.gl,(()=>this.gl.finish()))}getQueryTimerExtension(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=ug(this.gl,2===nn().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(2===nn().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}const e=this.getQueryTimerExtensionWebGL1(),t=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,t),t}endQuery(){if(2===nn().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2();return void e.endQuery(t.TIME_ELAPSED_EXT)}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await At((()=>this.disposed||this.isQueryAvailable(e,nn().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")))),this.getQueryTime(e,nn().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,t){if(0===t)return null;if(2===t){const t=this.gl;return t.getQueryParameter(e,t.QUERY_RESULT)/1e6}{const t=this.getQueryTimerExtensionWebGL1();return t.getQueryObjectEXT(e,t.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,t){if(0===t)return!0;if(2===t){const t=this.gl,n=this.getQueryTimerExtensionWebGL2(),a=t.getQueryParameter(e,t.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(n.GPU_DISJOINT_EXT)),a&&!this.disjoint}{const t=this.getQueryTimerExtensionWebGL1(),n=t.getQueryObjectEXT(e,t.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(t.GPU_DISJOINT_EXT)),n&&!this.disjoint}}pollFence(e){return new Promise((t=>{this.addItemToPoll((()=>e.isFencePassed()),(()=>t()))}))}pollItems(){const e=function(e){let t=0;for(;t<e.length;++t){if(!e[t]())break}return t-1}(this.itemsToPoll.map((e=>e.isDoneFn)));for(let t=0;t<=e;++t){const{resolveFn:e}=this.itemsToPoll[t];e()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,t){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1)return;let n;"setTimeoutCustom"in nn().platform&&(n=nn().platform.setTimeoutCustom.bind(nn().platform)),At((()=>(this.pollItems(),0===this.itemsToPoll.length)),(()=>0),null,n)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),mg(this.gl,e,this.framebuffer),this.debug&&yg(this.gl)}unbindTextureToFrameBuffer(){null!=this.outputTexture?(mg(this.gl,this.outputTexture,this.framebuffer),this.debug&&yg(this.gl)):gg(this.gl,this.framebuffer)}downloadMatrixDriver(e,t){this.bindTextureToFrameBuffer(e);const n=t();return this.unbindTextureToFrameBuffer(),n}setOutputMatrixTextureDriver(e,t,n){this.throwIfDisposed();const a=this.gl;mg(a,e,this.framebuffer),this.debug&&yg(a),this.outputTexture=e,sg(a,(()=>a.viewport(0,0,t,n))),sg(a,(()=>a.scissor(0,0,t,n)))}setOutputMatrixWriteRegionDriver(e,t,n,a){this.throwIfDisposed(),sg(this.gl,(()=>this.gl.scissor(e,t,n,a)))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(null==this.program)throw new Error("No GPU program is currently set.")}}function wy(e,t){Array.isArray(e)||(e=[e]),e.forEach((e=>{null!=e&&kt("complex64"!==e.dtype,(()=>"".concat(t," does not support complex64 tensors in the CPU backend.")))}))}function ky(e){const t=new Float32Array(e.length);for(let n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}function Sy(e){return(t,n,a,r,o)=>{const i=Rc(t,n),s=i.length,c=Gt(i),u=Mt(o,It(i)),l=t.length,d=n.length,p=Gt(t),h=Gt(n),f=_c(t,i),m=_c(n,i);if(f.length+m.length===0)for(let g=0;g<u.length;++g)u[g]=e(a[g%a.length],r[g%r.length]);else for(let g=0;g<u.length;++g){const t=Zt(g,s,c),n=t.slice(-l);f.forEach((e=>n[e]=0));const o=Qt(n,l,p),i=t.slice(-d);m.forEach((e=>i[e]=0));const y=Qt(i,d,h);u[g]=e(a[o],r[y])}return[u,i]}}function Cy(e){const{inputs:t,backend:n}=e,{real:a,imag:r}=t,o=n.data.get(a.dataId).values,i=n.data.get(r.dataId).values,s=n.makeTensorInfo(a.shape,"complex64");return n.data.get(s.dataId).complexTensorInfos={real:n.makeTensorInfo(a.shape,"float32",o),imag:n.makeTensorInfo(r.shape,"float32",i)},s}function Iy(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"float32";if("complex64"===n){return Cy({inputs:{real:Iy(e,t,"float32"),imag:Iy(e,t,"float32")},backend:e})}const a=Xt(It(t),n);return e.makeTensorInfo(t,n,a)}function Ny(e){const{inputs:t,backend:n}=e,{x:a}=t;return n.incRef(a.dataId),{dataId:a.dataId,shape:a.shape,dtype:a.dtype}}function Ty(e){const{inputs:t,backend:n}=e,{input:a}=t,r=n.data.get(a.dataId).complexTensorInfos.real,o=n.data.get(r.dataId).values;return n.makeTensorInfo(r.shape,r.dtype,o)}function _y(e,t,n,a){if("int32"===a){return[t,"int32",Int32Array.from(e)]}if("bool"===a){const a=jo([0],n),[r,o]=Sy(((e,t)=>e!==t?1:0))(t,[],e,a,"bool");return[o,"bool",r]}throw new Error("Error in Cast: failed to cast ".concat(n," to ").concat(a))}function Ey(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{dtype:o}=a;if("complex64"===o){if("complex64"===r.dtype)return Ny({inputs:{x:r},backend:n});const e=Iy(n,r.shape,r.dtype),t=Ey({inputs:{x:r},backend:n,attrs:{dtype:"float32"}}),a=Cy({inputs:{real:t,imag:e},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),a}if("complex64"===r.dtype){const e=Ty({inputs:{input:r},backend:n}),t=Ey({inputs:{x:e},backend:n,attrs:{dtype:o}});return n.disposeIntermediateTensorInfo(e),t}if(!Lt(r.dtype,o)){const e=Ny({inputs:{x:r},backend:n});return{dataId:e.dataId,shape:e.shape,dtype:o}}const i=n.data.get(r.dataId).values,[s,c,u]=_y(i,r.shape,r.dtype,o);return n.makeTensorInfo(s,c,u)}function Ry(e,t,n,a){return null==n?n=>{let{inputs:r,backend:o}=n;const{a:i,b:s}=r,c=o;wy([i,s],e);const u=c.data.get(i.dataId).values,l=c.data.get(s.dataId).values,d="string"===i.dtype?Ym(u):u,p="string"===i.dtype?Ym(l):l,h=a||i.dtype,[f,m]=t(i.shape,s.shape,d,p,h);return c.makeTensorInfo(m,h,f)}:e=>{let{inputs:r,backend:o}=e;const{a:i,b:s}=r,c=o;if("complex64"===i.dtype||"complex64"===s.dtype){const e=Ey({inputs:{x:i},backend:c,attrs:{dtype:"complex64"}}),t=c.data.get(e.dataId),a=t.complexTensorInfos.real,r=t.complexTensorInfos.imag,o=c.data.get(a.dataId).values,u=c.data.get(r.dataId).values,l=Ey({inputs:{x:s},backend:c,attrs:{dtype:"complex64"}}),d=c.data.get(l.dataId),p=d.complexTensorInfos.real,h=d.complexTensorInfos.imag,f=c.data.get(p.dataId).values,m=c.data.get(h.dataId).values,[g,y,b]=n(i.shape,s.shape,o,u,f,m),x=c.makeTensorInfo(b,"float32",g),v=c.makeTensorInfo(b,"float32",y),w=Cy({inputs:{real:x,imag:v},backend:c});return c.disposeIntermediateTensorInfo(e),c.disposeIntermediateTensorInfo(l),c.disposeIntermediateTensorInfo(x),c.disposeIntermediateTensorInfo(v),w}{const e=c.data.get(i.dataId).values,n=c.data.get(s.dataId).values,r=a||i.dtype,[o,u]=t(i.shape,s.shape,e,n,r);return c.makeTensorInfo(u,r,o)}}}function Ay(e){return(t,n,a,r,o,i)=>{const s=Rc(t,n),c=It(s),u=s.length,l=Gt(s),d=Mt("float32",c),p=Mt("float32",c),h=_c(t,s),f=_c(n,s),m=mm(a,r),g=mm(o,i),y=t.length,b=Gt(t),x=n.length,v=Gt(n);if(h.length+f.length===0)for(let w=0;w<d.length;w++){const t=w%m.length,n=w%g.length,a=e(m[2*t],m[2*t+1],g[2*n],g[2*n+1]);d[w]=a.real,p[w]=a.imag}else for(let w=0;w<d.length;w++){const t=Zt(w,u,l),n=t.slice(-y);h.forEach((e=>n[e]=0));const a=Qt(n,y,b),r=t.slice(-x);f.forEach((e=>r[e]=0));const o=Qt(r,x,v),i=e(m[2*a],m[2*a+1],g[2*o],g[2*o+1]);d[w]=i.real,p[w]=i.imag}return[d,p,s]}}const Oy=Sy(((e,t)=>e+t)),Fy=Ay(((e,t,n,a)=>({real:e+n,imag:t+a})));Ry(dn,Oy,Fy);function Dy(e,t,n,a,r){const o=It(a),i=Xt(r,n);for(let s=0;s<e.length;s++){const n=e[s];if(n<0)throw new Error("Input x must be non-negative!");n>=r||(i[n]+=o>0?t[s]:1)}return i}function My(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=e.shape[0],o=e.shape[1],i=oc([r,n],t.dtype);for(let s=0;s<r;s++)for(let r=0;r<o;r++){const o=e.get(s,r);if(o<0)throw new Error("Input x must be non-negative!");o>=n||(a?i.set(1,s,o):t.size>0?i.set(i.get(s,o)+t.get(s,r),s,o):i.set(i.get(s,o)+1,s,o))}return i}const Py=Sy(((e,t)=>e&t));Ry(En,Py);function Ly(e){return(t,n,a)=>{const r=Pt(n,t.length);for(let o=0;o<t.length;++o)r[o]=e(t[o],a);return r}}function zy(e,t,n){return By(e,Ly(t),n)}function By(e,t,n){return a=>{let{inputs:r,attrs:o,backend:i}=a;const{x:s}=r;wy(s,e);const c=i,u=c.data.get(s.dataId).values;let l;if("string"===s.dtype){if(!Array.isArray(u))throw new Error("String tensor's value was not an instance of Array");l=Ym(u)}else l=u;const d=n||s.dtype,p=t(l,d,o);return c.makeTensorInfo(s.shape,d,p)}}const Wy=Ly((e=>Math.ceil(e)));By(On,Wy);function Uy(e,t,n,a){const r=Pt(n,It(t));if(a&&"string"!==n){let t=0;e.forEach((e=>{const n=It(e.shape);r.set(e.vals,t),t+=n}))}else{let a=0;e.forEach((e=>{const o="string"===n?Ym(e.vals):e.vals;let i=0;for(let n=0;n<e.shape[0];++n){const s=n*t[1]+a;for(let t=0;t<e.shape[1];++t)r[s+t]=o[i++]}a+=e.shape[1]}))}return r}const Vy=Sy(((e,t)=>e===t?1:0)),Gy=(Ry(ua,Vy,null,"bool"),Ly((e=>Math.exp(e)))),Hy=(By(la,Gy,"float32"),Ly((e=>Math.expm1(e)))),jy=(By(pa,Hy),Ly((e=>Math.floor(e)))),Ky=(By(ga,jy),Sy(((e,t)=>Math.floor(e/t))));Ry(ya,Ky,null,"int32");function qy(e,t,n,a,r,o,i,s,c){const u=oc([a,o],n);for(let l=0;l<a;l++){const n=[];let a=0;for(let t=0;t<r;t++){const o=e[l*r+t];a+=o*i[t],n.push(o)}if(a<0||a>=c/o)throw new Error("Invalid indices: ".concat(n," does not index into ").concat(s));for(let e=0;e<o;e++)u.values[l*o+e]=t.get(...t.indexToLoc(a*o+e))}return u}function Xy(e,t,n){const a=oc(n,e.dtype);for(let r=0;r<a.size;++r){const n=a.indexToLoc(r).slice(),o=n[0],i=n[2],s=t.locToIndex([o,i]);n[2]=t.values[s];const c=e.locToIndex(n);0<=c&&c<e.values.length&&(a.values[r]=e.values[c])}return a}const Yy=Sy(((e,t)=>e>t?1:0)),Qy=(Ry(wa,Yy,null,"bool"),Sy(((e,t)=>e>=t?1:0))),Zy=(Ry(ka,Qy,null,"bool"),Sy(((e,t)=>e<t?1:0))),$y=(Ry(Ra,Zy,null,"bool"),Sy(((e,t)=>e<=t?1:0)));Ry(Aa,$y,null,"bool");function Jy(e,t,n){const a=(t-e)/(n-1),r=Xt(n,"float32");r[0]=e;for(let o=1;o<r.length;o++)r[o]=r[o-1]+a;return r}const eb=Ly((e=>Math.log(e)));By(Fa,eb);function tb(e,t,n,a){const r=Mt(a,It(n));for(let o=0;o<r.length;++o){const n=o*t;let a=e[n];for(let r=0;r<t;++r){const t=e[n+r];(Number.isNaN(t)||t>a)&&(a=t)}r[o]=a}return r}const nb=Sy(((e,t)=>Math.max(e,t))),ab=(Ry(Ua,nb),Sy(((e,t)=>Math.min(e,t)))),rb=(Ry(Ya,ab),Sy(((e,t)=>e*t))),ob=Ay(((e,t,n,a)=>({real:e*n-t*a,imag:e*a+t*n})));Ry(Ja,rb,ob);function ib(e,t,n){const a=Ho(-1,n);return rb([],t,a,e,n)}const sb=Sy(((e,t)=>e!==t?1:0));Ry(tr,sb,null,"bool");function cb(e,t,n,a,r){const o=t.length,i=It(t),s=Gt(t),c=Gt(r),u=Mt(n,It(r));for(let l=0;l<i;++l){const t=Zt(l,o,s),n=new Array(t.length);for(let e=0;e<n.length;e++)n[e]=t[a[e]];u[Qt(n,o,c)]=e[l]}return u}function ub(e,t,n,a){const[r,o]=Jl(e,a),i=wi(t,"int32"),s=Xt(It(r),i),c=It(o);for(let u=0;u<s.length;++u){const e=u*c;let t=1;for(let a=0;a<c;++a)t*=n[e+a];s[u]=t}return{outVals:s,outShape:r,outDtype:i}}function lb(e,t,n,a){const r=[];let o=0;const i=t.length-1+n.length,s=new Array(i).fill(null).map((()=>[0]));!function(e,t){for(let n=0;n<e.length;++n){const a=e[n],r=n===e.length-1?t:e[n+1].length;if(0===a.length)throw new Error("Ragged splits may not be empty");if(a[0]<0)throw new Error("Ragged splits must be non-negative");if(a[a.length-1]>r)throw new Error("Ragged splits must not point past values");for(let e=1;e<a.length;++e)if(a[e-1]>a[e])throw new Error("Ragged splits must be sorted in ascending order")}}(n,a);let c=1;for(let u=0;u<t.length-1;++u){c*=t[u];const e=t[u+1];for(let t=1;t<c+1;++t)s[u].push(t*e)}for(let u=0;u<e.length;++u){let a=e[u],i=e[u]+1;for(let e=0;e<n.length;++e){const r=n[e],o=e+t.length-1;if(o>=0){const e=s[o],t=e[e.length-1]-r[a];for(let n=a;n<i;++n)s[o].push(r[n+1]+t)}a=r[a],i=r[i]}i!==a&&(r.push([a,i]),o+=i-a)}return{outSplits:s,valueSlices:r,numValues:o}}function db(e,t){const n=e.slice(0,t);for(;n.length<t;)n.push(1);for(let a=t;a<e.length;a++)n[t-1]*=e[a];return n}function pb(e,t,n,a,r){const o=t.slice();o[0]=r;const i=Pt(n,It(o)),s=e.length;return function(e,t,n,a,r,o){const i=db(t,2)[1],s=db(o,2)[1];let c=0;for(const u of n)for(let t=u[0];t<u[1];++t){for(let n=0;n<a;++n)r[c*s+n]=e[t*i+n];++c}}(e,t,a,0===s?0:s/t[0],i,o),[i,o]}function hb(e,t,n,a,r,o,i,s){if(0===e.length)throw new Error("paramsNestedSplits must be non empty");if(0===t[0].length)throw new Error("Split tensors must not be scalars");if(function(e,t,n){e.forEach(((e,a)=>{if(e<0||e>=n){const r=Zt(a,t.length,Gt(t)).join(",");throw new Error("indices[".concat(r,"] = ").concat(e," is not in [0, ").concat(n,")"))}}))}(o,i,t[0][0]-1),0===a.length)throw new Error("params.rank must be nonzero");const c=a[0],{outSplits:u,valueSlices:l,numValues:d}=lb(o,i,e,c),p=function(e){const t=[];for(let n=0;n<e.length;++n){const a=Pt("int32",e[n].length);t.push(a),e[n].forEach(((e,t)=>a[t]=e))}return t}(u),h=pb(n,a,r,l,d);return[p,h[0],h[1]]}const fb=2147483647;function mb(e,t,n,a,r,o,i){if(t.length>1)throw new Error("starts must be a scalar or vector");if(r.length>1)throw new Error("limits must be a scalar or vector");if(i.length>1)throw new Error("deltas must be a scalar or vector");const s=0===t.length,c=0===r.length,u=0===i.length,l=[];s||l.push(t[0]),c||l.push(r[0]),u||l.push(i[0]);for(let m=1;m<l.length;++m)if(l[m]!==l[m-1])throw new Error("starts, limits, and deltas must have the same shape");const d=0===l.length?1:l[0],p=Pt("int32",d+1);p[0]=0;for(let m=0;m<d;++m){const t=s?e[0]:e[m],n=c?a[0]:a[m],r=u?o[0]:o[m];if(0===r)throw new Error("Requires delta != 0");let i;if(r>0&&n<t||r<0&&n>t)i=0;else if(i=Math.ceil(Math.abs((n-t)/r)),i>fb)throw new Error("Requires ((limit - start) / delta) <= ".concat(fb));p[m+1]=p[m]+i}const h=Pt(n,p[d]);let f=0;for(let m=0;m<d;++m){const t=p[m+1]-p[m];let n=s?e[0]:e[m];const a=u?o[0]:o[m];for(let e=0;e<t;++e)h[f++]=n,n+=a}return[p,h]}var gb=Xf;class yb{constructor(e,t,n,a,r,o,i,s,c,u){this.shape=e,this.shapeShape=t,this.values=n,this.valuesShape=a,this.valuesDType=r,this.defaultValue=o,this.defaultValueShape=i,this.rowPartitionValues=s,this.rowPartitionValuesShapes=c,this.rowPartitionTypes=Qf(u),this.raggedRank=Zf(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===gb.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===gb.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const t=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case gb.VALUE_ROWIDS:return yb.getMaxWidthValueRowID(t);case gb.ROW_SPLITS:return yb.getMaxWidthRowSplit(t);default:throw new Error("Cannot handle partition type ".concat(gb[this.getRowPartitionTypeByDimension(e-1)]))}}static getMaxWidthRowSplit(e){const t=e.length;if(0===t||1===t)return 0;let n=0;for(let a=0;a<t-1;++a){const t=e[a+1]-e[a];t>n&&(n=t)}return n}static getMaxWidthValueRowID(e){const t=e.length;if(0===t)return 0;let n=0,a=e[0],r=0;for(let o=1;o<t;++o){const t=e[o];t!==a&&(a=t,r=Math.max(o-n,r),n=o)}return Math.max(t-n,r)}tensorShapeFromTensor(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(0===t.length){if(-1===e[0])return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return xb(e,n)}calculateOutputSize(e){const t=this.valuesShape;$f(this.defaultValueShape,t);const n=this.tensorShapeFromTensor(this.shape,this.shapeShape),a=Yf(this.raggedRank,n,t);a[0]<0&&(a[0]=e);for(let r=1;r<=this.raggedRank;++r)a[r]<0&&(a[r]=this.getMaxWidth(r));return a}calculateFirstParentOutputIndex(e,t,n){const a=Math.min(e,n),r=[];let o=0;for(let i=0;i<a;++i,o+=t)r.push(o);for(let i=a;i<e;++i)r.push(-1);return kt(r.length===e,(()=>"Final length of result must be equal to firstDimension.")),r}calculateOutputIndexRowSplit(e,t,n,a){const r=e.length,o=[];for(let i=0;i<r-1;++i){const r=e[i+1]-e[i];let s=Math.min(a,r),c=t[i];-1===c&&(s=0);for(let e=0;e<s;++e)o.push(c),c+=n;for(let e=0;e<r-s;++e)o.push(-1)}if(r>0&&o.length!==e[r-1])throw new Error("Invalid row split size.");return o}calculateOutputIndexValueRowID(e,t,n,a){const r=e.length,o=[];if(0===r)return[];let i=0,s=e[0];if(s>=t.length)throw new Error("Got currentValueRowId=".concat(s,", which is not less than ").concat(t.length));let c=t[s];o.push(c);for(let u=1;u<r;++u){const r=e[u];if(r===s)c>=0&&(++i,i<a?c+=n:c=-1);else{if(i=0,s=r,r>=t.length)throw new Error("Got nextValueRowId=".concat(r," which is not less than ").concat(t.length));c=t[r]}o.push(c)}if(o.length!==e.length)throw new Error("Invalid row ids.");return o}calculateOutputIndex(e,t,n,a){const r=this.getRowPartitionTensor(e),o=this.getRowPartitionTypeByDimension(e);switch(o){case gb.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(r,t,n,a);case gb.ROW_SPLITS:if(r.length-1>t.length)throw new Error("Row partition size is greater than output size: ".concat(r.length-1," > ").concat(t.length));return this.calculateOutputIndexRowSplit(r,t,n,a);default:throw new Error("Unsupported partition type: ".concat(gb[o]))}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(0===this.rowPartitionTypes.length)throw new Error("No row_partition_types given.");const t=this.rowPartitionTypes[0];switch(t){case gb.FIRST_DIM_SIZE:return e[0];case gb.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case gb.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error("Cannot handle type ".concat(gb[t]))}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const e=this.getFirstDimensionSize(),t=this.calculateOutputSize(e),n=new Array(this.raggedRank+1);n[n.length-1]=1;for(let o=n.length-2;o>=0;--o)n[o]=n[o+1]*t[o+1];const a=xb(t,!1),r=Pt(this.valuesDType,It(a));if(n[0]*t[0]>0){let o=this.calculateFirstParentOutputIndex(e,n[0],t[0]);for(let e=1;e<=this.raggedRank;++e){o=this.calculateOutputIndex(e-1,o,n[e],t[e])}this.setOutput(this.raggedRank,o,r,a)}return[a,r]}setOutput(e,t,n,a){if(0===n.length)return;const r=this.values,o=n;let i=a.slice();i=i.slice(e+1);const s=It(i),c=t.length;let u=this.defaultValue;if(u.length!==s&&1!==u.length){const e=this.defaultValueShape;Zi((()=>{const t=al(u,e),n=vl(t,i);u=n.dataSync()}))}let l=0,d=0,p=0;for(let h=0;h<=c;++h){let e=h<c?t[h]:-1;if(e!==p){if(d<p){const e=r.subarray(l*s);bb(o.subarray(d*s),e,(p-d)*s)}if(h>=c){const t=n.length;e=Math.floor(t/s)}if(e>p)if(1===this.defaultValue.length)o.subarray(p*s,e*s).fill(this.defaultValue[0]),p=e;else for(;e>p;){bb(o.slice(p*s),u,s),++p}e<0?(l=h+1,d=p):(l=h,d=p,p=d+1)}else++p}}}function bb(e,t,n){for(let a=0;a<n;a++)e[a]=t[a]}function xb(e,t){const n=[];for(let a of e){if(a<0){if(!t)throw new Error("Dimension ".concat(a," must be >= 0"));if(a<-1)throw new Error("Dimension ".concat(a," must be >= -1"));a=-1}n.push(a)}return n}function vb(e,t,n,a,r,o,i,s,c,u){return new yb(e,t,n,a,r,o,i,s,c,u).compute()}function wb(e,t,n,a){if(e===t||e<t&&n<0||t<e&&n>1)return Xt(0,a);const r=Xt(Math.abs(Math.ceil((t-e)/n)),a);t<e&&1===n&&(n=-1),r[0]=e;for(let o=1;o<r.length;o++)r[o]=r[o-1]+n;return r}const kb=Ly((e=>1/Math.sqrt(e)));By(Tr,kb);function Sb(e,t,n,a,r,o,i,s,c,u){const l=[a/r,r],d=e.values,p=t.values;if(0===a)return oc(n,t.dtype);const h=c instanceof ci?c:oc(l,t.dtype);"string"===typeof c||"number"===typeof c?h.values.fill(c):"boolean"===typeof c&&h.values.fill(+c);for(let f=0;f<o;f++){const e=[];let o=0;for(let t=0;t<i;t++){const n=d[f*i+t];e.push(n),o+=n*s[t]}if(o<0||o>=a/r)throw new Error("Invalid indices: ".concat(e," does not index into ").concat(n));for(let n=0;n<r;n++)u?h.values[o*r+n]+=p[f*r+n]:h.values[o*r+n]=0===t.rank?p[0]:p[f*r+n]}return h}const Cb=Ly((e=>1/(1+Math.exp(-e))));zy(Lr,(e=>1/(1+Math.exp(-e))));function Ib(e,t,n,a,r){const o=Iu(a,t,n),i=It(n),s=Gt(a);if(o){const n=Nu(t,s);return"string"===r?e.slice(n,n+i):e.subarray(n,n+i)}const c=oc(a,r,"string"===r?Ym(e):e),u=oc(n,r);for(let l=0;l<u.size;++l){const e=u.indexToLoc(l),n=e.map(((e,n)=>e+t[n]));u.set(c.get(...n),...e)}return"string"===r?Qm(u.values):u.values}function Nb(e,t,n,a,r,o,i){const s=t[0],c=o[0],u=new Array(c),l=new Array(s),d=t[1];if(0===c){if(0!==s)throw new Error(Dm(s));return[Pt(n,0),[0,d],Pt(r,0),u,l]}let p=!0,h=0;const f=new Array(c).fill(0);for(let g=0;g<s;++g){const t=e[g*d];if(t<0)throw new Error(Mm(g,t));if(t>=c)throw new Error(Pm(g,t,c));++f[t],p=p&&t>=h,h=t}let m=!0;for(let g=0;g<c;++g){const e=0===f[g];u[g]=e,m=m&&!e,f[g]=Math.max(f[g],1),g>0&&(f[g]+=f[g-1])}if(m&&p){const t=e,n=a;for(let e=0;e<s;++e)l[e]=e;return[t,[s,d],n,u,l]}{const t=f[c-1],o=Pt(n,t*d),p=Pt(r,t),h=new Array(c).fill(0);for(let n=0;n<s;++n){const t=e[n*d],r=h[t],i=(0===t?0:f[t-1])+r;h[t]++;for(let a=0;a<d;++a)o[i*d+a]=e[n*d+a];p[i]=a[n],l[n]=i}for(let e=0;e<c;++e){if(0===h[e]){const t=0===e?0:f[e-1];o[t*d+0]=e;for(let e=1;e<d;++e)o[t*d+e]=0;p[t]=i}}return[o,[t,d],p,u,l]}}function Tb(e,t,n,a,r){const o=It(a),i=t[0],s=r.length,c=[];let u=1,l=-1;for(let m=0;m<s;++m){const e=r[m];if(-1===e){if(-1!==l)throw new Error(Lm(l,m));l=m,c.push(1)}else{if(e<0)throw new Error(zm(m,e));u*=e,c.push(e)}}if(-1!==l){if(u<=0)throw new Error("reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero");const e=Math.trunc(o/u);if(u*e!==o)throw new Error(Wm(a,c));c[l]=e}if(It(c)!==o)throw new Error(Um(a,c));const d=a.length,p=[];if(d>0){p[d-1]=1;for(let e=d-2;e>=0;--e)p[e]=p[e+1]*a[e+1]}const h=[];if(s>0){h[s-1]=1;for(let e=s-2;e>=0;--e)h[e]=h[e+1]*c[e+1]}const f=Pt(n,i*s);for(let m=0;m<i;++m){let t=0;for(let n=0;n<d;++n)t+=e[m*d+n]*p[n];for(let e=0;e<s;++e)f[m*s+e]=Math.trunc(t/h[e]),t%=h[e]}return[f,[i,s],c]}function _b(e,t,n,a,r){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;const s=a.length,c=[t[0],e.length/t[0]],u=c[1],l=s>0?r[s-1]+1:0;if(l<0)throw new Error("segment ids must be >= 0");const d=t.slice();d[0]=l;const p=Pt(n,d.reduce(((e,t)=>e*t),1));if(0===s)return l>0&&p.fill(i),[p,d];if(l<=0)throw new Error("segment ids must be >= 0");let h=0,f=1,m=0,g=r[h];for(;;){let t=0;if(f<s){if(t=r[f],g===t){++f;continue}if(g>=t)throw new Error("segment ids are not increasing")}if(g<0||g>=l)throw new Error(Hm(g,l));g>m&&p.fill(i,m*u,g*u);for(let n=h;n<f;++n){const t=a[n];if(t<0||t>=c[0])throw new Error(jm(n,a[n],c[0]));for(let n=0;n<u;n++)p[g*u+n]+=e[t*u+n]}if(o)for(let e=0;e<u;e++)p[g*u+e]/=f-h;if(h=f,++f,m=g+1,g=t,f>s)break}return m<l&&p.fill(i,m*u,l*u),[p,d]}const Eb=Ly((e=>Math.sqrt(e))),Rb=(zy(Br,(e=>Math.sqrt(e))),Ly(((e,t)=>{const{pattern:n,replaceGlobal:a,rewrite:r}=t;return e.replace(new RegExp(n,a?"g":""),r)})));By(Zr,Rb);function Ab(e,t,n,a){const r=oc(e,t.dtype);for(let o=0;o<r.size;o++){const e=r.indexToLoc(o),i=new Array(e.length);for(let t=0;t<i.length;t++)i[t]=e[t]*n[t]+a[t];r.set(t.get(...i),...e)}return r}class Ob{constructor(e,t,n,a,r,o){this.separator=qo(e),this.nGramWidths=t,this.leftPad=qo(n),this.rightPad=qo(a),this.padWidth=r,this.preserveShort=o}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,t){const n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)}createNGrams(e,t,n,a,r,o){for(let i=0;i<r;++i){const s=this.getPadWidth(o),c=Math.max(0,s-i),u=Math.max(0,s-(r-(i+1))),l=o-(c+u),d=t+(c>0?0:i-s);let p=0;p+=c*this.leftPad.length;for(let t=0;t<l;++t)p+=e[d+t].length;p+=u*this.rightPad.length;p+=(c+u+l-1)*this.separator.length,n[a+i]=new Uint8Array(p);const h=n[a+i];let f=0;const m=e=>e.forEach((e=>h[f++]=e));for(let e=0;e<c;++e)m(this.leftPad),m(this.separator);for(let t=0;t<l-1;++t)m(e[d+t]),m(this.separator);if(l>0){m(e[d+l-1]);for(let e=0;e<u;++e)m(this.separator),m(this.rightPad)}else{for(let e=0;e<u-1;++e)m(this.rightPad),m(this.separator);m(this.rightPad)}}}compute(e,t){const n=e.length,a=t.length;if(a>0){let e=t[0];if(0!==e)throw new Error("First split value must be 0, got ".concat(e));for(let r=1;r<a;++r){let a=t[r]>=e;if(a=a&&t[r]<=n,!a)throw new Error("Invalid split value ".concat(t[r],", must be in [").concat(e,", ").concat(n,"]"));e=t[r]}if(e!==n)throw new Error("Last split value must be data size. Expected ".concat(n,", got ").concat(e))}const r=a-1,o=Pt("int32",a);if(0===n||0===a){const e=new Array(n);for(let t=0;t<=r;++t)o[t]=0;return[e,o]}o[0]=0;for(let s=1;s<=r;++s){const e=t[s]-t[s-1];let n=0;this.nGramWidths.forEach((t=>{n+=this.getNumNGrams(e,t)})),this.preserveShort&&e>0&&0===n&&(n=1),o[s]=o[s-1]+n}const i=new Array(o[r]);for(let s=0;s<r;++s){const n=t[s];let a=o[s];if(this.nGramWidths.forEach((r=>{const o=t[s+1]-t[s],c=this.getNumNGrams(o,r);this.createNGrams(e,n,i,a,c,r),a+=c})),this.preserveShort&&a===o[s]){const r=t[s+1]-t[s];if(0===r)continue;const o=r+2*this.padWidth,c=1;this.createNGrams(e,n,i,a,c,o)}}return[i,o]}}function Fb(e,t,n,a,r,o,i,s){return new Ob(n,a,r,o,i,s).compute(e,t)}function Db(e,t,n,a){if(!e.length)return;if(0===t.length){for(let t=0;t<e.length;++t)a.push(e.subarray(t,t+1));return}if(1===t.length){const r=t[0];let o=e.indexOf(r);for(;-1!==o;){const t=e.subarray(0,o);n&&0===t.length||a.push(t),o=(e=e.subarray(o+1)).indexOf(r)}return void(n&&0===e.length||a.push(e))}let r=0;for(let o=0;o<e.length+1;o++)if(o===e.length||-1!==t.indexOf(e[o])){const t=e.subarray(r,o);n&&0===t.length||a.push(t),r=o+1}}function Mb(e,t,n){const a=e.length,r=[];let o=0,i=0;const s=new Array(a);for(let p=0;p<a;++p){const a=r.length;Db(e[p],t,n,r);const c=r.length-a;s[p]=c,o+=c,i=Math.max(i,c)}const c=Pt("int32",2*o),u=new Array(o),l=[a,i];let d=0;for(let p=0;p<a;++p)for(let e=0;e<s[p];++e)c[2*d]=p,c[2*d+1]=e,u[d]=r[d],++d;return[c,u,l]}function Pb(e,t){const n=Pt("int32",e.length);for(let a=0;a<e.length;++a)n[a]=Go(e[a]).modulo(t).getLowBitsUnsigned();return n}const Lb=Sy(((e,t)=>e-t)),zb=Ay(((e,t,n,a)=>({real:e-n,imag:t-a})));Ry(no,Lb,zb);function Bb(e,t){const n=new Array(e.rank);for(let r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];const a=oc(n,e.dtype);for(let r=0;r<a.values.length;++r){const t=a.indexToLoc(r),n=new Array(e.rank);for(let a=0;a<n.length;a++)n[a]=t[a]%e.shape[a];const o=e.locToIndex(n);a.values[r]=e.values[o]}return a}const Wb=(e,t)=>{const n=t.value-e.value;return 0===n?e.index-t.index:n};function Ub(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length-1;for(;a>n;){if(a-n>600){const r=a-n+1,o=t-n+1,i=Math.log(r),s=.5*Math.exp(2*i/3),c=.5*Math.sqrt(i*s*(r-s)/r)*Math.sign(o-r/2);Ub(e,t,Math.max(n,Math.floor(t-o*s/r+c)),Math.min(a,Math.floor(t+(r-o)*s/r+c)))}const r=e[t];let o=n,i=a;for(vt(e,n,t),Wb(e[a],r)>0&&vt(e,n,a);o<i;){for(vt(e,o,i),o++,i--;Wb(e[o],r)<0;)o+=1;for(;Wb(e[i],r)>0;)i-=1}0===Wb(e[n],r)?vt(e,n,i):(i+=1,vt(e,i,a)),i<=t&&(n=i+1),t<=i&&(a=i-1)}}function Vb(e,t,n,a,r){const o=t[t.length-1],[i,s]=[e.length/o,o],c=Mt(n,i*a),u=Mt("int32",i*a);for(let d=0;d<i;d++){const t=d*s,n=e.subarray(t,t+s);let o=new Array(n.length);n.forEach(((e,t)=>o[t]={value:e,index:t})),a<o.length&&(Ub(o,a),o=o.slice(0,a)),r&&o.sort(Wb);const i=d*a,l=c.subarray(i,i+a),p=u.subarray(i,i+a);for(let e=0;e<a;e++)l[e]=o[e].value,p[e]=o[e].index}const l=t.slice();return l[l.length-1]=a,[oc(l,n,c),oc(l,"int32",u)]}function Gb(e,t,n,a){const r=Ft(t,n)[0],o=[1,n[0],1];for(let f=0;f<r;f++)o[0]*=n[f];o[1]=n[r];for(let f=r+1;f<n.length;f++)o[2]*=n[f];const i=new Map,s=new Int32Array(n[r]),c=new ci(o,a,e),u=[],l=1===o[0]&&1===o[2];for(let f=0;f<n[r];f++){let t;if(l)t=e[f].toString();else{const e=[];for(let t=0;t<o[0];t++)for(let n=0;n<o[2];n++)e.push(c.get(t,f,n));t=e.join(",")}const n=i.get(t);if(null!=n)s[f]=n;else{const e=i.size;i.set(t,e),s[f]=e,u.push(f)}}const d=o.slice();d[1]=i.size;const p=new ci(d,a);u.forEach(((e,t)=>{for(let n=0;n<o[0];n++)for(let a=0;a<o[2];a++)p.set(c.get(n,e,a),n,t,a)}));const h=n.slice();return h[r]=d[1],{outputValues:p.values,outputShape:h,indices:s}}const{mx:Hb,XI:jb,Nk:Kb,f6:qb,ct:Xb,YG:Yb,hH:Qb,z3:Zb,sG:$b,uM:Jb,vS:ex,qB:tx,GG:nx,rq:ax,lg:rx,WR:ox,cu:ix,GE:sx,px:cx,jC:ux,He:lx,hE:dx,BF:px,Dk:hx,cl:fx,_B:mx,ub:gx,_f:yx,Ku:bx,qy:xx,Zy:vx,bu:wx,zv:kx,dH:Sx,HS:Cx,yH:Ix,l3:Nx,z9:Tx,x6:_x,_m:Ex,eW:Rx,GK:Ax,SP:Ox,yr:Fx,dl:Dx,Dw:Mx,xT:Px,_X:Lx,wz:zx}=i;function Bx(e,t){return["x","y","z","w","u","v"].slice(0,t).map((t=>"".concat(e,".").concat(t)))}function Wx(e,t){return 1===t?[e]:Bx(e,t)}class Ux{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=ny(this.outputShape.length),0===this.rank)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{const e=Wx("rc",this.rank),t=Yg(this.rank),n=this.getOutOfBoundsCondition(e),a=this.getSetup(e),r=this.getOutput(e);this.userCode="\n        void main() {\n          ".concat(t," rc = getOutputCoords();\n\n          if(").concat(n,") {\n            setOutput(vec4(0));\n          } else {\n            ").concat(a,"\n\n            setOutput(vec4(").concat(r,"));\n          }\n        }\n      ")}}getSourceCoordsArr(e){const t=[];for(let n=0;n<=1;n++)for(let a=0;a<=1;a++){let r="".concat(0===n?"r":"rp1",", ").concat(0===a?"c":"cp1");for(let t=2;t<this.rank;t++)r="".concat(e[e.length-1-t],",")+r;t.push(r)}return t}getOutOfBoundsCondition(e){if(1===this.rank)return"rc > ".concat(this.enableShapeUniforms?"outShape":this.outputShape[0]);let t="";for(let n=this.rank-2;n<this.rank;n++)t+="".concat(e[n]," >= ").concat(this.enableShapeUniforms?"outShape[".concat(n,"]"):this.outputShape[n]),n<this.rank-1&&(t+="||");return t}getSetup(e){if(1===this.rank)return"";const t=e.slice(-2),n=this.enableShapeUniforms?"outShape[".concat(this.rank," - 1]"):this.outputShape[this.rank-1],a=this.enableShapeUniforms?"outShape[".concat(this.rank," - 2]"):this.outputShape[this.rank-2];return"\n      int r = ".concat(t[0],";\n      int c = ").concat(t[1],";\n      int rp1 = r + 1;\n      int cp1 = c + 1;\n\n      bool cEdge = cp1 >= ").concat(n,";\n      bool rEdge = rp1 >= ").concat(a,";\n    ")}getOutput(e){const t=this.getSourceCoordsArr(e);if(1===this.rank){const e=this.enableShapeUniforms?"outShape":this.outputShape[0];return"getA(rc), (rc + 1 >= ".concat(e," ? 0. : getA(rc + 1)), 0, 0")}return"getA(".concat(t[0],"),\n            cEdge ? 0. : getA(").concat(t[1],"),\n            rEdge ? 0. : getA(").concat(t[2],"),\n            rEdge || cEdge ? 0. : getA(").concat(t[3],")")}}class Vx{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=ny(this.outputShape.length);let n="";for(let a=0;a<4;a++){let e="thisRC = rc;";a%2===1&&(e+="thisRC.z += 1;"),a>1&&(e+="thisRC.y += 1;"),n+="\n        ".concat(e,"\n        ").concat(a>0?"if(thisRC.y < rows && thisRC.z < cols){":"","\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[").concat(a,"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ").concat(a>0?"}":"","\n      ")}this.userCode="\n      ".concat(function(e,t){const n=t?Pg(["r","c","d"],"inputShape"):Dg(["r","c","d"],e);return"\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ".concat(n,"\n      return ivec3(r, c, d);\n    }\n  ")}(t,this.enableShapeUniforms),"\n      ").concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":Lg(e),"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ").concat(this.enableShapeUniforms?"outShape[1]":e[1],";\n        int cols = ").concat(this.enableShapeUniforms?"outShape[2]":e[2],";\n\n        ").concat(n,"\n\n        setOutput(result);\n      }\n    ")}}class Gx{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,t,n){const a=jx(t,n),r=Kx(e,a,n);r in this.freeTextures||(this.freeTextures[r]=[]),r in this.usedTextures||(this.usedTextures[r]=[]);const o=Hx(e,a,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[r].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();const e=this.freeTextures[r].pop();return this.usedTextures[r].push(e),e}let i;return a===ng.PACKED_2X2_FLOAT32?i=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):a===ng.PACKED_2X2_FLOAT16?i=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):a===ng.UNPACKED_FLOAT32?i=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):a===ng.UNPACKED_FLOAT16?i=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):a===ng.PACKED_4X1_UNSIGNED_BYTE&&(i=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[r].push(i),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),i}releaseTexture(e,t,n,a){if(null==this.freeTextures)return;const r=jx(n,a),o=Kx(t,r,a);o in this.freeTextures||(this.freeTextures[o]=[]);const i=Hx(t,r,this.gpgpu.gl,this.gpgpu.textureConfig,a),s=nn().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==s&&this._numBytesAllocated>s?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=i):(this.freeTextures[o].push(e),this.numFreeTextures++,this._numBytesFree+=i),this.numUsedTextures--;const c=this.usedTextures[o],u=c&&c.indexOf(e);if(null==u||u<0)throw new Error("Cannot release a texture that was never provided by this texture manager");c[u]=c[c.length-1],c.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used","".concat(this.numFreeTextures," / ").concat(this.numUsedTextures),"(".concat(e,")"));const t=this._numBytesFree/this._numBytesAllocated;console.log("Bytes allocated: ".concat(this._numBytesAllocated)),console.log("Bytes unused: ".concat(this._numBytesFree," (").concat(Math.round(100*t),"%)"))}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(null!=this.freeTextures){for(const e in this.freeTextures)this.freeTextures[e].forEach((e=>{this.gpgpu.deleteMatrixTexture(e.texture)}));for(const e in this.usedTextures)this.usedTextures[e].forEach((e=>{this.gpgpu.deleteMatrixTexture(e.texture)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function Hx(e,t,n,a,r){const o=function(e,t){switch(e){case ng.PACKED_2X2_FLOAT32:return yy(t);case ng.PACKED_2X2_FLOAT16:return by(t);case ng.UNPACKED_FLOAT32:return fy(t);case ng.UNPACKED_FLOAT16:return my(t);case ng.PACKED_4X1_UNSIGNED_BYTE:return gy(t);default:throw new Error("Unknown physical texture type ".concat(e))}}(t,a);let i;if(r){const[t,n]=og(e[0],e[1]);i=t*n}else{const[t,n]=ag(e[0],e[1]);i=t*n}const s=function(e,t){const n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error("Unknown internal format ".concat(t))}(n,o);return i*s}function jx(e,t){if(e===tg.UPLOAD)return ng.PACKED_2X2_FLOAT32;if(e===tg.RENDER||null==e)return function(e){return nn().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?ng.PACKED_2X2_FLOAT32:ng.UNPACKED_FLOAT32:e?ng.PACKED_2X2_FLOAT16:ng.UNPACKED_FLOAT16}(t);if(e===tg.DOWNLOAD||e===tg.PIXELS)return ng.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type ".concat(e))}function Kx(e,t,n){return"".concat(e[0],"_").concat(e[1],"_").concat(t,"_").concat(n)}class qx{constructor(e,t){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=ny(this.outputShape.length),this.userCode="\n      float unaryOperation(float x) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")}}const Xx="if (isnan(x)) return x;",Yx="return x;",Qx="return abs(x);";const Zx="return (x >= 0.0) ? x : (exp(x) - 1.0);",$x=Xx+"\n  return (x < 0.0) ? 0.0 : x;\n",Jx=Xx+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",ev="return x;",tv="return 1.0 / (1.0 + exp(-1.0 * x));",nv="return x;",av="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",rv="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",ov="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",iv="return 1.0 / (1.0 + exp(-1.0 * x));";class sv{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=ny(this.outputShape.length),this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        ".concat(t,"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")}}class cv{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=ny(this.outputShape.length);const t=e.length,n=Wx("rc",t),a=Yg(t),r=function(e,t){if(1===e)return"rc";let n="";for(let a=0;a<e;a++)n+=t[a],a<e-1&&(n+=",");return n}(t,n),o=n.slice(-2),i=t<=1?"rc":"vec2(".concat(o.join(","),")");this.userCode="\n      void main() {\n        ".concat(a," rc = getOutputCoords();\n        vec4 packedInput = getA(").concat(r,");\n\n        setOutput(getChannel(packedInput, ").concat(i,"));\n      }\n    ")}}const uv=wh,lv={};const dv=nn().getNumber("CPU_HANDOFF_SIZE_THRESHOLD");class pv extends gt{nextDataId(){return pv.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!nn().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let t;if(null!=e){if(e instanceof vy)t=e;else{const n=Jm(nn().getNumber("WEBGL_VERSION"),e);t=new vy(n)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const e=Jm(nn().getNumber("WEBGL_VERSION"));t=new vy(e),this.binaryCache=((n=nn().getNumber("WEBGL_VERSION"))in lv||(lv[n]={}),lv[n]),this.gpgpuCreatedLocally=!0}var n;this.gpgpu=t,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new Gx(this.gpgpu),this.numMBBeforeWarning=null==nn().global.screen?1024:nn().global.screen.height*nn().global.screen.width*window.devicePixelRatio*600/1024/1024,this.texData=new mt(this,Qi())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,t,n,a,r,o){const i=this.makeTensorInfo(t,n),s=this.texData.get(i.dataId);s.isPacked=!1,s.texture={texture:e,texShape:[a,r]},s.texShape=[a,r];const c=kg(t),u=new cy(c,!1,o),l=this.runWebGLProgram(u,[i],n,[[a,r]]);return l.shape=t,s.texture=null,this.disposeIntermediateTensorInfo(i),l.dataId}write(e,t,n){if((nn().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||nn().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const a={id:this.nextDataId()};return this.texData.set(a,{shape:t,dtype:n,values:e,usage:tg.UPLOAD,refCount:1}),a}refCount(e){if(this.texData.has(e)){return this.texData.get(e).refCount}return 0}incRef(e){this.texData.get(e).refCount++}decRef(e){if(this.texData.has(e)){this.texData.get(e).refCount--}}move(e,t,n,a,r){if(nn().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===a)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:a,values:t,usage:tg.UPLOAD,refCount:r})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const t=this.texData.get(e),{values:n,dtype:a,complexTensorInfos:r,slice:o,shape:i,isPacked:s}=t;if(null!=o){let t;t=s?new sv(i,ev):new qx(i,ev);const n=this.runWebGLProgram(t,[{dataId:e,shape:i,dtype:a}],a),r=this.readSync(n.dataId);return this.disposeIntermediateTensorInfo(n),r}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===a)return n;const c=null!=this.activeTimers;let u,l;if(c&&(u=Ko()),"complex64"===a){l=mm(this.readSync(r.real.dataId),this.readSync(r.imag.dataId))}else l=this.getValuesFromTexture(e);return c&&(this.downloadWaitMs+=Ko()-u),this.convertAndCacheOnCPU(e,l)}async read(e){if(this.pendingRead.has(e)){const t=this.pendingRead.get(e);return new Promise((e=>t.push(e)))}const t=this.texData.get(e),{values:n,shape:a,slice:r,dtype:o,complexTensorInfos:i,isPacked:s}=t;if(null!=r){let t;t=s?new sv(a,ev):new qx(a,ev);const n=this.runWebGLProgram(t,[{dataId:e,shape:a,dtype:o}],o),r=this.read(n.dataId);return this.disposeIntermediateTensorInfo(n),r}if(null!=n)return this.convertAndCacheOnCPU(e);if(nn().getBool("DEBUG")&&!nn().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===nn().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let c,u,l=null;if("complex64"!==o&&nn().get("WEBGL_BUFFER_SUPPORTED")){c=this.decode(e);const t=this.texData.get(c.dataId);l=this.gpgpu.createBufferFromTexture(t.texture.texture,...rg(a))}if(this.pendingRead.set(e,[]),"complex64"!==o&&await this.gpgpu.createAndWaitForFence(),"complex64"===o){const e=await Promise.all([this.read(i.real.dataId),this.read(i.imag.dataId)]);u=mm(e[0],e[1])}else if(null==l)u=this.getValuesFromTexture(e);else{const e=It(a);u=this.gpgpu.downloadFloat32MatrixFromBuffer(l,e)}if(null!=c&&this.disposeIntermediateTensorInfo(c),null!=l){const e=this.gpgpu.gl;sg(e,(()=>e.deleteBuffer(l)))}const d=this.convertAndCacheOnCPU(e,u),p=this.pendingRead.get(e);return this.pendingRead.delete(e),p.forEach((e=>e(d))),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&Qi().removeDataId(e,this),this.pendingDeletes--),d}readToGPU(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.texData.get(e),{values:a,shape:r,slice:o,dtype:i,isPacked:s,texture:c}=n;if("complex64"===i)throw new Error("Does not support reading texture for complex64 dtype.");if(null!=o){let n;n=s?new sv(r,ev):new qx(r,ev);const a=this.runWebGLProgram(n,[{dataId:e,shape:r,dtype:i}],i),o=this.readToGPU(a,t);return this.disposeIntermediateTensorInfo(a),o}if(null==c)throw null!=a?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const u=this.decode(e,t.customTexShape),l=Qi().makeTensorFromTensorInfo(u),d=this.texData.get(u.dataId);return Object.assign({tensorRef:l},d.texture)}bufferSync(e){const t=this.readSync(e.dataId);if("string"===e.dtype)try{const n=t.map((e=>Xo(e)));return oc(e.shape,e.dtype,n)}catch(n){throw new Error("Failed to decode encoded string bytes into utf-8")}return oc(e.shape,e.dtype,t)}checkNumericalProblems(e){if(null!=e)for(let t=0;t<e.length;t++){const n=e[t];if(!cg(n)){if(nn().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value ".concat(n," cannot be represented with your ")+"current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value ".concat(n," cannot be represented on this device."))}}}getValuesFromTexture(e){const{shape:t,dtype:n,isPacked:a}=this.texData.get(e),r=It(t);if(nn().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const n=this.decode(e),a=this.texData.get(n.dataId),o=this.gpgpu.downloadMatrixFromPackedTexture(a.texture.texture,...rg(t)).subarray(0,r);return this.disposeIntermediateTensorInfo(n),o}const o=nn().getBool("WEBGL_PACK")&&!0===a,i=o?kg(t):t,s=o?new iy(i):new oy(i),c=this.runWebGLProgram(s,[{shape:i,dtype:n,dataId:e}],"float32"),u=this.texData.get(c.dataId),l=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(u.texture.texture,u.texShape[0],u.texShape[1]).subarray(0,r);return this.disposeIntermediateTensorInfo(c),l}timerAvailable(){return nn().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const t=this.activeTimers,n=[];let a=!1;null==this.programTimersStack?(this.programTimersStack=n,a=!0):this.activeTimers.push(n),this.activeTimers=n,e();const r=Qo(this.activeTimers.map((e=>e.query))).filter((e=>null!=e)),o=Qo(this.activeTimers.map((e=>e.name))).filter((e=>null!=e));this.activeTimers=t,a&&(this.programTimersStack=null);const i={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(nn().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const e=await Promise.all(r);i.kernelMs=wt(e),i.getExtraProfileInfo=()=>e.map(((e,t)=>({name:o[t],ms:e}))).map((e=>"".concat(e.name,": ").concat(e.ms))).join(", ")}else i.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,i})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return nn().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Ko(),endMs:null}}endTimer(e){return nn().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Ko(),e)}async getQueryTime(e){if(nn().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const t=e;return t.endMs-t.startMs}disposeData(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:n}=this.texData.get(e);return null!=n&&(this.disposeData(n.real.dataId,t),this.disposeData(n.imag.dataId,t)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:t,dtype:n,texShape:a,usage:r,isPacked:o,slice:i}=this.texData.get(e),s=i&&i.origDataId||e,c=this.dataRefCount.get(s);c>1?this.dataRefCount.set(s,c-1):(this.dataRefCount.delete(s),null!=t&&(this.numBytesInGPU-=this.computeBytes(a,n),this.textureManager.releaseTexture(t,a,r,o)));const u=this.texData.get(e);u.texture=null,u.texShape=null,u.isPacked=!1,u.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:dv;return nn().getBool("WEBGL_CPU_FORWARD")&&e.every((e=>null==this.texData.get(e.dataId).texture&&It(e.shape)<t))}getGPGPUContext(){return this.gpgpu}where(e){vo("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const t=e.dataSync();return uv(e.shape,t)}packedUnaryOp(e,t,n){const a=new sv(e.shape,t),r=this.compileAndRun(a,[e],n);return Qi().makeTensorFromTensorInfo(r)}abs(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){const t=Sx(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if(nn().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,Qx,e.dtype);const t=new qx(e.shape,Qx),n=this.compileAndRun(t,[e]);return Qi().makeTensorFromTensorInfo(n)}makeTensorInfo(e,t,n){let a;if("string"===t&&null!=n&&n.length>0&&Bt(n[0])){const r=n.map((e=>qo(e)));a=this.write(r,e,t)}else a=this.write(n,e,t);return this.texData.get(a).usage=null,{dataId:a,shape:e,dtype:t}}makeOutput(e,t,n){return Qi().makeTensorFromTensorInfo(this.makeTensorInfo(e,t,n),this)}unpackTensor(e){const t=new cv(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}packTensor(e){const t=new Ux(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}packedReshape(e,t){const n=[vg(e.shape),...wg(e.shape)],a={dtype:e.dtype,shape:n,dataId:e.dataId},r=[vg(t),...wg(t)],o=new Vx(r,n),i=[n],s=this.runWebGLProgram(o,[a],e.dtype,i,!0);return{dataId:s.dataId,shape:t,dtype:s.dtype}}decode(e,t){const n=this.texData.get(e),{isPacked:a,shape:r,dtype:o}=n;if(null!=t){kt(It(r)<=t[0]*t[1]*4,(()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data."))}const i=kg(r);let s;s=a?new ry(i):new ay(i);const c=[null!=t?t:rg(i)];return{dtype:o,shape:r,dataId:this.runWebGLProgram(s,[{shape:i,dtype:o,dataId:e}],o,c,!0,t).dataId}}runWebGLProgram(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5?arguments[5]:void 0;const i=this.makeTensorInfo(e.outputShape,n),s=this.texData.get(i.dataId);if(e.packedOutput&&(s.isPacked=!0),e.outPackingScheme===eg.DENSE){const t=null!=o?o:rg(e.outputShape);s.texShape=t.map((e=>2*e))}if(null!=e.outTexUsage&&(s.usage=e.outTexUsage),0===It(i.shape))return s.values=Mt(i.dtype,0),i;const c=[],u=t.map((t=>{if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let n=this.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&It(t.shape)<=nn().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}if(this.uploadToGPU(t.dataId),!!n.isPacked!==!!e.packedInputs)t=n.isPacked?this.unpackTensor(t):this.packTensor(t),c.push(t),n=this.texData.get(t.dataId);else if(n.isPacked&&!Cg(n.shape,t.shape)){const e=t,a=t.shape;t.shape=n.shape,t=this.packedReshape(t,a),c.push(t),n=this.texData.get(t.dataId),e.shape=a}return{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(i.dataId);const l={shape:i.shape,texData:s,isUniform:!1},d=function(e,t,n){let a="";t.concat(n).forEach((t=>{const r=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!t.isUniform){const o=t.texData.texShape,{useSqueezeShape:i,uniformShape:s,keptDims:c}=Qg(e.packedInputs,t.shape,o);let u="",l="",d="";if(1===s.length&&e.packedInputs){const e=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];u="".concat(e[0]>1,"_").concat(e[1]>1)}else if(2!==s.length||e.packedInputs){if(s.length>2&&!e.packedInputs){const e=Gt(s);d="".concat(e[0]===o[1],"_").concat(e[e.length-1]===o[1])}}else l="".concat(s[0]>1,"_").concat(s[1]>1);const p=t.shape.length,h=2===s.length&&Tt(t.shape,o),f=1===It(t.shape),m=_c(t.shape,n.shape),g=!e.packedInputs&&p===n.shape.length&&Tt(o,n.texData.texShape),y=e.packedInputs||s.length>2?"":"".concat(o[0]>1,"_").concat(o[1]>1);a+="".concat(p,"_").concat(g,"_").concat(i?c:"","_").concat(s.length,"_").concat(f,"_").concat(m,"_").concat(h,"_").concat(u,"_").concat(l,"_").concat(d,"_").concat(y,"_").concat(r)}else{const e=t.isUniform?"uniform":t.texData.texShape;a+="".concat(t.shape,"_").concat(e,"_").concat(r)}}));const r=e.userCode;let o=e.constructor.name;return o+="_"+a+"_"+r+"".concat(nn().getNumber("WEBGL_VERSION")),o}(e,u,l),p=this.getAndSaveBinary(d,(()=>Jg(this.gpgpu,e,u,l))),h=null!=this.activeTimers;let f;h&&(f=this.startTimer()),nn().get("ENGINE_COMPILE_ONLY")||function(e,t,n,a,r){t.program.enableShapeUniforms||(ty(t.inShapeInfos,n),ty([t.outShapeInfo],[a]));const o=a.texData.texture,i=a.texData.texShape;a.texData.isPacked?e.setOutputPackedMatrixTexture(o.texture,i[0],i[1]):e.setOutputMatrixTexture(o.texture,i[0],i[1]),e.setProgram(t.webGLProgram),e.bindVertexArray(t.webGLProgram.vao),1===nn().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN);for(let c=0;c<n.length;++c){const a=n[c],{uniform:r,offset:o,shape:i,texShape:s}=t.variablesLocations[c];if(i){const{uniformShape:n}=Qg(t.program.packedInputs,a.shape,a.texData.texShape);switch(n.length){case 1:e.gl.uniform1iv(i,new Int32Array(n));break;case 2:e.gl.uniform2iv(i,new Int32Array(n));break;case 3:e.gl.uniform3iv(i,new Int32Array(n));break;case 4:e.gl.uniform4iv(i,new Int32Array(n))}}if(s&&e.gl.uniform2i(s,a.texData.texShape[0],a.texData.texShape[1]),null!=r)if(a.isUniform)if(It(a.shape)<2)e.gl.uniform1f(r,a.uniformValues[0]);else{let t=a.uniformValues;t instanceof Float32Array||(t=new Float32Array(t)),e.gl.uniform1fv(r,t)}else null!=a.texData.slice&&null!=o&&e.gl.uniform1i(o,a.texData.slice.flatOffset),e.setInputMatrixTexture(a.texData.texture.texture,r,c)}const s=t.outShapeLocation;if(s)switch(a.shape.length){case 1:e.gl.uniform1iv(s,new Int32Array(a.shape));break;case 2:e.gl.uniform2iv(s,new Int32Array(a.shape));break;case 3:e.gl.uniform3iv(s,new Int32Array(a.shape));break;case 4:e.gl.uniform4iv(s,new Int32Array(a.shape))}if(t.outShapeStridesLocation){const n=Gt(a.shape);switch(a.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(n));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(n));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(n))}}if(t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,a.texData.texShape[0],a.texData.texShape[1]),t.program.customUniforms&&r)for(let c=0;c<t.program.customUniforms.length;++c){const n=t.program.customUniforms[c],a=t.customUniformLocations[c],o=r[c];if("float"===n.type)e.gl.uniform1fv(a,o);else if("vec2"===n.type)e.gl.uniform2fv(a,o);else if("vec3"===n.type)e.gl.uniform3fv(a,o);else if("vec4"===n.type)e.gl.uniform4fv(a,o);else if("int"===n.type)e.gl.uniform1iv(a,o);else if("ivec2"===n.type)e.gl.uniform2iv(a,o);else if("ivec3"===n.type)e.gl.uniform3iv(a,o);else{if("ivec4"!==n.type)throw Error("uniform type ".concat(n.type," is not supported yet."));e.gl.uniform4iv(a,o)}}e.executeProgram()}(this.gpgpu,p,u,l,a),c.forEach((e=>this.disposeIntermediateTensorInfo(e))),h&&(f=this.endTimer(f),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(f)}));const m=nn().getNumber("WEBGL_FLUSH_THRESHOLD");if(m>0){const e=Ko();e-this.lastGlFlushTime>m&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=e)}if(!nn().getBool("WEBGL_LAZILY_UNPACK")&&s.isPacked&&!1===r){const e=this.unpackTensor(i);return this.disposeIntermediateTensorInfo(i),e}return i}compileAndRun(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n=n||t[0].dtype;return this.runWebGLProgram(e,t,n,a,r)}getAndSaveBinary(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){if(!this.disposed){if(!nn().getBool("IS_TEST")){Object.keys(this.binaryCache).forEach((e=>{this.gpgpu.deleteProgram(this.binaryCache[e].webGLProgram),delete this.binaryCache[e]}))}this.textureManager.dispose(),null!=this.canvas&&"undefined"!==typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0}}floatPrecision(){return null==this.floatPrecisionValue&&(this.floatPrecisionValue=Zi((()=>{if(!nn().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=nn().getBool("DEBUG");nn().set("DEBUG",!1);const t=this.abs(yc(1e-8)).dataSync()[0];if(nn().set("DEBUG",e),t>0)return 32}return 16}))),this.floatPrecisionValue}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}uploadToGPU(e){const t=this.texData.get(e),{shape:n,dtype:a,values:r,texture:o,usage:i,isPacked:s}=t;if(null!=o)return;const c=null!=this.activeTimers;let u;c&&(u=Ko());let l=t.texShape;if(null==l&&(l=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=nn().getNumber("WEBGL_MAX_TEXTURE_SIZE"),a=nn().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");if(a===1/0&&nn().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(a=n/2),t&&(n*=2,a*=2,1===(e=e.map(((t,n)=>n>=e.length-2?xt(e[n]):e[n]))).length&&(e=[2,e[0]])),2!==e.length){const t=Dt(e);e=t.newShape}let r=It(e),o=null;e.length<=1&&r<=n?o=[1,r]:2===e.length&&e[0]<=n&&e[1]<=n?o=e:3===e.length&&e[0]*e[1]<=n&&e[2]<=n?o=[e[0]*e[1],e[2]]:3===e.length&&e[0]<=n&&e[1]*e[2]<=n?o=[e[0],e[1]*e[2]]:4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n?o=[e[0]*e[1]*e[2],e[3]]:4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n&&(o=[e[0],e[1]*e[2]*e[3]]);const i=null!=o&&Math.max(...o)>a&&Math.min(...o)<=(t?2:1)&&Math.min(...o)>0;if(null==o||i)if(t){const t=vg(e);let n=2,a=2;e.length&&([n,a]=wg(e)),r=t*(n/2)*(a/2),o=Et(r).map((e=>2*e))}else o=Et(r);return o}(n,s),t.texShape=l),null!=r){const e=kg(n);let o,i=l[1],d=l[0];const p=r instanceof Uint8Array||r instanceof Uint8ClampedArray;!s&&p||([i,d]=og(l[0],l[1])),o=s?new uy(e,p):new cy(e,p);const h=p?[d,i]:l,f=this.makeTensorInfo(h,a),m=this.texData.get(f.dataId);m.usage=p?tg.PIXELS:tg.UPLOAD,m.texShape=h,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(f.dataId),i,d,r);const g=[[d,i]],y=!0,b=this.runWebGLProgram(o,[f],a,g,y),x=this.texData.get(b.dataId);t.texShape=x.texShape,t.isPacked=x.isPacked,t.usage=x.usage,nn().get("ENGINE_COMPILE_ONLY")?this.disposeData(b.dataId):(t.texture=x.texture,t.values=null,this.texData.delete(b.dataId)),this.disposeIntermediateTensorInfo(f),c&&(this.uploadWaitMs+=Ko()-u)}else{const e=this.acquireTexture(l,i,a,s);t.texture=e}}convertAndCacheOnCPU(e,t){const n=this.texData.get(e),{dtype:a}=n;return null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){const n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length);for(let t=0;t<n.length;++t)n[t]=Math.round(e[t]);return n}throw new Error("Unknown dtype ".concat(t))}(t,a)),n.values}acquireTexture(e,t,n,a){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){const e=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: ".concat(e," MB, ")+"most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,a)}computeBytes(e,t){return e[0]*e[1]*zt(t)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,t]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(t));return Promise.all(e)}for(const[,t]of Object.entries(this.binaryCache)){const n=new Promise((e=>{try{this.checkCompletion_(t),e(!0)}catch(n){throw n}}));e.push(n)}return Promise.all(e)}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await new Promise((e=>jf((()=>e())))),this.checkCompletionAsync_(e))}checkCompletion_(e){if(!1===this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)){if(console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),!1===this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS))throw dg(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.");throw new Error("Failed to link vertex and fragment shaders.")}return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:t,customUniformLocations:n,infLoc:a,nanLoc:r,outShapeLocation:o,outShapeStridesLocation:i,outTexShapeLocation:s}=ey(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=t,e.customUniformLocations=n,e.infLoc=a,e.nanLoc=r,e.outShapeLocation=o,e.outShapeStridesLocation=i,e.outTexShapeLocation=s}}createTensorFromGPUData(e,t,n){e.channels=e.channels||"RGBA";const{texture:a,height:r,width:o,channels:i}=e,s=Qi().backend;if(!s.gpgpu.gl.isTexture(a))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const c=s.writeTexture(a,t,n,r,o,i);return Qi().makeTensorFromDataId(c,t,n,s)}}pv.nextDataId=0,Pi()&&ts("webgl",(()=>new pv),2);const hv="\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n";class fv{constructor(e,t,n){this.variableNames=["A","B"],this.outputShape=Rc(t,n),this.enableShapeUniforms=ny(this.outputShape.length),this.userCode="\n      float binaryOperation(float a, float b) {\n        ".concat(e,"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    ")}}const mv="\n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n";class gv{constructor(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Rc(t,n);const r=this.outputShape.length;this.enableShapeUniforms=ny(r);let o="";if(a)if(0===r||1===It(this.outputShape))o="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else{const e=Yg(r);if(o="\n          ".concat(e," coords = getOutputCoords();\n        "),1===r)this.enableShapeUniforms?o+="\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":o+="\n            result.y = (coords + 1) >= ".concat(this.outputShape[0]," ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ");else{const e=Wx("coords",r);this.enableShapeUniforms?o+="\n            bool nextRowOutOfBounds =\n              (".concat(e[r-2]," + 1) >= outShape[").concat(r," - 2];\n            bool nextColOutOfBounds =\n              (").concat(e[r-1]," + 1) >= outShape[").concat(r," - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "):o+="\n            bool nextRowOutOfBounds =\n              (".concat(e[r-2]," + 1) >= ").concat(this.outputShape[r-2],";\n            bool nextColOutOfBounds =\n              (").concat(e[r-1]," + 1) >= ").concat(this.outputShape[r-1],";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          ")}}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ".concat(e,"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ").concat(o,"\n\n        setOutput(result);\n      }\n    ")}}function yv(e){const{inputs:t,backend:n}=e,{x:a}=t;return n.incRef(a.dataId),{dataId:a.dataId,shape:a.shape,dtype:a.dtype}}const bv={kernelName:Sa,backendName:"webgl",kernelFunc:yv};function xv(e){const{inputs:t,backend:n}=e,{real:a,imag:r}=t,o=n.makeTensorInfo(a.shape,"complex64"),i=n.texData.get(o.dataId),s=yv({inputs:{x:a},backend:n}),c=yv({inputs:{x:r},backend:n});return i.complexTensorInfos={real:s,imag:c},o}const vv={kernelName:Dn,backendName:"webgl",kernelFunc:xv},wv="return (a < 0.) ? b * a : a;",kv="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";const Sv={kernelName:Ea,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{alpha:o}=a,i=n.makeTensorInfo([],"float32",Ho(o,"float32")),s=nn().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new gv(kv,r.shape,i.shape):new fv(wv,r.shape,i.shape),c=n.runWebGLProgram(s,[r,i],"float32");return n.disposeIntermediateTensorInfo(i),c}},Cv="return (a < 0.) ? b * a : a;",Iv="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";const Nv={kernelName:lr,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:a,alpha:r}=t,o=nn().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new gv(Iv,a.shape,r.shape):new fv(Cv,a.shape,r.shape);return n.runWebGLProgram(o,[a,r],"float32")}},Tv="if (isnan(x)) return x;";function _v(e){let{opSnippet:t,packedOpSnippet:n,cpuKernelImpl:a,dtype:r}=e;return e=>{let{inputs:o,backend:i}=e;const{x:s}=o,c=i,u=r||s.dtype;if(c.shouldExecuteOnCPU([s])&&null!=a){const e=c.texData.get(s.dataId),t=a(e.values,u);return c.makeTensorInfo(s.shape,u,t)}let l;return l=nn().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=n?new sv(s.shape,n):new qx(s.shape,t),c.runWebGLProgram(l,[s],u)}}function Ev(e){let{opSnippet:t,packedOpSnippet:n,checkOutOfBounds:a=!1,supportsComplex:r=!1,cpuKernelImpl:o,dtype:i}=e;return e=>{let{inputs:s,backend:c}=e;const{a:u,b:l}=s,d=c;if(r&&"complex64"===u.dtype){const e=d.texData.get(u.dataId),n=d.texData.get(l.dataId),[a,r]=[[e.complexTensorInfos.real,n.complexTensorInfos.real],[e.complexTensorInfos.imag,n.complexTensorInfos.imag]].map((e=>{const[n,a]=e,r={dataId:n.dataId,dtype:n.dtype,shape:u.shape},o={dataId:a.dataId,dtype:a.dtype,shape:l.shape},i=new fv(t,u.shape,l.shape);return d.runWebGLProgram(i,[r,o],wi(n.dtype,a.dtype))})),o=xv({inputs:{real:a,imag:r},backend:d});return d.disposeIntermediateTensorInfo(a),d.disposeIntermediateTensorInfo(r),o}const p=i||wi(u.dtype,l.dtype);if(("string"===u.dtype||"string"===l.dtype||d.shouldExecuteOnCPU([u,l]))&&null!=o){const e=d.texData.get(u.dataId).values,t=d.texData.get(l.dataId).values,n="string"===u.dtype?Ym(e):e,a="string"===u.dtype?Ym(t):t,[r,i]=o(u.shape,l.shape,n,a,p),s=d.makeTensorInfo(i,p);return d.texData.get(s.dataId).values=r,s}let h;return h=nn().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=n?new gv(n,u.shape,l.shape,a):new fv(t,u.shape,l.shape),d.runWebGLProgram(h,[u,l],p)}}function Rv(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("linear"===e)return t?nv:Yx;if("relu"===e)return t?rv:$x;if("elu"===e)return t?av:Zx;if("relu6"===e)return t?ov:Jx;if("prelu"===e)return t?Iv:Cv;if("leakyrelu"===e)return t?kv:wv;if("sigmoid"===e)return t?iv:tv;throw new Error("Activation ".concat(e," has not been implemented for the WebGL backend."))}class Av{constructor(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8&&void 0!==arguments[8]&&arguments[8];this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.enableShapeUniforms=ny(this.outputShape.length);const u=a?e[1]:e[2],l=Math.ceil(u/2),d=a?"i * 2, rc.y":"rc.y, i * 2",p=r?"rc.z, i * 2":"i * 2, rc.z",h=a?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],f=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let m="",g="";i&&(m=s?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(i,"\n        }"):c?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(i,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(i,"\n        }"),g="result = activation(result);");const y=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");let b="rc.x",x="rc.x";e[0]<t[0]?b="imod(rc.x, ".concat(e[0],")"):t[0]<e[0]&&(x="imod(rc.x, ".concat(t[0],")")),this.userCode="\n      ".concat(m,"\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ").concat(l,".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        int batchA = ").concat(b,";\n        int batchB = ").concat(x,";\n        for (int i = 0; i < ").concat(l,"; i++) {\n          vec4 a = getMatrixA(batchA, ").concat(d,");\n          vec4 b = getMatrixB(batchB, ").concat(p,");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (").concat(h[0]," * ").concat(f[0],");\n          result += (").concat(h[1]," * ").concat(f[1],");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ").concat(y,"\n\n        ").concat(g,"\n\n        setOutput(result);\n      }\n    ")}}const Ov={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class Fv{constructor(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Rc(t,n),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ".concat(e,"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    ")}}const Dv="return a * b;";function Mv(e){const{inputs:t,backend:n}=e,{a:a,b:r}=t,o=wi(a.dtype,r.dtype);if("complex64"===a.dtype){const e=n.texData.get(a.dataId),t=n.texData.get(r.dataId),o=new Fv(Ov.REAL,a.shape,r.shape),i=new Fv(Ov.IMAG,a.shape,r.shape),s=[{dataId:e.complexTensorInfos.real.dataId,dtype:e.complexTensorInfos.real.dtype,shape:a.shape},{dataId:e.complexTensorInfos.imag.dataId,dtype:e.complexTensorInfos.imag.dtype,shape:a.shape},{dataId:t.complexTensorInfos.real.dataId,dtype:t.complexTensorInfos.real.dtype,shape:r.shape},{dataId:t.complexTensorInfos.imag.dataId,dtype:t.complexTensorInfos.imag.dtype,shape:r.shape}],c=n.runWebGLProgram(o,s,"float32"),u=n.runWebGLProgram(i,s,"float32"),l=xv({inputs:{real:c,imag:u},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(u),l}if(n.shouldExecuteOnCPU([a,r])){const e=n.texData.get(a.dataId),t=n.texData.get(r.dataId),[i,s]=px(a.shape,r.shape,e.values,t.values,o),c=n.makeTensorInfo(s,o);return n.texData.get(c.dataId).values=i,c}let i;return i=nn().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new gv(Dv,a.shape,r.shape):new fv(Dv,a.shape,r.shape),n.runWebGLProgram(i,[a,r],o)}const Pv={kernelName:Ja,backendName:"webgl",kernelFunc:Mv};function Lv(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{shape:o}=a,i=n,s=It(r.shape),c=Ot(o,s),u=It(c);kt(s===u,(()=>"The new shape (".concat(c,") has ").concat(u," elements and the old ")+"shape (".concat(r.shape,") has ").concat(s," elements. The new shape and old ")+"shape must have the same number of elements."));const l=i.texData.get(r.dataId);return!l.isPacked||Cg(r.shape,c)||null!==l.texture&&Cg(l.shape,c)?(i.incRef(r.dataId),{dataId:r.dataId,shape:c,dtype:r.dtype}):function(e,t,n){const a=[vg(e.shape),...wg(e.shape)],r={dtype:e.dtype,shape:a,dataId:e.dataId},o=[vg(t),...wg(t)],i=new Vx(o,a),s=[a],c=n.runWebGLProgram(i,[r],e.dtype,s,!0);return{dataId:c.dataId,shape:t,dtype:c.dtype}}(r,c,i)}const zv={kernelName:xr,backendName:"webgl",kernelFunc:Lv};class Bv{constructor(e,t){this.variableNames=["x"];const{windowSize:n,batchSize:a,inSize:r,outSize:o}=e;this.outputShape=[a,o];const i=4*Math.floor(n/4),s=n%4;let c="sumValue += dot(values, ones);";if(null!=t){const e=1/t;c="sumValue += dot(values * ".concat(_t(e)?e.toPrecision(2):e,", ones);")}let u="";r%n>0&&(u="\n        if (inIdx < 0 || inIdx >= ".concat(r,") {\n          return 0.0;\n        }\n      ")),this.userCode="\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ".concat(u,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(n,";\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(i,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(c,"\n        }\n\n        int inIdx = inOffset + ").concat(i,";\n        if (").concat(1===s,") {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ").concat(c,"\n        } else if (").concat(2===s,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ").concat(c,"\n        } else if (").concat(3===s,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ").concat(c,"\n        }\n        setOutput(sumValue);\n      }\n    ")}}class Wv{constructor(e,t){this.variableNames=["x"];const{windowSize:n,batchSize:a,inSize:r,outSize:o}=e;this.outputShape=[a,o];let i="0.0",s="";"prod"===t?i="1.0":"min"===t?(i="1.0 / 1e-20",s="min"):"max"===t&&(i="-1.0 / 1e-20",s="max");let c="".concat(t,"(").concat(t,"(").concat(t,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===t?c="sumValue":"prod"===t?c="prodValue":"all"===t?c="allValue":"any"===t&&(c="anyValue");const u=4*Math.floor(n/4),l=n%4;let d="\n      if (".concat("sum"===t,") {\n        sumValue += dot(values, ones);\n      } else if (").concat("prod"===t,") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ").concat(s,"(values, minMaxValue);\n        if (").concat("min"===t," || ").concat("max"===t,") {\n          minMaxValue = ").concat(s,"(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    "),p="vec4";"all"===t?(i="1.0",d="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",p="bvec4"):"any"===t&&(i="0.0",d="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",p="bvec4");let h="";r%n>0&&(h="\n        if (inIdx < 0 || inIdx >= ".concat(r,") {\n          return initializationValue;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat(i,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ").concat(h,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(n,";\n\n        vec4 minMaxValue = vec4(").concat(i,");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ").concat(u,"; i += 4) {\n          int inIdx = inOffset + i;\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(d,"\n        }\n\n        int inIdx = inOffset + ").concat(u,";\n        if (").concat(1===l,") {\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(d,"\n        } else if (").concat(2===l,") {\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(d,"\n        } else if (").concat(3===l,") {\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ").concat(d,"\n        }\n        setOutput(").concat(c,");\n      }\n    ")}}function Uv(e,t,n,a){const r=function(e){const t=[];for(;0===t.length||1!==t[t.length-1].outSize;){const n=t.length?t[t.length-1].outSize:e[1],a=em(n);t.push({inSize:n,windowSize:a,outSize:Math.ceil(n/a)})}return t}(e.shape);let o=e;for(let i=0;i<r.length;i++){const{inSize:s,windowSize:c,outSize:u}=r[i];let l,d;l="mean"===n?0===i?new Bv({windowSize:c,inSize:s,batchSize:e.shape[0],outSize:u},s):new Bv({windowSize:c,inSize:s,batchSize:e.shape[0],outSize:u}):new Wv({windowSize:c,inSize:s,batchSize:e.shape[0],outSize:u},n),d=o,o=a.runWebGLProgram(l,[o],t),d.dataId!==e.dataId&&a.disposeIntermediateTensorInfo(d)}return o}class Vv{constructor(e,t){this.variableNames=["A"];const n=new Array(e.length);for(let o=0;o<n.length;o++)n[o]=e[t[o]];this.outputShape=n,this.rank=n.length;const a=Yg(this.rank),r=function(e){const t=e.length;if(t>6)throw Error("Transpose for rank ".concat(t," is not yet supported"));const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],a=new Array(t);for(let r=0;r<e.length;r++)a[e[r]]=n[r];return a.join()}(t);this.userCode="\n    void main() {\n      ".concat(a," resRC = getOutputCoords();\n      setOutput(getA(").concat(r,"));\n    }\n    ")}}class Gv{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const n=new Array(e.length);for(let u=0;u<n.length;u++)n[u]=e[t[u]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank ".concat(this.rank," is not yet supported."));const a=Yg(this.rank),r=Bx("rc",this.rank),o=new Array(this.rank);for(let u=0;u<t.length;u++)o[t[u]]=r[u];const i="vec2(".concat(o.slice(-2).join(),")"),s="++".concat(r[this.rank-1]," < ").concat(n[this.rank-1]),c="getChannel(getA(".concat(o.join(),"), ").concat(i,")");this.userCode="\n    void main() {\n      ".concat(a," rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ").concat(c,";\n      if(").concat(s,") {\n        result[1] = ").concat(c,";\n      }\n      --").concat(r[this.rank-1],";\n      if(++").concat(r[this.rank-2]," < ").concat(n[this.rank-2],") {\n        result[2] = ").concat(c,";\n        if(").concat(s,") {\n          result[3] = ").concat(c,";\n        }\n      }\n      setOutput(result);\n    }\n    ")}}function Hv(e,t,n){const a=nn().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Gv(e.shape,t):new Vv(e.shape,t);return n.runWebGLProgram(a,[e],e.dtype)}function jv(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:o,keepDims:i}=a;return function(e,t,n,a){const r=t,o=e.shape.length,i=Ft(r,e.shape);let s=i;const c=nd(s,o),u=null!=c;let l=e;u&&(l=Hv(e,c,a),s=rd(s.length,o)),td("sum",s,o);const[d,p]=Jl(l.shape,s);let h=d;n&&(h=ed(d,i));const f=It(p),m=Lv({inputs:{x:l},attrs:{shape:[It(e.shape)/f,f]},backend:a}),g=Uv(m,ki(e.dtype),"sum",a),y=Lv({inputs:{x:g},attrs:{shape:h},backend:a});return a.disposeIntermediateTensorInfo(m),a.disposeIntermediateTensorInfo(g),u&&a.disposeIntermediateTensorInfo(l),y}(r,o,i,n)}const Kv={kernelName:Wr,backendName:"webgl",kernelFunc:jv};function qv(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{perm:o}=a,i=n,s=r.shape.length,c=new Array(s);for(let l=0;l<c.length;l++)c[l]=r.shape[o[l]];let u;if(i.shouldExecuteOnCPU([r])){const e=i.texData.get(r.dataId).values,t=Lx(e,r.shape,r.dtype,o,c);u=i.makeTensorInfo(c,r.dtype);i.texData.get(u.dataId).values=t}else u=Hv(r,o,i);return u}const Xv={kernelName:co,backendName:"webgl",kernelFunc:qv},Yv=1e3;function Qv(e){let{a:t,b:n,transposeA:a,transposeB:r,backend:o,bias:i=null,preluActivationWeights:s=null,leakyreluAlpha:c=0,activation:u=null}=e;const l=t.shape.length,d=n.shape.length,p=a?t.shape[l-2]:t.shape[l-1],h=r?n.shape[d-1]:n.shape[d-2],f=a?t.shape[l-1]:t.shape[l-2],m=r?n.shape[d-2]:n.shape[d-1],g=t.shape.slice(0,-2),y=n.shape.slice(0,-2),b=It(g),x=It(y),v=Rc(t.shape.slice(0,-2),n.shape.slice(0,-2)).concat([f,m]);kt(p===h,(()=>"Error in matMul: inner shapes (".concat(p,") and (")+"".concat(h,") of Tensors with shapes ").concat(t.shape," and ")+"".concat(n.shape," and transposeA=").concat(a)+" and transposeB=".concat(r," must match.")));const w=a?[b,p,f]:[b,f,p],k=r?[x,m,h]:[x,h,m],S=Lv({inputs:{x:t},backend:o,attrs:{shape:w}}),C=Lv({inputs:{x:n},backend:o,attrs:{shape:k}}),I=[S,C],N=Math.max(b,x),T=a?S.shape[1]:S.shape[2],_=null!=i,E=null!=s,R="leakyrelu"===u,A=null!=u?Rv(u,!0):null;let O;if((1===f||1===m)&&T>Yv&&!1===(_||E||R||null!=A)){let e=S,t=C;a&&(e=qv({inputs:{x:S},backend:o,attrs:{perm:[0,2,1]}}),I.push(e)),r&&(t=qv({inputs:{x:C},backend:o,attrs:{perm:[0,2,1]}}),I.push(t));const n=1===m;let i=e;1!==m&&(i=Lv({inputs:{x:e},backend:o,attrs:{shape:[N,T,1]}}),I.push(i));const s=1===m?2:1;let c=t;n&&(c=Lv({inputs:{x:t},backend:o,attrs:{shape:[N,1,T]}}),I.push(c));const u=Mv({inputs:{a:i,b:c},backend:o});O=jv({inputs:{x:u},backend:o,attrs:{axis:s,keepDims:!0}}),I.push(u)}else{const e=wi(t.dtype,n.dtype),u=new Av(w,k,[N,f,m],a,r,_,A,E,R),l=[S,C];if(null!=i&&l.push(i),E&&l.push(s),R){const e=o.makeTensorInfo([],"float32",Ho(c,"float32"));l.push(e),I.push(e)}O=o.runWebGLProgram(u,l,e)}const F=Lv({inputs:{x:O},backend:o,attrs:{shape:v}});I.push(O);for(const D of I)o.disposeIntermediateTensorInfo(D);return F}const Zv={kernelName:yo,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{a:r,b:o,bias:i,preluActivationWeights:s}=t,{transposeA:c,transposeB:u,activation:l,leakyreluAlpha:d}=a;return Qv({a:r,b:o,transposeA:c,transposeB:u,backend:n,bias:i,preluActivationWeights:s,leakyreluAlpha:d,activation:l})}},$v="return abs(x);";const Jv={kernelName:cn,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:a}=t;if(n.shouldExecuteOnCPU([a])&&"complex64"!==a.dtype){const e=n.texData.get(a.dataId),t=Sx(e.values);return n.makeTensorInfo(a.shape,a.dtype,t)}let r;return r=nn().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new sv(a.shape,$v):new qx(a.shape,$v),n.runWebGLProgram(r,[a],a.dtype)}},ew=_v({opSnippet:Xx+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"}),tw={kernelName:un,backendName:"webgl",kernelFunc:ew},nw=_v({opSnippet:Xx+"\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"}),aw={kernelName:ln,backendName:"webgl",kernelFunc:nw},rw="return a + b;",ow=Ev({opSnippet:rw,packedOpSnippet:rw,supportsComplex:!0,cpuKernelImpl:Hb}),iw={kernelName:dn,backendName:"webgl",kernelFunc:ow};class sw{constructor(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map(((e,t)=>"T".concat(t)));const n=[];this.variableNames.forEach((e=>{n.push("float v".concat(e," = get").concat(e,"AtOutCoords();"))}));const a=this.variableNames.map((e=>"v".concat(e))).join(" + ");this.userCode="\n      void main() {\n        ".concat(n.join("\n        "),"\n\n        float result = ").concat(a,";\n        setOutput(result);\n      }\n    ")}}class cw{constructor(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map(((e,t)=>"T".concat(t)));const n=[];this.variableNames.forEach((e=>{n.push("vec4 v".concat(e," = get").concat(e,"AtOutCoords();"))}));const a=this.variableNames.map((e=>"v".concat(e))).join(" + ");this.userCode="\n      void main() {\n        ".concat(n.join("\n        "),"\n\n        vec4 result = ").concat(a,";\n        setOutput(result);\n      }\n    ")}}const uw={kernelName:pn,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:a}=t,r=n;if(1===r.length)return yv({inputs:{x:r[0]},backend:a});if(r.length>nn().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const t=Math.floor(r.length/2),n=e({inputs:r.slice(0,t),backend:a}),o=e({inputs:r.slice(t),backend:a});return e({inputs:[n,o],backend:a})}const o=r.map((e=>e.dtype)).reduce(((e,t)=>wi(e,t))),i=r.map((e=>e.shape)),s=nn().getBool("WEBGL_PACK")?new cw(r[0].shape,i):new sw(r[0].shape,i);return a.runWebGLProgram(s,r,o)}};const lw={kernelName:hn,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:o,keepDims:i}=a,s=r.shape.length,c=Ft(o,r.shape);let u=c;const l=nd(u,s);let d=r;null!=l&&(d=qv({inputs:{x:r},backend:n,attrs:{perm:l}}),u=rd(u.length,s)),td("all",u,s);const[p,h]=Jl(d.shape,u),f=Lv({inputs:{x:d},backend:n,attrs:{shape:[-1,It(h)]}}),m=Uv(f,f.dtype,"all",n);let g;if(i){g=Lv({inputs:{x:m},backend:n,attrs:{shape:ed(p,c)}})}else g=Lv({inputs:{x:m},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),null!=l&&n.disposeIntermediateTensorInfo(d),g}};const dw={kernelName:fn,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:o,keepDims:i}=a,s=r.shape.length,c=Ft(o,r.shape);let u=c;const l=nd(u,s);let d=r;null!=l&&(d=qv({inputs:{x:r},backend:n,attrs:{perm:l}}),u=rd(u.length,s)),td("any",u,s);const[p,h]=Jl(d.shape,u),f=Lv({inputs:{x:d},backend:n,attrs:{shape:[-1,It(h)]}}),m=Uv(f,f.dtype,"any",n);let g;if(i){g=Lv({inputs:{x:m},backend:n,attrs:{shape:ed(p,c)}})}else g=Lv({inputs:{x:m},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),null!=l&&n.disposeIntermediateTensorInfo(d),g}};class pw{constructor(e,t,n){this.variableNames=["A"];const{windowSize:a,batchSize:r,outSize:o}=e;n||this.variableNames.push("bestIndicesA"),this.outputShape=[r,o];const i="max"===t?">":"<",s=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ".concat(a,";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          int inIdx = ").concat(s,";\n          float candidate = getA(batch, inIdx);\n          if (candidate ").concat(i," bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    ")}}class hw{constructor(e,t,n,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,kt(e.length>2,(()=>"Packed arg".concat(n.charAt(0).toUpperCase()+n.slice(1)," supports only inputs with rank above 2.")));const r=e[e.length-1],o=Math.ceil(r/t);this.outputShape=e.slice(0,-1),o>1&&this.outputShape.push(o),a||this.variableNames.push("bestIndicesA");const i=this.outputShape,s=i.length,c=Yg(s),u=Wx("coords",s);let l,d;if(1===o){d=s+1;const e=Yg(d);l="\n        ".concat(e," sourceLocR = ").concat(e,"(").concat(u.join(),", 0);\n        ++").concat(u[s-1],";\n        ").concat(e," sourceLocG = ").concat(e,"(").concat(u.join(),", 0);\n        ++").concat(u[s-2],";\n        ").concat(e," sourceLocA = ").concat(e,"(").concat(u.join(),", 0);\n        --").concat(u[s-1],";\n        ").concat(e," sourceLocB = ").concat(e,"(").concat(u.join(),", 0);\n        --").concat(u[s-2],";")}else d=s,l="\n        ".concat(c," sourceLocR = coords;\n        ++").concat(u[s-1],";\n        ").concat(c," sourceLocG = coords;\n        ++").concat(u[s-2],";\n        ").concat(c," sourceLocA = coords;\n        --").concat(u[s-1],";\n        ").concat(c," sourceLocB = coords;\n        --").concat(u[s-2],";");const p=["x","y","z","w","u","v"].slice(0,d),h="."+p[d-1],f=p.map((e=>"int "+e)),m=Wx("sourceLocR",d-1).concat("inIdx.r"),g=Wx("sourceLocG",d-1).concat("inIdx.g"),y=Wx("sourceLocB",d-1).concat("inIdx.b"),b=Wx("sourceLocA",d-1).concat("inIdx.a"),x="max"===n?"greaterThan":"lessThan",v=a?"":"\n          inIdx = round(vec4(getBestIndicesAChannel(".concat(m.join(),"),\n                             getBestIndicesAChannel(").concat(g.join(),"),\n                             getBestIndicesAChannel(").concat(y.join(),"),\n                             getBestIndicesAChannel(").concat(b.join(),")));"),w="vec4(\n            getAChannel(".concat(m.join(),"),\n            hasNextCol ? getAChannel(").concat(g.join(),") : 0.,\n            hasNextRow ? getAChannel(").concat(y.join(),") : 0.,\n            hasNextRow && hasNextCol ? getAChannel(").concat(b.join(),") : 0.)"),k=a?"":"\n      float getBestIndicesAChannel(".concat(f.join(),") {\n        return getChannel(getBestIndicesA(").concat(p.join(),"),\n                                          vec2(").concat(p.slice(-2).join(),"));\n      }");this.userCode="\n      float getAChannel(".concat(f.join(),") {\n        return getChannel(getA(").concat(p.join(),"),\n                               vec2(").concat(p.slice(-2).join(),"));\n      }\n      ").concat(k,"\n      void main() {\n        ").concat(c," coords = getOutputCoords();\n        bool hasNextCol = ").concat(u[s-1]," < ").concat(i[s-1]-1,";\n        bool hasNextRow = ").concat(u[s-2]," < ").concat(i[s-2]-1,";\n        ").concat(l,"\n        ivec4 srcIdx = ivec4(sourceLocR").concat(h,", sourceLocG").concat(h,",\n          sourceLocB").concat(h,", sourceLocA").concat(h,") * ").concat(t,";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ").concat(w,";\n\n        for (int i = 0; i < ").concat(t,"; i++) {\n          inIdx = srcIdx;\n          ").concat(v,"\n          vec4 candidate = ").concat(w,";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(").concat(x,"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    ")}}function fw(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=t.shape[0],o=t.shape[1];null!=a&&(r=a.shape[0],o=a.shape[1]);const i=em(o),s={windowSize:i,inSize:o,batchSize:r,outSize:Math.ceil(o/i)},c=new pw(s,n,null==a),u=[t];null!=a&&u.push(a);const l=e.runWebGLProgram(c,u,"int32");if(1===l.shape[1])return l;const d=fw(e,t,n,l);return e.disposeIntermediateTensorInfo(l),d}function mw(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const r=null!=a?a.shape:t.shape,o=em(r[r.length-1]),i=new hw(r,o,n,null==a),s=null==a?[t]:[t,a],c=e.runWebGLProgram(i,s,"int32");if(c.shape.length===t.shape.length){const a=mw(e,t,n,c);return e.disposeIntermediateTensorInfo(c),a}return c}function gw(e,t,n,a){const r=[n];if(td("arg"+a.charAt(0).toUpperCase()+a.slice(1),r,t.shape.length),!nn().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){const n=[],o=e.texData.get(t.dataId);let i=t;null!==o&&o.isPacked&&(i=e.unpackTensor(t),n.push(i));const[s,c]=Jl(i.shape,r),u=It(c),l=Lv({inputs:{x:i},backend:e,attrs:{shape:[-1,u]}});n.push(l);const d=fw(e,l,a);n.push(d);const p=Lv({inputs:{x:d},backend:e,attrs:{shape:s}});return n.forEach((t=>e.disposeIntermediateTensorInfo(t))),p}return mw(e,t,a)}const yw={kernelName:mn,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:o}=a;let i=Ft(o,r.shape);const s=nd(i,r.shape.length);let c=r;const u=[];null!=s&&(c=qv({inputs:{x:r},backend:n,attrs:{perm:s}}),u.push(c),i=rd(i.length,c.shape.length)),td("argMax",[i[0]],c.shape.length);const l=gw(n,c,i[0],"max");return u.forEach((e=>n.disposeIntermediateTensorInfo(e))),l}};const bw={kernelName:gn,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:o}=a;let i=Ft(o,r.shape);const s=nd(i,r.shape.length);let c=r;const u=[];null!=s&&(c=qv({inputs:{x:r},backend:n,attrs:{perm:s}}),u.push(c),i=rd(i.length,c.shape.length)),td("argMin",[i[0]],c.shape.length);const l=gw(n,c,i[0],"min");return u.forEach((e=>n.disposeIntermediateTensorInfo(e))),l}},xw=_v({opSnippet:Xx+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"}),vw={kernelName:yn,backendName:"webgl",kernelFunc:xw},ww=_v({opSnippet:Xx+"return log(x + sqrt(x * x + 1.0));"}),kw={kernelName:bn,backendName:"webgl",kernelFunc:ww},Sw=_v({opSnippet:Xx+"\n  return atan(x);\n"}),Cw={kernelName:xn,backendName:"webgl",kernelFunc:Sw},Iw=Ev({opSnippet:hv+"\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+mv+"\n  return result;\n"}),Nw={kernelName:wn,backendName:"webgl",kernelFunc:Iw},Tw=_v({opSnippet:Xx+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"}),_w={kernelName:vn,backendName:"webgl",kernelFunc:Tw};class Ew{constructor(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,i=e.strideHeight,s=e.strideWidth,c=e.dilationHeight,u=e.dilationWidth,l=e.effectiveFilterHeight,d=e.effectiveFilterWidth,p=e.padInfo.top,h=e.padInfo.left;this.outputShape=e.outShape;const f="avg"===t,m="((batch  * ".concat(e.inHeight," + xR) * ").concat(e.inWidth," + xC) * ").concat(e.inChannels," + d"),g="(xR * ".concat(e.inWidth," + xC) * ").concat(e.inChannels," + d");let y="0.0";if(f||(y="-1.0 / 1e-20"),n){const t=">=";return void(this.userCode="\n        const ivec2 strides = ivec2(".concat(i,", ").concat(s,");\n        const ivec2 pads = ivec2(").concat(p,", ").concat(h,");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ").concat(l,";\n              wR += ").concat(c,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(d,";\n                wC += ").concat(u,") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ").concat(t," currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ").concat(a?r?m:g:"wR * ".concat(d," + wC"),";\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      "))}let b="".concat(t,"(").concat(t,"(").concat(t,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(b="avgValue / max(count, 1.0)");const x=4*Math.floor(o/4),v=o%4,w="\n      if (".concat(f,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat("max","(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec2 strides = ivec2(".concat(i,", ").concat(s,");\n      const ivec2 pads = ivec2(").concat(p,", ").concat(h,");\n      const float initializationValue = ").concat(y,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ").concat(e.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(y,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ").concat(l,";\n            wR += ").concat(c,") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ").concat(e.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(x,"; wC += 4) {\n            int xC = xCCorner + wC * ").concat(u,";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(u,", d),\n              getValue(batch, xR, xC + 2 * ").concat(u,", d),\n              getValue(batch, xR, xC + 3 * ").concat(u,", d)\n            );\n\n            ").concat(w,"\n          }\n\n          int xC = xCCorner + ").concat(x,";\n          if (").concat(1===v,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(w,"\n          } else if (").concat(2===v,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(u,", d),\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(w,"\n          } else if (").concat(3===v,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(u,", d),\n              getValue(batch, xR, xC + 2 * ").concat(u,", d),\n              initializationValue\n            );\n\n            ").concat(w,"\n          }\n        }\n        setOutput(").concat(b,");\n      }\n    ")}}class Rw{constructor(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,i=e.strideDepth,s=e.strideHeight,c=e.strideWidth,u=e.dilationDepth,l=e.dilationHeight,d=e.dilationWidth,p=e.effectiveFilterDepth,h=e.effectiveFilterHeight,f=e.effectiveFilterWidth,m=e.padInfo.front,g=e.padInfo.top,y=e.padInfo.left;this.outputShape=e.outShape;const b="avg"===t;let x="0.0";if(b||(x="-1.0 / 1e-20"),n){const t=">=";return void(this.userCode="\n        const ivec3 strides =\n            ivec3(".concat(i,", ").concat(s,", ").concat(c,");\n        const ivec3 pads = ivec3(").concat(m,", ").concat(g,", ").concat(y,");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ").concat(p,";\n              wD += ").concat(u,") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ").concat(e.inDepth,") {\n              continue;\n            }\n\n            for (int wR = 0; wR < ").concat(h,";\n                wR += ").concat(l,") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ").concat(e.inHeight,") {\n                continue;\n              }\n\n              for (int wC = 0; wC < ").concat(f,";\n                  wC += ").concat(d,") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ").concat(t," currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ").concat(a?r?"(((batch * ".concat(e.inDepth," + xD) * ").concat(e.inHeight," + xR) * ").concat(e.inWidth," + xC) * ").concat(e.inChannels," + ch"):"((xD * ".concat(e.inHeight," + xR) * ").concat(e.inWidth," + xC) * ").concat(e.inChannels," + ch"):"wD * ".concat(h," * ").concat(f," +\n                      wR * ").concat(f," + wC"),";\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      "))}let v="".concat(t,"(").concat(t,"(").concat(t,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(v="avgValue / max(count, 1.0)");const w=4*Math.floor(o/4),k=o%4,S="\n      if (".concat(b,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat("max","(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec3 strides =\n        ivec3(".concat(i,", ").concat(s,", ").concat(c,");\n      const ivec3 pads = ivec3(").concat(m,", ").concat(g,", ").concat(y,");\n      const float initializationValue = ").concat(x,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ").concat(e.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(x,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ").concat(p,";\n            wD += ").concat(u,") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ").concat(e.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(h,";\n            wR += ").concat(l,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(w,"; wC += 4) {\n              int xC = xCCorner + wC * ").concat(d,";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(d,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(d,", ch),\n                getValue(batch, xD, xR, xC + 3 * ").concat(d,", ch)\n              );\n\n              ").concat(S,"\n            }\n\n            int xC = xCCorner + ").concat(w,";\n            if (").concat(1===k,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(S,"\n            } else if (").concat(2===k,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(d,", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(S,"\n            } else if (").concat(3===k,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(d,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(d,", ch),\n                initializationValue\n              );\n\n              ").concat(S,"\n            }\n          }\n        }\n        setOutput(").concat(v,");\n      }\n    ")}}const Aw={kernelName:kn,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t;Ag(r,"avgPool");const{filterSize:o,strides:i,pad:s,dimRoundingMode:c}=a;kt(Ju(i,1),(()=>"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(1,"'")));const u=Gu(r.shape,o,i,1,s,c);if(1===u.filterWidth&&1===u.filterHeight&&Tt(u.inShape,u.outShape))return yv({inputs:{x:r},backend:n});const l=new Ew(u,"avg",!1);return n.runWebGLProgram(l,[r],"float32")}};const Ow={kernelName:Cn,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{filterSize:o,strides:i,pad:s,dimRoundingMode:c,dataFormat:u}=a,l=Hu(r.shape,o,i,[1,1,1],s,c,u),d=new Rw(l,"avg",!1);return n.runWebGLProgram(d,[r],"float32")}};class Fw{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,a=e.strideHeight,r=e.strideWidth,o=e.dilationHeight,i=e.dilationWidth,s=e.effectiveFilterHeight,c=e.effectiveFilterWidth,u=s-1-e.padInfo.top,l=c-1-e.padInfo.left,d=1/(t*n);this.userCode="\n      const ivec2 pads = ivec2(".concat(u,", ").concat(l,");\n      const float avgMultiplier = float(").concat(d,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(s,";\n            wR += ").concat(o,") {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(c,";\n            wC+= ").concat(i,") {\n            float dyC = float(dyCCorner + wC) / ").concat(r,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class Dw{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.filterDepth,n=e.filterHeight,a=e.filterWidth,r=e.strideDepth,o=e.strideHeight,i=e.strideWidth,s=e.dilationDepth,c=e.dilationHeight,u=e.dilationWidth,l=e.effectiveFilterDepth,d=e.effectiveFilterHeight,p=e.effectiveFilterWidth,h=l-1-e.padInfo.front,f=d-1-e.padInfo.top,m=p-1-e.padInfo.left,g=1/(t*n*a);this.userCode="\n      const ivec3 pads = ivec3(".concat(h,", ").concat(f,", ").concat(m,");\n      const float avgMultiplier = float(").concat(g,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(l,";\n            wD += ").concat(s,") {\n          float dyD = float(dyDCorner + wD) / ").concat(r,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(e.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(d,";\n              wR += ").concat(c,") {\n            float dyR = float(dyRCorner + wR) / ").concat(o,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(p,";\n                wC += ").concat(u,") {\n              float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}const Mw={kernelName:In,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:r,input:o}=t,i=o,{filterSize:s,strides:c,pad:u,dimRoundingMode:l}=a,d=Hu(i.shape,s,c,[1,1,1],u,l),p=new Dw(d);return n.runWebGLProgram(p,[r],i.dtype)}};const Pw={kernelName:Sn,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:r,input:o}=t,i=o;Ag([r,o],"avgPoolGrad");const{filterSize:s,strides:c,pad:u}=a,l=Gu(i.shape,s,c,1,u),d=new Fw(l);return n.runWebGLProgram(d,[r],i.dtype)}};const Lw={kernelName:Nn,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{a:r,b:o}=t,{transposeA:i,transposeB:s}=a;return Qv({a:r,b:o,transposeA:i,transposeB:s,backend:n})}};class zw{constructor(e,t,n,a,r,o){this.outputShape=[],this.variableNames=["x","mean","variance"],Rc(e,t),Rc(e,n);let i="0.0";null!=a&&(Rc(e,a),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");let s="1.0";null!=r&&(Rc(e,r),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ".concat(i,";\n        float scale = ").concat(s,";\n        float inv = scale * inversesqrt(variance + float(").concat(o,"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    ")}}class Bw{constructor(e,t,n,a,r,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Rc(e,t),Rc(e,n);let i="vec4(0.0)";null!=a&&(Rc(e,a),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");let s="vec4(1.0)";null!=r&&(Rc(e,r),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        vec4 offset = ".concat(i,";\n        vec4 scale = ").concat(s,";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(").concat(o,"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    ")}}const Ww={kernelName:ba,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n,attrs:a}=e;const{x:r,mean:o,variance:i,offset:s,scale:c}=t;kt(o.shape.length===i.shape.length,(()=>"Batch normalization gradient requires mean and variance to have equal ranks.")),kt(null==s||o.shape.length===s.shape.length,(()=>"Batch normalization gradient requires mean and offset to have equal ranks.")),kt(null==c||o.shape.length===c.shape.length,(()=>"Batch normalization gradient requires mean and scale to have equal ranks."));let{varianceEpsilon:u}=a;null==u&&(u=.001);const l=[r,o,i];let d=null;null!=s&&(d=s.shape,l.push(s));let p=null;null!=c&&(p=c.shape,l.push(c));const h=nn().getBool("WEBGL_PACK_NORMALIZATION")?new Bw(r.shape,o.shape,i.shape,d,p,u):new zw(r.shape,o.shape,i.shape,d,p,u);return n.runWebGLProgram(h,l,l[0].dtype)}};class Uw{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const t=Yg(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=function(e){if(1===e)return"sourceLoc";if(e<=6)return Vw.slice(0,e).map((e=>"sourceLoc."+e)).join(",");throw Error("Slicing for rank ".concat(e," is not yet supported"))}(this.rank);let a;const r=e.map(((e,t)=>"sourceLoc.".concat(Vw[t]," = start[").concat(t,"] + coords.").concat(Vw[t],";")));a="\n        ".concat(t," sourceLoc;\n        ").concat(t," coords = getOutputCoords();\n        ").concat(r.join("\n"),"\n      "),this.userCode="\n      void main() {\n        ".concat(a,"\n        setOutput(getSource(").concat(n,"));\n      }\n    ")}}const Vw=["x","y","z","w","u","v"];class Gw{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const t=Yg(this.rank),n=Wx("coords",this.rank),a=Wx("sourceLoc",this.rank),r=1===this.rank?"sourceLoc":"vec2(".concat(a.slice(-2).join(),")"),o="getChannel(getSource(".concat(a.join(),"), ").concat(r,")"),i="\n      result.x = ".concat(o,";\n      if (++").concat(n[this.rank-1]," < ").concat(e[this.rank-1],") {\n        ++").concat(a[this.rank-1],";\n        result.y = ").concat(o,";\n        --").concat(a[this.rank-1],";\n      }\n    "),s=1===this.rank?"":"\n      --".concat(n[this.rank-1],";\n      if (++").concat(n[this.rank-2]," < ").concat(e[this.rank-2],") {\n        ++").concat(a[this.rank-2],";\n        result.z = ").concat(o,";\n        if (++").concat(n[this.rank-1]," < ").concat(e[this.rank-1],") {\n          ++").concat(a[this.rank-1],";\n          result.w = ").concat(o,";\n        }\n      }\n    "),c=this.rank<=4?"sourceLoc = coords +\n            ".concat(t,"(").concat(e.map(((e,t)=>"start[".concat(t,"]"))).join(),");"):e.map(((e,t)=>"".concat(a[t]," = ").concat(n[t]," + start[").concat(t,"];"))).join("\n");this.userCode="\n      void main() {\n        ".concat(t," coords = getOutputCoords();\n        ").concat(t," sourceLoc;\n        ").concat(c,"\n        vec4 result = vec4(0.);\n        ").concat(i,"\n        ").concat(s,"\n        setOutput(result);\n      }\n    ")}}function Hw(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{begin:o,size:i}=a,[s,c]=Tu(r,o,i);if(hu(r,s,c),0===It(c))return n.makeTensorInfo(c,r.dtype,[]);if(n.shouldExecuteOnCPU([r])||"string"===r.dtype){const e=n.texData.get(r.dataId),t=Cx(e.values,s,c,r.shape,r.dtype);return n.makeTensorInfo(c,r.dtype,t)}const{isPacked:u}=n.texData.get(r.dataId),l=Iu(r.shape,s,c);if(u||!l){const e=nn().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Gw(c):new Uw(c),t=[s];return n.runWebGLProgram(e,[r],r.dtype,t)}return n.uploadToGPU(r.dataId),function(e,t,n,a){const r=a.texData.get(e.dataId),o=a.makeTensorInfo(n,e.dtype),i=a.texData.get(o.dataId);Object.assign(i,r),i.refCount=1,i.shape=n,i.dtype=e.dtype;let s=Nu(t,Gt(e.shape));r.slice&&(s+=r.slice.flatOffset),i.slice={flatOffset:s,origDataId:r.slice&&r.slice.origDataId||e.dataId};const c=a.dataRefCount.get(i.slice.origDataId)||1;return a.dataRefCount.set(i.slice.origDataId,c+1),o}(r,s,c,n)}const jw={kernelName:Fr,backendName:"webgl",kernelFunc:Hw},Kw={kernelName:Tn,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{blockShape:o,crops:i}=a;kt(r.shape.length<=4,(()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"));const s=o.reduce(((e,t)=>e*t)),c=nm(r.shape,o,s),u=am(c.length,o.length),l=rm(r.shape,o,s),d=om(i,o.length),p=im(l,i,o.length),h=[],f=Lv({inputs:{x:r},backend:n,attrs:{shape:c}}),m=qv({inputs:{x:f},backend:n,attrs:{perm:u}}),g=Lv({inputs:{x:m},backend:n,attrs:{shape:l}}),y=Hw({inputs:{x:g},backend:n,attrs:{begin:d,size:p}});return h.push(f),h.push(m),h.push(g),h.forEach((e=>n.disposeIntermediateTensorInfo(e))),y}};const qw={kernelName:_n,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,weights:o}=t,{size:i}=a,s=n.readSync(r.dataId),c=n.readSync(o.dataId),u=jb(s,c,o.dtype,o.shape,i);return n.makeTensorInfo([i],o.dtype,u)}};const Xw={kernelName:En,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{a:a,b:r}=t,o=nn().getBool("WEBGL_PACK_BINARY_OPERATIONS"),i=nn().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([a,r])||1===i){const e=n.texData.get(a.dataId).values,t=n.texData.get(r.dataId).values,[o,i]=qb(a.shape,r.shape,e,t,a.dtype),s=n.makeTensorInfo(i,a.dtype);return n.texData.get(s.dataId).values=o,s}let s;return s=o?new gv("\n  int r = int(a.r) & int(b.r);\n  int g = int(a.g) & int(b.g);\n  int rb = int(a.b) & int(b.b);\n  int ra = int(a.a) & int(b.a);\n  return vec4(r, g, rb, ra);\n",a.shape,r.shape,!1):new fv("\n  return float(int(a.r) & int(b.r));\n",a.shape,r.shape),n.runWebGLProgram(s,[a,r],a.dtype)}};const Yw={kernelName:Rn,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{s0:a,s1:r}=t,o=n.readSync(a.dataId),i=n.readSync(r.dataId),s=Rc(Array.from(o),Array.from(i));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},Qw=Ev({opSnippet:"return float(a != b);",cpuKernelImpl:fx,dtype:"bool"}),Zw={kernelName:tr,backendName:"webgl",kernelFunc:Qw};function $w(e){const{inputs:t,backend:n}=e,{input:a}=t;return yv({inputs:{x:n.texData.get(a.dataId).complexTensorInfos.real},backend:n})}const Jw={kernelName:gr,backendName:"webgl",kernelFunc:$w},ek="return float(int(x));";const tk={kernelName:An,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:a,attrs:r}=t,{x:o}=n,{dtype:i}=r;if("complex64"===i){if("complex64"===o.dtype)return yv({inputs:{x:o},backend:a});const t=qd(o.shape),n=e({inputs:{x:o},backend:a,attrs:{dtype:"float32"}}),r=xv({inputs:{real:n,imag:t},backend:a});return t.dispose(),a.disposeIntermediateTensorInfo(n),r}if("complex64"===o.dtype){const t=$w({inputs:{input:o},backend:a}),n=e({inputs:{x:t},backend:a,attrs:{dtype:i}});return a.disposeIntermediateTensorInfo(t),n}if(!Lt(o.dtype,i)){const e=yv({inputs:{x:o},backend:a});return{dataId:e.dataId,shape:e.shape,dtype:i}}if(a.shouldExecuteOnCPU([o])){const e=a.texData.get(o.dataId).values,[t,n,r]=Xb(e,o.shape,o.dtype,i);return a.makeTensorInfo(t,n,r)}if("int32"===i)return function(e,t){const n=new qx(e.shape,ek),a=t.runWebGLProgram(n,[e],"int32");return{dataId:a.dataId,shape:a.shape,dtype:a.dtype}}(o,a);if("bool"===i){const e=a.makeTensorInfo([],"bool",Mt("bool",1)),t=Qw({inputs:{a:o,b:e},backend:a});return a.disposeIntermediateTensorInfo(e),t}throw new Error("Error in Cast: failed to cast ".concat(o.dtype," to ").concat(i))}},nk="return ceil(x);",ak=_v({opSnippet:nk,packedOpSnippet:nk,cpuKernelImpl:Yb}),rk={kernelName:On,backendName:"webgl",kernelFunc:ak};class ok{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}}class ik{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}}const sk={kernelName:Fn,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{clipValueMin:o,clipValueMax:i}=a;let s;s=nn().getBool("WEBGL_PACK_CLIP")?new ik(r.shape):new ok(r.shape);const c=[[o],[i]];return n.runWebGLProgram(s,[r],r.dtype,c)}};class ck{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}}function uk(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}const lk={kernelName:Mn,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:a}=t,r=n.texData.get(a.dataId),o=new ck(a.shape),i=[uk(a,r.complexTensorInfos.real),uk(a,r.complexTensorInfos.imag)];return n.runWebGLProgram(o,i,i[0].dtype)}};class dk{constructor(e){this.outputShape=[],this.outputShape=qf(e,1),this.variableNames=e.map(((e,t)=>"T".concat(t)));const t=new Array(e.length-1);t[0]=e[0][1];for(let o=1;o<t.length;o++)t[o]=t[o-1]+e[o][1];const n=["if (yC < ".concat(t[0],") setOutput(getT0(yR, yC));")];for(let o=1;o<t.length;o++){const e=t[o-1];n.push("else if (yC < ".concat(t[o],") ")+"setOutput(getT".concat(o,"(yR, yC-").concat(e,"));"))}const a=t.length,r=t[t.length-1];n.push("else setOutput(getT".concat(a,"(yR, yC-").concat(r,"));")),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ".concat(n.join("\n        "),"\n      }\n    ")}}class pk{constructor(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=qf(e,t);const n=this.outputShape,a=n.length,r=Yg(a),o=Wx("coords",a),i=["x","y","z","w","u","v"].slice(0,a);this.variableNames=e.map(((e,t)=>"T".concat(t)));const s=new Array(e.length-1);s[0]=e[0][t];for(let f=1;f<s.length;f++)s[f]=s[f-1]+e[f][t];const c=i[t],u=i.slice(-2),l=i.join();let d="if (".concat(c," < ").concat(s[0],") {\n        return getChannel(\n            getT0(").concat(l,"), vec2(").concat(u.join(),"));\n        }");for(let f=1;f<s.length;f++){const e=s[f-1];d+="\n        if (".concat(c," < ").concat(s[f],"  && ").concat(c," >= ").concat(s[f-1],") {\n          return getChannel(\n            getT").concat(f,"(").concat(hk(i,c,e),"),\n            vec2(").concat(hk(u,c,e),"));\n        }")}const p=s.length,h=s[s.length-1];d+="\n        return getChannel(\n          getT".concat(p,"(").concat(hk(i,c,h),"),\n          vec2(").concat(hk(u,c,h),"));"),this.userCode="\n      float getValue(".concat(i.map((e=>"int "+e)),") {\n        ").concat(d,"\n      }\n\n      void main() {\n        ").concat(r," coords = getOutputCoords();\n        vec4 result = vec4(getValue(").concat(o,"), 0., 0., 0.);\n\n        ").concat(o[a-1]," = ").concat(o[a-1]," + 1;\n        if (").concat(o[a-1]," < ").concat(n[a-1],") {\n          result.g = getValue(").concat(o,");\n        }\n\n        ").concat(o[a-2]," = ").concat(o[a-2]," + 1;\n        if (").concat(o[a-2]," < ").concat(n[a-2],") {\n          result.a = getValue(").concat(o,");\n        }\n\n        ").concat(o[a-1]," = ").concat(o[a-1]," - 1;\n        if (").concat(o[a-2]," < ").concat(n[a-2]," &&\n            ").concat(o[a-1]," < ").concat(n[a-1],") {\n          result.b = getValue(").concat(o,");\n        }\n        setOutput(result);\n      }\n    ")}}function hk(e,t,n){const a=e.indexOf(t);return e.map(((e,t)=>t===a?"".concat(e," - ").concat(n):e)).join()}function fk(e){const{inputs:t,backend:n}=e,{input:a}=t;return yv({inputs:{x:n.texData.get(a.dataId).complexTensorInfos.imag},backend:n})}const mk={kernelName:Ia,backendName:"webgl",kernelFunc:fk};function gk(e,t,n){const a=e[0].dtype;if("complex64"===a){const a=e.map((e=>$w({inputs:{input:e},backend:n}))),r=e.map((e=>fk({inputs:{input:e},backend:n}))),o=gk(a,t,n),i=gk(r,t,n),s=xv({inputs:{real:o,imag:i},backend:n});return a.forEach((e=>n.disposeIntermediateTensorInfo(e))),r.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(i),s}let r=n.shouldExecuteOnCPU(e);if("string"===a&&(r=!0),r){const r=e.map((e=>{const a=It(e.shape.slice(t));return Lv({inputs:{x:e},backend:n,attrs:{shape:[-1,a]}})})),o=r.map((e=>({vals:n.readSync(e.dataId),shape:e.shape}))),i=qf(r.map((e=>e.shape)),1),s=1===r[0].shape[0],c=Qb(o,i,a,s),u=qf(e.map((e=>e.shape)),t),l=n.makeTensorInfo(u,a,c);return r.forEach((e=>n.disposeIntermediateTensorInfo(e))),l}const o=e.filter((e=>It(e.shape)>0)),i=nn().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&o[0].shape.length>1;if(1===o.length){const t=i?new qx(e[0].shape,ev):new sv(e[0].shape,ev);return n.runWebGLProgram(t,e,a)}const s=nn().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(o.length>s){const e=[];for(let r=0;r<o.length;r+=s){const a=o.slice(r,r+s);e.push(gk(a,t,n))}const a=gk(e,t,n);for(const t of e)n.disposeIntermediateTensorInfo(t);return a}if(i){const e=new pk(o.map((e=>e.shape)),t);return n.runWebGLProgram(e,o,a)}const{tensors2D:c,outShape:u}=function(e,t,n){const a=qf(e.map((e=>e.shape)),t),r=e.map((e=>Lv({inputs:{x:e},attrs:{shape:[-1,It(e.shape.slice(t))]},backend:n})));return{tensors2D:r,outShape:a}}(o,t,n),l=new dk(c.map((e=>e.shape))),d=n.runWebGLProgram(l,c,a);c.forEach((e=>n.disposeIntermediateTensorInfo(e)));const p=Lv({inputs:{x:d},attrs:{shape:u},backend:n});return n.disposeIntermediateTensorInfo(d),p}function yk(e){const{inputs:t,backend:n,attrs:a}=e,{axis:r}=a,o=Ft(r,t[0].shape)[0];Kf(t.map((e=>e.shape)),o);const i=qf(t.map((e=>e.shape)),o);if(0===It(i))return n.makeTensorInfo(i,t[0].dtype,[]);const s=t.filter((e=>It(e.shape)>0));return 1===s.length?yv({inputs:{x:s[0]},backend:n}):gk(s,o,n)}const bk={kernelName:Pn,backendName:"webgl",kernelFunc:yk};class xk{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.outputShape=e.outShape;const o=e.padInfo.top,i=e.padInfo.left,s=e.strideHeight,c=e.strideWidth,u=e.dilationHeight,l=e.dilationWidth,d=e.filterHeight,p=e.filterWidth,h=4*Math.floor(e.inChannels/4),f=e.inChannels%4,m="channelsLast"===e.dataFormat,g=m?1:2,y=m?2:3,b=m?3:1;let x="",v="";n&&(x=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(n,"\n        }"):r?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(n,"\n        }"):"\n          float activation(float x) {\n            ".concat(n,"\n          }\n        "),v="result = activation(result);");const w=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),r&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(x,"\n\n      const ivec2 strides = ivec2(").concat(s,", ").concat(c,");\n      const ivec2 pads = ivec2(").concat(o,", ").concat(i,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[").concat(b,"];\n\n        ivec2 xRCCorner =\n            ivec2(coords[").concat(g,"], coords[").concat(y,"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(d,"; wR++) {\n          int xR = xRCorner + wR * ").concat(u,";\n\n          if (xR < 0 || xR >= ").concat(e.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(p,"; wC++) {\n            int xC = xCCorner + wC * ").concat(l,";\n\n            if (xC < 0 || xC >= ").concat(e.inWidth,") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ").concat(h,"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (").concat(m,") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (").concat(1===f,") {\n\n              if (").concat(m,") {\n                dotProd +=\n                    getX(batch, xR, xC, ").concat(h,") *\n                    getW(wR, wC, ").concat(h,", d2);\n              } else {\n                dotProd +=\n                    getX(batch, ").concat(h,", xR, xC) *\n                    getW(wR, wC, ").concat(h,", d2);\n              }\n\n            } else if (").concat(2===f,") {\n              vec2 wValues = vec2(\n                getW(wR, wC, ").concat(h,", d2),\n                getW(wR, wC, ").concat(h," + 1, d2)\n              );\n\n              if (").concat(m,") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ").concat(h,"),\n                  getX(batch, xR, xC, ").concat(h," + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ").concat(h,", xR, xC),\n                  getX(batch, ").concat(h," + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (").concat(3===f,") {\n              vec3 wValues = vec3(\n                getW(wR, wC, ").concat(h,", d2),\n                getW(wR, wC, ").concat(h," + 1, d2),\n                getW(wR, wC, ").concat(h," + 2, d2)\n              );\n\n              if (").concat(m,") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ").concat(h,"),\n                  getX(batch, xR, xC, ").concat(h," + 1),\n                  getX(batch, xR, xC, ").concat(h," + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ").concat(h,", xR, xC),\n                  getX(batch, ").concat(h," + 1, xR, xC),\n                  getX(batch, ").concat(h," + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ").concat(w,"\n        ").concat(v,"\n        setOutput(result);\n      }\n    ")}}class vk{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const t=e.padInfo.front,n=e.padInfo.top,a=e.padInfo.left,r=e.strideDepth,o=e.strideHeight,i=e.strideWidth,s=e.dilationDepth,c=e.dilationHeight,u=e.dilationWidth,l=e.filterDepth,d=e.filterHeight,p=e.filterWidth,h=4*Math.floor(e.inChannels/4),f=e.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3(".concat(r,", ").concat(o,", ").concat(i,");\n      const ivec3 pads = ivec3(").concat(t,", ").concat(n,", ").concat(a,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(l,"; wF++) {\n          int xF = xFCorner + wF * ").concat(s,";\n\n          if (xF < 0 || xF >= ").concat(e.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(d,"; wR++) {\n            int xR = xRCorner + wR * ").concat(c,";\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(p,"; wC++) {\n              int xC = xCCorner + wC * ").concat(u,";\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ").concat(h,"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (").concat(1===f,") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ").concat(h,") *\n                  getW(wF, wR, wC, ").concat(h,", d2);\n              } else if (").concat(2===f,") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ").concat(h,"),\n                  getX(batch, xF, xR, xC, ").concat(h," + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ").concat(h,", d2),\n                  getW(wF, wR, wC, ").concat(h," + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (").concat(3===f,") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ").concat(h,"),\n                  getX(batch, xF, xR, xC, ").concat(h," + 1),\n                  getX(batch, xF, xR, xC, ").concat(h," + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ").concat(h,", d2),\n                  getW(wF, wR, wC, ").concat(h," + 1, d2),\n                  getW(wF, wR, wC, ").concat(h," + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class wk{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=ny(this.outputShape.length);const o=e.padInfo.left,i=e.strideWidth,s=e.dilationWidth,c=e.filterHeight,u=e.filterWidth,l=u;let d="\n       int xR; int xC; int xCOffset;\n       vec4 wTexel; vec4 previous; vec4 final;";for(let m=0;m<u;m++)d+="\n           vec4 xTexelC".concat(2*m,";\n           int xTexelC").concat(2*m,"Ready;\n           vec4 xTexelC").concat(2*m+1,";\n           int xTexelC").concat(2*m+1,"Ready;\n           vec4 xC").concat(m,";");d+="\n     for (int r = 0; r < ".concat(c,"; r++) {\n      for (int d1 = 0; d1 < ").concat(e.inChannels,"; d1 += 2) {\n       ");for(let m=0;m<u;m++)d+="\n           xTexelC".concat(2*m," = vec4(0.0);\n           xTexelC").concat(2*m,"Ready = 0;\n           xTexelC").concat(2*m+1," = vec4(0.0);\n           xTexelC").concat(2*m+1,"Ready = 0;\n           xC").concat(m," = vec4(0.0);");d+="\n         xR = xRCorner + r * dilations[0];\n         if (xR >=0 && xR < inDims[0]) {\n       ";for(let m=0;m<(l+1)/2;m++){const t=2*m;if(d+="\n           xC = xCCorner + ".concat(t*s,";\n           "),1===i){if(t<u&&(o%2===1?(d+="\n                 xCOffset = xC + 1;\n                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(t,"Ready == 0) {\n                   xTexelC").concat(t," = getX(batch, xR, xCOffset, d1);\n\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(t,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(t,"Ready = 1;\n                 }\n               "),d+=1===s&&t>0?"\n                 xC".concat(t," = vec4(xTexelC").concat(t-2,".zw, xTexelC").concat(t,".xy);\n                 "):"\n                   xCOffset = xC + 1 - 2;\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       previous.zw = vec2(0.0);\n                     }\n\n                     xC".concat(t," = vec4(previous.zw, xTexelC").concat(t,".xy);\n                   } else {\n                     xC").concat(t," = vec4(0.0, 0.0, xTexelC").concat(t,".xy);\n                   }\n                   ")):d+="\n                 if (xC >= 0 && xC < inDims[1] && xTexelC".concat(t,"Ready == 0) {\n                   xTexelC").concat(t," = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC").concat(t,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(t,"Ready = 1;\n                 }\n\n                 xC").concat(t," = xTexelC").concat(t,";\n                 "),t+1<u)){const e=o%2===0?xt(s):s;s%2===0&&o%2===1||s%2!==0&&o%2!==1?(d+="\n                   xCOffset = xC + imod(pads[1], 2) + ".concat(e,";\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(t+1,"Ready == 0) {\n                     xTexelC").concat(t+1," = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       xTexelC").concat(t+1,".zw = vec2(0.0);\n                     }\n                     xTexelC").concat(t+1,"Ready = 1;\n                   }\n                   "),d+=s>1?"\n                     xCOffset -= 2;\n                     if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                      previous = getX(batch, xR, xCOffset, d1);\n                      xC".concat(t+1," = vec4(previous.zw, xTexelC").concat(t+1,".xy);\n                     } else {\n                      xC").concat(t+1," = vec4(0.0, 0.0, xTexelC").concat(t+1,".xy);\n                     }\n                     "):"\n                     xC".concat(t+1," = vec4(xTexelC").concat(t,".zw, xTexelC").concat(t+1,".xy);\n                     ")):d+=1===e?"\n                     xC".concat(t+1," = xTexelC").concat(t,";\n                     "):"\n                     xCOffset = xC + ".concat(e,";\n\n                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(t+1,"Ready == 0) {\n                       xTexelC").concat(t+1," = getX(batch, xR, xCOffset, d1);\n                       if (xCOffset + 1 >= inDims[1]) {\n                         xTexelC").concat(t+1,".zw = vec2(0.0);\n                       }\n                       xTexelC").concat(t+1,"Ready = 1;\n                     }\n\n                     xC").concat(t+1," = xTexelC").concat(t+1,";\n                     ")}}else t<u&&(o%2===1?(d+="\n                 xCOffset = xC + 1 - strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(t,"Ready == 0) {\n                   xTexelC").concat(t," = getX(batch, xR, xCOffset, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(t,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(t,"Ready = 1;\n                 }\n\n                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(t+1,"Ready == 0) {\n                   xTexelC").concat(t+1," = getX(batch, xR, xC + 1, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xC + 2 >= inDims[1]) {\n                     xTexelC").concat(t+1,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(t+1,"Ready = 1;\n                 }\n\n                 xC").concat(t," = vec4(xTexelC").concat(t,".zw, xTexelC").concat(t+1,".zw);\n               "),t+1<u&&(d+="\n                   final = vec4(0.0);\n                   xCOffset = xC + 1 + strides[1];\n                   if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                     final = getX(batch, xR, xCOffset, d1);\n                   }\n                   xC".concat(t+1," = vec4(xTexelC").concat(t+1,".xy, final.xy);\n                 "))):(d+="\n                 if(xC >= 0 && xC < inDims[1] && xTexelC".concat(t,"Ready == 0) {\n                   xTexelC").concat(t," = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC").concat(t,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(t,"Ready = 1;\n                 }\n\n                 xCOffset = xC + strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(t+1,"Ready == 0) {\n                   xTexelC").concat(t+1," = getX(batch, xR, xCOffset, d1);\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(t+1,".zw = vec2(0.);\n                   }\n                   xTexelC").concat(t+1,"Ready = 1;\n                 }\n\n                 xC").concat(t," = vec4(\n                   xTexelC").concat(t,".xy, xTexelC").concat(t+1,".xy);\n               "),t+1<u&&(d+="\n                   xC".concat(t+1," = vec4(xTexelC").concat(t,".zw, xTexelC").concat(t+1,".zw);\n                 "))));t<u&&(d+="\n             wTexel = getW(r, ".concat(t,", d1, d2);\n             dotProd += xC").concat(t,".xxzz * vec4(wTexel.xy, wTexel.xy);\n             if(d1 + 1 < ").concat(e.inChannels,") {\n               dotProd += xC").concat(t,".yyww * vec4(wTexel.zw, wTexel.zw);\n             }\n           "),t+1<u&&(d+="\n               wTexel = getW(r, ".concat(t+1,", d1, d2);\n               dotProd += xC").concat(t+1,".xxzz * vec4(wTexel.xy, wTexel.xy);\n               if(d1 + 1 < ").concat(e.inChannels,") {\n                 dotProd += xC").concat(t+1,".yyww * vec4(wTexel.zw, wTexel.zw);\n               }\n             ")))}d+="\n     }\n   ",d+="\n     }\n   ",d+="\n     }\n   ";let p="",h="";n&&(p=a?"vec4 activation(vec4 a) {\n           vec4 b = getPreluActivationWeightsAtOutCoords();\n           ".concat(n,"\n         }"):r?"vec4 activation(vec4 a) {\n           vec4 b = getLeakyreluAlphaAtOutCoords();\n           ".concat(n,"\n         }"):"vec4 activation(vec4 x) {\n           ".concat(n,"\n         }"),h="result = activation(result);");const f=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),r&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n       ".concat(p,"\n\n       void main() {\n         ivec4 coords = getOutputCoords();\n         int batch = coords.x;\n         ivec2 xRCCorner = coords.yz * strides - pads;\n         int d2 = coords.w;\n         int xRCorner = xRCCorner.x;\n         int xCCorner = xRCCorner.y;\n\n         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n         vec4 dotProd = vec4(0.000000000000001);\n\n         ").concat(d,"\n\n         vec4 result = dotProd - vec4(0.000000000000001);\n         ").concat(f,"\n         ").concat(h,"\n         setOutput(result);\n       }\n     ")}}class kk{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=ny(this.outputShape.length);const{dataFormat:n}=t,a=Fg(),r="channelsLast"===n,o=r?1:2,i=r?2:3,s=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":"if(blockIndex < ".concat(e[2]," && pos < ").concat(e[1],") {");let c="";for(let u=0;u<=1;u++)for(let e=0;e<=1;e++)c+="\n          blockIndex = rc.z + ".concat(e,";\n          pos = rc.y + ").concat(u,";\n\n          ").concat(s,"\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[").concat(o,"] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[").concat(i,"] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (").concat(r,") {\n                  innerDims = vec2(d1, ch);\n                  result[").concat(2*u+e,"] = getChannel(\n                    getA(rc.x, d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[").concat(2*u+e,"] = getChannel(\n                    getA(rc.x, ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ");this.userCode="\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ".concat(c,"\n\n        ").concat(a.output," = result;\n      }\n    ")}}function Sk(e,t){const n=e.length;return n>=3?t?[...e.slice(0,-3),e[n-3]*e[n-2],e[n-1]]:[...e.slice(0,-3),e[n-3],e[n-2]*e[n-1]]:!t&&1===n&&e[0]>1?[e[0],1]:null}function Ck(e){let{x:t,filter:n,convInfo:a,backend:r,bias:o=null,preluActivationWeights:i=null,leakyreluAlpha:s=0,activation:c=null}=e;const u=t.shape,l=r.texData.get(t.dataId),d=a.inChannels,p=u[0]*u[1]*u[2],h=a.outChannels,f="channelsLast"===a.dataFormat,m=!1;let g;const y=[];if(null!=i){const e=Sk(i.shape,f);null!=e&&(i=Lv({inputs:{x:i},backend:r,attrs:{shape:e}}),y.push(i))}if(null!=o){const e=Sk(o.shape,f);null!=e&&(o=Lv({inputs:{x:o},backend:r,attrs:{shape:e}}),y.push(o))}if(!((1===p||1===h)&&d>Yv)&&l.isPacked&&f&&null!=l.texture&&u[2]%2!==0&&Tt(l.shape.slice(-3),u.slice(-3))){const e=u[0]*u[1]*(u[2]+1),d={dataId:t.dataId,shape:[1,e,a.inChannels],dtype:t.dtype},p=l.shape;l.shape=l.shape.slice(),l.shape[l.shape.length-2]++,kt(Cg(l.shape,d.shape),(()=>"packed reshape ".concat(l.shape," to ").concat(d.shape," isn't free")));const h=Lv({inputs:{x:n},backend:r,attrs:{shape:[1,a.inChannels,a.outChannels]}});y.push(h);const f=Qv({a:d,b:h,backend:r,transposeA:false,transposeB:m,bias:o,activation:c,preluActivationWeights:i,leakyreluAlpha:s}),b=r.texData.get(f.dataId);kt(b.isPacked,(()=>"batchMatMul result is expected to be packed")),l.shape=p,b.shape=a.outShape,g=yv({inputs:{x:f},backend:r}),g.shape=a.outShape,y.push(f)}else{const e=a.outHeight*a.outWidth,u=Lv({inputs:{x:t},backend:r,attrs:{shape:f?[a.batchSize,e,a.inChannels]:[a.batchSize,a.inChannels,e]}}),l=Lv({inputs:{x:n},backend:r,attrs:{shape:[1,a.inChannels,a.outChannels]}}),d=Qv({a:f?u:l,b:f?l:u,transposeA:!f,transposeB:m,backend:r,bias:o,activation:c,preluActivationWeights:i,leakyreluAlpha:s});g=Lv({inputs:{x:d},backend:r,attrs:{shape:a.outShape}}),y.push(u),y.push(l),y.push(d)}for(const b of y)r.disposeIntermediateTensorInfo(b);return g}function Ik(e){let{x:t,filter:n,convInfo:a,backend:r,bias:o=null,preluActivationWeights:i=null,leakyreluAlpha:s=0,activation:c=null}=e;const{filterWidth:u,filterHeight:l,inChannels:d,outWidth:p,outHeight:h,dataFormat:f}=a,m="channelsLast"===f,g=u*l*d,y=h*p,b=[a.batchSize,g,y],x=[];if(null!=i){const e=Sk(i.shape,m);null!=e&&(i=Lv({inputs:{x:i},backend:r,attrs:{shape:e}}),x.push(i))}if(null!=o){const e=Sk(o.shape,m);null!=e&&(o=Lv({inputs:{x:o},backend:r,attrs:{shape:e}}),x.push(o))}const v=Lv({inputs:{x:n},backend:r,attrs:{shape:[1,g,It(n.shape)/g]}});x.push(v);const w=new kk(b,a),k=[t.shape,[a.padInfo.top,a.padInfo.left],[a.strideHeight,a.strideWidth],[a.dilationHeight,a.dilationWidth],[a.inChannels],[a.filterWidth*a.inChannels],[a.outWidth]],S=r.runWebGLProgram(w,[t],"float32",k),C=Lv({inputs:{x:S},backend:r,attrs:{shape:b}});x.push(S),x.push(C);const I=null!=o,N=null!=i,T="leakyrelu"===c,_=c?Rv(c,!0):null,E=new Av(m?C.shape:v.shape,m?v.shape:C.shape,m?[a.batchSize,y,a.outChannels]:[a.batchSize,a.outChannels,y],!0,!1,I,_,N,T),R=m?[C,v]:[v,C];if(o&&R.push(o),N&&R.push(i),T){const e=r.makeTensorInfo([],"float32",Ho(s,"float32"));R.push(e),x.push(e)}const A=r.runWebGLProgram(E,R,"float32"),O=Lv({inputs:{x:A},backend:r,attrs:{shape:a.outShape}});x.push(A);for(const F of x)r.disposeIntermediateTensorInfo(F);return O}const Nk={kernelName:Ln,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,filter:o}=t,{strides:i,pad:s,dataFormat:c,dilations:u,dimRoundingMode:l}=a,d=tl(c),p=ju(r.shape,o.shape,i,u,s,l,!1,d);let h;if(1!==p.filterHeight||1!==p.filterWidth||1!==p.dilationHeight||1!==p.dilationWidth||1!==p.strideHeight||1!==p.strideWidth||"SAME"!==p.padInfo.type&&"VALID"!==p.padInfo.type)if(p.strideWidth<=2&&"channelsLast"===d&&nn().getBool("WEBGL_EXP_CONV")){const e=new wk(p),t=[[p.padInfo.top,p.padInfo.left],[p.strideHeight,p.strideWidth],[p.dilationHeight,p.dilationWidth],[p.inHeight,p.inWidth]];h=n.runWebGLProgram(e,[r,o],"float32",t)}else if(nn().getBool("WEBGL_CONV_IM2COL"))h=Ik({x:r,filter:o,convInfo:p,backend:n});else{const e=new xk(p);h=n.runWebGLProgram(e,[r,o],"float32")}else h=Ck({x:r,filter:o,convInfo:p,backend:n});const f=Lv({inputs:{x:h},backend:n,attrs:{shape:p.outShape}});return n.disposeIntermediateTensorInfo(h),f}};class Tk{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideHeight,n=e.strideWidth,a=e.padInfo.top,r=e.padInfo.left,o="channelsLast"===e.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(e.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(e.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(t," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(e.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(n," - ").concat(r,";\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              ").concat(o?"float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);":"float dyValue = getDy(b, d2, yR, yC);\n              float xValue = getX(b, d1, xR, xC);\n              dotProd += (xValue * dyValue);","\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class _k{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,a=e.strideHeight,r=e.strideWidth,o="channelsLast"===e.dataFormat,i=t-1-e.padInfo.top,s=n-1-e.padInfo.left,c=o?1:2,u=o?2:3,l=o?3:1;this.userCode="\n      const ivec2 pads = ivec2(".concat(i,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[").concat(l,"];\n\n        ivec2 dyCorner = ivec2(coords[").concat(c,"], coords[").concat(u,"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(t,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(t," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(n,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(r,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(n," - 1 - wC;\n\n            for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2++) {\n\n              if (").concat(o,") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class Ek{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideDepth,n=e.strideHeight,a=e.strideWidth,r=e.padInfo.front,o=e.padInfo.top,i=e.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(e.batchSize,"; b++) {\n          for (int yF = 0; yF < ").concat(e.outDepth,"; yF++) {\n            int xF = wF + yF * ").concat(t," - ").concat(r,";\n\n            if (xF < 0 || xF >= ").concat(e.inDepth,") {\n              continue;\n            }\n\n            for (int yR = 0; yR < ").concat(e.outHeight,"; yR++) {\n              int xR = wR + yR * ").concat(n," - ").concat(o,";\n\n              if (xR < 0 || xR >= ").concat(e.inHeight,") {\n                continue;\n              }\n\n              for (int yC = 0; yC < ").concat(e.outWidth,"; yC++) {\n                int xC = wC + yC * ").concat(a," - ").concat(i,";\n\n                if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class Rk{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterDepth,n=e.filterHeight,a=e.filterWidth,r=e.strideDepth,o=e.strideHeight,i=e.strideWidth,s=t-1-e.padInfo.front,c=n-1-e.padInfo.top,u=a-1-e.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3(".concat(s,", ").concat(c,", ").concat(u,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(t,"; wF++) {\n          float dyF = float(dyFCorner + wF) / ").concat(r,".0;\n\n          if (dyF < 0.0 || dyF >= ").concat(e.outDepth,".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ").concat(t," - 1 - wF;\n\n          for (int wR = 0; wR < ").concat(n,"; wR++) {\n            float dyR = float(dyRCorner + wR) / ").concat(o,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ").concat(n," - 1 - wR;\n\n            for (int wC = 0; wC < ").concat(a,"; wC++) {\n              float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ").concat(a," - 1 - wC;\n\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}const Ak={kernelName:zn,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,dy:o}=t,{strides:i,pad:s,dataFormat:c,dimRoundingMode:u,filterShape:l}=a,d=tl(c),p=ju(r.shape,l,i,1,s,u,!1,d),h=new Tk(p);return n.runWebGLProgram(h,[r,o],"float32")}};class Ok{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=ny(this.outputShape.length);const t=e.filterHeight,n=e.filterWidth,a=t-1-e.padInfo.top,r=n-1-e.padInfo.left;this.userCode="\n      const ivec2 pads = ivec2(".concat(a,", ").concat(r,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n\n        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        vec4 result = vec4(0.);\n        for (int wR = 0; wR < ").concat(t,"; wR++) {\n          float dyR = float(dyRCorner + wR) / strides[0];\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n          int wRPerm = ").concat(t," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(n,"; wC++) {\n            int wCPerm = ").concat(n," - 1 - wC;\n\n            float dyC = float(dyCCorner + wC) / strides[1];\n            bool idyCVal = (dyC >= 0.0) && (dyC < ").concat(e.outWidth,".0)\n              && (fract(dyC) == 0.0);\n            int idyC = int(dyC);\n\n            float dyC2 = float(dyCCorner + wC + 1) / strides[1];\n            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ").concat(e.outWidth,".0)\n              && (fract(dyC2) == 0.0);\n            int idyC2 = int(dyC2);\n\n            if (idyCVal && idyCVal2) {\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?\n                  dySample : getDy(batch, idyR, idyC2, d2);\n\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n\n                dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample2.xy : dySample2.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal) {\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal2) {\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC2, d2);\n                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            }\n          }\n        }\n        setOutput(result);\n      }\n    ")}}const Fk={kernelName:Bn,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:r,filter:o}=t,{inputShape:i,strides:s,pad:c,dataFormat:u,dimRoundingMode:l}=a,d=tl(u),p=ju(i,o.shape,s,1,c,l,!1,d);if(nn().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&"channelsLast"===d){const e=[[p.strideHeight,p.strideWidth]],t=new Ok(p);return n.runWebGLProgram(t,[r,o],"float32",e)}{const e=new _k(p);return n.runWebGLProgram(e,[r,o],"float32")}}};const Dk={kernelName:Wn,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,filter:o}=t,{strides:i,pad:s,dilations:c}=a,u=Ku(r.shape,o.shape,i,c,s),l=new vk(u);return n.runWebGLProgram(l,[r,o],"float32")}};const Mk={kernelName:Un,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,dy:o}=t,{strides:i,pad:s,filterShape:c}=a,u=Ku(r.shape,c,i,1,s),l=new Ek(u);return n.runWebGLProgram(l,[r,o],"float32")}};const Pk={kernelName:Vn,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:r,filter:o}=t,{pad:i,strides:s,inputShape:c}=a,u=Ku(c,o.shape,s,1,i),l=new Rk(u);return n.runWebGLProgram(l,[r,o],"float32")}},Lk=_v({opSnippet:Tv+"\n  return cos(x);\n",packedOpSnippet:"\n  vec4 result = cos(x);\n  bvec4 isNaN = isnan(x);\n  ".concat(mv,"\n  return result;\n")}),zk={kernelName:Gn,backendName:"webgl",kernelFunc:Lk},Bk=_v({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"}),Wk={kernelName:Hn,backendName:"webgl",kernelFunc:Bk};class Uk{constructor(e,t,n,a,r){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[o,i,s,c]=e,[u]=t,[l,d]=n;this.outputShape=[u,l,d,c];const p="bilinear"===a?1:0,[h,f]=["".concat(i-1,".0"),"".concat(s-1,".0")],[m,g,y]=l>1?["".concat((i-1)/(l-1)),"(y2-y1) * height_ratio","y1*".concat(h," + float(y)*(height_scale)")]:["0.0","0.0","0.5 * (y1+y2) * ".concat(h)],[b,x,v]=d>1?["".concat((s-1)/(d-1)),"(x2-x1) * width_ratio","x1*".concat(f," + float(x)*(width_scale)")]:["0.0","0.0","0.5 * (x1+x2) * ".concat(f)];this.userCode="\n      const float height_ratio = float(".concat(m,");\n      const float width_ratio = float(").concat(b,");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ").concat(o,") {\n          return;\n        }\n\n        float height_scale = ").concat(g,";\n        float width_scale = ").concat(x,";\n\n        float in_y = ").concat(y,";\n        if( in_y < 0.0 || in_y > ").concat(h," ) {\n          setOutput(float(").concat(r,"));\n          return;\n        }\n        float in_x = ").concat(v,";\n        if( in_x < 0.0 || in_x > ").concat(f," ) {\n          setOutput(float(").concat(r,"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(").concat(p," == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    ")}}const Vk={kernelName:qn,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:a}=e,{image:r,boxes:o,boxInd:i}=t,{cropSize:s,method:c,extrapolationValue:u}=a,l=new Uk(r.shape,o.shape,s,c,u);return n.runWebGLProgram(l,[r,o,i],"float32")}};var Gk;!function(e){e.Prod="*",e.Sum="+"}(Gk||(Gk={}));class Hk{constructor(e,t,n,a){this.op=e,this.outputShape=t,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const r=this.outputShape.length,o=this.op===Gk.Prod?"1.0":"0.0",i=n?o:"getX(".concat(jk(r,"coords",this.op),")"),s=this.outputShape[this.outputShape.length-1];let c="",u="";n?(c=a?"end != ".concat(s-1):"end != 0",u=a?"end + 1":"end - 1"):(c=a?"end + pow2 < ".concat(s):"end >= pow2",u=a?"end + pow2":"end - pow2"),this.userCode="\n      void main() {\n        ".concat(Yg(r)," coords = getOutputCoords();\n        int end = ").concat(Kk(r,"coords",this.op),";\n        float val = ").concat(i,";\n        int pow2 = int(pow(2.0, index));\n        if (").concat(c,") {\n          int idx = ").concat(u,";\n          ").concat(Kk(r,"coords",this.op)," = idx;\n          val ").concat(this.op,"= getX(").concat(jk(r,"coords",this.op),");\n        }\n        setOutput(val);\n      }\n    ")}}function jk(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".x, ").concat(t,".y");if(3===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z");if(4===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z, ").concat(t,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function Kk(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".y");if(3===e)return"".concat(t,".z");if(4===e)return"".concat(t,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function qk(e,t,n,a,r,o){const i=t.shape.length,s=nd([a],i);let c=t;null!=s&&(c=qv({inputs:{x:t},backend:n,attrs:{perm:s}}));const u=rd(1,i)[0];if(u!==i-1)throw new Error("WebGL cumprod shader expects an inner-most axis=".concat(t.shape.length-1," ")+"but got axis=".concat(a));const l=c.shape[u];let d=yv({inputs:{x:c},backend:n});for(let p=0;p<=Math.ceil(Math.log2(l))-1;p++){const t=new Hk(e,c.shape,!1,o),a=[[p]],r=d;d=n.runWebGLProgram(t,[d],d.dtype,a),n.disposeIntermediateTensorInfo(r)}if(r){const t=new Hk(e,c.shape,r,o),a=d;d=n.runWebGLProgram(t,[d],d.dtype),n.disposeIntermediateTensorInfo(a)}if(null!=s){const e=qv({inputs:{x:d},backend:n,attrs:{perm:ad(s)}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(c),e}return d}const Xk={kernelName:jn,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:o,exclusive:i,reverse:s}=a;return qk(Gk.Prod,r,n,o,i,s)}};const Yk={kernelName:Kn,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:o,exclusive:i,reverse:s}=a;return qk(Gk.Sum,r,n,o,i,s)}};const Qk={kernelName:Xn,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,weights:o}=t,{size:i,binaryOutput:s}=a;if(1===r.shape.length){const e=n.readSync(r.dataId),t=n.readSync(o.dataId),a=jb(e,t,o.dtype,o.shape,i);return n.makeTensorInfo([i],o.dtype,a)}if(2===r.shape.length){const e=n.bufferSync(r),t=n.bufferSync(o),a=Kb(e,t,i,s);return n.makeTensorInfo(a.shape,o.dtype,a.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(r.shape.length,"."))}};class Zk{constructor(e,t,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=n,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ".concat(this.getHeightCoordString(),";\n      int w = ").concat(this.getWidthCoordString(),";\n      int d = ").concat(this.getDepthCoordString(),";\n\n      int in_h = h / ").concat(t,";\n      int offset_h = imod(h, ").concat(t,");\n      int in_w = w / ").concat(t,";\n      int offset_w = imod(w, ").concat(t,");\n      int offset_d = (offset_h * ").concat(t," + offset_w) *\n        ").concat(this.getOutputDepthSize(),";\n      int in_d = d + offset_d;\n\n      float result = ").concat(this.getInputSamplingString(),";\n      setOutput(result);\n    }\n  ")}getHeightCoordString(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}getWidthCoordString(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}getDepthCoordString(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}getOutputDepthSize(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}const $k={kernelName:Yn,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{blockSize:o,dataFormat:i}=a,s=r.shape[0],c=("NHWC"===i?r.shape[1]:r.shape[2])*o,u=("NHWC"===i?r.shape[2]:r.shape[3])*o,l=("NHWC"===i?r.shape[3]:r.shape[1])/(o*o),d=new Zk("NHWC"===i?[s,c,u,l]:[s,l,c,u],o,i);return n.runWebGLProgram(d,[r],r.dtype)}};class Jk{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=ny(this.outputShape.length);const o=e.filterHeight,i=e.filterWidth,s=e.outChannels/e.inChannels;let c="",u="";n&&(c=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(n,"\n        }"):r?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(n,"\n        }"):"\n          float activation(float x) {\n            ".concat(n,"\n          }\n        "),u="result = activation(result);");const l=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),r&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(c,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(s,";\n        int q = d2 - d1 * ").concat(s,";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ").concat(o,"; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(i,"; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ").concat(l,"\n        ").concat(u,"\n        setOutput(result);\n      }\n    ")}}class eS{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=ny(this.outputShape.length);const o=e.outChannels/e.inChannels,i=e.padInfo.left,s=e.strideWidth,c=e.dilationWidth,u=e.filterHeight,l=e.filterWidth,d=l;let p="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;";for(let g=0;g<l;g++)p+="\n          vec4 xTexelC".concat(2*g,";\n          int xTexelC").concat(2*g,"Ready;\n          vec4 xTexelC").concat(2*g+1,";\n          int xTexelC").concat(2*g+1,"Ready;\n          vec4 xC").concat(g,";");p+="\n    for (int r = 0; r < ".concat(u,"; r++) {\n      ");for(let g=0;g<l;g++)p+="\n          xTexelC".concat(2*g," = vec4(0.0);\n          xTexelC").concat(2*g,"Ready = 0;\n          xTexelC").concat(2*g+1," = vec4(0.0);\n          xTexelC").concat(2*g+1,"Ready = 0;\n          xC").concat(g," = vec4(0.0);");p+="\n        xR = xRCorner + r * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ";for(let g=0;g<(d+1)/2;g++){const e=2*g;if(p+="\n          xC = xCCorner + ".concat(e*c,";\n          "),1===s){if(e<l&&(i%2===1?(p+="\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(e,"Ready == 0) {\n                  xTexelC").concat(e," = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(e,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(e,"Ready = 1;\n                }\n              "),p+=1===c&&e>0?"\n                xC".concat(e," = vec4(xTexelC").concat(e-2,".zw, xTexelC").concat(e,".xy);\n                "):"\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC".concat(e," = vec4(previous.zw, xTexelC").concat(e,".xy);\n                  } else {\n                    xC").concat(e," = vec4(0.0, 0.0, xTexelC").concat(e,".xy);\n                  }\n                  ")):p+="\n                if (xC >= 0 && xC < inDims[1] && xTexelC".concat(e,"Ready == 0) {\n                  xTexelC").concat(e," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(e,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(e,"Ready = 1;\n                }\n\n                xC").concat(e," = xTexelC").concat(e,";\n                "),e+1<l)){const t=i%2===0?xt(c):c;c%2===0&&i%2===1||c%2!==0&&i%2!==1?(p+="\n                  xCOffset = xC + imod(pads[1], 2) + ".concat(t,";\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(e+1,"Ready == 0) {\n                    xTexelC").concat(e+1," = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC").concat(e+1,".zw = vec2(0.0);\n                    }\n                    xTexelC").concat(e+1,"Ready = 1;\n                  }\n                  "),p+=c>1?"\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n                     xC".concat(e+1," = vec4(previous.zw, xTexelC").concat(e+1,".xy);\n                    } else {\n                     xC").concat(e+1," = vec4(0.0, 0.0, xTexelC").concat(e+1,".xy);\n                    }\n                    "):"\n                    xC".concat(e+1," = vec4(xTexelC").concat(e,".zw, xTexelC").concat(e+1,".xy);\n                    ")):p+=1===t?"\n                    xC".concat(e+1," = xTexelC").concat(e,";\n                    "):"\n                    xCOffset = xC + ".concat(t,";\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(e+1,"Ready == 0) {\n                      xTexelC").concat(e+1," = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC").concat(e+1,".zw = vec2(0.0);\n                      }\n                      xTexelC").concat(e+1,"Ready = 1;\n                    }\n\n                    xC").concat(e+1," = xTexelC").concat(e+1,";\n                    ")}}else e<l&&(i%2===1?(p+="\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(e,"Ready == 0) {\n                  xTexelC").concat(e," = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(e,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(e,"Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(e+1,"Ready == 0) {\n                  xTexelC").concat(e+1," = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC").concat(e+1,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(e+1,"Ready = 1;\n                }\n\n                xC").concat(e," = vec4(xTexelC").concat(e,".zw, xTexelC").concat(e+1,".zw);\n              "),e+1<l&&(p+="\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC".concat(e+1," = vec4(xTexelC").concat(e+1,".xy, final.xy);\n                "))):(p+="\n                if(xC >= 0 && xC < inDims[1] && xTexelC".concat(e,"Ready == 0) {\n                  xTexelC").concat(e," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(e,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(e,"Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(e+1,"Ready == 0) {\n                  xTexelC").concat(e+1," = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(e+1,".zw = vec2(0.);\n                  }\n                  xTexelC").concat(e+1,"Ready = 1;\n                }\n\n                xC").concat(e," = vec4(\n                  xTexelC").concat(e,".xy, xTexelC").concat(e+1,".xy);\n              "),e+1<l&&(p+="\n                  xC".concat(e+1," = vec4(xTexelC").concat(e,".zw, xTexelC").concat(e+1,".zw);\n                "))));e<l&&(p+="\n            wTexel = getW(r, ".concat(e,", d1, q);\n            dotProd += xC").concat(e," * vec4(wTexel.xz, wTexel.xz);\n          "),e+1<l&&(p+="\n              wTexel = getW(r, ".concat(e+1,", d1, q);\n              dotProd += xC").concat(e+1," * vec4(wTexel.xz, wTexel.xz);\n            ")))}p+="\n    }\n  ",p+="\n      }\n    ";let h="",f="";n&&(h=a?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(n,"\n        }"):r?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(n,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(n,"\n        }"),f="result = activation(result);");const m=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),r&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(h,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(o,";\n        int q = d2 - d1 * ").concat(o,";\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ").concat(p,"\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ").concat(m,"\n        ").concat(f,"\n        setOutput(result);\n      }\n    ")}}const tS={kernelName:Qn,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,filter:o}=t,{strides:i,pad:s,dilations:c,dimRoundingMode:u}=a;let l=c;null==l&&(l=[1,1]),kt(Ju(i,l),(()=>"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(i," and dilations '").concat(l,"'")));const d=ju(r.shape,o.shape,i,l,s,u,!0);let p;p=nn().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?new eS(d):new Jk(d);const h=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(p,[r,o],"float32",h)}};class nS{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideHeight,n=e.strideWidth,a=e.padInfo.top,r=e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ".concat(o," + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ").concat(e.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(e.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(t," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(e.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(n," - ").concat(r,";\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class aS{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,a=e.strideHeight,r=e.strideWidth,o=t-1-e.padInfo.top,i=n-1-e.padInfo.left,s=e.outChannels/e.inChannels;this.userCode="\n      const ivec2 pads = ivec2(".concat(o,", ").concat(i,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ").concat(t,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(t," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(n,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(r,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(n," - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ").concat(s,"; dm++) {\n              int d2 = d1 * ").concat(s," + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}const rS={kernelName:Zn,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,dy:o}=t,{strides:i,dilations:s,pad:c,dimRoundingMode:u,filterShape:l}=a,d=ju(r.shape,l,i,s,c,u,!0),p=new nS(d);return n.runWebGLProgram(p,[r,o],"float32")}};const oS={kernelName:$n,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:r,filter:o}=t,{strides:i,dilations:s,pad:c,dimRoundingMode:u,inputShape:l}=a,d=ju(l,o.shape,i,s,c,u,!0),p=new aS(d);return n.runWebGLProgram(p,[r,o],"float32")}};class iS{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}}const sS={kernelName:Jn,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:a}=t,r=[...a.shape,...a.shape],o=It(a.shape),i=Lv({inputs:{x:a},backend:n,attrs:{shape:[o]}}),s=new iS(o),c=n.runWebGLProgram(s,[i],i.dtype),u=Lv({inputs:{x:c},backend:n,attrs:{shape:r}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(c),u}};class cS{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:t,inWidth:n,padInfo:a,strideHeight:r,strideWidth:o,filterHeight:i,filterWidth:s,dilationHeight:c,dilationWidth:u}=e,{top:l,left:d}=a;this.userCode="\n      const ivec2 strides = ivec2(".concat(r,", ").concat(o,");\n      const ivec2 pads = ivec2(").concat(l,", ").concat(d,");\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ").concat(i,"; h++) {\n          int hIn = hBeg + h * ").concat(c,";\n\n          if (hIn >= 0 && hIn < ").concat(t,") {\n            for (int w = 0; w < ").concat(s,"; w++) {\n              int wIn = wBeg + w * ").concat(u,";\n\n              if (wIn >= 0 && wIn < ").concat(n,") {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    ")}}const uS={kernelName:ea,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,filter:o}=t,{strides:i,pad:s,dilations:c}=a,u=Vu(r.shape,o.shape,i,s,"NHWC",c);let l;const d=new cS(u);l=n.runWebGLProgram(d,[r,o],"float32");const p=Lv({inputs:{x:l},backend:n,attrs:{shape:u.outShape}});return n.disposeIntermediateTensorInfo(l),p}};const lS={kernelName:oa,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{equation:r}=a,o=t,{allDims:i,summedDims:s,idDims:c}=Tm(r,o.length);Em(i.length,c,o);const{path:u,steps:l}=Rm(s,c),d=l.length;let p=null,h=i.length;const f=[];for(let m=0;m<d;++m){for(const e of l[m]){const{permutationIndices:t,expandDims:a}=_m(h,c[e]);let r;Am(t)?r=o[e]:(r=qv({inputs:{x:o[e]},backend:n,attrs:{perm:t}}),f.push(r));const i=r.shape.slice();for(let e=0;e<a.length;++e)i.splice(a[e],0,1);Tt(r.shape,i)||(r=Lv({inputs:{x:r},backend:n,attrs:{shape:i}}),f.push(r)),null===p?p=r:(p=Mv({inputs:{a:r,b:p},backend:n}),f.push(p))}m<d-1&&(u[m]>=0&&(p=jv({inputs:{x:p},backend:n,attrs:{axis:u[m]-(i.length-h),keepDims:!1}}),f.push(p)),h--)}for(const m of f)m!==p&&n.disposeIntermediateTensorInfo(m);return p}},dS=_v({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"}),pS={kernelName:ia,backendName:"webgl",kernelFunc:dS},hS={kernelName:sa,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n}=e,{dy:a,y:r}=t,o=nn().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new gv("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",a.shape,r.shape):new fv("return (b >= 0.0) ? a : a * (b + 1.0);",a.shape,r.shape);return n.runWebGLProgram(o,[a,r],a.dtype)}},fS=Ev({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool",cpuKernelImpl:Zb}),mS={kernelName:ua,backendName:"webgl",kernelFunc:fS},gS=_v({opSnippet:'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = '.concat(um,";\n  float a1 = ").concat(lm,";\n  float a2 = ").concat(dm,";\n  float a3 = ").concat(pm,";\n  float a4 = ").concat(hm,";\n  float a5 = ").concat(fm,";\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n")}),yS={kernelName:ca,backendName:"webgl",kernelFunc:gS},bS=_v({opSnippet:Tv+"\n  return exp(x);\n",packedOpSnippet:"\n  vec4 result = exp(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:$b,dtype:"float32"}),xS={kernelName:la,backendName:"webgl",kernelFunc:bS};function vS(e){const{inputs:t,attrs:n,backend:a}=e,{dim:r}=n,{input:o}=t,i=o.shape.length,s=o.shape.slice();let c=r;return r<0&&(kt(-(i+1)<=r,(()=>"Axis must be in the interval [".concat(-(i+1),", ").concat(i,"]"))),c=i+r+1),s.splice(c,0,1),Lv({inputs:{x:o},backend:a,attrs:{shape:s}})}const wS={kernelName:da,backendName:"webgl",kernelFunc:vS},kS="return exp(x) - 1.0;",SS=_v({opSnippet:kS,packedOpSnippet:kS,cpuKernelImpl:Jb}),CS={kernelName:pa,backendName:"webgl",kernelFunc:SS};class IS{constructor(e,t,n){this.variableNames=["real","imag"];const a=t[1];this.outputShape=t;const r=n?"2.0 * ".concat(Math.PI):"-2.0 * ".concat(Math.PI),o=n?"".concat(a,".0"):"1.0";let i;if("real"===e)i="return real * expR - imag * expI;";else{if("imag"!==e)throw new Error('FFT component must be either "real" or "imag", got '.concat(e,"."));i="return real * expI + imag * expR;"}this.userCode="\n      const float exponentMultiplier = ".concat(r,";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ").concat(i,"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(").concat(a,");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ").concat(o,";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    ")}}function NS(e,t,n){const a=n.texData.get(e.dataId),r=It(e.shape),o=e.shape[e.shape.length-1],i=Lv({inputs:{x:e},backend:n,attrs:{shape:[r/o,o]}}),s=i.shape,c=new IS("real",s,t),u=new IS("imag",s,t),l=[{dataId:a.complexTensorInfos.real.dataId,dtype:a.complexTensorInfos.real.dtype,shape:s},{dataId:a.complexTensorInfos.imag.dataId,dtype:a.complexTensorInfos.imag.dtype,shape:s}],d=n.runWebGLProgram(c,l,"float32"),p=n.runWebGLProgram(u,l,"float32"),h=xv({inputs:{real:d,imag:p},backend:n});n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p);const f=Lv({inputs:{x:h},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(h),f}const TS={kernelName:ha,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:a}=t;return NS(a,!1,n)}};class _S{constructor(e,t){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}}function ES(e){const{backend:t,attrs:n}=e,{shape:a,value:r}=n;let{dtype:o}=n;if(o=o||Wt(r),"string"===o){const e=Pt(o,It(a));return e.fill(r),t.makeTensorInfo(a,o,e)}{const e=new _S(a,r),n=[[r]];return t.runWebGLProgram(e,[],o,n)}}const RS={kernelName:fa,backendName:"webgl",kernelFunc:ES};class AS{constructor(e){this.variableNames=["Image"],this.outputShape=[];const t=e[2];this.outputShape=e,this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ".concat(t," - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ").concat(t,") {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")}}const OS={kernelName:ma,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n}=e;const{image:a}=t,r=n,o=new AS(a.shape);return r.runWebGLProgram(o,[a],a.dtype)}},FS="return floor(x);",DS=_v({opSnippet:FS,packedOpSnippet:FS,cpuKernelImpl:ex}),MS={kernelName:ga,backendName:"webgl",kernelFunc:DS},PS=Ev({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"}),LS={kernelName:ya,backendName:"webgl",kernelFunc:PS};class zS{constructor(e){this.variableNames=["A"];const t=Fg(),[n,a]=e;this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(".concat(a,".0, ").concat(n,".0);\n\n        vec4 values = ").concat(t.texture2D,"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    ")}}class BS{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const t=Fg(),[n,a]=e;this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(".concat(a,".0, ").concat(n,".0);\n            vec4 values = ").concat(t.texture2D,"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ").concat(t.output," = result;\n      }\n    ")}}const WS={kernelName:mo,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e;let{pixels:r}=t;const{numChannels:o}=a,i="undefined"!==typeof HTMLVideoElement&&r instanceof HTMLVideoElement,s="undefined"!==typeof HTMLImageElement&&r instanceof HTMLImageElement,[c,u]=i?[r.videoWidth,r.videoHeight]:[r.width,r.height],l=[u,c],d=[u,c,o];if(s||i){const e=nn().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");null!=US&&e===VS||(VS=e,US=document.createElement("canvas").getContext("2d",{willReadFrequently:VS})),US.canvas.width=c,US.canvas.height=u,US.drawImage(r,0,0,c,u),r=US.canvas}const p=n.makeTensorInfo(l,"int32");n.texData.get(p.dataId).usage=tg.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(p.dataId),r);const h=nn().getBool("WEBGL_PACK")?new BS(d):new zS(d),f=n.runWebGLProgram(h,[p],"int32");return n.disposeData(p.dataId),f}};let US,VS=nn().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");const GS={kernelName:bo,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,filter:o,bias:i,preluActivationWeights:s}=t,{strides:c,pad:u,dataFormat:l,dilations:d,dimRoundingMode:p,activation:h,leakyreluAlpha:f}=a,m=tl(l),g=ju(r.shape,o.shape,c,d,u,p,!1,m);let y;const b=[],x=null!=i,v=null!=s,w="leakyrelu"===h,k=()=>{const e=[r,o],t=(e,t)=>{if("NCHW"===t&&1===e.shape.length&&1!==e.shape[0]){const t=Lv({inputs:{x:e},backend:n,attrs:{shape:[e.shape[0],1,1]}});return b.push(t),t}return e};if(x&&e.push(t(i,l)),v&&e.push(t(s,l)),w){const t=n.makeTensorInfo([],"float32",Ho(f,"float32"));e.push(t),b.push(t)}return e};if(1!==g.filterHeight||1!==g.filterWidth||1!==g.dilationHeight||1!==g.dilationWidth||1!==g.strideHeight||1!==g.strideWidth||"SAME"!==g.padInfo.type&&"VALID"!==g.padInfo.type)if(g.strideWidth<=2&&"channelsLast"===m&&nn().getBool("WEBGL_EXP_CONV")){const e=h?Rv(h,!0):null,t=new wk(g,x,e,v,w),a=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],r=k();y=n.runWebGLProgram(t,r,"float32",a)}else if(nn().getBool("WEBGL_CONV_IM2COL"))y=Ik({x:r,filter:o,convInfo:g,backend:n,bias:i,activation:h,preluActivationWeights:s,leakyreluAlpha:f});else{const e=h?Rv(h,!1):null,t=new xk(g,x,e,v,w),a=k();y=n.runWebGLProgram(t,a,"float32")}else y=Ck({x:r,filter:o,convInfo:g,backend:n,bias:i,activation:h,preluActivationWeights:s,leakyreluAlpha:f});const S=Lv({inputs:{x:y},backend:n,attrs:{shape:g.outShape}});return b.push(y),b.forEach((e=>n.disposeIntermediateTensorInfo(e))),S}};const HS={kernelName:xo,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,filter:o,bias:i,preluActivationWeights:s}=t,{strides:c,pad:u,dilations:l,dimRoundingMode:d,activation:p,leakyreluAlpha:h}=a,f=[];let m=l;null==m&&(m=[1,1]),kt(Ju(c,m),(()=>"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(c," and dilations '").concat(m,"'")));const g=ju(r.shape,o.shape,c,m,u,d,!0),y=nn().getBool("WEBGL_PACK_DEPTHWISECONV")&&g.strideWidth<=2&&g.outChannels/g.inChannels===1,b=p?Rv(p,y):null,x=[r,o],v=null!=i,w=null!=s,k="leakyrelu"===p;if(v&&x.push(i),w&&x.push(s),k){const e=n.makeTensorInfo([],"float32",Ho(h,"float32"));x.push(e),f.push(e)}let S;S=y?new eS(g,v,b,w,k):new Jk(g,v,b,w,k);const C=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],I=n.runWebGLProgram(S,x,"float32",C);return f.forEach((e=>n.disposeIntermediateTensorInfo(e))),I}};class jS{constructor(e,t,n,a){this.sliceDim=e,this.strides=t,this.paramsShape=a,this.variableNames=["x","indices"],this.outputShape=n;const r=Yg(n.length);let o="\n    int index;";for(let i=0;i<this.sliceDim;i++)o+="\n          index = round(getIndices(coords[0], ".concat(i,"));\n          out_of_bounds = out_of_bounds || index < 0;\n          out_of_bounds = out_of_bounds || index >= ").concat(this.paramsShape[i],";\n          flattenIndex += index * ").concat(this.strides[i],";");this.userCode="\n         void main() {\n          ".concat(r," coords = getOutputCoords();\n          int flattenIndex = 0;\n          bool out_of_bounds = false;\n\n          ").concat(o,"\n\n          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));\n        }\n      ")}}const KS={kernelName:va,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{params:a,indices:r}=t,o=r.shape,i=o[o.length-1],s=It(a.shape),[c,u,l,d]=su(a,r),p=Lv({inputs:{x:r},backend:n,attrs:{shape:[u,i]}}),h=Lv({inputs:{x:a},backend:n,attrs:{shape:[It(a.shape)/l,l]}});if(n.shouldExecuteOnCPU([a,r])||"string"===a.dtype){const e=n.readSync(r.dataId),t=n.bufferSync(a),o=tx(e,t,a.dtype,u,i,l,d,a.shape,s);return n.makeTensorInfo(c,a.dtype,o.values)}const f=new jS(i,d,[u,l],a.shape),m=n.runWebGLProgram(f,[h,p],h.dtype),g=Lv({inputs:{x:m},backend:n,attrs:{shape:c}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),g}};class qS{constructor(e,t){this.variableNames=["A","indices"],this.outputShape=t,this.rank=t.length;const n=Yg(this.rank),a=function(e){const t=["resRC.x","resRC.y","resRC.z","resRC.w"],n=[];for(let a=0;a<e.length;a++)2===a?n.push("index"):n.push("".concat(t[a]));return n.join()}(e);this.userCode="\n      void main() {\n        ".concat(n," resRC = getOutputCoords();\n        int index = int(getIndices(resRC.x, resRC.z));\n        float inBounds = (index >= 0) && (index < ").concat(e[2],") ? 1.0 : 0.0;\n        setOutput(inBounds * getA(").concat(a,"));\n      }\n    ")}}function XS(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,indices:o}=t,{axis:i,batchDims:s}=a,c=Ft(i,r.shape)[0];if(nn().get("DEBUG")){const e=n.readSync(o.dataId),t=r.shape[c];for(let n=0;n<e.length;++n){const a=e[n];kt(a<=t-1&&a>=0,(()=>"GatherV2: the index value ".concat(a," is not in [0, ").concat(t-1,"]")))}}const u=Xm(r,o,c,s),l=It(o.shape),d=[],p=Lv({inputs:{x:r},backend:n,attrs:{shape:[u.batchSize,u.outerSize,u.dimSize,u.sliceSize]}}),h=Lv({inputs:{x:o},backend:n,attrs:{shape:[u.batchSize,l/u.batchSize]}});d.push(p),d.push(h);const f=[u.batchSize,u.outerSize,l/u.batchSize,u.sliceSize];if(n.shouldExecuteOnCPU([r,o])||"string"===r.dtype){const e=n.bufferSync(h),t=n.bufferSync(p),a=nx(t,e,f);return d.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(u.outputShape,a.dtype,a.values)}const m=new qS(p.shape,f),g=n.runWebGLProgram(m,[p,h],p.dtype);d.push(g);const y=Lv({inputs:{x:g},backend:n,attrs:{shape:u.outputShape}});return d.forEach((e=>n.disposeIntermediateTensorInfo(e))),y}const YS={kernelName:xa,backendName:"webgl",kernelFunc:XS},QS=Ev({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:ax,dtype:"bool"}),ZS={kernelName:wa,backendName:"webgl",kernelFunc:QS},$S=Ev({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool",cpuKernelImpl:rx}),JS={kernelName:ka,backendName:"webgl",kernelFunc:$S};const eC={kernelName:Ca,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:a}=t;return NS(a,!0,n)}},tC=_v({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),nC={kernelName:Na,backendName:"webgl",kernelFunc:tC},aC=_v({opSnippet:"return float(isinf(x));",dtype:"bool"}),rC={kernelName:Ta,backendName:"webgl",kernelFunc:aC},oC=_v({opSnippet:"return float(isnan(x));",dtype:"bool"}),iC={kernelName:_a,backendName:"webgl",kernelFunc:oC},sC=Ev({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:ox,dtype:"bool"}),cC={kernelName:Ra,backendName:"webgl",kernelFunc:sC},uC=Ev({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",cpuKernelImpl:ix,dtype:"bool"}),lC={kernelName:Aa,backendName:"webgl",kernelFunc:uC};const dC={kernelName:Oa,backendName:"webgl",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:a,stop:r,num:o}=n,i=sx(a,r,o);return t.makeTensorInfo([i.length],"float32",i)}},pC=_v({opSnippet:Tv+"\n  return x < 0.0 ? 0./0. : log(x);\n",packedOpSnippet:"\n  vec4 result = log(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);\n  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);\n  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);\n  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);\n  return result;\n",cpuKernelImpl:cx}),hC={kernelName:Fa,backendName:"webgl",kernelFunc:pC},fC=_v({opSnippet:Tv+"\n  return log(1.0 + x);\n"}),mC={kernelName:Da,backendName:"webgl",kernelFunc:fC},gC=Ev({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),yC={kernelName:Ma,backendName:"webgl",kernelFunc:gC},bC=_v({opSnippet:"return float(!(x >= 1.0));"}),xC={kernelName:Pa,backendName:"webgl",kernelFunc:bC},vC=Ev({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"}),wC={kernelName:La,backendName:"webgl",kernelFunc:vC};class kC{constructor(e,t,n,a,r){this.variableNames=["x"],this.outputShape=[];const o=t,i=e[3]-1;let s;this.outputShape=e;const c="float(".concat(n,") + float(").concat(a,") * sum");s=.5===r?"inversesqrt(".concat(c,")"):1===r?"1.0/(".concat(c,")"):"exp(log(".concat(c,") * float(-").concat(r,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -".concat(o,"; j <= ").concat(o,"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ").concat(i,") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ").concat(s,";\n        setOutput(val);\n      }\n    ")}}class SC{constructor(e,t,n,a,r){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const o=t,i=e[3]-1;let s;this.outputShape=e;const c="float(".concat(n,") + float(").concat(a,") * sum");s=.5===r?"inversesqrt(".concat(c,")"):1===r?"1.0/(".concat(c,")"):"exp(log(".concat(c,") * float(-").concat(r,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ".concat(this.outputShape[3],";\n        bool hasNextRow = c < ").concat(this.outputShape[2],";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ").concat(o,";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ").concat(o,"; j <= ").concat(o,"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(").concat(i,"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ").concat(s,";\n        setOutput(result);\n      }\n    ")}}const CC={kernelName:za,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{depthRadius:o,bias:i,alpha:s,beta:c}=a,u=nn().getBool("WEBGL_PACK_NORMALIZATION")?new SC(r.shape,o,i,s,c):new kC(r.shape,o,i,s,c);return n.runWebGLProgram(u,[r],r.dtype)}};class IC{constructor(e,t,n,a,r){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=a,this.beta=r,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ".concat(this.depth,"; ++d) {\n          int depthBegin = int(max(0.0, float(d - ").concat(t,")));\n          int depthEnd = int(min(float(").concat(this.depth,"),\n              float(d + ").concat(t," + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ").concat(this.depth,";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(").concat(a,") * norm + float(").concat(n,");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(").concat(a,")\n                * float(").concat(r,")\n                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ").concat(r,");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    ")}}const NC={kernelName:Ba,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:a}=e,{x:r,y:o,dy:i}=t,{depthRadius:s,bias:c,alpha:u,beta:l}=a,d=new IC(r.shape,s,c,u,l);return n.runWebGLProgram(d,[r,o,i],r.dtype)}};function TC(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{reductionIndices:o,keepDims:i}=a,s=r.shape.length,c=Ft(o,r.shape);let u=c;const l=nd(u,s),d=null!=l,p=n.shouldExecuteOnCPU([r]);let h=r;if(d){if(p){const e=n.texData.get(h.dataId).values,t=new Array(s);for(let n=0;n<t.length;n++)t[n]=r.shape[l[n]];const a=Lx(e,r.shape,r.dtype,l,t);h=n.makeTensorInfo(t,r.dtype);n.texData.get(h.dataId).values=a}else h=Hv(r,l,n);u=rd(u.length,s)}td("max",u,s);const[f,m]=Jl(h.shape,u);let g,y=f;if(i&&(y=ed(f,c)),p){const e=n.texData.get(h.dataId).values,t=ux(e,It(m),y,r.dtype);g=n.makeTensorInfo(y,r.dtype);n.texData.get(g.dataId).values=t}else g=function(e,t,n,a){const r=It(t),o=Lv({inputs:{x:e},attrs:{shape:[It(e.shape)/r,r]},backend:a}),i=Uv(o,e.dtype,"max",a),s=Lv({inputs:{x:i},attrs:{shape:n},backend:a});return a.disposeIntermediateTensorInfo(o),a.disposeIntermediateTensorInfo(i),s}(h,m,y,n);return d&&n.disposeIntermediateTensorInfo(h),g}const _C={kernelName:Wa,backendName:"webgl",kernelFunc:TC},EC=Ev({opSnippet:hv+"\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+mv+"\n  return result;\n",cpuKernelImpl:lx}),RC={kernelName:Ua,backendName:"webgl",kernelFunc:EC};const AC={kernelName:Va,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t;Ag(r,"maxPool");const{filterSize:o,strides:i,pad:s,dimRoundingMode:c}=a;kt(Ju(i,1),(()=>"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(1,"'")));const u=Gu(r.shape,o,i,1,s,c);if(1===u.filterWidth&&1===u.filterHeight&&Tt(u.inShape,u.outShape))return yv({inputs:{x:r},backend:n});const l=new Ew(u,"max",!1);return n.runWebGLProgram(l,[r],r.dtype)}};const OC={kernelName:Ha,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{filterSize:o,strides:i,pad:s,dataFormat:c,dimRoundingMode:u}=a,l=Hu(r.shape,o,i,[1,1,1],s,u,c),d=new Rw(l,"max",!1);return n.runWebGLProgram(d,[r],r.dtype)}};class FC{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.strideHeight,n=e.strideWidth,a=e.dilationHeight,r=e.effectiveFilterHeight,o=e.effectiveFilterWidth,i=r-1-e.padInfo.top,s=o-1-e.padInfo.left,c=r*o-1;this.userCode="\n      const ivec2 pads = ivec2(".concat(i,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(r,";\n          wR += ").concat(a,") {\n          float dyR = float(dyRCorner + wR) / ").concat(t,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(o,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(n,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ").concat(c," - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ").concat(o," + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class DC{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.strideDepth,n=e.strideHeight,a=e.strideWidth,r=e.dilationDepth,o=e.dilationHeight,i=e.dilationWidth,s=e.effectiveFilterDepth,c=e.effectiveFilterHeight,u=e.effectiveFilterWidth,l=s-1-e.padInfo.front,d=c-1-e.padInfo.top,p=u-1-e.padInfo.left,h=s*c*u-1;this.userCode="\n      const ivec3 pads = ivec3(".concat(l,", ").concat(d,", ").concat(p,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(s,";\n           wD += ").concat(r,") {\n          float dyD = float(dyDCorner + wD) / ").concat(t,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(e.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(c,";\n              wR += ").concat(o,") {\n            float dyR = float(dyRCorner + wR) / ").concat(n,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(u,";\n                wC += ").concat(i,") {\n              float dyC = float(dyCCorner + wC) / ").concat(a,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ").concat(h," -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ").concat(c," * ").concat(u," +\n                  wR * ").concat(u," + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}const MC={kernelName:ja,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:r,input:o}=t,i=o,{filterSize:s,strides:c,pad:u,dimRoundingMode:l}=a,d=Hu(i.shape,s,c,[1,1,1],u,l),p=new Rw(d,"max",!0),h=n.runWebGLProgram(p,[i],i.dtype),f=new DC(d),m=n.runWebGLProgram(f,[r,h],i.dtype);return n.disposeIntermediateTensorInfo(h),m}};const PC={kernelName:Ga,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:r,input:o,output:i}=t,s=o;Ag([o,i],"maxPoolGrad");const{filterSize:c,strides:u,pad:l,dimRoundingMode:d}=a,p=Gu(s.shape,c,u,1,l,d),h=new Ew(p,"max",!0),f=n.runWebGLProgram(h,[s],s.dtype),m=new FC(p),g=n.runWebGLProgram(m,[r,f],s.dtype);return n.disposeIntermediateTensorInfo(f),g}};const LC={kernelName:Ka,backendName:"webgl",kernelFunc:e=>{let{inputs:t,attrs:n,backend:a}=e;const{x:r}=t,{filterSize:o,strides:i,pad:s,includeBatchInIndex:c}=n,u=a;kt(4===r.shape.length,(()=>"Error in maxPool: input must be rank 4 but got rank ".concat(r.shape.length,".")));const l=[1,1];kt(Ju(i,l),(()=>"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(l,"'")));const d=Gu(r.shape,o,i,l,s),[p,h]=function(e,t,n,a){let r=new Ew(n,"max",!1);const o=a.runWebGLProgram(r,[e],"float32");return r=new Ew(n,"max",!0,!0,t),[o,a.runWebGLProgram(r,[e],"float32")]}(r,c,d,u);return[p,h]}};const zC={kernelName:qa,backendName:"webgl",kernelFunc:e=>{let{inputs:t,attrs:n,backend:a}=e;const{x:r}=t,{keepDims:o,axis:i}=n,s=a,c=r.shape.length,u=Ft(i,r.shape);let l=u;const d=nd(l,c),p=null!=d,h=s.shouldExecuteOnCPU([r]),f=[];let m=r;if(p){if(h){const e=s.texData.get(m.dataId).values,t=new Array(c);for(let a=0;a<t.length;a++)t[a]=r.shape[d[a]];const n=Lx(e,r.shape,r.dtype,d,t);m=s.makeTensorInfo(t,r.dtype);s.texData.get(m.dataId).values=n}else m=Hv(r,d,s);f.push(m),l=rd(l.length,c)}td("sum",l,c);const[g,y]=Jl(m.shape,l);let b=g;o&&(b=ed(g,u));const x=function(e,t,n,a){const r=It(t),o=Lv({inputs:{x:e},attrs:{shape:[It(e.shape)/r,r]},backend:a}),i=Uv(o,"float32","mean",a),s=Lv({inputs:{x:i},attrs:{shape:n},backend:a});return a.disposeIntermediateTensorInfo(o),a.disposeIntermediateTensorInfo(i),s}(m,y,b,s);for(const v of f)s.disposeIntermediateTensorInfo(v);return x}};const BC={kernelName:Xa,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:o,keepDims:i}=a,s=r.shape.length,c=Ft(o,r.shape);let u=c;const l=nd(u,s);let d=r;null!=l&&(d=qv({inputs:{x:r},backend:n,attrs:{perm:l}}),u=rd(u.length,r.shape.length)),td("min",u,s);const[p,h]=Jl(d.shape,u),f=Lv({inputs:{x:d},backend:n,attrs:{shape:[-1,It(h)]}}),m=Uv(f,f.dtype,"min",n);let g;if(i){g=Lv({inputs:{x:m},backend:n,attrs:{shape:ed(p,c)}})}else g=Lv({inputs:{x:m},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),null!=l&&n.disposeIntermediateTensorInfo(d),g}},WC=Ev({opSnippet:hv+"\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+mv+"\n  return result;\n",cpuKernelImpl:dx}),UC={kernelName:Ya,backendName:"webgl",kernelFunc:WC};class VC{constructor(e,t,n){this.variableNames=["x"],this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const a=e.length,r=Yg(a),o=t.map((e=>e[0])).join(","),i=t.map(((t,n)=>t[0]+e[n])).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a),c="reflect"===n?0:1;this.userCode=1!==a?"\n      ".concat(r," start = ").concat(r,"(").concat(o,");\n      ").concat(r," end = ").concat(r,"(").concat(i,");\n\n      void main() {\n        ").concat(r," outC = getOutputCoords();\n        for (int i = 0; i < ").concat(a,"; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ").concat(c,";\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ").concat(c,";\n          }\n        }\n        ").concat(r," coords = outC - start;\n        setOutput(getX(").concat(s,"));\n      }\n    "):"\n        int start = ".concat(o,";\n        int end = ").concat(i,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ").concat(c,";\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ").concat(c,";\n          }\n          setOutput(getX(outC - start));\n        }\n      ")}}class GC{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const a=e.length,r=Yg(a),o=t.map((e=>e[0])).join(","),i=t.map(((t,n)=>t[0]+e[n])).join(","),s=Wx("rc",a),c=Wx("source",a),u="".concat(s[a-1]," < ").concat(this.outputShape[a-1]),l=1===a?"source":"vec2(".concat(c.slice(-2).join(),")"),d="reflect"===n?0:1;let p="";if(1===a){const e="\n        ".concat(r," source = rc;\n        if (source < start) {\n          source = start * 2 - source - ").concat(d,";\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ").concat(d,";\n        }\n        source -= start;\n      ");p="\n        ".concat(r," rc = outputLoc;\n        ").concat(e,"\n        result[0] = getChannel(getX(").concat(c.join(),"), ").concat(l,");\n        ").concat(s[a-1]," += 1;\n        if(").concat(u,") {\n          ").concat(e,"\n          result[1] = getChannel(getX(").concat(c.join(),"), ").concat(l,");\n        }\n      ")}else{const e="\n        ".concat(r," source = rc;\n        ").concat(r," lt = ").concat(r,"(lessThan(source, start));\n        ").concat(r," gte = ").concat(r,"(greaterThanEqual(source, end));\n        ").concat(r," orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ").concat(d,") +\n                gte * ((end - 1) * 2 - source + ").concat(d,");\n        source -= start;\n      ");p="\n        ".concat(r," rc = outputLoc;\n        ").concat(e,"\n        result[0] = getChannel(getX(").concat(c.join(),"), ").concat(l,");\n        ").concat(s[a-1]," += 1;\n        if(").concat(u,") {\n          ").concat(e,"\n          result[1] = getChannel(getX(").concat(c.join(),"), ").concat(l,");\n        }\n        rc = outputLoc;\n        ").concat(s[a-2]," += 1;\n        if(").concat(s[a-2]," < ").concat(this.outputShape[a-2],") {\n          ").concat(e,"\n          result[2] = getChannel(getX(").concat(c.join(),"), ").concat(l,");\n          ").concat(s[a-1]," += 1;\n          if(").concat(u,") {\n            ").concat(e,"\n            result[3] = getChannel(getX(").concat(c.join(),"), ").concat(l,");\n          }\n        }\n      ")}this.userCode="\n      const ".concat(r," start = ").concat(r,"(").concat(o,");\n      const ").concat(r," end = ").concat(r,"(").concat(i,");\n\n      void main() {\n        ").concat(r," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(p,"\n        setOutput(result);\n      }\n    ")}}const HC={kernelName:Qa,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n,attrs:a}=e;const{x:r}=t,{paddings:o,mode:i}=a,s=nn().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new GC(r.shape,o,i):new VC(r.shape,o,i);return n.runWebGLProgram(s,[r],r.dtype)}},jC=Ev({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  bvec4 isNaN = equal(b, vec4(0.0));\n  "+mv+"\n  return result;\n"}),KC={kernelName:Za,backendName:"webgl",kernelFunc:jC};class qC{constructor(e,t,n){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,n],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ".concat(t-1,"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(").concat(t-1,"));\n      }\n    ")}}const XC=Ev({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),YC={kernelName:ra,backendName:"webgl",kernelFunc:XC},QC="return a - b;",ZC=Ev({opSnippet:QC,packedOpSnippet:QC,supportsComplex:!0,cpuKernelImpl:Dx}),$C={kernelName:no,backendName:"webgl",kernelFunc:ZC};function JC(e){const{inputs:t,backend:n,attrs:a}=e,{logits:r}=t,{dim:o}=a,i=Ft([o],r.shape),s=TC({inputs:{x:r},backend:n,attrs:{reductionIndices:i,keepDims:!1}}),c=ed(s.shape,i),u=Lv({inputs:{x:s},backend:n,attrs:{shape:c}}),l=ZC({inputs:{a:r,b:u},backend:n}),d=bS({inputs:{x:l},backend:n}),p=jv({inputs:{x:d},backend:n,attrs:{axis:i,keepDims:!1}}),h=Lv({inputs:{x:p},backend:n,attrs:{shape:c}}),f=XC({inputs:{a:d,b:h},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),f}const eI={kernelName:Gr,backendName:"webgl",kernelFunc:JC};const tI={kernelName:$a,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{logits:r}=t,{numSamples:o,seed:i,normalized:s}=a,c=s?r:JC({inputs:{logits:r},backend:n,attrs:{dim:r.shape.length-1}}),u=c.shape[0],l=c.shape[1],d=new qC(u,l,o),p=[[i]],h=n.runWebGLProgram(d,[c],"int32",p);return s||n.disposeIntermediateTensorInfo(c),h}},nI=Xx+"\n  return -x;\n";const aI={kernelName:er,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:a}=t;if(n.shouldExecuteOnCPU([a])){const e=n.texData.get(a.dataId),[t,r]=hx(e.values,a.shape,a.dtype);return n.makeTensorInfo(r,a.dtype,t)}let r;return r=nn().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new sv(a.shape,"\n  vec4 result = -x;\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"):new qx(a.shape,nI),n.runWebGLProgram(r,[a],a.dtype)}},rI=nf;const oI={kernelName:nr,backendName:"webgl",kernelFunc:function(e){vo("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:a}=e,{boxes:r,scores:o}=t,{maxOutputSize:i,iouThreshold:s,scoreThreshold:c}=a,u=n.readSync(r.dataId),l=n.readSync(o.dataId),{selectedIndices:d}=rI(u,l,i,s,c);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}},iI=af;const sI={kernelName:ar,backendName:"webgl",kernelFunc:function(e){vo("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:a}=e,{boxes:r,scores:o}=t,{maxOutputSize:i,iouThreshold:s,scoreThreshold:c,padToMaxOutputSize:u}=a,l=n.readSync(r.dataId),d=n.readSync(o.dataId),{selectedIndices:p,validOutputs:h}=iI(l,d,i,s,c,u);return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}},cI=rf;const uI={kernelName:rr,backendName:"webgl",kernelFunc:function(e){vo("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:a}=e,{boxes:r,scores:o}=t,{maxOutputSize:i,iouThreshold:s,scoreThreshold:c,softNmsSigma:u}=a,l=n.readSync(r.dataId),d=n.readSync(o.dataId),p=i,h=s,f=c,m=u,{selectedIndices:g,selectedScores:y}=cI(l,d,p,h,f,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([y.length],"float32",new Float32Array(y))]}};class lI{constructor(e,t,n,a){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(".concat(a,"), float(").concat(n,"),\n                      float(index == coords.y)));\n      }\n    ")}}const dI={kernelName:ir,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:a}=e,{indices:r}=t,{dtype:o,depth:i,onValue:s,offValue:c}=a,u=It(r.shape),l=new lI(u,i,s,c),d=Lv({inputs:{x:r},backend:n,attrs:{shape:[u]}}),p=n.runWebGLProgram(l,[d],o);n.disposeIntermediateTensorInfo(d);const h=Lv({inputs:{x:p},backend:n,attrs:{shape:[...r.shape,i]}});return n.disposeIntermediateTensorInfo(p),h}};function pI(e){const{inputs:t,backend:n}=e,{x:a}=t;if("complex64"===a.dtype){const e=$w({inputs:{input:a},backend:n}),t=pI({inputs:{x:e},backend:n}),r=fk({inputs:{input:a},backend:n}),o=pI({inputs:{x:r},backend:n}),i=xv({inputs:{real:t,imag:o},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(o),i}return ES({attrs:{shape:a.shape,dtype:a.dtype,value:"string"===a.dtype?"":0},backend:n})}const hI={kernelName:ho,backendName:"webgl",kernelFunc:pI};const fI={kernelName:or,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:a}=t,{x:r}=n;if("string"===r.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===r.dtype){const t=$w({inputs:{input:r},backend:a}),n=e({inputs:{x:t},backend:a}),o=fk({inputs:{input:r},backend:a}),i=pI({inputs:{x:o},backend:a}),s=xv({inputs:{real:n,imag:i},backend:a});return a.disposeIntermediateTensorInfo(t),a.disposeIntermediateTensorInfo(n),a.disposeIntermediateTensorInfo(o),a.disposeIntermediateTensorInfo(i),s}return ES({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:a})}};const mI={kernelName:sr,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{axis:r}=a;if(1===t.length)return vS({inputs:{input:t[0]},backend:n,attrs:{dim:r}});const o=t[0].shape,i=t[0].dtype;t.forEach((e=>{St(o,e.shape,"All tensors passed to stack must have matching shapes"),kt(i===e.dtype,(()=>"All tensors passed to stack must have matching dtypes"))}));const s=[],c=yk({inputs:t.map((e=>{const t=vS({inputs:{input:e},backend:n,attrs:{dim:r}});return s.push(t),t})),backend:n,attrs:{axis:r}});return s.forEach((e=>n.disposeIntermediateTensorInfo(e))),c}};class gI{constructor(e,t,n){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const a=e.length,r=Yg(a),o=t.map((e=>e[0])).join(","),i=t.map(((t,n)=>t[0]+e[n])).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a);this.userCode=1!==a?"\n      ".concat(r," start = ").concat(r,"(").concat(o,");\n      ").concat(r," end = ").concat(r,"(").concat(i,");\n\n      void main() {\n        ").concat(r," outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ").concat(r," coords = outC - start;\n          setOutput(getX(").concat(s,"));\n        }\n      }\n    "):"\n        int start = ".concat(o,";\n        int end = ").concat(i,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      ")}}class yI{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const a=e.length,r=Yg(a),o=t.map((e=>e[0])).join(","),i=t.map(((t,n)=>t[0]+e[n])).join(","),s=Wx("rc",a),c=Wx("source",a),u="".concat(s[a-1]," < ").concat(this.outputShape[a-1]),l=1===a?"source":"vec2(".concat(c.slice(-2).join(),")"),d=["".concat(r," rc = outputLoc;"),"".concat(s[a-1]," += 1;\n       if(").concat(u,") {\n      "),1===a?"":"}\n       rc = outputLoc;\n       ".concat(s[a-2]," += 1;\n       if(").concat(s[a-2]," < ").concat(this.outputShape[a-2],") {"),1===a?"":"  ".concat(s[a-1]," += 1;\n         if(").concat(u,") {")],p=1===a?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let h="";for(let f=0,m=1===a?2:4;f<m;f++)h+="\n        ".concat(d[f],"\n        if (").concat(p,") {\n          result[").concat(f,"] = float(value);\n        } else {\n          ").concat(r," source = rc - start;\n          result[").concat(f,"] = getChannel(getX(").concat(c.join(),"), ").concat(l,");\n        }\n      ");h+=1===a?"} ":"}}",this.userCode="\n      const ".concat(r," start = ").concat(r,"(").concat(o,");\n      const ").concat(r," end = ").concat(r,"(").concat(i,");\n\n      void main() {\n        ").concat(r," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(h,"\n        setOutput(result);\n      }\n    ")}}const bI=e=>{const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{paddings:o,constantValue:i}=a;if(0===It(r.shape)){return ES({backend:n,attrs:{shape:o.map(((e,t)=>e[0]+r.shape[t]+e[1])),value:i,dtype:r.dtype}})}const s=nn().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new yI(r.shape,o,i):new gI(r.shape,o,i),c=[[i]];return n.runWebGLProgram(s,[r],r.dtype,c)},xI={kernelName:cr,backendName:"webgl",kernelFunc:bI},vI=Ev({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  bvec4 isNaN1 = lessThan(a, vec4(0.0));\n  bvec4 isNaN2 = lessThan(floor(b), b);\n  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);\n  "+mv+"\n  return result;\n"}),wI={kernelName:ur,backendName:"webgl",kernelFunc:vI};const kI={kernelName:dr,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:o,keepDims:i}=a,s=r.shape.length,c=[],u=Ft(o,r.shape);let l=u;const d=nd(l,s);let p,h=r;if(null!=d&&(h=qv({inputs:{x:r},backend:n,attrs:{perm:d}}),l=rd(l.length,s),c.push(h)),td("prod",l,s),n.shouldExecuteOnCPU([h])){const e=n.texData.get(h.dataId).values,{outVals:t,outShape:a,outDtype:r}=mx(h.shape,h.dtype,e,l);p=n.makeTensorInfo(a,r,t)}else{const[e,t]=Jl(h.shape,l),a=It(t),o=Lv({inputs:{x:h},backend:n,attrs:{shape:[-1,a]}}),i=Uv(o,ki(r.dtype),"prod",n);p=Lv({inputs:{x:i},backend:n,attrs:{shape:e}}),c.push(o),c.push(i)}if(i){c.push(p);const e=ed(p.shape,u);p=Lv({inputs:{x:p},backend:n,attrs:{shape:e}})}return c.forEach((e=>n.disposeIntermediateTensorInfo(e))),p}};const SI={kernelName:pr,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{paramsNestedSplits:r,paramsDenseValues:o,indices:i}=t,{outputRaggedRank:s}=a,c=r.map((e=>n.readSync(e.dataId))),u=r.map((e=>e.shape)),l=n.readSync(o.dataId),d=n.readSync(i.dataId),[p,h,f]=gx(c,u,l,o.shape,o.dtype,d,i.shape,s),m=p.map((e=>n.makeTensorInfo([e.length],"int32",e))),g=n.makeTensorInfo(f,o.dtype,h);return m.concat([g])}};const CI={kernelName:hr,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{starts:a,limits:r,deltas:o}=t,i=n.readSync(a.dataId),s=n.readSync(r.dataId),c=n.readSync(o.dataId),[u,l]=yx(i,a.shape,a.dtype,s,r.shape,c,o.shape);return[n.makeTensorInfo([u.length],"int32",u),n.makeTensorInfo([l.length],a.dtype,l)]}};const II={kernelName:fr,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{shape:r,values:o,defaultValue:i,rowPartitionTensors:s}=t,{rowPartitionTypes:c}=a,u=n.readSync(r.dataId),l=n.readSync(o.dataId),d=n.readSync(i.dataId),p=s.map((e=>n.readSync(e.dataId))),h=s.map((e=>e.shape)),[f,m]=bx(u,r.shape,l,o.shape,o.dtype,d,i.shape,p,h,c);return n.makeTensorInfo(f,o.dtype,m)}},NI=e=>{const{backend:t,attrs:n}=e,{start:a,stop:r,step:o,dtype:i}=n,s=xx(a,r,o,i);return t.makeTensorInfo([s.length],i,s)},TI={kernelName:mr,backendName:"webgl",kernelFunc:NI},_I=_v({opSnippet:"return 1.0 / x;"}),EI={kernelName:yr,backendName:"webgl",kernelFunc:_I},RI=_v({opSnippet:Xx+"\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),AI={kernelName:br,backendName:"webgl",kernelFunc:RI},OI=_v({opSnippet:Xx+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),FI={kernelName:Cr,backendName:"webgl",kernelFunc:OI};class DI{constructor(e,t,n,a,r){this.variableNames=["A"],this.outputShape=[];const[o,i,s,c]=e;this.outputShape=[o,t,n,c];const u=[a&&t>1?i-1:i,a&&n>1?s-1:s],l=[a&&t>1?t-1:t,a&&n>1?n-1:n];let d;d=r?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(u[0]/l[0],",\n          ").concat(u[1]/l[1],");\n      const vec2 inputShapeRC = vec2(").concat(i,".0, ").concat(s,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    ")}}class MI{constructor(e,t,n,a,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,i,s,c]=e;this.outputShape=[o,t,n,c];const u=[a&&t>1?i-1:i,a&&n>1?s-1:s],l=[a&&t>1?t-1:t,a&&n>1?n-1:n];let d;d=r?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(u[0]/l[0],",\n          ").concat(u[1]/l[1],",\n          ").concat(u[1]/l[1],");\n      const vec3 inputShapeRC = vec3(").concat(i,".0, ").concat(s,".0,\n                                     ").concat(s,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(c-1,";\n        bool hasNextRow = coords.z < ").concat(n-1,";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    ")}}const PI={kernelName:kr,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{images:r}=t,{alignCorners:o,halfPixelCenters:i,size:s}=a,[c,u]=s,l=nn().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new MI(r.shape,c,u,o,i):new DI(r.shape,c,u,o,i);return n.runWebGLProgram(l,[r],"float32")}};class LI{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,a,r]=t,[,o,i]=e,s=[n&&o>1?a-1:a,n&&i>1?r-1:r],c=[n&&o>1?o-1:o,n&&i>1?i-1:i],u=s[0]/c[0],l=s[1]/c[1],d=1/u,p=1/l,h=2*Math.ceil(d)+2,f=2*Math.ceil(p)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(u,");\n        const float widthScale = float(").concat(l,");\n\n        const float invHeightScale = float(").concat(d,");\n        const float invWidthScale = float(").concat(p,");\n\n        const int winHeight = int(").concat(h,");\n        const int winWidth = int(").concat(f,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(o,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(i,") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ").concat(a-1,".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ").concat(r-1,".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}}const zI={kernelName:Sr,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{images:r,dy:o}=t,{alignCorners:i}=a,s=new LI(o.shape,r.shape,i);return n.runWebGLProgram(s,[o],o.dtype)}};class BI{constructor(e,t,n,a,r){this.variableNames=["A"],this.outputShape=[];const[o,i,s,c]=e;this.outputShape=[o,t,n,c];const u=[a&&t>1?i-1:i,a&&n>1?s-1:s],l=[a&&t>1?t-1:t,a&&n>1?n-1:n],d=a?"0.5":"0.0";let p;p=r?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(u[0]/l[0],",\n          ").concat(u[1]/l[1],");\n      const vec2 inputShapeRC = vec2(").concat(i,".0, ").concat(s,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(p,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(d,")));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    ")}}class WI{constructor(e,t,n,a,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,i,s,c]=e;this.outputShape=[o,t,n,c];const u=[a&&t>1?i-1:i,a&&n>1?s-1:s],l=[a&&t>1?t-1:t,a&&n>1?n-1:n],d=a?"0.5":"0.0";let p;p=r?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(u[0]/l[0],",\n          ").concat(u[1]/l[1],",\n          ").concat(u[1]/l[1],");\n      const vec3 inputShapeRC = vec3(").concat(i,".0, ").concat(s,".0,\n                                     ").concat(s,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(p,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(d,")));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(c-1,";\n        bool hasNextRow = coords.z < ").concat(n-1,";\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    ")}}const UI={kernelName:vr,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{images:r}=t,{alignCorners:o,halfPixelCenters:i,size:s}=a,[c,u]=s,l=nn().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new WI(r.shape,c,u,o,i):new BI(r.shape,c,u,o,i);return n.runWebGLProgram(l,[r],r.dtype)}};class VI{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,a,r]=t,[,o,i]=e,s=[n&&o>1?a-1:a,n&&i>1?r-1:r],c=[n&&o>1?o-1:o,n&&i>1?i-1:i],u=s[0]/c[0],l=s[1]/c[1],d=1/u,p=1/l,h=2*Math.ceil(d)+2,f=2*Math.ceil(p)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(u,");\n        const float widthScale = float(").concat(l,");\n\n        const float invHeightScale = float(").concat(d,");\n        const float invWidthScale = float(").concat(p,");\n\n        const int winHeight = int(").concat(h,");\n        const int winWidth = int(").concat(f,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(o,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(i,") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(").concat(s[0],") *\n                (float(dyR) / float(").concat(c[0],"));\n\n            float sourceFracCol =\n                float(").concat(s[1],") *\n                  (float(dyC) / float(").concat(c[1],"));\n\n            int sourceNearestRow = int(min(\n                float(int(").concat(a,") - 1),\n                ").concat(n," ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(").concat(r,") - 1),\n                ").concat(n," ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}}const GI={kernelName:wr,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{images:r,dy:o}=t,{alignCorners:i}=a,s=new VI(o.shape,r.shape,i);return n.runWebGLProgram(s,[o],o.dtype)}};class HI{constructor(e,t){this.variableNames=["x"];const n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-".concat(n," tensor is not yet supported"));if(this.outputShape=e,1===n)return void(this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(".concat(e[0]," - coord - 1));\n        }\n      "));const a=e.map(((n,a)=>(n=>-1!==t.indexOf(n)&&1!==e[n]?"".concat(e[n]," - coords[").concat(n,"] - 1"):"coords[".concat(n,"]"))(a))).join(","),r=Yg(n);this.userCode="\n      void main() {\n        ".concat(r," coords = getOutputCoords();\n        setOutput(getX(").concat(a,"));\n      }\n    ")}}class jI{constructor(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-".concat(n," tensor is not yet supported"));this.outputShape=e;const a=Wx("rc",n),r="".concat(a[n-1]," + 1 < ").concat(this.outputShape[n-1]),o="".concat(a[n-2]," + 1 < ").concat(this.outputShape[n-2]),i=Yg(n);function s(n){const a=e.map(((a,r)=>function(n,a){return-1!==t.indexOf(n)&&1!==e[n]?"".concat(e[n]," - ").concat(a[n]," - 1"):"".concat(a[n])}(r,n))),r=a.join(","),o=a.slice(-2).join(",");return"getChannel(getX(".concat(r,"), vec2(").concat(o,"))")}this.userCode=1===n?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(".concat(e[0]," - rc - 1),\n            ").concat(e[0]," - rc - 1);\n          if(").concat(r,"){\n              result.g = getChannel(getX(").concat(e[0]," - (rc  + 1) - 1),\n                ").concat(e[0]," - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      "):"\n        void main() {\n          ".concat(i," rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ").concat(function(e){return s(e)}(a.slice()),";\n          if(").concat(r,"){\n            result.g = ").concat(function(e){return e[n-1]="("+e[n-1]+" + 1)",s(e)}(a.slice()),";\n          }\n          if(").concat(o,") {\n            result.b = ").concat(function(e){return e[n-2]="("+e[n-2]+" + 1)",s(e)}(a.slice()),";\n            if(").concat(r,") {\n              result.a = ").concat(function(e){return e[n-1]="("+e[n-1]+" + 1)",e[n-2]="("+e[n-2]+" + 1)",s(e)}(a.slice()),";\n            }\n          }\n          setOutput(result);\n        }\n    ")}}const KI={kernelName:Ir,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{dims:o}=a,i=r.shape.length,s=Ft(o,r.shape);if(0===i)return yv({inputs:{x:r},backend:n});const c=nn().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new jI(r.shape,s):new HI(r.shape,s);return n.runWebGLProgram(c,[r],r.dtype)}};class qI{constructor(e,t){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const n=e[1],a=e[2];this.outputShape=e;let r="";r="number"===typeof t?"float outputValue = ".concat(t.toFixed(2),";"):"\n        vec3 fill = vec3(".concat(t.join(","),");\n        float outputValue = fill[coords[3]];"),this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ".concat(r,"\n          if(coordX >= 0 && coordX < ").concat(a," && coordY >= 0 && coordY < ").concat(n,") {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")}}const XI={kernelName:go,backendName:"webgl",kernelFunc:e=>{let{inputs:t,attrs:n,backend:a}=e;const{image:r}=t,{radians:o,fillValue:i,center:s}=n,c=a,u=new qI(r.shape,i),[l,d]=tm(s,r.shape[1],r.shape[2]),p=[[l,d,Math.sin(o),Math.cos(o)]];return c.runWebGLProgram(u,[r],r.dtype,p)}},YI=_v({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"}),QI={kernelName:Nr,backendName:"webgl",kernelFunc:YI},ZI=_v({opSnippet:"return inversesqrt(x);",cpuKernelImpl:vx}),$I={kernelName:Tr,backendName:"webgl",kernelFunc:ZI};class JI{constructor(e,t,n,a,r,o){let i=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;const s=Yg(r.length),c=Yg(o.length);let u="";1===n?u="i":2===n&&(u="i, j");const l="getIndices(".concat(u,")");let d="";1===a?d="i":2===a&&(d="i, coords[1]");const p="getUpdates(".concat(d,")");let h="";i&&(h="coords[0], coords[1]");const f="getDefaultValue(".concat(h,")"),m=t>1?"strides[j]":"strides";this.userCode="\n        ".concat(s," strides = ").concat(s,"(").concat(r,");\n\n        void main() {\n          ").concat(c," coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ").concat(e,"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ").concat(t,"; j++) {\n              int index = round(").concat(l,");\n              flattenedIndex += index * ").concat(m,";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ").concat(p,";\n              found = true;\n            }\n          }\n          setOutput(mix(").concat(f,", sum, float(found)));\n        }\n      ")}}class eN{constructor(e,t,n,a,r,o){let i=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=o;const s=Yg(r.length),c=Yg(o.length);let u="";1===n?u="i":2===n&&(u="i, j");const l="getIndices(".concat(u,")");let d="";1===a?d="i":2===a&&(d="i, coords[1]");const p="getUpdates(".concat(d,")");let h="";i&&(h="coords[0], coords[1]");const f="getDefaultValue(".concat(h,")"),m=t>1?"strides[j]":"strides",g=t>1?"strides[j + 1]":"strides";this.userCode="\n        ".concat(s," strides = ").concat(s,"(").concat(r,");\n\n        void main() {\n          ").concat(c," coords = getOutputCoords();\n          vec4 sum = vec4(0.);\n          vec4 found = vec4(0.);\n          for (int i = 0; i < ").concat(e,"; i+=2) {\n            ivec2 flattenedIndex = ivec2(0);\n            for (int j = 0; j < ").concat(t,"; j+=2) {\n              ivec4 index = round(").concat(l,");\n              flattenedIndex += index.xz * ").concat(m,";\n              if (j + 1 < ").concat(t,") {\n                flattenedIndex += index.yw * ").concat(g,";\n              }\n            }\n            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||\n                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {\n              vec4 updVals = ").concat(p,";\n              if (flattenedIndex[0] == coords[0]) {\n                sum.xy += updVals.xy;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[0] == coords[0] + 1) {\n                sum.zw += updVals.xy;\n                found.zw = vec2(1.);\n              }\n              if (flattenedIndex[1] == coords[0]) {\n                sum.xy += updVals.zw;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[1] == coords[0] + 1) {\n                sum.zw += updVals.zw;\n                found.zw = vec2(1.);\n              }\n            }\n          }\n          setOutput(mix(").concat(f,", sum, found));\n        }\n      ")}}const tN={kernelName:_r,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{indices:r,updates:o}=t,{shape:i}=a,{sliceRank:s,numUpdates:c,sliceSize:u,strides:l,outputSize:d}=lu(0,r,i),p=[d/u,u];if(0===d)return n.makeTensorInfo(i,r.dtype);const h=Lv({inputs:{x:r},backend:n,attrs:{shape:[c,s]}}),f=Lv({inputs:{x:o},backend:n,attrs:{shape:[c,u]}}),m=n.makeTensorInfo([],"float32",new Float32Array([0]));let g;g=nn().getBool("WEBGL_PACK")?new eN(c,s,h.shape.length,f.shape.length,l,p):new JI(c,s,h.shape.length,f.shape.length,l,p);const y=n.runWebGLProgram(g,[f,h,m],f.dtype),b=Lv({inputs:{x:y},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(m),b}};class nN{constructor(e,t,n,a){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,n];const r="for (int i = 0; i < ".concat(Math.ceil(Math.log2(t+1)),"; ++i) { if (left >= right) break;"),o=2===nn().getNumber("WEBGL_VERSION")?"while (left < right) {":r,i="left"===a?"<":"<=";this.userCode="\n       int findBound(int batch, float value) {\n         int left = 0;\n         int right = numInputs;\n         int mid;\n         ".concat(o,"\n           mid = (left + right) / 2;\n           if (getSortedSequence(batch, mid) ").concat(i," value) {\n             left = mid + 1;\n           } else {\n             right = mid;\n           }\n         }\n         return right;\n       }\n\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int valueIndex = coords[1];\n\n         float value = getValues(batch, valueIndex);\n\n         setOutput(float(findBound(batch, value)));\n       }\n     ")}}const aN={kernelName:Rr,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{sortedSequence:r,values:o}=t,{side:i}=a,s=new nN(r.shape[0],r.shape[1],o.shape[1],i),c=[[r.shape[1]]];return n.runWebGLProgram(s,[r,o],"int32",c)}};class rN{constructor(e,t,n){let a,r;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error("Where for rank ".concat(n," is not yet supported"));if(1===n)r="resRC",a="resRC";else{const n=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],i=[];for(let a=0;a<t.length;a++)i.push("".concat(n[a])),a<e&&o.push("".concat(n[a]));a=o.join(),r=i.join()}const o=Yg(n);this.userCode="\n      void main() {\n        ".concat(o," resRC = getOutputCoords();\n        float cVal = getC(").concat(a,");\n        if (cVal >= 1.0) {\n          setOutput(getA(").concat(r,"));\n        } else {\n          setOutput(getB(").concat(r,"));\n        }\n      }\n    ")}}const oN={kernelName:Ar,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{condition:a,t:r,e:o}=t,i=new rN(a.shape.length,r.shape,r.shape.length);return n.runWebGLProgram(i,[a,r,o],wi(r.dtype,o.dtype))}},iN=_v({opSnippet:"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ".concat(sm,";\n  float scale = ").concat(cm,";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n")}),sN={kernelName:Or,backendName:"webgl",kernelFunc:iN},cN=_v({opSnippet:Tv+"\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",packedOpSnippet:"\n  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:kx}),uN={kernelName:Lr,backendName:"webgl",kernelFunc:cN},lN=_v({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"}),dN={kernelName:Pr,backendName:"webgl",kernelFunc:lN},pN=_v({opSnippet:Tv+"\n  return sin(x);\n",packedOpSnippet:"\n  vec4 result = sin(x);\n  bvec4 isNaN = isnan(x);\n  ".concat(mv,"\n  return result;\n")}),hN={kernelName:Dr,backendName:"webgl",kernelFunc:pN},fN=_v({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"}),mN={kernelName:Mr,backendName:"webgl",kernelFunc:fN},gN=_v({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"}),yN={kernelName:zr,backendName:"webgl",kernelFunc:gN},bN={kernelName:Ur,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{blockShape:o,paddings:i}=a;kt(r.shape.length<=4,(()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"));const s=o.reduce(((e,t)=>e*t)),c=[[0,0]];c.push(...i);for(let y=1+o.length;y<r.shape.length;++y)c.push([0,0]);const u=[],l=bI({inputs:{x:r},backend:n,attrs:{paddings:c,constantValue:0}}),d=nm(l.shape,o,s,!1),p=am(d.length,o.length,!1),h=rm(l.shape,o,s,!1),f=Lv({inputs:{x:l},backend:n,attrs:{shape:d}}),m=qv({inputs:{x:f},backend:n,attrs:{perm:p}}),g=Lv({inputs:{x:m},backend:n,attrs:{shape:h}});return u.push(l),u.push(f),u.push(m),u.forEach((e=>n.disposeIntermediateTensorInfo(e))),g}};const xN={kernelName:Hr,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{indices:a,values:r,denseShape:o,defaultValue:i}=t;if(1!==o.shape.length)throw new Error("Dense shape must be a vector, saw:\n         ".concat(o.shape));if(2!==a.shape.length)throw new Error("Indices must be a matrix, saw:\n         ".concat(a.shape));if(1!==r.shape.length)throw new Error("Values must be a vector, saw:\n         ".concat(r.shape));if(0!==i.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(i.shape));const s=n.readSync(a.dataId),c=n.readSync(r.dataId),u=n.readSync(o.dataId),l=n.readSync(i.dataId)[0],[d,p,h,f,m]=Ix(s,a.shape,a.dtype,c,r.dtype,u,l);return[n.makeTensorInfo(p,a.dtype,d),n.makeTensorInfo([p[0]],r.dtype,h),n.makeTensorInfo([f.length],"bool",new Uint8Array(f.map((e=>Number(e))))),n.makeTensorInfo([m.length],a.dtype,new Int32Array(m))]}};const vN={kernelName:jr,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{inputIndices:a,inputShape:r,newShape:o}=t;if(2!==a.shape.length)throw new Error("Input indices should be a matrix but received shape ".concat(a.shape));if(1!==r.shape.length)throw new Error("Input shape should be a vector but received shape ".concat(r.shape));if(1!==o.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(o.shape));const i=Array.from(n.readSync(r.dataId)),s=n.readSync(a.dataId),c=Array.from(n.readSync(o.dataId)),[u,l,d]=Nx(s,a.shape,a.dtype,i,c);return[n.makeTensorInfo(l,a.dtype,u),n.makeTensorInfo([d.length],o.dtype,new Int32Array(d))]}};const wN={kernelName:Kr,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:a,indices:r,segmentIds:o}=t;if(a.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==r.shape.length)throw new Error("Indices should be a vector but received shape\n              ".concat(r.shape));if(1!==o.shape.length)throw new Error("Segment ids should be a vector but received shape\n              ".concat(o.shape));const i=n.readSync(a.dataId),s=n.readSync(r.dataId),c=n.readSync(o.dataId),[u,l]=Tx(i,a.shape,a.dtype,s,c,!0);return n.makeTensorInfo(l,a.dtype,u)}};const kN={kernelName:qr,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:a,indices:r,segmentIds:o}=t;if(a.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==r.shape.length)throw new Error("Indices should be a vector but received shape\n             ".concat(r.shape));if(1!==o.shape.length)throw new Error("Segment ids should be a vector but received shape\n             ".concat(o.shape));const i=n.readSync(a.dataId),s=n.readSync(r.dataId),c=n.readSync(o.dataId),[u,l]=Tx(i,a.shape,a.dtype,s,c);return n.makeTensorInfo(l,a.dtype,u)}};const SN={kernelName:Xr,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{sparseIndices:r,sparseValues:o,defaultValue:i}=t,{outputShape:s}=a,{sliceRank:c,numUpdates:u,sliceSize:l,strides:d,outputSize:p}=lu(0,r,s),h=!1;if("string"===o.dtype){const e=n.bufferSync(r),t=n.bufferSync(o),a=Xo(n.readSync(i.dataId)[0]),f=wx(e,t,s,p,l,u,c,d,a,h);return n.makeTensorInfo(s,f.dtype,f.values)}const f=new JI(u,c,r.shape.length,o.shape.length,d,[p,1],h),m=n.runWebGLProgram(f,[o,r,i],o.dtype),g=Lv({inputs:{x:m},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(m),g}};const CN={kernelName:Vr,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{numOrSizeSplits:o,axis:i}=a,s=Ft(i,r.shape)[0],c=Fm(r,o,s),u=r.shape.length,l=new Array(u).fill(0),d=r.shape.slice();return c.map((e=>{const t=[...d];t[s]=e;const a=Hw({inputs:{x:r},backend:n,attrs:{begin:l,size:t}});return l[s]+=e,a}))}},IN="return sqrt(x);",NN=_v({opSnippet:IN,packedOpSnippet:IN,cpuKernelImpl:_x}),TN={kernelName:Br,backendName:"webgl",kernelFunc:NN},_N={kernelName:Qr,backendName:"webgl",kernelFunc:_v({opSnippet:"return x * x;"})},EN="return (a - b) * (a - b);",RN=Ev({opSnippet:EN,packedOpSnippet:EN}),AN={kernelName:Yr,backendName:"webgl",kernelFunc:RN};const ON={kernelName:Zr,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t;if("string"!==r.dtype)throw new Error("Input must be of datatype string");const o=Ym(n.readSync(r.dataId)),i=Ex(o,"string",a);return n.makeTensorInfo(r.shape,"string",i)}};const FN={kernelName:fo,backendName:"webgl",kernelFunc:function(e){let{inputs:t,attrs:n,backend:a}=e;const{x:r}=t,o=Xx+"\n    return x > 0.0 ? 1.0 : float(".concat(n.alpha,");\n  "),i=new qx(r.shape,o);return a.runWebGLProgram(i,[r],r.dtype)}};class DN{constructor(e,t,n){this.variableNames=["x"],this.outputShape=n;const a=n.length,r=Yg(n.length),o=Yg(n.length);let i="";if(1===a)i="coords * strides + begin";else{let e=0;i=n.map(((t,a)=>(e++,1===n.length?"coords * strides[".concat(a,"] + begin[").concat(a,"]"):"coords[".concat(e-1,"] * strides[").concat(a,"] + begin[").concat(a,"]")))).join(",")}this.userCode="\n      ".concat(r," begin = ").concat(r,"(").concat(e,");\n      ").concat(r," strides = ").concat(r,"(").concat(t,");\n\n      void main() {\n        ").concat(o," coords = getOutputCoords();\n        setOutput(getX(").concat(i,"));\n      }\n    ")}}const MN={kernelName:$r,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{begin:o,end:i,strides:s,beginMask:c,endMask:u,ellipsisMask:l,newAxisMask:d,shrinkAxisMask:p}=a,{finalShapeSparse:h,finalShape:f,isIdentity:m,sliceDim0:g,isSimpleSlice:y,begin:b,end:x,strides:v}=_u(r.shape,o,i,s,c,u,l,d,p);let w;if(m)w=Lv({inputs:{x:r},backend:n,attrs:{shape:f}});else if(g||y){kt(r.shape.length>=1,(()=>"Input must have rank at least 1, got: ".concat(r.shape.length)));const e=mu(b,x,v),t=Hw({inputs:{x:r},backend:n,attrs:{begin:b,size:e}});w=Lv({inputs:{x:t},backend:n,attrs:{shape:f}}),n.disposeIntermediateTensorInfo(t)}else{if(n.shouldExecuteOnCPU([r])){const e=n.readSync(r.dataId),t=oc(r.shape,r.dtype,e),a=Rx(h,t,v,b);w=n.makeTensorInfo(f,r.dtype,a.values)}else{const e=new DN(b,v,h);w=n.runWebGLProgram(e,[r],r.dtype)}}const k=Lv({inputs:{x:w},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(w),k}};const PN={kernelName:Jr,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{separator:r,nGramWidths:o,leftPad:i,rightPad:s,padWidth:c,preserveShortSequences:u}=a,{data:l,dataSplits:d}=t,p=n.readSync(l.dataId),h=n.readSync(d.dataId),[f,m]=Ax(p,h,r,o,i,s,c,u);return[n.makeTensorInfo([f.length],"string",f),n.makeTensorInfo(d.shape,"int32",m)]}};const LN={kernelName:eo,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{skipEmpty:r}=a,{input:o,delimiter:i}=t;if("string"!==o.dtype)throw new Error("Input must be of datatype string");if(1!==o.shape.length)throw new Error("Input must be a vector, got shape: ".concat(o.shape));if(0!==i.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(i.shape));const s=n.readSync(o.dataId),c=n.readSync(i.dataId)[0],[u,l,d]=Ox(s,c,r),p=l.length;return[n.makeTensorInfo([p,2],"int32",u),n.makeTensorInfo([p],"string",l),n.makeTensorInfo([2],"int32",new Int32Array(d))]}};const zN={kernelName:to,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{numBuckets:r}=a,{input:o}=t;if("string"!==o.dtype)throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");const i=n.readSync(o.dataId),s=Fx(i,r);return n.makeTensorInfo(o.shape,"int32",s)}},BN=_v({opSnippet:"return tan(x);"}),WN={kernelName:ao,backendName:"webgl",kernelFunc:BN},UN=_v({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"}),VN={kernelName:ro,backendName:"webgl",kernelFunc:UN};const GN={kernelName:Er,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{tensor:r,indices:o,updates:i}=t,{}=a,{sliceRank:s,numUpdates:c,sliceSize:u,strides:l,outputSize:d}=lu(0,o,r.shape),p=[d/u,u];if(0===d)return n.makeTensorInfo(r.shape,o.dtype);const h=Lv({inputs:{x:o},backend:n,attrs:{shape:[c,s]}}),f=Lv({inputs:{x:i},backend:n,attrs:{shape:[c,u]}}),m=Lv({inputs:{x:r},backend:n,attrs:{shape:p}}),g=new JI(c,s,h.shape.length,f.shape.length,l,p,!1,!0),y=n.runWebGLProgram(g,[f,h,m],m.dtype),b=Lv({inputs:{x:y},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),b}};class HN{constructor(e,t){this.variableNames=["A"];const n=new Array(e.length);for(let o=0;o<n.length;o++)n[o]=e[o]*t[o];this.outputShape=n,this.rank=n.length;const a=Yg(this.rank),r=function(e){const t=e.length;if(t>5)throw Error("Tile for rank ".concat(t," is not yet supported"));if(1===t)return"imod(resRC, ".concat(e[0],")");const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],a=[];for(let r=0;r<e.length;r++)a.push("imod(".concat(n[r],", ").concat(e[r],")"));return a.join()}(e);this.userCode="\n      void main() {\n        ".concat(a," resRC = getOutputCoords();\n        setOutput(getA(").concat(r,"));\n      }\n    ")}}function jN(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{reps:o}=a;if("string"===r.dtype||r.shape.length>5){const e=n.readSync(r.dataId),t="string"===r.dtype?e.map((e=>Xo(e))):e,a=oc(r.shape,r.dtype,t),i=Mx(a,o);return n.makeTensorInfo(i.shape,i.dtype,i.values)}const i=new HN(r.shape,o);return n.runWebGLProgram(i,[r],r.dtype)}const KN={kernelName:oo,backendName:"webgl",kernelFunc:jN};class qN{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "}}class XN{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "}}function YN(e,t){null!==t&&e.disposeIntermediateTensorInfo(t)}function QN(e){let t=1;for(;t<e;)t*=2;return t}const ZN={kernelName:io,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{k:o,sorted:i}=a,s=nn().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),c=nn().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),u=r.shape,l=u[u.length-1];if(n.shouldExecuteOnCPU([r])||l<s||o>c){const e=n.readSync(r.dataId),[t,a]=Px(e,u,r.dtype,o,i);return[n.makeTensorInfo(t.shape,t.dtype,t.values),n.makeTensorInfo(a.shape,a.dtype,a.values)]}if(0===o)return u[u.length-1]=0,[n.makeTensorInfo(u,r.dtype,[]),n.makeTensorInfo(u,"int32",[])];if(1===l)return[r,ES({attrs:{shape:u,dtype:"int32",value:0},backend:n})];const d=n.texData.get(r.dataId),p=null!==d&&d.isPacked,h=p?n.unpackTensor(r):r,f=It(u)/l,m=Lv({inputs:{x:h},attrs:{shape:[f,l]},backend:n});p&&YN(n,h);const g=QN(o),y=QN(l);let b=null;const x=()=>null===b?[m,m]:[m,b],v=(e,t,a)=>{const r=x(),o=new qN(a),i=[[l],[null===b?1:0],[Number.NEGATIVE_INFINITY],[e],[t]],s=b;b=n.runWebGLProgram(o,r,"int32",i),YN(n,s)};for(let I=1;I<g;I*=2){const e=2*I;for(let t=I;t>=1;t/=2)v(e,t,[f,y])}for(let I=y;I>g;I/=2){const e=x(),t=new XN([f,I/2]),a=[[l],[null===b?1:0],[g]],r=b;b=n.runWebGLProgram(t,e,"int32",a),YN(n,r);const o=g/2,i=2*o;for(let n=o;n>=1;n/=2)v(i,n,b.shape)}let w=b;b=Hw({inputs:{x:b},backend:n,attrs:{begin:0,size:[f,o]}}),YN(n,w);let k=XS({inputs:{x:m,indices:b},backend:n,attrs:{axis:1,batchDims:1}});YN(n,m);const S=u.slice(0,-1);S.push(o),w=b,b=Lv({inputs:{x:b},attrs:{shape:S},backend:n}),YN(n,w);const C=k;return k=Lv({inputs:{x:k},attrs:{shape:S},backend:n}),YN(n,C),[k,b]}};class $N{constructor(e,t,n,a,r,o){this.variableNames=["Image","Transforms"],this.outputShape=o;const i="nearest"===n?1:2;let s;switch(a){case"constant":default:s=1;break;case"reflect":s=2;break;case"wrap":s=3;break;case"nearest":s=4}this.userCode="\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(".concat(s," == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ").concat(e," && 0 <= coordX && coordX < ").concat(t,") {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(").concat(r,");\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(").concat(r,");\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(").concat(t,"));\n                float mapY = mapCoord(inY, float(").concat(e,"));\n\n                if (").concat(i," == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        ")}}const JN={kernelName:so,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{image:r,transforms:o}=t,{interpolation:i,fillMode:s,fillValue:c,outputShape:u}=a,[l,d,p,h]=r.shape,[f,m]=null!=u?u:[d,p],g=new $N(d,p,i,s,c,[l,f,m,h]);return n.runWebGLProgram(g,[r,o],"float32")}};const eT={kernelName:uo,backendName:"webgl",kernelFunc:function(e){const{inputs:t,attrs:n,backend:a}=e,{axis:r}=n,{x:o}=t;Ag(o,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const i=a.readSync(o.dataId),{outputValues:s,outputShape:c,indices:u}=zx(i,r,o.shape,o.dtype);return[a.makeTensorInfo(c,o.dtype,s),a.makeTensorInfo([u.length],"int32",u)]}};const tT={kernelName:lo,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{value:r}=t;let{axis:o}=a;o<0&&(o+=r.shape.length);const i=r,s=i.shape.length,c=r.shape[o],u=new Array(s-1);let l=0;for(let m=0;m<s;m++)m!==o&&(u[l++]=i.shape[m]);const d=[],p=new Array(s).fill(0),h=i.shape.slice();h[o]=1;const f=new Array(c);for(let m=0;m<f.length;m++){p[o]=m;const e=Hw({inputs:{x:i},backend:n,attrs:{begin:p,size:h}}),t=Lv({inputs:{x:e},backend:n,attrs:{shape:u}});f[m]=t,d.push(e)}return d.forEach((e=>n.disposeIntermediateTensorInfo(e))),f}};class nT{constructor(e,t){this.variableNames=["x","segmentIds"];const n=e.windowSize,a=e.batchSize,r=e.inSize,o=e.numSegments,i=o*Math.ceil(r/n);this.outputShape=[a,i];const s=4*Math.floor(n/4),c=n%4,u="\n        sumValue += dot(values, segFilter);\n    ";let l="";r%n>0&&(l="\n        if (inIdx < 0 || inIdx >= ".concat(r,") {\n          return initializationValue;\n        }\n      "));let d="";r%n>0&&(d="\n        if (inIdx < 0 || inIdx >= ".concat(r,") {\n          return -1.0;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat("0.0",";\n\n      float getValue(int batch, int inIdx) {\n        ").concat(l,"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ").concat(d,"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ").concat(o,")) * float(").concat(n,"));\n        int currentSeg = int(mod(float(outIdx), float(").concat(o,")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(s,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ").concat(u,"\n        }\n\n        int inIdx = inOffset + ").concat(s,";\n        if (").concat(1===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ").concat(u,"\n        } else if (").concat(2===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ").concat(u,"\n        } else if (").concat(3===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ").concat(u,"\n        }\n        setOutput(").concat("sumValue",");\n      }\n    ")}}const aT={kernelName:po,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,segmentIds:o}=t,{numSegments:i}=a,s=r.shape.length,c=[];let u=0;const l=nd([u],s);let d=r;null!=l&&(d=qv({inputs:{x:r},backend:n,attrs:{perm:l}}),c.push(d),u=rd(1,s)[0]);const p=qm(d.shape,u,i),h=It([d.shape[u]]),f=Lv({inputs:{x:d},backend:n,attrs:{shape:[-1,h]}});c.push(f);const m=ki(r.dtype),g=(e,t,a,r,o)=>{const i=e.shape[0],s=e.shape[1],u=Km(s,o),l=new nT({windowSize:u,inSize:s,batchSize:i,numSegments:o},t),d=n.compileAndRun(l,[e,a],r);if(c.push(d),d.shape[1]===o)return d;const p=NI({backend:n,attrs:{start:0,stop:o,step:1,dtype:"float32"}}),h=jN({inputs:{x:p},backend:n,attrs:{reps:[s/u]}});c.push(p),c.push(h);return g(d,t,h,r,o)},y=Lv({inputs:{x:g(f,"unsortedSegmentSum",o,m,i)},backend:n,attrs:{shape:p}});let b=y;if(null!=l){c.push(y);const e=ad(l);b=qv({inputs:{x:b},backend:n,attrs:{perm:e}})}return c.forEach((e=>n.disposeIntermediateTensorInfo(e))),b}},rT=[Zv,Jv,tw,aw,iw,uw,lw,dw,yw,bw,vw,kw,Cw,Nw,_w,Aw,Ow,Mw,Pw,Lw,Ww,Kw,qw,Xw,Yw,tk,rk,sk,vv,lk,bk,Nk,Ak,Fk,Dk,Mk,Pk,zk,Wk,Vk,Xk,Yk,Qk,$k,tS,rS,oS,sS,uS,lS,pS,hS,mS,yS,xS,wS,CS,TS,RS,OS,MS,LS,WS,GS,HS,KS,YS,ZS,JS,bv,eC,mk,nC,rC,iC,Sv,cC,lC,dC,hC,mC,yC,xC,wC,CC,NC,_C,RC,AC,OC,MC,PC,LC,zC,BC,UC,HC,KC,tI,Pv,aI,oI,sI,uI,Zw,dI,fI,mI,xI,wI,Nv,kI,SI,CI,II,TI,Jw,YC,EI,AI,FI,zv,PI,zI,UI,GI,KI,XI,QI,$I,tN,aN,oN,sN,uN,dN,hN,mN,jw,eI,yN,bN,xN,vN,wN,kN,SN,CN,TN,_N,AN,ON,FN,MN,PN,LN,zN,$C,Kv,WN,VN,GN,KN,ZN,JN,Xv,eT,tT,aT,hI];for(const n of rT)To(n);const oT=nn();oT.registerFlag("WEBGPU_DEFERRED_SUBMIT_BATCH_SIZE",(()=>15)),oT.registerFlag("WEBGPU_CPU_FORWARD",(()=>!0)),oT.registerFlag("WEBGPU_MATMUL_PROGRAM_TYPE",(()=>-1)),oT.registerFlag("WEBGPU_USE_NAIVE_CONV2D_TRANSPOSE",(()=>!0)),oT.registerFlag("WEBGPU_USE_LOW_POWER_GPU",(()=>!1)),oT.registerFlag("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD",(()=>1e3)),oT.registerFlag("WEBGPU_USE_PROFILE_TOOL",(()=>!1)),oT.registerFlag("WEBGPU_IMPORT_EXTERNAL_TEXTURE",(()=>!0)),oT.registerFlag("WEBGPU_USE_NAIVE_CONV2D_DEBUG",(()=>!1)),oT.registerFlag("WEBGPU_THRESHOLD_TO_INCREASE_WORKGROUPS_FOR_MATMUL",(()=>-1)),oT.registerFlag("WEBGPU_CONV_SEPARATE_IM2COL_SHADER",(()=>!1)),oT.registerFlag("WEBGPU_PRINT_SHADER",(()=>"")),oT.registerFlag("WEBGPU_ENGINE_COMPILE_ONLY",(()=>!1));class iT{constructor(e){e&&(this.vendor=e.vendor,this.architecture=e.architecture,this.intelGPUGeneration=this.getIntelGPUGeneration())}getIntelGPUGeneration(){if(this.isIntel()){if(this.architecture.startsWith("gen"))return Number(this.architecture.match(/\d+/));if(this.architecture.startsWith("xe"))return 12}return 0}isIntel(){return"intel"===this.vendor}}class sT{constructor(e){this.device=e,this.numUsedBuffers=0,this.numFreeBuffers=0,this.freeBuffers=new Map,this.usedBuffers=new Map,this.numBytesUsed=0,this.numBytesAllocated=0}acquireBuffer(e,t){let n,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const o=cT(e,t);return r?(this.freeBuffers.has(o)||this.freeBuffers.set(o,[]),this.freeBuffers.get(o).length>0?(n=this.freeBuffers.get(o).pop(),this.numFreeBuffers--):(n=this.device.createBuffer({size:e,usage:t,mappedAtCreation:a}),this.numBytesAllocated+=e)):(n=this.device.createBuffer({size:e,usage:t,mappedAtCreation:a}),this.numBytesAllocated+=e),this.usedBuffers.has(o)||this.usedBuffers.set(o,[]),this.usedBuffers.get(o).push(n),this.numUsedBuffers++,this.numBytesUsed+=e,n}releaseBuffer(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(0===this.freeBuffers.size)return;const n=e.size,a=cT(n,e.usage),r=this.usedBuffers.get(a),o=r.indexOf(e);if(o<0)throw new Error("Cannot find the buffer in buffer manager");r[o]=r[r.length-1],r.pop(),this.numUsedBuffers--,this.numBytesUsed-=n,t?(this.freeBuffers.get(a).push(e),this.numFreeBuffers++):(e.destroy(),this.numBytesAllocated-=n)}getNumUsedBuffers(){return this.numUsedBuffers}getNumFreeBuffers(){return this.numFreeBuffers}dispose(){this.freeBuffers.forEach(((e,t)=>{e.forEach((e=>{e.destroy()}))})),this.usedBuffers.forEach(((e,t)=>{e.forEach((e=>{e.destroy()}))})),this.freeBuffers=new Map,this.usedBuffers=new Map,this.numUsedBuffers=0,this.numFreeBuffers=0,this.numBytesUsed=0,this.numBytesAllocated=0}}function cT(e,t){return"".concat(e,"_").concat(t)}class uT{constructor(e){this.device=e,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures=new Map,this.usedTextures=new Map,this.numBytesUsed=0,this.numBytesAllocated=0}acquireTexture(e,t,n,a){const r=e*t*dT(n),o=lT(e,t,n,a);if(this.freeTextures.has(o)||this.freeTextures.set(o,[]),this.usedTextures.has(o)||this.usedTextures.set(o,[]),this.numBytesUsed+=r,this.numUsedTextures++,this.freeTextures.get(o).length>0){this.numFreeTextures--;const e=this.freeTextures.get(o).shift();return this.usedTextures.get(o).push(e),e}this.numBytesAllocated+=r;const i=this.device.createTexture({size:[e,t],format:n,usage:a});return this.usedTextures.get(o).push(i),i}releaseTexture(e){if(0===this.freeTextures.size)return;const t=e.width,n=e.height,a=e.format,r=lT(t,n,a,e.usage);this.freeTextures.has(r)||this.freeTextures.set(r,[]),this.freeTextures.get(r).push(e),this.numFreeTextures++,this.numUsedTextures--;const o=this.usedTextures.get(r),i=o.indexOf(e);if(i<0)throw new Error("Cannot release a texture that was never provided by this texture manager");o.splice(i,1);const s=t*n*dT(a);this.numBytesUsed-=s}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){this.freeTextures.forEach(((e,t)=>{e.forEach((e=>{e.destroy()}))})),this.usedTextures.forEach(((e,t)=>{e.forEach((e=>{e.destroy()}))})),this.freeTextures=new Map,this.usedTextures=new Map,this.numUsedTextures=0,this.numFreeTextures=0,this.numBytesUsed=0,this.numBytesAllocated=0}}function lT(e,t,n,a){return"".concat(e,"_").concat(t,"_").concat(n,"_").concat(a)}function dT(e){if("rgba8unorm"===e)return 16;throw new Error("".concat(e," is not supported!"))}function pT(e,t){if(Math.max(...e)>5)throw new Error("Cannot symbolically compute strides for rank > 6 tensor.");const n=e.length,a=e.map((e=>"".concat(t,".").concat("xyzwuv"[e]))),r=new Array(n-1);r[n-2]=a[n-1];for(let o=n-3;o>=0;--o)r[o]="(".concat(r[o+1]," * ").concat(a[o+1],")");return r}const hT=(e,t,n)=>"int32"===n?"atomicAdd(".concat(e,", bitcast<i32>(").concat(t,"));"):"\n          {\n            var oldValue = 0;\n            loop {\n              let newValueF32 = bitcast<f32>(oldValue) + (".concat(t,");\n              let newValue = bitcast<i32>(newValueF32);\n              let res = atomicCompareExchangeWeak(").concat(e,", oldValue, newValue);\n              if res.exchanged {\n                break;\n              }\n              oldValue = res.old_value;\n            }\n          }");var fT;!function(e){e[e.FROM_PIXELS=0]="FROM_PIXELS",e[e.DRAW=1]="DRAW"}(fT||(fT={}));const mT=(e,t,n,a,r)=>{const o=function(e,t,n){const a=[],r=n.workgroupSize[0]*n.workgroupSize[1]*n.workgroupSize[2];if(n.outputComponent=n.outputComponent?n.outputComponent:1,a.push("\n\n      var<private> localId: vec3<u32>;\n      var<private> localIndex: u32;\n      var<private> globalId: vec3<u32>;\n      var<private> numWorkgroups: vec3<u32>;\n      var<private> workgroupId: vec3<u32>;\n\n      // Only used when the y/z dimension of workgroup size is 1.\n      fn getGlobalIndex() -> i32 {\n        ".concat(IT(n)?"  return i32(globalId.x);":"  return i32((workgroupId.z * numWorkgroups.x * numWorkgroups.y +\n                workgroupId.y * numWorkgroups.x + workgroupId.x) * ".concat(r,"u +\n                localIndex);\n        "),"\n      }\n    ")),null!=n.pixelsOpType){const r=n.pixelsOpType===fT.FROM_PIXELS?"@group(0) @binding(0) var<storage, read_write> result: array<".concat(NT(t.dtype,n.outputComponent),">;"):"@group(0) @binding(1) var<storage, read> inBuf : array<".concat(NT(e[0].dtype,n.outputComponent),">;"),o=3===t.shape.length?"vec2<i32>":"i32";a.push("\n        struct Uniform {\n          outShapeStrides : ".concat(o,",\n          size            : i32,\n          numChannels     : i32,\n          alpha           : f32,\n        };\n\n        ").concat(r,"\n        @group(0) @binding(2) var<uniform> uniforms: Uniform;\n      "));const i=TT(n);return[wT,a.join("\n"),ST(t.shape),n.getUserCode(),vT(i,n)].join("\n")}let o,i,s="struct Uniforms { NAN : f32, INFINITY : f32, ";n.variableNames.forEach(((t,n)=>{const a=yT(e[n].shape.length);s+="".concat(t.charAt(0).toLowerCase()+t.slice(1),"Shape : ").concat(a,", "),o=e[n].shape.length-1,i=yT(o),s+="".concat(t.charAt(0).toLowerCase()+t.slice(1),"ShapeStrides: ").concat(i,", ")}));const c=yT(t.shape.length);s+="outShape : ".concat(c,", "),o=t.shape.length-1,i=yT(o),s+="\n         outShapeStrides: ".concat(i,", "),n.size&&(s+="size : i32, ");n.uniforms&&(s+=n.uniforms);s+="};",s=function(e){const t=/(\w+)\s*:\s*vec(5|6)/g;e=e.replace(t,(e=>"@align(16) "+e));const n=/vec(5|6)\s*,\s*(\w+)/g;return e=e.replace(n,((e,t,n)=>"vec".concat(t,", @align(16) ").concat(n)))}(s),a.push(s),n.atomic?a.push("\n      @group(0) @binding(0) var<storage, read_write> result: array<atomic<i32>>;\n    "):a.push("\n      @group(0) @binding(0) var<storage, read_write> result: array<".concat(NT(t.dtype,n.outputComponent),">;\n    "));n.variableNames.forEach(((t,r)=>{a.push("\n      @group(0) @binding(".concat(1+r,") var<storage, read> ").concat(t,": array<").concat(n.variableComponents?NT(e[r].dtype,n.variableComponents[r]):NT(e[r].dtype,n.outputComponent),">;\n        "))})),""!==s&&a.push("\n      @group(0) @binding(".concat(1+n.variableNames.length,") var<uniform> uniforms: Uniforms;\n      "));const u=function(e,t){const{x:n,y:a=[],z:r=[]}=t,o=e.length,i=n.length+a.length+r.length;if(i!==o)return"";if(n.length===o){const e=yT(o);return"fn getOutputCoords() -> ".concat(e,"{\n    let globalIndex = getGlobalIndex();\n    return getCoordsFromIndex(globalIndex);\n  }\n  ")}let s="";const c=[n,a,r];for(let p=0;p<c.length;p++){const e=c[p];if(0!==e.length)if(1===e.length)s+="let d".concat(e[0]," = i32(globalId[").concat(p,"]);");else{const t=pT(e,"uniforms.outShape");s+="var index".concat(p," = i32(globalId[").concat(p,"]);");for(let n=0;n<t.length;n++)s+="let d".concat(e[n]," = index").concat(p," / ").concat(t[n],";"),n===t.length-1?s+="let d".concat(e[n+1]," = ")+"index".concat(p," - d").concat(e[n]," * ").concat(t[n],";"):s+="index".concat(p," = index").concat(p," - d").concat(e[n]," * ").concat(t[n],";")}}const u=[];for(let p=0;p<i;p++)u.push("d".concat(p));const l=yT(i);let d="fn getOutputCoords() -> ".concat(l," {\n  ").concat(s,"\n");0===u.length?d+="return ".concat(l,"(0); }"):d+="return ".concat(l,"(").concat(u.join(","),"); }");return d}(t.shape,n.dispatchLayout),l=[wT,a.join("\n")+kT,ST(t.shape),u,CT(t.shape.length)];n.atomic||l.push(function(e,t,n){const a=e.length,r=NT(t,n);let o="fn setOutputAtIndex(flatIndex : i32, value : ".concat(gT(n),") {\n      result[flatIndex] = ").concat(r,"(value);\n    }\n\n    fn setOutputAtIndexI32(flatIndex : i32, value : ").concat(gT(n,"i32"),") {\n      result[flatIndex] = ").concat(r,"(value);\n    }\n    ");if(a>=2){const e=["d0","d1","d2","d3","d4","d5"].slice(0,a),t=yT(a);o+="\n      fn setOutputAtCoords(".concat(e.map((e=>"".concat(e," : i32"))).join(", "),", value : ").concat(gT(n),") {\n        let flatIndex = getOutputIndexFromCoords(").concat(t,"(").concat(e.join(", "),"));\n        setOutputAtIndex(flatIndex").concat(1===n?"":" / ".concat(n),", value);\n      }\n      fn setOutputAtCoordsI32(").concat(e.map((e=>"".concat(e," : i32"))).join(", "),", value : ").concat(gT(n,"i32"),") {\n        let flatIndex = getOutputIndexFromCoords(").concat(t,"(").concat(e.join(", "),"));\n        setOutputAtIndexI32(flatIndex").concat(1===n?"":" / ".concat(n),", value);\n      }\n    ")}return o}(t.shape,t.dtype,n.outputComponent));n.variableNames.forEach(((t,n)=>{l.push("".concat(ST(e[n].shape,t)))}));const d=e.map(((e,a)=>function(e,t,n,a){let r=function(e,t){const n=e.name,a=e.shape.length,r=yT(a),o="get"+n.charAt(0).toUpperCase()+n.slice(1),i=["d0","d1","d2","d3","d4","d5"].slice(0,a),s=i.map((e=>"".concat(e," : i32"))).join(", ");if(a<1)return"\n      fn ".concat(o,"() -> ").concat(gT(t)," {\n        return ").concat(gT(t),"(").concat(n,"[0]);\n      }\n    ");const c="uniforms.".concat(n.charAt(0).toLowerCase()+n.slice(1),"Shape");let u="".concat(a,"D");0===a&&(u="1D");return"\n    fn ".concat(o,"(").concat(s,") -> ").concat(gT(t)," {\n      return ").concat(gT(t),"(").concat(n,"[getIndexFromCoords").concat(u,"(").concat(r,"(").concat(i.join(","),"),\n        ").concat(c,")").concat(1===t?"":" / ".concat(t),"]);\n    }\n   ")}(e,n);const o=e.shape;o.length<=t.length&&(r+=function(e,t,n,a){const r=e.name,o=r.charAt(0).toUpperCase()+r.slice(1),i="get"+o+"ByOutput",s=e.shape.length,c=t.length,u=yT(c);if(Tt(e.shape,t)&&a)return"\n    fn ".concat(i,"Index(globalIndex : i32) -> ").concat(gT(n)," {\n      return ").concat(gT(n),"(").concat(r,"[globalIndex]);\n    }\n\n    fn ").concat(i,"Coords(coords : ").concat(u,") -> ").concat(gT(n)," {\n      return ").concat(gT(n),"(").concat(r,"[").concat(c>1?"getOutputIndexFromCoords(coords)":"coords").concat(1===n?"":" / ".concat(n),"]);\n    }\n    ");const l=_c(e.shape,t),d=c-s;let p="";if(0===s)return"\n    fn ".concat(i,"Index(globalIndex : i32) -> ").concat(gT(n),"{\n      return get").concat(o,"();\n    }\n\n    fn ").concat(i,"Coords(coords : ").concat(u,") -> ").concat(gT(n),"{\n      return get").concat(o,"();\n    }\n  ");p=c<2&&l.length>=1?"coords = 0;":l.map((e=>"coords.".concat(bT(e+d)," = 0;"))).join("\n");let h="";if(c<2&&s>0)h="coords";else if(c>1){const t=yT(s),n=e.shape.map(((e,t)=>"coords.".concat(bT(t+d)))).join(", ");h="".concat(t,"(").concat(n,")")}else h="coords";const f="uniforms.".concat(r.charAt(0).toLowerCase()+r.slice(1),"Shape"),m="".concat(s,"D");return"\n  fn ".concat(i,"Index(globalIndex : i32) -> ").concat(gT(n)," {\n    var coords = getCoordsFromIndex(globalIndex);\n    ").concat(p,"\n    return ").concat(gT(n),"(").concat(r,"[getIndexFromCoords").concat(m,"(").concat(h,", ").concat(f,")").concat(1===n?"":" / ".concat(n),"]);\n  }\n\n  fn ").concat(i,"Coords(coordsIn : ").concat(u,") -> ").concat(gT(n)," {\n    var coords = coordsIn;\n    ").concat(p,"\n    return ").concat(gT(n),"(").concat(r,"[getIndexFromCoords").concat(m,"(").concat(h,", ").concat(f,")").concat(1===n?"":" / ".concat(n),"]);\n  }\n")}(e,t,n,a));return r}(e,t.shape,n.variableComponents?n.variableComponents[a]:n.outputComponent,n.dispatchLayout.x.length===t.shape.length))).join("\n");l.push(d),l.push(n.getUserCode());const p=TT(n);l.push(vT(p,n));const h=l.join("\n");return h}(n,{dtype:a.dtype,shape:a.shape},t),i=e.createShaderModule({code:o,label:t.constructor.name});let s=nn().get("WEBGPU_PRINT_SHADER");if(""!==s){s=s.toLowerCase();const e=s.split(",");("all"===s||e.some((e=>t.shaderKey.toLowerCase().includes(e))))&&(console.group(t.shaderKey),console.debug(o),console.groupEnd())}return r?e.createComputePipelineAsync({compute:{module:i,entryPoint:"_start"},label:t.constructor.name,layout:"auto"}):e.createComputePipeline({compute:{module:i,entryPoint:"_start"},label:t.constructor.name,layout:"auto"})},gT=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"f32";switch(e){case 1:return"".concat(t);case 2:return"vec2<".concat(t,">");case 3:return"vec3<".concat(t,">");case 4:return"vec4<".concat(t,">");default:throw new Error("".concat(e,"-component ").concat(t," is not supported."))}};function yT(e){if(e<=1)return"i32";if(2===e)return"vec2<i32>";if(3===e)return"vec3<i32>";if(4===e)return"vec4<i32>";if(5===e)return"vec5";if(6===e)return"vec6";throw Error("GPU for rank ".concat(e," is not yet supported"))}function bT(e){if(0===e)return"x";if(1===e)return"y";if(2===e)return"z";if(3===e)return"w";if(4===e)return"u";if(5===e)return"v";throw Error("Index ".concat(e," is not yet supported"))}function xT(){let e;switch(arguments.length){case 0:e="\n        fn main()\n      ";break;case 1:e="\n        fn main(".concat(arguments.length<=0?void 0:arguments[0]," : i32)\n      ");break;default:throw Error("Unreachable")}return e}function vT(e,t){let n;return n="\n     ".concat(function(e){return"\n  @compute @workgroup_size(".concat(e.workgroupSize[0],", ").concat(e.workgroupSize[1],", ").concat(e.workgroupSize[2],")\n")}(t),"\n      fn _start(@builtin(local_invocation_id) LocalId : vec3<u32>,\n                @builtin(global_invocation_id) GlobalId : vec3<u32>,\n                @builtin(local_invocation_index) LocalIndex: u32,\n                @builtin(workgroup_id) WorkgroupId : vec3<u32>,\n                @builtin(num_workgroups) NumWorkgroups : vec3<u32>) {\n        localId = LocalId;\n        localIndex = LocalIndex;\n        globalId = GlobalId;\n        numWorkgroups = NumWorkgroups;\n        workgroupId = WorkgroupId;\n        ").concat(e?"main(getGlobalIndex());":"main();",";\n      }\n    "),n}const wT="\n  struct vec5 {x: i32, y: i32, z: i32, w: i32, u: i32};\n  struct vec6 {x: i32, y: i32, z: i32, w: i32, u: i32, v: i32};\n\n  // Checks whether coordinates lie within the bounds of the shape.\n  fn coordsInBounds2D(coord : vec2<i32>, shape : vec2<i32>) -> bool {\n    return all(coord >= vec2<i32>(0)) && all(coord < shape);\n  }\n  fn coordsInBounds3D(coord : vec3<i32>, shape : vec3<i32>) -> bool {\n    return all(coord >= vec3<i32>(0)) && all(coord < shape);\n  }\n  fn coordsInBounds4D(coord : vec4<i32>, shape : vec4<i32>) -> bool {\n    return all(coord >= vec4<i32>(0)) && all(coord < shape);\n  }\n\n  fn getIndexFromCoords1D(coord : i32, shape : i32) -> i32 {\n    return coord;\n  }\n  fn getIndexFromCoords2D(coords : vec2<i32>, shape : vec2<i32>) -> i32 {\n    return dot(coords, vec2<i32>(shape.y, 1));\n  }\n  fn getIndexFromCoords3D(coords : vec3<i32>, shape : vec3<i32>) -> i32 {\n    return dot(coords, vec3<i32>(shape.y * shape.z, shape.z, 1));\n  }\n  fn getIndexFromCoords4D(coords : vec4<i32>, shape : vec4<i32>) -> i32 {\n    return dot(coords, vec4<i32>(\n        shape.y * shape.z * shape.w, shape.z * shape.w, shape.w, 1));\n  }\n  fn getIndexFromCoords5D(coords : vec5, shape : vec5) -> i32 {\n    let shapeStrides: vec5 = vec5(shape.y * shape.z * shape.w * shape.u, shape.z * shape.w * shape.u, shape.w * shape.u, shape.u, 1);\n    return coords.x*shapeStrides.x + coords.y*shapeStrides.y + coords.z*shapeStrides.z + coords.w*shapeStrides.w + coords.u*shapeStrides.u;\n  }\n  fn getIndexFromCoords6D(coords : vec6, shape : vec6) -> i32 {\n    let shapeStrides: vec6 = vec6(shape.y * shape.z * shape.w * shape.u * shape.v, shape.z * shape.w * shape.u * shape.v, shape.w * shape.u * shape.v, shape.u * shape.v, shape.v, 1);\n    return coords.x*shapeStrides.x + coords.y*shapeStrides.y + coords.z*shapeStrides.z + coords.w*shapeStrides.w + coords.u*shapeStrides.u + coords.v*shapeStrides.v;\n  }\n\n  // NaN defination in IEEE 754-1985 is :\n  //   - sign = either 0 or 1.\n  //   - biased exponent = all 1 bits.\n  //   - fraction = anything except all 0 bits (since all 0 bits represents infinity).\n  // https://en.wikipedia.org/wiki/IEEE_754-1985#Representation_of_non-numbers\n  fn isnan(val: f32) -> bool {\n    let floatToUint: u32 = bitcast<u32>(val);\n    return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n  }\n  fn isnanVec4(val : vec4<f32>) -> vec4<bool> {\n    let floatToUint: vec4<u32> = bitcast<vec4<u32>>(val);\n    return (floatToUint & vec4<u32>(0x7fffffffu)) > vec4<u32>(0x7f800000u);\n  }\n",kT="\n  fn isinf(val: f32) -> bool {\n    return abs(val) == uniforms.INFINITY;\n  }\n";function ST(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e.length,a=""!==t?"get".concat(t.charAt(0).toUpperCase()+t.slice(1),"CoordsFromIndex"):"getCoordsFromIndex",r=""!==t?"".concat(t.charAt(0).toLowerCase()+t.slice(1),"ShapeStrides"):"outShapeStrides";if(n<=1)return"fn ".concat(a,"(index : i32) -> i32 { return index; }");const o=Gt(e),i=yT(n),s=[];for(let u=0;u<n;u++)s.push("d".concat(u));if(1===o.length)return"    fn ".concat(a,"(index : i32) -> vec2<i32> {\n      let d0 = index / uniforms.").concat(r,"; let d1 = index - d0 * uniforms.").concat(r,";\n      return vec2<i32>(d0, d1);\n    }");let c;return c="var index2 = index;"+o.map(((e,t)=>{const n="let ".concat(s[t]," = index2 / uniforms.").concat(r,".").concat(bT(t)),a=t===o.length-1?"let ".concat(s[t+1]," = index2 - ").concat(s[t]," * uniforms.").concat(r,".").concat(bT(t)):"index2 = index2 - ".concat(s[t]," * uniforms.").concat(r,".").concat(bT(t));return"".concat(n,"; ").concat(a,";")})).join(""),"\n    fn ".concat(a,"(index : i32) -> ").concat(i," {\n      ").concat(c,"\n      return ").concat(i,"(").concat(s.join(","),");\n    }\n  ")}function CT(e){let t="";switch(e){case 0:case 1:t+="\n        fn getOutputIndexFromCoords(coords : i32) -> i32 {\n          return coords;\n        }\n        ";break;case 2:t+="\n        fn getOutputIndexFromCoords(coords : vec2<i32>) -> i32 {\n          return dot(coords, vec2<i32>(uniforms.outShapeStrides, 1));\n        }\n        ";break;case 3:t+="\n        fn getOutputIndexFromCoords(coords : vec3<i32>) -> i32 {\n          return dot(coords, vec3<i32>(uniforms.outShapeStrides.x, uniforms.outShapeStrides.y, 1));\n        }\n        ";break;case 4:t+="\n        fn getOutputIndexFromCoords(coords : vec4<i32>) -> i32 {\n          return dot(coords, vec4<i32>(\n            uniforms.outShapeStrides.x, uniforms.outShapeStrides.y, uniforms.outShapeStrides.z, 1));\n        }\n        ";break;case 5:t+="\n        fn getOutputIndexFromCoords(coords : vec5) -> i32 {\n          return coords.x * uniforms.outShapeStrides.x +\n              coords.y * uniforms.outShapeStrides.y +\n              coords.z * uniforms.outShapeStrides.z +\n              coords.w * uniforms.outShapeStrides.w +\n              coords.u;\n        }\n        ";break;case 6:t+="\n        fn getOutputIndexFromCoords(coords : vec6) -> i32 {\n          return coords.x * uniforms.outShapeStrides.x +\n              coords.y * uniforms.outShapeStrides.y +\n              coords.z * uniforms.outShapeStrides.z +\n              coords.w * uniforms.outShapeStrides.w +\n              coords.u * uniforms.outShapeStrides.u +\n              coords.v;\n        }\n        ";break;default:kt(!1,(()=>"Unsupported ".concat(e,"D shape")))}return t}function IT(e){return 1===e.dispatch[1]&&1===e.dispatch[2]}function NT(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if("float32"===e)return gT(t,"f32");if("int32"===e||"bool"===e)return gT(t,"i32");throw new Error("type ".concat(e," is not supported."))}function TT(e){return(!e.dispatchLayout.hasOwnProperty("y")||0===e.dispatchLayout.y.length)&&(!e.dispatchLayout.hasOwnProperty("z")||0===e.dispatchLayout.z.length)}const _T=e=>{let t=1;for(let n=0;n<e.length;n++)t*=e[n];return t};function ET(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1,1,1],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1];const[r,o,i]=[Math.ceil(_T(e.x.map((e=>t[e])))/(n[0]*a[0])),e.y?Math.ceil(_T(e.y.map((e=>t[e])))/(n[1]*a[1])):1,e.z?Math.ceil(_T(e.z.map((e=>t[e])))/(n[2]*a[2])):1];return[r,o,i]}function RT(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return[8,8,1];const n=_T(e.x.map((e=>t[e]))),a=_T(e.y.map((e=>t[e])));return n<=4?[4,16,1]:a<=4?[16,4,1]:[16,16,1]}function AT(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return[4,4,1];const n=_T(e.x.map((e=>t[e]))),a=_T(e.y.map((e=>t[e])));return n<=4?[1,2,1]:a<=4?[2,1,1]:[2,2,1]}function OT(e){return{x:e.map(((e,t)=>t))}}function FT(e){if("float32"===e||"int32"===e||"bool"===e||"string"===e)return 4;if("complex64"===e)return 8;throw new Error("Unknown dtype ".concat(e))}function DT(){return!("undefined"===typeof globalThis||!globalThis.navigator||!globalThis.navigator.gpu)}function MT(e,t){Array.isArray(e)||(e=[e]),e.forEach((e=>{null!=e&&kt("complex64"!==e.dtype,(()=>"".concat(t," does not support complex64 tensors ")+"in the WebGPU backend."))}))}var PT;!function(e){e[e.MatMulReduceProgram=0]="MatMulReduceProgram",e[e.MatMulSplitKProgram=1]="MatMulSplitKProgram",e[e.MatMulSmallOutputSizeProgram=2]="MatMulSmallOutputSizeProgram",e[e.MatMulPackedProgram=3]="MatMulPackedProgram",e[e.MatMulMax=4]="MatMulMax"}(PT||(PT={}));const LT=nn().getNumber("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD");class zT extends gt{nextDataId(){return zT.nextDataId++}constructor(e,t){if(super(),this.commandQueueOwnedIds=new WeakSet,this.dispatchCountInPass=0,this.disposed=!1,this.downloadWaitMs=0,this.tensorDataPendingDisposal=[],this.queryResolveBuffer=null,this.querySet=null,this.querySetCount=2,this.stagingPendingDisposal=[],this.uniformPendingDisposal=[],this.uploadWaitMs=0,this.hasReadSyncWarned=!1,this.hasTimestampQueryWarned=!1,!DT())throw new Error("WebGPU is not supported on this device");this.pipelineCache={},this.device=e,this.queue=e.queue,this.commandEncoder=null,this.computePassEncoder=null,this.adapterInfo=new iT(t),this.supportTimestampQuery=this.device.features.has("timestamp-query"),this.thresholdToIncreaseWorkgroups=this.adapterInfo.intelGPUGeneration>=12?16:8,this.bufferManager=new sT(this.device),this.textureManager=new uT(this.device),this.tensorMap=new mt(this,Qi()),nn().getBool("WEBGPU_USE_PROFILE_TOOL")&&(this.dummyCanvas=document.createElement("canvas"),this.dummyCanvas.width=1,this.dummyCanvas.height=1,this.dummyContext=this.dummyCanvas.getContext("webgpu"),this.dummyContext.configure({device:e,format:"bgra8unorm"}),document.body.appendChild(this.dummyCanvas))}floatPrecision(){return 32}disposeData(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.tensorMap.has(e))return!0;const n=this.tensorMap.get(e);return t?n.refCount=0:n.refCount--,!(n.refCount>0)&&(null!=n.complexTensorInfos&&(this.disposeData(n.complexTensorInfos.real.dataId),this.disposeData(n.complexTensorInfos.imag.dataId)),this.commandQueueOwnedIds.has(e)?(this.tensorDataPendingDisposal.push(e),!0):(this.releaseResource(e),this.tensorMap.delete(e),!0))}memory(){return{numBytesInGPU:this.bufferManager.numBytesUsed,numBytesAllocatedInGPU:this.bufferManager.numBytesAllocated,unreliable:!1}}releaseResource(e){const t=this.tensorMap.get(e);t&&t.resource&&(t.external||(t.resource instanceof GPUBuffer?this.bufferManager.releaseBuffer(t.resource):t.resource instanceof GPUTexture&&this.textureManager.releaseTexture(t.resource)),t.resource=null)}refCount(e){if(this.tensorMap.has(e)){return this.tensorMap.get(e).refCount}return 0}incRef(e){this.tensorMap.get(e).refCount++}decRef(e){if(this.tensorMap.has(e)){this.tensorMap.get(e).refCount--}}write(e,t,n){if("complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const a={id:this.nextDataId()};return this.tensorMap.set(a,{dtype:n,shape:t,values:e,refCount:1}),a}move(e,t,n,a,r){if("complex64"===a)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.tensorMap.set(e,{dtype:a,shape:n,values:t,refCount:r})}submitQueue(){this.queue.submit([this.commandEncoder.finish()]),this.commandEncoder=null,this.dispatchCountInPass=0,this.commandQueueOwnedIds=new WeakSet,this.tensorDataPendingDisposal.forEach((e=>{this.releaseResource(e),this.tensorMap.delete(e)})),this.uniformPendingDisposal.forEach((e=>this.bufferManager.releaseBuffer(e))),this.stagingPendingDisposal.forEach((e=>this.bufferManager.releaseBuffer(e,!1))),this.tensorDataPendingDisposal=[],this.uniformPendingDisposal=[],this.stagingPendingDisposal=[]}ensureCommandEncoderReady(){this.commandEncoder||(this.commandEncoder=this.device.createCommandEncoder())}endComputePassEncoder(){this.computePassEncoder&&(this.computePassEncoder.end(),this.computePassEncoder=null)}async checkCompileCompletionAsync(){let e;try{e=await Promise.all(Object.values(this.pipelineCache))}catch(jj){throw new Error(jj.message)}Object.keys(this.pipelineCache).map(((t,n)=>{this.pipelineCache[t]=e[n]}))}async getBufferData(e){if(nn().getBool("WEBGPU_ENGINE_COMPILE_ONLY"))return console.warn("The data may be invalid since WEBGPU_ENGINE_COMPILE_ONLY is true, this can only be called when WEBGPU_ENGINE_COMPILE_ONLY is false"),null;const t=e.size,n=this.bufferManager.acquireBuffer(t,GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ);this.ensureCommandEncoderReady(),this.endComputePassEncoder(),this.commandEncoder.copyBufferToBuffer(e,0,n,0,t),this.submitQueue(),await n.mapAsync(GPUMapMode.READ);const a=n.getMappedRange().slice(0);return n.unmap(),null!=n&&this.bufferManager.releaseBuffer(n),nn().getBool("WEBGPU_USE_PROFILE_TOOL")&&(kt(void 0!==this.dummyContext,(()=>"Fail to get context for profiling tool")),this.dummyContext.getCurrentTexture()),a}convertAndCacheOnCPU(e,t){const n=this.tensorMap.get(e);return n.values=t,n.values}readSync(e){const t=this.tensorMap.get(e),{values:n,complexTensorInfos:a}=t;if(null!=n||"string"===t.dtype)return n;if("complex64"===t.dtype){const t=Kt(mm(this.readSync(a.real.dataId),this.readSync(a.imag.dataId)).buffer,"float32");return this.convertAndCacheOnCPU(e,t),t}this.hasReadSyncWarned||(this.hasReadSyncWarned=!0,console.warn("The performance of synchronously reading data from GPU to CPU is poor on the webgpu backend, please use asynchronous APIs instead."));const r=["opaque","premultiplied"],o=t.resource,i=o.size;kt(i%4===0,(()=>"Because there is 4 bytes for one pixel, buffer size must be multiple of 4."));const s=i/4,c=new ArrayBuffer(i),u=256,l=256,d=r.map((e=>new OffscreenCanvas(u,l))),p=new OffscreenCanvas(u,l);this.endComputePassEncoder(),d.map(((e,t)=>{const n=e.getContext("webgpu");return n.configure({device:this.device,format:"bgra8unorm",usage:GPUTextureUsage.COPY_DST,alphaMode:r[t]}),n.getCurrentTexture()})).map(((e,t)=>{const n=(n,a,i)=>{this.ensureCommandEncoderReady(),this.commandEncoder.copyBufferToTexture({buffer:o,bytesPerRow:1024,offset:i},{texture:e},{width:n,height:a}),this.submitQueue();const s=p.getContext("2d",{willReadFrequently:!0});s.clearRect(0,0,n,a),s.drawImage(d[t],0,0);const u=s.getImageData(0,0,n,a).data,l=r[t],h=new Uint8ClampedArray(c,i,n*a*4);for(let e=0;e<h.length;e+=4)if("premultiplied"===l)h[e+3]=u[e+3];else{const t=u[e];h[e]=u[e+2],h[e+1]=u[e+1],h[e+2]=t}},a=Math.floor(s/65536);let i=u,h=l,f=0;for(let r=0;r<a;r++)n(i,h,f),f+=262144;const m=s%65536;h=Math.floor(m/u),h>0&&(n(i,h,f),f+=1024*h),i=m%u,i>0&&n(i,1,f)}));const h=Kt(c,t.dtype);return this.convertAndCacheOnCPU(e,h),h}async read(e){if(!this.tensorMap.has(e))throw new Error("Tensor ".concat(e," was not registered!"));const t=this.tensorMap.get(e),{values:n}=t;if(null!=n)return n;let a;if("complex64"===t.dtype){const e=await Promise.all([this.read(t.complexTensorInfos.real.dataId),this.read(t.complexTensorInfos.imag.dataId)]);a=mm(e[0],e[1])}else{a=Kt(await this.getBufferData(t.resource),t.dtype)}return this.convertAndCacheOnCPU(e,a),a}copyBuffer(e){const t=e.size,n=e.usage,a=this.bufferManager.acquireBuffer(t,n);return this.ensureCommandEncoderReady(),this.endComputePassEncoder(),this.commandEncoder.copyBufferToBuffer(e,0,a,0,t),this.submitQueue(),a}createTensorFromGPUData(e,t,n){let a=e.buffer;if("complex64"===n)throw new Error("Cannot write to a complex64 dtype. ");const r={id:this.nextDataId()};this.tensorMap.set(r,{dtype:n,shape:t,values:null,refCount:1,external:e.zeroCopy});const o=this.tensorMap.get(r),i=FT(o.dtype)*It(o.shape);if(e.buffer.size<i)throw new Error("GPUBuffer size(".concat(e.buffer.size,") is smaller than tensor size(").concat(i,")!"));if((e.buffer.usage&(GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC))!==(GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC))throw new Error("GPUBuffer.usage should include GPUBufferUsage.STORAGE | GPUBufferUsage.COPY_SRC!");return!0!==e.zeroCopy&&(a=this.copyBuffer(a)),o.resource=a,Qi().makeTensorFromDataId(r,t,n,this)}readToGPU(e){const t=this.tensorMap.get(e),{values:n,dtype:a,shape:r,resource:o}=t;if("complex64"===a)throw new Error("Does not support reading buffer for complex64 dtype.");if(null==o)throw null!=n?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const i=o,s=i.size,c=i.usage,u=this.bufferManager.acquireBuffer(s,c);this.ensureCommandEncoderReady(),this.endComputePassEncoder(),this.commandEncoder.copyBufferToBuffer(o,0,u,0,s),this.submitQueue();const l=this.makeTensorInfo(r,a),d=Qi().makeTensorFromTensorInfo(l);return this.tensorMap.get(l.dataId).resource=u,{tensorRef:d,buffer:u}}bufferSync(e){const t=this.readSync(e.dataId);if("string"===e.dtype)try{const n=t.map((e=>Xo(e)));return oc(e.shape,e.dtype,n)}catch(n){throw new Error("Failed to decode encoded string bytes into utf-8")}return oc(e.shape,e.dtype,t)}async time(e){this.supportTimestampQuery||this.hasTimestampQueryWarned||(console.warn("This device doesn't support timestamp-query extension. Start Chrome browser with flag --enable-dawn-features=allow_unsafe_apis to try it again. Otherwise, zero will be shown for the kernel time when profiling mode is enabled."),this.hasTimestampQueryWarned=!0);const t=this.activeTimers,n=[];let a=!1;null==this.programTimersStack?(this.programTimersStack=n,a=!0):this.activeTimers.push(n),this.activeTimers=n,e();const r=Qo(this.activeTimers.map((e=>e.query))).filter((e=>null!=e)),o=Qo(this.activeTimers.map((e=>e.name))).filter((e=>null!=e));this.activeTimers=t,a&&(this.programTimersStack=null);const i={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},s=await Promise.all(r);return i.kernelMs=wt(s),i.getExtraProfileInfo=()=>s.map(((e,t)=>({name:o[t],ms:e}))).map((e=>"".concat(e.name,": ").concat(e.ms))).join(", "),this.uploadWaitMs=0,this.downloadWaitMs=0,i}makeTensorInfo(e,t,n){"string"===t&&null!=n&&n.length>0&&Bt(n[0])&&(n=n.map((e=>qo(e))));return{dataId:this.write(n,e,t),shape:e,dtype:t}}tensorToBinding(e){if(!e)return null;const t=this.tensorMap.get(e.dataId).resource;return t instanceof GPUBuffer?{buffer:t}:t instanceof GPUTexture?t.createView():t}uploadToGPU(e){const t=this.tensorMap.get(e);if(null!=t.resource)return;const n=FT(t.dtype)*It(t.shape);let a;const r=GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST;if(t.values){if(a=this.bufferManager.acquireBuffer(n,r,!0),"unmapped"===a.mapState){const e=this.bufferManager.acquireBuffer(n,GPUBufferUsage.MAP_WRITE|GPUBufferUsage.COPY_SRC,!0,!1),r=e.getMappedRange();"int32"===t.dtype||"bool"===t.dtype?new Int32Array(r).set(t.values):new Float32Array(r).set(t.values),e.unmap(),this.ensureCommandEncoderReady(),this.endComputePassEncoder(),this.commandEncoder.copyBufferToBuffer(e,0,a,0,n),this.stagingPendingDisposal.push(e)}else{const e=a.getMappedRange();"int32"===t.dtype||"bool"===t.dtype?new Int32Array(e).set(t.values):new Float32Array(e).set(t.values),a.unmap()}t.values=null}else a=this.bufferManager.acquireBuffer(n,r);t.resource=a}makeUniforms(e){let t=0,n=0;const a=[];let r=1;e.forEach((e=>{let o;switch(0===e.data.length&&(e.data=[1]),e.data.length){case 1:o=4;break;case 2:o=8;break;case 3:case 4:case 5:case 6:o=16;break;default:kt(!1,(()=>"Unsupported ".concat(e.data.length,"D shape")))}5!==n&&6!==n||(o=16),o>r&&(r=o),t=Math.ceil(t/o)*o,n=e.data.length,a.push(t),t+=4*e.data.length})),t=Math.ceil(t/r)*r;const o=new ArrayBuffer(t);e.forEach(((e,t)=>{const n=a[t];"int32"===e.type?new Int32Array(o,n,e.data.length).set(e.data):"uint32"===e.type?new Uint32Array(o,n,e.data.length).set(e.data):new Float32Array(o,n,e.data.length).set(e.data)}));const i=this.bufferManager.acquireBuffer(t,GPUBufferUsage.COPY_DST|GPUBufferUsage.UNIFORM);return this.queue.writeBuffer(i,0,o,0,t),this.uniformPendingDisposal.push(i),{offset:0,size:t,buffer:i}}runWebGPUProgram(e,t,n,a,r){if(r||(r=this.makeTensorInfo(e.outputShape,n)),0===It(r.shape))return this.tensorMap.get(r.dataId).values=Mt(r.dtype,0),r;this.uploadToGPU(r.dataId),e.dispatch=((e,t)=>{const n=e.limits.maxComputeWorkgroupsPerDimension,a=t.dispatchLayout,r=t.dispatch;if(r.every((e=>e<=n)))return r;kt(r[0]>n&&void 0===a.y&&void 0===a.z,(()=>"Dispatch size exceeds WebGPU limits in Y or Z dimension."));let o=Math.ceil(Math.sqrt(r[0]));return o>n?(o=Math.ceil(Math.cbrt(r[0])),kt(o<=n,(()=>"Total dispatch size exceeds WebGPU maximum.")),[o,o,o]):[o,o,1]})(this.device,e);const o=t.map(((t,n)=>{if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");return this.uploadToGPU(t.dataId),{dtype:this.tensorMap.get(t.dataId).dtype,shape:t.shape,name:e.variableNames[n]}}));e.shaderKey=function(e,t,n){let a=e.shaderKey;if(null!=e.pixelsOpType)return a;const r=[],o=[];t.forEach((e=>{r.push(e.shape),o.push(e.dtype)})),r.push(n.shape),o.push(n.dtype);const i=t.map((e=>_c(e.shape,n.shape))),s=t.map((e=>Tt(e.shape,n.shape))).join("_"),c=i.map((e=>e.join("_"))).join(";"),u=IT(e)?"flatDispatch":"";return a+="_"+(e.workgroupSize?e.workgroupSize.join(","):"")+r.map((e=>e.length)).join(",")+o.join(",")+e.variableNames.join(",")+c+s+u,a}(e,o,r);const i=nn().getBool("WEBGPU_ENGINE_COMPILE_ONLY");return e.shaderKey in this.pipelineCache||(this.pipelineCache[e.shaderKey]=mT(this.device,e,o,r,i)),e.pipeline=this.pipelineCache[e.shaderKey],i||this.recordAndSubmit(e,r,t,a),r}recordAndSubmit(e,t,n,a){if(e.pipeline instanceof Promise)throw new Error("Please call checkCompileCompletionAsync to ensure parallel compilation is done!");let r=[],o=[];const i="int32";if(null==e.pixelsOpType){r.push({type:"float32",data:[NaN]},{type:"float32",data:[1/0]}),o=n.concat(t).map((e=>e.shape));const e="int32";o.map((t=>{r.push({type:e,data:t});const n=Gt(t);r.push({type:e,data:n})}))}else{const e=Gt(t.shape);r.push({type:i,data:e})}if(e.size){const t=It(e.outputShape);r.push({type:i,data:[e.outputComponent?t/e.outputComponent:t]})}a&&(r=[...r,...a]);const s=[this.tensorToBinding(t),...n.map((e=>this.tensorToBinding(e))),this.makeUniforms(r)];n.forEach((e=>{this.commandQueueOwnedIds.add(e.dataId)})),this.commandQueueOwnedIds.add(t.dataId);const c=this.device.createBindGroup({layout:e.pipeline.getBindGroupLayout(0),entries:s.map(((e,t)=>({binding:t,resource:e})))}),u=null!=this.activeTimers;this.ensureCommandEncoderReady();const l={};u&&this.supportTimestampQuery?(this.endComputePassEncoder(),null==this.querySet&&(this.querySet=this.device.createQuerySet({type:"timestamp",count:this.querySetCount})),l.timestampWrites={querySet:this.querySet,beginningOfPassWriteIndex:0,endOfPassWriteIndex:1},this.computePassEncoder=this.commandEncoder.beginComputePass(l)):this.computePassEncoder||(this.computePassEncoder=this.commandEncoder.beginComputePass(l)),this.computePassEncoder.setPipeline(e.pipeline),this.computePassEncoder.setBindGroup(0,c),this.computePassEncoder.dispatchWorkgroups(e.dispatch[0],e.dispatch[1],e.dispatch[2]),this.dispatchCountInPass++,(u||nn().get("WEBGPU_DEFERRED_SUBMIT_BATCH_SIZE")<=this.dispatchCountInPass||e.pixelsOpType===fT.DRAW)&&(this.endComputePassEncoder(),u?this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime()}):this.submitQueue())}async getQueryTime(){if(!this.supportTimestampQuery)return 0;null==this.queryResolveBuffer&&(this.queryResolveBuffer=this.bufferManager.acquireBuffer(8*this.querySetCount,GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST|GPUBufferUsage.QUERY_RESOLVE)),this.commandEncoder.resolveQuerySet(this.querySet,0,this.querySetCount,this.queryResolveBuffer,0);const e=this.bufferManager.acquireBuffer(8*this.querySetCount,GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST);this.commandEncoder.copyBufferToBuffer(this.queryResolveBuffer,0,e,0,8*this.querySetCount),this.submitQueue(),await e.mapAsync(GPUMapMode.READ);const t=new BigUint64Array(e.getMappedRange()),n=Number(t[1]-t[0])/1e6;return e.unmap(),this.bufferManager.releaseBuffer(e),n}shouldExecuteOnCPU(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:LT;return nn().getBool("WEBGPU_CPU_FORWARD")&&e.every((e=>null==this.tensorMap.get(e.dataId).resource&&It(e.shape)<t))}numDataIds(){return this.tensorMap.numDataIds()-this.tensorDataPendingDisposal.length}dispose(){this.disposed||(null!=this.querySet&&this.querySet.destroy(),this.bufferManager.dispose(),this.textureManager.dispose(),this.disposed=!0)}}var BT;zT.nextDataId=0,DT()&&ts("webgpu",(async()=>{const e={powerPreference:nn().get("WEBGPU_USE_LOW_POWER_GPU")?"low-power":"high-performance"},t=await navigator.gpu.requestAdapter(e),n={},a=[];t.features.has("timestamp-query")&&a.push("timestamp-query"),t.features.has("bgra8unorm-storage")&&a.push(["bgra8unorm-storage"]),n.requiredFeatures=a;const r=t.limits;n.requiredLimits={maxComputeWorkgroupStorageSize:r.maxComputeWorkgroupStorageSize,maxComputeWorkgroupsPerDimension:r.maxComputeWorkgroupsPerDimension,maxStorageBufferBindingSize:r.maxStorageBufferBindingSize,maxBufferSize:r.maxBufferSize,maxComputeWorkgroupSizeX:r.maxComputeWorkgroupSizeX,maxComputeInvocationsPerWorkgroup:r.maxComputeInvocationsPerWorkgroup};const o=await t.requestDevice(n),i=await t.requestAdapterInfo();return new zT(o,i)}),3),function(e){e[e.ADD=0]="ADD",e[e.ATAN2=1]="ATAN2",e[e.COMPLEX_MULTIPLY_IMAG=2]="COMPLEX_MULTIPLY_IMAG",e[e.COMPLEX_MULTIPLY_REAL=3]="COMPLEX_MULTIPLY_REAL",e[e.DIV=4]="DIV",e[e.ELU_DER=5]="ELU_DER",e[e.EQUAL=6]="EQUAL",e[e.FLOOR_DIV=7]="FLOOR_DIV",e[e.GREATER=8]="GREATER",e[e.GREATER_EQUAL=9]="GREATER_EQUAL",e[e.LESS=10]="LESS",e[e.LESS_EQUAL=11]="LESS_EQUAL",e[e.LOGICAL_AND=12]="LOGICAL_AND",e[e.LOGICAL_OR=13]="LOGICAL_OR",e[e.MAX=14]="MAX",e[e.MIN=15]="MIN",e[e.MOD=16]="MOD",e[e.MUL=17]="MUL",e[e.NOT_EQUAL=18]="NOT_EQUAL",e[e.POW=19]="POW",e[e.PRELU=20]="PRELU",e[e.SQUARED_DIFFERENCE=21]="SQUARED_DIFFERENCE",e[e.SUB=22]="SUB"}(BT||(BT={}));const WT="let resultTemp = a + b;",UT="let resultTemp = atan2(a, b);",VT="let resultTemp = areal * breal - aimag * bimag;",GT="let resultTemp = areal * bimag + aimag * breal;",HT="let resultTemp = a / b;",jT="let resultTemp = select(a * (b + 1.0), a, b >= b - b);",KT="\n  let zero = sign(a) * 0 + 0;\n  let one = sign(b) * 0 + 1;\n  let resultTemp = select(zero, one, a == b);\n",qT="\n  let remainder =\n      select(a % b, round(a % b), (round(a) == a) & (round(b) == b));\n  let quotient = (a - remainder) / b;\n  let resultTemp =\n      round(select(quotient, quotient - 1, sign(remainder) == -sign(b)));\n",XT="\n  let zero = sign(a) * 0 + 0;\n  let one = sign(b) * 0 + 1;\n  let resultTemp = select(zero, one, a > b);\n",YT="\n  let zero = sign(a) * 0 + 0;\n  let one = sign(b) * 0 + 1;\n  let resultTemp = select(zero, one, a >= b);\n",QT="\n  let zero = sign(a) * 0 + 0;\n  let one = sign(b) * 0 + 1;\n  let resultTemp = select(zero, one, a < b);\n",ZT="\n  let zero = sign(a) * 0 + 0;\n  let one = sign(b) * 0 + 1;\n  let resultTemp = select(zero, one, a <= b);\n",$T="return f32(a >= 1.0 && b >= 1.0);",JT="return (vec4<f32>(a >= vec4<f32>(1.0)) *\n  vec4<f32>(b >= vec4<f32>(1.0)));",e_="return f32(a >= 1.0 || b >= 1.0);",t_="return min(vec4<f32>(a >= vec4<f32>(1.0)) +\n  vec4<f32>(b >= vec4<f32>(1.0)), vec4<f32>(1.0));",n_="let resultTemp = max(a, b);",a_="let resultTemp = min(a, b);",r_="\n  let isNaN = b == 0.;\n  var resultTemp = a % b;\n  resultTemp = select((resultTemp + b) % b, resultTemp,\n      (a < 0. && b < 0.) || (a >= 0. && b > 0.));\n",o_="\n  let isNaN = !vec4<bool>(b);\n  var resultTemp = vec4<f32>(a % b);\n  if (!((a[0] < 0. && b[0] < 0.) || (a[0] >= 0. && b[0] > 0.))) {\n    resultTemp[0] = (resultTemp[0] + b[0]) % b[0];\n  }\n  if (!((a[1] < 0. && b[1] < 0.) || (a[1] >= 0. && b[1] > 0.))) {\n    resultTemp[1] = (resultTemp[1] + b[1]) % b[1];\n  }\n  if (!((a[2] < 0. && b[2] < 0.) || (a[2] >= 0. && b[2] > 0.))) {\n    resultTemp[2] = (resultTemp[2] + b[2]) % b[2];\n  }\n  if (!((a[3] < 0. && b[3] < 0.) || (a[3] >= 0. && b[3] > 0.))) {\n    resultTemp[3] = (resultTemp[3] + b[3]) % b[3];\n  }\n",i_="let resultTemp = a * b;",s_="\n  var resultTemp = f32(a != b);\n  let valueForNaN = 1.0;\n",c_="\n  var resultTemp = vec4<f32>(a != b);\n  let valueForNaN = 1.0;\n",u_="\n  let isNaN = a < 0.0 && floor(b) < b;\n  if (b == 0.0) {\n    return 1.0;\n  }\n  var resultTemp = select(sign(a) * pow(abs(a), b), pow(abs(a), b),\n      round(abs(b) % 2.0) != 1.0);\n",l_="\n  let isModRound1Bool = vec4<i32>(round(abs(b) % vec4<f32>(2.0))) == vec4<i32>(1);\n  let isModRound1 = vec4<f32>(isModRound1Bool);\n  let multiplier = sign(a) * isModRound1 + (vec4<f32>(1.0) - isModRound1);\n  var resultTemp = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  let isExpZero = b == vec4<f32>(0.0);\n  if (isExpZero.r) {\n    resultTemp.r = 1.0;\n  }\n  if (isExpZero.g) {\n    resultTemp.g = 1.0;\n  }\n  if (isExpZero.b) {\n    resultTemp.b = 1.0;\n  }\n  if (isExpZero.a) {\n    resultTemp.a = 1.0;\n  }\n  let isNaN = (a < vec4<f32>(0.0)) & (floor(b) < b);\n",d_="if (a < 0.0) { return b * a; }  return a;",p_="\n  let aLessThanZero = vec4<f32>(a < vec4<f32>(0.0));\n  return (aLessThanZero * (b * a)) + ((vec4<f32>(1.0) - aLessThanZero) * a);\n",h_="let resultTemp = (a - b) * (a - b);",f_="let resultTemp = a - b;";function m_(e,t){let n;do{switch(e){case BT.ATAN2:n=UT;break;case BT.MAX:n=n_;break;case BT.MIN:n=a_;break;case BT.MOD:n=t?o_:r_;break;case BT.NOT_EQUAL:n=t?c_:s_;break;case BT.POW:n=t?l_:u_;break;default:continue}let a,r,o;return t?(a="isnanVec4",r="vec4<f32>",o="vec4<bool>"):(a="isnan",r="f32",o="bool"),"\n      let aIsNaN = ".concat(a,"(a);\n      let aPostLegalization = select(a, ").concat(r,"(42), aIsNaN);\n      let bIsNaN = ").concat(a,"(b);\n      let bPostLegalization = select(b, ").concat(r,"(42), bIsNaN);\n      let isNaN = false;\n      let valueForNaN = uniforms.NAN;\n      {\n        let a = aPostLegalization;\n        let b = bPostLegalization;\n        ").concat(n,"\n        return select(\n            resultTemp, ").concat(r,"(valueForNaN),\n            ").concat(o,"(isNaN) | aIsNaN | bIsNaN);\n      }\n    ")}while(0);switch(e){case BT.ADD:n=WT;break;case BT.COMPLEX_MULTIPLY_IMAG:n=GT;break;case BT.COMPLEX_MULTIPLY_REAL:n=VT;break;case BT.DIV:n=HT;break;case BT.ELU_DER:n=jT;break;case BT.EQUAL:n=KT;break;case BT.FLOOR_DIV:n=qT;break;case BT.GREATER:n=XT;break;case BT.GREATER_EQUAL:n=YT;break;case BT.LESS:n=QT;break;case BT.LESS_EQUAL:n=ZT;break;case BT.LOGICAL_AND:return t?JT:$T;case BT.LOGICAL_OR:return t?t_:e_;case BT.MUL:n=i_;break;case BT.PRELU:return t?p_:d_;case BT.SQUARED_DIFFERENCE:n=h_;break;case BT.SUB:n=f_}return"\n    ".concat(n,"\n    return resultTemp;\n  ")}var g_;!function(e){e[e.ABS=0]="ABS",e[e.ACOS=1]="ACOS",e[e.ACOSH=2]="ACOSH",e[e.ASIN=3]="ASIN",e[e.ASINH=4]="ASINH",e[e.ATAN=5]="ATAN",e[e.ATANH=6]="ATANH",e[e.CEIL=7]="CEIL",e[e.COS=8]="COS",e[e.COSH=9]="COSH",e[e.ELU=10]="ELU",e[e.ERF=11]="ERF",e[e.EXP=12]="EXP",e[e.EXPM1=13]="EXPM1",e[e.FLOOR=14]="FLOOR",e[e.IS_FINITE=15]="IS_FINITE",e[e.IS_INF=16]="IS_INF",e[e.IS_NAN=17]="IS_NAN",e[e.LINEAR=18]="LINEAR",e[e.LOG=19]="LOG",e[e.LOG1P=20]="LOG1P",e[e.LOGICAL_NOT=21]="LOGICAL_NOT",e[e.NEG=22]="NEG",e[e.RELU=23]="RELU",e[e.RELU6=24]="RELU6",e[e.LEAKYRELU=25]="LEAKYRELU",e[e.RECIPROCAL=26]="RECIPROCAL",e[e.ROUND=27]="ROUND",e[e.RSQRT=28]="RSQRT",e[e.SELU=29]="SELU",e[e.SIGMOID=30]="SIGMOID",e[e.SIGN=31]="SIGN",e[e.SIN=32]="SIN",e[e.SINH=33]="SINH",e[e.SOFTPLUS=34]="SOFTPLUS",e[e.SQRT=35]="SQRT",e[e.SQUARE=36]="SQUARE",e[e.STEP=37]="STEP",e[e.TAN=38]="TAN",e[e.TANH=39]="TANH",e[e.TO_INT=40]="TO_INT"}(g_||(g_={}));const y_="return abs(a);",b_="\n  if (abs(a) > 1.) {\n    return uniforms.NAN;\n  }\n  return acos(a);\n",x_="\n  if (a < 1.) {\n    return uniforms.NAN;\n  }\n  return acosh(a);\n",v_="\n  if (abs(a) > 1.) {\n    return uniforms.NAN;\n  }\n  return asin(a);\n",w_="return asinh(a);",k_="\n  if (isnan(a)) {\n    return uniforms.NAN;\n  }\n  return atan(a);\n",S_="\n  if (abs(a) > 1.) {\n    return uniforms.NAN;\n  }\n  if (a == 1.) {\n    return uniforms.INFINITY;\n  }\n  if (a == -1.) {\n    return -uniforms.INFINITY;\n  }\n  return atanh(a);\n",C_="return ceil(a);",I_="return cos(a);",N_="\n  let e2x = exp(-a);\n  return (e2x + 1.0 / e2x) / 2.0;\n",T_="return exp(a) - 1.0;",__="if (a >= 0.0) { return a; }  return (exp(a) - 1.0);",E_="\n  var resFloat = exp(a) - vec4<f32>(1.0);\n  if (a.r >= 0.0) {\n    resFloat.r = a.r;\n  }\n  if (a.g >= 0.0) {\n    resFloat.g = a.g;\n  }\n  if (a.b >= 0.0) {\n    resFloat.b = a.b;\n  }\n  if (a.a >= 0.0) {\n    resFloat.a = a.a;\n  }\n  return resFloat;\n",R_='\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  let p = '.concat(um,";\n  let a1 = ").concat(lm,";\n  let a2 = ").concat(dm,";\n  let a3 = ").concat(pm,";\n  let a4 = ").concat(hm,";\n  let a5 = ").concat(fm,";\n\n  let sign = sign(a);\n  let absA = abs(a);\n  let t = 1.0 / (1.0 + p * absA);\n  return sign * (1.0 - (((((a5 * t + a4) * t) + a3) * t + a2) * t + a1) * t * exp(-absA * absA));\n"),A_="return exp(a);",O_="return floor(a);",F_="return f32(!isnan(a) && !isinf(a));",D_="return f32(isinf(a));",M_="return f32(isnan(a));",P_="return a;",L_="if (a < 0.0) { return uniforms.NAN; }\n  return log(a);",z_="\n  if (isnan(a)) { return a; }\n  return log(1.0 + a);\n",B_="return f32(!(a >= 1.0));",W_="return -a;",U_="if (a < 0.0) { return uniforms.alpha * a; } return a;",V_="\n  let aLessThanZero = vec4<f32>(a < vec4<f32>(0.0));\n  return (aLessThanZero * (uniforms.alpha * a)) + ((vec4<f32>(1.0) - aLessThanZero) * a);\n",G_="return 1.0 / a;",H_="return select(a, 0.0, a < 0.0);",j_="return clamp(a, 0.0, 6.0);",K_="return clamp(a, vec4<f32>(0.0, 0.0, 0.0, 0.0), vec4<f32>(6.0, 6.0, 6.0, 6.0));",q_="\n  return select(a, vec4<f32>(0.0), a < vec4<f32>(0.0));\n",X_="return round(a);",Y_="return inverseSqrt(a);",Q_="\n  if (a >= 0.0) {\n    return ".concat(cm," * a;\n  } else {\n    return ").concat(sm," * (exp(a) - 1.0);\n  }\n"),Z_="return 1.0 / (1.0 + exp(-1.0 * a));",$_="return sign(a);",J_="return sin(a);",eE="\n  let e2x = exp(a);\n  return (e2x - 1.0 / e2x) / 2.0;\n",tE="\n  let epsilon = 1.1920928955078125e-7;\n  let threshold = log(epsilon) + 2.0;\n\n  let too_large = a > -threshold;\n  let too_small = a < threshold;\n  let exp_a = exp(a);\n\n  if (too_large) {\n    return a;\n  } else if (too_small) {\n    return exp_a;\n  } else {\n    return log(exp_a + 1.0);\n  }\n",nE="return sqrt(a);",aE="return a * a;",rE="\n  if (isnan(a)) {\n    return a;\n  }\n\n  return select(uniforms.stepAlpha, 1.0, a > 0.0);\n",oE="return tan(a);",iE="\n  let e2x = exp(-2.0 * abs(a));\n  return sign(a) * (1.0 - e2x) / (1.0 + e2x);\n",sE="return f32(i32((a)));";function cE(e,t){switch(e){case g_.ABS:return y_;case g_.ACOS:return b_;case g_.ACOSH:return x_;case g_.ASIN:return v_;case g_.ASINH:return w_;case g_.ATAN:return k_;case g_.ATANH:return S_;case g_.COS:return I_;case g_.COSH:return N_;case g_.CEIL:return C_;case g_.ELU:return t?E_:__;case g_.ERF:return R_;case g_.EXP:return A_;case g_.EXPM1:return T_;case g_.FLOOR:return O_;case g_.IS_FINITE:return F_;case g_.IS_INF:return D_;case g_.IS_NAN:return M_;case g_.LINEAR:return P_;case g_.LOG:return L_;case g_.LOG1P:return z_;case g_.LOGICAL_NOT:return B_;case g_.NEG:return W_;case g_.LEAKYRELU:return t?V_:U_;case g_.RECIPROCAL:return G_;case g_.RELU:return t?q_:H_;case g_.RELU6:return t?K_:j_;case g_.ROUND:return X_;case g_.RSQRT:return Y_;case g_.SELU:return Q_;case g_.SIGMOID:return Z_;case g_.SIGN:return $_;case g_.SIN:return J_;case g_.SINH:return eE;case g_.SOFTPLUS:return tE;case g_.SQRT:return nE;case g_.SQUARE:return aE;case g_.STEP:return rE;case g_.TAN:return oE;case g_.TANH:return iE;case g_.TO_INT:return sE;default:throw new Error("BinaryType ".concat(e," is not implemented!"))}}function uE(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3;if(null===e)return"";let r="";if("linear"===e)r=cE(g_.LINEAR);else if("relu"===e)r=cE(g_.RELU,n);else if("elu"===e)r=cE(g_.ELU,n);else if("relu6"===e)r=cE(g_.RELU6,n);else if("prelu"===e)r=m_(BT.PRELU,n);else if("sigmoid"===e)r=cE(g_.SIGMOID,n);else{if("leakyrelu"!==e)throw new Error("Activation ".concat(e," has not been implemented for the WebGPU backend."));r=cE(g_.LEAKYRELU,n)}const o=gT(n?4:1);let i="";return i=t?"\n      fn activation(a : ".concat(o,", coords : vec").concat(a,"<i32>) -> ").concat(o," {\n        let b = getPreluActivationWeightsByOutputCoords(coords);\n        ").concat(r,"\n      }"):"\n      fn activation(a : ".concat(o,", coords : vec").concat(a,"<i32>) -> ").concat(o," {\n        ").concat(r,"\n      }"),i}function lE(e,t){return"\n      ".concat(e?"value = value + getBiasByOutputCoords(coords);":"","\n      ").concat(t?"value = activation(value, coords);":"","\n      ")}function dE(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;kt(e&&1===r||!e,(()=>"transposeA ".concat(e," is not compatible with component size ").concat(r)));const o="\n      ".concat(e?"value = getA(batch, col, row);":"value = getA(batch, row, col);","\n\n    "),i=t?"value = getB(batch, col, row);":"value = getB(batch, row, col);";return"\n  fn mm_readA(batch: i32, row: i32, col: i32) -> ".concat(gT(r)," {\n    var value = ").concat(gT(r),"(0.0);\n    ").concat(n&&a?o:"\n    ".concat(e?"if(row < uniforms.dimAOuter && col < uniforms.dimInner)":"if(row < uniforms.aShape[1] && col < uniforms.aShape[2])","\n    {\n      ").concat(o,"\n    }\n    "),"\n    return value;\n  }\n\n  fn mm_readB(batch: i32, row: i32, col: i32) -> ").concat(gT(r)," {\n    var value = ").concat(gT(r),"(0.0);\n    ").concat(i,"\n    return value;\n  }\n  ")}function pE(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1;return"\n  ".concat(dE(n,a,r,o,arguments.length>6&&void 0!==arguments[6]&&arguments[6],i),"\n  fn mm_write(batch: i32, row: i32, col: i32, valueIn: ").concat(gT(i),") {\n    ").concat(r&&o?"":"if (row < uniforms.dimAOuter && col < uniforms.dimBOuter)","\n    {\n      var value = valueIn;\n      let coords = vec3<i32>(batch, row, col);\n      ").concat(lE(e,t),"\n      setOutputAtCoords(coords[0], coords[1], coords[2], value);\n    }\n  }\n  ")}function hE(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:32,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:32,i=arguments.length>6&&void 0!==arguments[6]&&arguments[6];const s=t[1]*e[1],c=t[0]*e[0],u=n?s:a,l=n?a:s,d=u/t[0],p=a/t[1],h=e[1],f=e[0];return kt((n&&4===d&&4===e[1]||!n&&(3===d||4===d))&&u%t[0]===0&&a%t[1]===0&&4===e[0],(()=>"If transposeA ".concat(n," is true, innerElementSize ").concat(d," and workPerThread[1] ").concat(e[1]," must be 4.\n          Otherwise, innerElementSize ").concat(d," must be 3 or 4.\n      tileAWidth ").concat(u," must be divisible by workgroupSize[0]").concat(t[0],". tileInner ").concat(a," must be divisible by workgroupSize[1] ").concat(t[1],". colPerThread ").concat(e[0]," must be 4."))),"\n  var<workgroup> mm_Asub : array<array<vec".concat(d,"<f32>, ").concat(u/d,">, ").concat(l,">;\n  var<workgroup> mm_Bsub : array<array<vec4<f32>, ").concat(c/e[0],">, ").concat(a,">;\n\n  ").concat(xT()," {\n    let localRow = i32(localId.y);\n    let tileRow = localRow * ").concat(h,";\n    let tileCol = i32(localId.x);\n\n    let globalRow = i32(globalId.y) * ").concat(h,";\n    let globalCol = i32(globalId.x) * ").concat(f,";\n    let batch = ").concat(r?"0":"i32(globalId.z)",";\n    let batchA = ").concat(r||!i?"batch":"batch % uniforms.aShape[0]",";\n    let batchB = ").concat(r||!i?"batch":"batch % uniforms.bShape[0]",";\n    let globalRowStart = i32(workgroupId.y) * ").concat(s,";\n\n    let numTiles = ").concat(r?"".concat(Math.ceil(o/a)):"(uniforms.dimInner - 1) / ".concat(a," + 1"),";\n    var kStart = ").concat(r?"i32(globalId.z) * ".concat(o):"0",";\n\n    var acc: array<vec4<f32>, ").concat(h,">;\n\n    // Loop over shared dimension.\n    let tileRowB = localRow * ").concat(p,";\n    for (var t = 0; t < numTiles; t++) {\n        // Load one tile of A into local memory.\n        for (var innerRow = 0; innerRow < ").concat(h,"; innerRow++) {\n            let inputRow = tileRow + innerRow;\n            let inputCol = tileCol;\n            ").concat(((e,t)=>e?"\n        mm_Asub[inputRow][inputCol] = mm_readA(batchA,\n          kStart + inputRow,\n          globalRowStart + inputCol * ".concat(t,");\n        "):"\n        mm_Asub[inputRow][inputCol] = mm_readA(batchA,\n          globalRow + innerRow,\n          kStart + inputCol * ".concat(t,");\n        "))(n,d),"\n        }\n\n        // Load one tile of B into local memory.\n        for (var innerRow = 0; innerRow < ").concat(p,"; innerRow++) {\n            let inputRow = tileRowB + innerRow;\n            let inputCol = tileCol;\n            mm_Bsub[inputRow][inputCol] = mm_readB(batchB, kStart + inputRow, globalCol);\n        }\n        kStart = kStart + ").concat(a,";\n        workgroupBarrier();\n\n        // Compute acc values for a single thread.\n        ").concat(((e,t,n,a)=>{if(e)return"\n      for (var k = 0; k < ".concat(a,"; k++) {\n        let BCached0 = mm_Bsub[k][tileCol];\n        let ACached0 = mm_Asub[k][localRow];\n        for (var i = 0; i < ").concat(n,"; i++) {\n          acc[i] = fma(BCached0, vec4<f32>(ACached0[i]), acc[i]);\n        }\n      }");{let e="",r="";for(let n=0;n<t;n++)e+="let BCached".concat(n," = mm_Bsub[k * ").concat(t," + ").concat(n,"][tileCol];"),r+="acc[i] = fma(BCached".concat(n,", vec4<f32>(ACached[").concat(n,"]), acc[i]);");return"\n      for (var k = 0; k < ".concat(a/t,"; k++) {\n        ").concat(e,"\n        for (var i = 0; i < ").concat(n,"; i++) {\n          let ACached = mm_Asub[tileRow + i][k];\n          ").concat(r,"\n        }\n      }")}})(n,d,h,a),"\n        workgroupBarrier();\n    }\n\n    for (var innerRow = 0; innerRow < ").concat(h,"; innerRow++) {\n        mm_write(batch, globalRow + innerRow, globalCol, acc[innerRow]);\n    }\n  }")}const fE=e=>e?"\n        mm_Asub[inputRow][inputCol] = mm_readA(batchA,\n          kStart + inputRow,\n          globalRowStart + inputCol);\n        ":"\n        mm_Asub[inputRow][inputCol] = mm_readA(batchA,\n          globalRowStart + inputRow,\n          kStart + inputCol);\n        ";function mE(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:32,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:32,i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];const c=e[1]*t[1],u=e[0]*t[0],l=n?c:a,d=n?a:c;kt(d%t[1]===0&&l%t[0]===0&&a%t[1]===0,(()=>"tileAHight ".concat(d," must be divisible by workgroupSize[1]").concat(t[1],", tileAWidth ").concat(l," must be divisible by workgroupSize[0]").concat(t[0],", tileInner ").concat(a," must be divisible by workgroupSize[1]").concat(t[1])));const p=d/t[1],h=l/t[0],f=a/t[1],m=e[1],g=e[0],y=i?"\n      let localRow = i32(localId.y);\n      let localCol = i32(localId.x);\n      let globalRowStart = i32(workgroupId.y) * ".concat(c,";\n      let globalColStart = i32(workgroupId.x) * ").concat(u,";\n\n      // Loop over shared dimension.\n      for (var t = 0; t < numTiles; t++) {\n        // Load one tile of A into local memory.\n        for (var inputRow = localRow; inputRow < ").concat(d,"; inputRow = inputRow + ").concat(t[1],") {\n          for (var inputCol = localCol; inputCol < ").concat(l,"; inputCol = inputCol + ").concat(t[0],") {\n            ").concat(fE(n),"\n          }\n        }\n        // Load one tile of B into local memory.\n        for (var inputRow = localRow; inputRow < ").concat(a,"; inputRow = inputRow + ").concat(t[1],") {\n              for (var inputCol = localCol; inputCol < ").concat(u,"; inputCol = inputCol + ").concat(t[0],") {\n            mm_Bsub[inputRow][inputCol] = mm_readB(batchB,\n              kStart + inputRow,\n              globalColStart + inputCol);\n          }\n        }\n        kStart = kStart + ").concat(a,";\n        workgroupBarrier();\n\n        // Compute acc values for a single thread.\n        var BCached : array<f32, ").concat(g,">;\n        for (var k = 0; k < ").concat(a,"; k++) {\n          for (var inner = 0; inner < ").concat(g,"; inner++) {\n            BCached[inner] = mm_Bsub[k][localCol + inner * ").concat(t[0],"];\n          }\n          for (var innerRow = 0; innerRow < ").concat(m,"; innerRow++) {\n            let ACached = ").concat(n?"mm_Asub[k][localRow + innerRow * ".concat(t[1],"];"):"mm_Asub[localRow + innerRow * ".concat(t[1],"][k];"),"\n            for (var innerCol = 0; innerCol < ").concat(g,"; innerCol++) {\n              acc[innerRow][innerCol] =\n                  fma(ACached, BCached[innerCol], acc[innerRow][innerCol]);\n            }\n          }\n        }\n        workgroupBarrier();\n      }\n      for (var innerRow = 0; innerRow < ").concat(m,"; innerRow++) {\n        let gRow = globalRowStart + localRow + innerRow * ").concat(t[1],";\n        for (var innerCol = 0; innerCol < ").concat(g,"; innerCol++) {\n          let gCol = globalColStart + localCol + innerCol * ").concat(t[0],";\n          mm_write(batch, gRow, gCol, acc[innerRow][innerCol]);\n        }\n      }\n      "):"\n  let tileRow = i32(localId.y) * ".concat(m,";\n  let tileCol = i32(localId.x) * ").concat(g,";\n\n  let globalRow = i32(globalId.y) * ").concat(m,";\n  let globalCol = i32(globalId.x) * ").concat(g,";\n  let globalRowStart = i32(workgroupId.y) * ").concat(c,";\n\n  let tileRowA = i32(localId.y) * ").concat(p,";\n  let tileColA = i32(localId.x) * ").concat(h,";\n  let tileRowB = i32(localId.y) * ").concat(f,";\n  // Loop over shared dimension.\n  for (var t = 0; t < numTiles; t++) {\n    // Load one tile of A into local memory.\n    for (var innerRow = 0; innerRow < ").concat(p,"; innerRow++) {\n      for (var innerCol = 0; innerCol < ").concat(h,"; innerCol++) {\n        let inputRow = tileRowA + innerRow;\n        let inputCol = tileColA + innerCol;\n        ").concat(fE(n),"\n      }\n    }\n\n    // Load one tile of B into local memory.\n    for (var innerRow = 0; innerRow < ").concat(f,"; innerRow++) {\n      for (var innerCol = 0; innerCol < ").concat(g,"; innerCol++) {\n        let inputRow = tileRowB + innerRow;\n        let inputCol = tileCol + innerCol;\n        mm_Bsub[inputRow][inputCol] = mm_readB(batchB,\n          kStart + inputRow,\n          globalCol + innerCol);\n      }\n    }\n    kStart = kStart + ").concat(a,";\n    workgroupBarrier();\n\n    // Compute acc values for a single thread.\n    var BCached : array<f32, ").concat(g,">;\n    for (var k = 0; k < ").concat(a,"; k++) {\n      for (var inner = 0; inner < ").concat(g,"; inner++) {\n        BCached[inner] = mm_Bsub[k][tileCol + inner];\n      }\n\n      for (var innerRow = 0; innerRow < ").concat(m,"; innerRow++) {\n        ").concat((e=>e?"let ACached = mm_Asub[k][tileRow + innerRow];":"let ACached = mm_Asub[tileRow + innerRow][k];")(n),"\n        for (var innerCol = 0; innerCol < ").concat(g,"; innerCol++) {\n          acc[innerRow][innerCol] =\n              fma(ACached, BCached[innerCol], acc[innerRow][innerCol]);\n        }\n      }\n    }\n\n    workgroupBarrier();\n  }\n\n  for (var innerRow = 0; innerRow < ").concat(m,"; innerRow++) {\n    for (var innerCol = 0; innerCol < ").concat(g,"; innerCol++) {\n      mm_write(batch, globalRow + innerRow, globalCol + innerCol,\n          acc[innerRow][innerCol]);\n    }\n  }\n  ");return"\n    var<workgroup> mm_Asub : array<array<f32, ".concat(l,">, ").concat(d,">;\n    var<workgroup> mm_Bsub : array<array<f32, ").concat(u,">, ").concat(a,">;\n\n    ").concat(xT()," {\n      let batch = ").concat(r?"0":"i32(globalId.z)",";\n      let batchA = ").concat(r||!s?"batch":"batch % uniforms.aShape[0]",";\n      let batchB = ").concat(r||!s?"batch":"batch % uniforms.bShape[0]",";\n      let numTiles = ").concat(r?"".concat(Math.ceil(o/a)):"(uniforms.dimInner - 1) / ".concat(a," + 1"),";\n      var kStart = ").concat(r?"i32(globalId.z) * ".concat(o):"0",";\n\n      var acc : array<array<f32, ").concat(g,">, ").concat(m,">;\n\n      // Without this initialization strange values show up in acc.\n      for (var innerRow = 0; innerRow < ").concat(m,"; innerRow++) {\n        for (var innerCol = 0; innerCol < ").concat(g,"; innerCol++) {\n          acc[innerRow][innerCol] = 0.0;\n        }\n      }\n      ").concat(y,"\n    }\n  ")}class gE{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.variableNames=["A","B"],this.uniforms="dimAOuter : i32, dimBOuter : i32, dimInner : i32,",this.outputShape=t,this.dispatchLayout={x:[2],y:[1],z:[0]};const c=n?e[1]:e[2];if(this.isVec4=(c%4===0&&!n||t[1]%4===0&&n)&&t[2]%4===0&&!a,this.outputComponent=this.isVec4?4:1,this.isVectorA=1===t[1]&&!n,!this.isVec4&&this.isVectorA)this.elementsPerThread=[1,1,1],this.workgroupSize=[32,1,1];else{const e=function(e,t,n){const a=[8,8,1],r=[4,4,1];return arguments.length>3&&void 0!==arguments[3]&&arguments[3]||(e<=8&&(r[1]=1),t<=16&&n<=16&&(a[0]=4)),{workgroupSize:a,elementsPerThread:r}}(t[1],c,t[2],n);this.workgroupSize=e.workgroupSize,this.elementsPerThread=e.elementsPerThread}this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize,this.elementsPerThread);const u=null!=r,l=null!=i;u&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),this.sequentialAccessByThreads=s,this.transposeA=n,this.transposeB=a,this.addBias=u,this.activation=o,this.hasPreluActivationWeights=l,[this.fitAOuter,this.fitBOuter,this.fitInner]=this.getShapeFit(t[1],t[2],c),this.shaderKey="matMulPacked_".concat(this.elementsPerThread,"_").concat(n,"_").concat(a,"_").concat(this.activation,"_").concat(this.fitAOuter,"_").concat(this.fitBOuter,"_").concat(this.fitInner,"_").concat(this.isVec4,"_").concat(this.isVectorA,"_").concat(this.sequentialAccessByThreads)}getShapeFit(e,t,n){const a=this.workgroupSize[1]*this.elementsPerThread[1],r=this.workgroupSize[0]*this.elementsPerThread[0];!this.isVec4&&this.isVectorA?this.tileInner=4*this.workgroupSize[0]:this.tileInner=r;return[e%a===0,t%r===0,n%this.tileInner===0]}getUserCode(){const e="\n      ".concat(uE(this.activation,this.hasPreluActivationWeights,this.isVec4),"\n      ").concat(pE(this.addBias,this.activation,!1,this.transposeB,this.fitAOuter,this.fitBOuter,this.fitInner,this.isVec4?4:1),"\n      ").concat(this.isVec4?hE(this.elementsPerThread,this.workgroupSize,this.transposeA,this.tileInner,!1,null,!0):this.isVectorA?function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];kt(1===e[1]&&1===e[2],(()=>"A linear work group size is required. But got ".concat(e,".")));const n=4*e[0];return"\n    var<workgroup> mm_Asub : array<vec4<f32>, ".concat(e[0],">;\n\n    ").concat(xT()," {\n      let tileCol = i32(localId.x);\n      let globalCol = i32(globalId.x);\n      let globalRow = i32(globalId.y);\n\n      let numTiles = (uniforms.dimInner - 1) / ").concat(n," + 1;\n      let batch = i32(globalId.z);\n      let batchA = batch % uniforms.aShape[0];\n      let batchB = batch % uniforms.bShape[0];\n      // Without this initialization strange values show up in acc.\n      var acc = 0.0;\n\n      // Loop over shared dimension.\n      for (var t = 0; t < numTiles; t++) {\n        // Load one tile of A into local memory.\n        let colA = t * ").concat(n," + tileCol * 4;\n        mm_Asub[tileCol] = vec4<f32>(").concat((e=>e?"\n      mm_readA(batchA, colA, globalRow),\n      mm_readA(batchA, colA + 1, globalRow),\n      mm_readA(batchA, colA + 2, globalRow),\n      mm_readA(batchA, colA + 3, globalRow)\n  ":"\n      mm_readA(batchA, globalRow, colA),\n      mm_readA(batchA, globalRow, colA + 1),\n      mm_readA(batchA, globalRow, colA + 2),\n      mm_readA(batchA, globalRow, colA + 3)\n  ")(t),");\n        workgroupBarrier();\n\n        // Compute acc values for a single thread.\n        for (var k = 0; k < ").concat(n/4,"; k++) {\n          let rowB = t * ").concat(n," + k * 4;\n          let BCached = vec4<f32>(mm_readB(batchB, rowB, globalCol),\n                              mm_readB(batchB, rowB + 1, globalCol),\n                              mm_readB(batchB, rowB + 2, globalCol),\n                              mm_readB(batchB, rowB + 3, globalCol));\n\n          let ACached = mm_Asub[k];\n          acc = acc + dot(ACached, BCached);\n        }\n\n        workgroupBarrier();\n      }\n\n      mm_write(batch, globalRow, globalCol, acc);\n    }\n  ")}(this.workgroupSize,this.transposeA):mE(this.elementsPerThread,this.workgroupSize,this.transposeA,this.tileInner,!1,null,this.sequentialAccessByThreads,!0),"\n    ");return e}}class yE{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;this.variableNames=["A","B"],this.uniforms="dimAOuter : i32, dimBOuter : i32, dimInner : i32,",this.workgroupSize=[256,1,1],this.outputShape=e,this.dispatchLayout={x:[],y:[1,2],z:[0]},this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize);const i=null!=a,s=null!=o;i&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),this.transposeA=t,this.transposeB=n,this.addBias=i,this.activation=r,this.hasPreluActivationWeights=s,this.shaderKey="matMulReduce_".concat(this.activation,"_").concat(t,"_").concat(n)}getUserCode(){var e;return"\n      ".concat(uE(this.activation,this.hasPreluActivationWeights),"\n      ").concat(pE(this.addBias,this.activation,this.transposeA,this.transposeB),"\n      ").concat((e=this.workgroupSize[0],"\n    var<workgroup> sumValues : array<f32, ".concat(e,">;\n    ").concat(xT()," {\n      let coords = getOutputCoords();\n      let batch = coords[0];\n      let batchA = batch % uniforms.aShape[0];\n      let batchB = batch % uniforms.bShape[0];\n      let row = coords[1];\n      let col = coords[2];\n      var sum = 0.0;\n      let Length = uniforms.dimInner;\n      for (var k = i32(localId.x); k < Length; k = k + ").concat(e,") {\n        let dataA = mm_readA(batchA, row, k);\n        let dataB = mm_readB(batchB, k, col);\n        sum = sum + dataA * dataB;\n      }\n      sumValues[localId.x] = sum;\n      workgroupBarrier();\n\n      for(var currentSize = ").concat(e/2,"u; currentSize > 1u;\n          currentSize = currentSize / 2u) {\n        if (localId.x < currentSize)\n        {\n          sumValues[localId.x] = sumValues[localId.x] + sumValues[localId.x + currentSize];\n        }\n        workgroupBarrier();\n      }\n\n      if (localId.x == 0u) {\n        sum = sumValues[0] + sumValues[1];\n        mm_write(batch, row, col, sum);\n      }\n    }\n  ")),"\n    ")}}class bE{constructor(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.variableNames=["A","B"],this.uniforms="dimAOuter : i32, dimBOuter : i32, dimInner : i32,",this.workgroupSize=[16,8,1],this.outputShape=n,this.dispatchLayout={x:[2],y:[1],z:[0]},this.dispatch=[Math.ceil(n[2]/this.workgroupSize[0]),Math.ceil(n[1]/this.workgroupSize[1]),n[0]];const c=null!=o;c&&this.variableNames.push("bias");const u=null!=s;u&&this.variableNames.push("preluActivationWeights"),this.transposeA=a,this.transposeB=r,this.addBias=c,this.activation=i,this.hasPreluActivationWeights=u,this.shaderKey="matMulSmallOutputSize_".concat(this.activation,"_").concat(a,"_").concat(r)}getUserCode(){return"\n      ".concat(uE(this.activation,this.hasPreluActivationWeights),"\n      ").concat(pE(this.addBias,this.activation,this.transposeA,this.transposeB),"\n      ").concat(function(e){const t=e[1],n=e[0],a=t>n?t:n;return"\n  var<workgroup> mm_Asub : array<array<f32, ".concat(a,">, ").concat(t,">;\n  var<workgroup> mm_Bsub : array<array<f32, ").concat(n,">, ").concat(a,">;\n\n  // If the output size is small for matrix multiplication, avoid to use vec4\n  // and handle some elements per thread to optimally utilize the ALU.\n  // Read data from global memory to registers firstly, then store them into\n  // shared memory, so it is instruction-Level parallelism for arithmetic\n  // operations and others handle IO operations between barrier api, makes ALU\n  // and load/store units work simultaneously, could improves the performance.\n  ").concat(xT()," {\n    let tileRow = i32(localId.y);\n    let tileCol = i32(localId.x);\n    let globalRow = i32(globalId.y);\n    let globalCol = i32(globalId.x);\n    let batch = i32(globalId.z);\n    let batchA = batch % uniforms.aShape[0];\n    let batchB = batch % uniforms.bShape[0];\n\n    // uniforms.dimInner should be greater than 0.\n    let numTiles = (uniforms.dimInner - 1) / ").concat(a," + 1;\n    var acc = 0.0;\n\n    var globalColA = tileCol;\n    var globalRowB = 0;\n    var regA = mm_readA(batchA, globalRow, globalColA);\n    var regB0 = mm_readB(batchB, globalRowB + 2 * tileRow, globalCol);\n    var regB1 = mm_readB(batchB, globalRowB + 2 * tileRow + 1, globalCol);\n    globalColA = globalColA + ").concat(a,";\n    globalRowB = globalRowB + ").concat(a,";\n\n    for (var t = 0; t < numTiles; t = t + 1) {\n      mm_Asub[tileRow][tileCol] = regA;\n      mm_Bsub[2 * tileRow][tileCol] = regB0;\n      mm_Bsub[2 * tileRow + 1][tileCol] = regB1;\n\n      workgroupBarrier();\n\n      regA = mm_readA(batchA, globalRow, globalColA);\n      regB0 = mm_readB(batchB, globalRowB + 2 * tileRow, globalCol);\n      regB1 = mm_readB(batchB, globalRowB + 2 * tileRow + 1, globalCol);\n      globalColA = globalColA + ").concat(a,";\n      globalRowB = globalRowB + ").concat(a,";\n\n      for (var k = 0; k < ").concat(a,"; k = k + 1) {\n        acc = acc + mm_Asub[tileRow][k] * mm_Bsub[k][tileCol];\n      }\n      workgroupBarrier();\n    }\n\n    mm_write(batch, globalRow, globalCol, acc);\n  }\n  ")}(this.workgroupSize),"\n    ")}}class xE{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.variableNames=["A","B"],this.uniforms="dimAOuter : i32, dimBOuter : i32, dimInner : i32,",this.workgroupSize=[8,8,1],this.atomic=!0,this.splitedDimInner=128,kt(1===e[0],(()=>"MatMulSplitKProgram only supports batch = 1.")),this.outputShape=e,this.dispatchLayout={x:[2],y:[1],z:[0,3]};const r=(n&&this.outputShape[1]%4===0||!n&&t%4===0)&&this.outputShape[2]%4===0;this.elementsPerThread=[4,4,this.splitedDimInner],this.outputComponent=r?4:1,r||(this.outputShape[1]<16&&(this.elementsPerThread[1]=1),this.outputShape[2]<16&&(this.elementsPerThread[0]=1)),this.dispatch=ET(this.dispatchLayout,[this.outputShape[0],this.outputShape[1],this.outputShape[2],t],this.workgroupSize,this.elementsPerThread),this.transposeA=n,this.transposeB=a,this.shaderKey="matMulSplitK_".concat(n,"_").concat(a,"_").concat(this.elementsPerThread,"_").concat(this.outputComponent)}getUserCode(){const e=this.outputComponent;return"\n      ".concat(dE(!1,this.transposeB,!1,!1,!1,e),"\n      fn mm_write(batch: i32, row : i32, col : i32, value : ").concat(gT(e),") {\n        if (row < uniforms.dimAOuter && col < uniforms.dimBOuter) {\n          let coords = vec3<i32>(batch, row, col);\n          let flatIndex = getOutputIndexFromCoords(coords);\n          // The problem is that we should initialize output to zero before using.\n          // Otherwise, the original value will be added to the result.\n          for (var i = 0; i < ").concat(e,"; i = i + 1) {\n            ").concat(hT("&result[flatIndex + i]","".concat(e>1?"value[i]":"value"),"float32"),"\n          }\n        }\n      }\n      ").concat(4===e?hE(this.elementsPerThread,this.workgroupSize,this.transposeA,32,!0,this.splitedDimInner):mE(this.elementsPerThread,this.workgroupSize,this.transposeA,32,!0,this.splitedDimInner),"\n    ")}}class vE{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.uniforms="",this.variableNames=["x"],this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e,this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize),this.addBias=null!=t,this.hasPreluActivationWeights=null!=a,this.activation=n,this.addBias&&this.variableNames.push("bias"),this.hasPreluActivationWeights&&this.variableNames.push("preluActivationWeights"),this.shaderKey="biasActivation_".concat(n)}getUserCode(){return"\n    ".concat(uE(this.activation,this.hasPreluActivationWeights),"\n    ").concat(xT("index")," {\n      if (index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n        var value = getXByOutputIndex(index);\n        ").concat(lE(this.addBias,this.activation),"\n        setOutputAtIndex(index, value);\n      }\n    }\n    ")}}class wE{constructor(e){this.variableNames=[],this.outputShape=[],this.uniforms="value : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e,this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="fill"}getUserCode(){return"\n    ".concat(xT("index")," {\n      if (index < uniforms.size) {\n        setOutputAtIndex(index, uniforms.value);\n      }\n    }\n  ")}}function kE(e){const{backend:t,attrs:n}=e,{shape:a,value:r}=n;let{dtype:o}=n;if(o=o||Wt(r),"string"===o){const e=Pt(o,It(a));return e.fill(r),t.makeTensorInfo(a,o,e)}{const e=new wE(a),n=[{type:"float32",data:[r]}];return t.runWebGPUProgram(e,[],o,n)}}const SE={kernelName:fa,backendName:"webgpu",kernelFunc:kE};function CE(e){const{inputs:t,attrs:n}=e,{x:a}=t,{shape:r}=n,o=It(a.shape),i=Ot(r,o),s=It(i);return kt(o===s,(()=>"The new shape (".concat(i,") has ").concat(s," elements and the old ")+"shape (".concat(a.shape,") has ").concat(o," elements. The new shape and old ")+"shape must have the same number of elements.")),e.backend.incRef(a.dataId),{dataId:a.dataId,shape:i,dtype:a.dtype}}const IE={kernelName:xr,backendName:"webgpu",kernelFunc:CE};function NE(e){let{a:t,b:n,transposeA:a,transposeB:r,backend:o,bias:i=null,preluActivationWeights:s=null,leakyreluAlpha:c=0,activation:u=null}=e;const l=t.shape.length,d=n.shape.length,p=a?t.shape[l-2]:t.shape[l-1],h=r?n.shape[d-1]:n.shape[d-2],f=a?t.shape[l-1]:t.shape[l-2],m=r?n.shape[d-2]:n.shape[d-1],g=t.shape.slice(0,-2),y=n.shape.slice(0,-2),b=It(g),x=It(y),v=Rc(t.shape.slice(0,-2),n.shape.slice(0,-2)).concat([f,m]);kt(p===h,(()=>"Error in matMul: inner shapes (".concat(p,") and (")+"".concat(h,") of Tensors with shapes ").concat(t.shape," and ")+"".concat(n.shape," and transposeA=").concat(a)+" and transposeB=".concat(r," must match.")));const w=a?[b,p,f]:[b,f,p],k=r?[x,m,h]:[x,h,m],S=CE({inputs:{x:t},backend:o,attrs:{shape:w}}),C=CE({inputs:{x:n},backend:o,attrs:{shape:k}}),I=[S,C],N=Math.max(b,x),T=[S,C],_=[{type:"int32",data:[f]},{type:"int32",data:[m]},{type:"int32",data:[p]}];let E,R;const A=[N,f,m];let O=nn().get("WEBGPU_MATMUL_PROGRAM_TYPE");if(O<0){const e=nn().getNumber("WEBGPU_THRESHOLD_TO_INCREASE_WORKGROUPS_FOR_MATMUL"),t=e>0?e:o.thresholdToIncreaseWorkgroups,n=N*Math.ceil(f/32)*Math.ceil(m/32);O=n<=t||f<=8&&n<=2*t?N*f*m<=128?PT.MatMulReduceProgram:1===N&&h>=2e3?PT.MatMulSplitKProgram:PT.MatMulSmallOutputSizeProgram:PT.MatMulPackedProgram}switch(O){case PT.MatMulReduceProgram:E=new yE(A,a,r,i,u,s);break;case PT.MatMulSplitKProgram:if(R=kE({backend:o,attrs:{shape:A,value:0,dtype:t.dtype}}),E=new xE(A,h,a,r),i||u){R=o.runWebGPUProgram(E,T,t.dtype,_,R);const e=new vE(R.shape,i,u,s);let n=null;const a=[R];i&&a.push(i),s&&a.push(s),"leakyrelu"===u&&(n=[{type:"float32",data:[c]}],e.uniforms+=" alpha : f32,");const r=o.runWebGPUProgram(e,a,R.dtype,n);I.push(R);const l=CE({inputs:{x:r},backend:o,attrs:{shape:v}});I.push(r);for(const t of I)o.disposeData(t.dataId);return l}break;case PT.MatMulSmallOutputSizeProgram:E=new bE(w,k,A,a,r,i,u,s);break;case PT.MatMulPackedProgram:const e=o.adapterInfo.isIntel();E=new gE(w,A,a,r,i,u,s,e);break;default:throw new Error("Unsupported MatMulProgramType ".concat(O,"."))}i&&T.push(i),s&&T.push(s),"leakyrelu"===u&&(_.push({type:"float32",data:[c]}),E.uniforms+=" alpha : f32,"),R=o.runWebGPUProgram(E,T,t.dtype,_,R);const F=CE({inputs:{x:R},backend:o,attrs:{shape:v}});I.push(R);for(const D of I)o.disposeData(D.dataId);return F}const TE={kernelName:yo,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{a:r,b:o,bias:i,preluActivationWeights:s}=t,{transposeA:c,transposeB:u,activation:l,leakyreluAlpha:d}=a;return NE({a:r,b:o,transposeA:c,transposeB:u,backend:n,bias:i,preluActivationWeights:s,leakyreluAlpha:d,activation:l})}};class _E{constructor(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.workgroupSize=[128,1,1],this.size=!0,this.outputShape=Rc(t,n),this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="binaryOpComplex_".concat(e),this.op=e}getUserCode(){const e=m_(this.op,!1);return"\n      fn binaryOpComplex(\n          areal : f32, aimag : f32, breal : f32, bimag : f32) -> f32 {\n        ".concat(e,"\n      }\n\n      ").concat(xT("index")," {\n        if(index < uniforms.size) {\n          let areal = getARealByOutputIndex(index);\n          let aimag = getAImagByOutputIndex(index);\n          let breal = getBRealByOutputIndex(index);\n          let bimag = getBImagByOutputIndex(index);\n          setOutputAtIndex(index, binaryOpComplex(areal, aimag, breal, bimag));\n        }\n      }\n    ")}}class EE{constructor(e,t,n){if(this.size=!0,this.variableNames=["A","B"],this.outputShape=Rc(t,n),this.dispatchLayout=OT(this.outputShape),this.op=e,this.useSharedMemoryWithA=t.length<=1&&n.length>1&&t[0]<128,this.useSharedMemoryWithB=n.length<=1&&t.length>1&&n[0]<128,this.useSharedMemoryWithA||this.useSharedMemoryWithB)this.outputComponent=1,this.variableComponents=[1,1],this.lastDimensionSize=this.useSharedMemoryWithB?n[0]:t[0],this.shaderKey="binary_".concat(e,"_").concat(this.lastDimensionSize),this.type="shared",this.workgroupSize=[256,1,1];else{const a=t.length>0&&t[t.length-1]%4===0,r=n.length>0&&n[n.length-1]%4===0;a&&r?(this.outputComponent=4,this.variableComponents=[4,4]):a&&(Nt(n)||1===n[n.length-1])||r&&(Nt(t)||1===t[t.length-1])?(this.outputComponent=4,this.variableComponents=a?[4,1]:[1,4]):(this.outputComponent=1,this.variableComponents=[1,1]),this.type="nonshared",this.shaderKey="binary_".concat(e,"_").concat(this.variableComponents),this.workgroupSize=[128,1,1]}this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize,[this.outputComponent,1,1])}getUserCode(){let e;const t=4===this.outputComponent?"vec4<f32>":"f32",n="\n    fn binaryOperation(a : ".concat(t,", b : ").concat(t,") -> ").concat(t," {\n      ").concat(m_(this.op,4===this.outputComponent),"\n    };\n    ");if("shared"===this.type){const t=this.lastDimensionSize>1?"coords[".concat(this.outputShape.length-1,"]"):"0",a=this.useSharedMemoryWithB?"let a = getAByOutputIndex(index);\n          let b = sharedBuf[".concat(t,"];"):"let a = sharedBuf[".concat(t,"];\n          let b = getBByOutputIndex(index);");e="\n        ".concat(n,"\n        var<workgroup> sharedBuf : array<f32, ").concat(this.lastDimensionSize,">;\n        ").concat(xT("index")," {\n          // Fill in the shared memory buffer.\n          let localIndex = i32(localId.x);\n          if(localIndex < ").concat(this.lastDimensionSize,") {\n            sharedBuf[localIndex] = f32(").concat(this.useSharedMemoryWithB?"B":"A","[localIndex]);\n          }\n          workgroupBarrier();\n\n          if(index < uniforms.size) {\n            let coords = getCoordsFromIndex(index);\n            ").concat(a,"\n            setOutputAtIndex(index, binaryOperation(a, b));\n          }\n        }\n        ")}else e="\n       ".concat(n,"\n       ").concat(xT("index")," {\n         if (index < uniforms.size) {\n           let coords = getCoordsFromIndex(index * ").concat(this.outputComponent,");\n           let a = ").concat(t,"(getAByOutputCoords(coords));\n           let b = ").concat(t,"(getBByOutputCoords(coords));\n           setOutputAtIndex(index, binaryOperation(a, b));\n         }\n       }\n       ");return e}}function RE(e){const{inputs:t}=e,{x:n}=t;return e.backend.incRef(n.dataId),{dataId:n.dataId,shape:n.shape,dtype:n.dtype}}const AE={kernelName:Sa,backendName:"webgpu",kernelFunc:RE};function OE(e){const{inputs:t,backend:n}=e,{real:a,imag:r}=t,o=n.makeTensorInfo(a.shape,"complex64"),i=n.tensorMap.get(o.dataId),s=RE({inputs:{x:a},backend:n}),c=RE({inputs:{x:r},backend:n});return i.complexTensorInfos={real:s,imag:c},o}const FE={kernelName:Dn,backendName:"webgpu",kernelFunc:OE};class DE{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";this.variableNames=["A"],this.size=!0;this.workgroupSize=[128,1,1],this.outputShape=e,this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize),this.op=t,""!==n&&(this.uniforms=n),this.shaderKey="unary_".concat(t)}getUserCode(){return"\n      fn unaryOperation(a : f32) -> f32 {\n        ".concat(cE(this.op,!1),"\n      }\n      ").concat(xT("index")," {\n        if (index < uniforms.size) {\n          let a = getAByOutputIndex(index);\n          setOutputAtIndex(index, unaryOperation(a));\n        }\n      }\n      ")}}function ME(e){let{opType:t,cpuKernelImpl:n,dtype:a}=e;return e=>{let{inputs:r,backend:o}=e;const{x:i}=r,s=o,c=a||i.dtype;if(s.shouldExecuteOnCPU([i])&&null!=n){const e=s.tensorMap.get(i.dataId),t=n(e.values,c);return s.makeTensorInfo(i.shape,c,t)}const u=new DE(i.shape,t);return s.runWebGPUProgram(u,[i],c)}}function PE(e){let{opType:t,cpuKernelImpl:n,supportsComplex:a=!1,dtype:r}=e;return e=>{let{inputs:o,backend:i}=e;const{a:s,b:c}=o,u=i;if(a&&"complex64"===s.dtype){const e=u.tensorMap.get(s.dataId),n=u.tensorMap.get(c.dataId);let a,r;if(t!==BT.MUL)[a,r]=[[e.complexTensorInfos.real,n.complexTensorInfos.real],[e.complexTensorInfos.imag,n.complexTensorInfos.imag]].map((e=>{const[n,a]=e,r={dataId:n.dataId,dtype:n.dtype,shape:s.shape},o={dataId:a.dataId,dtype:a.dtype,shape:c.shape},i=new EE(t,s.shape,c.shape);return u.runWebGPUProgram(i,[r,o],wi(n.dtype,a.dtype))}));else{const t=new _E(BT.COMPLEX_MULTIPLY_REAL,s.shape,c.shape),o=new _E(BT.COMPLEX_MULTIPLY_IMAG,s.shape,c.shape),i=[{dataId:e.complexTensorInfos.real.dataId,dtype:e.complexTensorInfos.real.dtype,shape:s.shape},{dataId:e.complexTensorInfos.imag.dataId,dtype:e.complexTensorInfos.imag.dtype,shape:s.shape},{dataId:n.complexTensorInfos.real.dataId,dtype:n.complexTensorInfos.real.dtype,shape:c.shape},{dataId:n.complexTensorInfos.imag.dataId,dtype:n.complexTensorInfos.imag.dtype,shape:c.shape}];a=u.runWebGPUProgram(t,i,"float32"),r=u.runWebGPUProgram(o,i,"float32")}const o=OE({inputs:{real:a,imag:r},backend:u});return u.disposeData(a.dataId),u.disposeData(r.dataId),o}const l=r||wi(s.dtype,c.dtype);if(("string"===s.dtype||"string"===c.dtype||u.shouldExecuteOnCPU([s,c]))&&null!=n){const e=u.tensorMap.get(s.dataId).values,t=u.tensorMap.get(c.dataId).values,a="string"===s.dtype?Ym(e):e,r="string"===s.dtype?Ym(t):t,[o,i]=n(s.shape,c.shape,a,r,l);return u.makeTensorInfo(i,l,o)}const d=new EE(t,s.shape,c.shape);return u.runWebGPUProgram(d,[s,c],l)}}const{mx:LE,ct:zE,YG:BE,hH:WE,z3:UE,sG:VE,uM:GE,vS:HE,C1:jE,qB:KE,GG:qE,lg:XE,rq:YE,cu:QE,WR:ZE,px:$E,jC:JE,He:eR,hE:tR,BF:nR,Dk:aR,cl:rR,_B:oR,qy:iR,Zy:sR,bu:cR,dH:uR,HS:lR,eW:dR,GK:pR,dl:hR,Dw:fR,xT:mR,_X:gR,wz:yR}=i,bR=ME({opType:g_.ABS,cpuKernelImpl:uR}),xR={kernelName:cn,backendName:"webgpu",kernelFunc:bR},vR=ME({opType:g_.ACOS}),wR={kernelName:un,backendName:"webgpu",kernelFunc:vR},kR=ME({opType:g_.ACOSH}),SR={kernelName:ln,backendName:"webgpu",kernelFunc:kR},CR=PE({opType:BT.ADD,cpuKernelImpl:LE,supportsComplex:!0}),IR={kernelName:dn,backendName:"webgpu",kernelFunc:CR};class NR{constructor(e){this.workPerThread=1,this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e[0],this.variableNames=e.map(((e,t)=>"T".concat(t))),this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize,[this.workPerThread,1,1]),this.shaderKey="addN"}getUserCode(){const e=[];this.variableNames.forEach((t=>{e.push("let v".concat(t," = get").concat(t,"ByOutputCoords(coords);"))}));const t=this.variableNames.map((e=>"v".concat(e))).join(" + ");return"\n      ".concat(xT("index")," {\n        for (var i = 0; i < ").concat(this.workPerThread,"; i = i + 1) {\n          let flatIndex = index * ").concat(this.workPerThread," + i;\n          if (flatIndex < uniforms.size) {\n            let coords = getCoordsFromIndex(flatIndex);\n            ").concat(e.join("\n        "),"\n            setOutputAtIndex(flatIndex, ").concat(t,");\n          }\n        }\n      }\n    ")}}const TR={kernelName:pn,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,a=t;if(1===a.length)return RE({inputs:{x:a[0]},backend:n});const r=a.map((e=>e.dtype)).reduce(((e,t)=>wi(e,t))),o=a.map((e=>e.shape)),i=new NR(o);return n.runWebGPUProgram(i,a,r)}};class _R{constructor(e,t){this.variableNames=["A"],this.workgroupSize=[16,16,1];const n=new Array(e.length);for(let a=0;a<n.length;a++)n[a]=e[t[a]];this.outputShape=n,this.dispatchLayout={x:[0],y:[1]},this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize,[1,1,1]),this.shaderKey="transposeShared"}getUserCode(){kt(this.workgroupSize[0]===this.workgroupSize[1],(()=>"Must be a square tile, current tile shape is ".concat(this.workgroupSize[0]," x ").concat(this.workgroupSize[1])));const e=this.workgroupSize[0];return"\n      var<workgroup> tile : array<array<f32, ".concat(this.workgroupSize[0]+1,">, ").concat(this.workgroupSize[0],">;\n      ").concat(xT()," {\n        var x = i32(workgroupId.x) * ").concat(e," + i32(localId.x);\n        var y = i32(workgroupId.y) * ").concat(e," + i32(localId.y);\n        let width = uniforms.outShape[0];\n        let height = uniforms.outShape[1];\n        if (x < width && y < height) {\n          tile[localId.y][localId.x] = f32(A[y * width + x]);\n        }\n        workgroupBarrier();\n\n        x = i32(workgroupId.y) * ").concat(e," + i32(localId.x);\n        y = i32(workgroupId.x) * ").concat(e," + i32(localId.y);\n        if (x < height && y < width) {\n          setOutputAtIndex((y * height + x), tile[localId.x]\n            [localId.y]);\n        }\n      }\n    ")}}class ER{constructor(e,t){this.variableNames=["A"],this.workPerThread=1,this.workgroupSize=[64,1,1],this.size=!0;const n=new Array(e.length);for(let a=0;a<n.length;a++)n[a]=e[t[a]];this.outputShape=n,this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize,[this.workPerThread,1,1]),this.newDim=t,this.shaderKey="transpose_".concat(t)}getUserCode(){const e=yT(this.outputShape.length),t=RR(this.newDim);return"\n      ".concat(xT("index")," {\n        for(var i = 0; i < ").concat(this.workPerThread,"; i = i + 1) {\n          let flatIndex = index * ").concat(this.workPerThread," + i;\n          if(flatIndex < uniforms.size) {\n            let coords = getCoordsFromIndex(flatIndex);\n            setOutputAtIndex(flatIndex, A[getIndexFromCoords").concat(this.outputShape.length,"D(\n              ").concat(e,"(").concat(t,"), uniforms.aShape)]);\n          }\n        }\n      }\n    ")}}function RR(e){const t=e.length;if(t>6)throw Error("Transpose for rank ".concat(t," is not yet supported"));const n=new Array(t);for(let a=0;a<e.length;a++)n[e[a]]="coords.".concat(bT(a));return n.join()}function AR(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{perm:o}=a,i=n,s=r.shape.length,c=new Array(s);for(let l=0;l<c.length;l++)c[l]=r.shape[o[l]];if(n.shouldExecuteOnCPU([r])){const e=i.tensorMap.get(r.dataId).values,t=gR(e,r.shape,r.dtype,o,c);return n.makeTensorInfo(c,r.dtype,t)}if(2===r.shape.length&&Tt(o,[1,0])){const e=new _R(r.shape,o);return i.runWebGPUProgram(e,[r],r.dtype)}const u=new ER(r.shape,o);return i.runWebGPUProgram(u,[r],r.dtype)}const OR={kernelName:co,backendName:"webgpu",kernelFunc:AR};class FR{constructor(e,t,n){this.variableNames=["x"],this.uniforms="reduceSize : i32,",this.size=!0,this.inputShape=[e.batchSize,e.inSize];const[a]=Jl(this.inputShape,[1]);this.outputShape=0===a.length?[1]:a,e.inSize>=32768&&n>=512?this.workgroupSize=[512,1,1]:e.inSize>=4096?this.workgroupSize=[256,1,1]:this.workgroupSize=[64,1,1],this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,[1,1,1]),this.reduceType=t,this.shaderKey="reduce_".concat(t)}getUserCode(){let e="",t="0.0";const n=this.workgroupSize[0];"min"===this.reduceType||"max"===this.reduceType?(e="\n         if (isnan(candidate)) {\n          bestValue = uniforms.NAN;\n         } else if (!isnan(bestValue) && candidate ".concat("min"===this.reduceType?"<":">"," bestValue)\n           {  bestValue = candidate; }"),t="f32(x[offset])"):"sum"===this.reduceType||"mean"===this.reduceType?e=" bestValue = bestValue + candidate; ":"prod"===this.reduceType?(e=" bestValue = bestValue * candidate; ",t="1.0"):"all"===this.reduceType?(e=" bestValue = f32(bestValue >= 1.0 && candidate >= 1.0); ",t="1.0"):"any"===this.reduceType&&(e=" bestValue = f32(bestValue >= 1.0 || candidate >= 1.0); ",t="0.0");const a="mean"===this.reduceType?"setOutputAtIndex(outputIndex, bestValue / f32(uniforms.reduceSize));":"setOutputAtIndex(outputIndex, bestValue);",r="\n         var<workgroup> xBestValues : array<f32, ".concat(n,">;\n       ");return"\n       fn DIV_CEIL(a : u32, b : u32) -> u32 {\n        return ((a - 1u) / b + 1u);\n       }\n\n       ".concat(r,"\n       fn getOffset(outputIndex : i32) -> i32 {\n         let outputCoords = getCoordsFromIndex(outputIndex);\n         let offset = ").concat(1===this.outputShape.length?"outputCoords":"outputCoords[0]"," * uniforms.reduceSize;\n          return offset;\n       }\n       ").concat(xT("index")," {\n         let outputIndex = index / ").concat(n,";\n         let offset = getOffset(outputIndex);\n         var bestValue = ").concat(t,";\n         let Length = uniforms.reduceSize;\n         let WorkPerThread = DIV_CEIL(u32(Length), ").concat(n,"u);\n         for (var k = i32(localId.x); k < Length && outputIndex < uniforms.size;\n             k = k + ").concat(n,") {\n           let candidate = f32(x[offset + k]);\n           ").concat(e,"\n         }\n         xBestValues[localId.x] = bestValue;\n         workgroupBarrier();\n\n         var reduceSize = min(u32(Length), ").concat(n,"u);\n         for (var currentSize = reduceSize / 2u; reduceSize > 1u;\n             currentSize = reduceSize / 2u) {\n           let interval = DIV_CEIL(reduceSize, 2u);\n           if (localId.x < currentSize) {\n            let candidate = xBestValues[localId.x + interval];\n            ").concat(e,"\n            xBestValues[localId.x] = bestValue;\n           }\n           reduceSize = interval;\n           workgroupBarrier();\n         }\n\n         if (localId.x == 0u && outputIndex < uniforms.size) {\n          ").concat(a,"\n        }\n       }\n     ")}}const DR={mean:"float32",all:"bool",any:"bool"};function MR(e,t,n,a,r){const o=e.shape.length,i=[],s=Ft(t,e.shape);let c=s;const u=nd(c,o);let l=e;null!=u&&(l=AR({inputs:{x:e},attrs:{perm:u},backend:r}),c=rd(c.length,o),i.push(l)),td(a,c,o);const[d,p]=Jl(l.shape,c);let h,f=d;if(n&&(f=ed(d,s)),"max"!==a&&"prod"!==a||!r.shouldExecuteOnCPU([l])){const t=It(p),n={windowSize:t,inSize:t,batchSize:It(l.shape)/t,outSize:1},o=DR[a]||ki(e.dtype),s=[{type:"int32",data:[t]}],c=new FR(n,a,r.device.limits.maxComputeWorkgroupSizeX),u=r.runWebGPUProgram(c,[l],o,s);i.push(u),h=CE({inputs:{x:u},attrs:{shape:f},backend:r})}else{const t=r.tensorMap.get(l.dataId).values;switch(a){case"max":const n=JE(t,It(p),f,e.dtype);h=r.makeTensorInfo(f,e.dtype,n);break;case"prod":const{outVals:o,outShape:i,outDtype:s}=oR(l.shape,l.dtype,t,c);h=r.makeTensorInfo(i,s,o);break;default:throw new Error("".concat(a," CPU implementation is not yet supported."))}}return i.forEach((e=>r.disposeData(e.dataId))),h}const PR={kernelName:hn,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{keepDims:o,axis:i}=a;return MR(r,i,o,"all",n)}};const LR={kernelName:fn,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{keepDims:o,axis:i}=a;return MR(r,i,o,"any",n)}};class zR{constructor(e,t,n){this.workgroupSize=[64,1,1],this.variableNames=["x"],this.uniforms="infinityValue : f32,",this.size=!0;const a=[t];this.op="min"===n?"<":">";const[r,o]=Jl(e,a);this.outputShape=0===r.length?[1]:r,this.dispatchLayout=OT(this.outputShape),It(o)<32?(this.type="plain",this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize)):(this.type="shared",this.dispatch=ET(this.dispatchLayout,this.outputShape,[1,1,1])),this.inputShape=e,this.shaderKey="argMinMax_".concat(this.op,"_").concat(this.type)}getUserCode(){const e=this.workgroupSize[0],t=()=>1===this.inputShape.length?"uniforms.xShape":"uniforms.xShape.".concat(bT(this.inputShape.length-1)),n=()=>{let e="";if(1===this.outputShape.length)1!==this.inputShape.length&&(e+="outputCoords,");else for(let t=0;t<this.outputShape.length;t++)e+="outputCoords.".concat(bT(t),",");return e};if("shared"===this.type){const a="\n      var<workgroup> xBestIndices : array<i32, ".concat(e,">;\n      var<workgroup> xBestValues : array<f32, ").concat(e,">;\n    ");return"\n      fn DIV_CEIL(a : u32, b : u32) -> u32 {\n        return ((a - 1u) / b + 1u);\n      }\n\n      ".concat(a,"\n\n      ").concat(xT("index")," {\n        let outputIndex = index / ").concat(e,";\n        let reduceLength = ").concat(t(),";\n\n        var bestIndex = i32(localId.x);\n        var bestValue = uniforms.infinityValue;\n        let outputCoords = getCoordsFromIndex(outputIndex);\n        for (var k = i32(localId.x); k < reduceLength && outputIndex < uniforms.size;\n            k = k + ").concat(e,") {\n          let candidate = getX(").concat(n()," k);\n          if (!isnan(candidate) && candidate ").concat(this.op," bestValue) {\n            bestValue = candidate;\n            bestIndex = k;\n          }\n        }\n        xBestValues[localId.x] = bestValue;\n        xBestIndices[localId.x] = bestIndex;\n        workgroupBarrier();\n\n        var reduceSize = min(u32(reduceLength), ").concat(e,"u);\n        for (var currentSize = reduceSize / 2u; reduceSize > 1u;\n            currentSize = reduceSize / 2u) {\n          let interval = DIV_CEIL(reduceSize, 2u);\n          if (localId.x < currentSize) {\n            let candidate = xBestValues[localId.x + interval];\n            if (candidate ").concat(this.op," bestValue) {\n              bestValue = candidate;\n              xBestValues[localId.x] = bestValue;\n              xBestIndices[localId.x] = xBestIndices[localId.x + interval];\n            }\n          }\n          reduceSize = interval;\n          workgroupBarrier();\n        }\n\n        if (localId.x == 0u && outputIndex < uniforms.size) {\n          setOutputAtIndexI32(outputIndex, xBestIndices[localId.x]);\n        }\n      }\n    ")}return"\n      ".concat(xT("index")," {\n        if (index < uniforms.size) {\n          let outputCoords = getCoordsFromIndex(index);\n          var bestIndex = 0;\n          var bestValue = getX(").concat(n()," 0);\n          let reduceLength = ").concat(t(),";\n          for (var i = 1; i < reduceLength; i++) {\n            let candidate = getX(").concat(n()," i);\n            if (candidate ").concat(this.op," bestValue) {\n              bestValue = candidate;\n              bestIndex = i;\n            }\n          }\n          setOutputAtIndexI32(index, bestIndex);\n        }\n      }\n      ")}}const BR={kernelName:mn,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:o}=a;let i=Ft(o,r.shape);const s=nd(i,r.shape.length);let c=r;const u=[];null!=s&&(c=AR({inputs:{x:r},backend:n,attrs:{perm:s}}),u.push(c),i=rd(i.length,c.shape.length)),td("argMax",[i[0]],c.shape.length);const l=new zR(c.shape,i[0],"max"),d=[{type:"float32",data:[Number.NEGATIVE_INFINITY]}],p=n.runWebGPUProgram(l,[c],"int32",d);return u.forEach((e=>n.disposeData(e.dataId))),p}};const WR={kernelName:gn,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:o}=a;let i=Ft(o,r.shape);const s=nd(i,r.shape.length);let c=r;const u=[];null!=s&&(c=AR({inputs:{x:r},backend:n,attrs:{perm:s}}),u.push(c),i=rd(i.length,c.shape.length)),td("argMin",[i[0]],c.shape.length);const l=new zR(c.shape,i[0],"min"),d=[{type:"float32",data:[Number.POSITIVE_INFINITY]}],p=n.runWebGPUProgram(l,[c],"int32",d);return u.forEach((e=>n.disposeData(e.dataId))),p}},UR=ME({opType:g_.ASIN}),VR={kernelName:yn,backendName:"webgpu",kernelFunc:UR},GR=ME({opType:g_.ASINH}),HR={kernelName:bn,backendName:"webgpu",kernelFunc:GR},jR=ME({opType:g_.ATAN}),KR={kernelName:xn,backendName:"webgpu",kernelFunc:jR},qR=PE({opType:BT.ATAN2}),XR={kernelName:wn,backendName:"webgpu",kernelFunc:qR},YR=ME({opType:g_.ATANH}),QR={kernelName:vn,backendName:"webgpu",kernelFunc:YR};class ZR{constructor(e){this.variableNames=["x"],this.uniforms="strides : vec2<i32>,",this.workgroupSize=[256,1,1],this.size=!0,this.outputShape=e.outShape,this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="poolWithFilterSizeEqualsOne"}getUserCode(){return"\n      ".concat(xT("index")," {\n        if (index < uniforms.size) {\n          let coords = getCoordsFromIndex(index);\n          let batch = coords[0];\n          let d = coords[3];\n\n          let xRCCorner = coords.yz * uniforms.strides;\n          let xRCorner = xRCCorner.x;\n          let xCCorner = xRCCorner.y;\n\n          let value = getX(batch, xRCorner, xCCorner, d);\n          setOutputAtIndex(index, value);\n        }\n      }\n    ")}}class $R{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(this.variableNames=["x"],this.uniforms="strides : vec2<i32>, pads : vec2<i32>, dilations : vec2<i32>, convDims : vec2<i32>, filterDims : vec2<i32>,",this.workgroupSize=[128,1,1],this.size=!0,"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");this.outputShape=e.outShape,this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize),this.poolType=t,this.computePositions=n,this.flattenPositions=a,this.includeBatchIndex=r,this.shaderKey="pool2D_".concat(t,"_").concat(n,"_").concat(a,"_").concat(r)}getUserCode(){let e;if("avg"===this.poolType)e="resultValue = resultValue + value; count = count + 1.0;";else if(this.computePositions){const t=this.flattenPositions?this.includeBatchIndex?"((batch * uniforms.xShape[1] + xR) * uniforms.xShape[2] + xC) * uniforms.xShape[3] + d":"(xR * uniforms.xShape[2] + xC) * uniforms.xShape[3] + d":"wR * uniforms.filterDims.y + wC";e="let currMaxValue = mix(value, maxValue, maxValueFound);\n      if (value >= currMaxValue) {\n        maxValue = value;\n        maxValueFound = 1.0;\n        maxPosition = ".concat(t,";\n      }")}else e="resultValue = max(value, resultValue);";let t="resultValue";"avg"===this.poolType&&(t="resultValue / max(count, 1.0)");return"\n      ".concat(xT("index")," {\n      if (index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n          let batch = coords[0];\n          let d = coords[3];\n          let xRCCorner = vec2<i32>(coords.yz) * uniforms.strides - uniforms.pads;\n          let xRCorner = xRCCorner.x;\n          let xCCorner = xRCCorner.y;\n\n          ").concat(this.computePositions?"var maxValue = 0.0;\n            var maxValueFound = 0.0;\n            var maxPosition = 0;":"var resultValue = ".concat("avg"===this.poolType?"0.0":"-1.0 / pow(10.0, -20.0)",";"),"\n\n          var count = 0.0;\n          for (var wR = 0; wR < uniforms.filterDims.x; wR = wR + uniforms.dilations.x) {\n            let xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= uniforms.convDims.x) {\n              continue;\n            }\n\n            for (var wC = 0; wC < uniforms.filterDims.y; wC = wC + uniforms.dilations.y) {\n              let xC = xCCorner + wC;\n              if (xC < 0 || xC >= uniforms.convDims.y) {\n                continue;\n              }\n\n              let value = getX(batch, xR, xC, d);\n              ").concat(e,"\n            }\n          }\n\n          ").concat(this.computePositions?"setOutputAtIndexI32(index, maxPosition);":"setOutputAtIndex(index, ".concat(t,");"),"\n        }\n      }\n    ")}}class JR{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(this.variableNames=["x"],this.uniforms="strides : vec3<i32>, pads : vec3<i32>, convDims : vec3<i32>, filterDims : vec3<i32>,",this.workgroupSize=[128,1,1],this.size=!0,"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");this.outputShape=e.outShape,this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize),this.poolType=t,this.computePositions=n,this.flattenPositions=a,this.includeBatchIndex=r,this.shaderKey="pool3D_".concat(t,"_").concat(n,"_").concat(a,"_").concat(r)}getUserCode(){let e;if("avg"===this.poolType)e="resultValue += value; count += 1.0;";else if(this.computePositions){const t=this.flattenPositions?this.includeBatchIndex?"(((batch * uniforms.xShape.y + xD) * uniforms.xShape.z + xR) * uniforms.xShape.w + xC) * uniforms.xShape.u + ch":"((xD * uniforms.xShape.z + xR) * uniforms.xShape.w + xC) * uniforms.xShape.u + ch":"wD * uniforms.filterDims.y * uniforms.filterDims.y + wR * uniforms.filterDims.z + wC";e="let currMaxValue = mix(value, maxValue, maxValueFound);\n      if (value >= currMaxValue) {\n        maxValue = value;\n        maxValueFound = 1.0;\n        maxPosition = ".concat(t,";\n      }")}else e="resultValue = max(value, resultValue);";let t="resultValue";"avg"===this.poolType&&(t="resultValue / max(count, 1.0)");return"\n      ".concat(xT("index")," {\n        if (index < uniforms.size) {\n          let coords = getCoordsFromIndex(index);\n          let batch = coords.x;\n          let ch = coords.u;\n\n          let xCorner = vec3<i32>(coords.y, coords.z, coords.w) * uniforms.strides - uniforms.pads;\n          let xDCorner = xCorner.x;\n          let xRCorner = xCorner.y;\n          let xCCorner = xCorner.z;\n\n          ").concat(this.computePositions?"var maxValue = 0.0;\n            var maxValueFound = 0.0;\n            var maxPosition = 0;":"var resultValue = ".concat("avg"===this.poolType?"0.0":"-1.0 / pow(10.0, -20.0)",";"),"\n\n          var count = 0.0;\n          for (var wD = 0; wD < uniforms.filterDims.x; wD++) {\n            let xD = xDCorner + wD;\n            if (xD < 0 || xD >= uniforms.convDims.x) {\n              continue;\n            }\n\n            for (var wR = 0; wR < uniforms.filterDims.y; wR++) {\n              let xR = xRCorner + wR;\n              if (xR < 0 || xR >= uniforms.convDims.y) {\n                continue;\n              }\n\n              for (var wC = 0; wC < uniforms.filterDims.z; wC++) {\n                let xC = xCCorner + wC;\n                if (xC < 0 || xC >= uniforms.convDims.z) {\n                  continue;\n                }\n\n                let value = getX(batch, xD, xR, xC, ch);\n                ").concat(e,"\n              }\n            }\n          }\n\n          ").concat(this.computePositions?"setOutputAtIndexI32(index, maxPosition);":"setOutputAtIndex(index, ".concat(t,");"),"\n        }\n      }\n    ")}}function eA(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{reductionIndices:o,keepDims:i}=a;return MR(r,o,i,"max",n)}const tA={kernelName:Wa,backendName:"webgpu",kernelFunc:eA};function nA(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{keepDims:o,axis:i}=a;return MR(r,i,o,"mean",n)}const aA={kernelName:qa,backendName:"webgpu",kernelFunc:nA};function rA(e,t,n,a){if(1===t.filterWidth&&1===t.filterHeight&&Tt(t.inShape,t.outShape))return RE({inputs:{x:e},backend:a});if(t.filterWidth===t.inWidth&&t.filterHeight===t.inHeight&&1===t.batchSize&&"VALID"===t.padInfo.type){const r=e.shape.length,o=CE({inputs:{x:e},backend:a,attrs:{shape:[e.shape[r-3]*e.shape[r-2],e.shape[r-1]]}});let i;"avg"===n?i=nA({inputs:{x:o},backend:a,attrs:{axis:0,keepDims:!1}}):(kt("max"===n,(()=>"Invalid pool type ".concat(n))),i=eA({inputs:{x:o},backend:a,attrs:{reductionIndices:0,keepDims:!1}}));const s=CE({inputs:{x:i},backend:a,attrs:{shape:t.outShape}});return a.disposeData(o.dataId),a.disposeData(i.dataId),s}let r;const o=[{type:"int32",data:[t.strideHeight,t.strideWidth]}];return 1===t.filterHeight&&1===t.filterWidth?r=new ZR(t):("avg"===n?r=new $R(t,"avg"):(kt("max"===n,(()=>"Invalid pool type ".concat(n))),r=new $R(t,"max")),o.push({type:"int32",data:[t.padInfo.top,t.padInfo.left]},{type:"int32",data:[t.dilationHeight,t.dilationWidth]},{type:"int32",data:[t.inHeight,t.inWidth]},{type:"int32",data:[t.effectiveFilterHeight,t.effectiveFilterWidth]})),a.runWebGPUProgram(r,[e],e.dtype,o)}const oA={kernelName:kn,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{filterSize:o,strides:i,pad:s,dimRoundingMode:c}=a;return rA(r,Gu(r.shape,o,i,1,s,c),"avg",n)}};const iA={kernelName:Cn,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{filterSize:o,strides:i,pad:s,dataFormat:c,dimRoundingMode:u}=a,l=Hu(r.shape,o,i,[1,1,1],s,u,c),d=new JR(l,"avg"),p=[{type:"int32",data:[l.strideDepth,l.strideHeight,l.strideWidth]},{type:"int32",data:[l.padInfo.front,l.padInfo.top,l.padInfo.left]},{type:"int32",data:[l.inDepth,l.inHeight,l.inWidth]},{type:"int32",data:[l.effectiveFilterDepth,l.effectiveFilterHeight,l.effectiveFilterWidth]}];return n.runWebGPUProgram(d,[r],r.dtype,p)}};class sA{constructor(e){this.variableNames=["dy"],this.uniforms="strides : vec2<i32>, pads : vec2<i32>, dilations : vec2<i32>, filterDims : vec2<i32>,\n       outHeight : i32, outWidth : i32, avgMultiplier : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e.inShape,this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="avgPool2DBackprop"}getUserCode(){return"\n      ".concat(xT("index")," {\n      if (index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n        let batch = coords[0];\n        let d = coords[3];\n\n        let dyRCCorner = vec2<i32>(coords.yz) - uniforms.pads;\n        let dyRCorner = dyRCCorner.x;\n        let dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        var dotProd = 0.0;\n        for (var wR = 0; wR < uniforms.filterDims[0]; wR = wR + uniforms.dilations[0]) {\n          let dyR = f32(dyRCorner + wR) / f32(uniforms.strides[0]);\n\n          if (dyR < 0.0 || dyR >= f32(uniforms.outHeight) || fract(dyR) > 0.0) {\n            continue;\n          }\n          let idyR = i32(dyR);\n\n          for (var wC = 0; wC < uniforms.filterDims[1]; wC = wC + uniforms.dilations[1]) {\n            let dyC = f32(dyCCorner + wC) / f32(uniforms.strides[1]);\n\n            if (dyC < 0.0 || dyC >= f32(uniforms.outWidth) || fract(dyC) > 0.0) {\n              continue;\n            }\n            let idyC = i32(dyC);\n\n            let dyValue = getDy(batch, idyR, idyC, d);\n\n            dotProd = dotProd + dyValue * uniforms.avgMultiplier;\n          }\n        }\n        setOutputAtIndex(index, dotProd);\n      }\n    }\n    ")}}class cA{constructor(e){this.variableNames=["dy"],this.uniforms="strides : vec3<i32>, pads : vec3<i32>, filterDims : vec3<i32>,\n       outDepth : i32, outHeight : i32, outWidth : i32, avgMultiplier : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e.inShape,this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="avgPool3DBackprop"}getUserCode(){return"\n      ".concat(xT("index")," {\n      if (index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n        let batch = coords.x;\n        let ch = coords.u;\n\n        let dyCorner = vec3<i32>(coords.y, coords.z, coords.w) - uniforms.pads;\n        let dyDCorner = dyCorner.x;\n        let dyRCorner = dyCorner.y;\n        let dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        var dotProd = 0.0;\n        for (var wD = 0; wD < uniforms.filterDims[0]; wD++) {\n          let dyD = f32(dyDCorner + wD) / f32(uniforms.strides[0]);\n\n          if (dyD < 0.0 || dyD >= f32(uniforms.outDepth) || fract(dyD) > 0.0) {\n            continue;\n          }\n          let idyD = i32(dyD);\n\n          for (var wR = 0; wR < uniforms.filterDims[1]; wR++) {\n            let dyR = f32(dyRCorner + wR) / f32(uniforms.strides[1]);\n\n            if (dyR < 0.0 || dyR >= f32(uniforms.outHeight) || fract(dyR) > 0.0) {\n              continue;\n            }\n            let idyR = i32(dyR);\n\n            for (var wC = 0; wC < uniforms.filterDims[2]; wC++) {\n              let dyC = f32(dyCCorner + wC) / f32(uniforms.strides[2]);\n\n              if (dyC < 0.0 || dyC >= f32(uniforms.outWidth) || fract(dyC) > 0.0) {\n                continue;\n              }\n              let idyC = i32(dyC);\n\n              let dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              dotProd += dyValue * uniforms.avgMultiplier;\n            }\n          }\n        }\n        setOutputAtIndex(index, dotProd);\n      }\n    }\n    ")}}const uA={kernelName:In,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:r,input:o}=t,i=o,{filterSize:s,strides:c,pad:u,dimRoundingMode:l}=a,d=Hu(i.shape,s,c,1,u,l),p=new cA(d),h=1/(d.filterDepth*d.filterHeight*d.filterWidth),f=[{type:"int32",data:[d.strideDepth,d.strideHeight,d.strideWidth]},{type:"int32",data:[d.effectiveFilterDepth-1-d.padInfo.front,d.effectiveFilterHeight-1-d.padInfo.top,d.effectiveFilterWidth-1-d.padInfo.left]},{type:"int32",data:[d.effectiveFilterDepth,d.effectiveFilterHeight,d.effectiveFilterWidth]},{type:"int32",data:[d.outDepth]},{type:"int32",data:[d.outHeight]},{type:"int32",data:[d.outWidth]},{type:"float32",data:[h]}];return n.runWebGPUProgram(p,[r],i.dtype,f)}};const lA={kernelName:Sn,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:r,input:o}=t,i=o;MT([r,o],"avgPoolGrad");const{filterSize:s,strides:c,pad:u}=a,l=Gu(i.shape,s,c,1,u),d=new sA(l),p=1/(l.filterHeight*l.filterWidth),h=[{type:"int32",data:[l.strideHeight,l.strideWidth]},{type:"int32",data:[l.effectiveFilterHeight-1-l.padInfo.top,l.effectiveFilterWidth-1-l.padInfo.left]},{type:"int32",data:[l.dilationHeight,l.dilationWidth]},{type:"int32",data:[l.effectiveFilterHeight,l.effectiveFilterWidth]},{type:"int32",data:[l.outHeight]},{type:"int32",data:[l.outWidth]},{type:"float32",data:[p]}];return n.runWebGPUProgram(d,[r],i.dtype,h)}};const dA={kernelName:Nn,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{a:r,b:o}=t,{transposeA:i,transposeB:s}=a;return NE({a:r,b:o,transposeA:i,transposeB:s,backend:n})}};class pA{constructor(e,t){this.variableNames=["source"],this.workPerThread=1,this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t,this.rank=t.length,this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize,[this.workPerThread,1,1]),this.start=e,this.uniforms="start : ".concat(yT(e.length),", "),this.shaderKey="slice"}getUserCode(){const e=yT(this.rank),t=function(e){if(1===e)return"sourceLoc";if(e<=6)return hA.slice(0,e).map((e=>"sourceLoc.".concat(e))).join(",");throw Error("Slicing for rank ".concat(e," is not yet supported"))}(this.rank);let n;n=1===this.start.length?this.outputShape.map(((e,t)=>"sourceLoc = uniforms.start + coords;")):this.outputShape.map(((e,t)=>"sourceLoc.".concat(hA[t]," = uniforms.start.").concat(bT(t)," + coords.").concat(hA[t],";")));return"\n      ".concat(xT("index")," {\n        if (index < uniforms.size) {\n          var sourceLoc : ").concat(e,";\n          let coords = getCoordsFromIndex(index);\n          ").concat(n.join("\n"),"\n          setOutputAtIndex(index, getSource(").concat(t,"));\n        }\n      }\n    ")}}const hA=["x","y","z","w","u","v"];function fA(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{begin:o,size:i}=a,[s,c]=Tu(r,o,i);if(hu(r,s,c),n.shouldExecuteOnCPU([r])||"string"===r.dtype){const e=n.tensorMap.get(r.dataId),t=lR(e.values,s,c,r.shape,r.dtype);return n.makeTensorInfo(c,r.dtype,t)}if(0===It(c))return n.makeTensorInfo(c,r.dtype,[]);const u=new pA(s,c),l=[{type:"int32",data:s}];return n.runWebGPUProgram(u,[r],r.dtype,l)}const mA={kernelName:Fr,backendName:"webgpu",kernelFunc:fA},gA={kernelName:Tn,backendName:"webgpu",kernelFunc:e=>{const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{blockShape:o,crops:i}=a;kt(r.shape.length<=4,(()=>"batchToSpaceND for rank > 4 with a WebGPU backend not implemented yet"));const s=o.reduce(((e,t)=>e*t)),c=nm(r.shape,o,s),u=am(c.length,o.length),l=rm(r.shape,o,s),d=om(i,o.length),p=im(l,i,o.length),h=[],f=CE({inputs:{x:r},backend:n,attrs:{shape:c}}),m=AR({inputs:{x:f},backend:n,attrs:{perm:u}}),g=CE({inputs:{x:m},backend:n,attrs:{shape:l}}),y=fA({inputs:{x:g},backend:n,attrs:{begin:d,size:p}});return h.push(f),h.push(m),h.push(g),h.forEach((e=>n.disposeData(e.dataId))),y}},yA="\n  fn bincount_write(index: i32, value: f32) {\n    ".concat(hT("&result[index]","value","float32"),"\n  }\n");class bA{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.outputShape=[],this.variableNames=["x"],this.uniforms="binCountSize : i32,",this.workgroupSize=[64,1,1],this.atomic=!0,this.hasWeights=!0,this.binaryOutput=!1,this.outputShape=e,this.rank=e.length,this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize),this.binaryOutput=n,n&&(this.atomic=!1),this.hasWeights=t,this.hasWeights&&this.variableNames.push("w"),this.shaderKey="bincount_".concat(this.hasWeights,"_").concat(this.binaryOutput,"_").concat(this.rank)}getUserCode(){return"\n    ".concat(this.binaryOutput?"\n  fn bincount_write(index: i32, value: f32) {\n    atomicStore(&result[index], bitcast<i32>(value));\n  }\n":yA,"\n  ").concat(xT("index")," {\n    ").concat(1===this.rank?"if (index < uniforms.xShape) {\n      let indexVal = i32(getX(index));\n      if (indexVal < uniforms.binCountSize) {\n        let value = ".concat(this.binaryOutput?1:this.hasWeights?"getW(index)":"1.",";\n        bincount_write(indexVal, value);\n      }\n    }"):"let coord = getCoordsFromIndex(index);\n    if (coordsInBounds2D(coord, uniforms.xShape)) {\n      let indexVal = i32(getX(coord[0], coord[1]));\n      if (indexVal < uniforms.binCountSize) {\n        let value = ".concat(this.binaryOutput?1:this.hasWeights?"getW(coord[0], coord[1])":"1.",";\n        bincount_write(coord.x * uniforms.binCountSize + indexVal, value);\n      }\n    }"),"\n  }\n  ")}}const xA={kernelName:_n,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,weights:o}=t,{size:i}=a,s=It(r.shape),c=It(o.shape)>0,u=[i],l=o.dtype,d=kE({backend:n,attrs:{shape:u,value:0,dtype:l}}),p=new bA([s],c),h=[{type:"int32",data:[i]}],f=c?[r,o]:[r];return n.runWebGPUProgram(p,f,l,h,d)}};class vA{constructor(e){this.outputShape=[],this.variableNames=["s0","s1"],this.uniforms="s0Size : i32, s1Size : i32, ",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=[e],this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="broadcastArgs"}getUserCode(){return"\n  ".concat(xT("index")," {\n    if (index < uniforms.size) {\n      var s0 = 1.0;\n      var s1 = 1.0;\n      let indexS0 = index - uniforms.size + uniforms.s0Size;\n      let indexS1 = index - uniforms.size + uniforms.s1Size;\n      if (indexS0 >= 0) {\n        s0 = getS0(indexS0);\n      }\n      if (indexS1 >= 0) {\n        s1 = getS1(indexS1);\n      }\n\n      if (s0 == 1.0) {\n        setOutputAtIndex(index, s1);\n      } else if (s1 == 1.0) {\n        setOutputAtIndex(index, s0);\n      } else if (s0 != s1) {\n        setOutputAtIndex(index, uniforms.NAN);\n      } else {\n        setOutputAtIndex(index, s0);\n      }\n    }\n  }\n  ")}}const wA={kernelName:Rn,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{s0:a,s1:r}=t;if(n.shouldExecuteOnCPU([a,r])){const e=n.tensorMap.get(a.dataId),t=n.tensorMap.get(r.dataId),o=e.values,i=t.values,s=Rc(Array.from(o),Array.from(i));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}const o=It(a.shape),i=It(r.shape),s=Math.max(o,i),c=new vA(s),u=[{type:"int32",data:[o]},{type:"int32",data:[i]}];return n.runWebGPUProgram(c,[a,r],"int32",u)}},kA=PE({opType:BT.NOT_EQUAL,dtype:"bool",cpuKernelImpl:rR}),SA={kernelName:tr,backendName:"webgpu",kernelFunc:kA};function CA(e){const{inputs:t,backend:n}=e,{input:a}=t;return RE({inputs:{x:n.tensorMap.get(a.dataId).complexTensorInfos.real},backend:n})}const IA={kernelName:gr,backendName:"webgpu",kernelFunc:CA};const NA={kernelName:An,backendName:"webgpu",kernelFunc:function e(t){const{inputs:n,backend:a,attrs:r}=t,{x:o}=n,{dtype:i}=r;if("complex64"===i){if("complex64"===o.dtype)return RE({inputs:{x:o},backend:a});const t=qd(o.shape),n=e({inputs:{x:o},backend:a,attrs:{dtype:"float32"}}),r=OE({inputs:{real:n,imag:t},backend:a});return t.dispose(),a.disposeData(n.dataId),r}if("complex64"===o.dtype){const t=CA({inputs:{input:o},backend:a}),n=e({inputs:{x:t},backend:a,attrs:{dtype:i}});return a.disposeData(t.dataId),n}if(!Lt(o.dtype,i)){const e=RE({inputs:{x:o},backend:a});return{dataId:e.dataId,shape:e.shape,dtype:i}}if(a.shouldExecuteOnCPU([o])){const e=a.tensorMap.get(o.dataId).values,[t,n,r]=zE(e,o.shape,o.dtype,i);return a.makeTensorInfo(t,n,r)}if("int32"===i)return function(e,t){const n=new DE(e.shape,g_.TO_INT),a=t.runWebGPUProgram(n,[e],"int32");return{dataId:a.dataId,shape:a.shape,dtype:a.dtype}}(o,a);if("bool"===i){const e=a.makeTensorInfo([],"bool",Mt("bool",1)),t=kA({inputs:{a:o,b:e},backend:a});return a.disposeData(e.dataId),t}throw new Error("Error in Cast: failed to cast ".concat(o.dtype," to ").concat(i))}},TA=ME({opType:g_.CEIL,cpuKernelImpl:BE}),_A={kernelName:On,backendName:"webgpu",kernelFunc:TA};class EA{constructor(e){this.variableNames=["A"],this.uniforms="minVal : f32, maxVal : f32,",this.workPerThread=4,this.workgroupSize=[64,1,1],this.outputComponent=4,this.size=!0,this.outputShape=e,this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize,[this.workPerThread,1,1]),this.shaderKey="clipVec4"}getUserCode(){return"\n      ".concat(xT("index")," {\n        if(index < uniforms.size) {\n          let value = getAByOutputIndex(index);\n          var clampedValue = clamp(\n              value, vec4<f32>(uniforms.minVal), vec4<f32>(uniforms.maxVal));\n          clampedValue = select(clampedValue, value, isnanVec4(value));\n          setOutputAtIndex(index, clampedValue);\n        }\n      }\n    ")}}class RA{constructor(e){this.variableNames=["A"],this.uniforms="minVal : f32, maxVal : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e,this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="clip"}getUserCode(){return"\n      ".concat(xT("index")," {\n        if(index < uniforms.size) {\n          let value = getAByOutputIndex(index);\n          if (isnan(value)) {\n            setOutputAtIndex(index, value);\n            return;\n          }\n          setOutputAtIndex(index, clamp(value, uniforms.minVal, uniforms.maxVal));\n        }\n      }\n    ")}}const AA={kernelName:Fn,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{clipValueMin:o,clipValueMax:i}=a;let s;const c=[{type:"float32",data:[o]},{type:"float32",data:[i]}];return s=It(r.shape)%4===0?new EA(r.shape):new RA(r.shape),n.runWebGPUProgram(s,[r],r.dtype,c)}};class OA{constructor(e){this.outputShape=[],this.variableNames=["real","imag"],this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e,this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="complexAbs"}getUserCode(){return"\n    ".concat(xT("index")," {\n      if (index < uniforms.size) {\n        let re = abs(getRealByOutputIndex(index));\n        let im = abs(getImagByOutputIndex(index));\n        let mx = max(re, im);\n\n        // The length function in wgsl may be not underflow-safe on some GPUs.\n        // So the safe solution is to ensure underflow-safety in all cases.\n        setOutputAtIndex(index, select(mx * length(vec2<f32>(1, min(re, im)/mx)), 0.0, mx == 0.0));\n      }\n    }\n  ")}}function FA(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}const DA={kernelName:Mn,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:a}=t,r=n.tensorMap.get(a.dataId),o=new OA(a.shape),i=[FA(a,r.complexTensorInfos.real),FA(a,r.complexTensorInfos.imag)];return n.runWebGPUProgram(o,i,i[0].dtype)}};class MA{constructor(e){this.uniforms="",this.workPerThread=1,this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=qf(e,1),this.variableNames=e.map(((e,t)=>"T".concat(t))),this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize,[this.workPerThread,1,1]),this.offsetLength=e.length-1;for(let t=0;t<this.offsetLength;t++)this.uniforms+="offset".concat(t," : i32,");this.shaderKey="concat"}getUserCode(){const e=[];if(this.offsetLength>0){e.push("if (yC < uniforms.offset0){ setOutputAtCoords(coords.x, coords.y, getT0(yR, yC)); }");for(let a=1;a<this.offsetLength;a++)e.push("else if (yC < uniforms.offset".concat([a],"){ ")+"setOutputAtCoords(coords.x, coords.y, getT".concat(a,"(yR, yC - uniforms.offset").concat(a-1,")); }"));const t=this.offsetLength,n=this.offsetLength-1;e.push("else { setOutputAtCoords(coords.x, coords.y, getT".concat(t,"(yR, yC - uniforms.offset").concat(n,")); }"))}else e.push("setOutputAtCoords(coords.x, coords.y, getT0(yR, yC));");return"\n      ".concat(xT("index")," {\n        for(var i = 0; i < ").concat(this.workPerThread,"; i = i + 1) {\n          let flatIndex = index * ").concat(this.workPerThread," + i;\n          if(flatIndex < uniforms.size) {\n            let coords = getCoordsFromIndex(flatIndex);\n            let yR = coords.x;\n            let yC = coords.y;\n\n            ").concat(e.join("\n        "),"\n          }\n        }\n      }\n    ")}}function PA(e){const{inputs:t,backend:n}=e,{input:a}=t;return RE({inputs:{x:n.tensorMap.get(a.dataId).complexTensorInfos.imag},backend:n})}const LA={kernelName:Ia,backendName:"webgpu",kernelFunc:PA};function zA(e,t,n){const a=e[0].dtype;if("complex64"===a){const a=e.map((e=>CA({inputs:{input:e},backend:n}))),r=e.map((e=>PA({inputs:{input:e},backend:n}))),o=zA(a,t,n),i=zA(r,t,n),s=OE({inputs:{real:o,imag:i},backend:n});return a.forEach((e=>n.disposeData(e.dataId))),r.forEach((e=>n.disposeData(e.dataId))),n.disposeData(o.dataId),n.disposeData(i.dataId),s}let r=n.shouldExecuteOnCPU(e);if("string"===a&&(r=!0),r){const r=e.map((e=>{const a=It(e.shape.slice(t));return CE({inputs:{x:e},backend:n,attrs:{shape:[-1,a]}})})),o=r.map((e=>({vals:n.readSync(e.dataId),shape:e.shape}))),i=qf(r.map((e=>e.shape)),1),s=1===r[0].shape[0],c=WE(o,i,a,s),u=qf(e.map((e=>e.shape)),t),l=n.makeTensorInfo(u,a,c);return r.forEach((e=>n.disposeData(e.dataId))),l}const o=n.device.limits.maxStorageBuffersPerShaderStage-1;if(e.length>o){const a=[];for(let i=0;i<e.length;i+=o){const r=e.slice(i,i+o);a.push(zA(r,t,n))}const r=zA(a,t,n);for(const e of a)n.disposeData(e.dataId);return r}const{tensors2D:i,outShape:s}=function(e,t,n){const a=qf(e.map((e=>e.shape)),t),r=e.map((e=>CE({inputs:{x:e},backend:n,attrs:{shape:[It(e.shape.slice(0,t)),It(e.shape.slice(t))]}})));return{tensors2D:r,outShape:a}}(e,t,n),c=i.map((e=>e.shape)),u=new MA(c),l=[],d=new Array(c.length-1);if(d.length>0){d[0]=c[0][1],l.push({type:"int32",data:[d[0]]});for(let e=1;e<d.length;e++)d[e]=d[e-1]+c[e][1],l.push({type:"int32",data:[d[e]]})}const p=n.runWebGPUProgram(u,i,i[0].dtype,l);i.forEach((e=>n.disposeData(e.dataId)));const h=CE({inputs:{x:p},backend:n,attrs:{shape:s}});return n.disposeData(p.dataId),h}function BA(e){const{inputs:t,backend:n,attrs:a}=e,{axis:r}=a,o=Ft(r,t[0].shape)[0];Kf(t.map((e=>e.shape)),o);const i=qf(t.map((e=>e.shape)),o);if(0===It(i))return n.makeTensorInfo(i,t[0].dtype,[]);const s=t.filter((e=>It(e.shape)>0));return 1===s.length?RE({inputs:{x:s[0]},backend:n}):zA(s,o,n)}const WA={kernelName:Pn,backendName:"webgpu",kernelFunc:BA};class UA{constructor(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.variableNames=["x","W"],this.uniforms="filterDims : vec2<i32>, pads : vec2<i32>, strides : vec2<i32>, dilations : vec2<i32>, dimAOuter : i32, dimBOuter : i32, dimInner : i32,",this.outputShape=e.outShape,this.isChannelsLast="channelsLast"===e.dataFormat,this.isVec4=((e.inChannels%4===0||e.inChannels%3===0)&&this.isChannelsLast||e.outWidth%4===0&&!this.isChannelsLast)&&e.outChannels%4===0,this.dispatchLayout=this.isChannelsLast?{x:[3],y:[1,2],z:[0]}:{x:[2,3],y:[1],z:[0]},this.workgroupSize=RT(this.dispatchLayout,this.outputShape,this.isVec4),this.elementsPerThread=AT(this.dispatchLayout,this.outputShape,this.isVec4),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize,this.elementsPerThread),this.isVec4?(this.outputComponent=4,this.isChannelsLast&&e.inChannels%4!==0?(this.innerElementSize=3,this.variableComponents=[1,4]):(this.innerElementSize=4,this.variableComponents=[4,4]),r&&(this.variableNames.push("bias"),this.variableComponents.push(4)),i&&(this.variableNames.push("preluActivationWeights"),this.variableComponents.push(4))):(this.innerElementSize=this.elementsPerThread[0],r&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights")),this.sequentialAccessByThreads=s,this.addBias=r,this.activation=o,this.hasPreluActivationWeights=i,this.tileAOuter=this.workgroupSize[1]*this.elementsPerThread[1],this.tileBOuter=this.workgroupSize[0]*this.elementsPerThread[0],this.tileInner=Math.max(this.workgroupSize[0]*this.innerElementSize,this.workgroupSize[1]),this.fitAOuter=t%this.tileAOuter===0,this.fitBOuter=n%this.tileBOuter===0,this.fitInner=a%this.tileInner===0,this.shaderKey="conv2DMM_".concat(this.elementsPerThread,"_").concat(this.activation,"}_").concat(this.fitAOuter,"_").concat(this.fitBOuter,"_").concat(this.fitInner,"_").concat(this.isVec4,"_").concat(this.innerElementSize,"_").concat(this.isChannelsLast,"_").concat(this.sequentialAccessByThreads)}getUserCode(){const e=this.isVec4?hE(this.elementsPerThread,this.workgroupSize,!this.isChannelsLast,this.tileInner):mE(this.elementsPerThread,this.workgroupSize,!this.isChannelsLast,this.tileInner,!1,null,this.sequentialAccessByThreads),t=this.isVec4?[this.innerElementSize,4,4]:[1,1,1],n="\n    ".concat(function(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:4,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:4,u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:4;const l=e?"\n      let coord = vec4<i32>(batch, xRow, xCol, xCh);\n      ":"\n      let coord = vec4<i32>(batch, xCh, xRow, xCol);\n      ",d=e?"\n      let coords = vec4<i32>(\n        batch,\n        row / outWidth,\n        row % outWidth,\n        col);\n      ":"\n      let coords = vec4<i32>(\n        batch,\n        row,\n        col / outWidth,\n        col % outWidth);\n      ",p=e?"uniforms.xShape[1]":"uniforms.xShape[2]",h=e?"uniforms.xShape[2]":"uniforms.xShape[3]",f=e?"row":"col",m=e?"col":"row",g="\n      let inChannels = uniforms.wShape[2];\n      let outWidth = ".concat(e?"uniforms.outShape[2]":"uniforms.outShape[3]",";\n      let outRow = ").concat(f," / outWidth;\n      let outCol = ").concat(f," % outWidth;\n\n      let WRow = ").concat(m," / (uniforms.filterDims[1] * inChannels);\n      let WCol = ").concat(m," / inChannels % uniforms.filterDims[1];\n      let xRow = outRow * uniforms.strides[0] + uniforms.dilations[0] * WRow - uniforms.pads[0];\n      let xCol = outCol * uniforms.strides[1] + uniforms.dilations[1] * WCol - uniforms.pads[1];\n      let xCh = ").concat(m," % inChannels;\n      var resData = ").concat(gT(s),"(0.0);\n      // The bounds checking is always needed since we use it to pad zero for\n      // the 'same' padding type.\n      if (xRow >= 0 && xRow < ").concat(p," && xCol >= 0 && xCol < ").concat(h,") {\n        ").concat(l,"\n        let xIndex = getIndexFromCoords4D(coord, uniforms.xShape);\n        ").concat((e=>{switch(e){case 1:return"resData = f32(x[xIndex]);";case 3:return"resData = vec3<f32>(x[xIndex], x[xIndex + 1], x[xIndex + 2]);";case 4:return"resData = vec4<f32>(x[xIndex / 4]);";default:throw new Error("innerElementSize ".concat(e," is not supported."))}})(s),"\n      }\n      return resData;"),y=e?t&&a?"\n      ".concat(g):"\n      if (row < uniforms.dimAOuter && col < uniforms.dimInner) {\n        ".concat(g,"\n      }\n      return ").concat(gT(s),"(0.0);"):a&&n?"\n      ".concat(g):"\n      if (row < uniforms.dimInner && col < uniforms.dimBOuter) {\n        ".concat(g,"\n      }\n      return ").concat(gT(s),"(0.0);"),b="".concat((e=>{switch(e){case 1:return"return f32(W[row * uniforms.wShape[3] + col]);";case 4:return"return vec4<f32>(W[(row * uniforms.wShape[3] + col) / 4]);";default:throw new Error("innerElementSize ".concat(e," is not supported."))}})(c)),x=gT(u),v=gT(e?s:c),w=gT(e?c:s);return"\n      ".concat(uE(o,i,4===u,4),"\n      fn mm_readA(batch: i32, row : i32, col : i32) -> ").concat(v," {\n        ").concat(e?y:b,"\n      }\n\n      fn mm_readB(batch: i32, row : i32, col : i32) -> ").concat(w," {\n        ").concat(e?b:y,"\n      }\n\n      fn mm_write(batch: i32, row : i32, col : i32, valueIn : ").concat(x,") {\n        if (row < uniforms.dimAOuter && col < uniforms.dimBOuter)\n        {\n        var value = valueIn;\n        let outWidth = ").concat(e?"uniforms.outShape[2]":"uniforms.outShape[3]",";\n        ").concat(d,"\n        ").concat(lE(r,o),"\n        setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], value);\n        }\n      }")}(this.isChannelsLast,this.fitAOuter,this.fitBOuter,this.fitInner,this.addBias,this.activation,this.hasPreluActivationWeights,t[0],t[1],t[2]),"\n    ").concat(e,"\n  ");return n}}class VA{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.variableNames=["x","W"],this.uniforms="filterDims: vec2<i32>, pads: vec2<i32>, strides: vec2<i32>, dilations: vec2<i32>,",this.workgroupSize=[4,4,8],this.outputShape=e.outShape,this.isChannelsLast="channelsLast"===e.dataFormat,this.dispatchLayout=this.isChannelsLast?{x:[2],y:[1],z:[0,3]}:{x:[3],y:[2],z:[0,1]},this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize),this.addBias=t,this.activation=n,this.hasPreluActivationWeights=a,t&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),this.shaderKey="conv2dnaive_".concat(this.activation,"_").concat(this.isChannelsLast)}getUserCode(){return"\n       ".concat(uE(this.activation,this.hasPreluActivationWeights,!1,4),"\n       fn readInp(batch : i32, row : i32, col : i32, chan : i32) -> f32{\n         let coords = vec4<i32>(batch, row, col, chan);\n         if (coordsInBounds4D(coords, uniforms.xShape)) {\n           return  getX(batch, row, col, chan);\n         } else {\n          return 0.0;\n         }\n       }\n       fn readFilt(row : i32, col : i32, xChannel : i32, outChannel : i32) -> f32{\n         let coords = vec4<i32>(row, col, xChannel, outChannel);\n         if(coordsInBounds4D(coords, uniforms.wShape)) {\n           return getW(row, col, xChannel, outChannel);\n          } else {\n            return 0.0;\n          }\n       }\n       fn writeResult(batch : i32, row : i32, col : i32, chan : i32, valueIn : f32) {\n         let coords = ").concat(this.isChannelsLast?"vec4<i32>(batch, row, col, chan);":"vec4<i32>(batch, chan, row, col);","\n         if (coordsInBounds4D(coords, uniforms.outShape)) {\n           var value = valueIn;\n           ").concat(lE(this.addBias,this.activation),"\n           setOutputAtCoords(coords.x, coords.y, coords.z, coords.w, value);\n         }\n       }\n       ").concat(xT("index")," {\n         let coords = getOutputCoords();\n         let batch = coords[0];\n         let outChannel = ").concat(this.isChannelsLast?"coords[3];":"coords[1];","\n         let outRow = ").concat(this.isChannelsLast?"coords[1];":"coords[2];","\n         let outCol = ").concat(this.isChannelsLast?"coords[2];":"coords[3];","\n         var acc : f32 = 0.0;\n         for (var row = 0; row < uniforms.filterDims[0]; row = row + 1) {\n           for (var col = 0; col < uniforms.filterDims[1]; col = col + 1) {\n             let xRow = outRow * uniforms.strides[0] + uniforms.dilations[0] * row - uniforms.pads[0];\n             let xCol = outCol * uniforms.strides[1] + uniforms.dilations[1] * col - uniforms.pads[1];\n             for (var xChannel = 0; xChannel < ").concat(this.isChannelsLast?"uniforms.xShape[3];":"uniforms.xShape[1];"," xChannel = xChannel + 1) {\n               ").concat(this.isChannelsLast?"let v = readInp(batch, xRow, xCol, xChannel);":"let v = readInp(batch, xChannel, xRow, xCol);","\n               let f = readFilt(row, col, xChannel, outChannel);\n               acc = acc + v * f;\n             }\n           }\n         }\n         writeResult(batch, outRow, outCol, outChannel, acc);\n       }\n     ")}}class GA{constructor(e,t){this.variableNames=["x"],this.uniforms="pads : vec2<i32>, strides : vec2<i32>, dilations : vec2<i32>, outWidth : i32, itemsPerBlockRow : i32,\n       inChannels : i32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e,this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize),this.isChannelsLast=t,this.shaderKey="im2col_".concat(this.isChannelsLast)}getUserCode(){const e=this.isChannelsLast?1:2,t=this.isChannelsLast?2:3,n=this.isChannelsLast?"coords[1]":"coords[2]",a=this.isChannelsLast?"coords[2]":"coords[1]",r=this.isChannelsLast?"getX(batch, xRow, xCol, ch)":"getX(batch, ch, xRow, xCol)";return"\n    ".concat(xT("index")," {\n      let coords = getCoordsFromIndex(index);\n      if(index < uniforms.size) {\n        let batch = coords[0];\n        let row = ").concat(n,";\n        let col = ").concat(a,";\n        let offsetY = (row / uniforms.outWidth) * uniforms.strides[0] - uniforms.pads[0];\n        let xRow = offsetY + uniforms.dilations[0] * (col / uniforms.itemsPerBlockRow);\n        var value = 0.0;\n        if(xRow < uniforms.xShape[").concat(e,"] && xRow >= 0) {\n          let offsetX = (row % uniforms.outWidth) * uniforms.strides[1] -\n              uniforms.pads[1];\n          let xCol = offsetX + uniforms.dilations[1] * ((col %\n              uniforms.itemsPerBlockRow) / uniforms.inChannels);\n          let ch = col % uniforms.inChannels;\n          if(xCol < uniforms.xShape[").concat(t,"] && xCol >= 0) {\n            value = ").concat(r,";\n          }\n        }\n        setOutputAtIndex(index, value);\n      }\n    }\n   ")}}function HA(e,t){const n=e.length;return n>=3?t?[...e.slice(0,-3),e[n-3]*e[n-2],e[n-1]]:[...e.slice(0,-3),e[n-3],e[n-2]*e[n-1]]:!t&&1===n&&e[0]>1?[e[0],1]:null}function jA(e){let{x:t,filter:n,convInfo:a,backend:r,bias:o=null,preluActivationWeights:i=null,leakyreluAlpha:s=0,activation:c=null}=e;const u=null!=o,l=null!=i,d="channelsLast"===a.dataFormat,p=d&&a.filterHeight===a.inHeight&&a.filterWidth===a.inWidth&&"VALID"===a.padInfo.type,h=nn().getBool("WEBGPU_USE_NAIVE_CONV2D_DEBUG");if(!h&&(p||1===a.filterHeight&&1===a.filterWidth&&1===a.dilationHeight&&1===a.dilationWidth&&1===a.strideHeight&&1===a.strideWidth&&("SAME"===a.padInfo.type||"VALID"===a.padInfo.type)))return function(e){let{x:t,filter:n,convInfo:a,backend:r,bias:o=null,preluActivationWeights:i=null,leakyreluAlpha:s=0,activation:c=null}=e;const u="channelsLast"===a.dataFormat,l=!u,d=[];let p,h;if(u&&a.filterHeight===a.inHeight&&a.filterWidth===a.inWidth&&"VALID"===a.padInfo.type){const e=a.inHeight*a.inWidth*a.inChannels;p=CE({inputs:{x:t},backend:r,attrs:{shape:[1,a.batchSize,e]}}),h=CE({inputs:{x:n},backend:r,attrs:{shape:[1,e,a.outChannels]}})}else p=CE({inputs:{x:t},backend:r,attrs:{shape:u?[a.batchSize,a.inHeight*a.inWidth,a.inChannels]:[a.batchSize,a.inChannels,a.inHeight*a.inWidth]}}),h=CE({inputs:{x:n},backend:r,attrs:{shape:[1,a.inChannels,a.outChannels]}});if(d.push(p),d.push(h),null!=i){const e=HA(i.shape,u);null!=e&&(i=CE({inputs:{x:i},backend:r,attrs:{shape:e}}),d.push(i))}if(null!=o){const e=HA(o.shape,u);null!=e&&(o=CE({inputs:{x:o},backend:r,attrs:{shape:e}}),d.push(o))}const f=NE({a:u?p:h,b:u?h:p,transposeA:l,transposeB:!1,backend:r,bias:o,activation:c,preluActivationWeights:i,leakyreluAlpha:s}),m=CE({inputs:{x:f},backend:r,attrs:{shape:a.outShape}});d.push(f);for(const g of d)r.disposeData(g.dataId);return m}({x:t,filter:n,convInfo:a,backend:r,bias:o,activation:c,preluActivationWeights:i,leakyreluAlpha:s});const f=nn().getNumber("WEBGPU_THRESHOLD_TO_INCREASE_WORKGROUPS_FOR_MATMUL"),m=f>-1?f:r.thresholdToIncreaseWorkgroups,g=a.batchSize*Math.ceil(a.outHeight*a.outWidth/32)*Math.ceil(a.outChannels/32);if(nn().getBool("WEBGPU_CONV_SEPARATE_IM2COL_SHADER")||g<=m)return function(e){let{x:t,filter:n,convInfo:a,backend:r,bias:o=null,preluActivationWeights:i=null,leakyreluAlpha:s=0,activation:c=null}=e;const{filterWidth:u,filterHeight:l,inChannels:d,strideWidth:p,strideHeight:h,padInfo:f,outWidth:m,outHeight:g,dilationWidth:y,dilationHeight:b,dataFormat:x}=a,v="channelsLast"===x,w=u*l*d,k=g*m,S=v?[a.batchSize,k,w]:[a.batchSize,w,k],C=new GA(S,v),I=[{type:"int32",data:[f.top,f.left]},{type:"int32",data:[h,p]},{type:"int32",data:[b,y]},{type:"int32",data:[m]},{type:"int32",data:[d*u]},{type:"int32",data:[d]}],N=r.runWebGPUProgram(C,[t],t.dtype,I),T=[];T.push(N);const _=CE({inputs:{x:n},backend:r,attrs:{shape:[1,w,-1]}});if(T.push(_),null!=i){const e=HA(i.shape,v);null!=e&&(i=CE({inputs:{x:i},backend:r,attrs:{shape:e}}),T.push(i))}if(null!=o){const e=HA(o.shape,v);null!=e&&(o=CE({inputs:{x:o},backend:r,attrs:{shape:e}}),T.push(o))}const E=NE({a:v?N:_,b:v?_:N,transposeA:!v,transposeB:!1,backend:r,bias:o,activation:c,preluActivationWeights:i,leakyreluAlpha:s}),R=CE({inputs:{x:E},backend:r,attrs:{shape:a.outShape}});T.push(E);for(const A of T)r.disposeData(A.dataId);return R}({x:t,filter:n,convInfo:a,backend:r,bias:o,preluActivationWeights:i,leakyreluAlpha:s,activation:c});let y;const b=[a.padInfo.top,a.padInfo.left],x=[{type:"int32",data:[a.filterHeight,a.filterWidth]},{type:"int32",data:[...b]},{type:"int32",data:[a.strideHeight,a.strideWidth]},{type:"int32",data:[a.dilationHeight,a.dilationWidth]}];if(h)y=new VA(a,u,c,l);else{const e=d?a.outHeight*a.outWidth:a.outChannels,t=d?a.outChannels:a.outHeight*a.outWidth,n=a.filterHeight*a.filterWidth*a.inChannels;x.push({type:"int32",data:[e]},{type:"int32",data:[t]},{type:"int32",data:[n]});const o=r.adapterInfo.isIntel();y=new UA(a,e,t,n,u,c,l,o)}const v=[],w=[t,n];u&&(d||1!==o.shape.length||(o=CE({inputs:{x:o},backend:r,attrs:{shape:[o.shape[0],1,1]}}),v.push(o)),w.push(o)),l&&(d||1!==i.shape.length||(i=CE({inputs:{x:i},backend:r,attrs:{shape:[i.shape[0],1,1]}}),v.push(i)),w.push(i)),"leakyrelu"===c&&(x.push({type:"float32",data:[s]}),y.uniforms+=" alpha : f32,");const k=r.runWebGPUProgram(y,w,t.dtype,x);for(const S of v)r.disposeData(S.dataId);return k}const KA={kernelName:Ln,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,attrs:n,backend:a}=e,{x:r,filter:o}=t,{strides:i,pad:s,dataFormat:c,dilations:u,dimRoundingMode:l}=n,d=tl(c);return jA({x:r,filter:o,convInfo:ju(r.shape,o.shape,i,u,s,l,!1,d),backend:a})}};class qA{constructor(e){this.variableNames=["dy","W"],this.uniforms="filterDims : vec2<i32>, pads : vec2<i32>, strides : vec2<i32>, outBackprop : vec4<i32>,",this.workgroupSize=[64,1,1],this.size=!1,this.isVec4=!1,this.workPerThread=1,this.outputShape=e.inShape,this.isChannelsLast="channelsLast"===e.dataFormat,this.isVec4=this.isChannelsLast&&e.outChannels%4===0&&e.inChannels%4===0,this.isVec4?(this.workPerThread=2,this.outputComponent=4,this.workgroupSize=[4,4,4],this.dispatchLayout={x:[3],y:[2],z:[0,1]},this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize,[4,this.workPerThread,1])):(this.size=!0,this.workPerThread=1,this.workgroupSize=[64,1,1],this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize)),this.shaderKey="conv2DDerInput_".concat(this.isChannelsLast,"_").concat(this.isVec4,"_").concat(this.workPerThread)}getUserCode(){const e=this.isChannelsLast?1:2,t=this.isChannelsLast?2:3,n=this.isChannelsLast?3:1,a="\n    ".concat(xT()," {\n      let batch = i32(globalId.z) / uniforms.outShape[1];\n      let r = i32(globalId.z) % uniforms.outShape[1];\n      let c = i32(globalId.y) * ").concat(this.workPerThread,";\n      let d1 = i32(globalId.x) * 4;\n\n      let dyCorner = vec2<i32>(r, c) - uniforms.pads;\n\n      // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n      // ? = to be determined. : = across all values in that axis.\n      var dotProd: array<vec4<f32>, ").concat(this.workPerThread,">;\n      for (var i = 0; i < ").concat(this.workPerThread,"; i++) {\n        dotProd[i] = vec4<f32>(0.0);\n      }\n      for (var wR = 0; wR < uniforms.filterDims.x; wR = wR + 1) {\n        let dyR = f32(dyCorner.x + wR) / f32(uniforms.strides.x);\n        let wRPerm = uniforms.filterDims.x - 1 - wR;\n        if (dyR < 0.0 || dyR >= f32(uniforms.outBackprop[1]) ||\n            fract(dyR) > 0.0) {\n          continue;\n        }\n        let idyR = i32(dyR);\n\n        for (var wC = 0; wC < uniforms.filterDims.y; wC = wC + 1) {\n          let dyC = f32(dyCorner.y + wC) / f32(uniforms.strides.y);\n          let dyC2 = f32(dyCorner.y + 1 + wC) / f32(uniforms.strides.y);\n          let wCPerm = uniforms.filterDims.y - 1 - wC;\n          var bDyCVal = true;\n          var bDyCVal2 = true;\n          if (dyC < 0.0 || dyC >= f32(uniforms.outBackprop[2]) ||\n              fract(dyC) > 0.0) {\n            bDyCVal = false;\n          }\n          if (dyC2 < 0.0 || dyC2 >= f32(uniforms.outBackprop[2]) ||\n              fract(dyC2) > 0.0) {\n            bDyCVal2 = false;\n          }\n\n          let idyC = i32(dyC);\n          let idyC2 = i32(dyC2);\n          if (bDyCVal && bDyCVal2) {\n            let d2Length = uniforms.outBackprop[3];\n            for (var d2 = 0; d2 < d2Length; d2 = d2 + 4) {\n              let wValue0 = getW(wRPerm, wCPerm, d1, d2);\n              let wValue1 = getW(wRPerm, wCPerm, d1 + 1, d2);\n              let wValue2 = getW(wRPerm, wCPerm, d1 + 2, d2);\n              let wValue3 = getW(wRPerm, wCPerm, d1 + 3, d2);\n              var xValue =  getDy(batch, idyR, idyC, d2);\n              let tmpval = vec4<f32>(dot(xValue, wValue0),\n                                     dot(xValue, wValue1),\n                                     dot(xValue, wValue2),\n                                     dot(xValue, wValue3));\n              dotProd[0] = dotProd[0] + tmpval;\n              xValue = getDy(batch, idyR, idyC2, d2);\n              dotProd[1] = dotProd[1] + vec4<f32>(dot(xValue, wValue0),\n                                                  dot(xValue, wValue1),\n                                                  dot(xValue, wValue2),\n                                                  dot(xValue, wValue3));\n            }\n          } else if (bDyCVal) {\n            let d2Length = uniforms.outBackprop[3];\n            for (var d2 = 0; d2 < d2Length; d2 = d2 + 4) {\n              let wValue0 = getW(wRPerm, wCPerm, d1, d2);\n              let wValue1 = getW(wRPerm, wCPerm, d1 + 1, d2);\n              let wValue2 = getW(wRPerm, wCPerm, d1 + 2, d2);\n              let wValue3 = getW(wRPerm, wCPerm, d1 + 3, d2);\n              var xValue =  getDy(batch, idyR, idyC, d2);\n              let tmpval = vec4<f32>(dot(xValue, wValue0),\n                                     dot(xValue, wValue1),\n                                     dot(xValue, wValue2),\n                                     dot(xValue, wValue3));\n              dotProd[0] = dotProd[0] + tmpval;\n            }\n          } else if (bDyCVal2) {\n            let d2Length = uniforms.outBackprop[3];\n            for (var d2 = 0; d2 < d2Length; d2 = d2 + 4) {\n              let wValue0 = getW(wRPerm, wCPerm, d1, d2);\n              let wValue1 = getW(wRPerm, wCPerm, d1 + 1, d2);\n              let wValue2 = getW(wRPerm, wCPerm, d1 + 2, d2);\n              let wValue3 = getW(wRPerm, wCPerm, d1 + 3, d2);\n              var xValue =  getDy(batch, idyR, idyC2, d2);\n              let tmpval = vec4<f32>(dot(xValue, wValue0),\n                                     dot(xValue, wValue1),\n                                     dot(xValue, wValue2),\n                                     dot(xValue, wValue3));\n              dotProd[1] = dotProd[1] + tmpval;\n            }\n          }\n        }\n      }\n\n      for (var i = 0; i < ").concat(this.workPerThread,"; i = i + 1) {\n        let coords = vec4<i32>(batch, r, c + i, d1);\n        if (coordsInBounds4D(coords, uniforms.outShape)) {\n          setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], dotProd[i]);\n        }\n      }\n    }\n    ");return this.isVec4?"\n    ".concat(a,"\n    "):"\n    ".concat(xT("index")," {\n      if(index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n        let batch = coords[0];\n        let d1 = coords[").concat(n,"];\n\n        let dyCorner = vec2<i32>(coords[").concat(e,"], coords[").concat(t,"]) - uniforms.pads;\n        let dyRCorner = dyCorner.x;\n        let dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        var dotProd = 0.0;\n        for (var wR = 0; wR < uniforms.filterDims.x; wR = wR + 1) {\n          let dyR = (f32(dyRCorner) + f32(wR)) / f32(uniforms.strides.x);\n          let wRPerm = uniforms.filterDims.x - 1 - wR;\n          if (dyR < 0.0 || dyR >= f32(uniforms.outBackprop[1]) || fract(dyR) > 0.0 ||\n              wRPerm < 0) {\n            continue;\n          }\n          let idyR = i32(dyR);\n\n          for (var wC = 0; wC < uniforms.filterDims.y; wC = wC + 1) {\n            let dyC = (f32(dyCCorner) + f32(wC)) / f32(uniforms.strides.y);\n            let wCPerm = uniforms.filterDims.y - 1 - wC;\n            if (dyC < 0.0 || dyC >= f32(uniforms.outBackprop[2]) ||\n                fract(dyC) > 0.0 || wCPerm < 0) {\n              continue;\n            }\n            let idyC = i32(dyC);\n\n            for (var d2 = 0; d2 < uniforms.outBackprop[3]; d2 = d2 + 1) {\n              let xValue = ").concat(this.isChannelsLast?"getDy(batch, idyR, idyC, d2)":"getDy(batch, d2, idyR, idyC)",";\n              let wValue = getW(wRPerm, wCPerm, d1, d2);\n              dotProd = dotProd + xValue * wValue;\n            }\n          }\n        }\n        setOutputAtIndex(index, dotProd);\n      }\n    }\n  ")}}class XA{constructor(e){this.variableNames=["x","dy"],this.uniforms="pads : vec2<i32>, strides : vec2<i32>, batchSize : i32, outHeight : i32, outWidth : i32, inHeight : i32, inWidth : i32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e.filterShape,this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize),this.isChannelsLast="channelsLast"===e.dataFormat,this.shaderKey="conv2DDerFilter_".concat(this.isChannelsLast)}getUserCode(){return"\n    ".concat(xT("index")," {\n      if(index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n        let wR = coords[0];\n        let wC = coords[1];\n        let d1 = coords[2];\n        let d2 = coords[3];\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        var dotProd = 0.0;\n        for (var b = 0; b < uniforms.batchSize; b = b + 1) {\n          for (var yR = 0; yR < uniforms.outHeight; yR = yR + 1) {\n            let xR = wR + yR * uniforms.strides[0] - uniforms.pads[0];\n            if (xR < 0 || xR >= uniforms.inHeight) {\n              continue;\n            }\n\n            for (var yC = 0; yC < uniforms.outWidth; yC = yC + 1) {\n              let xC = wC + yC * uniforms.strides[1] - uniforms.pads[1];\n\n              if (xC < 0 || xC >= uniforms.inWidth) {\n                continue;\n              }\n\n              if (").concat(this.isChannelsLast,") {\n                let dyValue = getDy(b, yR, yC, d2);\n                let xValue = getX(b, xR, xC, d1);\n                dotProd = dotProd + xValue * dyValue;\n              } else {\n                let dyValue = getDy(b, d2, yR, yC);\n                let xValue = getX(b, d1, xR, xC);\n                dotProd = dotProd + xValue * dyValue;\n              }\n            }\n          }\n        }\n        setOutputAtIndex(index, dotProd);\n      }\n    }\n  ")}}class YA{constructor(e){this.variableNames=["x","dy"],this.uniforms="pads : vec3<i32>, strides : vec3<i32>, batchSize : i32, outDepth : i32,\n       outHeight : i32, outWidth : i32, inDepth : i32, inHeight : i32, inWidth : i32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e.filterShape,this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="conv3DDerFilter"}getUserCode(){return"\n    ".concat(xT("index")," {\n      if(index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n        let wF = coords.x;\n        let wR = coords.y;\n        let wC = coords.z;\n        let d1 = coords.w;\n        let d2 = coords.u;\n\n        var dotProd = 0.0;\n        for (var b = 0; b < uniforms.batchSize; b++) {\n          for (var yF = 0; yF < uniforms.outDepth; yF++) {\n            let xF = wF + yF * uniforms.strides[0] - uniforms.pads[0];\n            if (xF < 0 || xF >= uniforms.inDepth) {\n              continue;\n            }\n\n            for (var yR = 0; yR < uniforms.outHeight; yR++) {\n              let xR = wR + yR * uniforms.strides[1] - uniforms.pads[1];\n              if (xR < 0 || xR >= uniforms.inHeight) {\n                continue;\n              }\n\n              for (var yC = 0; yC < uniforms.outWidth; yC++) {\n                let xC = wC + yC * uniforms.strides[2] - uniforms.pads[2];\n                if (xC < 0 || xC >= uniforms.inWidth) {\n                  continue;\n                }\n\n                let dyValue = getDy(b, yF, yR, yC, d2);\n                let xValue = getX(b, xF, xR, xC, d1);\n                dotProd += xValue * dyValue;\n              }\n            }\n          }\n        }\n        setOutputAtIndex(index, dotProd);\n      }\n    }\n  ")}}class QA{constructor(e){this.variableNames=["dy","W"],this.uniforms="filterDims : vec3<i32>, pads : vec3<i32>, strides : vec3<i32>,\n      outDepth : i32, outHeight : i32, outWidth : i32, outChannels : i32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e.inShape,this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="conv3DDerInput"}getUserCode(){return"\n    ".concat(xT("index")," {\n      if(index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n        let batch = coords.x;\n        let d1 = coords.u;\n\n        let dyCorner = vec3<i32>(coords.y, coords.z, coords.w) - uniforms.pads;\n        let dyFCorner = dyCorner.x;\n        let dyRCorner = dyCorner.y;\n        let dyCCorner = dyCorner.z;\n\n        var dotProd = 0.0;\n        for (var wF = 0; wF < uniforms.filterDims[0]; wF++) {\n          let dyF = f32(dyFCorner + wF) / f32(uniforms.strides[0]);\n          if (dyF < 0.0 || dyF >= f32(uniforms.outDepth) || fract(dyF) > 0.0) {\n            continue;\n          }\n          let idyF = i32(dyF);\n\n          let wFPerm = uniforms.filterDims[0] - 1 - wF;\n\n          for (var wR = 0; wR < uniforms.filterDims[1]; wR++) {\n            let dyR = f32(dyRCorner + wR) / f32(uniforms.strides[1]);\n\n            if (dyR < 0.0 || dyR >= f32(uniforms.outHeight) || fract(dyR) > 0.0) {\n              continue;\n            }\n            let idyR = i32(dyR);\n\n            let wRPerm = uniforms.filterDims[1] - 1 - wR;\n\n            for (var wC = 0; wC < uniforms.filterDims[2]; wC++) {\n              let dyC = f32(dyCCorner + wC) / f32(uniforms.strides[2]);\n\n              if (dyC < 0.0 || dyC >= f32(uniforms.outWidth) || fract(dyC) > 0.0) {\n                continue;\n              }\n              let idyC = i32(dyC);\n\n              let wCPerm = uniforms.filterDims[2] - 1 - wC;\n\n              for (var d2 = 0; d2 < uniforms.outChannels; d2++) {\n                let xValue = getDy(batch, idyF, idyR, idyC, d2);\n                let wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutputAtIndex(index, dotProd);\n      }\n    }\n  ")}}const ZA={kernelName:zn,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,dy:o}=t,{strides:i,pad:s,dataFormat:c,dimRoundingMode:u,filterShape:l}=a,d=tl(c),p=ju(r.shape,l,i,1,s,u,!1,d),h=new XA(p),f=[{type:"int32",data:[p.padInfo.top,p.padInfo.left]},{type:"int32",data:[p.strideHeight,p.strideWidth]},{type:"int32",data:[p.batchSize]},{type:"int32",data:[p.outHeight]},{type:"int32",data:[p.outWidth]},{type:"int32",data:[p.inHeight]},{type:"int32",data:[p.inWidth]}];return n.runWebGPUProgram(h,[r,o],r.dtype,f)}};class $A{constructor(e){this.variableNames=["x","W"],this.uniforms="filterDims : vec2<i32>, pads : vec2<i32>, strides : vec2<i32>, outBackprop : vec4<i32>, dimAOuter : i32, dimBOuter : i32, dimInner : i32,",this.outputShape=e.inShape,kt("channelsLast"===e.dataFormat,(()=>"TODO: NCHW is unimplemented")),this.isVec4=e.inChannels%4===0&&e.outChannels%4===0,this.dispatchLayout={x:[3],y:[1,2],z:[0]},this.workgroupSize=RT(this.dispatchLayout,this.outputShape,this.isVec4),this.elementsPerThread=AT(this.dispatchLayout,this.outputShape,this.isVec4),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize,this.elementsPerThread),this.isVec4&&(this.outputComponent=4,this.variableComponents=[4,1]),this.shaderKey="conv2DDerInputMM_".concat(this.isVec4,"_").concat(this.elementsPerThread)}getUserCode(){const e=this.isVec4?hE(this.elementsPerThread,this.workgroupSize):mE(this.elementsPerThread,this.workgroupSize),t="\n    ".concat(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;const t="\n      let outRow = row / uniforms.outShape[2];\n      let outCol = row % uniforms.outShape[2];\n\n      let WRow = col / (uniforms.filterDims[1] * uniforms.outBackprop[3]);\n      let WCol = col / uniforms.outBackprop[3] % uniforms.filterDims[1];\n      let xR = f32(outRow - uniforms.pads[0] + WRow) / f32(uniforms.strides[0]);\n      let xC = f32(outCol - uniforms.pads[1] + WCol) / f32(uniforms.strides[1]);\n      if (xR < 0.0 || xR >= f32(uniforms.outBackprop[1]) || fract(xR) > 0.0) {\n        return ".concat(gT(e),"(0.0);\n      }\n      if (xC < 0.0 || xC >= f32(uniforms.outBackprop[2]) || fract(xC) > 0.0) {\n        return ").concat(gT(e),"(0.0);\n      }\n      let coord = vec4<i32>(\n          batch,\n          i32(xR),\n          i32(xC),\n          col % uniforms.outBackprop[3]);\n      return x[getIndexFromCoords4D(coord, uniforms.xShape)/").concat(e,"];"),n="if (row < uniforms.dimAOuter && col < uniforms.dimInner) {\n        ".concat(t,"\n      }\n      return ").concat(gT(e),"(0.0);");return"\n  fn mm_readA(batch: i32, row : i32, col : i32) -> ".concat(gT(e)," {\n    ").concat(n,"\n  }\n\n  fn mm_readB(batch: i32, row : i32, col : i32) -> ").concat(gT(e)," {\n    let coordX = uniforms.filterDims.x - 1 -\n        row / (uniforms.filterDims[1] * uniforms.outBackprop[3]);\n    let coordY = uniforms.filterDims.y - 1 -\n        (row / uniforms.outBackprop[3]) % uniforms.filterDims[1];\n    if (row < uniforms.dimInner && col < uniforms.dimBOuter &&\n        coordX >= 0 && coordY >= 0) {\n      let rowInner = row % uniforms.outBackprop[3];\n      let coord = vec4<i32>(coordX, coordY, col, rowInner);\n      ").concat((e=>{switch(e){case 1:return"return W[getIndexFromCoords4D(coord, uniforms.wShape)];";case 4:return"\n            let coord1 = vec4<i32>(coordX, coordY, col + 1, rowInner);\n            let coord2 = vec4<i32>(coordX, coordY, col + 2, rowInner);\n            let coord3 = vec4<i32>(coordX, coordY, col + 3, rowInner);\n            let v0 = W[getIndexFromCoords4D(coord, uniforms.wShape)];\n            let v1 = W[getIndexFromCoords4D(coord1, uniforms.wShape)];\n            let v2 = W[getIndexFromCoords4D(coord2, uniforms.wShape)];\n            let v3 = W[getIndexFromCoords4D(coord3, uniforms.wShape)];\n            return vec4<f32>(v0, v1, v2, v3);\n            ";default:throw new Error("innerElementSize ".concat(e," is not supported."))}})(e),"\n    }\n    return ").concat(gT(e),"(0.0);\n  }\n\n  fn mm_write(batch: i32, row : i32, col : i32, valueInput : ").concat(gT(e),") {\n    if (row < uniforms.dimAOuter && col < uniforms.dimBOuter) {\n      var value = valueInput;\n      let outCoord = vec4<i32>(\n          batch,\n          row / uniforms.outShape[2],\n          row % uniforms.outShape[2],\n          col);\n      result[getIndexFromCoords4D(outCoord, uniforms.outShape)/").concat(e,"] = value;\n    }\n  }")}(this.isVec4?4:1),"\n    ").concat(e,"\n    ");return t}}const JA={kernelName:Bn,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:r,filter:o}=t,{inputShape:i,strides:s,pad:c,dataFormat:u,dimRoundingMode:l}=a,d=tl(u),p=ju(i,o.shape,s,1,c,l,!1,d),h=[{type:"int32",data:[p.filterHeight,p.filterWidth]},{type:"int32",data:[p.filterHeight-1-p.padInfo.top,p.filterWidth-1-p.padInfo.left]},{type:"int32",data:[p.strideHeight,p.strideWidth]},{type:"int32",data:[p.batchSize,p.outHeight,p.outWidth,p.outChannels]}];let f;if(nn().getBool("WEBGPU_USE_NAIVE_CONV2D_TRANSPOSE")||"channelsLast"!==p.dataFormat)f=new qA(p);else{f=new $A(p);const e=p.inHeight*p.inWidth,t=p.inChannels,n=p.filterHeight*p.filterWidth*p.outChannels;h.push({type:"uint32",data:[e]},{type:"uint32",data:[t]},{type:"uint32",data:[n]})}return n.runWebGPUProgram(f,[r,o],"float32",h)}};class eO{constructor(e){this.variableNames=["x","W"],this.uniforms="filterDims: vec3<i32>, pads: vec3<i32>, strides: vec3<i32>, dilations: vec3<i32>,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e.outShape,this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="conv3dnaive"}getUserCode(){return"\n    ".concat(xT("index")," {\n      if (index < uniforms.size) {\n        let coords = getOutputCoords();\n        let batch = coords.x;\n        let d2 = coords.u;\n\n        let xFRCCorner = vec3<i32>(coords.y, coords.z, coords.w) * uniforms.strides - uniforms.pads;\n        let xFCorner = xFRCCorner.x;\n        let xRCorner = xFRCCorner.y;\n        let xCCorner = xFRCCorner.z;\n\n        let inputDepthNearestVec4 = (uniforms.xShape.u / 4) * 4;\n        let inputDepthVec4Remainder = uniforms.xShape.u % 4;\n\n        var dotProd = 0.0;\n        for (var wF = 0; wF < uniforms.filterDims[0]; wF++) {\n          let xF = xFCorner + wF * uniforms.dilations[0];\n          if (xF < 0 || xF >= uniforms.xShape.y) {\n            continue;\n          }\n\n          for (var wR = 0; wR < uniforms.filterDims[1]; wR++) {\n            let xR = xRCorner + wR * uniforms.dilations[1];\n            if (xR < 0 || xR >= uniforms.xShape.z) {\n              continue;\n            }\n\n            for (var wC = 0; wC < uniforms.filterDims[2]; wC++) {\n              let xC = xCCorner + wC * uniforms.dilations[2];\n              if (xC < 0 || xC >= uniforms.xShape.w) {\n                continue;\n              }\n\n              for (var d1 = 0; d1 < inputDepthNearestVec4; d1 += 4) {\n                let xValues = vec4<f32>(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                let wValues = vec4<f32>(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (inputDepthVec4Remainder == 1) {\n                dotProd += getX(batch, xF, xR, xC, inputDepthNearestVec4) *\n                  getW(wF, wR, wC, inputDepthNearestVec4, d2);\n              } else if (inputDepthVec4Remainder == 2) {\n                let xValues = vec2<f32>(\n                  getX(batch, xF, xR, xC, inputDepthNearestVec4),\n                  getX(batch, xF, xR, xC, inputDepthNearestVec4 + 1)\n                );\n                let wValues = vec2<f32>(\n                  getW(wF, wR, wC, inputDepthNearestVec4, d2),\n                  getW(wF, wR, wC, inputDepthNearestVec4 + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (inputDepthVec4Remainder == 3) {\n                let xValues = vec3<f32>(\n                  getX(batch, xF, xR, xC, inputDepthNearestVec4),\n                  getX(batch, xF, xR, xC, inputDepthNearestVec4 + 1),\n                  getX(batch, xF, xR, xC, inputDepthNearestVec4 + 2)\n                );\n                let wValues = vec3<f32>(\n                  getW(wF, wR, wC, inputDepthNearestVec4, d2),\n                  getW(wF, wR, wC, inputDepthNearestVec4 + 1, d2),\n                  getW(wF, wR, wC, inputDepthNearestVec4 + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutputAtIndex(index, dotProd);\n      }\n    }")}}const tO={kernelName:Wn,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,filter:o}=t,{strides:i,pad:s,dilations:c}=a,u=Ku(r.shape,o.shape,i,c,s),l=[u.padInfo.front,u.padInfo.top,u.padInfo.left],d=[{type:"int32",data:[u.filterDepth,u.filterHeight,u.filterWidth]},{type:"int32",data:[...l]},{type:"int32",data:[u.strideDepth,u.strideHeight,u.strideWidth]},{type:"int32",data:[u.dilationDepth,u.dilationHeight,u.dilationWidth]}],p=new eO(u),h=wi(r.dtype,o.dtype);return n.runWebGPUProgram(p,[r,o],h,d)}};const nO={kernelName:Un,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,dy:o}=t,{strides:i,pad:s,filterShape:c}=a,u=Ku(r.shape,c,i,1,s),l=new YA(u),d=[{type:"int32",data:[u.padInfo.front,u.padInfo.top,u.padInfo.left]},{type:"int32",data:[u.strideDepth,u.strideHeight,u.strideWidth]},{type:"int32",data:[u.batchSize]},{type:"int32",data:[u.outDepth]},{type:"int32",data:[u.outHeight]},{type:"int32",data:[u.outWidth]},{type:"int32",data:[u.inDepth]},{type:"int32",data:[u.inHeight]},{type:"int32",data:[u.inWidth]}];return n.runWebGPUProgram(l,[r,o],o.dtype,d)}};const aO={kernelName:Vn,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:r,filter:o}=t,{strides:i,pad:s,inputShape:c}=a,u=Ku(c,o.shape,i,1,s),l=new QA(u),d=[{type:"int32",data:[u.filterDepth,u.filterHeight,u.filterWidth]},{type:"int32",data:[u.filterDepth-1-u.padInfo.front,u.filterHeight-1-u.padInfo.top,u.filterWidth-1-u.padInfo.left]},{type:"int32",data:[u.strideDepth,u.strideHeight,u.strideWidth]},{type:"int32",data:[u.outDepth]},{type:"int32",data:[u.outHeight]},{type:"int32",data:[u.outWidth]},{type:"int32",data:[u.outChannels]}];return n.runWebGPUProgram(l,[r,o],r.dtype,d)}},rO=ME({opType:g_.COS}),oO={kernelName:Gn,backendName:"webgpu",kernelFunc:rO},iO=ME({opType:g_.COSH}),sO={kernelName:Hn,backendName:"webgpu",kernelFunc:iO};class cO{constructor(e,t,n,a){this.variableNames=["Image","Boxes","BoxInd"],this.uniforms="extrapolationValue : f32,",this.workgroupSize=[64,1,1],this.size=!0;const[r]=t;this.outputShape=[r,n[0],n[1],e],this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize),this.methodId="bilinear"===a?1:0,this.cropHeightBiggerThan1=this.outputShape[1]>1,this.cropWidthBiggerThan1=this.outputShape[2]>1,this.shaderKey="cropAndResize_".concat(this.methodId,"_").concat(this.cropHeightBiggerThan1,"_").concat(this.cropWidthBiggerThan1)}getUserCode(){const[e,t]=["f32(uniforms.imageShape[1] - 1)","f32(uniforms.imageShape[2] - 1)"],[n,a,r]=this.cropHeightBiggerThan1?["(".concat(e," / f32(uniforms.outShape[1] - 1))"),"(y2-y1) * height_ratio","y1*".concat(e," + f32(y)*(height_scale)")]:["0.0","0.0","0.5 * (y1+y2) * ".concat(e)],[o,i,s]=this.cropWidthBiggerThan1?["(".concat(t," / f32(uniforms.outShape[2] - 1))"),"(x2-x1) * width_ratio","x1*".concat(t," + f32(x)*(width_scale)")]:["0.0","0.0","0.5 * (x1+x2) * ".concat(t)];return"\n    ".concat(xT("index")," {\n      if (index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n        let height_ratio = f32(").concat(n,");\n        let width_ratio = f32(").concat(o,");\n        let b = coords[0];\n        let y = coords[1];\n        let x = coords[2];\n        let d = coords[3];\n        // get box vals\n        let y1 = getBoxes(b, 0);\n        let x1 = getBoxes(b, 1);\n        let y2 = getBoxes(b, 2);\n        let x2 = getBoxes(b, 3);\n        // get image in batch index\n        let bInd = i32(round(getBoxInd(b)));\n        if(bInd < 0 || bInd >= uniforms.outShape[0]) {\n          return;\n        }\n        let height_scale = ").concat(a,";\n        let width_scale = ").concat(i,";\n        let in_y = ").concat(r,";\n        if( in_y < 0.0 || in_y > ").concat(e," ) {\n          setOutputAtIndex(index, uniforms.extrapolationValue);\n          return;\n        }\n        let in_x = ").concat(s,";\n        if( in_x < 0.0 || in_x > ").concat(t," ) {\n          setOutputAtIndex(index, uniforms.extrapolationValue);\n          return;\n        }\n        let sourceFracIndexCR = vec2<f32>(in_x,in_y);\n        if(").concat(this.methodId," == 1) {\n          // Compute the four integer indices.\n          let sourceFloorCR = vec2<i32>(sourceFracIndexCR);\n          let sourceCeilCR = vec2<i32>(ceil(sourceFracIndexCR));\n          let topLeft = getImage(bInd, sourceFloorCR.y, sourceFloorCR.x, d);\n          let bottomLeft = getImage(bInd, sourceCeilCR.y, sourceFloorCR.x, d);\n          let topRight = getImage(bInd, sourceFloorCR.y, sourceCeilCR.x, d);\n          let bottomRight = getImage(bInd, sourceCeilCR.y, sourceCeilCR.x, d);\n          let fracCR = sourceFracIndexCR - vec2<f32>(sourceFloorCR);\n          let top = topLeft + (topRight - topLeft) * fracCR.x;\n          let bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          let newValue = top + (bottom - top) * fracCR.y;\n          setOutputAtIndex(index, newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          let sourceNearestCR = vec2<i32>(floor(\n            sourceFracIndexCR + vec2<f32>(0.5,0.5)));\n          let newValue = getImage(\n            bInd, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutputAtIndex(index, newValue);\n        }\n      }\n    }\n    ")}}const uO={kernelName:qn,backendName:"webgpu",kernelFunc:e=>{const{inputs:t,backend:n,attrs:a}=e,{image:r,boxes:o,boxInd:i}=t,{cropSize:s,method:c,extrapolationValue:u}=a,l=new cO(r.shape[3],o.shape,s,c),d=[{type:"float32",data:[u]}];return n.runWebGPUProgram(l,[r,o,i],"float32",d)}};var lO;!function(e){e.Prod="*",e.Sum="+"}(lO||(lO={}));class dO{constructor(e,t,n,a){this.variableNames=["x"],this.uniforms="index : f32,",this.size=!0,this.workgroupSize=[128,1,1],this.outputShape=t,this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize),this.exclusive=n,this.reverse=a,this.op=e,this.shaderKey="cum_".concat(this.op,"_").concat(this.exclusive,"_").concat(this.reverse)}getUserCode(){const e=this.outputShape.length,t=this.op===lO.Prod?"1.0":"0.0",n=this.exclusive?t:"getX(".concat(pO(e,"coords",this.op),")"),a=this.outputShape[this.outputShape.length-1];let r="",o="";return this.exclusive?(r=this.reverse?"end != ".concat(a-1):"end != 0",o=this.reverse?"end + 1":"end - 1"):(r=this.reverse?"end + pow2 < ".concat(a):"end >= pow2",o=this.reverse?"end + pow2":"end - pow2"),"\n      ".concat(xT("index")," {\n       if (index < uniforms.size) {\n         var coords = getCoordsFromIndex(index);\n\n         let end = ").concat(hO(e,"coords",this.op),";\n         var val = ").concat(n,";\n         let pow2 = i32(pow(2.0, uniforms.index));\n         if (").concat(r,") {\n           let idx = ").concat(o,";\n           ").concat(hO(e,"coords",this.op)," = idx;\n           val ").concat(this.op,"= getX(").concat(pO(e,"coords",this.op),");\n         }\n         setOutputAtIndex(index, val);\n       }\n      }\n    ")}}function pO(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".x, ").concat(t,".y");if(3===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z");if(4===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z, ").concat(t,".w");throw Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function hO(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".y");if(3===e)return"".concat(t,".z");if(4===e)return"".concat(t,".w");throw Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function fO(e,t,n,a,r,o){const i=t.shape.length,s=nd([a],i);let c=t;null!=s&&(c=AR({inputs:{x:t},backend:n,attrs:{perm:s}}));const u=rd(1,i)[0];if(u!==i-1)throw new Error("WebGPU cumprod shader expects an inner-most axis=".concat(t.shape.length-1," ")+"but got axis=".concat(a));const l=c.shape[u];let d=RE({inputs:{x:c},backend:n});for(let p=0;p<=Math.ceil(Math.log2(l))-1;p++){const t=new dO(e,c.shape,!1,o),a=d,r=[{type:"float32",data:[p]}];d=n.runWebGPUProgram(t,[d],d.dtype,r),n.disposeData(a.dataId)}if(r){const t=new dO(e,c.shape,r,o),a=d,i=[{type:"float32",data:[0]}];d=n.runWebGPUProgram(t,[d],d.dtype,i),n.disposeData(a.dataId)}if(null!=s){const e=AR({inputs:{x:d},backend:n,attrs:{perm:ad(s)}});return n.disposeData(d.dataId),n.disposeData(c.dataId),e}return d}const mO={kernelName:jn,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:o,exclusive:i,reverse:s}=a;return fO(lO.Prod,r,n,o,i,s)}};const gO={kernelName:Kn,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:o,exclusive:i,reverse:s}=a;return fO(lO.Sum,r,n,o,i,s)}};const yO={kernelName:Xn,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,weights:o}=t,{size:i,binaryOutput:s}=a,c=1===r.shape.length,u=It(o.shape)>0,l=o.dtype,d=c?[r.shape[0]]:[r.shape[0],r.shape[1]],p=kE({backend:n,attrs:{shape:c?[i]:[r.shape[0],i],value:0,dtype:l}}),h=new bA(d,u,s),f=[{type:"int32",data:[i]}],m=u?[r,o]:[r];return n.runWebGPUProgram(h,m,l,f,p)}};class bO{constructor(e,t){this.variableNames=["x"],this.workgroupSize=[64,1,1],this.size=!0,this.uniforms="blockSize : i32,",this.outputShape=e,this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="depthToSpace_".concat(t),this.dataFormat=t}getUserCode(){return"\n      ".concat(xT("index")," {\n        if (index < uniforms.size) {\n          let coords = getCoordsFromIndex(index);\n          let b = coords[0];\n          let h = ").concat(this.getHeightCoordString(),";\n          let w = ").concat(this.getWidthCoordString(),";\n          let d = ").concat(this.getDepthCoordString(),";\n\n          let in_h = h / uniforms.blockSize;\n          let offset_h = h % uniforms.blockSize;\n          let in_w = w / uniforms.blockSize;\n          let offset_w = w % uniforms.blockSize;\n          let offset_d = (offset_h * uniforms.blockSize + offset_w) *\n            ").concat(this.getOutputDepthSize(),";\n          let in_d = d + offset_d;\n\n          let rlt = ").concat(this.getInputSamplingString(),";\n          setOutputAtIndex(index, rlt);\n        }\n      }")}getHeightCoordString(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}getWidthCoordString(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}getDepthCoordString(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}getOutputDepthSize(){return"NHWC"===this.dataFormat?"uniforms.outShape[3]":"uniforms.outShape[1]"}getInputSamplingString(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}const xO={kernelName:Yn,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{blockSize:o,dataFormat:i}=a,s=r.shape[0],c=("NHWC"===i?r.shape[1]:r.shape[2])*o,u=("NHWC"===i?r.shape[2]:r.shape[3])*o,l=("NHWC"===i?r.shape[3]:r.shape[1])/(o*o),d=[{type:"int32",data:[o]}],p=new bO("NHWC"===i?[s,c,u,l]:[s,l,c,u],i);return n.runWebGPUProgram(p,[r],r.dtype,d)}};class vO{constructor(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.variableNames=["x","W"],this.uniforms="pads : vec2<i32>, inDims : vec2<i32>,",this.workgroupSize=[16,16,1],this.outputShape=e,this.dispatchLayout={x:[3],y:[2],z:[0,1]},this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize),a&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),this.addBias=a,this.activation=r,this.hasPreluActivation=o,this.filterHeight=t,this.filterWidth=n,this.shaderKey="depthwiseNCHW_".concat(this.activation,"_").concat(this.filterHeight,"_").concat(this.filterWidth)}getUserCode(){const e=this.filterWidth*this.filterHeight,t=this.workgroupSize[0]*this.workgroupSize[1]*this.workgroupSize[2],n=this.workgroupSize[1]+this.filterHeight-1,a=this.workgroupSize[0]+this.filterWidth-1;return"\n      ".concat(uE(this.activation,this.hasPreluActivation,!1,4),"\n\n      var<workgroup> mm_Asub : array<array<f32, ").concat(a,">, ").concat(n,">;\n      var<workgroup> mm_Bsub : array<array<f32, ").concat(this.filterWidth,">, ").concat(this.filterHeight,">;\n      fn readX(batch : i32, channel : i32, row : i32, col : i32) -> f32 {\n        var value = 0.0;\n        if (row >=0 && row < uniforms.inDims[0] && col >=0 && col < uniforms.inDims[1])\n        {\n          value = getX(batch, channel, row, col);\n        }\n        return value;\n      }\n\n      ").concat(xT()," {\n        let coords = getOutputCoords();\n        let batch = coords[0];\n        let xRCCorner = vec2<i32>(coords.zw) - uniforms.pads;\n        let channelMul = uniforms.wShape[3];\n        let d1 = coords[1] / channelMul;\n        let q = coords[1] % channelMul;\n\n        let inputRowStart = xRCCorner.x;\n        let inputColStart = xRCCorner.y;\n\n        let localRow = i32(localId.y);\n        let localCol = i32(localId.x);\n\n        // Load one tile of X into local memory.\n        for (var inputRow = localRow; inputRow < ").concat(n,"; inputRow = inputRow + ").concat(this.workgroupSize[1],") {\n          for (var inputCol = localCol; inputCol < ").concat(a,"; inputCol = inputCol + ").concat(this.workgroupSize[0],") {\n            let rowOffset = inputRow - localRow;\n            let colOffset = inputCol - localCol;\n            mm_Asub[inputRow][inputCol] = readX(batch, d1, inputRowStart + rowOffset, inputColStart + colOffset);\n          }\n        }\n\n        // Load one tile of W into local memory.\n        var wIndex = i32(localIndex);\n        ").concat(e<t?"if (wIndex < ".concat(e,")"):"for(; wIndex < ".concat(e,"; wIndex = wIndex + ").concat(t,")"),"\n\n        {\n          let wRow = wIndex / ").concat(this.filterWidth,";\n          let wCol = wIndex % ").concat(this.filterWidth,";\n          mm_Bsub[wRow][wCol] = getW(wRow, wCol, d1, q);\n        }\n\n        workgroupBarrier();\n\n        var value = 0.0;\n        for (var wR = 0; wR < ").concat(this.filterHeight,"; wR = wR + 1) {\n          for (var wC = 0; wC < ").concat(this.filterWidth,"; wC = wC + 1) {\n            let xVal = mm_Asub[localRow + wR][localCol + wC];\n            let wVal = mm_Bsub[wR][wC];\n            value = fma(xVal, wVal, value);\n          }\n        }\n        ").concat(lE(this.addBias,this.activation),"\n        if (coordsInBounds4D(coords, uniforms.outShape)) {\n          setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], value);\n        }\n      }\n    ")}}class wO{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.variableNames=["x","W"],this.uniforms="pads : vec2<i32>, inDims : vec2<i32>, virtualWidth : i32,",this.workgroupSize=[64,1,1],this.workPerThread=4,this.outputComponent=4,this.outputShape=e.outShape,this.virtualWidth=Math.ceil(this.outputShape[2]/this.workPerThread)*this.workPerThread;const r=[this.outputShape[0],this.outputShape[1],this.virtualWidth,this.outputShape[3]];this.dispatchLayout=OT(r),this.dispatch=ET(this.dispatchLayout,r,this.workgroupSize,[this.outputComponent*this.workPerThread,1,1]),kt("channelsLast"===e.dataFormat,(()=>"TODO: NCHW is unimplemented")),t&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),this.convInfo=e,this.addBias=t,this.activation=n,this.hasPreluActivation=a,this.shaderKey="depthwiseVec4_".concat(n,"_").concat(this.convInfo.filterHeight,"_").concat(this.convInfo.filterWidth,"_").concat(this.convInfo.strideHeight,"_").concat(this.convInfo.strideWidth,"_").concat(this.workPerThread)}getUserCode(){const e=(this.workPerThread-1)*this.convInfo.strideWidth+this.convInfo.filterWidth,t=this.convInfo.strideHeight,n=this.convInfo.strideWidth;return"\n      ".concat(uE(this.activation,this.hasPreluActivation,!0,4),"\n      fn readX(batch : i32, row : i32, col : i32, channel : i32) -> vec4<f32> {\n        var value = vec4<f32>(0.0);\n        if (col >=0 && col < uniforms.inDims[1]) {\n          value = getX(batch, row, col, channel);\n        }\n        return value;\n      }\n\n      ").concat(xT("index")," {\n        let width0 = uniforms.outShape[3] / ").concat(this.outputComponent,";\n        let d1 = (index % width0) * ").concat(this.outputComponent,";\n        var index1 = index / width0;\n        let width1 = uniforms.virtualWidth / ").concat(this.workPerThread,";\n        let c = (index1 % width1) * ").concat(this.workPerThread,";\n        index1 = index1 / width1;\n        let r = index1 % uniforms.outShape[1];\n        let batch = index1 / uniforms.outShape[1];\n\n        let xRCCorner = vec2<i32>(r, c) * vec2<i32>(").concat(t,", ").concat(n,") - uniforms.pads;\n\n        let xRCorner = xRCCorner.x;\n        let xCCorner = xRCCorner.y;\n        var xVals : array<vec4<f32>, ").concat(e,">;\n        var dotProd : array<vec4<f32>, ").concat(this.workPerThread,">;\n        for (var i = 0; i < ").concat(this.workPerThread,"; i++) {\n          dotProd[i] = vec4<f32>(0.0);\n        }\n\n        // Use constant instead of uniform can give better performance.\n        for (var wR = 0; wR < ").concat(this.convInfo.filterHeight,"; wR = wR + 1) {\n          let xR = xRCorner + wR;\n          if (xR >=0 && xR < uniforms.inDims[0]) {\n            for (var i = 0; i < ").concat(e,"; i++) {\n              xVals[i] = readX(batch, xR, xCCorner + i, d1);\n            }\n            for (var wC = 0; wC < ").concat(this.convInfo.filterWidth,"; wC = wC + 1) {\n              let wValue = getW(wR, wC, d1, 0);\n              for (var i = 0; i < ").concat(this.workPerThread,"; i++) {\n                dotProd[i] = fma(xVals[i * ").concat(n," + wC], wValue, dotProd[i]);\n              }\n            }\n          }\n        }\n\n        for (var i = 0; i < ").concat(this.workPerThread,"; i = i + 1) {\n          let coords = vec4<i32>(batch, r, c + i, d1);\n          if (coordsInBounds4D(coords, uniforms.outShape)) {\n            var value = dotProd[i];\n            ").concat(lE(this.addBias,this.activation),"\n            setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], value);\n          }\n        }\n      }\n    ")}}class kO{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.variableNames=["x","W"],this.uniforms="pads : vec2<i32>, inDims : vec2<i32>, filterHeight : i32,\n      filterWidth : i32, strides : vec2<i32>, dilations : vec2<i32>,",this.workgroupSize=[256,1,1],this.size=!0,this.outputShape=e.outShape,this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize),this.isChannelsLast="channelsLast"===e.dataFormat,t&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),this.convInfo=e,this.addBias=t,this.activation=n,this.hasPreluActivation=a,this.shaderKey="depthwise_".concat(this.activation,"_").concat(this.isChannelsLast)}getUserCode(){const e=this.isChannelsLast?"getX(batch, xR, xC, d1);":"getX(batch, d1, xR, xC);";return"\n      ".concat(uE(this.activation,this.hasPreluActivation,!1,4),"\n\n      ").concat(xT("index")," {\n        if (index < uniforms.size) {\n          let coords = getOutputCoords();\n          let batch = coords[0];\n          let xRCCorner = vec2<i32>(coords.").concat(this.isChannelsLast?"yz":"zw",") * uniforms.strides - uniforms.pads;\n          let d2 = coords[").concat(this.isChannelsLast?3:1,"];\n          let channelMul = uniforms.wShape[3];\n          let d1 = d2 / channelMul;\n          let q = d2 % channelMul;\n\n          let inputRowStart = xRCCorner.x;\n          let inputColStart = xRCCorner.y;\n          let inputRowEnd = inputRowStart + uniforms.filterHeight *\n              uniforms.dilations[0];\n          let inputColEnd = inputColStart + uniforms.filterWidth *\n              uniforms.dilations[1];\n\n          // Convolve x(?, ?, d1)|x(d1, ?, ?) with w(:, :, d1, q) to get\n          // y(yR, yC, d2)|y(d2, yR, yC). ? = to be determined. : = across all\n          // values in that axis. x(?, ?, d1) and y(yR, yC, d2) is for NHWC.\n          // x(d1, ?, ?) and y(d2, yR, yC) is for NCHW.\n          var value = 0.0;\n\n          // Extract if checking out of for loop for performance.\n          if (inputRowStart >= 0 && inputColStart >= 0 &&\n            inputRowEnd < uniforms.inDims[0] &&\n                inputColEnd < uniforms.inDims[1]) {\n              for (var wR = 0; wR < uniforms.filterHeight; wR = wR + 1) {\n                let xR = inputRowStart + wR * uniforms.dilations[0];\n\n                for (var wC = 0; wC < uniforms.filterWidth; wC = wC + 1) {\n                  let xC = inputColStart + wC * uniforms.dilations[1];\n\n                  let xVal = ").concat(e,";\n                  let wVal = getW(wR, wC, d1, q);\n                  value = value + xVal * wVal;\n                }\n              }\n            } else {\n              for (var wR = 0; wR < uniforms.filterHeight; wR = wR + 1) {\n                let xR = inputRowStart + wR * uniforms.dilations[0];\n\n                if (xR < 0 || xR >= uniforms.inDims[0]) {\n                  continue;\n                }\n\n                for (var wC = 0; wC < uniforms.filterWidth; wC = wC + 1) {\n                  let xC = inputColStart + wC * uniforms.dilations[1];\n\n                  if (xC < 0 || xC >= uniforms.inDims[1]) {\n                    continue;\n                  }\n\n                  let xVal = ").concat(e,";\n                  let wVal = getW(wR, wC, d1, q);\n                  value = value + xVal * wVal;\n                }\n              }\n            }\n            ").concat(lE(this.addBias,this.activation),"\n          setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], value);\n        }\n      }\n    ")}}const SO={kernelName:Qn,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,filter:o}=t,{strides:i,pad:s,dataFormat:c,dilations:u,dimRoundingMode:l}=a,d=tl(c);let p=u;null==p&&(p=[1,1]);const h=ju(r.shape,o.shape,i,p,s,l,!0,d),f=[{type:"int32",data:[h.padInfo.top,h.padInfo.left]},{type:"int32",data:[h.inHeight,h.inWidth]}],m="channelsLast"===h.dataFormat;let g;return!m&&h.inHeight>16&&h.inWidth>16&&1===h.strideHeight&&1===h.strideWidth&&1===h.dilationWidth&&1===h.dilationHeight&&h.inChannels===h.outChannels?g=new vO(h.outShape,h.filterHeight,h.filterWidth):m&&h.outHeight>4&&h.outWidth>4&&h.strideWidth<=2&&h.inChannels===h.outChannels&&1===h.dilationHeight&&1===h.dilationWidth&&h.inChannels%4===0?(g=new wO(h),f.push({type:"int32",data:[g.virtualWidth]})):(g=new kO(h),f.push({type:"int32",data:[h.filterHeight]},{type:"int32",data:[h.filterWidth]},{type:"int32",data:[h.strideHeight,h.strideWidth]},{type:"int32",data:[h.dilationHeight,h.dilationWidth]})),n.runWebGPUProgram(g,[r,o],r.dtype,f)}};class CO{constructor(e){this.variableNames=["x","dy"],this.uniforms="strides : vec2<i32>, pads : vec2<i32>, filterDims : vec2<i32>, outHeight : i32,\n      outWidth : i32, inHeight : i32, inWidth : i32, batchSize : i32, channelMul : i32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e.filterShape,this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="depthwise_conv2d_backprop_filter"}getUserCode(){return"\n      ".concat(xT("index")," {\n      if (index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n        let wR = coords[0];\n        let wC = coords[1];\n        let d1 = coords[2];\n        let dm = coords[3];\n        let d2 = d1 * uniforms.channelMul + dm;\n\n        var dotProd = 0.0;\n        for (var b = 0; b < uniforms.batchSize; b++) {\n          for (var yR = 0; yR < uniforms.outHeight; yR++) {\n            let xR = wR + yR * uniforms.strides[0] - uniforms.pads[0];\n\n            if (xR < 0 || xR >= uniforms.inHeight) {\n              continue;\n            }\n\n            for (var yC = 0; yC < uniforms.outWidth; yC++) {\n              let xC = wC + yC * uniforms.strides[1] - uniforms.pads[1];\n\n              if (xC < 0 || xC >= uniforms.inWidth) {\n                continue;\n              }\n\n              let dyValue = getDy(b, yR, yC, d2);\n              let xValue = getX(b, xR, xC, d1);\n              dotProd += xValue * dyValue;\n            }\n          }\n        }\n        setOutputAtIndex(index, dotProd);\n      }\n    }\n    ")}}class IO{constructor(e){this.variableNames=["dy","W"],this.uniforms="strides : vec2<i32>, pads : vec2<i32>, filterDims : vec2<i32>,\n       outHeight : i32, outWidth : i32, channelMul : i32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e.inShape,this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="depthwise_conv2d_backprop_input"}getUserCode(){return"\n      ".concat(xT("index")," {\n      if (index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n        let batch = coords[0];\n        let d1 = coords[3];\n        let dyCorner = coords.yz - uniforms.pads;\n        let dyRCorner = dyCorner.x;\n        let dyCCorner = dyCorner.y;\n\n        var dotProd = 0.0;\n        for (var wR = 0; wR < uniforms.filterDims[0]; wR++) {\n          let dyR = f32(dyRCorner + wR) / f32(uniforms.strides[0]);\n\n          if (dyR < 0.0 || dyR >= f32(uniforms.outHeight) || fract(dyR) > 0.0) {\n            continue;\n          }\n\n          let idyR = i32(dyR);\n          let wRPerm = uniforms.filterDims[0] - 1 - wR;\n\n          for (var wC = 0; wC < uniforms.filterDims[1]; wC++) {\n            let dyC = f32(dyCCorner + wC) / f32(uniforms.strides[1]);\n\n            if (dyC < 0.0 || dyC >= f32(uniforms.outWidth) || fract(dyC) > 0.0) {\n              continue;\n            }\n\n            let idyC = i32(dyC);\n            let wCPerm = uniforms.filterDims[1] - 1 - wC;\n\n            for (var dm = 0; dm < uniforms.channelMul; dm++) {\n              let d2 = d1 * uniforms.channelMul + dm;\n              let xValue = getDy(batch, idyR, idyC, d2);\n              let wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutputAtIndex(index, dotProd);\n      }\n    }\n    ")}}const NO={kernelName:Zn,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,dy:o}=t,{strides:i,dilations:s,pad:c,dimRoundingMode:u,filterShape:l}=a,d=ju(r.shape,l,i,s,c,u,!0),p=new CO(d),h=[{type:"int32",data:[d.strideHeight,d.strideWidth]},{type:"int32",data:[d.padInfo.top,d.padInfo.left]},{type:"int32",data:[d.filterHeight,d.filterWidth]},{type:"int32",data:[d.outHeight]},{type:"int32",data:[d.outWidth]},{type:"int32",data:[d.inHeight]},{type:"int32",data:[d.inWidth]},{type:"int32",data:[d.batchSize]},{type:"int32",data:[d.outChannels/d.inChannels]}];return n.runWebGPUProgram(p,[r,o],"float32",h)}};const TO={kernelName:$n,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:r,filter:o}=t,{strides:i,dilations:s,pad:c,dimRoundingMode:u,inputShape:l}=a,d=ju(l,o.shape,i,s,c,u,!0),p=new IO(d),h=[{type:"int32",data:[d.strideHeight,d.strideWidth]},{type:"int32",data:[d.filterHeight-1-d.padInfo.top,d.filterWidth-1-d.padInfo.left]},{type:"int32",data:[d.filterHeight,d.filterWidth]},{type:"int32",data:[d.outHeight]},{type:"int32",data:[d.outWidth]},{type:"int32",data:[d.outChannels/d.inChannels]}];return n.runWebGPUProgram(p,[r,o],r.dtype,h)}};class _O{constructor(e){this.variableNames=["x"],this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=[e,e],this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="diag"}getUserCode(){return"\n      ".concat(xT("index")," {\n        if (index < uniforms.size) {\n          let coords = getOutputCoords();\n          let value = select(0.0, getX(coords[0]), coords[0] == coords[1]);\n          setOutputAtIndex(index, value);\n        }\n      }\n    ")}}const EO={kernelName:Jn,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:a}=t,r=[...a.shape,...a.shape],o=It(a.shape),i=CE({inputs:{x:a},backend:n,attrs:{shape:[o]}}),s=new _O(o),c=n.runWebGPUProgram(s,[i],i.dtype),u=CE({inputs:{x:c},backend:n,attrs:{shape:r}});return n.disposeData(i.dataId),n.disposeData(c.dataId),u}};class RO{constructor(e){this.variableNames=["x","w"],this.uniforms="filterDims: vec2<i32>, pads: vec2<i32>, strides: vec2<i32>, dilations: vec2<i32>",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e.outShape,this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="dilation2d"}getUserCode(){return"\n       ".concat(xT("index")," {\n         if (index < uniforms.size) {\n           let neg_infinity = -3.4e38;\n           let coords = getOutputCoords();\n           let batch = coords.x;\n           let d1 = coords.w;\n           let outTopLeftCorner = coords.yz * uniforms.strides - uniforms.pads;\n           let hBeg = outTopLeftCorner.x;\n           let wBeg = outTopLeftCorner.y;\n\n           var curVal = neg_infinity;\n           for (var h = 0; h < uniforms.filterDims[0]; h = h + 1) {\n             let hIn = hBeg + h * uniforms.dilations[0];\n\n             if (hIn >= 0 && hIn < uniforms.xShape[1]) {\n               for (var w = 0; w < uniforms.filterDims[1]; w = w + 1) {\n                 let wIn = wBeg + w * uniforms.dilations[1];\n\n                 if (wIn >= 0 && wIn < uniforms.xShape[2]) {\n                   let val = getX(batch, hIn, wIn, d1) + getW(h, w, d1);\n                   if (val > curVal) {\n                     curVal = val;\n                   }\n                 }\n               }\n             }\n           }\n\n           setOutputAtIndex(index, curVal);\n         }\n       }\n     ")}}const AO={kernelName:ea,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,filter:o}=t,{strides:i,pad:s,dilations:c}=a,u=Vu(r.shape,o.shape,i,s,"NHWC",c),l=[u.padInfo.top,u.padInfo.left],d=[{type:"int32",data:[u.filterHeight,u.filterWidth]},{type:"int32",data:[...l]},{type:"int32",data:[u.strideHeight,u.strideWidth]},{type:"int32",data:[u.dilationHeight,u.dilationWidth]}],p=new RO(u);return n.runWebGPUProgram(p,[r,o],r.dtype,d)}};class OO{constructor(e,t){if(this.variableNames=["x","w","dy"],this.uniforms="filterDims: vec2<i32>, pads: vec2<i32>, strides: vec2<i32>, dilations: vec2<i32>, dySize: i32,",this.workgroupSize=[64,1,1],this.atomic=!0,this.outputShape=e.inShape,this.dispatchLayout=OT(e.outShape),this.dispatch=ET(this.dispatchLayout,e.outShape,this.workgroupSize),"float32"!==t&&"int32"!==t)throw new Error("Dilation2DBackpropInput only supports float32 and int32\n          types, does not support ".concat(t," type."));this.type=t,this.shaderKey="dilation2DBackpropInput"}getUserCode(){return"\n       ".concat(xT("index")," {\n         if (index < uniforms.dySize) {\n           let coords = getDyCoordsFromIndex(index);\n           let b = coords[0];\n           let r = coords[1];\n           let c = coords[2];\n           let d = coords[3];\n\n           let dyCorner = vec2<i32>(r, c) * uniforms.strides - uniforms.pads;\n           var curVal = -3.4e38;  // neg_infinity\n           var xRMax = 0;\n           var xCMax = 0;\n\n           // In the case of multiple argmax branches, we only back-propagate\n           // along the last branch, i.e., the one with largest value of\n           // 'wR * uniforms.filterDims[1] + wC', similarly to the max-pooling\n           // backward routines.\n           for (var wR = 0; wR < uniforms.filterDims[0]; wR++) {\n             let xR = dyCorner.x + wR * uniforms.dilations[0];\n\n             if (xR >= 0 && xR < uniforms.xShape[1]) {\n               for (var wC = 0; wC < uniforms.filterDims[1]; wC++) {\n                 let xC = dyCorner.y + wC * uniforms.dilations[1];\n\n                 if (xC >= 0 && xC < uniforms.xShape[2]) {\n                   let val = getX(b, xR, xC, d) + getW(wR, wC, d);\n                   if (val > curVal) {\n                     curVal = val;\n                     xRMax = xR;\n                     xCMax = xC;\n                   }\n                 }\n               }\n             }\n           }\n\n           let flatIndexIn = d + uniforms.xShape[3] *\n               (xCMax + uniforms.xShape[2] * (xRMax + uniforms.xShape[1] * b));\n           let value = getDy(b, r, c, d);\n           ").concat(hT("&result[flatIndexIn]","value",this.type),"\n         }\n       }\n     ")}}class FO{constructor(e,t,n){if(this.variableNames=["x","w","dy"],this.uniforms="filterDims: vec2<i32>, pads: vec2<i32>, strides: vec2<i32>, dilations: vec2<i32>, dySize: i32,",this.workgroupSize=[64,1,1],this.atomic=!0,this.outputShape=e.filterShape,this.dispatchLayout=OT(e.outShape),this.dispatch=ET(this.dispatchLayout,e.outShape,this.workgroupSize),"float32"!==n&&"int32"!==n)throw new Error("Dilation2DBackpropFilter only supports float32 and int32\n          types, does not support ".concat(n," type."));this.type=n,this.shaderKey="dilation2DBackpropFilter"}getUserCode(){return"\n       ".concat(xT("index")," {\n         if (index < uniforms.dySize) {\n           let coords = getDyCoordsFromIndex(index);\n           let b = coords[0];\n           let r = coords[1];\n           let c = coords[2];\n           let d = coords[3];\n\n           let dyCorner = vec2<i32>(r, c) * uniforms.strides - uniforms.pads;\n           var curVal = -3.4e38;  // neg_infinity\n           var wRMax = 0;\n           var wCMax = 0;\n\n           // In the case of multiple argmax branches, we only back-propagate\n           // along the last branch, i.e., the one with largest value of\n           // 'wR * uniforms.filterDims[1] + wC', similarly to the max-pooling\n           // backward routines.\n           for (var wR = 0; wR < uniforms.filterDims[0]; wR++) {\n             let xR = dyCorner.x + wR * uniforms.dilations[0];\n\n             if (xR >= 0 && xR < uniforms.xShape[1]) {\n               for (var wC = 0; wC < uniforms.filterDims[1]; wC++) {\n                 let xC = dyCorner.y + wC * uniforms.dilations[1];\n\n                 if (xC >= 0 && xC < uniforms.xShape[2]) {\n                   let val = getX(b, xR, xC, d) + getW(wR, wC, d);\n                   if (val > curVal) {\n                     curVal = val;\n                     wRMax = wR;\n                     wCMax = wC;\n                   }\n                 }\n               }\n             }\n           }\n\n           let flatIndexIn = d + uniforms.wShape[2] * (wCMax + wRMax * uniforms.wShape[1]);\n           let value = getDy(b, r, c, d);\n           ").concat(hT("&result[flatIndexIn]","value",this.type),"\n         }\n       }\n     ")}}const DO={kernelName:na,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,filter:o,dy:i}=t,{strides:s,pad:c,dilations:u}=a,l=Vu(r.shape,o.shape,s,c,"NHWC",u),d=o.dtype,p=new FO(l,o.shape,d),h=[{type:"int32",data:[l.filterHeight,l.filterWidth]},{type:"int32",data:[l.padInfo.top,l.padInfo.left]},{type:"int32",data:[l.strideHeight,l.strideWidth]},{type:"int32",data:[l.dilationHeight,l.dilationWidth]},{type:"int32",data:[It(l.outShape)]}],f=kE({backend:n,attrs:{shape:o.shape,value:0,dtype:d}});return n.runWebGPUProgram(p,[r,o,i],d,h,f)}};const MO={kernelName:ta,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,filter:o,dy:i}=t,{strides:s,pad:c,dilations:u}=a,l=Vu(r.shape,o.shape,s,c,"NHWC",u),d=r.dtype,p=new OO(l,d),h=[{type:"int32",data:[l.filterHeight,l.filterWidth]},{type:"int32",data:[l.padInfo.top,l.padInfo.left]},{type:"int32",data:[l.strideHeight,l.strideWidth]},{type:"int32",data:[l.dilationHeight,l.dilationWidth]},{type:"int32",data:[It(l.outShape)]}],f=kE({backend:n,attrs:{shape:l.inShape,value:0,dtype:d}});return n.runWebGPUProgram(p,[r,o,i],d,h,f)}};class PO{constructor(e,t,n){this.variableNames=["Image"],this.uniforms="alpha: f32,",this.workgroupSize=[64,1,1],this.pixelsOpType=fT.DRAW,this.size=!0,this.outputShape=e,this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize),this.type=t,this.textureFormat=n,this.shaderKey="draw_".concat(t,"_").concat(n)}getUserCode(){let e;const t="float32"===this.type?"value":"value / 255.0";e="\n      if (uniforms.numChannels == 1) {\n        rgba[0] = ".concat(t,";\n        rgba[1] = ").concat(t,";\n        rgba[2] = ").concat(t,";\n      } else {\n        rgba[d] = ").concat(t,";\n      }");return"\n       @group(0) @binding(0) var outImage : texture_storage_2d<".concat(this.textureFormat,", write>;\n       ").concat(xT("index")," {\n         if (index < uniforms.size) {\n           var rgba = vec4<f32>(0.0, 0.0, 0.0, uniforms.alpha);\n           for (var d = 0; d < uniforms.numChannels; d = d + 1) {\n             let value = f32(inBuf[index * uniforms.numChannels + d]);\n             ").concat(e,"\n           }\n           rgba.x = rgba.x * rgba.w;\n           rgba.y = rgba.y * rgba.w;\n           rgba.z = rgba.z * rgba.w;\n           let coords = getCoordsFromIndex(index);\n           textureStore(outImage, vec2<i32>(coords.yx), rgba);\n         }\n       }\n      ")}}const LO={kernelName:aa,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{image:r}=t,{canvas:o,options:i}=a,[s,c]=r.shape.slice(0,2),{imageOptions:u}=i||{},l=(null===u||void 0===u?void 0:u.alpha)||1,d=n.device.features.has("bgra8unorm-storage")?"bgra8unorm":"rgba8unorm",p=[s,c],h=new PO(p,r.dtype,d);o.width=c,o.height=s;const f="webgpu";let m,g=o.getContext(f);g||(m=new OffscreenCanvas(c,s),g=m.getContext(f));const y=3===r.shape.length?r.shape[2]:1;g.configure({device:n.device,format:d,usage:GPUTextureUsage.STORAGE_BINDING,alphaMode:"premultiplied"});const b="int32",x=n.makeTensorInfo(p,b),v=n.tensorMap.get(x.dataId);v.resource=g.getCurrentTexture(),v.external=!0;const w=[{type:"uint32",data:[y]},{type:"float32",data:[l]}];if(n.runWebGPUProgram(h,[r],b,w,x),m){const e=o.getContext("2d");if(!e)throw new Error("Please make sure this canvas has only been used for 2d or webgpu context!");e.drawImage(m,0,0)}return n.disposeData(x.dataId),r}},zO=PE({opType:BT.MUL,cpuKernelImpl:nR,supportsComplex:!0}),BO={kernelName:Ja,backendName:"webgpu",kernelFunc:zO};function WO(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:o,keepDims:i}=a;return MR(r,o,i,"sum",n)}const UO={kernelName:Wr,backendName:"webgpu",kernelFunc:WO};const VO={kernelName:oa,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{equation:r}=a,o=t,{allDims:i,summedDims:s,idDims:c}=Tm(r,o.length);Em(i.length,c,o);const{path:u,steps:l}=Rm(s,c),d=l.length;let p=null,h=i.length;const f=[];for(let m=0;m<d;++m){for(const e of l[m]){const{permutationIndices:t,expandDims:a}=_m(h,c[e]);let r;Am(t)?r=o[e]:(r=AR({inputs:{x:o[e]},backend:n,attrs:{perm:t}}),f.push(r));const i=r.shape.slice();for(let e=0;e<a.length;++e)i.splice(a[e],0,1);Tt(r.shape,i)||(r=CE({inputs:{x:r},backend:n,attrs:{shape:i}}),f.push(r)),null===p?p=r:(p=zO({inputs:{a:r,b:p},backend:n}),f.push(p))}m<d-1&&(u[m]>=0&&(p=WO({inputs:{x:p},backend:n,attrs:{axis:u[m]-(i.length-h),keepDims:!1}}),f.push(p)),h--)}for(const m of f)m!==p&&n.disposeData(m.dataId);return p}},GO=ME({opType:g_.ELU}),HO={kernelName:ia,backendName:"webgpu",kernelFunc:GO},jO={kernelName:sa,backendName:"webgpu",kernelFunc:e=>{const{inputs:t,backend:n}=e,{dy:a,y:r}=t,o=new EE(BT.ELU_DER,a.shape,r.shape);return n.runWebGPUProgram(o,[a,r],a.dtype)}},KO=PE({opType:BT.EQUAL,dtype:"bool",cpuKernelImpl:UE}),qO={kernelName:ua,backendName:"webgpu",kernelFunc:KO},XO=ME({opType:g_.ERF}),YO={kernelName:ca,backendName:"webgpu",kernelFunc:XO},QO=ME({opType:g_.EXP,cpuKernelImpl:VE,dtype:"float32"}),ZO={kernelName:la,backendName:"webgpu",kernelFunc:QO};function $O(e){const{inputs:t,attrs:n,backend:a}=e,{dim:r}=n,{input:o}=t,i=o.shape.length,s=o.shape.slice();let c=r;return r<0&&(kt(-(i+1)<=r,(()=>"Axis must be in the interval [".concat(-(i+1),", ").concat(i,"]"))),c=i+r+1),s.splice(c,0,1),CE({inputs:{x:o},backend:a,attrs:{shape:s}})}const JO={kernelName:da,backendName:"webgpu",kernelFunc:$O},eF=ME({opType:g_.EXPM1,cpuKernelImpl:GE}),tF={kernelName:pa,backendName:"webgpu",kernelFunc:eF};class nF{constructor(e,t){this.variableNames=["real","imag"],this.outputShape=[],this.uniforms="exponentMultiplier : f32, denominator: f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t,this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize),this.component=e,this.shaderKey="fft_".concat(e)}getUserCode(){const e="real"===this.component?"return real * expR - imag * expI;":"return real * expI + imag * expR;";return"\n    fn unaryOpComplex(real: f32, expR: f32, imag: f32, expI: f32) -> f32 {\n      ".concat(e,"\n    }\n\n    fn mulMatDFT(batch: i32, index: i32) -> f32 {\n      let indexRatio = f32(index) / f32(uniforms.realShape[1]);\n      let exponentMultiplierTimesIndexRatio =\n          uniforms.exponentMultiplier * indexRatio;\n\n      var result = 0.0;\n\n      for (var i = 0; i < uniforms.realShape[1]; i = i + 1) {\n        // x = (-2|2 * PI / N) * index * i;\n        let x = exponentMultiplierTimesIndexRatio * f32(i);\n        let expR = cos(x);\n        let expI = sin(x);\n        let real = getReal(batch, i);\n        let imag = getImag(batch, i);\n\n        result = result +\n            unaryOpComplex(real, expR, imag, expI) / uniforms.denominator;\n      }\n\n      return result;\n    }\n\n    ").concat(xT("index")," {\n      if (index < uniforms.size) {\n        let coords = getOutputCoords();\n        setOutputAtIndex(index, mulMatDFT(coords[0], coords[1]));\n      }\n    }\n  ")}}function aF(e,t,n){const a=n.tensorMap.get(e.dataId),r=It(e.shape),o=e.shape[e.shape.length-1],i=[],s=CE({inputs:{x:e},backend:n,attrs:{shape:[r/o,o]}});i.push(s);const c=s.shape,u=new nF("real",c),l=new nF("imag",c),d=[{dataId:a.complexTensorInfos.real.dataId,dtype:a.complexTensorInfos.real.dtype,shape:c},{dataId:a.complexTensorInfos.imag.dataId,dtype:a.complexTensorInfos.imag.dtype,shape:c}],p=[{type:"float32",data:[t?2*Math.PI:-2*Math.PI]},{type:"float32",data:[t?c[1]:1]}],h=n.runWebGPUProgram(u,d,"float32",p);i.push(h);const f=n.runWebGPUProgram(l,d,"float32",p);i.push(f);const m=OE({inputs:{real:h,imag:f},backend:n});i.push(m);const g=CE({inputs:{x:m},backend:n,attrs:{shape:e.shape}});return i.forEach((e=>n.disposeData(e.dataId))),g}const rF={kernelName:ha,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:a}=t;return aF(a,!1,n)}};class oF{constructor(e){this.outputShape=[],this.variableNames=["x"],this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e,this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="flipLeftRight"}getUserCode(){return"\n      ".concat(xT("index")," {\n        if (index < uniforms.size) {\n          let coords = getCoordsFromIndex(index);\n          let coordX = uniforms.xShape[2] - coords[2] - 1;\n          let outputValue = getX(coords[0], coords[1], coordX, coords[3]);\n          setOutputAtIndex(index, outputValue);\n        }\n      }\n    ")}}const iF={kernelName:ma,backendName:"webgpu",kernelFunc:e=>{let{inputs:t,backend:n}=e;const{image:a}=t,r=n,o=new oF(a.shape);return r.runWebGPUProgram(o,[a],a.dtype)}},sF=ME({opType:g_.FLOOR,cpuKernelImpl:HE}),cF={kernelName:ga,backendName:"webgpu",kernelFunc:sF},uF=PE({opType:BT.FLOOR_DIV,cpuKernelImpl:jE,dtype:"int32"}),lF={kernelName:ya,backendName:"webgpu",kernelFunc:uF};class dF{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.pixelsOpType=fT.FROM_PIXELS,this.outputShape=[0],this.variableNames=[],this.workgroupSize=[256,1,1],this.outputShape=e,this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize,[t,1,1]),this.importVideo=n,this.shaderKey="fromPixels_".concat(this.importVideo)}getUserCode(){const e=this.importVideo?"textureLoad(src, vec2<i32>(coords.yx));":"textureLoad(src, vec2<i32>(coords.yx), 0)",t=this.importVideo?"texture_external":"texture_2d<f32>";return"\n      @binding(1) @group(0) var src: ".concat(t,";\n      ").concat(xT("index")," {\n        let flatIndex = index * uniforms.numChannels;\n        if (flatIndex < uniforms.size) {\n          let coords = getCoordsFromIndex(flatIndex);\n          let values = ").concat(e,";\n          for (var i = 0; i < uniforms.numChannels; i = i + 1) {\n            result[flatIndex + i] = i32(floor(255.0 * values[i]));\n          }\n        }\n      }\n  ")}}const pF={kernelName:mo,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e;let{pixels:r}=t;const{numChannels:o}=a;if(null==r)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");const i="undefined"!==typeof HTMLVideoElement&&r instanceof HTMLVideoElement,s="undefined"!==typeof HTMLImageElement&&r instanceof HTMLImageElement,c="undefined"!==typeof HTMLCanvasElement&&r instanceof HTMLCanvasElement||"undefined"!==typeof OffscreenCanvas&&r instanceof OffscreenCanvas,u="undefined"!==typeof ImageBitmap&&r instanceof ImageBitmap,[l,d]=i?[r.videoWidth,r.videoHeight]:[r.width,r.height],p=[d,l,o],h=nn().getBool("WEBGPU_IMPORT_EXTERNAL_TEXTURE")&&i,f=i||s;if(u||c||f){let e;if(h)e=n.device.importExternalTexture({source:r});else{if(f){const e=nn().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");null!=hF&&e===fF||(fF=e,hF=document.createElement("canvas").getContext("2d",{willReadFrequently:fF})),hF.canvas.width=l,hF.canvas.height=d,hF.drawImage(r,0,0,l,d),r=hF.canvas}const t=GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING,a="rgba8unorm",o=n.textureManager.acquireTexture(p[1],p[0],a,t);n.queue.copyExternalImageToTexture({source:r},{texture:o},[p[1],p[0]]),e=o}const t=It(p),a=Gt(p),i=new dF(p,o,h),s=[{type:"uint32",data:[t]},{type:"uint32",data:[o]},{type:"uint32",data:[...a]}],c=n.makeTensorInfo([d,l],"int32");n.tensorMap.get(c.dataId).resource=e;const u=n.runWebGPUProgram(i,[c],"int32",s);return n.disposeData(c.dataId),u}const m=r.data;let g=m;if(null!=o&&4!==o){g=new Uint8Array(r.width*r.height*o);const e=m.length;let t=0;for(let n=0;n<e;n++)n%4<o&&(g[t++]=m[n])}const y=n.makeTensorInfo(p,"int32",new Int32Array(g));return n.uploadToGPU(y.dataId),y}};let hF,fF=nn().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");class mF{constructor(e,t,n,a,r){this.uniforms="varianceEpsilon : f32,",this.workgroupSize=[128,1,1],this.size=!0,this.variableNames=["x","mean","variance"],Rc(e,t),Rc(e,n),this.outputShape=e,this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize),null!=a&&(Rc(e,a),this.variableNames.push("offset")),null!=r&&(Rc(e,r),this.variableNames.push("scale")),this.offsetShape=a,this.scaleShape=r,this.shaderKey="batchNorm"}getUserCode(){let e="0.0";null!=this.offsetShape&&(e="getOffsetByOutputIndex(index)");let t="1.0";null!=this.scaleShape&&(t="getScaleByOutputIndex(index)");return"\n      ".concat(xT("index")," {\n        if (index < uniforms.size)\n        {\n          let xValue = getXByOutputIndex(index);\n          let meanValue = getMeanByOutputIndex(index);\n          let varianValue = getVarianceByOutputIndex(index);\n          let offsetValue = ").concat(e,";\n          let scaleValue = ").concat(t,";\n          let inv = scaleValue * inverseSqrt(varianValue + f32(uniforms.varianceEpsilon));\n          setOutputAtIndex(index,dot(vec3<f32>(xValue, -meanValue, offsetValue), vec3<f32>(inv, inv, 1.0)));\n        }\n      }\n  ")}}const gF={kernelName:ba,backendName:"webgpu",kernelFunc:e=>{let{inputs:t,attrs:n,backend:a}=e;const{x:r,scale:o,offset:i,mean:s,variance:c}=t,{varianceEpsilon:u}=n,l=a,d=[r,s,c];let p=null;null!=i&&(p=i.shape,d.push(i));let h=null;null!=o&&(h=o.shape,d.push(o));const f=new mF(r.shape,s.shape,c.shape,p,h),m=[{type:"float32",data:[u]}];return l.runWebGPUProgram(f,d,r.dtype,m)}};const yF={kernelName:bo,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,filter:o,bias:i,preluActivationWeights:s}=t,{strides:c,pad:u,dataFormat:l,dilations:d,dimRoundingMode:p,activation:h,leakyreluAlpha:f}=a,m=tl(l);return jA({x:r,filter:o,convInfo:ju(r.shape,o.shape,c,d,u,p,!1,m),backend:n,bias:i,preluActivationWeights:s,leakyreluAlpha:f,activation:h})}};const bF={kernelName:xo,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,filter:o,bias:i,preluActivationWeights:s}=t,{strides:c,pad:u,dilations:l,dimRoundingMode:d,activation:p,leakyreluAlpha:h}=a;let f=l;null==f&&(f=[1,1]),kt(Ju(c,f),(()=>"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(c," and dilations '").concat(f,"'")));const m=ju(r.shape,o.shape,c,f,u,d,!0),g=[r,o],y=null!=i,b=null!=s;y&&g.push(i),b&&g.push(s);const x=[{type:"int32",data:[m.padInfo.top,m.padInfo.left]},{type:"int32",data:[m.inHeight,m.inWidth]}];let v;return m.outHeight>4&&m.outWidth>4&&m.strideWidth<=2&&m.inChannels===m.outChannels&&1===m.dilationHeight&&1===m.dilationWidth&&m.inChannels%4===0?(v=new wO(m,y,p,b),x.push({type:"int32",data:[v.virtualWidth]})):(v=new kO(m,y,p,b),x.push({type:"int32",data:[m.filterHeight]},{type:"int32",data:[m.filterWidth]},{type:"int32",data:[m.strideHeight,m.strideWidth]},{type:"int32",data:[m.dilationHeight,m.dilationWidth]})),"leakyrelu"===p&&(x.push({type:"float32",data:[h]}),v.uniforms+=" alpha : f32,"),n.runWebGPUProgram(v,g,"float32",x)}};class xF{constructor(e,t){this.variableNames=["A","indices"],this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t,this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="gathernd_".concat(e),this.sliceDim=e,this.uniforms="sliceDim : i32, strides : ".concat(yT(e),",")}getUserCode(){let e;e=this.sliceDim>1?"uniforms.strides[j]":"uniforms.strides";return"\n      ".concat(xT("index")," {\n        if (index < uniforms.size) {\n          let coords = getCoordsFromIndex(index);\n          var flattenIndex = 0;\n          for (var j = 0; j < uniforms.sliceDim; j = j + 1) {\n            let indexTemp = i32(round(getIndices(coords[0], j)));\n            let strideNum = ").concat(e,";\n            flattenIndex = flattenIndex + indexTemp * strideNum;\n          }\n\n          setOutputAtIndex(index, getA(flattenIndex, coords[1]));\n        }\n      }\n      ")}}const vF={kernelName:va,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{params:a,indices:r}=t,o=r.shape,i=o[o.length-1],s=It(a.shape),[c,u,l,d]=su(a,r),p=CE({inputs:{x:r},backend:n,attrs:{shape:[u,i]}}),h=CE({inputs:{x:a},backend:n,attrs:{shape:[It(a.shape)/l,l]}});if(n.shouldExecuteOnCPU([a,r])||"string"===a.dtype){const e=n.readSync(r.dataId),t=n.bufferSync(a),o=KE(e,t,a.dtype,u,i,l,d,a.shape,s);return n.makeTensorInfo(c,a.dtype,o.values)}const f=new xF(i,[u,l]),m=[{type:"int32",data:[i]},{type:"int32",data:d}],g=n.runWebGPUProgram(f,[h,p],h.dtype,m),y=CE({inputs:{x:g},backend:n,attrs:{shape:c}});return n.disposeData(p.dataId),n.disposeData(h.dataId),n.disposeData(g.dataId),y}};class wF{constructor(e,t){this.variableNames=["A","indices"],this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e.slice(),this.aShape=e,this.outputShape=t,this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="gather"}getUserCode(){const e=function(e){const t=["resRC.x","resRC.y","resRC.z","resRC.w"],n=[];for(let a=0;a<e.length;a++)2===a?n.push("indexZ"):n.push("".concat(t[a]));return n.join()}(this.aShape);return"\n      ".concat(xT("index")," {\n        if (index < uniforms.size) {\n          let resRC = getCoordsFromIndex(index);\n          let indexZ = i32(getIndices(resRC.x, resRC.z));\n          let inBounds = select(0.0, 1.0, indexZ >= 0 && indexZ < uniforms.aShape[2]);\n          setOutputAtIndex(index, inBounds * getA(").concat(e,"));\n        }\n      }\n    ")}}function kF(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,indices:o}=t,{axis:i,batchDims:s}=a,c=Xm(r,o,Ft(i,r.shape)[0],s),u=It(o.shape),l=[],d=CE({inputs:{x:r},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),p=CE({inputs:{x:o},backend:n,attrs:{shape:[c.batchSize,u/c.batchSize]}});l.push(d),l.push(p);const h=[c.batchSize,c.outerSize,u/c.batchSize,c.sliceSize];if(n.shouldExecuteOnCPU([r,o])){const e=n.tensorMap.get(p.dataId).values,t=oc(p.shape,p.dtype,e),a=n.tensorMap.get(d.dataId).values,r=oc(d.shape,d.dtype,a),o=qE(r,t,h);return l.forEach((e=>n.disposeData(e.dataId))),n.makeTensorInfo(c.outputShape,o.dtype,o.values)}const f=new wF(d.shape,h),m=n.runWebGPUProgram(f,[d,p],d.dtype);l.push(m);const g=CE({inputs:{x:m},backend:n,attrs:{shape:c.outputShape}});return l.forEach((e=>n.disposeData(e.dataId))),g}const SF={kernelName:xa,backendName:"webgpu",kernelFunc:kF},CF=PE({opType:BT.GREATER,cpuKernelImpl:YE,dtype:"bool"}),IF={kernelName:wa,backendName:"webgpu",kernelFunc:CF},NF=PE({opType:BT.GREATER_EQUAL,dtype:"bool",cpuKernelImpl:XE}),TF={kernelName:ka,backendName:"webgpu",kernelFunc:NF};const _F={kernelName:Ca,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:a}=t;return aF(a,!0,n)}},EF=ME({opType:g_.IS_FINITE,dtype:"bool"}),RF={kernelName:Na,backendName:"webgpu",kernelFunc:EF},AF=ME({opType:g_.IS_INF,dtype:"bool"}),OF={kernelName:Ta,backendName:"webgpu",kernelFunc:AF},FF=ME({opType:g_.IS_NAN,dtype:"bool"}),DF={kernelName:_a,backendName:"webgpu",kernelFunc:FF};const MF={kernelName:Ea,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{alpha:o}=a,i=[{type:"float32",data:[o]}],s=new DE(r.shape,g_.LEAKYRELU,"alpha : f32,");return n.runWebGPUProgram(s,[r],"float32",i)}},PF=PE({opType:BT.LESS,dtype:"bool",cpuKernelImpl:ZE}),LF={kernelName:Ra,backendName:"webgpu",kernelFunc:PF},zF=PE({opType:BT.LESS_EQUAL,dtype:"bool",cpuKernelImpl:QE}),BF={kernelName:Aa,backendName:"webgpu",kernelFunc:zF};class WF{constructor(e){this.variableNames=[],this.outputShape=[],this.uniforms="start : f32, step : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=[e],this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="linSpace"}getUserCode(){return"\n      ".concat(xT("index")," {\n        if (index < uniforms.size) {\n          setOutputAtIndex(index, uniforms.start + f32(index) * uniforms.step);\n        }\n      }\n    ")}}const UF={kernelName:Oa,backendName:"webgpu",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:a,stop:r,num:o}=n,i=(r-a)/(o-1),s=new WF(o),c=[{type:"float32",data:[a]},{type:"float32",data:[i]}];return t.runWebGPUProgram(s,[],"float32",c)}},VF=ME({opType:g_.LOG,cpuKernelImpl:$E}),GF={kernelName:Fa,backendName:"webgpu",kernelFunc:VF},HF=ME({opType:g_.LOG1P}),jF={kernelName:Da,backendName:"webgpu",kernelFunc:HF},KF=PE({opType:BT.LOGICAL_AND,dtype:"bool"}),qF={kernelName:Ma,backendName:"webgpu",kernelFunc:KF},XF=ME({opType:g_.LOGICAL_NOT}),YF={kernelName:Pa,backendName:"webgpu",kernelFunc:XF},QF=PE({opType:BT.LOGICAL_OR}),ZF={kernelName:La,backendName:"webgpu",kernelFunc:QF},$F="\n  var powValue = 0.0;\n  let basis = uniforms.bias + uniforms.alpha * sum;\n  if (uniforms.beta == 0.5) {\n    powValue = inverseSqrt(basis);\n  } else if (uniforms.beta == 1.0) {\n    powValue = 1.0 / basis;\n  } else {\n    powValue = exp(log(basis) * (-uniforms.beta));\n  }\n";class JF{constructor(e){this.outputShape=[],this.variableNames=["x"],this.uniforms="radius : i32, bias : f32, alpha : f32, beta : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e,this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="lrn"}getUserCode(){return"\n    ".concat(xT("index")," {\n      if (index < uniforms.size) {\n        let coords = getOutputCoords();\n        let b = coords[0];\n        let r = coords[1];\n        let c = coords[2];\n        let d = coords[3];\n\n        let x = getX(b, r, c, d);\n        var sum = 0.0;\n        for (var i = -uniforms.radius; i <= uniforms.radius; i = i + 1) {\n          let idx = d + i;\n          if (idx >= 0 && idx < uniforms.xShape[3]) {\n            let z = getX(b, r, c, idx);\n            sum = sum + z * z;\n          }\n        }\n        ").concat($F,"\n\n        setOutputAtIndex(index, x * powValue);\n      }\n    }\n  ")}}class eD{constructor(e,t){this.outputShape=[],this.variableNames=["x"],this.uniforms="radius : i32, bias : f32, alpha : f32, beta : f32,",this.workgroupSize=[256,1,1],this.maxAllowRadius=16,kt(t<=this.maxAllowRadius,(()=>"Radius must be less than or equal to ".concat(this.maxAllowRadius,", current radius is ").concat(t))),this.outputShape=e,this.elementsPerWorkgroup=this.workgroupSize[0]-2*this.maxAllowRadius,this.dispatchLayout={x:[3],y:[2],z:[0,1]},this.dispatch=ET(this.dispatchLayout,this.outputShape,[this.elementsPerWorkgroup,this.workgroupSize[1],this.workgroupSize[2]]),this.shaderKey="lrn_shared"}getUserCode(){return"\n    var <workgroup>lrnSub: array<f32, ".concat(this.workgroupSize[0],">;\n    const elementsPerWorkgroup = ").concat(this.elementsPerWorkgroup,";\n    const maxAllowRadius = ").concat(this.maxAllowRadius,";\n\n    ").concat(xT()," {\n      let localDepth = i32(localId.x);\n      let workgroupDepth = i32(workgroupId.x) * elementsPerWorkgroup;\n      let xDepth = workgroupDepth + localDepth - maxAllowRadius;\n      let b = i32(globalId.z) / uniforms.xShape[1];\n      let r = i32(globalId.z) - b * uniforms.xShape[1];\n      let c = i32(globalId.y);\n      let d = workgroupDepth + localDepth;\n\n      var x = 0.0;\n      if (xDepth >= 0 && xDepth < uniforms.xShape[3]) {\n        x = getX(b, r, c, xDepth);\n      }\n      lrnSub[localDepth] = x;\n      workgroupBarrier();\n\n      if (localDepth < elementsPerWorkgroup && d < uniforms.outShape[3]) {\n        var sum = 0.0;\n        let index = localDepth + maxAllowRadius;\n        for (var i = -uniforms.radius; i <= uniforms.radius; i = i + 1) {\n          let z = lrnSub[index + i];\n          sum = sum + z * z;\n        }\n        ").concat($F,"\n\n        setOutputAtCoords(b, r, c, d, lrnSub[index] * powValue);\n      }\n    } ")}}const tD={kernelName:za,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{depthRadius:o,bias:i,alpha:s,beta:c}=a;let u;u=o>16?new JF(r.shape):new eD(r.shape,o);const l=[{type:"int32",data:[o]},{type:"float32",data:[i]},{type:"float32",data:[s]},{type:"float32",data:[c]}];return n.runWebGPUProgram(u,[r],r.dtype,l)}};class nD{constructor(e){this.outputShape=[],this.variableNames=["inputImage","outputImage","dy"],this.uniforms="depthRadius : i32, bias : f32, alpha : f32, beta : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e,this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="lrn_grad"}getUserCode(){return"\n    ".concat(xT("index")," {\n      if (index < uniforms.size) {\n        let coords = getOutputCoords();\n        let b = coords[0];\n        let r = coords[1];\n        let c = coords[2];\n\n        let MIN_DEPTH_BEGIN = 0;\n        let MAX_DEPTH_END = uniforms.outShape[3];\n        var result = 0.0;\n        for (var d = MIN_DEPTH_BEGIN; d < MAX_DEPTH_END; d++) {\n          let depthBegin = max(MIN_DEPTH_BEGIN, d - uniforms.depthRadius);\n          let depthEnd = min(MAX_DEPTH_END, d + uniforms.depthRadius + 1);\n\n          var norm = 0.0;\n          for (var k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; k++) {\n            if (k < depthBegin) {\n              continue;\n            } else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            } else {\n              break;\n            }\n          }\n\n          norm = uniforms.alpha * norm + uniforms.bias;\n\n          for (var k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; k++) {\n            if (k < depthBegin) {\n              continue;\n            } else if (k >= depthBegin && k < depthEnd) {\n              var dyi = -2.0 * uniforms.alpha * uniforms.beta\n                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d) / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * uniforms.beta);\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            } else {\n              break;\n            }\n          }\n        }\n\n        setOutputAtIndex(index, result);\n      }\n    }\n  ")}}const aD={kernelName:Ba,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,y:o,dy:i}=t,{depthRadius:s,bias:c,alpha:u,beta:l}=a,d=new nD(r.shape),p=[{type:"int32",data:[s]},{type:"float32",data:[c]},{type:"float32",data:[u]},{type:"float32",data:[l]}];return n.runWebGPUProgram(d,[r,o,i],r.dtype,p)}},rD=PE({opType:BT.MAX,cpuKernelImpl:eR}),oD={kernelName:Ua,backendName:"webgpu",kernelFunc:rD};const iD={kernelName:Va,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{filterSize:o,strides:i,pad:s,dimRoundingMode:c}=a;return rA(r,Gu(r.shape,o,i,1,s,c),"max",n)}};const sD={kernelName:Ha,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{filterSize:o,strides:i,pad:s,dataFormat:c,dimRoundingMode:u}=a,l=Hu(r.shape,o,i,[1,1,1],s,u,c),d=new JR(l,"max"),p=[{type:"int32",data:[l.strideDepth,l.strideHeight,l.strideWidth]},{type:"int32",data:[l.padInfo.front,l.padInfo.top,l.padInfo.left]},{type:"int32",data:[l.inDepth,l.inHeight,l.inWidth]},{type:"int32",data:[l.effectiveFilterDepth,l.effectiveFilterHeight,l.effectiveFilterWidth]}];return n.runWebGPUProgram(d,[r],r.dtype,p)}};class cD{constructor(e){this.variableNames=["dy","maxPos"],this.uniforms="strides : vec2<i32>, pads : vec2<i32>, dilations : vec2<i32>, filterDims : vec2<i32>,\n       outHeight : i32, outWidth : i32",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e.inShape,this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="maxPool2DBackprop"}getUserCode(){return"\n      ".concat(xT("index")," {\n      if (index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n        let batch = coords[0];\n        let d = coords[3];\n\n        let dyRCCorner = vec2<i32>(coords.yz) - uniforms.pads;\n        let dyRCorner = dyRCCorner.x;\n        let dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        var dotProd = 0.0;\n        let lastIndex = uniforms.filterDims[0] * uniforms.filterDims[1] - 1;\n        for (var wR = 0; wR < uniforms.filterDims[0]; wR += uniforms.dilations[0]) {\n          let dyR = f32(dyRCorner + wR) / f32(uniforms.strides[0]);\n\n          if (dyR < 0.0 || dyR >= f32(uniforms.outHeight) || fract(dyR) > 0.0) {\n            continue;\n          }\n          let idyR = i32(dyR);\n\n          for (var wC = 0; wC < uniforms.filterDims[1]; wC += uniforms.dilations[1]) {\n            let dyC = f32(dyCCorner + wC) / f32(uniforms.strides[1]);\n\n            if (dyC < 0.0 || dyC >= f32(uniforms.outWidth) || fract(dyC) > 0.0) {\n              continue;\n            }\n            let idyC = i32(dyC);\n\n            let dyValue = getDy(batch, idyR, idyC, d);\n            let maxPosValue = lastIndex - i32(getMaxPos(batch, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            let curPosValue = wR * uniforms.filterDims[1] + wC;\n            let mask = select(0.0, 1.0, maxPosValue == curPosValue);\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutputAtIndex(index, dotProd);\n      }\n    }\n    ")}}class uD{constructor(e){this.variableNames=["dy","maxPos"],this.uniforms="strides : vec3<i32>, pads : vec3<i32>, filterDims : vec3<i32>,\n      outDepth : i32, outHeight : i32, outWidth : i32",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e.inShape,this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="maxPool3DBackprop"}getUserCode(){return"\n      ".concat(xT("index")," {\n      if (index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n        let batch = coords.x;\n        let ch = coords.u;\n\n        let dyCorner = vec3<i32>(coords.y, coords.z, coords.w) - uniforms.pads;\n        let dyDCorner = dyCorner.x;\n        let dyRCorner = dyCorner.y;\n        let dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        var dotProd = 0.0;\n        let lastIndex = uniforms.filterDims[0] * uniforms.filterDims[1] * uniforms.filterDims[2] - 1;\n\n        for (var wD = 0; wD < uniforms.filterDims[0]; wD++) {\n          let dyD = f32(dyDCorner + wD) / f32(uniforms.strides[0]);\n\n          if (dyD < 0.0 || dyD >= f32(uniforms.outDepth) || fract(dyD) > 0.0) {\n            continue;\n          }\n          let idyD = i32(dyD);\n\n          for (var wR = 0; wR < uniforms.filterDims[1]; wR++) {\n            let dyR = f32(dyRCorner + wR) / f32(uniforms.strides[1]);\n\n            if (dyR < 0.0 || dyR >= f32(uniforms.outHeight) || fract(dyR) > 0.0) {\n              continue;\n            }\n            let idyR = i32(dyR);\n\n            for (var wC = 0; wC < uniforms.filterDims[2]; wC++) {\n              let dyC = f32(dyCCorner + wC) / f32(uniforms.strides[2]);\n\n              if (dyC < 0.0 || dyC >= f32(uniforms.outWidth) || fract(dyC) > 0.0) {\n                continue;\n              }\n              let idyC = i32(dyC);\n\n              let dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              let maxPosValue = lastIndex - i32(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              let curPosValue = wD * uniforms.filterDims[1] * uniforms.filterDims[2] + wR * uniforms.filterDims[2] + wC;\n              let mask = select(0.0, 1.0, maxPosValue == curPosValue);\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n\n        setOutputAtIndex(index, dotProd);\n      }\n    }\n    ")}}const lD={kernelName:ja,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:r,input:o}=t,i=o,{filterSize:s,strides:c,pad:u,dimRoundingMode:l}=a,d=Hu(i.shape,s,c,[1,1,1],u,l),p=new JR(d,"max",!0);let h=[{type:"int32",data:[d.strideDepth,d.strideHeight,d.strideWidth]},{type:"int32",data:[d.padInfo.front,d.padInfo.top,d.padInfo.left]},{type:"int32",data:[d.inDepth,d.inHeight,d.inWidth]},{type:"int32",data:[d.effectiveFilterDepth,d.effectiveFilterHeight,d.effectiveFilterWidth]}];const f=n.runWebGPUProgram(p,[i],"int32",h),m=new uD(d);h=[{type:"int32",data:[d.strideDepth,d.strideHeight,d.strideWidth]},{type:"int32",data:[d.effectiveFilterDepth-1-d.padInfo.front,d.effectiveFilterHeight-1-d.padInfo.top,d.effectiveFilterWidth-1-d.padInfo.left]},{type:"int32",data:[d.effectiveFilterDepth,d.effectiveFilterHeight,d.effectiveFilterWidth]},{type:"int32",data:[d.outDepth]},{type:"int32",data:[d.outHeight]},{type:"int32",data:[d.outWidth]}];const g=n.runWebGPUProgram(m,[r,f],i.dtype,h);return n.disposeData(f.dataId),g}};const dD={kernelName:Ga,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:r,input:o,output:i}=t,s=o;MT([o,i],"maxPoolGrad");const{filterSize:c,strides:u,pad:l,dimRoundingMode:d}=a,p=Gu(s.shape,c,u,1,l,d),h=new $R(p,"max",!0);let f=[{type:"int32",data:[p.strideHeight,p.strideWidth]},{type:"int32",data:[p.padInfo.top,p.padInfo.left]},{type:"int32",data:[p.dilationHeight,p.dilationWidth]},{type:"int32",data:[p.inHeight,p.inWidth]},{type:"int32",data:[p.effectiveFilterHeight,p.effectiveFilterWidth]}];const m=n.runWebGPUProgram(h,[s],"int32",f),g=new cD(p);f=[{type:"int32",data:[p.strideHeight,p.strideWidth]},{type:"int32",data:[p.effectiveFilterHeight-1-p.padInfo.top,p.effectiveFilterWidth-1-p.padInfo.left]},{type:"int32",data:[p.dilationHeight,p.dilationWidth]},{type:"int32",data:[p.effectiveFilterHeight,p.effectiveFilterWidth]},{type:"int32",data:[p.outHeight]},{type:"int32",data:[p.outWidth]}];const y=n.runWebGPUProgram(g,[r,m],s.dtype,f);return n.disposeData(m.dataId),y}};const pD={kernelName:Ka,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{filterSize:r,strides:o,pad:i,includeBatchInIndex:s}=a,{x:c}=t;kt(4===c.shape.length,(()=>"Error in maxPool: input must be rank 4 but got rank ".concat(c.shape.length,".")));const u=[1,1];kt(Ju(o,u),(()=>"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(u,"'")));const l=Gu(c.shape,r,o,u,i),d=[{type:"int32",data:[l.strideHeight,l.strideWidth]},{type:"int32",data:[l.padInfo.top,l.padInfo.left]},{type:"int32",data:[l.dilationHeight,l.dilationWidth]},{type:"int32",data:[l.inHeight,l.inWidth]},{type:"int32",data:[l.effectiveFilterHeight,l.effectiveFilterWidth]}];let p=new $R(l,"max",!1);const h=n.runWebGPUProgram(p,[c],c.dtype,d);return p=new $R(l,"max",!0,!0,s),[h,n.runWebGPUProgram(p,[c],"int32",d)]}};const hD={kernelName:Xa,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:o,keepDims:i}=a;return MR(r,o,i,"min",n)}},fD=PE({opType:BT.MIN,cpuKernelImpl:tR}),mD={kernelName:Ya,backendName:"webgpu",kernelFunc:fD};class gD{constructor(e,t,n){this.uniforms="",this.variableNames=["x"],this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1])),this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize),this.xShape=e,t.map(((e,t)=>{this.uniforms+=" pad".concat(t," : vec2<i32>,")})),this.offset="reflect"===n?0:1,this.shaderKey="mirrorPad_".concat(n)}getUserCode(){const e=this.xShape.length,t=this.xShape.map(((e,t)=>"uniforms.pad".concat(t,"[0]"))).join(","),n=this.xShape.map(((t,n)=>"uniforms.pad".concat(n,"[0] + uniforms.xShape").concat(e>1?"[".concat(n,"]"):""))).join(","),a=1===e?"start":"start[i]",r=1===e?"end":"end[i]",o=1===e?"outC":"outC[i]",i=yT(e),s=e>1?["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,e):"coords";return"\n      ".concat(xT("index")," {\n        if (index < uniforms.size) {\n          let start = ").concat(i,"(").concat(t,");\n          let end = ").concat(i,"(").concat(n,");\n          var outC = getCoordsFromIndex(index);\n          for (var i = 0; i < ").concat(e,"; i = i + 1) {\n            if (").concat(o," < ").concat(a,") {\n              ").concat(o," = ").concat(a," * 2 - ").concat(o," - ").concat(this.offset,";\n            } else if(").concat(o," >= ").concat(r,") {\n              ").concat(o," = (").concat(r," - 1) * 2 - ").concat(o," + ").concat(this.offset,";\n            }\n          }\n          let coords = outC - start;\n          setOutputAtIndex(index, getX(").concat(s,"));\n        }\n      }\n    ")}}const yD={kernelName:Qa,backendName:"webgpu",kernelFunc:e=>{let{inputs:t,attrs:n,backend:a}=e;const{x:r}=t,{paddings:o,mode:i}=n,s=a,c=o.map((e=>({type:"int32",data:[e[0],e[1]]}))),u=new gD(r.shape,o,i);return s.runWebGPUProgram(u,[r],r.dtype,c)}},bD=PE({opType:BT.MOD}),xD={kernelName:Za,backendName:"webgpu",kernelFunc:bD};class vD{constructor(e,t){this.variableNames=["probs"],this.outputShape=[],this.uniforms="seed : f32, numOutcomes: i32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=[e,t],this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="multinomial"}getUserCode(){return"\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    fn random (seed : f32, resultUV : vec2<f32>) -> f32 {\n      let HASHSCALE1 = 443.8975;\n      let p = resultUV * seed;\n      var p3  = fract(vec3<f32>(p.xyx) * HASHSCALE1);\n      p3 = p3 + dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ".concat(xT("index")," {\n      if (index < uniforms.size) {\n        let coords = getOutputCoords();\n        let batch = coords[0];\n\n        let resUV = vec2<f32>(f32(coords[1]) / f32(uniforms.outShape[1]),\n            f32(coords[0]) / f32(uniforms.outShape[0]));\n        let r = random(uniforms.seed, resUV);\n        var cdf = 0.0;\n        for (var i = 0; i < uniforms.numOutcomes - 1; i = i + 1) {\n          cdf = cdf + getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutputAtIndexI32(index, i);\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutputAtIndexI32(index, uniforms.numOutcomes - 1);\n      }\n    }\n  ")}}class wD{constructor(e){this.variableNames=["logits"],this.outputShape=e,this.dispatchLayout=OT(this.outputShape),this.dispatch=[this.outputShape[0],1,1],this.outputShape[1]>=4096?this.workgroupSize=[256,1,1]:this.workgroupSize=[64,1,1],this.shaderKey="softmax"}getUserCode(){return"\n    var<workgroup> buf : array<f32, ".concat(this.workgroupSize[0],">;\n    var<workgroup> rowMaxShared : f32;\n    var<workgroup> rowSumShared : f32;\n    const blockSize = ").concat(this.workgroupSize[0],";\n    ").concat(xT("index")," {\n      let row = index / blockSize;\n      let tid = i32(localId.x);\n      let cols = uniforms.outShape[1];\n\n      var threadMax = -3.402823e+38f;\n      for (var col = tid; col < cols; col += blockSize) {\n        let value = getLogits(row, col);\n        threadMax = max(threadMax, value);\n      }\n      if (tid < cols) {\n        buf[tid] = threadMax;\n      }\n      workgroupBarrier();\n\n      var reduceSize = min(cols, blockSize);\n      for (var currSize = reduceSize >> 1;  currSize > 0; currSize = reduceSize >> 1) {\n        reduceSize = currSize + (reduceSize & 1);\n        if (tid < currSize) {\n          buf[tid] = max(buf[tid], buf[tid + reduceSize]);\n        }\n        workgroupBarrier();\n      }\n\n      if (tid == 0) {\n        rowMaxShared = buf[0];\n      }\n      workgroupBarrier();\n\n      var threadSum = 0.0;\n      for (var col = tid; col < cols; col += blockSize) {\n        let subExp = exp(getLogits(row, col) - rowMaxShared);\n        threadSum += subExp;\n      }\n      buf[tid] = threadSum;\n      workgroupBarrier();\n\n      for (var currSize = blockSize >> 1;  currSize > 0; currSize = currSize >> 1) {\n        if (tid < currSize) {\n          buf[tid] = buf[tid] + buf[tid + currSize];\n        }\n        workgroupBarrier();\n      }\n\n      if (tid == 0) {\n        rowSumShared = buf[0];\n      }\n      workgroupBarrier();\n\n      for (var col = tid; col < cols; col += blockSize) {\n        let value = exp(getLogits(row, col) - rowMaxShared) / rowSumShared;\n        setOutputAtCoords(row, col, value);\n      }\n  }\n    ")}}function kD(e){const{inputs:t,backend:n,attrs:a}=e,{logits:r}=t,{dim:o}=a,i=CE({inputs:{x:r},backend:n,attrs:{shape:[It(r.shape)/r.shape[o],r.shape[o]]}}),s=new wD(i.shape),c=n.runWebGPUProgram(s,[i],r.dtype),u=CE({inputs:{x:c},backend:n,attrs:{shape:r.shape}});return n.disposeData(i.dataId),n.disposeData(c.dataId),u}const SD={kernelName:Gr,backendName:"webgpu",kernelFunc:kD};const CD={kernelName:$a,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{logits:r}=t,{numSamples:o,seed:i,normalized:s}=a,c=s?r:kD({inputs:{logits:r},backend:n,attrs:{dim:r.shape.length-1}}),u=c.shape[0],l=c.shape[1],d=new vD(u,o),p=[{type:"float32",data:[i]},{type:"int32",data:[l]}],h=n.runWebGPUProgram(d,[c],"int32",p);return s||n.disposeData(c.dataId),h}};const ID={kernelName:er,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:a}=t;if(n.shouldExecuteOnCPU([a])){const e=n.tensorMap.get(a.dataId),[t,r]=aR(e.values,a.shape,a.dtype);return n.makeTensorInfo(r,a.dtype,t)}const r=new DE(a.shape,g_.NEG);return n.runWebGPUProgram(r,[a],a.dtype)}};const ND={kernelName:nr,backendName:"webgpu",kernelFunc:function(e){console.warn("tf.nonMaxSuppression() in webgpu locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:a}=e,{boxes:r,scores:o}=t,{maxOutputSize:i,iouThreshold:s,scoreThreshold:c}=a,u=n.readSync(r.dataId),l=n.readSync(o.dataId),{selectedIndices:d}=nf(u,l,i,s,c);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}};const TD={kernelName:rr,backendName:"webgpu",kernelFunc:function(e){console.warn("tf.nonMaxSuppression() in webgpu locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:a}=e,{boxes:r,scores:o}=t,{maxOutputSize:i,iouThreshold:s,scoreThreshold:c,softNmsSigma:u}=a,l=n.readSync(r.dataId),d=n.readSync(o.dataId),p=i,h=s,f=c,m=u,{selectedIndices:g,selectedScores:y}=rf(l,d,p,h,f,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([y.length],"float32",new Float32Array(y))]}};class _D{constructor(e,t){this.variableNames=["x"],this.uniforms="onValue : f32, offValue : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=[e,t],this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="onehot"}getUserCode(){return"\n      ".concat(xT("index")," {\n        if(index < uniforms.size) {\n          let coords = getCoordsFromIndex(index);\n          setOutputAtIndex(index, mix(uniforms.offValue, uniforms.onValue,\n                                      f32(i32(round(getX(coords.x))) == coords.y)));\n        }\n      }\n    ")}}const ED={kernelName:ir,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{indices:r}=t,{dtype:o,depth:i,onValue:s,offValue:c}=a,u=It(r.shape),l=new _D(u,i),d=CE({inputs:{x:r},backend:n,attrs:{shape:[u]}}),p=[{type:"float32",data:[s]},{type:"float32",data:[c]}],h=n.runWebGPUProgram(l,[d],o,p);n.disposeData(d.dataId);const f=CE({inputs:{x:h},backend:n,attrs:{shape:[...r.shape,i]}});return n.disposeData(h.dataId),f}};function RD(e){const{inputs:t,backend:n}=e,{x:a}=t;if("complex64"===a.dtype){const e=CA({inputs:{input:a},backend:n}),t=RD({inputs:{x:e},backend:n}),r=PA({inputs:{input:a},backend:n}),o=RD({inputs:{x:r},backend:n}),i=OE({inputs:{real:t,imag:o},backend:n});return n.disposeData(e.dataId),n.disposeData(t.dataId),n.disposeData(r.dataId),n.disposeData(o.dataId),i}return kE({attrs:{shape:a.shape,dtype:a.dtype,value:"string"===a.dtype?"":0},backend:n})}const AD={kernelName:ho,backendName:"webgpu",kernelFunc:RD};const OD={kernelName:or,backendName:"webgpu",kernelFunc:function e(t){const{inputs:n,backend:a}=t,{x:r}=n;if("string"===r.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===r.dtype){const t=CA({inputs:{input:r},backend:a}),n=e({inputs:{x:t},backend:a}),o=PA({inputs:{input:r},backend:a}),i=RD({inputs:{x:o},backend:a}),s=OE({inputs:{real:n,imag:i},backend:a});return a.disposeData(t.dataId),a.disposeData(n.dataId),a.disposeData(o.dataId),a.disposeData(i.dataId),s}return kE({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:a})}};const FD={kernelName:sr,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{axis:r}=a;if(1===t.length)return $O({inputs:{input:t[0]},backend:n,attrs:{dim:r}});const o=t[0].shape,i=t[0].dtype;t.forEach((e=>{St(o,e.shape,"All tensors passed to stack must have matching shapes"),kt(i===e.dtype,(()=>"All tensors passed to stack must have matching dtypes"))}));const s=[],c=BA({inputs:t.map((e=>{const t=$O({inputs:{input:e},backend:n,attrs:{dim:r}});return s.push(t),t})),backend:n,attrs:{axis:r}});return s.forEach((e=>n.disposeData(e.dataId))),c}};function DD(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e.length,a=yT(n),r=e.map(((e,t)=>"uniforms.pad".concat(t,"[0]"))).join(","),o=e.map(((e,t)=>"uniforms.pad".concat(t,"[0] + uniforms.xShape").concat(n>1?"[".concat(t,"]"):""))).join(","),i=n>1?"".concat(a,"(").concat(r,")"):"".concat(r),s=n>1?"".concat(a,"(").concat(o,")"):"".concat(o),c=n>1?"any(paddedCoords < start)":"paddedCoords < start",u=n>1?"any(paddedCoords >= end)":"paddedCoords >= end",l=n>1?["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,n):"coords";return"\n        let start = ".concat(i,";\n        let end = ").concat(s,";\n        if (").concat(c," || ").concat(u,") {\n          setOutputAtIndex(index, ").concat(t?0:"uniforms.constantValue",");\n        } else {\n          let coords = paddedCoords - start;\n          setOutputAtIndex(index, getX(").concat(l,"));\n        }\n  ")}class MD{constructor(e,t){this.variableNames=["x"],this.uniforms="constantValue : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1])),this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize),t.map(((e,t)=>{this.uniforms+=" pad".concat(t," : vec2<i32>,")})),this.xShape=e,this.shaderKey="pad"}getUserCode(){return"\n      ".concat(xT("index")," {\n        if (index < uniforms.size) {\n          let paddedCoords = getCoordsFromIndex(index);\n          ").concat(DD(this.xShape),"\n        }\n      }\n    ")}}const PD={kernelName:cr,backendName:"webgpu",kernelFunc:e=>{const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{paddings:o,constantValue:i}=a;if(o.every((e=>Tt(e,[0,0]))))return RE({inputs:{x:r},backend:n});if(0===It(r.shape)){return kE({backend:n,attrs:{shape:o.map(((e,t)=>e[0]+r.shape[t]+e[1])),value:i,dtype:r.dtype}})}const s=[{type:"float32",data:[i]}];o.map((e=>s.push({type:"int32",data:[e[0],e[1]]})));const c=new MD(r.shape,o);return n.runWebGPUProgram(c,[r],r.dtype,s)}},LD=PE({opType:BT.POW}),zD={kernelName:ur,backendName:"webgpu",kernelFunc:LD};const BD={kernelName:lr,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:a,alpha:r}=t,o=new EE(BT.PRELU,a.shape,r.shape);return n.runWebGPUProgram(o,[a,r],"float32")}};const WD={kernelName:dr,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:o,keepDims:i}=a;return MR(r,o,i,"prod",n)}},UD={kernelName:mr,backendName:"webgpu",kernelFunc:e=>{const{backend:t,attrs:n}=e,{start:a,stop:r,step:o,dtype:i}=n,s=iR(a,r,o,i);return t.makeTensorInfo([s.length],i,s)}},VD=PE({opType:BT.DIV}),GD={kernelName:ra,backendName:"webgpu",kernelFunc:VD},HD=ME({opType:g_.RECIPROCAL}),jD={kernelName:yr,backendName:"webgpu",kernelFunc:HD},KD=ME({opType:g_.RELU}),qD={kernelName:br,backendName:"webgpu",kernelFunc:KD},XD=ME({opType:g_.RELU6}),YD={kernelName:Cr,backendName:"webgpu",kernelFunc:XD};class QD{constructor(e,t,n){this.variableNames=["x"],this.uniforms="adjustHeightWidth : vec2<f32>, halfPixelCenters : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=[e[0],t,n,e[3]],this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="resizeBilinear"}getUserCode(){return"\n      ".concat(xT("index")," {\n        if (index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n          let b = coords[0];\n          let d = coords[3];\n          let rc = coords.yz;\n\n          let effectiveInSize = vec2<f32>(\n            f32(uniforms.xShape.y) - uniforms.adjustHeightWidth[0],\n            f32(uniforms.xShape.z) - uniforms.adjustHeightWidth[1]);\n\n          let effectiveOutSize = vec2<f32>(\n            f32(uniforms.outShape.y) - uniforms.adjustHeightWidth[0],\n            f32(uniforms.outShape.z) - uniforms.adjustHeightWidth[1]);\n\n          let effectiveInputOverOutputRatioRC =\n              effectiveInSize / effectiveOutSize;\n\n          // Fractional source index\n          let sourceFracIndexRC =\n            (vec2<f32>(rc) + vec2<f32>(uniforms.halfPixelCenters)) *\n            effectiveInputOverOutputRatioRC - vec2<f32>(uniforms.halfPixelCenters);\n\n          // Compute the four integer indices.\n          let sourceFloorRC = vec2<i32>(sourceFracIndexRC);\n          let sourceCeilRC = vec2<i32>(\n            min(vec2<f32>(uniforms.xShape.yz) - vec2<f32>(1.0), ceil(sourceFracIndexRC)));\n\n          let topLeft = getX(b, sourceFloorRC.x, sourceFloorRC.y, d);\n          let bottomLeft = getX(b, sourceCeilRC.x, sourceFloorRC.y, d);\n          let topRight = getX(b, sourceFloorRC.x, sourceCeilRC.y, d);\n          let bottomRight = getX(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n          let fracRC = sourceFracIndexRC - vec2<f32>(sourceFloorRC);\n\n          let top = topLeft + (topRight - topLeft) * fracRC.y;\n          let bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n          let newValue = top + (bottom - top) * fracRC.x;\n\n          setOutputAtIndex(index, newValue);\n        }\n      }\n    ")}}const ZD={kernelName:kr,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{images:r}=t,{alignCorners:o,size:i,halfPixelCenters:s}=a,[c,u]=i,l=[{type:"float32",data:[o&&c>1?1:0,o&&u>1?1:0]},{type:"float32",data:[s?.5:0]}],d=new QD(r.shape,c,u);return n.runWebGPUProgram(d,[r],"float32",l)}};class $D{constructor(e,t){this.variableNames=["dy"],this.uniforms="effectiveXSize : vec2<i32>, effectiveYSize : vec2<i32>, heightScale : f32, widthScale : f32,\n       invHeightScale : f32, invWidthScale : f32, winHeight : i32, winWidth : i32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e,this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize),this.alignCorners=t,this.shaderKey="resizeBilinearBackprop_".concat(t)}getUserCode(){return"\n      ".concat(xT("index")," {\n        if (index < uniforms.size) {\n          let coords = getOutputCoords();\n          let b = coords[0];\n          let d = coords[3];\n          let r = coords[1];\n          let c = coords[2];\n\n          var accumulator = 0.0;\n\n          // Compute bounds for where in dy we will look\n          let startRLerp = floor(f32(r) * uniforms.invHeightScale);\n          let startDyR = i32(startRLerp - f32(uniforms.winHeight / 2));\n\n          let startCLerp = floor(f32(c) * uniforms.invWidthScale);\n          let startDyC = i32(startCLerp - f32(uniforms.winWidth / 2));\n\n          // Loop over dy\n          for (var dyROffset = 0; dyROffset < uniforms.winHeight; dyROffset++) {\n            let dyR = startDyR + dyROffset;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyR < 0 || dyR >= uniforms.dyShape[1]) {\n              continue;\n            }\n\n            for (var dyCOffset = 0; dyCOffset < uniforms.winWidth; dyCOffset++) {\n              let dyC = startDyC + dyCOffset;\n\n              // Guard against the window exceeding the bounds of dy\n              if (dyC < 0 || dyC >= uniforms.dyShape[2]) {\n                continue;\n              }\n\n              let dxR = f32(dyR) * uniforms.heightScale;\n              let topDxRIndex = i32(floor(dxR));\n              let bottomDxRIndex = i32(min(ceil(dxR), f32(uniforms.outShape[1] - 1)));\n              let dxRLerp = dxR - f32(topDxRIndex);\n              let inverseDxRLerp = 1.0 - dxRLerp;\n\n              let dxC = f32(dyC) * uniforms.widthScale;\n              let leftDxCIndex = i32(floor(dxC));\n              let rightDxCIndex = i32(min(ceil(dxC), f32(uniforms.outShape[2] - 1)));\n              let dxCLerp = dxC - f32(leftDxCIndex);\n              let inverseDxCLerp = 1.0 - dxCLerp;\n\n              if (r == topDxRIndex && c == leftDxCIndex) {\n                // topLeft\n                accumulator +=\n                  getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n              }\n\n              if (r == topDxRIndex && c == rightDxCIndex) {\n                // topRight\n                accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n              }\n\n              if (r == bottomDxRIndex && c == leftDxCIndex) {\n                // bottomLeft\n                accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n              }\n\n              if (r == bottomDxRIndex && c == rightDxCIndex) {\n                // bottomRight\n                accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n              }\n            }\n          }\n          // End loop over dy\n\n          setOutputAtIndex(index, accumulator);\n        }\n      }\n    ")}}const JD={kernelName:Sr,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{images:r,dy:o}=t,{alignCorners:i}=a,[,s,c]=r.shape,[,u,l]=o.shape,d=[i&&u>1?s-1:s,i&&l>1?c-1:c],p=[i&&u>1?u-1:u,i&&l>1?l-1:l],h=d[0]/p[0],f=d[1]/p[1],m=1/h,g=1/f,y=2*Math.ceil(m)+2,b=2*Math.ceil(g)+2,x=new $D(r.shape,i),v=[{type:"int32",data:d},{type:"int32",data:p},{type:"float32",data:[h]},{type:"float32",data:[f]},{type:"float32",data:[m]},{type:"float32",data:[g]},{type:"int32",data:[y]},{type:"int32",data:[b]}];return n.runWebGPUProgram(x,[o],o.dtype,v)}};class eM{constructor(e,t,n,a){this.variableNames=["x"],this.uniforms="adjustHeightWidth : vec2<f32>, roundBase : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=[e[0],t,n,e[3]],this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize),this.halfPixelCenters=a,this.shaderKey="resizeNearest_".concat(a)}getUserCode(){let e;e=this.halfPixelCenters?"max((vec2<f32>(rc) + vec2<f32>(0.5)) * effectiveInputOverOutputRatioRC, vec2<f32>(0.0))":"vec2<f32>(rc) * effectiveInputOverOutputRatioRC";return"\n      ".concat(xT("index")," {\n        if (index < uniforms.size) {\n          let coords = getCoordsFromIndex(index);\n          let b = coords[0];\n          let d = coords[3];\n          let rc = coords.yz;\n\n          let effectiveInSize = vec2<f32>(\n            f32(uniforms.xShape.y) - uniforms.adjustHeightWidth[0],\n            f32(uniforms.xShape.z) - uniforms.adjustHeightWidth[1]);\n\n          let effectiveOutSize = vec2<f32>(\n            f32(uniforms.outShape.y) - uniforms.adjustHeightWidth[0],\n            f32(uniforms.outShape.z) - uniforms.adjustHeightWidth[1]);\n\n          let effectiveInputOverOutputRatioRC =\n              effectiveInSize / effectiveOutSize;\n\n          // Fractional source index\n          let sourceFracIndexRC = ").concat(e,";\n\n          // Compute the coordinators of nearest neighbor point.\n          let inputShapeRC = vec2<f32>(f32(uniforms.xShape.y), f32(uniforms.xShape.z));\n          let sourceNearestRC = vec2<i32>(\n            min(inputShapeRC - 1.0, floor(sourceFracIndexRC + uniforms.roundBase)));\n          let newValue = getX(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n          setOutputAtIndex(index, newValue);\n        }\n      }\n    ")}}const tM={kernelName:vr,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{images:r}=t,{alignCorners:o,halfPixelCenters:i,size:s}=a,[c,u]=s,l=[{type:"float32",data:[o&&c>1?1:0,o&&u>1?1:0]},{type:"float32",data:[o?.5:0]}],d=new eM(r.shape,c,u,i);return n.runWebGPUProgram(d,[r],r.dtype,l)}};class nM{constructor(e,t){this.variableNames=["dy"],this.uniforms="effectiveXSize : vec2<i32>, effectiveYSize : vec2<i32>, invHeightScale : f32, invWidthScale : f32,\n       winHeight : i32, winWidth : i32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e,this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize),this.alignCorners=t,this.shaderKey="resizeNearestNeigborBackprop_".concat(t)}getUserCode(){return"\n      ".concat(xT("index")," {\n        if (index < uniforms.size) {\n          let coords = getOutputCoords();\n          let b = coords[0];\n          let d = coords[3];\n          let r = coords[1];\n          let c = coords[2];\n\n          var accumulator = 0.0;\n\n          // Compute bounds for where in dy we will look\n          let startRLerp = floor(f32(r) * uniforms.invHeightScale);\n          let startDyR = i32(floor(startRLerp - f32(uniforms.winHeight / 2)));\n\n          let startCLerp = floor(f32(c) * uniforms.invWidthScale);\n          let startDyC = i32(floor(startCLerp - f32(uniforms.winWidth / 2)));\n\n          // Loop over dy\n          for (var dyROffset = 0; dyROffset < uniforms.winHeight; dyROffset++) {\n            let dyR = startDyR + dyROffset;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyR < 0 || dyR >= uniforms.dyShape[1]) {\n              continue;\n            }\n\n            for (var dyCOffset = 0; dyCOffset < uniforms.winWidth; dyCOffset++) {\n              let dyC = startDyC + dyCOffset;\n\n              // Guard against the window exceeding the bounds of dy\n              if (dyC < 0 || dyC >= uniforms.dyShape[2]) {\n                continue;\n              }\n\n              let sourceFracRow = f32(uniforms.effectiveXSize[0]) *\n                  (f32(dyR) / f32(uniforms.effectiveYSize[0]));\n\n              let sourceFracCol = f32(uniforms.effectiveXSize[1]) *\n                  (f32(dyC) / f32(uniforms.effectiveYSize[1]));\n\n              let sourceNearestRow =\n                  i32(min(f32(uniforms.outShape[1] - 1),\n                  ").concat(this.alignCorners?"floor(sourceFracRow + 0.5)":"floor(sourceFracRow)","));\n\n              let sourceNearestCol =\n                  i32(min(f32(uniforms.outShape[2] - 1),\n                  ").concat(this.alignCorners?"floor(sourceFracCol + 0.5)":"floor(sourceFracCol)","));\n\n              if (r == sourceNearestRow && c == sourceNearestCol) {\n                accumulator += getDy(b, dyR, dyC, d);\n              }\n            }\n          }\n          // End loop over dy\n\n          setOutputAtIndex(index, accumulator);\n        }\n      }\n    ")}}const aM={kernelName:wr,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{images:r,dy:o}=t,{alignCorners:i}=a,[,s,c]=r.shape,[,u,l]=o.shape,d=[i&&u>1?s-1:s,i&&l>1?c-1:c],p=[i&&u>1?u-1:u,i&&l>1?l-1:l],h=1/(d[0]/p[0]),f=1/(d[1]/p[1]),m=2*Math.ceil(h)+2,g=2*Math.ceil(f)+2,y=new nM(r.shape,i),b=[{type:"int32",data:d},{type:"int32",data:p},{type:"float32",data:[h]},{type:"float32",data:[f]},{type:"int32",data:[m]},{type:"int32",data:[g]}];return n.runWebGPUProgram(y,[o],o.dtype,b)}};class rM{constructor(e){this.variableNames=["x"],this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e,this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize),this.uniforms=" axis : vec4<i32>,",this.shaderKey="reverse"}getUserCode(){return"\n      ".concat("\n      // Using uniform variables as judging conditions, so the function has\n      // coherent execution within all threads.\n      fn getReverseCoords(coords : vec4<i32>) -> vec4<i32> {\n        var reverseCoords = coords;\n        if (uniforms.axis[0] == 1) {\n          reverseCoords[0] = uniforms.xShape[0] - coords[0] - 1;\n        }\n        if (uniforms.axis[1] == 1) {\n          reverseCoords[1] = uniforms.xShape[1] - coords[1] - 1;\n        }\n        if (uniforms.axis[2] == 1) {\n          reverseCoords[2] = uniforms.xShape[2] - coords[2] - 1;\n        }\n        if (uniforms.axis[3] == 1) {\n          reverseCoords[3] = uniforms.xShape[3] - coords[3] - 1;\n        }\n\n        return reverseCoords;\n      }\n    ","\n      ").concat(xT("index")," {\n        if (index < uniforms.size) {\n          let coords = getCoordsFromIndex(index);\n          let reverseCoords = getReverseCoords(coords);\n          setOutputAtIndex(index, getX(reverseCoords[0],\n              reverseCoords[1], reverseCoords[2], reverseCoords[3]));\n        }\n      }\n    ")}}const oM={kernelName:Ir,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{dims:o}=a,i=r.shape.length;if(0===i)return RE({inputs:{x:r},backend:n});const s=r.shape,c=[1,1,1,1];s.forEach(((e,t)=>{c[t+4-i]=e}));const u=Ft(o,r.shape),l=[0,0,0,0];u.forEach((e=>{l[e+4-i]=1}));const d=[{type:"int32",data:l}],p=CE({inputs:{x:r},backend:n,attrs:{shape:c}}),h=new rM(c),f=n.runWebGPUProgram(h,[p],p.dtype,d);n.disposeData(p.dataId);const m=CE({inputs:{x:f},backend:n,attrs:{shape:s}});return n.disposeData(f.dataId),m}};class iM{constructor(e,t){this.outputShape=[],this.variableNames=["x"],this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e,this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize),this.uniforms="centerX : f32, centerY : f32, sinRadians : f32,\n          cosRadians : f32,",this.shaderKey="rotate",this.outputShape=e,"number"===typeof t?(this.uniforms+=" fillValue : f32,",this.fillSnippet="var outputValue = uniforms.fillValue;",this.shaderKey+="_float"):(this.uniforms+=" fillValue : vec3<f32>,",this.fillSnippet="var outputValue = uniforms.fillValue[coords[3]];",this.shaderKey+="_vec3")}getUserCode(){return"\n        ".concat(xT("index")," {\n          if (index < uniforms.size) {\n            let coords = getCoordsFromIndex(index);\n            let coordXFloat = (f32(coords[2]) - uniforms.centerX) *\n                uniforms.cosRadians - (f32(coords[1]) - uniforms.centerY) *\n                uniforms.sinRadians;\n            let coordYFloat = (f32(coords[2]) - uniforms.centerX) *\n                uniforms.sinRadians + (f32(coords[1]) - uniforms.centerY) *\n                uniforms.cosRadians;\n            let coordX = i32(round(coordXFloat + uniforms.centerX));\n            let coordY = i32(round(coordYFloat + uniforms.centerY));\n            ").concat(this.fillSnippet,"\n            if(coordX >= 0 && coordX < uniforms.xShape[2] && coordY >= 0 &&\n                coordY < uniforms.xShape[1]) {\n              outputValue = getX(coords[0], coordY, coordX, coords[3]);\n            }\n            setOutputAtIndex(index, outputValue);\n          }\n        }\n      ")}}const sM={kernelName:go,backendName:"webgpu",kernelFunc:e=>{let{inputs:t,attrs:n,backend:a}=e;const{image:r}=t,{radians:o,fillValue:i,center:s}=n,c=a,u=new iM(r.shape,i),[l,d]=tm(s,r.shape[1],r.shape[2]),p=[{type:"float32",data:[l]},{type:"float32",data:[d]},{type:"float32",data:[Math.sin(o)]},{type:"float32",data:[Math.cos(o)]}];"number"===typeof i?p.push({type:"float32",data:[Number.parseFloat(i.toFixed(2))]}):p.push({type:"float32",data:i});return c.runWebGPUProgram(u,[r],r.dtype,p)}},cM=ME({opType:g_.ROUND}),uM={kernelName:Nr,backendName:"webgpu",kernelFunc:cM},lM=ME({opType:g_.RSQRT,cpuKernelImpl:sR}),dM={kernelName:Tr,backendName:"webgpu",kernelFunc:lM};class pM{constructor(e,t,n,a,r,o,i){let s=!(arguments.length>7&&void 0!==arguments[7])||arguments[7];this.variableNames=["updates","indices"],this.workgroupSize=[64,1,1],this.atomic=!0,this.outputShape=o,this.type=i,this.sumDupeIndices=s,this.dispatchLayout=OT(e),this.dispatch=ET(this.dispatchLayout,e,this.workgroupSize),this.sliceDimGreaterThanOne=t>1,this.shaderKey="scatter_".concat(n,"_").concat(a,"_").concat(this.sliceDimGreaterThanOne,"_").concat(i,"_").concat(s,"_").concat(r.length);const c=yT(r.length);this.uniforms="sliceDim : i32, strides: ".concat(c,", updatesSize: i32,"),this.updatesRank=a,this.indicesRank=n}getUserCode(){let e="";1===this.indicesRank?e="coords[0]":2===this.indicesRank&&(e="coords[0], j");const t="getIndices(".concat(e,")"),n=this.sliceDimGreaterThanOne?"uniforms.strides[j]":"uniforms.strides";let a="",r="";1===this.dispatchLayout.x.length?(a="flattenedIndex",r="\n      fn getUpdatesCoordsFromFlatIndex(index : i32) -> i32 {\n        return index;\n      }\n      "):2===this.dispatchLayout.x.length&&(a="vec2<i32>(flattenedIndex, coords[1])",r="\n      fn getUpdatesCoordsFromFlatIndex(index : i32) -> vec2<i32> {\n        // N.B. |updates| could be a scalar tensor, conceptually representing a\n        // 2D tensor with all values equal to that. By design, its size must be\n        // the same as |outShape[1]| in one dimension, and |indicesShape[0]|\n        // gives the other.\n        let sliceSize = uniforms.outShape[1];\n        let d0 = index / sliceSize;\n        let d1 = index - d0 * sliceSize;\n        return vec2<i32>(d0, d1);\n      }\n      ");const o=Array.from({length:this.updatesRank},((e,t)=>"coords[".concat(t,"]"))),i="getUpdates(".concat(o.join(", "),")");return"\n    ".concat(r,"\n      ").concat(xT("index")," {\n        if (index < uniforms.updatesSize) {\n          let coords = getUpdatesCoordsFromFlatIndex(index);\n          var flattenedIndex = 0;\n          for (var j = 0; j < uniforms.sliceDim; j = j + 1) {\n            let indexInside = i32(round(").concat(t,"));\n            flattenedIndex = flattenedIndex + indexInside * ").concat(n,";\n          }\n          let updateValue =\n              ").concat(NT(this.type),"(").concat(i,");\n          let flatIndex = getOutputIndexFromCoords(").concat(a,");\n\n          ").concat(this.sumDupeIndices?hT("&result[flatIndex]","updateValue",this.type):"atomicStore(&result[flatIndex], bitcast<i32>(updateValue));","\n        }\n      }")}}const hM={kernelName:_r,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{indices:r,updates:o}=t,{shape:i}=a,{sliceRank:s,numUpdates:c,sliceSize:u,strides:l,outputSize:d}=lu(0,r,i),p=[d/u,u];if(0===d)return n.makeTensorInfo(i,r.dtype);const h=CE({inputs:{x:r},backend:n,attrs:{shape:[c,s]}}),f=CE({inputs:{x:o},backend:n,attrs:{shape:[c,u]}}),m=f.dtype,g=kE({backend:n,attrs:{shape:p,value:0,dtype:m}}),y=[{type:"int32",data:[s]},{type:"int32",data:l},{type:"int32",data:[It(f.shape)]}],b=new pM(f.shape,s,h.shape.length,f.shape.length,l,p,m),x=n.runWebGPUProgram(b,[f,h],m,y,g),v=CE({inputs:{x:x},backend:n,attrs:{shape:i}});return n.disposeData(h.dataId),n.disposeData(f.dataId),n.disposeData(x.dataId),v}};class fM{constructor(e,t){this.outputShape=[],this.variableNames=["sortedSequence","values"],this.uniforms="numInputs : i32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e,this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize),this.side=t,this.shaderKey="search_sorted_".concat(t)}getUserCode(){const e="left"===this.side?"<":"<=";return"\n      fn findBound(batch: i32, value: f32) -> i32 {\n        var left = i32(0);\n        var right = uniforms.numInputs;\n        while (left < right) {\n          var mid = (left + right) / 2;\n          if (getSortedSequence(batch, mid) ".concat(e," value) {\n            left = mid + 1;\n          } else {\n            right = mid;\n          }\n        }\n        return right;\n      }\n\n      ").concat(xT("index")," {\n        if (index < uniforms.size) {\n          let coords = getCoordsFromIndex(index);\n          let value = getValuesByOutputIndex(index);\n          setOutputAtIndexI32(index, findBound(coords[0], value));\n        }\n      }\n    ")}}const mM={kernelName:Rr,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{sortedSequence:r,values:o}=t,{side:i}=a,s=new fM([o.shape[0],o.shape[1]],i),c=[{type:"int32",data:[r.shape[1]]}];return n.runWebGPUProgram(s,[r,o],"int32",c)}};class gM{constructor(e,t,n){this.variableNames=["c","a","b"],this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t,this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize),this.cRank=e,this.rank=n,this.shaderKey="select"}getUserCode(){let e,t;if(this.rank>4)throw Error("Where for rank ".concat(this.rank," is not yet supported"));if(1===this.rank)t="resRC",e="resRC";else{const n=["resRC.x","resRC.y","resRC.z","resRC.w"],a=[],r=[];for(let e=0;e<this.outputShape.length;e++)r.push("".concat(n[e])),e<this.cRank&&a.push("".concat(n[e]));e=a.join(),t=r.join()}return"\n      ".concat(xT("index")," {\n        if (index < uniforms.size) {\n          let resRC = getCoordsFromIndex(index);\n          let cVal = getC(").concat(e,");\n          if (cVal >= 1.0) {\n            setOutputAtIndex(index, getA(").concat(t,"));\n          } else {\n            setOutputAtIndex(index, getB(").concat(t,"));\n          }\n        }\n      }\n    ")}}const yM={kernelName:Ar,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{condition:a,t:r,e:o}=t,i=new gM(a.shape.length,r.shape,r.shape.length);return n.runWebGPUProgram(i,[a,r,o],wi(r.dtype,o.dtype))}},bM=ME({opType:g_.SELU}),xM={kernelName:Or,backendName:"webgpu",kernelFunc:bM},vM=ME({opType:g_.SIGMOID}),wM={kernelName:Lr,backendName:"webgpu",kernelFunc:vM},kM=ME({opType:g_.SIGN}),SM={kernelName:Pr,backendName:"webgpu",kernelFunc:kM},CM=ME({opType:g_.SIN}),IM={kernelName:Dr,backendName:"webgpu",kernelFunc:CM},NM=ME({opType:g_.SINH}),TM={kernelName:Mr,backendName:"webgpu",kernelFunc:NM},_M=ME({opType:g_.SOFTPLUS}),EM={kernelName:zr,backendName:"webgpu",kernelFunc:_M};class RM{constructor(e,t,n,a,r,o){this.variableNames=["x"],this.outputShape=[],this.uniforms="",this.workgroupSize=[64,1,1],this.size=!0;const i=new Array(a.length);for(let s=0;s<i.length;s++)i[s]=a[r[s]];this.outputShape=i,this.newDim=r,this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize),this.xShape=e,this.paddedXShape=t,this.uniforms+="reshapedPaddedXShape : ".concat(yT(a.length),", paddedXShapeStrides : ").concat(yT(o),", "),n.map(((e,t)=>{this.uniforms+=" pad".concat(t," : vec2<i32>,")})),this.shaderKey="spaceToBatchND_".concat(r)}getUserCode(){const e=yT(this.outputShape.length),t=RR(this.newDim);return"\n      ".concat(ST(this.paddedXShape,"PaddedX"),"\n      ").concat(xT("index")," {\n        if(index < uniforms.size) {\n          let coords = getCoordsFromIndex(index);\n          let switchedIndex = getIndexFromCoords").concat(this.outputShape.length,"D(").concat(e,"(").concat(t,"), uniforms.reshapedPaddedXShape);\n          let paddedCoords = getPaddedXCoordsFromIndex(switchedIndex);\n          ").concat(DD(this.xShape,!0),"\n        }\n      }\n    ")}}const AM={kernelName:Ur,backendName:"webgpu",kernelFunc:e=>{const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{blockShape:o,paddings:i}=a;kt(r.shape.length<=4,(()=>"spaceToBatchND for rank > 4 with a WebGPU backend not implemented yet"));const s=o.reduce(((e,t)=>e*t)),c=[[0,0]];c.push(...i);for(let b=1+o.length;b<r.shape.length;++b)c.push([0,0]);const u=c.map(((e,t)=>e[0]+r.shape[t]+e[1])),l=nm(u,o,s,!1),d=am(l.length,o.length,!1),p=rm(u,o,s,!1),h=Gt(u),f=new RM(r.shape,u,c,l,d,h.length),m=[{type:"int32",data:l},{type:"int32",data:h}];c.map((e=>m.push({type:"int32",data:[e[0],e[1]]})));const g=n.runWebGPUProgram(f,[r],r.dtype,m),y=CE({inputs:{x:g},backend:n,attrs:{shape:p}});return n.disposeData(g.dataId),y}};class OM{constructor(e,t,n){this.variableNames=["input","indices","segmentIds"],this.outputShape=[],this.uniforms="segmentSize : i32, sparseSize : i32,",this.workgroupSize=[64,1,1],this.atomic=!0,this.outputShape=e,this.type=n,this.dispatchLayout=OT([t]),this.dispatch=ET(this.dispatchLayout,[t],this.workgroupSize),this.shaderKey="sparseSegmentSum"}getUserCode(){return"\n    ".concat(xT("index")," {\n      if (index < uniforms.sparseSize) {\n        let indexInSegmentIds = index / uniforms.segmentSize;\n        let indexInSegment = index % uniforms.segmentSize;\n        let indexInInput = indices[indexInSegmentIds];\n        let segmentId = segmentIds[indexInSegmentIds];\n\n        let value = input[indexInInput * uniforms.segmentSize + indexInSegment];\n        let outIndex = segmentId * uniforms.segmentSize + indexInSegment;\n        ").concat(hT("&result[outIndex]","value",this.type),"\n      }\n    }\n  ")}}class FM{constructor(e,t){this.variableNames=["segmentIds"],this.outputShape=[],this.workgroupSize=[64,1,1],this.atomic=!0,this.outputShape=[e],this.dispatchLayout=OT(t),this.dispatch=ET(this.dispatchLayout,t,this.workgroupSize),this.shaderKey="sparseSegmentIdCountProgram"}getUserCode(){return"\n    ".concat(xT("index")," {\n      if (index < uniforms.segmentIdsShape) {\n        let segmentId = segmentIds[index];\n        ").concat(hT("&result[segmentId]","1","int32"),"\n      }\n    }\n  ")}}class DM{constructor(e,t){this.variableNames=["segmentSum","sameSegmentIdCount"],this.outputShape=[],this.uniforms="segmentSize : i32",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e,this.type=t,this.dispatchLayout=OT(e),this.dispatch=ET(this.dispatchLayout,e,this.workgroupSize),this.shaderKey="sparseSegmentMean"}getUserCode(){return"\n    ".concat(xT("index")," {\n      if (index < uniforms.size) {\n        let segmentId = index / uniforms.segmentSize;\n        let count = sameSegmentIdCount[segmentId];\n        if (count != 0) {\n          ").concat("float32"===this.type?"setOutputAtIndex(index, segmentSum[index] / f32(count));":"setOutputAtIndexI32(index, segmentSum[index] / count);","\n        }\n      }\n    }\n  ")}}function MM(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4?arguments[4]:void 0;const o=It(e.shape)/e.shape[0],i=e.dtype,s=It(t.shape),c=r.readSync(n.dataId),u=s>0?c[s-1]+1:0;let l;const d=e.shape.slice();d[0]=u;const p=s*o,h=kE({backend:r,attrs:{shape:d,value:0,dtype:i}});l=new OM(d,p,i);let f=[{type:"int32",data:[o]},{type:"int32",data:[p]}];const m=r.runWebGPUProgram(l,[e,t,n],i,f,h);if(a)return m;const g=kE({backend:r,attrs:{shape:[u],value:0,dtype:"int32"}});l=new FM(u,n.shape);const y=r.runWebGPUProgram(l,[n],"int32",null,g),b=kE({backend:r,attrs:{shape:d,value:0,dtype:i}});l=new DM(d,i),f=[{type:"int32",data:[o]}];const x=r.runWebGPUProgram(l,[m,y],i,f,b);return r.disposeData(m.dataId),r.disposeData(y.dataId),x}const PM={kernelName:Kr,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:a,indices:r,segmentIds:o}=t;return MM(a,r,o,!1,n)}};const LM={kernelName:qr,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:a,indices:r,segmentIds:o}=t;return MM(a,r,o,!0,n)}};class zM{constructor(e,t){this.variableNames=["A"],this.workgroupSize=[64,1,1],this.size=!0;const n=new Array(e.length);for(let a=0;a<n.length;a++)n[a]=e[a]*t[a];this.outputShape=n,this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize),this.rank=this.outputShape.length,this.shaderKey="tile"}getUserCode(){const e=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e>=5)throw Error("Tile for rank ".concat(e," is not yet supported"));if(1===e)return"(resRC % ".concat(t,"aShape)");const n=["resRC.x","resRC.y","resRC.z","resRC.w"],a=[];for(let r=0;r<e;r++)a.push("(".concat(n[r]," % ").concat(t,"aShape[").concat(r,"])"));return a.join()}(this.rank,"uniforms.");return"\n      ".concat(xT("index")," {\n        if (index < uniforms.size) {\n          let resRC = getCoordsFromIndex(index);\n          setOutputAtIndex(index, getA(").concat(e,"));\n        }\n      }\n    ")}}function BM(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{reps:o}=a;if(n.shouldExecuteOnCPU([r])||"string"===r.dtype||r.shape.length>=5){const e=n.readSync(r.dataId),t="string"===r.dtype?e.map((e=>Xo(e))):e,a=oc(r.shape,r.dtype,t),i=fR(a,o);return n.makeTensorInfo(i.shape,i.dtype,i.values)}const i=new zM(r.shape,o);return n.runWebGPUProgram(i,[r],r.dtype)}const WM={kernelName:oo,backendName:"webgpu",kernelFunc:BM};const UM={kernelName:Xr,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{sparseIndices:r,sparseValues:o,defaultValue:i}=t,{outputShape:s}=a,{sliceRank:c,numUpdates:u,sliceSize:l,strides:d,outputSize:p}=lu(0,r,s),h=!1;if("string"===o.dtype){const e=n.bufferSync(r),t=n.bufferSync(o),a=Xo(n.readSync(i.dataId)[0]),f=cR(e,t,s,p,l,u,c,d,a,h);return n.makeTensorInfo(s,f.dtype,f.values)}const f=[p/l,l],m=CE({inputs:{x:r},backend:n,attrs:{shape:[u,c]}}),g=o.shape.length?CE({inputs:{x:o},backend:n,attrs:{shape:[u,l]}}):RE({inputs:{x:o},backend:n}),y=g.dtype,b=n.makeTensorInfo([],y,Xt(1,y)),x=CE({inputs:{x:i},backend:n,attrs:{shape:Array(f.length).fill(1)}}),v=BM({inputs:{x:x},backend:n,attrs:{reps:f}}),w=[{type:"int32",data:[c]},{type:"int32",data:d},{type:"int32",data:[It([u,l])]}];switch(u){case 0:break;case 1:{const e=new pM([u,l],c,m.shape.length,g.shape.length,d,f,y,h);n.runWebGPUProgram(e,[g,m],y,w,v)}break;default:{const e=new pM([u,l],c,m.shape.length,b.shape.length,d,f,y,h);n.runWebGPUProgram(e,[b,m],y,w,v)}{const e=new pM([u,l],c,m.shape.length,g.shape.length,d,f,y);n.runWebGPUProgram(e,[g,m],y,w,v)}}const k=CE({inputs:{x:v},backend:n,attrs:{shape:s}});return n.disposeData(m.dataId),n.disposeData(g.dataId),n.disposeData(x.dataId),n.disposeData(b.dataId),n.disposeData(v.dataId),k}};const VM={kernelName:Vr,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{numOrSizeSplits:o,axis:i}=a,s=Ft(i,r.shape)[0],c=Fm(r,o,s),u=r.shape.length,l=new Array(u).fill(0),d=r.shape.slice();return c.map((e=>{const t=[...d];t[s]=e;const a=fA({inputs:{x:r},backend:n,attrs:{begin:l,size:t}});return l[s]+=e,a}))}},GM=ME({opType:g_.SQRT}),HM={kernelName:Br,backendName:"webgpu",kernelFunc:GM},jM={kernelName:Qr,backendName:"webgpu",kernelFunc:e=>{let{inputs:t,backend:n}=e;const{x:a}=t,r=n,o=new DE(a.shape,g_.SQUARE);return r.runWebGPUProgram(o,[a],a.dtype)}},KM=PE({opType:BT.SQUARED_DIFFERENCE}),qM={kernelName:Yr,backendName:"webgpu",kernelFunc:KM};const XM={kernelName:fo,backendName:"webgpu",kernelFunc:function(e){let{inputs:t,attrs:n,backend:a}=e;const{x:r}=t,o=new DE(r.shape,g_.STEP,"stepAlpha : f32,"),i=[{type:"float32",data:[n.alpha]}];return a.runWebGPUProgram(o,[r],r.dtype,i)}};class YM{constructor(e){this.variableNames=["x"],this.workPerThread=1,this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e,this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize,[this.workPerThread,1,1]);const t=yT(this.outputShape.length);this.uniforms="begin : ".concat(t,",  strides : ").concat(t,", "),this.shaderKey="stridedSlice"}getUserCode(){let e="";if(1===this.outputShape.length)e="coords * uniforms.strides + uniforms.begin";else{let t=0;e=this.outputShape.map(((e,n)=>(t++,1===this.outputShape.length?"coords * uniforms.strides[".concat(n,"] + uniforms.begin[").concat(n,"]"):"coords[".concat(t-1,"] * uniforms.strides[").concat(n,"] + uniforms.begin[").concat(n,"]")))).join(",")}return"\n       ".concat(xT("index")," {\n         if (index < uniforms.size) {\n           let coords = getCoordsFromIndex(index);\n           setOutputAtIndex(index, getX(").concat(e,"));\n         }\n       }\n     ")}}const QM={kernelName:$r,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{begin:o,end:i,strides:s,beginMask:c,endMask:u,ellipsisMask:l,newAxisMask:d,shrinkAxisMask:p}=a,{finalShapeSparse:h,finalShape:f,isIdentity:m,sliceDim0:g,isSimpleSlice:y,begin:b,end:x,strides:v}=_u(r.shape,o,i,s,c,u,l,d,p);let w;if(m)w=CE({inputs:{x:r},backend:n,attrs:{shape:f}});else if(g||y){kt(r.shape.length>=1,(()=>"Input must have rank at least 1, got: ".concat(r.shape.length)));const e=mu(b,x,v),t=fA({inputs:{x:r},backend:n,attrs:{begin:b,size:e}});w=CE({inputs:{x:t},backend:n,attrs:{shape:f}}),n.disposeData(t.dataId)}else{if(n.shouldExecuteOnCPU([r])){const e=n.readSync(r.dataId),t=oc(r.shape,r.dtype,e),a=dR(h,t,v,b);w=n.makeTensorInfo(f,r.dtype,a.values)}else{const e=new YM(h),t=[{type:"int32",data:b},{type:"int32",data:v}],a=n.runWebGPUProgram(e,[r],r.dtype,t);w=CE({inputs:{x:a},backend:n,attrs:{shape:f}}),n.disposeData(a.dataId)}}return w}};const ZM={kernelName:Jr,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{separator:r,nGramWidths:o,leftPad:i,rightPad:s,padWidth:c,preserveShortSequences:u}=a,{data:l,dataSplits:d}=t,p=n.readSync(l.dataId),h=n.readSync(d.dataId),[f,m]=pR(p,h,r,o,i,s,c,u);return[n.makeTensorInfo([f.length],"string",f),n.makeTensorInfo(d.shape,"int32",m)]}},$M=PE({opType:BT.SUB,cpuKernelImpl:hR,supportsComplex:!0}),JM={kernelName:no,backendName:"webgpu",kernelFunc:$M},eP=ME({opType:g_.TAN}),tP={kernelName:ao,backendName:"webgpu",kernelFunc:eP},nP=ME({opType:g_.TANH}),aP={kernelName:ro,backendName:"webgpu",kernelFunc:nP};const rP={kernelName:Er,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{tensor:r,indices:o,updates:i}=t,{}=a,{sliceRank:s,numUpdates:c,sliceSize:u,strides:l,outputSize:d}=lu(0,o,r.shape),p=[d/u,u];if(0===d)return n.makeTensorInfo(r.shape,o.dtype);const h=[],f=CE({inputs:{x:o},backend:n,attrs:{shape:[c,s]}});h.push(f);const m=CE({inputs:{x:i},backend:n,attrs:{shape:[c,u]}});h.push(m);const g=CE({inputs:{x:r},backend:n,attrs:{shape:p}});h.push(g);const y=BM({inputs:{x:g},backend:n,attrs:{reps:Array(p.length).fill(1)}}),b=new pM([c,u],s,f.shape.length,m.shape.length,l,p,r.dtype,!1),x=[{type:"int32",data:[s]},{type:"int32",data:l},{type:"int32",data:[It([c,u])]}],v=n.runWebGPUProgram(b,[m,f],g.dtype,x,y);h.push(v);const w=CE({inputs:{x:v},backend:n,attrs:{shape:r.shape}});return h.forEach((e=>n.disposeData(e.dataId))),w}};class oP{constructor(e){this.variableNames=["x","indices"],this.workgroupSize=[256,1,1],this.size=!0,this.outputShape=e,this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize),this.uniforms="inputSize : i32, firstPass : i32, negativeInf : f32,\n        dir : i32, inc : i32,",this.shaderKey="swap"}getUserCode(){return"\n        ".concat(xT("index")," {\n          if (index < uniforms.size) {\n            let outC = getCoordsFromIndex(index);\n            let batch = outC[0];\n            let elemIdx = outC[1];\n            // We compare elements pair-wise within a group of size 2 * inc.\n            // The comparing rule for each group alternates between ascending\n            // and descending. Within each group, we compare each pair at\n            // positions i and i+inc. To decide whether an element at position i\n            // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n            // inc, it is in the first half of the group, we denote it as x0,\n            // otherwise we denote it as x1.\n            // For example, as shown in the Bitonic top K paper referenced\n            // above, Figure5(a) shows that element[1] is in the second half of\n            // the group when group size is 2, but it is in the first half of\n            // the group when group size is 4.\n            let isFirstInPair = elemIdx % (2 * uniforms.inc) < uniforms.inc;\n            var i = 0;\n            if (isFirstInPair) {\n              i = elemIdx;\n            } else {\n              i = elemIdx - uniforms.inc;\n            }\n\n            var i0 = 0;\n            if (uniforms.firstPass == 1) {\n              i0 = i;\n            } else {\n              i0 = i32(getIndices(batch, i));\n            }\n\n            var i1 = 0;\n            if (uniforms.firstPass == 1) {\n              i1 = i + uniforms.inc;\n            } else {\n              i1 = i32(getIndices(batch, i + uniforms.inc));\n            }\n\n            var x0 = f32(0.0);\n            var x1 = f32(0.0);\n            if (i0 < uniforms.inputSize) {\n              x0 = getX(batch, i0);\n            } else {\n              x0 = uniforms.negativeInf;\n            }\n            if (i1 < uniforms.inputSize) {\n              x1 = getX(batch, i1);\n            } else {\n              x1 = uniforms.negativeInf;\n            }\n\n            let reverse = elemIdx % (2 * uniforms.dir) >= uniforms.dir;\n            let isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n            if (reverse == isGreater) {\n              // Elements in opposite order of direction\n              let iTemp = i0;\n              i0 = i1;\n              i1 = iTemp;\n            }\n            if (isFirstInPair) {\n              setOutputAtIndex(index, f32(i0));\n            } else {\n              setOutputAtIndex(index, f32(i1));\n            }\n          }\n        }\n      ")}}class iP{constructor(e){this.variableNames=["x","indices"],this.workgroupSize=[256,1,1],this.size=!0,this.outputShape=e,this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize),this.uniforms="inputSize : i32, firstPass : i32, k : i32,",this.shaderKey="merge"}getUserCode(){return"\n        ".concat(xT("index")," {\n          if (index < uniforms.size) {\n            let outC = getCoordsFromIndex(index);\n            let batch = outC[0];\n            let elemIdx = outC[1];\n            // The output size is half of the previous size.\n            // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _\n            // (k=4), we only need to output the indices at positions |, the\n            // indices at positions _ can be thrown away, see Figure5(b) After\n            // Phase 2 (Merge phase) in the Bitonic Top K paper referenced\n            // above.\n            // For example, the paper shows we only need to output the orange\n            // bars. The output sequence should look like this | | | | | | | |.\n            // Because the sequence is halved, to map the output index back to\n            // the previous sequence to find the corresponding value, we need\n            // to double the index. When we double the index, we basically\n            // interpolate a position, so 2i looks like\n            // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k\n            // position of each 2k positions by - elemIdx % k. E.g. for output\n            // at index 4,5,6,7, we want to get the corresponding element at\n            // original index 8,9,10,11, for output at index 8,9,10,11,\n            // we want to get the corresponding element at original index\n            // 16,17,18,19, so on and so forth.\n\n            var i = 0;\n            if (elemIdx < uniforms.k) {\n              i = elemIdx;\n            } else {\n              i = elemIdx * 2 - elemIdx % uniforms.k;\n            }\n            var i0 = 0;\n            if (uniforms.firstPass == 1) {\n              i0 = i;\n            } else {\n              i0 = i32(getIndices(batch, i));\n            }\n            var i1 = 0;\n            if (uniforms.firstPass == 1) {\n              i1 = i + uniforms.k;\n            } else {\n              i1 = i32(getIndices(batch, i + uniforms.k));\n            }\n\n            let x0 = getX(batch, i0);\n            var x1 = f32(0.0);\n            if (i1 < uniforms.inputSize) {\n              x1 = getX(batch, i1);\n            } else {\n              x1 = x0;\n            }\n\n            if (x0 >= x1) {\n              setOutputAtIndex(index, f32(i0));\n            } else {\n              setOutputAtIndex(index, f32(i1));\n            }\n          }\n        }\n      ")}}function sP(e,t){null!==t&&e.disposeData(t.dataId)}function cP(e){let t=1;for(;t<e;)t*=2;return t}const uP={kernelName:io,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{k:o,sorted:i}=a,s=r.shape,c=s[s.length-1];if(n.shouldExecuteOnCPU([r])){const e=n.readSync(r.dataId),[t,a]=mR(e,s,r.dtype,o,i);return[n.makeTensorInfo(t.shape,t.dtype,t.values),n.makeTensorInfo(a.shape,a.dtype,a.values)]}if(0===o)return s[s.length-1]=0,[n.makeTensorInfo(s,r.dtype,[]),n.makeTensorInfo(s,"int32",[])];if(1===c)return[r,kE({attrs:{shape:s,dtype:"int32",value:0},backend:n})];const u=It(s)/c,l=CE({inputs:{x:r},attrs:{shape:[u,c]},backend:n}),d=cP(o),p=cP(c);let h=null;const f=()=>null===h?[l,l]:[l,h],m=(e,t,a)=>{const r=f(),o=new oP(a),i=[{type:"int32",data:[c]},{type:"int32",data:[null===h?1:0]},{type:"float32",data:[Number.NEGATIVE_INFINITY]},{type:"int32",data:[e]},{type:"int32",data:[t]}],s=h;h=n.runWebGPUProgram(o,r,"int32",i),sP(n,s)};for(let v=1;v<d;v*=2){const e=2*v;for(let t=v;t>=1;t/=2)m(e,t,[u,p])}for(let v=p;v>d;v/=2){const e=f(),t=new iP([u,v/2]),a=[{type:"int32",data:[c]},{type:"int32",data:[null===h?1:0]},{type:"int32",data:[d]}],r=h;h=n.runWebGPUProgram(t,e,"int32",a),sP(n,r);const o=d/2,i=2*o;for(let n=o;n>=1;n/=2)m(i,n,h.shape)}let g=h;h=fA({inputs:{x:h},backend:n,attrs:{begin:0,size:[u,o]}}),sP(n,g);let y=kF({inputs:{x:l,indices:h},backend:n,attrs:{axis:1,batchDims:1}});sP(n,l);const b=s.slice(0,-1);b.push(o),g=h,h=CE({inputs:{x:h},attrs:{shape:b},backend:n}),sP(n,g);const x=y;return y=CE({inputs:{x:y},attrs:{shape:b},backend:n}),sP(n,x),[y,h]}};class lP{constructor(e){this.variableNames=["Image","Transforms"],this.uniforms="interpolationModeId : i32, fillModeId : i32, fillValue : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e,this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="transform"}getUserCode(){return"\n          fn mapCoord(outCoord : f32, len : f32) -> f32{\n            var inCoord = outCoord;\n            if(uniforms.fillModeId == 2) {\n              if (inCoord < 0.0) {\n                if (len <= 1.0) {\n                  inCoord = 0.0;\n                } else {\n                  let sz2 = 2.0 * len;\n                  if (inCoord < sz2) {\n                    inCoord = sz2 * f32(i32(f32(-inCoord / sz2))) +\n                    inCoord;\n                  }\n                  if (inCoord < -len) {\n                    inCoord = inCoord + sz2;\n                  } else {\n                    inCoord = -inCoord - 1.0;\n                  }\n                }\n              } else if (inCoord > len - 1.0) {\n                if (len <= 1.0) {\n                  inCoord = 0.0;\n                } else {\n                  let sz2 = 2.0 * len;\n                  inCoord = inCoord - sz2 * f32(i32(f32(inCoord / sz2)));\n                  if (inCoord >= len) {\n                    inCoord = sz2 - inCoord - 1.0;\n                  }\n                }\n              }\n              return clamp(inCoord, 0.0, len - 1.0);\n            } else if (uniforms.fillModeId == 3) {\n              if (inCoord < 0.0) {\n                if (len <= 1.0) {\n                  inCoord = 0.0;\n                } else {\n                  let sz = len - 1.0;\n                  inCoord = inCoord + len * (f32(i32(f32(-inCoord / sz))) + 1.0);\n                }\n              } else if (inCoord > len - 1.0) {\n                if (len <= 1.0) {\n                  inCoord = 0.0;\n                } else {\n                  let sz = len - 1.0;\n                  inCoord = inCoord - len * f32(i32(f32(inCoord / sz)));\n                }\n              }\n              return clamp(inCoord, 0.0, len - 1.0);\n            } else if (uniforms.fillModeId == 4) {\n              return clamp(outCoord, 0.0, len - 1.0);\n            }\n            return outCoord;\n          }\n          fn readWithFillValue(batch : i32, coordY : i32, coordX : i32,\n            channel : i32) -> f32 {\n            var outputValue : f32;\n            if (0 <= coordY && coordY < uniforms.imageShape[1] && 0 <= coordX && coordX < uniforms.imageShape[2]) {\n                outputValue = getImage(batch, coordY, coordX, channel);\n            } else {\n              outputValue = uniforms.fillValue;\n            }\n            return outputValue;\n          }\n\n          ".concat(xT("index")," {\n            if (index < uniforms.size) {\n              let coords = getCoordsFromIndex(index);\n              var outputValue : f32;\n              let batch = coords[0];\n              let x = coords[2];\n              let y = coords[1];\n              let channel = coords[3];\n              let xf = f32(x);\n              let yf = f32(y);\n              let a1 = getTransforms(batch, 0);\n              let a2 = getTransforms(batch, 1);\n              let a3 = getTransforms(batch, 2);\n              let b1 = getTransforms(batch, 3);\n              let b2 = getTransforms(batch, 4);\n              let b3 = getTransforms(batch, 5);\n              let c1 = getTransforms(batch, 6);\n              let c2 = getTransforms(batch, 7);\n              let projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = uniforms.fillValue;\n              } else {\n                let inX = (a1 * xf + a2 * yf + a3) / projection;\n                let inY = (b1 * xf + b2 * yf + b3) / projection;\n                let mapX = mapCoord(inX, f32(uniforms.imageShape[2]));\n                let mapY = mapCoord(inY, f32(uniforms.imageShape[1]));\n\n                if (uniforms.interpolationModeId == 1) {\n                  let coordY = i32(round(mapY));\n                  let coordX = i32(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  let yFloor = floor(mapY);\n                  let xFloor = floor(mapX);\n                  let yCeil = yFloor + 1.0;\n                  let xCeil = xFloor + 1.0;\n                  let valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, i32(yFloor), i32(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, i32(yFloor), i32(xCeil), channel);\n                  let valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, i32(yCeil), i32(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, i32(yCeil), i32(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutputAtIndex(index, outputValue);\n            }\n          }\n        ")}}const dP={kernelName:so,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{image:r,transforms:o}=t,{interpolation:i,fillMode:s,fillValue:c,outputShape:u}=a,[l,d,p,h]=r.shape,[f,m]=null!=u?u:[d,p],g=new lP([l,f,m,h]),y="nearest"===i?1:2;let b;switch(s){case"constant":default:b=1;break;case"reflect":b=2;break;case"wrap":b=3;break;case"nearest":b=4}const x=[{type:"int32",data:[y]},{type:"int32",data:[b]},{type:"float32",data:[c]}];return n.runWebGPUProgram(g,[r,o],"float32",x)}};const pP={kernelName:lo,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{value:r}=t;let{axis:o}=a;o<0&&(o+=r.shape.length);const i=r,s=i.shape.length,c=r.shape[o],u=new Array(s-1);let l=0;for(let m=0;m<s;m++)m!==o&&(u[l++]=i.shape[m]);const d=[],p=new Array(s).fill(0),h=i.shape.slice();h[o]=1;const f=new Array(c);for(let m=0;m<f.length;m++){p[o]=m;const e=fA({inputs:{x:i},backend:n,attrs:{begin:p,size:h}}),t=CE({inputs:{x:e},backend:n,attrs:{shape:u}});f[m]=t,d.push(e)}return d.forEach((e=>n.disposeData(e.dataId))),f}};class hP{constructor(e,t,n){if(this.outputShape=[],this.variableNames=["x","segmentIds"],this.uniforms="numSegments : i32, xSize: i32,",this.workgroupSize=[64,1,1],this.atomic=!0,this.outputShape=t,this.dispatchLayout=OT(e),this.dispatch=ET(this.dispatchLayout,e,this.workgroupSize),"float32"!==n&&"int32"!==n)throw new Error("UnsortedSegmentSum only supports float32 and int32\n              types, does not support ".concat(n," type."));this.type=n,this.shaderKey="unsortedSegmentSum"}getUserCode(){return"\n    ".concat(xT("index")," {\n      if (index < uniforms.xSize) {\n        let coords = getXCoordsFromIndex(index);\n        let b = coords[0];\n        let inCol = coords[1];\n\n        let segmentId = i32(getSegmentIds(inCol));\n        if (segmentId >= 0) {\n          let flatIndex = b * uniforms.numSegments + segmentId % uniforms.numSegments;\n          let value = getX(b, inCol);\n\n          ").concat(hT("&result[flatIndex]","value",this.type),"\n        }\n      }\n    }\n  ")}}const fP={kernelName:po,backendName:"webgpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,segmentIds:o}=t,{numSegments:i}=a,s=r.shape.length,c=[];let u=0;const l=nd([u],s);let d=r;null!=l&&(d=AR({inputs:{x:r},backend:n,attrs:{perm:l}}),c.push(d),u=rd(1,s)[0]);const p=qm(d.shape,u,i),h=It([d.shape[u]]),f=CE({inputs:{x:d},backend:n,attrs:{shape:[-1,h]}});c.push(f);const m=r.dtype,g=[f.shape[0],i],y=kE({backend:n,attrs:{shape:g,value:0,dtype:m}}),b=new hP(f.shape,g,m),x=[{type:"int32",data:[i]},{type:"int32",data:[It(f.shape)]}],v=n.runWebGPUProgram(b,[f,o],m,x,y),w=CE({inputs:{x:v},backend:n,attrs:{shape:p}});c.push(v);let k=w;if(null!=l){c.push(w);const e=ad(l);k=AR({inputs:{x:k},backend:n,attrs:{perm:e}})}return c.forEach((e=>n.disposeData(e.dataId))),k}},mP=[TE,xR,wR,SR,IR,TR,PR,LR,BR,WR,VR,HR,KR,XR,QR,oA,iA,uA,lA,dA,gA,xA,wA,NA,_A,AA,FE,DA,WA,KA,ZA,JA,tO,nO,aO,oO,sO,uO,mO,gO,yO,xO,NO,TO,SO,EO,AO,DO,MO,LO,VO,HO,jO,qO,YO,ZO,JO,tF,rF,SE,iF,pF,cF,lF,gF,yF,bF,vF,SF,IF,TF,AE,_F,LA,RF,OF,DF,MF,LF,BF,UF,jF,GF,qF,YF,ZF,tD,aD,tA,oD,iD,dD,sD,lD,pD,aA,hD,mD,yD,xD,CD,BO,ID,ND,TD,SA,ED,OD,FD,PD,zD,BD,WD,UD,IA,GD,jD,qD,YD,IE,ZD,JD,tM,aM,oM,sM,uM,dM,hM,mM,yM,xM,wM,SM,IM,TM,mA,XM,QM,ZM,SD,EM,AM,PM,LM,UM,VM,HM,jM,qM,JM,UO,tP,aP,rP,WM,uP,dP,OR,pP,fP,AD];for(const n of mP)To(n);var gP,yP;let bP;!function(e){e[e.float32=0]="float32",e[e.int32=1]="int32",e[e.bool=2]="bool",e[e.string=3]="string",e[e.complex64=4]="complex64"}(gP||(gP={})),function(e){e[e.linear=0]="linear",e[e.relu=1]="relu",e[e.relu6=2]="relu6",e[e.prelu=3]="prelu",e[e.leakyrelu=4]="leakyrelu",e[e.sigmoid=5]="sigmoid",e[e.elu=6]="elu"}(yP||(yP={}));const xP={kernelName:yo,backendName:"wasm",setupFunc:function(e){bP=e.wasm.cwrap(yo,null,["number","array","number","number","array","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{a:r,b:o,bias:i,preluActivationWeights:s}=t;if("float32"!==r.dtype||"float32"!==o.dtype)throw new Error("_FusedMatMul for non non-float32 tensors not yet supported.");const{transposeA:c,transposeB:u,activation:l,leakyreluAlpha:d}=a,p=n.dataIdMap.get(r.dataId).id,h=n.dataIdMap.get(o.dataId).id;let f=0;if(null!=i){const e=n.dataIdMap.get(i.dataId);if(1!==e.shape.length)throw new Error("_FusedMatMul only supports rank-1 bias but got "+"rank ".concat(e.shape.length,"."));f=e.id}const m=null==s?0:n.dataIdMap.get(s.dataId).id,g=yP[l];if(null==g)throw new Error("".concat(l," activation not yet supported for FusedConv2D ")+"in the wasm backend.");const y=c?r.shape[2]:r.shape[1],b=u?o.shape[1]:o.shape[2],x=Rc(r.shape.slice(0,-2),o.shape.slice(0,-2)),v=n.makeOutput([...x,y,b],r.dtype),w=n.dataIdMap.get(v.dataId).id,k=new Uint8Array(new Int32Array(r.shape).buffer),S=new Uint8Array(new Int32Array(o.shape).buffer);return bP(p,k,r.shape.length,h,S,o.shape.length,c,u,g,f,m,d||0,w),v}};function vP(e,t){let n;return{kernelName:e,backendName:"wasm",setupFunc:function(t){n=t.wasm.cwrap(e,null,["number","number","number"])},kernelFunc:function(e){const{backend:a,inputs:{x:r}}=e,o=a.dataIdMap.get(r.dataId).id,i=a.makeOutput(r.shape,t||r.dtype),s=a.dataIdMap.get(i.dataId).id;return 0===It(i.shape)||n(o,gP[r.dtype],s),i}}}const wP=vP(cn),kP=vP(un),SP=vP(ln);function CP(e,t,n){let a;return{kernelName:e,backendName:"wasm",setupFunc:function(t){a=t.wasm.cwrap(e,null,["number","array","number","number","array","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:r}=e,{a:o,b:i}=r,s=t.dataIdMap.get(o.dataId).id,c=t.dataIdMap.get(i.dataId).id,u=null!=n?n:o.dtype,l=Rc(o.shape,i.shape),d=t.makeOutput(l,u);if(0===It(l))return d;const p=new Uint8Array(new Int32Array(o.shape).buffer),h=new Uint8Array(new Int32Array(i.shape).buffer),f=t.dataIdMap.get(d.dataId).id;return a(s,p,o.shape.length,c,h,i.shape.length,gP[o.dtype],f),d}}}const IP=CP(dn);let NP;const TP={kernelName:pn,backendName:"wasm",setupFunc:function(e){NP=e.wasm.cwrap(pn,null,["array","number","number","number"])},kernelFunc:function(e){const{inputs:t,backend:n}=e,a=n.makeOutput(t[0].shape,t[0].dtype);if(0===It(a.shape))return a;const r=t.map((e=>n.dataIdMap.get(e.dataId).id)),o=new Uint8Array(new Int32Array(r).buffer),i=n.dataIdMap.get(a.dataId).id;return NP(o,r.length,gP[a.dtype],i),a}};function _P(e){const{inputs:{x:t},backend:n}=e;if("string"===t.dtype)return qi(n.readSync(t.dataId),t.shape,t.dtype);const a=n.makeOutput(t.shape,t.dtype),r=n.typedArrayFromHeap(t);return n.typedArrayFromHeap(a).set(r),a}const EP={kernelName:Sa,backendName:"wasm",kernelFunc:_P};let RP;function AP(e){const{inputs:t,backend:n,attrs:a}=e,[r,o]=function(e,t){const n=[],a=[];for(let r=0;r<e.length;++r)1!==e[r]&&n.push(e[r]),1!==e[t[r]]&&a.push(t[r]);for(let r=0;r<a.length;++r){let e=-1;for(let t=0;t<a.length;++t)a[t]>=r&&(-1===e||a[e]>a[t])&&(e=t);a[e]=r}return[n,a]}(t.x.shape,a.perm);let i=!0;for(let f=0;f<o.length;f++)o[f]!==f&&(i=!1);const s=function(e,t){const n=new Array(e.length);for(let a=0;a<n.length;a++)n[a]=e[t[a]];return n}(t.x.shape,a.perm),c={dataId:t.x.dataId,shape:r,dtype:t.x.dtype};if(i){const e=_P({inputs:t,backend:n});return e.shape=s,e}const u=n.makeOutput(s,c.dtype),l=n.dataIdMap.get(c.dataId).id,d=n.dataIdMap.get(u.dataId).id,p=new Uint8Array(new Int32Array(o).buffer),h=new Uint8Array(new Int32Array(c.shape).buffer);return RP(l,h,c.shape.length,gP[c.dtype],d,p,o.length),u}const OP={kernelName:co,backendName:"wasm",kernelFunc:AP,setupFunc:function(e){RP=e.wasm.cwrap(co,null,["number","array","number","number","number","array","number"])}};function FP(e,t,n){const a=e.shape,r=e.shape.length,o=Ft(t,a);let i=o;const s=nd(i,r);let c=null,u=!1;if(null!=s){const t=new Array(r);for(let e=0;e<t.length;e++)t[e]=a[s[e]];i=rd(i.length,r),c=AP({inputs:{x:e},attrs:{perm:s},backend:n});const o=n.dataIdMap.get(e.dataId).id;n.dataIdMap.get(c.dataId).id!==o&&(u=!0)}return{transposed:c,originalAxes:o,axes:i,inputWasTransposed:u}}let DP;const MP={kernelName:hn,backendName:"wasm",setupFunc:function(e){DP=e.wasm.cwrap(hn,null,["number, number, number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:a}=e,{axis:r,keepDims:o}=a,{x:i}=n;let s=t.dataIdMap.get(i.dataId).id,c=i;const{transposed:u,axes:l,originalAxes:d,inputWasTransposed:p}=FP(i,r,t);if(p){c=u,s=t.dataIdMap.get(u.dataId).id}td("all",l,c.shape.length);const[h,f]=Jl(c.shape,l),m=It(f),g=t.makeOutput(h,i.dtype);if(0!==It(c.shape)){const e=t.dataIdMap.get(g.dataId).id;DP(s,m,e)}if(p&&t.disposeData(u.dataId),o){const e=ed(g.shape,d);g.shape=e}return g}};let PP;const LP={kernelName:fn,backendName:"wasm",setupFunc:function(e){PP=e.wasm.cwrap(fn,null,["number, number, number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:a}=e,{axis:r,keepDims:o}=a,{x:i}=n;let s=t.dataIdMap.get(i.dataId).id,c=i;const{transposed:u,axes:l,originalAxes:d,inputWasTransposed:p}=FP(i,r,t);if(p){c=u,s=t.dataIdMap.get(u.dataId).id}td("any",l,c.shape.length);const[h,f]=Jl(c.shape,l),m=It(f),g=t.makeOutput(h,i.dtype);if(0!==It(c.shape)){const e=t.dataIdMap.get(g.dataId).id;PP(s,m,e)}if(p&&t.disposeData(u.dataId),o){const e=ed(g.shape,d);g.shape=e}return g}};function zP(e){let t;return{kernelName:e,backendName:"wasm",setupFunc:function(n){t=n.wasm.cwrap(e,null,["number","number","number","number","number"])},kernelFunc:function(e){const{backend:n,inputs:a,attrs:r}=e,{axis:o}=r,{x:i}=a,s=n.dataIdMap.get(i.dataId).id;let c=s,u=i;const{transposed:l,axes:d,inputWasTransposed:p}=FP(i,o,n);if(p){const e=n.dataIdMap.get(l.dataId).id;e!==s&&(u=l,c=e)}const h=u.shape.slice(0,-1),f=n.makeOutput(h,"int32"),m=n.dataIdMap.get(f.dataId).id,g=It(f.shape),y=u.shape[d[0]];return t(c,gP[u.dtype],g,y,m),p&&n.disposeData(l.dataId),f}}}const BP=zP(mn),WP=zP(gn),UP=vP(yn),VP=vP(bn),GP=vP(xn),HP=CP(wn),jP=vP(vn);let KP;const qP={kernelName:kn,backendName:"wasm",setupFunc:function(e){KP=e.wasm.cwrap(kn,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,attrs:n,backend:a}=e,r=t.x,o=a.dataIdMap.get(r.dataId).id,{filterSize:i,strides:s,pad:c,dimRoundingMode:u}=n,l=Gu(r.shape,i,s,1,c,u),d=l.filterHeight,p=l.filterWidth,h=l.padInfo.top,f=l.padInfo.right,m=l.padInfo.bottom,g=l.padInfo.left,y=l.strideHeight,b=l.strideWidth,x=l.inChannels;if("channelsLast"!==l.dataFormat)throw new Error("wasm backend does not support dataFormat:'"+"".concat(l.dataFormat,"'. Please use 'channelsLast'."));if(1!==l.dilationWidth||1!==l.dilationHeight)throw new Error("was backend only supports average pooling with dilation = [1, 1], "+"got [".concat(l.dilationHeight,", ").concat(l.dilationWidth,"]."));const v=a.makeOutput(l.outShape,"float32"),w=a.dataIdMap.get(v.dataId).id;return KP(o,r.shape[0],r.shape[1],r.shape[2],d,p,h,f,m,g,y,b,x,w),v}};let XP;const YP={kernelName:Cn,backendName:"wasm",setupFunc:function(e){XP=e.wasm.cwrap("AvgPool3D",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{filterSize:o,strides:i,pad:s,dimRoundingMode:c,dataFormat:u}=a,l=Hu(r.shape,o,i,1,s,c,u),d=n.makeOutput(l.outShape,r.dtype);return XP(n.dataIdMap.get(r.dataId).id,n.dataIdMap.get(d.dataId).id,l.batchSize,l.inChannels,l.inDepth,l.inHeight,l.inWidth,l.outDepth,l.outHeight,l.outWidth,l.strideDepth,l.strideHeight,l.strideWidth,l.dilationDepth,l.dilationHeight,l.dilationWidth,l.effectiveFilterDepth,l.effectiveFilterHeight,l.effectiveFilterWidth,l.padInfo.front,l.padInfo.top,l.padInfo.left),d}};let QP;const ZP={kernelName:In,backendName:"wasm",setupFunc:function(e){QP=e.wasm.cwrap("AvgPool3DGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:r,input:o}=t,{filterSize:i,strides:s,pad:c,dimRoundingMode:u}=a,l=Hu(o.shape,i,s,1,c,u),d=n.makeOutput(o.shape,o.dtype);return QP(n.dataIdMap.get(r.dataId).id,n.dataIdMap.get(d.dataId).id,l.batchSize,l.inChannels,l.inDepth,l.inHeight,l.inWidth,l.outDepth,l.outHeight,l.outWidth,l.strideDepth,l.strideHeight,l.strideWidth,l.dilationDepth,l.dilationHeight,l.dilationWidth,l.effectiveFilterDepth,l.effectiveFilterHeight,l.effectiveFilterWidth,l.padInfo.front,l.padInfo.top,l.padInfo.left,l.filterDepth,l.filterHeight,l.filterWidth),d}};let $P;const JP={kernelName:Sn,backendName:"wasm",setupFunc:function(e){$P=e.wasm.cwrap("AvgPoolGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:r,input:o}=t,{filterSize:i,strides:s,pad:c}=a,u=Gu(o.shape,i,s,1,c),l=n.makeOutput(o.shape,o.dtype);return $P(n.dataIdMap.get(r.dataId).id,n.dataIdMap.get(l.dataId).id,u.batchSize,u.inChannels,u.inHeight,u.inWidth,u.outHeight,u.outWidth,u.strideHeight,u.strideWidth,u.dilationHeight,u.dilationWidth,u.effectiveFilterHeight,u.effectiveFilterWidth,u.padInfo.top,u.padInfo.left,u.filterHeight,u.filterWidth),l}};function eL(e){const{inputs:t,attrs:n}=e,{x:a}=t,{shape:r}=n,o=It(a.shape),i=Ot(r,o);return kt(o===It(i),(()=>"new shape: ".concat(i,", old shape: ").concat(a.shape,". New shape and old ")+"shape must have the same number of elements.")),e.backend.incRef(a.dataId),{dataId:a.dataId,shape:i,dtype:a.dtype}}const tL={kernelName:xr,backendName:"wasm",kernelFunc:eL};let nL;const aL={kernelName:Nn,backendName:"wasm",setupFunc:function(e){nL=e.wasm.cwrap(Nn,null,["number","array","number","number","array","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{a:r,b:o}=t,{transposeA:i,transposeB:s}=a;if("float32"!==r.dtype||"float32"!==o.dtype)throw new Error("BatchMatMul for non non-float32 tensors not yet supported.");const c=r.shape.length,u=o.shape.length,l=i?r.shape[c-2]:r.shape[c-1],d=s?o.shape[u-1]:o.shape[u-2],p=i?r.shape[c-1]:r.shape[c-2],h=s?o.shape[u-2]:o.shape[u-1],f=r.shape.slice(0,-2),m=o.shape.slice(0,-2),g=It(f),y=It(m),b=Rc(r.shape.slice(0,-2),o.shape.slice(0,-2)).concat([p,h]);kt(l===d,(()=>"Error in matMul: inner shapes (".concat(l,") and (")+"".concat(d,") of Tensors with shapes ").concat(r.shape," and ")+"".concat(o.shape," and transposeA=").concat(i)+" and transposeB=".concat(s," must match.")));const x=s?[y,h,d]:[y,d,h],v=eL({inputs:{x:r},backend:n,attrs:{shape:i?[g,l,p]:[g,p,l]}}),w=eL({inputs:{x:o},backend:n,attrs:{shape:x}}),k=n.dataIdMap.get(v.dataId).id,S=n.dataIdMap.get(w.dataId).id,C=i?v.shape[2]:v.shape[1],I=s?w.shape[1]:w.shape[2],N=Math.max(g,y),T=n.makeOutput([N,C,I],v.dtype),_=n.dataIdMap.get(T.dataId).id,E=new Uint8Array(new Int32Array(v.shape).buffer),R=new Uint8Array(new Int32Array(w.shape).buffer);return nL(k,E,v.shape.length,S,R,w.shape.length,i,s,_),n.disposeData(v.dataId),n.disposeData(w.dataId),T.shape=b,T}};function rL(e){const{inputs:{x:t},attrs:{begin:n,size:a},backend:r}=e,[o,i]=Tu(t,n,a),s=Iu(t.shape,o,i),c=r.readSync(t.dataId),u=r.makeOutput(i,t.dtype),l=Gt(t.shape),d=r.dataIdMap.get(u.dataId);if(s){const e=Nu(o,l);if("string"===t.dtype)d.stringBytes=c.slice(e,e+It(i));else{r.typedArrayFromHeap(u).set(c.subarray(e,e+It(i)))}return u}if("string"===t.dtype){const e=Ib(c,o,i,t.shape,t.dtype);return d.stringBytes=e,u}const p=r.typedArrayFromHeap(u),h=t.shape.length;if(2===h)!function(e,t,n,a,r){let o=0;const i=a[0],s=a[1],c=i+r[0];for(let u=i;u<c;u++){const a=u*t+s;n.set(e.subarray(a,a+r[1]),o),o+=r[1]}}(c,l[0],p,o,i);else if(3===h)!function(e,t,n,a,r,o){let i=0;const s=r[0],c=r[1],u=r[2],l=s+o[0],d=c+o[1];for(let p=s;p<l;p++)for(let r=c;r<d;r++){const s=p*t+r*n+u;a.set(e.subarray(s,s+o[2]),i),i+=o[2]}}(c,l[0],l[1],p,o,i);else if(4===h)!function(e,t,n,a,r,o,i){let s=0;const c=o[0],u=o[1],l=o[2],d=c+i[0],p=u+i[1],h=l+i[2],f=o[3];for(let m=c;m<d;m++)for(let o=u;o<p;o++)for(let c=l;c<h;c++){const u=m*t+o*n+c*a+f;r.set(e.subarray(u,u+i[3]),s),s+=i[3]}}(c,l[0],l[1],l[2],p,o,i);else{const e=Ib(c,o,i,t.shape,t.dtype);p.set(e)}return u}const oL={kernelName:Fr,backendName:"wasm",kernelFunc:rL};const iL={kernelName:Tn,backendName:"wasm",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{blockShape:o,crops:i}=a,s=o.reduce(((e,t)=>e*t)),c=nm(r.shape,o,s),u=am(c.length,o.length),l=rm(r.shape,o,s),d=om(i,o.length),p=im(l,i,o.length),h=eL({inputs:{x:r},backend:n,attrs:{shape:c}}),f=AP({inputs:{x:h},backend:n,attrs:{perm:u}}),m=eL({inputs:{x:f},backend:n,attrs:{shape:l}}),g=rL({inputs:{x:m},backend:n,attrs:{begin:d,size:p}});return n.disposeData(h.dataId),n.disposeData(f.dataId),n.disposeData(m.dataId),g}};let sL;const cL={kernelName:_n,backendName:"wasm",setupFunc:function(e){sL=e.wasm.cwrap(_n,null,["number","number","boolean","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:a}=e,{x:r,weights:o}=n,{size:i}=a,s=0!==o.shape.reduce(((e,t)=>e*t),1),c=1===r.shape.length?[i]:[r.shape[0],i],u=t.makeOutput(c,o.dtype);function l(e){return t.dataIdMap.get(e.dataId).id}return sL(l(r),i,s,l(o),gP[o.dtype],l(u)),u}},uL=CP(En);const lL={kernelName:Rn,backendName:"wasm",kernelFunc:function(e){const{inputs:t,backend:n}=e,{s0:a,s1:r}=t,o=n.typedArrayFromHeap(a),i=n.typedArrayFromHeap(r),s=Rc(Array.from(o),Array.from(i));return n.makeOutput([s.length],"int32",void 0,new Int32Array(s))}};function dL(e){const{inputs:{x:t},attrs:{dtype:n},backend:a}=e,r=a.makeOutput(t.shape,n),o=a.typedArrayFromHeap(t);return a.typedArrayFromHeap(r).set(o),r}const pL={kernelName:An,backendName:"wasm",kernelFunc:dL},hL=vP(On);let fL;const mL={kernelName:Fn,backendName:"wasm",setupFunc:function(e){fL=e.wasm.cwrap(Fn,null,["number","number","number","number"])},kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{clipValueMin:o,clipValueMax:i}=a,s=n.dataIdMap.get(r.dataId).id,c=n.makeOutput(r.shape,r.dtype),u=n.dataIdMap.get(c.dataId).id;return fL(s,o,i,u),c}};function gL(e){const{inputs:t,backend:n}=e,a=Ft(e.attrs.axis,t[0].shape)[0];Kf(t.map((e=>e.shape)),a);let r=qf(t.map((e=>e.shape)),a);const o=t.filter((e=>It(e.shape)>0));if(1===o.length)return _P({inputs:{x:o[0]},backend:n});const i=n.makeOutput(r,t[0].dtype);if(0===It(r))return i;if("string"===o[0].dtype){const e=o.map((e=>{const t=It(e.shape.slice(a));return eL({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})})),s=e.map((e=>({vals:n.readSync(e.dataId),shape:e.shape})));r=qf(e.map((e=>e.shape)),1);const c=1===e[0].shape[0],u=Uy(s,r,t[0].dtype,c),l=qf(o.map((e=>e.shape)),a);i.shape=l;return n.dataIdMap.get(i.dataId).stringBytes=Qm(u),e.forEach((e=>n.disposeData(e.dataId))),i}const s=It(o[0].shape.slice(0,a));let c=0;const u=o.map((e=>{const t=It(e.shape.slice(a));return c+=t,t})),l=o.map((e=>n.typedArrayFromHeap(e))),d=n.typedArrayFromHeap(i);for(let p=0;p<s;p++){let e=p*c;for(let t=0;t<l.length;t++){const n=u[t],a=p*n,r=l[t].subarray(a,a+n);d.set(r,e),e+=n}}return i}const yL={kernelName:Pn,backendName:"wasm",kernelFunc:gL};let bL;const xL={kernelName:Ln,backendName:"wasm",setupFunc:function(e){bL=e.wasm.cwrap(Ln,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,attrs:n,backend:a}=e,{x:r,filter:o}=t,i=a.dataIdMap.get(r.dataId).id,s=a.dataIdMap.get(o.dataId).id,{strides:c,dilations:u,pad:l,dimRoundingMode:d,dataFormat:p}=n,h=tl(p),f=ju(r.shape,o.shape,c,u,l,d,!1,h),m=f.filterHeight,g=f.filterWidth,y=f.padInfo.top,b=f.padInfo.right,x=f.padInfo.bottom,v=f.padInfo.left,w=f.dilationHeight,k=f.dilationWidth,S=f.strideHeight,C=f.strideWidth,I=f.inChannels,N=f.outChannels,T="SAME"===f.padInfo.type?1:0;if("channelsLast"!==f.dataFormat)throw new Error("wasm backend Conv2D does not support dataFormat:'"+"".concat(f.dataFormat,"'. Please use 'channelsLast'."));const _=a.makeOutput(f.outShape,"float32"),E=a.dataIdMap.get(_.dataId).id;return bL(i,r.shape[0],r.shape[1],r.shape[2],s,m,g,y,b,x,v,T,w,k,S,C,I,N,E),_}};let vL;const wL={kernelName:Bn,backendName:"wasm",setupFunc:function(e){vL=e.wasm.cwrap(Bn,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:a}=e,{dy:r,filter:o}=n,{strides:i,pad:s,dataFormat:c,dimRoundingMode:u,inputShape:l}=a,d=tl(c),p=ju(l,o.shape,i,1,s,u,!1,d),{batchSize:h,filterHeight:f,filterWidth:m,inChannels:g,inHeight:y,inWidth:b,outChannels:x,outHeight:v,outWidth:w,strideHeight:k,strideWidth:S}=p,C=f-1-p.padInfo.top,I=m-1-p.padInfo.left,N="channelsLast"===p.dataFormat,T=Gt(p.inShape),_=Gt(r.shape),[E,R,A]=Gt(o.shape),O=T[0],F=N?T[1]:T[2],D=N?T[2]:1,M=N?1:T[1],P=_[0],L=N?_[1]:_[2],z=N?_[2]:1,B=N?1:_[1],W=t.makeOutput(p.inShape,"float32"),U=t.dataIdMap.get(W.dataId).id,V=t.dataIdMap.get(r.dataId).id,G=t.dataIdMap.get(o.dataId).id;return vL(V,G,h,f,m,y,b,g,v,w,x,k,S,C,I,E,R,A,O,F,D,M,P,L,z,B,U),W}};let kL;const SL={kernelName:Wn,backendName:"wasm",setupFunc:function(e){kL=e.wasm.cwrap(Wn,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,filter:o}=t,{strides:i,pad:s,dilations:c}=a;if("float32"!==r.dtype)throw new Error("Tensor x must have dtype float32, got ".concat(r.dtype));if("float32"!==o.dtype)throw new Error("Tensor filter must have dtype float32, got ".concat(o.dtype));const u=Ku(r.shape,o.shape,i,c,s),l=n.makeOutput(u.outShape,r.dtype);return kL(n.dataIdMap.get(r.dataId).id,n.dataIdMap.get(o.dataId).id,n.dataIdMap.get(l.dataId).id,u.batchSize,u.inDepth,u.inHeight,u.inWidth,u.inChannels,u.outDepth,u.outHeight,u.outWidth,u.outChannels,u.strideDepth,u.strideHeight,u.strideWidth,u.dilationDepth,u.dilationHeight,u.dilationWidth,u.filterDepth,u.filterHeight,u.filterWidth,u.padInfo.front,u.padInfo.top,u.padInfo.left),l}};let CL;const IL={kernelName:Un,backendName:"wasm",setupFunc:function(e){CL=e.wasm.cwrap(Un,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,dy:o}=t,{strides:i,pad:s,filterShape:c}=a;if("float32"!==r.dtype)throw new Error("Tensor dy must have dtype float32, got ".concat(r.dtype));if("float32"!==o.dtype)throw new Error("Tensor filter must have dtype float32, got ".concat(o.dtype));const u=Ku(r.shape,c,i,1,s),l=n.makeOutput(u.filterShape,o.dtype);return CL(n.dataIdMap.get(r.dataId).id,n.dataIdMap.get(o.dataId).id,n.dataIdMap.get(l.dataId).id,u.batchSize,u.inDepth,u.inHeight,u.inWidth,u.inChannels,u.outDepth,u.outHeight,u.outWidth,u.outChannels,u.strideDepth,u.strideHeight,u.strideWidth,u.dilationDepth,u.dilationHeight,u.dilationWidth,u.filterDepth,u.filterHeight,u.filterWidth,u.padInfo.front,u.padInfo.top,u.padInfo.left),l}};let NL;const TL={kernelName:Vn,backendName:"wasm",setupFunc:function(e){NL=e.wasm.cwrap(Vn,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:r,filter:o}=t,{pad:i,strides:s,inputShape:c}=a;if("float32"!==r.dtype)throw new Error("Tensor dy must have dtype float32, got ".concat(r.dtype));if("float32"!==o.dtype)throw new Error("Tensor filter must have dtype float32, got ".concat(o.dtype));const u=Ku(c,o.shape,s,1,i),l=n.makeOutput(u.inShape,r.dtype);return NL(n.dataIdMap.get(o.dataId).id,n.dataIdMap.get(r.dataId).id,n.dataIdMap.get(l.dataId).id,u.batchSize,u.inDepth,u.inHeight,u.inWidth,u.inChannels,u.outDepth,u.outHeight,u.outWidth,u.outChannels,u.strideDepth,u.strideHeight,u.strideWidth,u.dilationDepth,u.dilationHeight,u.dilationWidth,u.filterDepth,u.filterHeight,u.filterWidth,u.padInfo.front,u.padInfo.top,u.padInfo.left),l}},_L=vP(Gn),EL=vP(Hn);var RL;let AL;!function(e){e[e.bilinear=0]="bilinear",e[e.nearest=1]="nearest"}(RL||(RL={}));const OL={kernelName:qn,backendName:"wasm",setupFunc:function(e){AL=e.wasm.cwrap(qn,null,["number","number","number","number","array","number","number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:a}=e,{method:r,extrapolationValue:o,cropSize:i}=a,{image:s,boxes:c,boxInd:u}=n,l=c.shape[0],[d,p]=i,h=[l,d,p,s.shape[3]];let f,m=t.dataIdMap.get(s.dataId);"float32"!==s.dtype&&(f=dL({backend:t,inputs:{x:s},attrs:{dtype:"float32"}}),m=t.dataIdMap.get(f.dataId));const g=m.id,y=t.dataIdMap.get(c.dataId).id,b=t.dataIdMap.get(u.dataId).id,x=t.makeOutput(h,"float32"),v=t.dataIdMap.get(x.dataId).id,w=new Uint8Array(new Int32Array(s.shape).buffer);return AL(g,y,b,l,w,d,p,RL[r],o,v),null!=f&&t.disposeData(f.dataId),x}};let FL;const DL={kernelName:jn,backendName:"wasm",setupFunc:function(e){FL=e.wasm.cwrap(jn,null,["number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:o,exclusive:i,reverse:s}=a,c=r.shape.length;kt("float32"===r.dtype||"int32"===r.dtype,(()=>"cumprod does not support ".concat(r.dtype," tensors in the WASM backend")));const u=nd([o],c);let l=r;null!==u&&(l=AP({inputs:{x:r},attrs:{perm:u},backend:n}));const d=rd(1,c)[0];td("cumprod",[d],c);const p=n.makeOutput(l.shape,l.dtype),h=l.shape[d],f=n.dataIdMap.get(l.dataId).id,m=n.dataIdMap.get(p.dataId).id;FL(f,i?1:0,s?1:0,h,m,gP[r.dtype]);let g=p;if(null!==u){g=AP({inputs:{x:p},attrs:{perm:ad(u)},backend:n}),n.disposeData(l.dataId),n.disposeData(p.dataId)}return g}};let ML;const PL={kernelName:Kn,backendName:"wasm",setupFunc:function(e){ML=e.wasm.cwrap(Kn,null,["number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:o,exclusive:i,reverse:s}=a,c=r.shape.length;kt("float32"===r.dtype||"int32"===r.dtype,(()=>"cumsum does not support ".concat(r.dtype," tensors in the WASM backend")));const u=nd([o],c);let l=r;null!==u&&(l=AP({inputs:{x:r},attrs:{perm:u},backend:n}));const d=rd(1,c)[0];td("cumsum",[d],c);const p=n.makeOutput(l.shape,l.dtype),h=l.shape[d],f=n.dataIdMap.get(l.dataId).id,m=n.dataIdMap.get(p.dataId).id;ML(f,i?1:0,s?1:0,h,m,gP[r.dtype]);let g=p;if(null!==u){g=AP({inputs:{x:p},attrs:{perm:ad(u)},backend:n}),n.disposeData(l.dataId),n.disposeData(p.dataId)}return g}};let LL;const zL={kernelName:Xn,backendName:"wasm",setupFunc:function(e){LL=e.wasm.cwrap("DenseBincount",null,["number","array","number","number","boolean","number","number","boolean","number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:a}=e,{x:r,weights:o}=n,{size:i,binaryOutput:s}=a,c=0!==o.shape.reduce(((e,t)=>e*t),1),u=1===r.shape.length?[i]:[r.shape[0],i],l=t.makeOutput(u,o.dtype);function d(e){return t.dataIdMap.get(e.dataId).id}return LL(d(r),new Uint8Array(new Int32Array(r.shape).buffer),r.shape.length,i,c,d(o),gP[o.dtype],s,d(l)),l}};let BL;const WL={kernelName:Yn,backendName:"wasm",setupFunc:function(e){BL=e.wasm.cwrap(Yn,null,["number","number","number","array","number","array","array","number","number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:a}=e,{x:r}=n,{blockSize:o,dataFormat:i}=a,s=r.shape[0],c=("NHWC"===i?r.shape[1]:r.shape[2])*o,u=("NHWC"===i?r.shape[2]:r.shape[3])*o,l=("NHWC"===i?r.shape[3]:r.shape[1])/(o*o),d="NHWC"===i?[s,c,u,l]:[s,l,c,u],p=t.makeOutput(d,"float32"),h=t.dataIdMap.get(r.dataId).id,f=new Uint8Array(new Int32Array(Gt(r.shape)).buffer),m=new Uint8Array(new Int32Array(d).buffer),g=new Uint8Array(new Int32Array(Gt(d)).buffer),y=t.dataIdMap.get(p.dataId).id;return BL(h,o,"NHWC"===i?1:0,f,r.shape.length-1,m,g,d.length,y),p}};let UL;const VL={kernelName:Qn,backendName:"wasm",setupFunc:function(e){UL=e.wasm.cwrap(Qn,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,attrs:n,backend:a}=e,{x:r,filter:o}=t,i=a.dataIdMap.get(r.dataId).id,s=a.dataIdMap.get(o.dataId).id,{strides:c,dilations:u,pad:l,dimRoundingMode:d}=n,p=null==u?[1,1]:u,h=ju(r.shape,o.shape,c,p,l,d,!0),f=h.filterHeight,m=h.filterWidth,g=h.padInfo.top,y=h.padInfo.right,b=h.padInfo.bottom,x=h.padInfo.left,v=h.dilationHeight,w=h.dilationWidth,k=h.strideHeight,S=h.strideWidth,C=h.inChannels,I=h.outChannels,N="SAME"===h.padInfo.type?1:0;if("channelsLast"!==h.dataFormat)throw new Error("wasm backend DepthwiseConv2dNative does not support dataFormat:'"+"".concat(h.dataFormat,"'. Please use 'channelsLast'."));const T=a.makeOutput(h.outShape,"float32"),_=a.dataIdMap.get(T.dataId).id;return UL(i,r.shape[0],r.shape[1],r.shape[2],s,f,m,g,y,b,x,N,v,w,k,S,C,I,_),T}};let GL;const HL={kernelName:Jn,backendName:"wasm",setupFunc:function(e){GL=e.wasm.cwrap("Diag",null,["number","number","number","number"])},kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:a}=t,r=It(a.shape),o=n.makeOutput([...a.shape,...a.shape],a.dtype);return GL(n.dataIdMap.get(a.dataId).id,gP[a.dtype],r,n.dataIdMap.get(o.dataId).id),o}};let jL;const KL={kernelName:ea,backendName:"wasm",setupFunc:function(e){jL=e.wasm.cwrap(ea,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,filter:o}=t,{strides:i,pad:s,dilations:c}=a;if(r.dtype!==o.dtype)throw new Error("Dilation2D error: x must have the same dtype as filter. Got ".concat(r.dtype," and ").concat(o.dtype));const u=Vu(r.shape,o.shape,i,s,"NHWC",c),l=n.makeOutput(u.outShape,r.dtype);return jL(n.dataIdMap.get(r.dataId).id,n.dataIdMap.get(o.dataId).id,n.dataIdMap.get(l.dataId).id,gP[r.dtype],u.batchSize,u.inChannels,u.inHeight,u.inWidth,u.outHeight,u.outWidth,u.strideHeight,u.strideWidth,u.dilationHeight,u.dilationWidth,u.filterHeight,u.filterWidth,u.padInfo.top,u.padInfo.left),l}};let qL;const XL={kernelName:na,backendName:"wasm",setupFunc:function(e){qL=e.wasm.cwrap(na,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,filter:o,dy:i}=t,{strides:s,pad:c,dilations:u}=a;if(r.dtype!==o.dtype||r.dtype!==i.dtype)throw new Error("Dilation2DBackpropFilter error: x must have the same dtype as filter and dy. Got ".concat(r.dtype,", ").concat(o.dtype,", and ").concat(i.dtype));const l=Vu(r.shape,o.shape,s,c,"NHWC",u),d=n.makeOutput(o.shape,o.dtype);return qL(n.dataIdMap.get(r.dataId).id,n.dataIdMap.get(o.dataId).id,n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(d.dataId).id,gP[r.dtype],l.batchSize,l.inChannels,l.inHeight,l.inWidth,l.outHeight,l.outWidth,l.strideHeight,l.strideWidth,l.dilationHeight,l.dilationWidth,l.filterHeight,l.filterWidth,l.padInfo.top,l.padInfo.left),d}};let YL;const QL={kernelName:ta,backendName:"wasm",setupFunc:function(e){YL=e.wasm.cwrap(ta,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,filter:o,dy:i}=t,{strides:s,pad:c,dilations:u}=a;if(r.dtype!==o.dtype||r.dtype!==i.dtype)throw new Error("Dilation2DBackpropInput error: x must have the same dtype as filter and dy. Got ".concat(r.dtype,", ").concat(o.dtype,", and ").concat(i.dtype));const l=Vu(r.shape,o.shape,s,c,"NHWC",u),d=n.makeOutput(r.shape,r.dtype);return YL(n.dataIdMap.get(r.dataId).id,n.dataIdMap.get(o.dataId).id,n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(d.dataId).id,gP[r.dtype],l.batchSize,l.inChannels,l.inHeight,l.inWidth,l.outHeight,l.outWidth,l.strideHeight,l.strideWidth,l.dilationHeight,l.dilationWidth,l.filterHeight,l.filterWidth,l.padInfo.top,l.padInfo.left),d}},ZL=vP(ia);let $L;const JL={kernelName:sa,backendName:"wasm",setupFunc:function(e){$L=e.wasm.cwrap(sa,null,["number","number","number"])},kernelFunc:function(e){const{inputs:t,backend:n}=e,{dy:a,y:r}=t,o=n.makeOutput(r.shape,"float32"),i=e=>n.dataIdMap.get(e.dataId).id;return $L(i(r),i(a),i(o)),o}},ez=CP(ua,0,"bool"),tz=vP(ca),nz=vP(la,"float32");function az(e){const{inputs:t,attrs:n,backend:a}=e,{input:r}=t,{dim:o}=n,i=r.shape.length,s=r.shape.slice();let c=o;return o<0&&(kt(-(i+1)<=o,(()=>"Axis must be in the interval [".concat(-(i+1),", ").concat(i,"]"))),c=i+o+1),s.splice(c,0,1),eL({inputs:{x:r},backend:a,attrs:{shape:s}})}const rz={kernelName:da,backendName:"wasm",kernelFunc:az},oz=vP(pa,"float32");function iz(e){const{attrs:{shape:t,value:n},backend:a}=e;let{attrs:{dtype:r}}=e;r=r||Wt(n);const o=a.makeOutput(t,r);return a.typedArrayFromHeap(o).fill(n),o}const sz={kernelName:fa,backendName:"wasm",kernelFunc:iz};let cz;const uz={kernelName:ma,backendName:"wasm",kernelFunc:function(e){const{inputs:t,backend:n}=e,{image:a}=t,r=n.makeOutput(a.shape,a.dtype),o=n.dataIdMap.get(a.dataId).id,i=n.dataIdMap.get(r.dataId).id,[s,c,u,l]=a.shape;return cz(o,s,c,u,l,i),r},setupFunc:function(e){cz=e.wasm.cwrap(ma,null,["number","number","number","number","number","number"])}},lz=vP(ga),dz=CP(ya);let pz;const hz={kernelName:ba,backendName:"wasm",setupFunc:function(e){pz=e.wasm.cwrap(ba,null,["number","number","number","number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:a}=e,{varianceEpsilon:r}=a,{x:o,mean:i,variance:s,offset:c,scale:u}=n,l=t.dataIdMap.get(o.dataId).id,d=t.dataIdMap.get(i.dataId).id,p=t.dataIdMap.get(s.dataId).id,h=null!=c?t.dataIdMap.get(c.dataId).id:0,f=null!=u?t.dataIdMap.get(u.dataId).id:0,m=t.makeOutput(o.shape,o.dtype);if(0===It(o.shape))return m;const g=t.dataIdMap.get(m.dataId).id;return pz(l,d,p,h,f,r,g),m}};let fz;const mz={kernelName:bo,backendName:"wasm",setupFunc:function(e){fz=e.wasm.cwrap(bo,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,attrs:n,backend:a}=e,{x:r,filter:o,bias:i,preluActivationWeights:s}=t,{strides:c,pad:u,dilations:l,dataFormat:d,dimRoundingMode:p,activation:h,leakyreluAlpha:f}=n,m=ju(r.shape,o.shape,c,l,u,p),g=yP[h];if(null==g)throw new Error("".concat(h," activation not yet supported for FusedConv2D ")+"in the wasm backend.");const y=a.dataIdMap.get(r.dataId).id,b=a.dataIdMap.get(o.dataId).id,x=m.outChannels;let v=0;if(null!=i){const e=a.dataIdMap.get(i.dataId);if(1!==e.shape.length)throw new Error("FusedConv2D only supports rank-1 bias but got "+"rank ".concat(e.shape.length,"."));if(e.shape[0]!==x)throw new Error("FusedConv2D bias shape (".concat(e.shape,") does not ")+"match the number of output channels (".concat(x,")"));v=e.id}const w=m.filterHeight,k=m.filterWidth,S=m.padInfo.top,C=m.padInfo.right,I=m.padInfo.bottom,N=m.padInfo.left,T=m.dilationHeight,_=m.dilationWidth,E=m.strideHeight,R=m.strideWidth,A=m.inChannels,O="SAME"===m.padInfo.type?1:0,F=m.batchSize,D=m.inHeight,M=m.inWidth;if("NHWC"!==d)throw new Error("wasm backend FusedConv2D does not support dataFormat:'"+"".concat(d,"'. Please use 'NHWC'."));const P=a.makeOutput(m.outShape,"float32"),L=a.dataIdMap.get(P.dataId).id,z=null==s?0:a.dataIdMap.get(s.dataId).id;return fz(y,F,D,M,b,w,k,v,S,C,I,N,O,T,_,E,R,A,x,g,z,f||0,L),P}};let gz;const yz={kernelName:xo,backendName:"wasm",setupFunc:function(e){gz=e.wasm.cwrap(xo,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,attrs:n,backend:a}=e,{x:r,filter:o,bias:i,preluActivationWeights:s}=t,{strides:c,pad:u,dilations:l,dataFormat:d,dimRoundingMode:p,activation:h,leakyreluAlpha:f}=n,m=ju(r.shape,o.shape,c,l,u,p,!0),g=yP[h];if(null==g)throw new Error("".concat(h," activation not yet supported for FusedDepthwiseConv2D ")+"in the wasm backend.");const y=a.dataIdMap.get(r.dataId).id,b=a.dataIdMap.get(o.dataId).id,x=m.outChannels;let v=0;if(null!=i){const e=a.dataIdMap.get(i.dataId);if(1!==e.shape.length)throw new Error("FusedDepthwiseConv2D only supports rank-1 bias but got "+"rank ".concat(e.shape.length,"."));if(e.shape[0]!==x)throw new Error("FusedDepthwiseConv2D bias shape (".concat(e.shape,") does not ")+"match the number of output channels (".concat(x,")"));v=e.id}const w=m.filterHeight,k=m.filterWidth,S=m.padInfo.top,C=m.padInfo.right,I=m.padInfo.bottom,N=m.padInfo.left,T=m.dilationHeight,_=m.dilationWidth,E=m.strideHeight,R=m.strideWidth,A=m.inChannels,O="SAME"===m.padInfo.type?1:0,F=m.batchSize,D=m.inHeight,M=m.inWidth;if("NHWC"!==d)throw new Error("wasm backend FusedDepthwiseConv2D does not support dataFormat:'"+"".concat(d,"'. Please use 'NHWC'."));const P=a.makeOutput(m.outShape,"float32"),L=a.dataIdMap.get(P.dataId).id,z=null==s?0:a.dataIdMap.get(s.dataId).id;return gz(y,F,D,M,b,w,k,v,S,C,I,N,O,T,_,E,R,A,x,g,z,f||0,L),P}};let bz;const xz={kernelName:va,backendName:"wasm",setupFunc:function(e){bz=e.wasm.cwrap(va,null,["number","number","number","number","number","number","array","number"])},kernelFunc:function(e){const{backend:t,inputs:n}=e,{params:a,indices:r}=n,[o,i,s,c]=su(a,r),u=t.makeOutput(o,a.dtype);if(0===i)return u;const l=r.shape,d=l[l.length-1],p=t.dataIdMap.get(a.dataId).id,h=t.dataIdMap.get(r.dataId).id,f=new Uint8Array(new Int32Array(c).buffer),m=t.dataIdMap.get(u.dataId).id;return bz(p,gP[a.dtype],h,i,d,s,f,m),u}};let vz;const wz={kernelName:xa,backendName:"wasm",setupFunc:function(e){vz=e.wasm.cwrap("Gather",null,["number","number","array","number","number","number","array","number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:a}=e,{x:r,indices:o}=n,{axis:i,batchDims:s}=a,c=Ft(i,r.shape)[0],u=t.readSync(o.dataId),l=r.shape[c];for(let S=0;S<u.length;++S){const e=u[S];kt(e<=l-1&&e>=0,(()=>"GatherV2: the index value ".concat(e," is not in [0, ").concat(l-1,"]")))}const d=Xm(r,o,c,s),p=eL({inputs:{x:r},attrs:{shape:[d.batchSize,d.outerSize,d.dimSize,d.sliceSize]},backend:t}),h=It(o.shape),f=eL({inputs:{x:o},attrs:{shape:[d.batchSize,h/d.batchSize]},backend:t}),m=[d.batchSize,d.outerSize,h/d.batchSize,d.sliceSize],g=t.makeOutput(m,r.dtype);if(0===It(r.shape))return g;const y=p.shape.length-1,b=t.dataIdMap.get(p.dataId).id,x=t.dataIdMap.get(f.dataId).id,v=t.dataIdMap.get(g.dataId).id,w=new Uint8Array(new Int32Array(Gt(p.shape)).buffer),k=new Uint8Array(new Int32Array(Gt(m)).buffer);return vz(b,gP[r.dtype],w,y,x,d.batchSize,k,v),t.disposeData(p.dataId),t.disposeData(f.dataId),g.shape=d.outputShape,g}},kz=CP(wa,0,"bool"),Sz=CP(ka,0,"bool"),Cz=vP(Na,"bool"),Iz=vP(Ta,"bool"),Nz=vP(_a,"bool");let Tz;const _z={kernelName:Ea,backendName:"wasm",setupFunc:function(e){Tz=e.wasm.cwrap(Ea,null,["number","number","number","number"])},kernelFunc:function(e){const{inputs:{x:t},attrs:{alpha:n},backend:a}=e,r=a.dataIdMap.get(t.dataId).id,o=a.makeOutput(t.shape,"float32");if(0!==It(t.shape)){const e=a.dataIdMap.get(o.dataId).id;Tz(r,gP[t.dtype],n,e)}return o}},Ez=CP(Ra,0,"bool"),Rz=CP(Aa,0,"bool");let Az;const Oz={kernelName:Oa,backendName:"wasm",setupFunc:function(e){Az=e.wasm.cwrap(Oa,null,["number","number","number","number"])},kernelFunc:function(e){const{attrs:t,backend:n}=e,{start:a,stop:r,num:o}=t,i=Math.floor(o),s=n.makeOutput([i],"float32");return Az(n.dataIdMap.get(s.dataId).id,a,r,i),s}},Fz=vP(Fa),Dz=vP(Da),Mz=CP(Ma,0,"bool"),Pz=vP(Pa),Lz=CP(La,0,"bool"),zz=CP("LogicalXor",0,"bool");let Bz;const Wz={kernelName:za,backendName:"wasm",setupFunc:function(e){Bz=e.wasm.cwrap(za,null,["number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{depthRadius:o,bias:i,alpha:s,beta:c}=a;if("float32"!==r.dtype)throw new Error("LRN error: x must have dtype float32");const u=n.makeOutput(r.shape,r.dtype);return Bz(n.dataIdMap.get(r.dataId).id,n.dataIdMap.get(u.dataId).id,r.shape[3],o,i,s,c),u}};let Uz;const Vz={kernelName:Ba,backendName:"wasm",setupFunc:function(e){Uz=e.wasm.cwrap(Ba,null,["number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,y:o,dy:i}=t,{depthRadius:s,bias:c,alpha:u,beta:l}=a;if("float32"!==r.dtype||"float32"!==o.dtype||"float32"!==i.dtype)throw new Error("LRNGrad error: x, y, and dy must have dtype float32");const d=n.makeOutput(r.shape,r.dtype);return Uz(n.dataIdMap.get(r.dataId).id,n.dataIdMap.get(o.dataId).id,n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(d.dataId).id,i.shape[3],s,c,u,l),d}};let Gz;const Hz={kernelName:Wa,backendName:"wasm",setupFunc:function(e){Gz=e.wasm.cwrap(Wa,null,["number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:a}=e,{reductionIndices:r,keepDims:o}=a,{x:i}=n;let s=t.dataIdMap.get(i.dataId).id,c=i;const{transposed:u,axes:l,originalAxes:d,inputWasTransposed:p}=FP(i,r,t);if(p){c=u,s=t.dataIdMap.get(u.dataId).id}td("max",l,c.shape.length);const[h,f]=Jl(c.shape,l),m=It(f),g=t.makeOutput(h,i.dtype);if(0!==It(c.shape)){const e=t.dataIdMap.get(g.dataId).id;Gz(s,gP[i.dtype],m,e)}if(p&&t.disposeData(u.dataId),o){const e=ed(g.shape,d);g.shape=e}return g}},jz=CP(Ua);let Kz;const qz={kernelName:Va,backendName:"wasm",setupFunc:function(e){Kz=e.wasm.cwrap(Va,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,attrs:n,backend:a}=e,r=t.x,o=a.dataIdMap.get(r.dataId).id;kt("float32"===r.dtype,(()=>"Error in MaxPool: only float32 input is supported. Got ".concat(r.dtype,".")));const{filterSize:i,strides:s,pad:c,dimRoundingMode:u}=n,l=Gu(r.shape,i,s,1,c,u),d=l.filterHeight,p=l.filterWidth,h=l.padInfo.top,f=l.padInfo.right,m=l.padInfo.bottom,g=l.padInfo.left,y=l.dilationHeight,b=l.dilationWidth,x=l.strideHeight,v=l.strideWidth,w=l.inChannels,k=l.outChannels;if("channelsLast"!==l.dataFormat)throw new Error("wasm backend does not support dataFormat:'"+"".concat(l.dataFormat,"'. Please use 'channelsLast'."));const S=a.makeOutput(l.outShape,"float32"),C=a.dataIdMap.get(S.dataId).id;return Kz(o,r.shape[0],r.shape[1],r.shape[2],d,p,h,f,m,g,y,b,x,v,w,k,C),S}};let Xz;const Yz={kernelName:Ha,backendName:"wasm",setupFunc:function(e){Xz=e.wasm.cwrap("MaxPool3D",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{filterSize:o,strides:i,pad:s,dimRoundingMode:c,dataFormat:u}=a,l=Hu(r.shape,o,i,1,s,c,u),d=n.makeOutput(l.outShape,r.dtype);return Xz(n.dataIdMap.get(r.dataId).id,n.dataIdMap.get(d.dataId).id,l.batchSize,l.inChannels,l.inDepth,l.inHeight,l.inWidth,l.outDepth,l.outHeight,l.outWidth,l.strideDepth,l.strideHeight,l.strideWidth,l.dilationDepth,l.dilationHeight,l.dilationWidth,l.effectiveFilterDepth,l.effectiveFilterHeight,l.effectiveFilterWidth,l.padInfo.front,l.padInfo.top,l.padInfo.left),d}};let Qz;const Zz={kernelName:ja,backendName:"wasm",setupFunc:function(e){Qz=e.wasm.cwrap("MaxPool3DGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:r,input:o}=t,{filterSize:i,strides:s,pad:c,dimRoundingMode:u}=a,l=Hu(o.shape,i,s,1,c,u),d=n.makeOutput(o.shape,o.dtype);return Qz(n.dataIdMap.get(o.dataId).id,n.dataIdMap.get(r.dataId).id,n.dataIdMap.get(d.dataId).id,l.batchSize,l.inChannels,l.inDepth,l.inHeight,l.inWidth,l.outDepth,l.outHeight,l.outWidth,l.strideDepth,l.strideHeight,l.strideWidth,l.dilationDepth,l.dilationHeight,l.dilationWidth,l.effectiveFilterDepth,l.effectiveFilterHeight,l.effectiveFilterWidth,l.padInfo.front,l.padInfo.top,l.padInfo.left),d}};let $z;const Jz={kernelName:Ga,backendName:"wasm",setupFunc:function(e){$z=e.wasm.cwrap("MaxPoolGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:r,input:o}=t,{filterSize:i,strides:s,pad:c,dimRoundingMode:u}=a,l=Gu(o.shape,i,s,1,c,u),d=n.makeOutput(o.shape,o.dtype);return $z(n.dataIdMap.get(o.dataId).id,n.dataIdMap.get(r.dataId).id,n.dataIdMap.get(d.dataId).id,l.batchSize,l.inChannels,l.inHeight,l.inWidth,l.outHeight,l.outWidth,l.strideHeight,l.strideWidth,l.dilationHeight,l.dilationWidth,l.effectiveFilterHeight,l.effectiveFilterWidth,l.padInfo.top,l.padInfo.left),d}};let eB;const tB={kernelName:Ka,backendName:"wasm",setupFunc:function(e){eB=e.wasm.cwrap("MaxPoolWithArgmax",null,["number","number","number","number","boolean","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{filterSize:o,strides:i,pad:s,includeBatchInIndex:c}=a;kt(4===r.shape.length,(()=>"Error in maxPool: input must be rank 4 but got rank ".concat(r.shape.length,".")));const u=[1,1];kt(Ju(i,u),(()=>"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(u,"'")));const l=Gu(r.shape,o,i,[1,1],s),d=n.makeOutput(l.outShape,r.dtype),p=n.makeOutput(l.outShape,"int32");return eB(n.dataIdMap.get(r.dataId).id,n.dataIdMap.get(d.dataId).id,n.dataIdMap.get(p.dataId).id,gP[r.dtype],c,l.batchSize,l.inChannels,l.inHeight,l.inWidth,l.outHeight,l.outWidth,l.strideHeight,l.strideWidth,l.dilationHeight,l.dilationWidth,l.effectiveFilterHeight,l.effectiveFilterWidth,l.padInfo.top,l.padInfo.left),[d,p]}};let nB;const aB={kernelName:qa,backendName:"wasm",setupFunc:function(e){nB=e.wasm.cwrap(qa,null,["number, number, number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:a}=e,{axis:r,keepDims:o}=a,{x:i}=n,s=t.dataIdMap.get(i.dataId).id;let c=s,u=i;const{transposed:l,axes:d,originalAxes:p,inputWasTransposed:h}=FP(i,r,t);let f=d;if(h){const e=t.dataIdMap.get(l.dataId).id;e!==s&&(u=l,c=e,f=rd(f.length,u.shape.length))}td("mean",f,u.shape.length);const[m,g]=Jl(u.shape,f),y=It(g);let b=u;"float32"!==u.dtype&&(b=dL({backend:t,inputs:{x:u},attrs:{dtype:"float32"}}),c=t.dataIdMap.get(b.dataId).id);const x=t.makeOutput(m,"float32");if(0!==It(u.shape)){const e=t.dataIdMap.get(x.dataId).id;nB(c,y,e)}if(h&&t.disposeData(l.dataId),o){const e=ed(x.shape,p);x.shape=e}return"float32"!==u.dtype&&t.disposeData(b.dataId),x}};let rB;const oB={kernelName:Xa,backendName:"wasm",setupFunc:function(e){rB=e.wasm.cwrap(Xa,null,["number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:a}=e,{axis:r,keepDims:o}=a,{x:i}=n,s=t.dataIdMap.get(i.dataId).id;let c=s,u=i;const{transposed:l,axes:d,originalAxes:p,inputWasTransposed:h}=FP(i,r,t);if(h){const e=t.dataIdMap.get(l.dataId).id;e!==s&&(u=l,c=e)}td("min",d,u.shape.length);const[f,m]=Jl(u.shape,d),g=It(m),y=t.makeOutput(f,u.dtype);if(0!==It(u.shape)){const e=t.dataIdMap.get(y.dataId).id;rB(c,gP[i.dtype],g,e)}if(h&&t.disposeData(l.dataId),o){const e=ed(y.shape,p);y.shape=e}return y}},iB=CP(Ya);var sB;let cB;!function(e){e[e.reflect=0]="reflect",e[e.symmetric=1]="symmetric"}(sB||(sB={}));const uB={kernelName:Qa,backendName:"wasm",kernelFunc:function(e){const{inputs:{x:t},backend:n,attrs:{paddings:a,mode:r}}=e,o=a.map(((e,n)=>e[0]+t.shape[n]+e[1])),i=n.dataIdMap.get(t.dataId).id,s=n.makeOutput(o,t.dtype),c=n.dataIdMap.get(s.dataId).id,u=new Uint8Array(new Int32Array(t.shape).buffer),l=a.map((e=>e[0])),d=a.map((e=>e[1])),p=new Uint8Array(new Int32Array(l).buffer),h=new Uint8Array(new Int32Array(d).buffer);return cB(i,u,t.shape.length,gP[t.dtype],p,h,sB[r],c),s},setupFunc:function(e){cB=e.wasm.cwrap(Qa,null,["number","array","number","number","array","array","number","number"])}};let lB;function dB(e){const{backend:t,inputs:{logits:n},attrs:{dim:a}}=e,r=t.dataIdMap.get(n.dataId).id,o=t.makeOutput(n.shape,n.dtype),i=t.dataIdMap.get(o.dataId).id,s=n.shape[a],c=It(n.shape)/s;return 0===It(o.shape)||lB(r,i,s,c),o}const pB={kernelName:Gr,backendName:"wasm",setupFunc:function(e){lB=e.wasm.cwrap(Gr,null,["number","number","number","number"])},kernelFunc:dB};let hB;const fB={kernelName:$a,backendName:"wasm",setupFunc:function(e){hB=e.wasm.cwrap($a,null,["number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{logits:r}=t,{numSamples:o,seed:i,normalized:s}=a;if("float32"!==r.dtype)throw new Error("Tensor logits must have dtype float32, got ".concat(r.dtype));const c=s?r:dB({inputs:{logits:r},backend:n,attrs:{dim:r.shape.length-1}}),[u,l]=c.shape,d=n.makeOutput([u,o],"int32");return hB(n.dataIdMap.get(c.dataId).id,u,l,o,i,n.dataIdMap.get(d.dataId).id),s||n.disposeData(c.dataId),d}},mB=CP(Za),gB=CP(Ja),yB=vP(er);function bB(e,t){const n=new Int32Array(e.wasm.HEAPU8.buffer,t,4),a=n[0],r=n[1],o=n[2],i=n[3];return e.wasm._free(t),{pSelectedIndices:a,selectedSize:r,pSelectedScores:o,pValidOutputs:i}}let xB;const vB={kernelName:nr,backendName:"wasm",setupFunc:function(e){xB=e.wasm.cwrap(nr,"number",["number","number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:a}=e,{iouThreshold:r,maxOutputSize:o,scoreThreshold:i}=a,{boxes:s,scores:c}=n,u=t.dataIdMap.get(s.dataId).id,l=t.dataIdMap.get(c.dataId).id,d=xB(u,l,o,r,i),{pSelectedIndices:p,selectedSize:h,pSelectedScores:f,pValidOutputs:m}=bB(t,d);return t.wasm._free(f),t.wasm._free(m),t.makeOutput([h],"int32",p)}};let wB;const kB={kernelName:ar,backendName:"wasm",setupFunc:function(e){wB=e.wasm.cwrap(ar,"number",["number","number","number","number","number","bool"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:a}=e,{iouThreshold:r,maxOutputSize:o,scoreThreshold:i,padToMaxOutputSize:s}=a,{boxes:c,scores:u}=n,l=t.dataIdMap.get(c.dataId).id,d=t.dataIdMap.get(u.dataId).id,p=wB(l,d,o,r,i,s),{pSelectedIndices:h,selectedSize:f,pSelectedScores:m,pValidOutputs:g}=bB(t,p);return t.wasm._free(m),[t.makeOutput([f],"int32",h),t.makeOutput([],"int32",g)]}};let SB;const CB={kernelName:rr,backendName:"wasm",setupFunc:function(e){SB=e.wasm.cwrap(rr,"number",["number","number","number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:a}=e,{iouThreshold:r,maxOutputSize:o,scoreThreshold:i,softNmsSigma:s}=a,{boxes:c,scores:u}=n,l=t.dataIdMap.get(c.dataId).id,d=t.dataIdMap.get(u.dataId).id,p=SB(l,d,o,r,i,s),{pSelectedIndices:h,selectedSize:f,pSelectedScores:m,pValidOutputs:g}=bB(t,p);return t.wasm._free(g),[t.makeOutput([f],"int32",h),t.makeOutput([f],"float32",m)]}},IB=CP(tr,0,"bool");let NB;const TB={kernelName:ir,backendName:"wasm",setupFunc:function(e){NB=e.wasm.cwrap(ir,null,["number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{indices:r}=t,{dtype:o,depth:i,onValue:s,offValue:c}=a,u=n.makeOutput([...r.shape,i],o),l=n.dataIdMap.get(u.dataId).id,d=n.dataIdMap.get(r.dataId).id;return NB(d,i,s,c,l),u}};const _B={kernelName:or,backendName:"wasm",kernelFunc:function(e){const{inputs:{x:t},backend:n}=e,a=n.makeOutput(t.shape,t.dtype);return n.typedArrayFromHeap(a).fill(1),a}};const EB={kernelName:sr,backendName:"wasm",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{axis:r}=a;if(1===t.length)return az({inputs:{input:t[0]},backend:n,attrs:{dim:r}});const o=t[0].shape,i=t[0].dtype;t.forEach((e=>{St(o,e.shape,"All tensors passed to stack must have matching shapes"),kt(i===e.dtype,(()=>"All tensors passed to stack must have matching dtypes"))}));const s=[],c=gL({inputs:t.map((e=>{const t=az({inputs:{input:e},backend:n,attrs:{dim:r}});return s.push(t),t})),backend:n,attrs:{axis:r}});return s.forEach((e=>n.disposeData(e.dataId))),c}};let RB;const AB={kernelName:cr,backendName:"wasm",kernelFunc:function(e){const{inputs:{x:t},backend:n,attrs:{paddings:a,constantValue:r}}=e,o=a.map(((e,n)=>e[0]+t.shape[n]+e[1]));if(0===It(t.shape))return iz({backend:n,attrs:{shape:o,value:r,dtype:t.dtype}});const i=n.dataIdMap.get(t.dataId).id,s=n.makeOutput(o,t.dtype),c=n.dataIdMap.get(s.dataId).id,u=new Uint8Array(new Int32Array(t.shape).buffer),l=a.map((e=>e[0])),d=a.map((e=>e[1])),p=new Uint8Array(new Int32Array(l).buffer),h=new Uint8Array(new Int32Array(d).buffer);return RB(i,u,t.shape.length,gP[t.dtype],p,h,r,c),s},setupFunc:function(e){RB=e.wasm.cwrap(cr,null,["number","array","number","number","array","array","number","number"])}},OB=CP(ur);let FB;const DB={kernelName:lr,backendName:"wasm",setupFunc:function(e){FB=e.wasm.cwrap(lr,null,["number","number","number"])},kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:a,alpha:r}=t,o=n.dataIdMap.get(a.dataId).id,i=n.dataIdMap.get(r.dataId).id;let s=o;const c=a;let u=c;"float32"!==c.dtype&&(u=dL({backend:n,inputs:{x:a},attrs:{dtype:"float32"}}),s=n.dataIdMap.get(u.dataId).id);const l=n.makeOutput(a.shape,"float32"),d=n.dataIdMap.get(l.dataId).id;return FB(s,i,d),"float32"!==c.dtype&&n.disposeData(u.dataId),l}};let MB;const PB={kernelName:dr,backendName:"wasm",setupFunc:function(e){MB=e.wasm.cwrap(dr,null,["number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:a}=e,{axis:r,keepDims:o}=a,{x:i}=n,s=t.dataIdMap.get(i.dataId).id;let c=s,u=i;const{transposed:l,axes:d,originalAxes:p,inputWasTransposed:h}=FP(i,r,t);let f=d;if(h){const e=t.dataIdMap.get(l.dataId).id;e!==s&&(u=l,c=e,f=rd(f.length,u.shape.length))}td("prod",f,u.shape.length);const[m,g]=Jl(u.shape,f),y=It(g),b=t.makeOutput(m,u.dtype);if(0!==It(u.shape)){const e=t.dataIdMap.get(b.dataId).id;MB(c,y,gP[b.dtype],e)}if(h&&t.disposeData(l.dataId),o){const e=ed(b.shape,p);b.shape=e}return b}},LB={kernelName:mr,backendName:"wasm",kernelFunc:e=>{const{backend:t,attrs:n}=e,{start:a,stop:r,step:o,dtype:i}=n,s=wb(a,r,o,i),c=t.makeOutput([s.length],i);return t.typedArrayFromHeap(c).set(s),c}},zB=CP(ra),BB=vP(yr),WB=vP(br),UB=vP(Cr);let VB;const GB={kernelName:kr,backendName:"wasm",setupFunc:function(e){VB=e.wasm.cwrap(kr,null,["number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:a}=e,{images:r}=n,{alignCorners:o,halfPixelCenters:i,size:s}=a,[c,u]=s,[l,d,p,h]=r.shape,f=[l,c,u,h];let m,g=t.dataIdMap.get(r.dataId);"float32"!==g.dtype&&(m=dL({backend:t,inputs:{x:r},attrs:{dtype:"float32"}}),g=t.dataIdMap.get(m.dataId));const y=g.id,b=t.makeOutput(f,"float32");if(0===It(r.shape))return b;const x=t.dataIdMap.get(b.dataId).id;return VB(y,l,d,p,h,c,u,o?1:0,i?1:0,x),null!=m&&t.disposeData(m.dataId),b}};let HB;const jB={kernelName:Sr,backendName:"wasm",setupFunc:function(e){HB=e.wasm.cwrap(Sr,null,["number","number","number","array","array","boolean"])},kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{images:r,dy:o}=t,{alignCorners:i}=a,s=n.makeOutput(r.shape,"float32");let c,u=n.dataIdMap.get(r.dataId);return"float32"!==u.dtype&&(c=dL({backend:n,inputs:{x:r},attrs:{dtype:"float32"}}),u=n.dataIdMap.get(c.dataId)),HB(n.dataIdMap.get(r.dataId).id,n.dataIdMap.get(o.dataId).id,n.dataIdMap.get(s.dataId).id,new Uint8Array(new Int32Array(r.shape).buffer),new Uint8Array(new Int32Array(o.shape).buffer),i),null!=c&&n.disposeData(c.dataId),s}};let KB;const qB={kernelName:vr,backendName:"wasm",setupFunc:function(e){KB=e.wasm.cwrap(vr,null,["number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:a}=e,{images:r}=n,{alignCorners:o,halfPixelCenters:i,size:s}=a,[c,u]=s,[l,d,p,h]=r.shape,f=[l,c,u,h],m=t.makeOutput(f,"float32");if(0===It(r.shape))return m;let g,y=t.dataIdMap.get(r.dataId);"float32"!==y.dtype&&(g=dL({backend:t,inputs:{x:r},attrs:{dtype:"float32"}}),y=t.dataIdMap.get(g.dataId));const b=y.id,x=t.dataIdMap.get(m.dataId).id;return KB(b,l,d,p,h,c,u,o?1:0,i?1:0,x),null!=g&&t.disposeData(g.dataId),m}};let XB;const YB={kernelName:wr,backendName:"wasm",setupFunc:function(e){XB=e.wasm.cwrap(wr,null,["number","number","number","array","array","boolean"])},kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{images:r,dy:o}=t,{alignCorners:i}=a,s=n.makeOutput(r.shape,"float32");let c,u=n.dataIdMap.get(r.dataId);return"float32"!==u.dtype&&(c=dL({backend:n,inputs:{x:r},attrs:{dtype:"float32"}}),u=n.dataIdMap.get(c.dataId)),XB(n.dataIdMap.get(r.dataId).id,n.dataIdMap.get(o.dataId).id,n.dataIdMap.get(s.dataId).id,new Uint8Array(new Int32Array(r.shape).buffer),new Uint8Array(new Int32Array(o.shape).buffer),i),null!=c&&n.disposeData(c.dataId),s}};let QB;const ZB={kernelName:Ir,backendName:"wasm",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{dims:o}=a,i=Ft(o,r.shape);if(0===r.shape.length)return _P({inputs:{x:r},backend:n});const s=n.makeOutput(r.shape,r.dtype),c=n.dataIdMap.get(r.dataId).id,u=n.dataIdMap.get(s.dataId).id,l=new Uint8Array(new Int32Array(i).buffer),d=new Uint8Array(new Int32Array(r.shape).buffer);QB(c,l,i.length,d,r.shape.length,u);const p=eL({inputs:{x:s},attrs:{shape:r.shape},backend:n});return n.disposeData(s.dataId),p},setupFunc:function(e){QB=e.wasm.cwrap(Ir,null,["number","array","number","array","number","number"])}};let $B;const JB={kernelName:go,backendName:"wasm",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{image:r}=t,{radians:o,fillValue:i,center:s}=a,c=n.makeOutput(r.shape,r.dtype),u=n.dataIdMap.get(r.dataId).id,l=n.dataIdMap.get(c.dataId).id,[d,p,h,f]=r.shape,[m,g]=tm(s,p,h),y="number"===typeof i?[i,i,i,0===i?0:255]:[...i,255],b=new Uint8Array(new Int32Array(y).buffer);return $B(u,d,p,h,f,o,m,g,b,y.length,l),c},setupFunc:function(e){$B=e.wasm.cwrap(go,null,["number","number","number","number","number","number","number","number","array","number","number"])}},eW=vP(Nr),tW=vP(Tr);let nW;const aW={kernelName:_r,backendName:"wasm",setupFunc:function(e){nW=e.wasm.cwrap(_r,null,["number","number","number","number","number","number","array","number","number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:a}=e,{indices:r,updates:o}=n,{shape:i}=a,s=t.makeOutput(i,o.dtype);if(0===It(i))return s;const{sliceRank:c,numUpdates:u,sliceSize:l,strides:d,outputSize:p}=lu(0,r,i),h=t.dataIdMap.get(r.dataId).id,f=t.dataIdMap.get(o.dataId).id,m=new Uint8Array(new Int32Array(d).buffer),g=t.dataIdMap.get(s.dataId).id;return nW(h,f,gP[o.dtype],c,u,l,m,p,g),s}};let rW;const oW={kernelName:Rr,backendName:"wasm",setupFunc:function(e){rW=e.wasm.cwrap(Rr,null,["number","number","number","number","number","number","bool","number"])},kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{sortedSequence:r,values:o}=t,{side:i}=a;if(r.dtype!==o.dtype)throw new Error("SearchSorted error: sorted_sequence must have the same dtype as values. Got ".concat(r.dtype," and ").concat(o.dtype));const s=n.makeOutput(o.shape,"int32");function c(e){return n.dataIdMap.get(e.dataId).id}return rW(c(r),c(o),r.shape[0],r.shape[1],o.shape[1],gP[r.dtype],"left"===i,c(s)),s}};let iW;const sW={kernelName:Ar,backendName:"wasm",kernelFunc:function(e){const{inputs:t,backend:n}=e,{condition:a,t:r,e:o}=t,i=n.dataIdMap.get(a.dataId).id,s=n.dataIdMap.get(r.dataId).id,c=n.dataIdMap.get(o.dataId).id,u=n.makeOutput(r.shape,r.dtype),l=n.dataIdMap.get(u.dataId).id,d=a.shape.length,p=r.shape.length,h=0===d||d>1||1===p?1:It(r.shape.slice(1));return iW(i,s,c,h,l),u},setupFunc:function(e){iW=e.wasm.cwrap("SelectV2",null,["number","number","number","number","number"])}},cW=vP(Or);let uW;const lW={kernelName:"Sigmoid",backendName:"wasm",setupFunc:function(e){uW=e.wasm.cwrap(Lr,null,["number","number"])},kernelFunc:function(e){const{backend:t,inputs:{x:n}}=e,a=t.dataIdMap.get(n.dataId).id,r=t.makeOutput(n.shape,n.dtype),o=t.dataIdMap.get(r.dataId).id;return 0===It(r.shape)||uW(a,o),r}},dW=vP(Pr),pW=vP(Dr),hW=vP(Mr),fW=vP(zr);const mW={kernelName:Ur,backendName:"wasm",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{blockShape:o,paddings:i}=a,s=It(o),c=[[0,0]];c.push(...i);for(let g=1+o.length;g<r.shape.length;++g)c.push([0,0]);const u=AB.kernelFunc({inputs:{x:r},backend:n,attrs:{paddings:c,constantValue:0}}),l=nm(u.shape,o,s,!1),d=am(l.length,o.length,!1),p=rm(u.shape,o,s,!1),h=eL({inputs:{x:u},backend:n,attrs:{shape:l}}),f=AP({inputs:{x:h},backend:n,attrs:{perm:d}}),m=eL({inputs:{x:f},backend:n,attrs:{shape:p}});return n.disposeData(u.dataId),n.disposeData(h.dataId),n.disposeData(f.dataId),m}};let gW;const yW={kernelName:Hr,backendName:"wasm",setupFunc:function(e){gW=e.wasm.cwrap("SparseFillEmptyRows","number",["number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:n}=e,{indices:a,values:r,denseShape:o,defaultValue:i}=n,s=a.shape[0],c=a.shape[1],u=t.readSync(o.dataId)[0],l=[s+u,c],d=t.dataIdMap.get(a.dataId).id,p=t.dataIdMap.get(r.dataId).id,h=t.dataIdMap.get(i.dataId).id,f=t.makeOutput(l,a.dtype),m=t.dataIdMap.get(f.dataId).id,g=t.makeOutput(l.slice(0,1),r.dtype),y=t.dataIdMap.get(g.dataId).id,b=t.makeOutput([u],"bool"),x=t.dataIdMap.get(b.dataId).id,v=t.makeOutput([s],a.dtype),w=t.dataIdMap.get(v.dataId).id,k=t.makeOutput([4],"int32"),S=t.dataIdMap.get(k.dataId).id,C=gW(d,p,gP[r.dtype],s,u,c,h,m,y,x,w,S),I=t.readSync(k.dataId);let N;switch(I[0]){case 1:N=Dm(I[1]);break;case 2:N=Mm(I[1],I[2]);break;case 3:N=Pm(I[1],I[2],I[3]);break;default:N=""}if(t.disposeData(k.dataId),N)throw t.disposeData(f.dataId),t.disposeData(g.dataId),t.disposeData(b.dataId),t.disposeData(v.dataId),new Error(N);let T=f,_=g;return C!==l[0]&&(T=rL({inputs:{x:f},attrs:{begin:0,size:[C,c]},backend:t}),_=rL({inputs:{x:g},attrs:{begin:0,size:C},backend:t}),t.disposeData(f.dataId),t.disposeData(g.dataId)),[T,_,b,v]}};let bW;const xW={kernelName:jr,backendName:"wasm",setupFunc:function(e){bW=e.wasm.cwrap(jr,null,["number","number","number","number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:n}=e,{inputIndices:a,inputShape:r,newShape:o}=n;if(2!==a.shape.length)throw new Error("Input indices should be a matrix but received shape\n        ".concat(a.shape));if(1!==r.shape.length)throw new Error("Input shape should be a vector but received shape\n        ".concat(r.shape));if(1!==o.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(o.shape));const i=t.dataIdMap.get(a.dataId).id,s=t.dataIdMap.get(r.dataId).id,c=t.dataIdMap.get(o.dataId).id,u=a.shape[0],l=It(o.shape),d=t.makeOutput([u,l],a.dtype),p=t.dataIdMap.get(d.dataId).id,h=t.makeOutput([l],o.dtype),f=t.dataIdMap.get(h.dataId).id,m=t.makeOutput([3],"int32"),g=t.dataIdMap.get(m.dataId).id;bW(i,s,c,u,p,f,g);const y=t.readSync(m.dataId);let b;switch(y[0]){case 0:b=Lm(y[1],y[2]);break;case 1:b=zm(y[1],y[2]);break;case 2:b="reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero";break;case 3:b=Wm(Array.from(t.readSync(r.dataId)),Array.from(t.readSync(h.dataId)));break;case 4:b=Um(Array.from(t.readSync(r.dataId)),Array.from(t.readSync(h.dataId)));break;default:b=""}if(t.disposeData(m.dataId),b)throw t.disposeData(d.dataId),t.disposeData(h.dataId),new Error(b);return[d,h]}};let vW;function wW(e){vW=e.wasm.cwrap("SparseSegmentReduction",null,["number","number","number","number","number","number","number","number","number"])}function kW(e,t){const{backend:n,inputs:a}=e,{data:r,indices:o,segmentIds:i}=a,s=o.shape[0],c=n.readSync(i.dataId,s-1,s)[0],u=s>0?c+1:0;if(u<0)throw new Error("segment ids must be >= 0");const l=r.shape.slice();l[0]=u;const d=n.dataIdMap.get(r.dataId).id,p=n.dataIdMap.get(o.dataId).id,h=n.dataIdMap.get(i.dataId).id,f=n.makeOutput(l,r.dtype),m=n.dataIdMap.get(f.dataId).id,g=n.makeOutput([4],"int32"),y=n.dataIdMap.get(g.dataId).id;vW(d,gP[r.dtype],r.shape[0],p,h,m,y,t,0);const b=n.readSync(g.dataId);let x;switch(b[0]){case 0:x="segment ids must be >= 0";break;case 1:x="segment ids are not increasing";break;case 2:x=Hm(b[1],b[2]);break;case 3:x=jm(b[1],b[2],b[3]);break;default:x=""}if(n.disposeData(g.dataId),x)throw n.disposeData(f.dataId),new Error(x);return f}const SW={kernelName:Kr,backendName:"wasm",setupFunc:wW,kernelFunc:function(e){return kW(e,!0)}};const CW={kernelName:qr,backendName:"wasm",setupFunc:wW,kernelFunc:function(e){return kW(e,!1)}};let IW;const NW={kernelName:Xr,backendName:"wasm",setupFunc:function(e){IW=e.wasm.cwrap(Xr,null,["number","number","number","number","number","number","number","number","array","number","number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:a}=e,{sparseIndices:r,sparseValues:o,defaultValue:i}=n,{outputShape:s}=a,c=t.makeOutput(s,i.dtype);if(0===It(s))return c;const{sliceRank:u,numUpdates:l,sliceSize:d,strides:p,outputSize:h}=lu(0,r,s),f=t.dataIdMap.get(r.dataId).id,m=t.dataIdMap.get(o.dataId).id,g=t.dataIdMap.get(i.dataId).id,y=new Uint8Array(new Int32Array(p).buffer),b=t.dataIdMap.get(c.dataId).id;return IW(f,m,o.shape.length,g,gP[i.dtype],u,l,d,y,h,b),c}};const TW={kernelName:Vr,backendName:"wasm",kernelFunc:function(e){const{inputs:t,attrs:n,backend:a}=e,{x:r}=t,{numOrSizeSplits:o,axis:i}=n,s=Ft(i,r.shape)[0],c=Fm(r,o,s),u=new Array(r.shape.length).fill(0),l=r.shape.slice();return c.map((e=>{const t=[...l];t[s]=e;const n=rL({inputs:{x:r},attrs:{begin:u,size:t},backend:a});return u[s]+=e,n}))}},_W=vP(Br),EW=vP(Qr),RW=CP(Yr);let AW;const OW={kernelName:fo,backendName:"wasm",setupFunc:function(e){AW=e.wasm.cwrap(fo,null,["number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:a}=e,{alpha:r}=a,{x:o}=n,i=t.dataIdMap.get(o.dataId).id,s=t.makeOutput(o.shape,o.dtype),c=t.dataIdMap.get(s.dataId).id;return AW(i,r,gP[o.dtype],c),s}};let FW;const DW={kernelName:$r,backendName:"wasm",setupFunc:function(e){FW=e.wasm.cwrap($r,null,["number","array","number","array","array","array","array","array","number","number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:a}=e,{x:r}=n,{begin:o,end:i,strides:s,beginMask:c,endMask:u,ellipsisMask:l,newAxisMask:d,shrinkAxisMask:p}=a,{finalShapeSparse:h,finalShape:f,isIdentity:m,sliceDim0:g,isSimpleSlice:y,begin:b,end:x,strides:v}=_u(r.shape,o,i,s,c,u,l,d,p);let w;if(m)w=eL({inputs:{x:r},backend:t,attrs:{shape:f}});else if(g||y){kt(r.shape.length>=1,(()=>"Input must have rank at least 1, got: ".concat(r.shape.length)));const e=mu(b,x,v),n=rL({inputs:{x:r},backend:t,attrs:{begin:b,size:e}});w=eL({inputs:{x:n},backend:t,attrs:{shape:f}}),t.disposeData(n.dataId)}else{const e=t.makeOutput(h,"float32"),n=t.dataIdMap.get(r.dataId).id,a=new Uint8Array(new Int32Array(Gt(r.shape)).buffer),o=new Uint8Array(new Int32Array(b).buffer),i=new Uint8Array(new Int32Array(x).buffer),s=new Uint8Array(new Int32Array(v).buffer),c=new Uint8Array(new Int32Array(h).buffer),u=new Uint8Array(new Int32Array(Gt(h)).buffer),l=t.dataIdMap.get(e.dataId).id;FW(n,a,r.shape.length,o,i,s,c,u,h.length,l),w=eL({inputs:{x:e},backend:t,attrs:{shape:f}}),t.disposeData(e.dataId)}return w}};const MW={kernelName:Jr,backendName:"wasm",kernelFunc:function(e){const{backend:t,inputs:n,attrs:a}=e,{data:r,dataSplits:o}=n,{separator:i,nGramWidths:s,leftPad:c,rightPad:u,padWidth:l,preserveShortSequences:d}=a,p=t.readSync(r.dataId),h=t.readSync(o.dataId),[f,m]=Fb(p,h,i,s,c,u,l,d),g=t.makeOutput([f.length],"string");t.dataIdMap.get(g.dataId).stringBytes=f;const y=t.makeOutput(o.shape,"int32");return t.typedArrayFromHeap(y).set(m),[g,y]}};const PW={kernelName:eo,backendName:"wasm",kernelFunc:function(e){const{backend:t,inputs:n,attrs:a}=e,{input:r,delimiter:o}=n,{skipEmpty:i}=a,s=t.readSync(r.dataId),c=t.readSync(o.dataId),[u,l,d]=Mb(s,c[0],i),p=l.length,h=t.makeOutput([p,2],"int32");t.typedArrayFromHeap(h).set(u);const f=t.makeOutput([p],"string");t.dataIdMap.get(f.dataId).stringBytes=l;const m=t.makeOutput([2],"int32");return t.typedArrayFromHeap(m).set(d),[h,f,m]}};const LW={kernelName:to,backendName:"wasm",kernelFunc:function(e){const{backend:t,inputs:n,attrs:a}=e,{input:r}=n,{numBuckets:o}=a,i=Pb(t.readSync(r.dataId),o),s=t.makeOutput(r.shape,"int32");return t.typedArrayFromHeap(s).set(i),s}},zW=CP(no);let BW;const WW={kernelName:Wr,backendName:"wasm",setupFunc:function(e){BW=e.wasm.cwrap(Wr,null,["number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:a}=e,{axis:r,keepDims:o}=a,{x:i}=n,s=t.dataIdMap.get(i.dataId).id;let c=s,u=i;const{transposed:l,axes:d,originalAxes:p,inputWasTransposed:h}=FP(i,r,t);let f=d;if(h){const e=t.dataIdMap.get(l.dataId).id;e!==s&&(u=l,c=e,f=rd(f.length,u.shape.length))}td("sum",f,u.shape.length);const[m,g]=Jl(u.shape,f),y=It(g),b=t.makeOutput(m,u.dtype);if(0!==It(u.shape)){const e=t.dataIdMap.get(b.dataId).id;BW(c,y,gP[b.dtype],e)}if(h&&t.disposeData(l.dataId),o){const e=ed(b.shape,p);b.shape=e}return b}},UW=vP(ao),VW=vP(ro);let GW;const HW={kernelName:Er,backendName:"wasm",setupFunc:function(e){GW=e.wasm.cwrap(Er,null,["number","number","number","number","number","number","array","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:a}=e,{tensor:r,indices:o,updates:i}=n,{}=a,s=t.makeOutput(r.shape,r.dtype);if(0===It(r.shape))return s;const{sliceRank:c,numUpdates:u,sliceSize:l,strides:d,outputSize:p}=lu(0,o,r.shape),h=t.dataIdMap.get(o.dataId).id,f=t.dataIdMap.get(i.dataId).id,m=t.dataIdMap.get(r.dataId).id,g=new Uint8Array(new Int32Array(d).buffer),y=t.dataIdMap.get(s.dataId).id;return GW(h,f,gP[i.dtype],c,u,l,g,p,y,m),s}};let jW;const KW={kernelName:oo,backendName:"wasm",setupFunc:function(e){jW=e.wasm.cwrap(oo,null,["number","array","number","array","number","number"])},kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,o=n.dataIdMap.get(r.dataId).id,{reps:i}=a,s=new Array(r.shape.length);for(let p=0;p<s.length;p++)s[p]=r.shape[p]*i[p];const c=new Uint8Array(new Int32Array(r.shape).buffer),u=new Uint8Array(new Int32Array(s).buffer),l=n.makeOutput(s,r.dtype),d=n.dataIdMap.get(l.dataId).id;return jW(o,c,r.shape.length,u,s.length,gP[l.dtype],d),l}};let qW;const XW={kernelName:io,backendName:"wasm",setupFunc:function(e){qW=e.wasm.cwrap(io,null,["number","array","number","number","number","bool","number","number"])},kernelFunc:e=>{let{inputs:t,backend:n,attrs:a}=e;const{x:r}=t,{k:o,sorted:i}=a,s=n.dataIdMap.get(r.dataId).id,c=new Uint8Array(new Int32Array(r.shape).buffer),u=r.shape.slice();u[u.length-1]=o;const l=n.makeOutput(u,r.dtype),d=n.dataIdMap.get(l.dataId).id,p=n.makeOutput(u,"int32"),h=n.dataIdMap.get(p.dataId).id;return qW(s,c,r.shape.length,gP[r.dtype],o,i,d,h),[l,p]}};let YW;const QW={kernelName:so,backendName:"wasm",setupFunc:function(e){YW=e.wasm.cwrap(so,null,["number","number","bool","number","number","number","number","number","number","array","number","array","number","number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:a}=e,{image:r,transforms:o}=n,{interpolation:i,fillMode:s,fillValue:c,outputShape:u}=a,[l,d,p,h]=r.shape,[f,m]=null!=u?u:[d,p],g=[l,f,m,h],y=new Uint8Array(new Int32Array(Gt(r.shape)).buffer),b=new Uint8Array(new Int32Array(Gt(g)).buffer),x=t.makeOutput(g,r.dtype),v=t.dataIdMap.get(x.dataId).id,w=t.dataIdMap.get(r.dataId).id,k=t.dataIdMap.get(o.dataId).id,S="nearest"===i?1:2;let C;switch(s){case"constant":default:C=1;break;case"reflect":C=2;break;case"wrap":C=3;break;case"nearest":C=4}return YW(w,k,o.shape[0]>1,l,f,m,h,p,d,y,r.shape.length-1,b,g.length-1,S,C,c,v),x}};const ZW={kernelName:uo,backendName:"wasm",kernelFunc:function(e){const{inputs:t,attrs:n,backend:a}=e,{axis:r}=n,{x:o}=t,{outputValues:i,outputShape:s,indices:c}=Gb(a.readSync(o.dataId),r,o.shape,o.dtype);return[a.makeOutput(s,o.dtype,void 0,i),a.makeOutput([c.length],"int32",void 0,c)]}};const $W={kernelName:lo,backendName:"wasm",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{value:r}=t;let{axis:o}=a;o<0&&(o+=r.shape.length);const i=r.shape[o],s=r.shape.length,c=new Array(s-1);let u=0;for(let h=0;h<s;h++)h!==o&&(c[u++]=r.shape[h]);const l=new Array(i),d=new Array(s).fill(0),p=r.shape.slice();p[o]=1;for(let h=0;h<l.length;h++)d[o]=h,l[h]=rL({inputs:{x:r},attrs:{begin:d,size:p},backend:n});return l.map((e=>{let{dataId:t,dtype:n}=e;return{dataId:t,dtype:n,shape:c}}))}};const JW={kernelName:ho,backendName:"wasm",kernelFunc:function(e){const{inputs:{x:t},backend:n}=e,a=n.makeOutput(t.shape,t.dtype);return n.typedArrayFromHeap(a).fill(0),a}},eU=[xP,wP,kP,SP,IP,TP,MP,LP,BP,WP,UP,VP,GP,HP,jP,qP,JP,YP,ZP,aL,iL,cL,uL,lL,pL,hL,mL,yL,xL,wL,SL,IL,TL,_L,EL,OL,DL,PL,zL,WL,VL,HL,KL,XL,QL,ZL,JL,ez,tz,nz,rz,oz,sz,uz,lz,dz,hz,mz,yz,xz,wz,kz,Sz,EP,Cz,Iz,Nz,_z,Ez,Rz,Oz,Dz,Fz,Mz,Pz,Lz,zz,Wz,Vz,Hz,jz,qz,Yz,Zz,Jz,tB,aB,oB,iB,uB,fB,mB,gB,yB,vB,kB,CB,IB,TB,_B,EB,AB,OB,DB,PB,LB,zB,BB,WB,UB,tL,GB,jB,qB,YB,ZB,JB,eW,tW,aW,oW,sW,cW,lW,dW,pW,hW,oL,pB,fW,mW,yW,xW,SW,CW,NW,TW,_W,EW,RW,OW,DW,MW,PW,LW,zW,WW,UW,VW,HW,KW,XW,QW,OP,ZW,$W,JW];for(const n of eU)To(n);const tU=nn();tU.registerFlag("WASM_HAS_SIMD_SUPPORT",(async()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]))}catch(jj){return!1}})),tU.registerFlag("WASM_HAS_MULTITHREAD_SUPPORT",(async()=>{if(tU.get("IS_NODE"))return!1;try{return(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch(jj){return!1}}));var nU=n(764),aU=n.n(nU),rU=n(562),oU=n(372),iU=n.n(oU);const sU=aU()||nU,cU=iU()||oU;class uU extends gt{constructor(e){super(),this.wasm=e,this.dataIdNextNumber=1,this.wasm.tfjs.initWithThreadsCount(bU),xU=this.wasm.tfjs.getThreadsCount(),this.dataIdMap=new mt(this,Qi())}write(e,t,n){const a={id:this.dataIdNextNumber++};return this.move(a,e,t,n,1),a}numDataIds(){return this.dataIdMap.numDataIds()}async time(e){const t=Ko();e();return{kernelMs:Ko()-t}}move(e,t,n,a,r){const o=this.dataIdNextNumber++;if("string"===a){const i=t;return void this.dataIdMap.set(e,{id:o,stringBytes:i,shape:n,dtype:a,memoryOffset:null,refCount:r})}const i=It(n),s=i*zt(a),c=this.wasm._malloc(s)>>>0;this.dataIdMap.set(e,{id:o,memoryOffset:c,shape:n,dtype:a,refCount:r}),this.wasm.tfjs.registerTensor(o,i,c),null!=t&&this.wasm.HEAPU8.set(new Uint8Array(t.buffer,t.byteOffset,s),c)}async read(e){return this.readSync(e)}readSync(e,t,n){const{memoryOffset:a,dtype:r,shape:o,stringBytes:i}=this.dataIdMap.get(e);if("string"===r)return null!=t&&0!==t||!(null==n||n>=i.length)?i.slice(t,n):i;t=t||0,n=n||It(o);const s=zt(r);return function(e,t){switch(t){case"float32":return new Float32Array(e);case"int32":return new Int32Array(e);case"bool":return new Uint8Array(e);default:throw new Error("Unknown dtype ".concat(t))}}(this.wasm.HEAPU8.slice(a+t*s,a+n*s).buffer,r)}disposeData(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.dataIdMap.has(e)){const n=this.dataIdMap.get(e);if(n.refCount--,!t&&n.refCount>0)return!1;this.wasm._free(n.memoryOffset),this.wasm.tfjs.disposeData(n.id),this.dataIdMap.delete(e)}return!0}refCount(e){if(this.dataIdMap.has(e)){return this.dataIdMap.get(e).refCount}return 0}incRef(e){const t=this.dataIdMap.get(e);null!=t&&t.refCount++}floatPrecision(){return 32}getMemoryOffset(e){return this.dataIdMap.get(e).memoryOffset}dispose(){this.wasm.tfjs.dispose(),"PThread"in this.wasm&&this.wasm.PThread.terminateAllThreads(),this.wasm=null}memory(){return{unreliable:!1}}makeOutput(e,t,n,a){let r;if(null==n)r=this.write(null!==a&&void 0!==a?a:null,e,t);else{const a=this.dataIdNextNumber++;r={id:a},this.dataIdMap.set(r,{id:a,memoryOffset:n,shape:e,dtype:t,refCount:1});const o=It(e);this.wasm.tfjs.registerTensor(a,o,n)}return{dataId:r,shape:e,dtype:t}}typedArrayFromHeap(e){let{shape:t,dtype:n,dataId:a}=e;const r=this.wasm.HEAPU8.buffer,{memoryOffset:o}=this.dataIdMap.get(a),i=It(t);switch(n){case"float32":return new Float32Array(r,o,i);case"int32":return new Int32Array(r,o,i);case"bool":return new Uint8Array(r,o,i);default:throw new Error("Unknown dtype ".concat(n))}}}function lU(e){return(t,n)=>(function(e,t){return nn().platform.fetch(e,t)}(e,{credentials:"same-origin"}).then((a=>{a.ok||t.env.a("failed to load wasm binary file at '".concat(e,"'")),a.arrayBuffer().then((e=>{WebAssembly.instantiate(e,t).then((e=>{n(e.instance,e.module)}))}))})),{})}function dU(e,t,n){if(null!=hU)return hU;let a="tfjs-backend-wasm.wasm";return e&&t?a="tfjs-backend-wasm-threaded-simd.wasm":e&&(a="tfjs-backend-wasm-simd.wasm"),null!=mU&&null!=mU[a]?mU[a]:n+a}const pU=["tfjs-backend-wasm.wasm","tfjs-backend-wasm-simd.wasm","tfjs-backend-wasm-threaded-simd.wasm"];let hU=null,fU=null,mU={},gU=!1,yU=!1;let bU=-1,xU=null;ts("wasm",(async()=>{const{wasm:e}=await async function(){const[e,t]=await Promise.all([nn().getAsync("WASM_HAS_SIMD_SUPPORT"),nn().getAsync("WASM_HAS_MULTITHREAD_SUPPORT")]);return new Promise(((n,a)=>{const r={locateFile:(n,a)=>{if(n.endsWith(".worker.js")){const e=rU.$.replace(/\n/g,"\\n"),t=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(t)}return n.endsWith(".wasm")?dU(e,t,null!=fU?fU:a):a+n}};yU&&(r.instantiateWasm=lU(dU(e,t,null!=fU?fU:"")));let o,i=!1;r.onAbort=()=>{i||gU||(gU=!0,a({message:"Make sure the server can serve the `.wasm` file relative to the bundled js file. For more details see https://github.com/tensorflow/tfjs/blob/master/tfjs-backend-wasm/README.md#using-bundlers"}))},t&&e&&null==hU?(r.mainScriptUrlOrBlob=new Blob(["var WasmBackendModuleThreadedSimd = "+sU.toString()],{type:"text/javascript"}),o=sU(r)):o=cU(r),o.then((e=>{i=!0,gU=!1,e.tfjs={init:e.cwrap("init",null,[]),initWithThreadsCount:e.cwrap("init_with_threads_count",null,["number"]),getThreadsCount:e.cwrap("get_threads_count","number",[]),registerTensor:e.cwrap("register_tensor",null,["number","number","number"]),disposeData:e.cwrap("dispose_data",null,["number"]),dispose:e.cwrap("dispose",null,[])},n({wasm:e})})).catch(a)}))}();return new uU(e)}),2);var vU=n(879);var wU,kU;nn().registerFlag("KEEP_INTERMEDIATE_TENSORS",(()=>!1),(e=>{e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")})),function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"}(wU||(wU={})),function(e){let t;!function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(t=e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(kU||(kU={}));const SU={};function CU(e){return SU[e]}function IU(e,t,n,a,r){const o=t.inputParams[e];if(o&&void 0!==o.inputIndexStart){const e=o.inputIndexStart,i=0===o.inputIndexEnd?void 0:void 0===o.inputIndexEnd?e+1:o.inputIndexEnd,s=e<0?t.inputNames.length+e:e;if("tensor"===o.type)return NU(t.inputNames[s],n,a,r);if("tensors"===o.type){const o=t.inputs.slice(e,i);return t.inputNames.slice(e,i).filter(((e,t)=>{var n;return"NoOp"!==(null===(n=o[t])||void 0===n?void 0:n.op)})).map((e=>NU(e,n,a,r)))}const c=NU(t.inputNames[s],n,a,r),u=c.dataSync();return"number"===o.type?u[0]:jt(c.shape,u)}const i=t.attrParams[e];return i&&i.value}function NU(e,t,n,a){const[r,o]=RU(e,n);if(null!=a){const e=a.getHashTableHandleByName(r);if(null!=e)return e}const i=n.currentContextIds.find((e=>!!t[EU(r,e)]));return void 0!==i?t[EU(r,i)][o]:void 0}function TU(e,t,n){return t[EU(e,n.currentContextId)]}function _U(e,t){const[n,a,r]=RU(e,t);return[EU(n,t&&t.currentContextId),a,r]}function EU(e,t){return t?"".concat(e,"-").concat(t):e}function RU(e,t){if(""===e)return["",0,void 0];const n=null!=t&&null!=t.parseNodeNameCache;if(n){const n=t.parseNodeNameCache.get(e);if(null!=n)return n}const a=e.split(":");let r;if(1===a.length)r=[e,0,void 0];else{const e=a[0],t=3===a.length?a[1]:void 0;r=[e,Number(a[a.length-1]),t]}return n&&t.parseNodeNameCache.set(e,r),r}function AU(e,t,n){let a=IU("pad",e,t,n);if("explicit"===a){a=IU("explicitPaddings",e,t,n);const r=[[0,0],[0,0],[0,0],[0,0]];for(let e=0;e<4;e++)r[e][0]=a[2*e],r[e][1]=a[2*e+1];return r}return a}function OU(e){return e.kept?e:sc(e)}const FU=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],DU=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],MU=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],PU=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],LU=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],zU=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],BU=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],WU=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],UU=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],VU=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],GU=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}],HU=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],jU=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}],KU=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],qU=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],XU=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],YU=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],QU=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],ZU=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}];class $U{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[].concat(...[s,c,u,l,d,p,h,f,m,g,y,b,x,v,w,k,S,C,I].map((e=>e.json)));this.opMappers=e.reduce(((e,t)=>(e[t.tfOpName]=t,e)),{})}transformGraph(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.node,a=[],r=[],o=[],i=n.reduce(((e,t)=>(e[t.name]=this.mapNode(t),t.op.startsWith("Placeholder")?a.push(e[t.name]):"Const"===t.op?r.push(e[t.name]):null!=t.input&&0!==t.input.length||o.push(e[t.name]),e)),{});let s=[];const c=[];let u={},l={};null!=t&&(u=this.mapSignatureEntries(t.inputs),l=this.mapSignatureEntries(t.outputs));const d=Object.keys(i);d.forEach((e=>{const t=i[e];t.inputNames.forEach(((e,n)=>{const[a,,r]=_U(e),o=i[a];if(null!=o.outputs){const e=o.outputs.indexOf(r);if(-1!==e){const r="".concat(a,":").concat(e);t.inputNames[n]=r}}t.inputs.push(o),o.children.push(t)}))})),0===Object.keys(l).length?d.forEach((e=>{const t=i[e];0===t.children.length&&c.push(t)})):Object.keys(l).forEach((e=>{const[t]=_U(e),n=i[t];null!=n&&(n.signatureKey=l[e],c.push(n))})),Object.keys(u).length>0?Object.keys(u).forEach((e=>{const[t]=_U(e),n=i[t];n&&(n.signatureKey=u[e],s.push(n))})):s=a;let p={};null!=e.library&&null!=e.library.function&&(p=e.library.function.reduce(((e,t)=>(e[t.signature.name]=this.mapFunction(t),e)),{}));const h={nodes:i,inputs:s,outputs:c,weights:r,placeholders:a,signature:t,functions:p};return o.length>0&&(h.initNodes=o),h}mapSignatureEntries(e){return Object.keys(e||{}).reduce(((t,n)=>(t[e[n].name]=n,t)),{})}mapNode(e){const t=CU(e.op)||this.opMappers[e.op]||{};null==e.attr&&(e.attr={});const n={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map((e=>e.startsWith("^")?e.slice(1):e)),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:t.outputs};return null!=t.inputs&&(n.inputParams=t.inputs.reduce(((e,t)=>(e[t.name]={type:t.type,inputIndexStart:t.start,inputIndexEnd:t.end},e)),{})),null!=t.attrs&&(n.attrParams=t.attrs.reduce(((t,n)=>{const a=n.type;let r;switch(n.type){case"string":r=eV(e.attr,n.tfName,n.defaultValue),void 0===r&&n.tfDeprecatedName&&(r=eV(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":r=lV(e.attr,n.tfName,n.defaultValue),void 0===r&&n.tfDeprecatedName&&(r=lV(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":r=nV(e.attr,n.tfName,n.defaultValue||0),void 0===r&&n.tfDeprecatedName&&(r=nV(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":r=uV(e.attr,n.tfName,n.defaultValue),void 0===r&&n.tfDeprecatedName&&(r=uV(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":r=tV(e.attr,n.tfName,n.defaultValue),void 0===r&&n.tfDeprecatedName&&(r=tV(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":r=pV(e.attr,n.tfName,n.defaultValue),void 0===r&&n.tfDeprecatedName&&(r=pV(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":r=cV(e.attr,n.tfName,n.defaultValue),void 0===r&&n.tfDeprecatedName&&(r=cV(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":r=dV(e.attr,n.tfName,n.defaultValue),void 0===r&&n.tfDeprecatedName&&(r=dV(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":r=oV(e.attr,n.tfName,n.defaultValue),void 0===r&&n.tfDeprecatedName&&(r=oV(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":r=iV(e.attr,n.tfName,n.defaultValue),void 0===r&&n.tfDeprecatedName&&(r=iV(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"func":r=rV(e.attr,n.tfName,n.defaultValue),void 0===r&&n.tfDeprecatedName&&(r=rV(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error("Unsupported param type: ".concat(n.type," for op: ").concat(e.op))}return t[n.name]={value:r,type:a},t}),{})),n}mapFunction(e){const t=e.nodeDef,n=[];let a={};null!=t&&(a=t.reduce(((e,t)=>(e[t.name]=this.mapNode(t),"Const"===t.op&&n.push(e[t.name]),e)),{}));const r=[],o=[];e.signature.inputArg.forEach((e=>{const[t]=_U(e.name),n={name:t,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:aV(e.type),type:"dtype"}},children:[]};n.signatureKey=e.name,r.push(n),a[t]=n}));Object.keys(a).forEach((e=>{const t=a[e];t.inputNames.forEach(((e,n)=>{const[r,,o]=_U(e),i=a[r];if(null!=i.outputs){const e=i.outputs.indexOf(o);if(-1!==e){const a="".concat(r,":").concat(e);t.inputNames[n]=a}}t.inputs.push(i),i.children.push(t)}))}));const i=e.ret;e.signature.outputArg.forEach((e=>{const[t,n]=_U(i[e.name]),r=a[t];null!=r&&(r.defaultOutput=n,o.push(r))}));const s=this.mapArgsToSignature(e);return{nodes:a,inputs:r,outputs:o,weights:n,placeholders:[],signature:s}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce(((e,t)=>(e[t.name]=this.mapArgToTensorInfo(t),e)),{}),outputs:e.signature.outputArg.reduce(((t,n)=>(t[n.name]=this.mapArgToTensorInfo(n,e.ret),t)),{})}}mapArgToTensorInfo(e,t){let n=e.name;return null!=t&&(n=t[n]),{name:n,dtype:e.type}}}function JU(e,t){const n=Array.isArray(e)?String.fromCharCode.apply(null,e):function(e){const t=nn().global;if("undefined"!==typeof t.atob)return t.atob(e);if("undefined"!==typeof Buffer)return new Buffer(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(e);return t?n:n.toLowerCase()}function eV(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=e[t];return null!=r?JU(r.s,a):n}function tV(e,t,n){const a=e[t];return a?a.b:n}function nV(e,t,n){const a=e[t]||{},r=null!=a.i?a.i:null!=a.f?a.f:n;return"number"===typeof r?r:parseInt(r,10)}function aV(e){switch("string"===typeof e&&(e=wU[e]),e){case wU.DT_FLOAT:case wU.DT_HALF:return"float32";case wU.DT_INT32:case wU.DT_INT64:case wU.DT_INT8:case wU.DT_UINT8:return"int32";case wU.DT_BOOL:return"bool";case wU.DT_DOUBLE:return"float32";case wU.DT_STRING:return"string";case wU.DT_COMPLEX64:case wU.DT_COMPLEX128:return"complex64";default:return null}}function rV(e,t,n){const a=e[t];return a&&a.func?a.func.name:n}function oV(e,t,n){const a=e[t];return a&&a.type?aV(a.type):n}function iV(e,t,n){const a=e[t];return a&&a.list&&a.list.type?a.list.type.map((e=>aV(e))):n}function sV(e){if(!e.unknownRank)return null!=e.dim?e.dim.map((e=>"number"===typeof e.size?e.size:parseInt(e.size,10))):[]}function cV(e,t,n){const a=e[t];return a&&a.shape?sV(a.shape):n}function uV(e,t,n){const a=e[t];return a?((a.list.f&&a.list.f.length?a.list.f:a.list.i)||[]).map((e=>"number"===typeof e?e:parseInt(e,10))):n}function lV(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=e[t];return r&&r.list&&r.list.s?r.list.s.map((e=>JU(e,a))):n}function dV(e,t,n){const a=e[t];return a&&a.list&&a.list.shape?a.list.shape.map((e=>sV(e))):n}function pV(e,t,n){const a=e[t];return a&&a.list&&a.list.b?a.list.b:n}class hV{constructor(e,t,n){this.node=e,this.tensorMap=t,this.context=n,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map((e=>this.getInput(e))),null!=e.rawAttrs&&(this.attrs=Object.keys(e.rawAttrs).reduce(((e,t)=>(e[t]=this.getAttr(t),e)),{}))}getInput(e){return NU(e,this.tensorMap,this.context)}getAttr(e,t){const n=this.node.rawAttrs[e];if(null!=n.tensor)return NU(e,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return nV(this.node.rawAttrs,e,t);if(null!=n.s)return eV(this.node.rawAttrs,e,t);if(null!=n.b)return tV(this.node.rawAttrs,e,t);if(null!=n.shape)return cV(this.node.rawAttrs,e,t);if(null!=n.type)return oV(this.node.rawAttrs,e,t);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return uV(this.node.rawAttrs,e,t);if(null!=n.list.s)return lV(this.node.rawAttrs,e,t);if(null!=n.list.shape)return dV(this.node.rawAttrs,e,t);if(null!=n.list.b)return pV(this.node.rawAttrs,e,t);if(null!=n.list.type)return iV(this.node.rawAttrs,e,t)}return t}}function fV(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("number"!==typeof e&&"number"!==typeof t){kt(e.length===t.length,(()=>n+" Shapes ".concat(e," and ").concat(t," must match")));for(let a=0;a<e.length;a++){const r=e[a],o=t[a];kt(r<0||o<0||r===o,(()=>n+" Shapes ".concat(e," and ").concat(t," must match")))}}}function mV(e){return"number"!==typeof e&&!e.some((e=>e<0))}function gV(e,t,n){let a=yV(e,n);const r=!mV(a);if(r&&0===t.length)throw new Error("Tried to calculate elements of an empty list"+" with non-fully-defined elementShape: ".concat(a));if(r&&t.forEach((e=>{a=yV(e.shape,a)})),!mV(a))throw new Error("Non-fully-defined elementShape: ".concat(a));return a}function yV(e,t){if("number"===typeof e)return t;if("number"===typeof t)return e;if(e.length!==t.length)throw new Error("Incompatible ranks during merge: ".concat(e," vs. ").concat(t));const n=[];for(let a=0;a<e.length;++a){const r=e[a],o=t[a];if(r>=0&&o>=0&&r!==o)throw new Error("Incompatible shape during merge: ".concat(e," vs. ").concat(t));n[a]=r>=0?r:o}return n}class bV{constructor(e,t,n,a,r,o,i){this.name=e,this.dtype=t,this.maxSize=n,this.elementShape=a,this.identicalElementShapes=r,this.dynamicSize=o,this.clearAfterRead=i,this.tensors=[],this.closed_=!1,this.idTensor=yc(0),Ji(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach((t=>{null!=e&&e.has(t.tensor.id)||t.tensor.dispose()})),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||e>=this.size())throw new Error("Tried to read from index ".concat(e,", but array size is: ").concat(this.size()));const t=this.tensors[e];if(t.cleared)throw new Error("TensorArray ".concat(this.name,": Could not read index ").concat(e," twice because it was cleared after a previous read ")+"(perhaps try setting clear_after_read = false?).");return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}readMany(e){return e.map((e=>this.read(e)))}write(e,t){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error("Tried to write to index ".concat(e,", but array is not resizeable and size is: ").concat(this.maxSize));const n=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,",\n          because the value dtype is ").concat(t.dtype,", but TensorArray dtype is ").concat(this.dtype,"."));if(0!==this.size()||null!=this.elementShape&&0!==this.elementShape.length||(this.elementShape=t.shape),fV(this.elementShape,t.shape,"TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,".")),n.read)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been read."));if(n.written)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been written."));n.tensor=t,Ji(t),n.written=!0,this.tensors[e]=n}writeMany(e,t){if(e.length!==t.length)throw new Error("TensorArray ".concat(this.name,": could not write multiple tensors,")+"because the index size: ".concat(e.length," is not the same as tensors size: ").concat(t.length,"."));e.forEach(((e,n)=>this.write(e,t[n])))}gather(e,t){if(t&&t!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but gather requested dtype ").concat(t));if(e)e=e.slice(0,this.size());else{e=[];for(let t=0;t<this.size();t++)e.push(t)}if(0===e.length)return qi([],[0].concat(this.elementShape));const n=this.readMany(e);return fV(this.elementShape,n[0].shape,"TensorArray shape mismatch: "),rh(n,0)}concat(e){if(e&&e!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but concat requested dtype ").concat(e));if(0===this.size())return qi([],[0].concat(this.elementShape));const t=[];for(let a=0;a<this.size();a++)t.push(a);const n=this.readMany(t);return fV(this.elementShape,n[0].shape,"TensorArray shape mismatch: tensor array shape (".concat(this.elementShape,") vs first tensor shape (").concat(n[0].shape,")")),il(n,0)}scatter(e,t){if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));if(e.length!==t.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(e.length," vs. ").concat(t.shape[0]));const n=Math.max(...e);if(!this.dynamicSize&&n>=this.maxSize)throw new Error("Max index must be < array size (".concat(n,"  vs. ").concat(this.maxSize,")"));this.writeMany(e,bh(t,0))}split(e,t){if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));let n=0;const a=e.map((e=>(n+=e,n)));if(n!==t.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(n,", and tensor's shape is: ").concat(t.shape));if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error("TensorArray's size is not equal to the size of lengths (".concat(this.maxSize," vs. ").concat(e.length,"), ")+"and the TensorArray is not marked as dynamically resizeable");const r=0===n?0:t.size/n,o=[];Zi((()=>{t=al(t,[1,n,r]);for(let n=0;n<e.length;++n){const i=[0,0===n?0:a[n-1],0],s=[1,e[n],r];o[n]=al(ul(t,i,s),this.elementShape)}return o}));const i=[];for(let s=0;s<e.length;s++)i[s]=s;this.writeMany(i,o)}}class xV{get id(){return this.idTensor.id}constructor(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;this.tensors=e,this.elementShape=t,this.elementDtype=n,null!=e&&e.forEach((e=>{if(n!==e.dtype)throw new Error("Invalid data types; op elements ".concat(n,", but list elements ").concat(e.dtype));fV(t,e.shape,"TensorList shape mismatch: "),Ji(e)})),this.idTensor=yc(0),this.maxNumElements=a,Ji(this.idTensor)}copy(){return new xV([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach((t=>{null!=e&&e.has(t.id)||t.dispose()})),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(-1!==n&&this.tensors.length!==n)throw new Error("Operation expected a list with ".concat(n," elements but got a list with ").concat(this.tensors.length," elements."));fV(e,this.elementShape,"TensorList shape mismatch: ");const a=gV(this.elementShape,this.tensors,e);return Zi((()=>{const e=this.tensors.map((e=>al(e,a)));return rh(e,0)}))}popBack(e,t){if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(0===this.size())throw new Error("Trying to pop from an empty list.");const n=gV(this.elementShape,this.tensors,e),a=this.tensors.pop();return a.kept=!1,fV(a.shape,e,"TensorList shape mismatch: "),al(a,n)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(this.elementDtype));if(fV(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");Ji(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error("TensorListResize expects size to be non-negative. Got: ".concat(e));if(-1!==this.maxNumElements&&e>this.maxNumElements)throw new Error("TensorListResize input size ".concat(e," is greater maxNumElement ").concat(this.maxNumElements,"."));const t=new xV([],this.elementShape,this.elementDtype,this.maxNumElements);t.tensors.length=e;for(let n=0;n<Math.min(this.tensors.length,e);++n)t.tensors[n]=this.tensors[n];return t}getItem(e,t,n){if(n!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(n,", but list elements ").concat(this.elementDtype));if(e<0||e>this.tensors.length)throw new Error("Trying to access element ".concat(e," in a list with ").concat(this.tensors.length," elements."));if(null==this.tensors[e])throw new Error("element at index ".concat(e," is null."));fV(this.tensors[e].shape,t,"TensorList shape mismatch: ");const a=gV(this.elementShape,this.tensors,t);return al(this.tensors[e],a)}setItem(e,t){if(t.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t.dtype,", but list elements ").concat(this.elementDtype));if(e<0||-1!==this.maxNumElements&&e>=this.maxNumElements)throw new Error("Trying to set element ".concat(e," in a list with max ").concat(this.maxNumElements," elements."));fV(this.elementShape,t.shape,"TensorList shape mismatch: "),Ji(t),null!=this.tensors[e]&&(this.tensors[e].kept=!1),this.tensors[e]=t}gather(e,t,n){if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));fV(this.elementShape,n,"TensorList shape mismatch: "),e=e.slice(0,this.size());const a=gV(this.elementShape,this.tensors,n);return 0===e.length?qi([],[0].concat(a)):Zi((()=>{const t=e.map((e=>al(this.tensors[e],a)));return rh(t,0)}))}concat(e,t){if(e&&e!==this.elementDtype)throw new Error("TensorList dtype is ".concat(this.elementDtype," but concat requested dtype ").concat(e));fV(this.elementShape,t,"TensorList shape mismatch: ");const n=gV(this.elementShape,this.tensors,t);return 0===this.size()?qi([],[0].concat(n)):Zi((()=>{const e=this.tensors.map((e=>al(e,n)));return il(e,0)}))}}const vV=async(e,t,n)=>{switch(e.op){case"If":case"StatelessIf":{const a=IU("thenBranch",e,t,n),r=IU("elseBranch",e,t,n),o=IU("cond",e,t,n),i=IU("args",e,t,n);return(await o.data())[0]?n.functionMap[a].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap):n.functionMap[r].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{const a=IU("body",e,t,n),r=IU("cond",e,t,n),o=IU("args",e,t,n),i=await n.functionMap[r].executeFunctionAsync(o,n.tensorArrayMap,n.tensorListMap),s=o.map((e=>e.id));let c=await i[0].data();i.forEach((e=>{e.kept||-1!==s.indexOf(e.id)||e.dispose()}));let u=o;for(;c[0];){const e=u;u=await n.functionMap[a].executeFunctionAsync(u,n.tensorArrayMap,n.tensorListMap);const t=u.map((e=>e.id));e.forEach((e=>{e.kept||-1!==s.indexOf(e.id)||-1!==t.indexOf(e.id)||e.dispose()}));const o=await n.functionMap[r].executeFunctionAsync(u,n.tensorArrayMap,n.tensorListMap);c=await o[0].data(),o.forEach((e=>{e.kept||-1!==s.indexOf(e.id)||-1!==t.indexOf(e.id)||e.dispose()}))}return u}case"LoopCond":return[OU(IU("pred",e,t,n))];case"Switch":{const a=IU("pred",e,t,n);let r=IU("data",e,t,n);return r.kept||(r=OU(r)),(await a.data())[0]?[void 0,r]:[r,void 0]}case"Merge":{const a=e.inputNames.find((e=>void 0!==NU(e,t,n)));if(a){return[OU(NU(a,t,n))]}return}case"Enter":{const a=IU("frameName",e,t,n),r=IU("tensor",e,t,n);return n.enterFrame(a),[OU(r)]}case"Exit":{const a=IU("tensor",e,t,n);return n.exitFrame(),[OU(a)]}case"NextIteration":{const a=IU("tensor",e,t,n);return n.nextIteration(),[OU(a)]}case"TensorArrayV3":{const a=IU("size",e,t,n),r=IU("dtype",e,t,n),o=IU("elementShape",e,t,n),i=IU("dynamicSize",e,t,n),s=IU("clearAfterRead",e,t,n),c=IU("identicalElementShapes",e,t,n),u=IU("name",e,t,n),l=new bV(u,r,a,o,c,i,s);return n.addTensorArray(l),[l.idTensor,yc(1)]}case"TensorArrayWriteV3":{const a=IU("tensorArrayId",e,t,n),r=IU("index",e,t,n),o=IU("tensor",e,t,n),i=n.getTensorArray(a.id);return i.write(r,o),[i.idTensor]}case"TensorArrayReadV3":{const a=IU("tensorArrayId",e,t,n),r=IU("index",e,t,n);return[n.getTensorArray(a.id).read(r)]}case"TensorArrayGatherV3":{const a=IU("tensorArrayId",e,t,n),r=IU("indices",e,t,n),o=IU("dtype",e,t,n);return[n.getTensorArray(a.id).gather(r,o)]}case"TensorArrayScatterV3":{const a=IU("tensorArrayId",e,t,n),r=IU("indices",e,t,n),o=IU("tensor",e,t,n),i=n.getTensorArray(a.id);return i.scatter(r,o),[i.idTensor]}case"TensorArrayConcatV3":{const a=IU("tensorArrayId",e,t,n),r=n.getTensorArray(a.id),o=IU("dtype",e,t,n);return[r.concat(o)]}case"TensorArraySplitV3":{const a=IU("tensorArrayId",e,t,n),r=IU("tensor",e,t,n),o=IU("lengths",e,t,n),i=n.getTensorArray(a.id);return i.split(o,r),[i.idTensor]}case"TensorArraySizeV3":{const a=IU("tensorArrayId",e,t,n);return[yc(n.getTensorArray(a.id).size(),"int32")]}case"TensorArrayCloseV3":{const a=IU("tensorArrayId",e,t,n),r=n.getTensorArray(a.id);return r.clearAndClose(),[r.idTensor]}case"TensorListSetItem":{const a=IU("tensorListId",e,t,n),r=IU("index",e,t,n),o=IU("tensor",e,t,n),i=n.getTensorList(a.id);return i.setItem(r,o),[i.idTensor]}case"TensorListGetItem":{const a=IU("tensorListId",e,t,n),r=IU("index",e,t,n),o=IU("elementShape",e,t,n),i=IU("elementDType",e,t,n);return[n.getTensorList(a.id).getItem(r,o,i)]}case"TensorListScatterV2":case"TensorListScatter":{const a=IU("indices",e,t,n),r=function(e,t,n,a){if(t.length!==e.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(t.length," vs. ").concat(e.shape[0]));const r=Math.max(...t);if(null!=a&&-1!==a&&r>=a)throw new Error("Max index must be < array size (".concat(r,"  vs. ").concat(a,")"));const o=new xV([],n,e.dtype,a),i=bh(e,0);return t.forEach(((e,t)=>{o.setItem(e,i[t])})),o}(IU("tensor",e,t,n),a,IU("elementShape",e,t,n),IU("numElements",e,t,n));return n.addTensorList(r),[r.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const a=IU("elementShape",e,t,n),r=IU("elementDType",e,t,n);let o;o="TensorListReserve"===e.op?"numElements":"maxNumElements";const i=IU(o,e,t,n),s=function(e,t,n,a){return new xV([],e,t,a)}(a,r,0,"TensorListReserve"===e.op?-1:i);return n.addTensorList(s),[s.idTensor]}case"TensorListGather":{const a=IU("tensorListId",e,t,n),r=IU("indices",e,t,n),o=IU("elementShape",e,t,n),i=IU("elementDType",e,t,n);return[n.getTensorList(a.id).gather(r,i,o)]}case"TensorListStack":{const a=IU("tensorListId",e,t,n),r=IU("elementShape",e,t,n),o=IU("elementDType",e,t,n),i=IU("numElements",e,t,n);return[n.getTensorList(a.id).stack(r,o,i)]}case"TensorListFromTensor":{const a=function(e,t,n){const a=e.dtype;if(e.shape.length<1)throw new Error("Tensor must be at least a vector, but saw shape: ".concat(e.shape));if(e.dtype!==n)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(n));fV(e.shape.slice(1),t,"TensorList shape mismatch: ");const r=bh(e);return new xV(r,t,a)}(IU("tensor",e,t,n),IU("elementShape",e,t,n),IU("elementDType",e,t,n));return n.addTensorList(a),[a.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const a=IU("tensorListId",e,t,n),r=n.getTensorList(a.id),o=IU("dtype",e,t,n),i=IU("elementShape",e,t,n);return[r.concat(o,i)]}case"TensorListPushBack":{const a=IU("tensorListId",e,t,n),r=IU("tensor",e,t,n),o=n.getTensorList(a.id);return o.pushBack(r),[o.idTensor]}case"TensorListPopBack":{const a=IU("tensorListId",e,t,n),r=IU("elementShape",e,t,n),o=IU("elementDType",e,t,n);return[n.getTensorList(a.id).popBack(r,o)]}case"TensorListSplit":{const a=IU("tensor",e,t,n),r=IU("elementShape",e,t,n),o=function(e,t,n){let a=0;const r=t.map((e=>(a+=e,a)));if(a!==e.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(a,", and tensor's shape is: ").concat(e.shape));const o=yV(e.shape.slice(1),n),i=0===a?0:e.size/a,s=Zi((()=>{const n=[];e=al(e,[1,a,i]);for(let a=0;a<t.length;++a){const s=[0,0===a?0:r[a-1],0],c=[1,t[a],i];n[a]=al(ul(e,s,c),o)}return e.dispose(),n})),c=new xV([],n,e.dtype,t.length);for(let u=0;u<s.length;u++)c.setItem(u,s[u]);return c}(a,IU("lengths",e,t,n),r);return n.addTensorList(o),[o.idTensor]}case"TensorListLength":{const a=IU("tensorListId",e,t,n);return[yc(n.getTensorList(a.id).size(),"int32")]}case"TensorListResize":{const a=IU("tensorListId",e,t,n),r=IU("size",e,t,n),o=n.getTensorList(a.id).resize(r);return n.addTensorList(o),[o.idTensor]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}};function wV(e,t,n){const[a,r]=IU("fusedOps",e,t,n),o="biasadd"===a,i=!o,s="prelu"===r,c="fusedbatchnorm"===a,u=IU("numArgs",e,t,n);if(o){if(s&&2!==u)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&o&&1!==u)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(c)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const l=IU("strides",e,t,n),d=AU(e,t,n),p=IU("dataFormat",e,t,n).toUpperCase(),h=IU("dilations",e,t,n);let[f,m]=IU("args",e,t,n);i&&(m=f,f=void 0);return{stride:l,pad:d,dataFormat:p,dilations:h,biasArg:f,preluArg:m,activationFunc:r,leakyreluAlpha:IU("leakyreluAlpha",e,t,n)}}function kV(e,t,n){return{boxes:IU("boxes",e,t,n),scores:IU("scores",e,t,n),maxOutputSize:IU("maxOutputSize",e,t,n),iouThreshold:IU("iouThreshold",e,t,n),scoreThreshold:IU("scoreThreshold",e,t,n),softNmsSigma:IU("softNmsSigma",e,t,n)}}class SV{get id(){return this.handle.id}constructor(e,t){this.keyDType=e,this.valueDType=t,this.handle=yc(0),this.tensorMap=new Map,Ji(this.handle)}clearAndClose(){this.tensorMap.forEach((e=>e.dispose())),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return yc(this.size(),"int32")}async import(e,t){this.checkKeyAndValueTensor(e,t);const n=await e.data();return this.tensorMap.forEach((e=>e.dispose())),this.tensorMap.clear(),Zi((()=>{const e=bh(t),a=n.length,r=e.length;kt(a===r,(()=>"The number of elements doesn't match, keys has "+"".concat(a," elements, the values has ").concat(r," ")+"elements."));for(let t=0;t<a;t++){const a=n[t],r=e[t];Ji(r),this.tensorMap.set(a,r)}return this.handle}))}async find(e,t){this.checkKeyAndValueTensor(e,t);const n=await e.data();return Zi((()=>{const e=[];for(let a=0;a<n.length;a++){const r=n[a],o=this.findWithDefault(r,t);e.push(o)}return rh(e)}))}findWithDefault(e,t){const n=this.tensorMap.get(e);return null!=n?n:t}checkKeyAndValueTensor(e,t){if(e.dtype!==this.keyDType)throw new Error("Expect key dtype ".concat(this.keyDType,", but got ")+"".concat(e.dtype));if(t.dtype!==this.valueDType)throw new Error("Expect value dtype ".concat(this.valueDType,", but got ")+"".concat(t.dtype))}}function CV(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Zi;const o=((e,t,n)=>{switch(e.category){case"arithmetic":return r((()=>function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:N;switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[a.add(IU("a",e,t,n),IU("b",e,t,n))];case"AddN":return[a.addN(IU("tensors",e,t,n))];case"FloorMod":case"Mod":return[a.mod(IU("a",e,t,n),IU("b",e,t,n))];case"Mul":return[a.mul(IU("a",e,t,n),IU("b",e,t,n))];case"RealDiv":case"Div":return[a.div(IU("a",e,t,n),IU("b",e,t,n))];case"DivNoNan":return[a.divNoNan(IU("a",e,t,n),IU("b",e,t,n))];case"FloorDiv":return[a.floorDiv(IU("a",e,t,n),IU("b",e,t,n))];case"Sub":return[a.sub(IU("a",e,t,n),IU("b",e,t,n))];case"Minimum":return[a.minimum(IU("a",e,t,n),IU("b",e,t,n))];case"Maximum":return[a.maximum(IU("a",e,t,n),IU("b",e,t,n))];case"Pow":return[a.pow(IU("a",e,t,n),IU("b",e,t,n))];case"SquaredDifference":return[a.squaredDifference(IU("a",e,t,n),IU("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"basic_math":return r((()=>function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:N;switch(e.op){case"Abs":case"ComplexAbs":return[a.abs(IU("x",e,t,n))];case"Acos":return[a.acos(IU("x",e,t,n))];case"Acosh":return[a.acosh(IU("x",e,t,n))];case"Asin":return[a.asin(IU("x",e,t,n))];case"Asinh":return[a.asinh(IU("x",e,t,n))];case"Atan":return[a.atan(IU("x",e,t,n))];case"Atan2":return[a.atan2(IU("x",e,t,n),IU("y",e,t,n))];case"Atanh":return[a.atanh(IU("x",e,t,n))];case"Ceil":return[a.ceil(IU("x",e,t,n))];case"Complex":return[a.complex(IU("real",e,t,n),IU("imag",e,t,n))];case"Cos":return[a.cos(IU("x",e,t,n))];case"Cosh":return[a.cosh(IU("x",e,t,n))];case"Elu":return[a.elu(IU("x",e,t,n))];case"Erf":return[a.erf(IU("x",e,t,n))];case"Exp":return[a.exp(IU("x",e,t,n))];case"Expm1":return[a.expm1(IU("x",e,t,n))];case"Floor":return[a.floor(IU("x",e,t,n))];case"Log":return[a.log(IU("x",e,t,n))];case"Log1p":return[a.log1p(IU("x",e,t,n))];case"Imag":return[a.imag(IU("x",e,t,n))];case"Neg":return[a.neg(IU("x",e,t,n))];case"Reciprocal":return[a.reciprocal(IU("x",e,t,n))];case"Real":return[a.real(IU("x",e,t,n))];case"Relu":return[a.relu(IU("x",e,t,n))];case"Round":return[a.round(IU("x",e,t,n))];case"Selu":return[a.selu(IU("x",e,t,n))];case"Sigmoid":return[a.sigmoid(IU("x",e,t,n))];case"Sin":return[a.sin(IU("x",e,t,n))];case"Sign":return[a.sign(IU("x",e,t,n))];case"Sinh":return[a.sinh(IU("x",e,t,n))];case"Softplus":return[a.softplus(IU("x",e,t,n))];case"Sqrt":return[a.sqrt(IU("x",e,t,n))];case"Square":return[a.square(IU("x",e,t,n))];case"Tanh":return[a.tanh(IU("x",e,t,n))];case"Tan":return[a.tan(IU("x",e,t,n))];case"ClipByValue":return[a.clipByValue(IU("x",e,t,n),IU("clipValueMin",e,t,n),IU("clipValueMax",e,t,n))];case"Relu6":return[a.relu6(IU("x",e,t,n))];case"Rsqrt":return[a.rsqrt(NU(e.inputNames[0],t,n))];case"LeakyRelu":return[a.leakyRelu(IU("x",e,t,n),IU("alpha",e,t,n))];case"Prelu":return[a.prelu(IU("x",e,t,n),IU("alpha",e,t,n))];case"IsNan":return[a.isNaN(NU(e.inputNames[0],t,n))];case"IsInf":return[a.isInf(NU(e.inputNames[0],t,n))];case"IsFinite":return[a.isFinite(NU(e.inputNames[0],t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"control":return vV(e,t,n);case"convolution":return r((()=>function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:N;switch(e.op){case"Conv1D":{const r=IU("stride",e,t,n),o=IU("pad",e,t,n),i=IU("dataFormat",e,t,n).toUpperCase(),s=IU("dilation",e,t,n);return[a.conv1d(IU("x",e,t,n),IU("filter",e,t,n),r,o,i,s)]}case"Conv2D":{const r=IU("strides",e,t,n),o=AU(e,t,n),i=IU("dataFormat",e,t,n).toUpperCase(),s=IU("dilations",e,t,n);return[a.conv2d(IU("x",e,t,n),IU("filter",e,t,n),[r[1],r[2]],o,i,[s[1],s[2]])]}case"_FusedConv2D":{const{stride:r,pad:o,dataFormat:i,dilations:s,biasArg:c,preluArg:u,activationFunc:l,leakyreluAlpha:d}=wV(e,t,n);return[a.fused.conv2d({x:IU("x",e,t,n),filter:IU("filter",e,t,n),strides:[r[1],r[2]],pad:o,dataFormat:i,dilations:[s[1],s[2]],bias:c,activation:l,preluActivationWeights:u,leakyreluAlpha:d})]}case"FusedDepthwiseConv2dNative":{const{stride:r,pad:o,dataFormat:i,dilations:s,biasArg:c,preluArg:u,activationFunc:l,leakyreluAlpha:d}=wV(e,t,n);return[a.fused.depthwiseConv2d({x:IU("x",e,t,n),filter:IU("filter",e,t,n),strides:[r[1],r[2]],pad:o,dataFormat:i,dilations:[s[1],s[2]],bias:c,activation:l,preluActivationWeights:u,leakyreluAlpha:d})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const r=IU("outputShape",e,t,n),o=IU("strides",e,t,n),i=AU(e,t,n);return[a.conv2dTranspose(IU("x",e,t,n),IU("filter",e,t,n),r,[o[1],o[2]],i)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const r=IU("strides",e,t,n),o=AU(e,t,n),i=IU("dilations",e,t,n),s=IU("dataFormat",e,t,n).toUpperCase();return[a.depthwiseConv2d(IU("input",e,t,n),IU("filter",e,t,n),[r[1],r[2]],o,s,[i[1],i[2]])]}case"Conv3D":{const r=IU("strides",e,t,n),o=IU("pad",e,t,n),i=IU("dataFormat",e,t,n).toUpperCase(),s=IU("dilations",e,t,n);return[a.conv3d(IU("x",e,t,n),IU("filter",e,t,n),[r[1],r[2],r[3]],o,i,[s[1],s[2],s[3]])]}case"AvgPool":{const r=IU("strides",e,t,n),o=IU("pad",e,t,n),i=IU("kernelSize",e,t,n);return[a.avgPool(IU("x",e,t,n),[i[1],i[2]],[r[1],r[2]],o)]}case"MaxPool":{const r=IU("strides",e,t,n),o=IU("pad",e,t,n),i=IU("kernelSize",e,t,n);return[a.maxPool(IU("x",e,t,n),[i[1],i[2]],[r[1],r[2]],o)]}case"MaxPoolWithArgmax":{const r=IU("strides",e,t,n),o=IU("pad",e,t,n),i=IU("kernelSize",e,t,n),s=IU("includeBatchInIndex",e,t,n),{result:c,indexes:u}=a.maxPoolWithArgmax(IU("x",e,t,n),[i[1],i[2]],[r[1],r[2]],o,s);return[c,u]}case"AvgPool3D":{const r=IU("strides",e,t,n),o=IU("pad",e,t,n),i=IU("kernelSize",e,t,n);return[a.avgPool3d(IU("x",e,t,n),[i[1],i[2],i[3]],[r[1],r[2],r[3]],o)]}case"MaxPool3D":{const r=IU("strides",e,t,n),o=IU("pad",e,t,n),i=IU("kernelSize",e,t,n);return[a.maxPool3d(IU("x",e,t,n),[i[1],i[2],i[3]],[r[1],r[2],r[3]],o)]}case"Dilation2D":{const r=IU("strides",e,t,n),o=IU("pad",e,t,n),i=IU("dilations",e,t,n),s=r[1],c=r[2],u=i[1],l=i[2];return[a.dilation2d(IU("x",e,t,n),IU("filter",e,t,n),[s,c],o,[u,l],"NHWC")]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"creation":return r((()=>function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:N;switch(e.op){case"Fill":{const r=IU("shape",e,t,n),o=IU("dtype",e,t,n),i=IU("value",e,t,n);return[a.fill(r,i,o)]}case"LinSpace":{const r=IU("start",e,t,n),o=IU("stop",e,t,n),i=IU("num",e,t,n);return[a.linspace(r,o,i)]}case"Multinomial":{const r=IU("logits",e,t,n),o=IU("numSamples",e,t,n),i=IU("seed",e,t,n);return[a.multinomial(r,o,i)]}case"OneHot":{const r=IU("indices",e,t,n),o=IU("depth",e,t,n),i=IU("onValue",e,t,n),s=IU("offValue",e,t,n),c=IU("dtype",e,t,n);return[a.oneHot(r,o,i,s,c)]}case"Ones":return[a.ones(IU("shape",e,t,n),IU("dtype",e,t,n))];case"OnesLike":return[a.onesLike(IU("x",e,t,n))];case"RandomStandardNormal":return[a.randomStandardNormal(IU("shape",e,t,n),IU("dtype",e,t,n),IU("seed",e,t,n))];case"RandomUniform":return[a.randomUniform(IU("shape",e,t,n),IU("minval",e,t,n),IU("maxval",e,t,n),IU("dtype",e,t,n))];case"RandomUniformInt":return[a.randomUniformInt(IU("shape",e,t,n),IU("minval",e,t,n),IU("maxval",e,t,n),IU("seed",e,t,n))];case"Range":{const r=IU("start",e,t,n),o=IU("stop",e,t,n),i=IU("step",e,t,n);return[a.range(r,o,i,IU("dtype",e,t,n))]}case"TruncatedNormal":{const r=IU("shape",e,t,n),o=IU("mean",e,t,n),i=IU("stdDev",e,t,n),s=IU("seed",e,t,n);return[a.truncatedNormal(r,o,i,IU("dtype",e,t,n),s)]}case"Zeros":return[a.zeros(IU("shape",e,t,n),IU("dtype",e,t,n))];case"ZerosLike":return[a.zerosLike(IU("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"dynamic":return async function(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:N;switch(e.op){case"NonMaxSuppressionV5":{const{boxes:a,scores:o,maxOutputSize:i,iouThreshold:s,scoreThreshold:c,softNmsSigma:u}=kV(e,t,n),l=await r.image.nonMaxSuppressionWithScoreAsync(a,o,i,s,c,u);return[l.selectedIndices,l.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:a,scores:o,maxOutputSize:i,iouThreshold:s,scoreThreshold:c}=kV(e,t,n),u=IU("padToMaxOutputSize",e,t,n),l=await r.image.nonMaxSuppressionPaddedAsync(a,o,i,s,c,u);return[l.selectedIndices,l.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:a,scores:o,maxOutputSize:i,iouThreshold:s,scoreThreshold:c}=kV(e,t,n);return[await r.image.nonMaxSuppressionAsync(a,o,i,s,c)]}case"Where":{const a=r.cast(IU("condition",e,t,n),"bool"),o=[await r.whereAsync(a)];return a.dispose(),o}case"ListDiff":return r.setdiff1dAsync(IU("x",e,t,n),IU("y",e,t,n));default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n);case"evaluation":return r((()=>function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:N;switch(e.op){case"LowerBound":{const r=IU("sortedSequence",e,t,n),o=IU("values",e,t,n);return[a.lowerBound(r,o)]}case"TopKV2":{const r=IU("x",e,t,n),o=IU("k",e,t,n),i=IU("sorted",e,t,n),s=a.topk(r,o,i);return[s.values,s.indices]}case"UpperBound":{const r=IU("sortedSequence",e,t,n),o=IU("values",e,t,n);return[a.upperBound(r,o)]}case"Unique":{const r=IU("x",e,t,n),o=a.unique(r);return[o.values,o.indices]}case"UniqueV2":{const r=IU("x",e,t,n),o=IU("axis",e,t,n),i=a.unique(r,o);return[i.values,i.indices]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"image":return r((()=>function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:N;switch(e.op){case"ResizeBilinear":{const r=IU("images",e,t,n),o=IU("size",e,t,n),i=IU("alignCorners",e,t,n),s=IU("halfPixelCenters",e,t,n);return[a.image.resizeBilinear(r,[o[0],o[1]],i,s)]}case"ResizeNearestNeighbor":{const r=IU("images",e,t,n),o=IU("size",e,t,n),i=IU("alignCorners",e,t,n),s=IU("halfPixelCenters",e,t,n);return[a.image.resizeNearestNeighbor(r,[o[0],o[1]],i,s)]}case"CropAndResize":{const r=IU("image",e,t,n),o=IU("boxes",e,t,n),i=IU("boxInd",e,t,n),s=IU("cropSize",e,t,n),c=IU("method",e,t,n),u=IU("extrapolationValue",e,t,n);return[a.image.cropAndResize(r,o,i,s,c,u)]}case"ImageProjectiveTransformV3":{const r=IU("images",e,t,n),o=IU("transforms",e,t,n),i=IU("outputShape",e,t,n),s=IU("fillValue",e,t,n),c=IU("interpolation",e,t,n),u=IU("fillMode",e,t,n);return[a.image.transform(r,o,c.toLowerCase(),u.toLowerCase(),s,i)]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"graph":return r((()=>function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:N;switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":const r=IU("default",e,t,n);return[NU(e.name,t,n)||r];case"Placeholder":return[NU(e.name,t,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":case"Snapshot":return[OU(IU("x",e,t,n))];case"IdentityN":return IU("x",e,t,n).map((e=>OU(e)));case"Shape":return[a.tensor1d(IU("x",e,t,n).shape,"int32")];case"ShapeN":return IU("x",e,t,n).map((e=>a.tensor1d(e.shape)));case"Size":return[a.scalar(IU("x",e,t,n).size,"int32")];case"Rank":return[a.scalar(IU("x",e,t,n).rank,"int32")];case"NoOp":return[a.scalar(1)];case"Print":const o=IU("x",e,t,n),i=IU("data",e,t,n),s=IU("message",e,t,n),c=IU("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(s);for(let e=0;e<i.length;e++)console.log(Array.prototype.slice.call(i[e].dataSync()).slice(0,c));return[o];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"logical":return r((()=>function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:N;switch(e.op){case"Equal":return[a.equal(IU("a",e,t,n),IU("b",e,t,n))];case"NotEqual":return[a.notEqual(IU("a",e,t,n),IU("b",e,t,n))];case"Greater":return[a.greater(IU("a",e,t,n),IU("b",e,t,n))];case"GreaterEqual":return[a.greaterEqual(IU("a",e,t,n),IU("b",e,t,n))];case"Less":return[a.less(IU("a",e,t,n),IU("b",e,t,n))];case"LessEqual":return[a.lessEqual(IU("a",e,t,n),IU("b",e,t,n))];case"LogicalAnd":return[a.logicalAnd(IU("a",e,t,n),IU("b",e,t,n))];case"LogicalNot":return[a.logicalNot(IU("a",e,t,n))];case"LogicalOr":return[a.logicalOr(IU("a",e,t,n),IU("b",e,t,n))];case"Select":case"SelectV2":return[a.where(IU("condition",e,t,n),IU("a",e,t,n),IU("b",e,t,n))];case"BitwiseAnd":return[a.bitwiseAnd(IU("a",e,t,n),IU("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"matrices":return r((()=>function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:N;switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[a.matMul(IU("a",e,t,n),IU("b",e,t,n),IU("transposeA",e,t,n),IU("transposeB",e,t,n))];case"Einsum":return[a.einsum(IU("equation",e,t,n),...IU("tensors",e,t,n))];case"Transpose":return[a.transpose(IU("x",e,t,n),IU("perm",e,t,n))];case"_FusedMatMul":const[r,o]=IU("fusedOps",e,t,n),i="biasadd"===r,s="prelu"===o,c=IU("numArgs",e,t,n),u=IU("leakyreluAlpha",e,t,n);if(i){if(s&&2!==c)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&1!==c)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[l,d]=IU("args",e,t,n);return[a.fused.matMul({a:IU("a",e,t,n),b:IU("b",e,t,n),transposeA:IU("transposeA",e,t,n),transposeB:IU("transposeB",e,t,n),bias:l,activation:o,preluActivationWeights:d,leakyreluAlpha:u})];case"MatrixBandPart":return[a.linalg.bandPart(IU("a",e,t,n),IU("numLower",e,t,n),IU("numUpper",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"normalization":return r((()=>function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:N;switch(e.op){case"EuclideanNorm":return[a.euclideanNorm(IU("x",e,t,n),IU("axis",e,t,n),IU("keepDims",e,t,n))];case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[a.batchNorm(IU("x",e,t,n),IU("mean",e,t,n),IU("variance",e,t,n),IU("offset",e,t,n),IU("scale",e,t,n),IU("epsilon",e,t,n))];case"LRN":return[a.localResponseNormalization(IU("x",e,t,n),IU("radius",e,t,n),IU("bias",e,t,n),IU("alpha",e,t,n),IU("beta",e,t,n))];case"Softmax":return[a.softmax(IU("x",e,t,n))];case"LogSoftmax":return[a.logSoftmax(IU("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"ragged":return r((()=>function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:N;switch(e.op){case"RaggedGather":{const{outputNestedSplits:r,outputDenseValues:o}=a.raggedGather(IU("paramsNestedSplits",e,t,n),IU("paramsDenseValues",e,t,n),IU("indices",e,t,n),IU("outputRaggedRank",e,t,n));return r.concat(o)}case"RaggedRange":{const{rtNestedSplits:r,rtDenseValues:o}=a.raggedRange(IU("starts",e,t,n),IU("limits",e,t,n),IU("splits",e,t,n));return[r,o]}case"RaggedTensorToTensor":return[a.raggedTensorToTensor(IU("shape",e,t,n),IU("values",e,t,n),IU("defaultValue",e,t,n),IU("rowPartitionTensors",e,t,n),IU("rowPartitionTypes",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"reduction":return r((()=>function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:N;switch(e.op){case"Max":{const r=IU("axis",e,t,n),o=IU("keepDims",e,t,n);return[a.max(IU("x",e,t,n),r,o)]}case"Mean":{const r=IU("axis",e,t,n),o=IU("keepDims",e,t,n);return[a.mean(IU("x",e,t,n),r,o)]}case"Min":{const r=IU("axis",e,t,n),o=IU("keepDims",e,t,n);return[a.min(IU("x",e,t,n),r,o)]}case"Sum":{const r=IU("axis",e,t,n),o=IU("keepDims",e,t,n);return[a.sum(IU("x",e,t,n),r,o)]}case"All":{const r=IU("axis",e,t,n),o=IU("keepDims",e,t,n);return[a.all(IU("x",e,t,n),r,o)]}case"Any":{const r=IU("axis",e,t,n),o=IU("keepDims",e,t,n);return[a.any(IU("x",e,t,n),r,o)]}case"ArgMax":{const r=IU("axis",e,t,n);return[a.argMax(IU("x",e,t,n),r)]}case"ArgMin":{const r=IU("axis",e,t,n);return[a.argMin(IU("x",e,t,n),r)]}case"Prod":{const r=IU("axis",e,t,n),o=IU("keepDims",e,t,n);return[a.prod(IU("x",e,t,n),r,o)]}case"Cumprod":{const r=IU("axis",e,t,n),o=IU("exclusive",e,t,n),i=IU("reverse",e,t,n);return[a.cumprod(IU("x",e,t,n),r,o,i)]}case"Cumsum":{const r=IU("axis",e,t,n),o=IU("exclusive",e,t,n),i=IU("reverse",e,t,n);return[a.cumsum(IU("x",e,t,n),r,o,i)]}case"Bincount":const r=IU("x",e,t,n),o=IU("weights",e,t,n),i=IU("size",e,t,n);return[a.bincount(r,o,i)];case"DenseBincount":{const r=IU("x",e,t,n),o=IU("weights",e,t,n),i=IU("size",e,t,n),s=IU("binaryOutput",e,t,n);return[a.denseBincount(r,o,i,s)]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"slice_join":return r((()=>function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:N;switch(e.op){case"ConcatV2":case"Concat":{const r=IU("n",e,t,n),o=IU("axis",e,t,n);let i=IU("tensors",e,t,n);return i=i.slice(0,r),[a.concat(i,o)]}case"Gather":{const r=IU("x",e,t,n),o=IU("indices",e,t,n);return[a.gather(r,a.cast(o,"int32"),0)]}case"GatherV2":{const r=IU("axis",e,t,n),o=IU("batchDims",e,t,n),i=IU("x",e,t,n),s=IU("indices",e,t,n);return[a.gather(i,a.cast(s,"int32"),r,o)]}case"Reverse":{const r=IU("dims",e,t,n),o=[];for(let e=0;e<r.length;e++)r[e]&&o.push(e);const i=IU("x",e,t,n);return[a.reverse(i,o)]}case"ReverseV2":{const r=IU("axis",e,t,n),o=IU("x",e,t,n);return[a.reverse(o,r)]}case"Slice":{const r=IU("begin",e,t,n),o=IU("size",e,t,n);return[a.slice(IU("x",e,t,n),r,o)]}case"StridedSlice":{const r=IU("begin",e,t,n),o=IU("end",e,t,n),i=IU("strides",e,t,n),s=IU("beginMask",e,t,n),c=IU("endMask",e,t,n),u=IU("ellipsisMask",e,t,n),l=IU("newAxisMask",e,t,n),d=IU("shrinkAxisMask",e,t,n),p=IU("x",e,t,n);return[a.stridedSlice(p,r,o,i,s,c,u,l,d)]}case"Pack":return Zi((()=>{const r=IU("axis",e,t,n),o=IU("tensors",e,t,n),i=o[0].shape,s=a.squeeze(o[0]).shape,c=o.map((e=>{const t=Tt(e.shape,i);if(!t&&!Tt(a.squeeze(e).shape,s))throw new Error("the input tensors shape does not match");return t?e:a.reshape(e,i)}));return[a.stack(c,r)]}));case"Unpack":{const r=IU("axis",e,t,n),o=IU("tensor",e,t,n);return a.unstack(o,r)}case"Tile":{const r=IU("reps",e,t,n);return[a.tile(IU("x",e,t,n),r)]}case"Split":case"SplitV":{const r=IU("axis",e,t,n),o=IU("numOrSizeSplits",e,t,n),i=IU("x",e,t,n);return a.split(i,o,r)}case"ScatterNd":{const r=IU("indices",e,t,n),o=IU("values",e,t,n),i=IU("shape",e,t,n);return[a.scatterND(r,o,i)]}case"GatherNd":{const r=IU("x",e,t,n),o=IU("indices",e,t,n);return[a.gatherND(r,o)]}case"SparseToDense":{const r=IU("sparseIndices",e,t,n),o=IU("outputShape",e,t,n),i=IU("sparseValues",e,t,n),s=IU("defaultValue",e,t,n);return[a.sparseToDense(r,i,o,i.dtype===s.dtype?s:a.cast(s,i.dtype))]}case"TensorScatterUpdate":{const r=IU("indices",e,t,n),o=IU("values",e,t,n),i=IU("tensor",e,t,n);return[a.tensorScatterUpdate(i,r,o)]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"sparse":return r((()=>function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:N;switch(e.op){case"SparseFillEmptyRows":{const{outputIndices:r,outputValues:o,emptyRowIndicator:i,reverseIndexMap:s}=a.sparse.sparseFillEmptyRows(IU("indices",e,t,n),IU("values",e,t,n),IU("denseShape",e,t,n),IU("defaultValue",e,t,n));return[r,o,i,s]}case"SparseReshape":{const{outputIndices:r,outputShape:o}=a.sparse.sparseReshape(IU("inputIndices",e,t,n),IU("inputShape",e,t,n),IU("newShape",e,t,n));return[r,o]}case"SparseSegmentMean":return[a.sparse.sparseSegmentMean(IU("data",e,t,n),IU("indices",e,t,n),IU("segmentIds",e,t,n))];case"SparseSegmentSum":return[a.sparse.sparseSegmentSum(IU("data",e,t,n),IU("indices",e,t,n),IU("segmentIds",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"spectral":return r((()=>function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:N;switch(e.op){case"FFT":return[a.fft(IU("x",e,t,n))];case"IFFT":return[a.ifft(IU("x",e,t,n))];case"RFFT":return[a.rfft(IU("x",e,t,n))];case"IRFFT":return[a.irfft(IU("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"string":return r((()=>function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:N;switch(e.op){case"StaticRegexReplace":return[a.string.staticRegexReplace(IU("input",e,t,n),IU("pattern",e,t,n),IU("rewrite",e,t,n),IU("replaceGlobal",e,t,n))];case"StringNGrams":{const{nGrams:r,nGramsSplits:o}=a.string.stringNGrams(IU("data",e,t,n),IU("dataSplits",e,t,n),IU("separator",e,t,n),IU("nGramWidths",e,t,n),IU("leftPad",e,t,n),IU("rightPad",e,t,n),IU("padWidth",e,t,n),IU("preserveShortSequences",e,t,n));return[r,o]}case"StringSplit":{const{indices:r,values:o,shape:i}=a.string.stringSplit(IU("input",e,t,n),IU("delimiter",e,t,n),IU("skipEmpty",e,t,n));return[r,o,i]}case"StringToHashBucketFast":return[a.string.stringToHashBucketFast(IU("input",e,t,n),IU("numBuckets",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"transformation":return r((()=>function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:N;switch(e.op){case"Cast":return[a.cast(IU("x",e,t,n),IU("dtype",e,t,n))];case"ExpandDims":{const r=IU("axis",e,t,n);return[a.expandDims(IU("x",e,t,n),r)]}case"Squeeze":{const r=IU("axis",e,t,n);return[a.squeeze(IU("x",e,t,n),r)]}case"Reshape":return[a.reshape(IU("x",e,t,n),IU("shape",e,t,n))];case"EnsureShape":return[a.ensureShape(IU("x",e,t,n),IU("shape",e,t,n))];case"MirrorPad":return[a.mirrorPad(IU("x",e,t,n),IU("padding",e,t,n),IU("mode",e,t,n))];case"PadV2":case"Pad":return[a.pad(IU("x",e,t,n),IU("padding",e,t,n),IU("constantValue",e,t,n))];case"SpaceToBatchND":{const r=IU("blockShape",e,t,n),o=IU("paddings",e,t,n);return[a.spaceToBatchND(IU("x",e,t,n),r,o)]}case"BatchToSpaceND":{const r=IU("blockShape",e,t,n),o=IU("crops",e,t,n);return[a.batchToSpaceND(IU("x",e,t,n),r,o)]}case"DepthToSpace":{const r=IU("blockSize",e,t,n),o=IU("dataFormat",e,t,n).toUpperCase();return[a.depthToSpace(IU("x",e,t,n),r,o)]}case"BroadcastTo":return[a.broadcastTo(IU("x",e,t,n),IU("shape",e,t,n))];case"BroadcastArgs":return[a.broadcastArgs(IU("s0",e,t,n),IU("s1",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"hash_table":return(async(e,t,n,a)=>{switch(e.op){case"HashTable":case"HashTableV2":{const r=a.getHashTableHandleByName(e.name);if(null!=r)return[r];{const r=IU("keyDType",e,t,n),o=IU("valueDType",e,t,n),i=new SV(r,o);return a.addHashTable(e.name,i),[i.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{const r=IU("tableHandle",e,t,n,a),o=IU("keys",e,t,n),i=IU("values",e,t,n),s=a.getHashTableById(r.id);return[await s.import(o,i)]}case"LookupTableFind":case"LookupTableFindV2":{const r=IU("tableHandle",e,t,n,a),o=IU("keys",e,t,n),i=IU("defaultValue",e,t,n),s=a.getHashTableById(r.id);return[await s.find(o,i)]}case"LookupTableSize":case"LookupTableSizeV2":{const r=IU("tableHandle",e,t,n,a);return[a.getHashTableById(r.id).tensorSize()]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}})(e,t,n,a);case"custom":const o=CU(e.op);if(o&&o.customExecutor)return o.customExecutor(new hV(e,t,n));throw TypeError("Custom op ".concat(e.op," is not registered."));default:throw TypeError("Unknown op '".concat(e.op,"'. File an issue at ")+"https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()")}})(e,t,n);return $t(o)?o.then((e=>[].concat(e))):[].concat(o)}class IV{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4?arguments[4]:void 0;this.weightMap=e,this.tensorArrayMap=t,this.tensorListMap=n,this.functionMap=a,this.parseNodeNameCache=r,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,t){return{id:e,frameName:t,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const e=[];for(let t=0;t<this.contexts.length-1;t++){const n=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(n))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map((e=>0===e.id&&0===e.iterationId?"":"".concat(e.frameName,"-").concat(e.iterationId))).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}nextIteration(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");{this.contexts=this.contexts.slice(),this.lastId++;const e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(const t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(const t in this.tensorListMap)this.tensorListMap[t].clearAndClose(e)}}function NV(e,t,n,a){const r=new Set,o=[];let i=null,s=null;const c=new Set,u=new Set(Object.keys(e).map((e=>RU(e)[0])));a=a||[];const l=new Set(a.map((e=>RU(e.name)[0]))),d=[...t];for(;d.length>0;){const e=d.pop();(OV(e)||FV(e)||DV(e))&&null==i&&(i=e,s=i.children.map((e=>e.name)).filter((e=>r.has(e)))),r.add(e.name),null==n[e.name]&&(u.has(e.name)||l.has(e.name)||(0!==e.inputs.length?e.inputs.forEach((e=>{c.has(e.name)||(c.add(e.name),d.push(e))})):o.push(e.name)))}return{inputs:e,outputs:t,usedNodes:r,missingInputs:o,dynamicNode:i,syncInputs:s}}function TV(e,t){const{usedNodes:n,inputs:a}=t,r=Object.keys(a).map((e=>RU(e)[0])).map((t=>e.nodes[t])),o=e.initNodes||[],i=e=>n.has("string"===typeof e?e:e.name);function s(e){return[...new Map(e.map((e=>[e.name,e]))).values()]}const c=s([...r,...e.weights,...o]).filter(i),u=s([...c,...Object.values(e.nodes)]).filter(i),l=new Map(u.map((e=>[e.name,e]))),d={};for(const m of u){d[m.name]=d[m.name]||0;for(const e of m.children)i(e)||(d[e.name]=Number.POSITIVE_INFINITY),d[e.name]=(d[e.name]||0)+1}const p=Object.entries(d).filter((e=>{let[,t]=e;return 0===t})).map((e=>{let[t]=e;return t})),h=[...p];for(;p.length>0;){const e=p.pop(),t=l.get(e);for(const n of t.children.filter(i))0===--d[n.name]&&(h.push(n.name),p.push(n.name))}const f=function(e,t){const n=new Map(e.map((e=>[e.name,e]))),a=t.map((e=>e.name)),r=new Set(a);for(;a.length>0;){const e=a.pop(),t=n.get(e);for(const o of t.children)n.has(o.name)&&!r.has(o.name)&&(r.add(o.name),a.push(o.name))}const o=e.filter((e=>r.has(e.name)));return o}(h.map((e=>l.get(e))),c);return function(e,t){const n=new Map(e.map(((e,t)=>[e.name,t]))),a=new Set(t.map((e=>e.name))),r=e=>a.has("string"===typeof e?e:e.name),o=new Set(e.map((e=>e.name))),i=e=>o.has("string"===typeof e?e:e.name);for(const s of e){for(const e of s.children.filter(i)){if(!n.has(e.name))throw new _V("Child ".concat(e.name," of node ").concat(s.name," is unreachable."));if(n.get(s.name)>n.get(e.name))throw new _V("Node ".concat(s.name," is scheduled to run after its child ").concat(e.name,"."))}if(!r(s))for(const e of s.inputs){if(!n.has(e.name))throw new _V("Input ".concat(e.name," of node ").concat(s.name," is unreachable."));if(n.get(e.name)>n.get(s.name))throw new _V("Node ".concat(s.name," is scheduled to run before its input ").concat(e.name,"."))}}}(f,c),f}class _V extends Error{constructor(e){super("NodesExecutionOrderError: ".concat(e))}}const EV=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),RV=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),AV=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function OV(e){return EV.has(e.op)}function FV(e){return RV.has(e.op)}function DV(e){return AV.has(e.op)}class MV{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){const t=Object.keys(e).map((t=>e[t].map((e=>e.id))));this._weightIds=[].concat(...t),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map((e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0})))}get outputs(){return this._outputs.map((e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0})))}get inputNodes(){return this._inputs.map((e=>e.signatureKey||e.name))}get outputNodes(){return this._outputs.map((e=>{const t=e.signatureKey||e.name;return e.defaultOutput?"".concat(t,":").concat(e.defaultOutput):t}))}get functions(){return Object.keys(this._functions).reduce(((e,t)=>(e[t]=this._functions[t].signature,e)),{})}constructor(e,t){this.graph=e,this.parent=t,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,null!=e.functions&&Object.keys(e.functions).forEach((t=>{this._functionExecutorMap[t]=new MV(e.functions[t],this)}))}getCompilationKey(e,t){const n=e.map((e=>e.name)).sort(),a=t.map((e=>e.name)).sort();return n.join(this.SEPARATOR)+"--"+a.join(this.SEPARATOR)}compile(e,t){const n=NV(e,t,this.weightMap,this._initNodes),{missingInputs:a,dynamicNode:r,syncInputs:o}=n;if(null!=r)throw new Error("This execution contains the node '".concat(r.name,"', which has ")+"the dynamic op '".concat(r.op,"'. Please use ")+"model.executeAsync() instead. Alternatively, to avoid the "+"dynamic ops, specify the inputs [".concat(o,"]"));if(a.length>0){const n=t.map((e=>e.name)),r=Object.keys(e);throw new Error("Cannot compute the outputs [".concat(n,"] from the provided inputs ")+"[".concat(r,"]. Missing the following inputs: [").concat(a,"]"))}const i=TV(this.graph,n),s=function(e){const t=new Map(e.map(((e,t)=>[e.name,t]))),n=Number.MAX_SAFE_INTEGER,a=e.map(((e,t)=>OV(e)?n:t)),r=e=>{const n=a[t.get(e.name)];return null==n?-1:n},o=e.map(((e,t)=>e.children.map(r).reduce(((e,t)=>Math.max(e,t)),a[t]))),i=new Map;for(let s=0;s<e.length;++s){const t=o[s];if(t===n)continue;const a=e[s],r=e[t];i.has(r.name)||i.set(r.name,[]),i.get(r.name).push(a)}return i}(i);return{orderedNodes:i,nodeLiveUntilMap:s}}cloneAndKeepTensor(e){if(null==e)return null;const t=e.clone();return Ji(t),t}cloneTensorList(e){if(!e)return null;const t=e.map((e=>this.cloneAndKeepTensor(e)));return t}cloneTensorMap(e){return Object.fromEntries(Object.entries(e).map((e=>{let[t,n]=e;return[t,this.cloneTensorList(n)]})))}execute(e,t){this.disposeIntermediateTensors(),e=this.mapInputs(e);const n=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);const a=n.map((e=>this.graph.nodes[RU(e)[0]])),r=t.map((e=>RU(e)[0])),o=new Set(r);let i=r.map((e=>this.graph.nodes[e]));0===i.length&&(i=this._outputs);const s=this.getCompilationKey(a,i);let c=this.compiledMap.get(s);null==c&&(c=this.compile(e,i),this.compiledMap.set(s,c));try{this.keepIntermediateTensors=nn().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(jj){this.keepIntermediateTensors=!1,console.warn(jj.message)}const u={},l={};return Zi((()=>{const n=new IV(this.weightMap,u,l,this.functionExecutorMap,this.parseNodeNameCache),a=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(e).forEach((t=>{const[r,o]=RU(t,n),i=[];i[o]=e[t],a[r]=i,this.keepIntermediateTensors&&(this.clonedTensorsMap[r]=this.cloneTensorList(i))}));const r=this.getFrozenTensorIds(a),{orderedNodes:i,nodeLiveUntilMap:s}=c;for(const e of i){if(a[e.name])continue;const t=CV(e,a,n,this._resourceManager);if($t(t))throw new Error("The execution of the op '".concat(e.op,"' returned a promise. ")+"Please use model.executeAsync() instead.");a[e.name]=t,this.keepIntermediateTensors&&(this.clonedTensorsMap[e.name]=this.cloneTensorList(t)),this.checkTensorForDisposalWithNodeLiveUntilInfo(e,a,n,r,o,s.get(e.name))}return null==this.parent&&n.dispose(r),t.map((e=>NU(e,a,n)))}))}getFrozenTensorIds(e){const t=[].concat.apply([],Object.keys(e).map((t=>e[t])).map((e=>e.map((e=>e.id)))));return new Set(t)}checkTensorForDisposal(e,t,n,a,r,o,i){if(!OV(t)&&!o.has(e)){for(const a of n[e])null!=a&&(i[a.id]=(i[a.id]||0)+t.children.length);for(const e of t.inputs){if(OV(e))continue;const t=TU(e.name,n,a);if(null!=t)for(const e of t){if(!e||e.kept||r.has(e.id))continue;const t=i[e.id];1===t?(e.dispose(),delete i[e.id]):null!=t&&i[e.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(e,t,n,a,r,o){function i(e){return OV(e)||r.has(e.name)}if(!OV(e)&&null!=o)for(const s of o){if(i(s))continue;const e=TU(s.name,t,n);for(const t of e)!t||t.kept||a.has(t.id)||t.dispose()}}async executeAsync(e,t){return this._executeAsync(e,t)}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach((e=>{for(const t of e)t&&!t.isDisposed&&t.dispose()})),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}async _executeAsync(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};this.disposeIntermediateTensors(),n||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t));try{this.keepIntermediateTensors=nn().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(jj){this.keepIntermediateTensors=!1,console.warn(jj.message)}const o=new IV(this.weightMap,a,r,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));const i=await this.executeWithControlFlow(e,o,t,n),s=t.map((e=>NU(e,i,o))),c=s.map((e=>e.id)),u=Object.keys(e).map((t=>e[t].id)),l=new Set([...c,...u,...this.weightIds]);return Object.values(i).forEach((e=>{e.forEach((e=>{!e||e.isDisposed||l.has(e.id)||e.dispose()}))})),null==this.parent&&o.dispose(l),s}async executeFunctionAsync(e,t,n){const a=e.reduce(((e,t,n)=>(e[this.inputs[n].name]=t,e)),{});return this._executeAsync(a,this.outputNodes,!0,t,n)}async executeWithControlFlow(e,t,n,a){const r=Object.keys(e),o=r.map((e=>this.graph.nodes[RU(e)[0]])),i=n.map((e=>RU(e)[0])),s=new Set(i);let c=i.map((e=>this.graph.nodes[e]));0===c.length&&(c=this._outputs);const{usedNodes:u,missingInputs:l,dynamicNode:d,syncInputs:p}=NV(e,c,this.weightMap,this._initNodes),h=[...o,...this.graph.weights,...this._initNodes||[]].map((e=>({node:e,contexts:t.currentContext}))),f=Object.assign({},this.weightMap);Object.keys(e).forEach((t=>{const[n,a]=RU(t),r=[];r[a]=e[t],f[n]=r}));const m={},g=this.getFrozenTensorIds(f),y={};for(;h.length>0;){const e=this.processStack(o,h,t,f,y,g,s,m,u);await Promise.all(e)}null!=d||a||console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const b=c.filter((e=>!OV(e)&&!NU(e.name,f,t))).map((e=>e.name));if(b.length>0){let e="";throw null!=d&&(e="Alternatively, to avoid the dynamic ops, use model.execute() "+"and specify the inputs [".concat(p,"]")),new Error("Cannot compute the outputs [".concat(b,"] from the provided ")+"inputs [".concat(r,"]. Consider providing the following inputs: ")+"[".concat(l,"]. ").concat(e))}return f}processStack(e,t,n,a,r,o,i,s,c){const u=[];for(;t.length>0;){const e=t.pop();n.currentContext=e.contexts;let l="";if("Enter"===e.node.op&&IU("isConstant",e.node,a,n)&&([l]=_U(e.node.name,n)),null==a[e.node.name]){const d=CV(e.node,a,n,this._resourceManager);l||([l]=_U(e.node.name,n));const p=n.currentContext;$t(d)?u.push(d.then((u=>(a[l]=u,this.keepIntermediateTensors&&(this.clonedTensorsMap[l]=this.cloneTensorList(u)),n.currentContext=p,this.checkTensorForDisposal(l,e.node,a,n,o,i,s),this.processChildNodes(e.node,t,n,a,r,c),u)))):(a[l]=d,this.keepIntermediateTensors&&(this.clonedTensorsMap[l]=this.cloneTensorList(d)),this.checkTensorForDisposal(l,e.node,a,n,o,i,s),this.processChildNodes(e.node,t,n,a,r,c))}else this.processChildNodes(e.node,t,n,a,r,c)}return u}processChildNodes(e,t,n,a,r,o){e.children.forEach((e=>{const[i]=_U(e.name,n);!r[i]&&o.has(e.name)&&("Merge"===e.op?e.inputNames.some((e=>!!NU(e,a,n)))&&(r[i]=!0,t.push({contexts:n.currentContext,node:e})):e.inputNames.every((e=>!!NU(e,a,n)))&&(r[i]=!0,t.push({contexts:n.currentContext,node:e})))}))}dispose(){Object.keys(this.weightMap).forEach((e=>this.weightMap[e].forEach((e=>e.dispose()))))}checkInputShapeAndType(e){Object.keys(e).forEach((t=>{const n=e[t],[a]=RU(t),r=this.graph.nodes[a];if(r.attrParams.shape&&r.attrParams.shape.value){const e=r.attrParams.shape.value;kt(e.length===n.shape.length&&n.shape.every(((t,n)=>-1===e[n]||e[n]===t)),(()=>"The shape of dict['".concat(r.name,"'] provided in ")+"model.execute(dict) must be [".concat(e,"], but was ")+"[".concat(n.shape,"]")))}r.attrParams.dtype&&r.attrParams.dtype.value&&kt(n.dtype===r.attrParams.dtype.value,(()=>"The dtype of dict['".concat(r.name,"'] provided in ")+"model.execute(dict) must be "+"".concat(r.attrParams.dtype.value,", but was ").concat(n.dtype)))}))}mapInputs(e){var t,n;const a={};for(const r in e){const o=null===(n=null===(t=this._signature)||void 0===t?void 0:t.inputs)||void 0===n?void 0:n[r];null!=o?a[o.name]=e[r]:a[r]=e[r]}return a}checkInputs(e){const t=Object.keys(e).filter((e=>{const[t]=RU(e);return null==this.graph.nodes[t]}));if(t.length>0)throw new Error("The dict provided in model.execute(dict) has "+"keys: [".concat(t,"] that are not part of graph"))}mapOutputs(e){return e.map((e=>{var t,n;const a=null===(n=null===(t=this._signature)||void 0===t?void 0:t.outputs)||void 0===n?void 0:n[e];return null!=a?a.name:e}),{})}checkOutputs(e){e.forEach((e=>{const[t]=RU(e);if(!this.graph.nodes[t])throw new Error("The output '".concat(e,"' is not found in the graph"))}))}}class PV{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.hashTableNameToHandle=e,this.hashTableMap=t}addHashTable(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}const LV="?tfjs-format=file",zV="model.json";class BV{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;this.modelUrl=t,this.loadOptions=n,this.version="n/a",this.io=a,null==n&&(this.loadOptions={}),this.resourceManager=new PV}findIOHandler(){const e=this.modelUrl;if(null!=e.load)this.handler=e;else if(null!=this.loadOptions.requestInit)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{const t=this.io.getLoadHandlers(e,this.loadOptions);if(0===t.length)t.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(t.length>1)throw new Error("Found more than one (".concat(t.length,") load handlers for ")+"URL '".concat([e],"'"));this.handler=t[0]}}load(){if(this.findIOHandler(),null==this.handler.load)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=this.handler.load();return $t(e)?e.then((e=>null==e.getWeightStream?this.loadSync(e):this.loadStreaming(e))):this.loadSync(e)}loadSync(e){const t=this.io.decodeWeights(e.weightData,e.weightSpecs);return this.loadWithWeightMap(e,t)}async loadStreaming(e){if(null==e.getWeightStream)throw new Error("Model artifacts missing streamWeights function");const t=await ls(e.getWeightStream(),e.weightSpecs);return this.loadWithWeightMap(e,t)}loadWithWeightMap(e,t){this.artifacts=e;const n=this.artifacts.modelTopology;let a=this.artifacts.signature;if(null!=this.artifacts.userDefinedMetadata){const e=this.artifacts.userDefinedMetadata;null!=e.signature&&(a=e.signature),null!=e.structuredOutputKeys&&(this.structuredOutputKeys=e.structuredOutputKeys)}if(this.signature=a,this.version="".concat(n.versions.producer,".").concat(n.versions.minConsumer),this.executor=new MV($U.Instance.transformGraph(n,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(t),this.executor.resourceManager=this.resourceManager,null!=e.modelInitializer&&null!=e.modelInitializer.node){const t=$U.Instance.transformGraph(e.modelInitializer);this.initializer=new MV(t),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=e.initializerSignature}return!0}async save(e,t){if("string"===typeof e){const t=this.io.getSaveHandlers(e);if(0===t.length)throw new Error("Cannot find any save handlers for URL '".concat(e,"'"));if(t.length>1)throw new Error("Found more than one (".concat(t.length,") save handlers for ")+"URL '".concat(e,"'"));e=t[0]}if(null==e.save)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}addStructuredOutputNames(e){if(this.structuredOutputKeys){const t={};return(e instanceof pi?[e]:e).forEach(((e,n)=>t[this.structuredOutputKeys[n]]=e)),t}return e}predict(e,t){const n=this.execute(e,this.outputNodes);return this.addStructuredOutputNames(n)}async predictAsync(e,t){const n=await this.executeAsync(e,this.outputNodes);return this.addStructuredOutputNames(n)}normalizeInputs(e){var t;if(!(e instanceof pi)&&!Array.isArray(e)){const n=null===(t=this.signature)||void 0===t?void 0:t.inputs;if(null!=n)for(const t in n){const a=n[t];null!=a.resourceId&&(e[t]=this.resourceIdToCapturedInput[a.resourceId])}return e}e=Array.isArray(e)?e:[e];const n=Object.keys(this.resourceIdToCapturedInput).length;if(e.length+n!==this.inputNodes.length)throw new Error("Input tensor count mismatch, the graph model has ".concat(this.inputNodes.length-n," non-resource placeholders, while there are ").concat(e.length," input tensors provided."));let a=0;return this.inputNodes.reduce(((t,n)=>{var r,o,i;const s=null===(i=null===(o=null===(r=this.signature)||void 0===r?void 0:r.inputs)||void 0===o?void 0:o[n])||void 0===i?void 0:i.resourceId;return t[n]=null!=s?this.resourceIdToCapturedInput[s]:e[a++],t}),{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}executeInitializerGraph(){return null==this.initializer?[]:null==this.initializerSignature?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}async executeInitializerGraphAsync(){return null==this.initializer?[]:null==this.initializerSignature?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))}setResourceIdToCapturedInput(e){if(this.resourceIdToCapturedInput={},this.initializerSignature){const t=this.initializerSignature.outputs,n=Object.keys(t);for(let a=0;a<n.length;a++){const r=t[n[a]];this.resourceIdToCapturedInput[r.resourceId]=e[a]}}}execute(e,t){null==this.resourceIdToCapturedInput&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const n=this.executor.execute(e,t);return n.length>1?n:n[0]}async executeAsync(e,t){null==this.resourceIdToCapturedInput&&this.setResourceIdToCapturedInput(await this.executeInitializerGraphAsync()),e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const n=await this.executor.executeAsync(e,t);return n.length>1?n:n[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce(((t,n)=>(t[n]=[e[n]],t)),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&$i(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}async function WV(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;if(null==t)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");null==n&&(n={}),n.fromTFHub&&"string"===typeof t&&(t=function(e){e.endsWith("/")||(e+="/");return"".concat(e).concat(zV).concat(LV)}(t));const r=new BV(t,n,a);return await r.load(),r}var UV=function(e,t){return(UV=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function VV(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}UV(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var GV=function(){return(GV=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function HV(e,t,n,a){return new(n||(n=Promise))((function(r,o){function i(e){try{c(a.next(e))}catch(e){o(e)}}function s(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((a=a.apply(e,t||[])).next())}))}function jV(e,t){var n,a,r,o,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,a&&(r=2&o[0]?a.return:o[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,o[1])).done)return r;switch(a=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,a=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((r=(r=i.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){i.label=o[1];break}if(6===o[0]&&i.label<r[1]){i.label=r[1],r=o;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(o);break}r[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],a=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function KV(e,t,n){if(n||2===arguments.length)for(var a,r=0,o=t.length;r<o;r++)!a&&r in t||(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}var qV=["nose","left_eye","right_eye","left_ear","right_ear","left_shoulder","right_shoulder","left_elbow","right_elbow","left_wrist","right_wrist","left_hip","right_hip","left_knee","right_knee","left_ankle","right_ankle"],XV=["nose","left_eye_inner","left_eye","left_eye_outer","right_eye_inner","right_eye","right_eye_outer","left_ear","right_ear","mouth_left","mouth_right","left_shoulder","right_shoulder","left_elbow","right_elbow","left_wrist","right_wrist","left_pinky","right_pinky","left_index","right_index","left_thumb","right_thumb","left_hip","right_hip","left_knee","right_knee","left_ankle","right_ankle","left_heel","right_heel","left_foot_index","right_foot_index"],YV={left:[1,2,3,7,9,11,13,15,17,19,21,23,25,27,29,31],right:[4,5,6,8,10,12,14,16,18,20,22,24,26,28,30,32],middle:[0]},QV={left:[1,3,5,7,9,11,13,15],right:[2,4,6,8,10,12,14,16],middle:[0]},ZV=[[0,1],[0,2],[1,3],[2,4],[5,6],[5,7],[5,11],[6,8],[6,12],[7,9],[8,10],[11,12],[11,13],[12,14],[13,15],[14,16]],$V=[[0,1],[0,4],[1,2],[2,3],[3,7],[4,5],[5,6],[6,8],[9,10],[11,12],[11,13],[11,23],[12,14],[14,16],[12,24],[13,15],[15,17],[16,18],[16,20],[15,17],[15,19],[15,21],[16,22],[17,19],[18,20],[23,25],[23,24],[24,26],[25,27],[26,28],[27,29],[28,30],[27,31],[28,32],[29,31],[30,32]];function JV(e){return e instanceof SVGAnimatedLength?e.baseVal.value:e}function eG(e){return HV(this,void 0,void 0,(function(){var t,n;return jV(this,(function(a){switch(a.label){case 0:return t=document.createElement("canvas"),e instanceof pi?[4,ou(e,t)]:[3,2];case 1:return a.sent(),[3,3];case 2:t.width=JV(e.width),t.height=JV(e.height),n=t.getContext("2d"),e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0),a.label=3;case 3:return[2,t]}}))}))}function tG(e){return HV(this,void 0,void 0,(function(){var t,n,a,r,o,i;return jV(this,(function(s){switch(s.label){case 0:return e instanceof pi?(t=e.shape.slice(0,2),n=t[0],a=t[1],r=ImageData.bind,[4,ou(e)]):[3,2];case 1:return[2,new(r.apply(ImageData,[void 0,s.sent(),a,n]))];case 2:return o=document.createElement("canvas"),i=o.getContext("2d"),o.width=JV(e.width),o.height=JV(e.height),i.drawImage(e,0,0),[2,i.getImageData(0,0,o.width,o.height)]}}))}))}function nG(e){return HV(this,void 0,void 0,(function(){var t;return jV(this,(function(n){switch(n.label){case 0:return e instanceof SVGImageElement||e instanceof OffscreenCanvas?[4,eG(e)]:[3,2];case 1:return t=n.sent(),[3,3];case 2:t=e,n.label=3;case 3:return[2,iu(t,4)]}}))}))}function aG(e){if(e<0||e>=256)throw new Error("Mask value must be in range [0, 255] but got ".concat(e));if(!Number.isInteger(e))throw new Error("Mask value must be an integer but got ".concat(e))}var rG={runtime:"mediapipe",enableSmoothing:!0,enableSegmentation:!1,smoothSegmentation:!0,modelType:"full"},oG=function(){function e(e){this.mask=e}return e.prototype.toCanvasImageSource=function(){return HV(this,void 0,void 0,(function(){return jV(this,(function(e){return[2,this.mask]}))}))},e.prototype.toImageData=function(){return HV(this,void 0,void 0,(function(){return jV(this,(function(e){return[2,tG(this.mask)]}))}))},e.prototype.toTensor=function(){return HV(this,void 0,void 0,(function(){return jV(this,(function(e){return[2,nG(this.mask)]}))}))},e.prototype.getUnderlyingType=function(){return"canvasimagesource"},e}();function iG(e){return aG(e),"person"}var sG=function(){function e(e){var t,n=this;switch(this.width=0,this.height=0,this.selfieMode=!1,this.poseSolution=new vU.Pose({locateFile:function(t,n){if(e.solutionPath){var a=e.solutionPath.replace(/\/+$/,"");return"".concat(a,"/").concat(t)}return"".concat(n,"/").concat(t)}}),e.modelType){case"lite":t=0;break;case"heavy":t=2;break;default:t=1}this.poseSolution.setOptions({modelComplexity:t,smoothLandmarks:e.enableSmoothing,enableSegmentation:e.enableSegmentation,smoothSegmentation:e.smoothSegmentation,selfieMode:this.selfieMode}),this.poseSolution.onResults((function(e){if(n.height=e.image.height,n.width=e.image.width,null==e.poseLandmarks)n.poses=[];else{var t=n.translateOutput(e.poseLandmarks,e.poseWorldLandmarks);e.segmentationMask&&(t.segmentation={maskValueToLabel:iG,mask:new oG(e.segmentationMask)}),n.poses=[t]}}))}return e.prototype.translateOutput=function(e,t){var n=this,a={keypoints:e.map((function(e,t){return{x:e.x*n.width,y:e.y*n.height,z:e.z,score:e.visibility,name:XV[t]}}))};return null!=t&&(a.keypoints3D=t.map((function(e,t){return{x:e.x,y:e.y,z:e.z,score:e.visibility,name:XV[t]}}))),a},e.prototype.estimatePoses=function(e,t,n){return HV(this,void 0,void 0,(function(){var a,r;return jV(this,(function(o){switch(o.label){case 0:return t&&t.flipHorizontal&&t.flipHorizontal!==this.selfieMode&&(this.selfieMode=t.flipHorizontal,this.poseSolution.setOptions({selfieMode:this.selfieMode})),e instanceof pi?(r=ImageData.bind,[4,ou(e)]):[3,2];case 1:return a=new(r.apply(ImageData,[void 0,o.sent(),e.shape[1],e.shape[0]])),[3,3];case 2:a=e,o.label=3;case 3:return e=a,[4,this.poseSolution.send({image:e},n)];case 4:return o.sent(),[2,this.poses]}}))}))},e.prototype.dispose=function(){this.poseSolution.close()},e.prototype.reset=function(){this.poseSolution.reset()},e.prototype.initialize=function(){return this.poseSolution.initialize()},e}();function cG(e){return HV(this,void 0,void 0,(function(){var t,n;return jV(this,(function(a){switch(a.label){case 0:return t=function(e){if(null==e)return GV({},rG);var t=GV({},e);return t.runtime="mediapipe",null==t.enableSegmentation&&(t.enableSegmentation=rG.enableSegmentation),null==t.enableSmoothing&&(t.enableSmoothing=rG.enableSmoothing),null==t.smoothSegmentation&&(t.smoothSegmentation=rG.smoothSegmentation),null==t.modelType&&(t.modelType=rG.modelType),t}(e),[4,(n=new sG(t)).initialize()];case 1:return a.sent(),[2,n]}}))}))}function uG(e){return e instanceof pi?{height:e.shape[0],width:e.shape[1]}:{height:e.height,width:e.width}}function lG(e){return e-2*Math.PI*Math.floor((e+Math.PI)/(2*Math.PI))}function dG(e){return e instanceof pi?e:iu(e)}function pG(e,t,n){return hG(n,"inputResolution"),[1/n.width*e[0][0]*t.width,1/n.height*e[0][1]*t.width,e[0][3]*t.width,1/n.width*e[1][0]*t.height,1/n.height*e[1][1]*t.height,e[1][3]*t.height,0,0]}function hG(e,t){kt(0!==e.width,(function(){return"".concat(t," width cannot be 0.")})),kt(0!==e.height,(function(){return"".concat(t," height cannot be 0.")}))}function fG(e,t,n){var a=n.rotationVectorStartKeypointIndex,r=n.rotationVectorEndKeypointIndex,o=e.locationData,i=o.relativeKeypoints[a].x*t.width,s=o.relativeKeypoints[a].y*t.height,c=o.relativeKeypoints[r].x*t.width,u=o.relativeKeypoints[r].y*t.height,l=2*Math.sqrt((c-i)*(c-i)+(u-s)*(u-s)),d=function(e,t,n){var a,r=e.locationData,o=n.rotationVectorStartKeypointIndex,i=n.rotationVectorEndKeypointIndex;a=n.rotationVectorTargetAngle?n.rotationVectorTargetAngle:Math.PI*n.rotationVectorTargetAngleDegree/180;var s=r.relativeKeypoints[o].x*t.width,c=r.relativeKeypoints[o].y*t.height,u=r.relativeKeypoints[i].x*t.width,l=r.relativeKeypoints[i].y*t.height;return lG(a-Math.atan2(-(l-c),u-s))}(e,t,n);return{xCenter:i/t.width,yCenter:s/t.height,width:l/t.width,height:l/t.height,rotation:d}}function mG(e){if(16!==e.length)throw new Error("Array length must be 16 but got ".concat(e.length));return[[e[0],e[1],e[2],e[3]],[e[4],e[5],e[6],e[7]],[e[8],e[9],e[10],e[11]],[e[12],e[13],e[14],e[15]]]}function gG(e,t,n,a,r,o,i){return e[t][r]*(e[n][o]*e[a][i]-e[n][i]*e[a][o])}function yG(e,t,n){var a=(t+1)%4,r=(t+2)%4,o=(t+3)%4,i=(n+1)%4,s=(n+2)%4,c=(n+3)%4;return gG(e,a,r,o,i,s,c)+gG(e,r,o,a,i,s,c)+gG(e,o,a,r,i,s,c)}function bG(e,t,n){void 0===n&&(n={ignoreRotation:!1});for(var a=[],r=0,o=e;r<o.length;r++){var i=o[r],s=i.x-.5,c=i.y-.5,u=n.ignoreRotation?0:t.rotation,l=Math.cos(u)*s-Math.sin(u)*c,d=Math.sin(u)*s+Math.cos(u)*c;l=l*t.width+t.xCenter,d=d*t.height+t.yCenter;var p=i.z*t.width,h=GV({},i);h.x=l,h.y=d,h.z=p,a.push(h)}return a}function xG(e,t){var n=function(e,t,n,a){var r=(a-n)/255;return{scale:r,offset:n-0*r}}(0,0,t[0],t[1]);return Zi((function(){return uc(pc(e,n.scale),n.offset)}))}function vG(e,t,n){var a,r,o,i,s,c,u,l,d,p,h,f,m=t.outputTensorSize,g=t.keepAspectRatio,y=t.borderMode,b=t.outputTensorFloatRange,x=uG(e),v=function(e,t){return t?{xCenter:t.xCenter*e.width,yCenter:t.yCenter*e.height,width:t.width*e.width,height:t.height*e.height,rotation:t.rotation}:{xCenter:.5*e.width,yCenter:.5*e.height,width:e.width,height:e.height,rotation:0}}(x,n),w=function(e,t,n){if(void 0===n&&(n=!1),!n)return{top:0,left:0,right:0,bottom:0};var a=t.height,r=t.width;hG(t,"targetSize"),hG(e,"roi");var o,i,s=a/r,c=e.height/e.width,u=0,l=0;return s>c?(o=e.width,i=e.width*s,l=(1-c/s)/2):(o=e.height/s,i=e.height,u=(1-s/c)/2),e.width=o,e.height=i,{top:l,left:u,right:u,bottom:l}}(v,m,g),k=(a=v,r=x.width,o=x.height,i=a.width,s=a.height,c=Math.cos(a.rotation),u=Math.sin(a.rotation),l=a.xCenter,d=a.yCenter,p=1/r,h=1/o,(f=new Array(16))[0]=i*c*1*p,f[1]=-s*u*p,f[2]=0,f[3]=(-.5*i*c*1+.5*s*u+l)*p,f[4]=i*u*1*h,f[5]=s*c*h,f[6]=0,f[7]=(-.5*s*c-.5*i*u*1+d)*h,f[8]=0,f[9]=0,f[10]=i*p,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,mG(f));return{imageTensor:Zi((function(){var t=dG(e),n=uh(pG(k,x,m),[1,8]),a="zero"===y?"constant":"nearest",r=Wf.transform(pd(ic(t,"float32")),n,"bilinear",a,0,[m.height,m.width]);return null!=b?xG(r,b):r})),padding:w,transformationMatrix:k}}function wG(e,t,n,a){return 1===a?.5*(e+t):e+(t-e)*n/(a-1)}function kG(e){return null!=e&&null!=e.currentTime}function SG(e){for(var t={locationData:{relativeKeypoints:[]}},n=Number.MAX_SAFE_INTEGER,a=Number.MIN_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER,o=Number.MIN_SAFE_INTEGER,i=0;i<e.length;++i){var s=e[i];n=Math.min(n,s.x),a=Math.max(a,s.x),r=Math.min(r,s.y),o=Math.max(o,s.y),t.locationData.relativeKeypoints.push({x:s.x,y:s.y})}return t.locationData.relativeBoundingBox={xMin:n,yMin:r,xMax:a,yMax:o,width:a-n,height:o-r},t}function CG(e,t,n,a){return HV(this,void 0,void 0,(function(){var a,r,o,i,s;return jV(this,(function(c){switch(c.label){case 0:return e.sort((function(e,t){return Math.max.apply(Math,t.score)-Math.max.apply(Math,e.score)})),a=uh(e.map((function(e){return[e.locationData.relativeBoundingBox.yMin,e.locationData.relativeBoundingBox.xMin,e.locationData.relativeBoundingBox.yMax,e.locationData.relativeBoundingBox.xMax]}))),r=ch(e.map((function(e){return e.score[0]}))),[4,Wf.nonMaxSuppressionAsync(a,r,t,n)];case 1:return[4,(o=c.sent()).array()];case 2:return i=c.sent(),s=e.filter((function(e,t){return i.indexOf(t)>-1})),$i([a,r,o]),[2,s]}}))}))}function IG(e,t){return e.map((function(e){var n=GV(GV({},e),{x:e.x*t.width,y:e.y*t.height});return null!=e.z&&(n.z=e.z*t.width),n}))}function NG(e,t,n){return HV(this,void 0,void 0,(function(){var a,r,o,i,s,c,u,l,d,p,h,f,m,g,y,b,x,v,w,k,S,C,I,N;return jV(this,(function(T){switch(T.label){case 0:if(a=ah(t,[0]),r=a.shape,o=r[0],i=r[1],s=r[2],e.length!==s)throw new Error("Expected heatmap to have same number of channels as the number of landmarks. But got landmarks length: "+"".concat(e.length,", heatmap length: ").concat(s));return c=[],[4,a.buffer()];case 1:for(u=T.sent(),l=0;l<e.length;l++)if(d=e[l],p=GV({},d),c.push(p),h=Math.trunc(p.x*i),f=Math.trunc(p.y*o),!(h<0||h>=i||f<0||h>=o)){for(m=Math.trunc((n.kernelSize-1)/2),g=Math.max(0,h-m),y=Math.min(i,h+m+1),b=Math.max(0,f-m),x=Math.min(o,f+m+1),v=0,w=0,k=0,S=0,C=b;C<x;++C)for(I=g;I<y;++I)N=u.get(C,I,l),v+=N,S=Math.max(S,N),w+=I*N,k+=C*N;S>=n.minConfidenceToRefine&&v>0&&(p.x=w/i/v,p.y=k/o/v)}return a.dispose(),[2,c]}}))}))}function TG(e,t){var n=t.left,a=t.top,r=t.left+t.right,o=t.top+t.bottom;return e.map((function(e){return GV(GV({},e),{x:(e.x-n)/(1-r),y:(e.y-a)/(1-o),z:e.z/(1-r)})}))}function _G(e,t,n){return HV(this,void 0,void 0,(function(){var a,r,o,i,s;return jV(this,(function(c){switch(c.label){case 0:return a=e[0],r=e[1],o=function(e,t,n){return Zi((function(){var a,r,o,i;n.reverseOutputOrder?(r=ah(ul(e,[0,n.boxCoordOffset+0],[-1,1])),a=ah(ul(e,[0,n.boxCoordOffset+1],[-1,1])),i=ah(ul(e,[0,n.boxCoordOffset+2],[-1,1])),o=ah(ul(e,[0,n.boxCoordOffset+3],[-1,1]))):(a=ah(ul(e,[0,n.boxCoordOffset+0],[-1,1])),r=ah(ul(e,[0,n.boxCoordOffset+1],[-1,1])),o=ah(ul(e,[0,n.boxCoordOffset+2],[-1,1])),i=ah(ul(e,[0,n.boxCoordOffset+3],[-1,1]))),r=uc(pc(dc(r,n.xScale),t.w),t.x),a=uc(pc(dc(a,n.yScale),t.h),t.y),n.applyExponentialOnBoxSize?(o=pc(dd(dc(o,n.hScale)),t.h),i=pc(dd(dc(i,n.wScale)),t.w)):(o=pc(dc(o,n.hScale),t.h),i=pc(dc(i,n.wScale),t.h));var s=Nc(a,dc(o,2)),c=Nc(r,dc(i,2)),u=uc(a,dc(o,2)),l=uc(r,dc(i,2)),d=il([al(s,[n.numBoxes,1]),al(c,[n.numBoxes,1]),al(u,[n.numBoxes,1]),al(l,[n.numBoxes,1])],1);if(n.numKeypoints)for(var p=0;p<n.numKeypoints;++p){var h=n.keypointCoordOffset+p*n.numValuesPerKeypoint,f=void 0,m=void 0;n.reverseOutputOrder?(f=ah(ul(e,[0,h],[-1,1])),m=ah(ul(e,[0,h+1],[-1,1]))):(m=ah(ul(e,[0,h],[-1,1])),f=ah(ul(e,[0,h+1],[-1,1])));var g=uc(pc(dc(f,n.xScale),t.w),t.x),y=uc(pc(dc(m,n.yScale),t.h),t.y);d=il([d,al(g,[n.numBoxes,1]),al(y,[n.numBoxes,1])],1)}return d}))}(r,t,n),i=Zi((function(){var e=a;return n.sigmoidScore?(null!=n.scoreClippingThresh&&(e=kl(a,-n.scoreClippingThresh,n.scoreClippingThresh)),e=cl(e)):e})),[4,EG(o,i,n)];case 1:return s=c.sent(),$i([o,i]),[2,s]}}))}))}function EG(e,t,n){return HV(this,void 0,void 0,(function(){var a,r,o,i,s,c,u,l,d,p,h,f;return jV(this,(function(m){switch(m.label){case 0:return a=[],[4,e.data()];case 1:return r=m.sent(),[4,t.data()];case 2:for(o=m.sent(),i=0;i<n.numBoxes;++i)if(!(null!=n.minScoreThresh&&o[i]<n.minScoreThresh||(s=i*n.numCoords,c=RG(r[s+0],r[s+1],r[s+2],r[s+3],o[i],n.flipVertically,i),(u=c.locationData.relativeBoundingBox).width<0||u.height<0))){if(n.numKeypoints>0)for((l=c.locationData).relativeKeypoints=[],d=n.numKeypoints*n.numValuesPerKeypoint,p=0;p<d;p+=n.numValuesPerKeypoint)h=s+n.keypointCoordOffset+p,f={x:r[h+0],y:n.flipVertically?1-r[h+1]:r[h+1]},l.relativeKeypoints.push(f);a.push(c)}return[2,a]}}))}))}function RG(e,t,n,a,r,o,i){return{score:[r],ind:i,locationData:{relativeBoundingBox:{xMin:t,yMin:o?1-n:e,xMax:a,yMax:o?1-e:n,width:a-t,height:n-e}}}}function AG(e,t){return"none"===e?t:function(e){return 1/(1+Math.exp(-e))}(t)}function OG(e,t,n,a){return HV(this,void 0,void 0,(function(){var r,o,i,s,c,u,l,d;return jV(this,(function(p){switch(p.label){case 0:return n=n||t.flipHorizontally||!1,a=a||t.flipVertically||!1,r=e.size,o=r/t.numLandmarks,[4,e.data()];case 1:for(i=p.sent(),s=[],c=0;c<t.numLandmarks;++c)u=c*o,(d={x:0,y:0}).x=n?t.inputImageWidth-i[u]:i[u],o>1&&(d.y=a?t.inputImageHeight-i[u+1]:i[u+1]),o>2&&(d.z=i[u+2]),o>3&&(d.score=AG(t.visibilityActivation,i[u+3])),s.push(d);for(l=0;l<s.length;++l)(d=s[l]).x=d.x/t.inputImageWidth,d.y=d.y/t.inputImageHeight,d.z=d.z/t.inputImageWidth/(t.normalizeZ||1);return[2,s]}}))}))}function FG(e,t,n){var a=e.width,r=e.height,o=e.rotation;if(null==n.rotation&&null==n.rotationDegree||(o=function(e,t){return null!=t.rotation?e+=t.rotation:null!=t.rotationDegree&&(e+=Math.PI*t.rotationDegree/180),lG(e)}(o,n)),0===o)e.xCenter=e.xCenter+a*n.shiftX,e.yCenter=e.yCenter+r*n.shiftY;else{var i=(t.width*a*n.shiftX*Math.cos(o)-t.height*r*n.shiftY*Math.sin(o))/t.width,s=(t.width*a*n.shiftX*Math.sin(o)+t.height*r*n.shiftY*Math.cos(o))/t.height;e.xCenter=e.xCenter+i,e.yCenter=e.yCenter+s}if(n.squareLong){var c=Math.max(a*t.width,r*t.height);a=c/t.width,r=c/t.height}else if(n.squareShort){var u=Math.min(a*t.width,r*t.height);a=u/t.width,r=u/t.height}return e.width=a*n.scaleX,e.height=r*n.scaleY,e}function DG(e,t){return e.map((function(e){var n=GV(GV({},e),{x:e.x/t.width,y:e.y/t.height});return null!=e.z&&(e.z=e.z/t.width),n}))}var MG=function(){function e(e){this.alpha=e,this.initialized=!1}return e.prototype.apply=function(e,t){var n;return this.initialized?n=null==t?this.storedValue+this.alpha*(e-this.storedValue):this.storedValue+this.alpha*t*Math.asinh((e-this.storedValue)/t):(n=e,this.initialized=!0),this.rawValue=e,this.storedValue=n,n},e.prototype.applyWithAlpha=function(e,t,n){return this.alpha=t,this.apply(e,n)},e.prototype.hasLastRawValue=function(){return this.initialized},e.prototype.lastRawValue=function(){return this.rawValue},e.prototype.reset=function(){this.initialized=!1},e}(),PG=function(){function e(e){this.frequency=e.frequency,this.minCutOff=e.minCutOff,this.beta=e.beta,this.thresholdCutOff=e.thresholdCutOff,this.thresholdBeta=e.thresholdBeta,this.derivateCutOff=e.derivateCutOff,this.x=new MG(this.getAlpha(this.minCutOff)),this.dx=new MG(this.getAlpha(this.derivateCutOff)),this.lastTimestamp=0}return e.prototype.apply=function(e,t,n){if(null==e)return e;var a=Math.trunc(t);if(this.lastTimestamp>=a)return e;0!==this.lastTimestamp&&0!==a&&(this.frequency=1/(1e-6*(a-this.lastTimestamp))),this.lastTimestamp=a;var r=this.x.hasLastRawValue()?(e-this.x.lastRawValue())*n*this.frequency:0,o=this.dx.applyWithAlpha(r,this.getAlpha(this.derivateCutOff)),i=this.minCutOff+this.beta*Math.abs(o),s=null!=this.thresholdCutOff?this.thresholdCutOff+this.thresholdBeta*Math.abs(o):null;return this.x.applyWithAlpha(e,this.getAlpha(i),s)},e.prototype.getAlpha=function(e){return 1/(1+this.frequency/(2*Math.PI*e))},e}(),LG=function(){function e(e){this.config=e}return e.prototype.apply=function(e,t,n){var a=this;if(null==e)return this.reset(),null;this.initializeFiltersIfEmpty(e);var r=1;if(!this.config.disableValueScaling){if(n<this.config.minAllowedObjectScale)return KV([],e,!0);r=1/n}return e.map((function(e,n){var o=GV(GV({},e),{x:a.xFilters[n].apply(e.x,t,r),y:a.yFilters[n].apply(e.y,t,r)});return null!=e.z&&(o.z=a.zFilters[n].apply(e.z,t,r)),o}))},e.prototype.reset=function(){this.xFilters=null,this.yFilters=null,this.zFilters=null},e.prototype.initializeFiltersIfEmpty=function(e){var t=this;null!=this.xFilters&&this.xFilters.length===e.length||(this.xFilters=e.map((function(e){return new PG(t.config)})),this.yFilters=e.map((function(e){return new PG(t.config)})),this.zFilters=e.map((function(e){return new PG(t.config)})))},e}(),zG=function(){function e(e){this.config=e,this.window=[],this.lowPassFilter=new MG(1),this.lastValue=0,this.lastValueScale=1,this.lastTimestamp=-1}return e.prototype.apply=function(e,t,n){if(null==e)return e;var a,r=Math.trunc(t);if(this.lastTimestamp>=r)return e;if(-1===this.lastTimestamp)a=1;else{for(var o=e*n-this.lastValue*this.lastValueScale,i=r-this.lastTimestamp,s=o,c=i,u=(1+this.window.length)*(1e6/30),l=0,d=this.window;l<d.length;l++){var p=d[l];if(c+p.duration>u)break;s+=p.distance,c+=p.duration}var h=s/(1e-6*c);a=1-1/(1+this.config.velocityScale*Math.abs(h)),this.window.unshift({distance:o,duration:i}),this.window.length>this.config.windowSize&&this.window.pop()}return this.lastValue=e,this.lastValueScale=n,this.lastTimestamp=r,this.lowPassFilter.applyWithAlpha(e,a)},e}(),BG=function(){function e(e){this.config=e}return e.prototype.apply=function(e,t,n){var a=this;if(null==e)return this.reset(),null;var r=1;if(!this.config.disableValueScaling){if(n<this.config.minAllowedObjectScale)return KV([],e,!0);r=1/n}return this.initializeFiltersIfEmpty(e),e.map((function(e,n){var o=GV(GV({},e),{x:a.xFilters[n].apply(e.x,t,r),y:a.yFilters[n].apply(e.y,t,r)});return null!=e.z&&(o.z=a.zFilters[n].apply(e.z,t,r)),o}))},e.prototype.reset=function(){this.xFilters=null,this.yFilters=null,this.zFilters=null},e.prototype.initializeFiltersIfEmpty=function(e){var t=this;null!=this.xFilters&&this.xFilters.length===e.length||(this.xFilters=e.map((function(e){return new zG(t.config)})),this.yFilters=e.map((function(e){return new zG(t.config)})),this.zFilters=e.map((function(e){return new zG(t.config)})))},e}(),WG=function(){function e(e){if(null!=e.velocityFilter)this.keypointsFilter=new BG(e.velocityFilter);else{if(null==e.oneEuroFilter)throw new Error("Either configure velocityFilter or oneEuroFilter, but got "+"".concat(e,"."));this.keypointsFilter=new LG(e.oneEuroFilter)}}return e.prototype.apply=function(e,t,n,a,r){if(void 0===a&&(a=!1),null==e)return this.keypointsFilter.reset(),null;var o=null!=r?function(e,t){return(e.width*t.width+e.height*t.height)/2}(r,n):1,i=a?IG(e,n):e,s=this.keypointsFilter.apply(i,t,o);return a?DG(s,n):s},e}(),UG=function(){function e(e){this.alpha=e.alpha}return e.prototype.apply=function(e){var t=this;if(null==e)return this.visibilityFilters=null,null;null!=this.visibilityFilters&&this.visibilityFilters.length===e.length||(this.visibilityFilters=e.map((function(e){return new MG(t.alpha)})));for(var n=[],a=0;a<e.length;++a){var r=e[a],o=GV({},r);o.score=this.visibilityFilters[a].apply(r.score),n.push(o)}return n},e}(),VG={reduceBoxesInLowestlayer:!1,interpolatedScaleAspectRatio:1,featureMapHeight:[],featureMapWidth:[],numLayers:5,minScale:.1484375,maxScale:.75,inputSizeHeight:224,inputSizeWidth:224,anchorOffsetX:.5,anchorOffsetY:.5,strides:[8,16,32,32,32],aspectRatios:[1],fixedAnchorSize:!0},GG={runtime:"tfjs",modelType:"full",enableSmoothing:!0,enableSegmentation:!1,smoothSegmentation:!0,detectorModelUrl:"https://tfhub.dev/mediapipe/tfjs-model/blazepose_3d/detector/1",landmarkModelUrl:"https://tfhub.dev/mediapipe/tfjs-model/blazepose_3d/landmark/full/2"},HG={maxPoses:1,flipHorizontal:!1},jG={applyExponentialOnBoxSize:!1,flipVertically:!1,ignoreClasses:[],numClasses:1,numBoxes:2254,numCoords:12,boxCoordOffset:0,keypointCoordOffset:4,numKeypoints:4,numValuesPerKeypoint:2,sigmoidScore:!0,scoreClippingThresh:100,reverseOutputOrder:!0,xScale:224,yScale:224,hScale:224,wScale:224,minScoreThresh:.5},KG={shiftX:0,shiftY:0,scaleX:1.25,scaleY:1.25,squareLong:!0},qG={outputTensorSize:{width:224,height:224},keepAspectRatio:!0,outputTensorFloatRange:[-1,1],borderMode:"zero"},XG={outputTensorSize:{width:256,height:256},keepAspectRatio:!0,outputTensorFloatRange:[0,1],borderMode:"zero"},YG={numLandmarks:39,inputImageWidth:256,inputImageHeight:256,visibilityActivation:"sigmoid",flipHorizontally:!1,flipVertically:!1},QG={numLandmarks:39,inputImageWidth:1,inputImageHeight:1,visibilityActivation:"sigmoid",flipHorizontally:!1,flipVertically:!1},ZG={kernelSize:7,minConfidenceToRefine:.5},$G={alpha:.1},JG={oneEuroFilter:{frequency:30,minCutOff:.05,beta:80,derivateCutOff:1,minAllowedObjectScale:1e-6}},eH={oneEuroFilter:{frequency:30,minCutOff:.01,beta:10,derivateCutOff:1,minAllowedObjectScale:1e-6}},tH={oneEuroFilter:{frequency:30,minCutOff:.1,beta:40,derivateCutOff:1,minAllowedObjectScale:1e-6,disableValueScaling:!0}},nH={activation:"none"},aH={combineWithPreviousRatio:.7},rH=function(){function e(e){this.mask=e}return e.prototype.toCanvasImageSource=function(){return HV(this,void 0,void 0,(function(){return jV(this,(function(e){return[2,eG(this.mask)]}))}))},e.prototype.toImageData=function(){return HV(this,void 0,void 0,(function(){return jV(this,(function(e){return[2,tG(this.mask)]}))}))},e.prototype.toTensor=function(){return HV(this,void 0,void 0,(function(){return jV(this,(function(e){return[2,this.mask]}))}))},e.prototype.getUnderlyingType=function(){return"tensor"},e}();function oH(e){return aG(e),"person"}var iH=function(){function e(e,t,n,a,r,o){this.detectorModel=e,this.landmarkModel=t,this.enableSmoothing=n,this.enableSegmentation=a,this.smoothSegmentation=r,this.modelType=o,this.regionOfInterest=null,this.prevFilteredSegmentationMask=null,this.anchors=function(e){null==e.reduceBoxesInLowestLayer&&(e.reduceBoxesInLowestLayer=!1),null==e.interpolatedScaleAspectRatio&&(e.interpolatedScaleAspectRatio=1),null==e.fixedAnchorSize&&(e.fixedAnchorSize=!1);for(var t=[],n=0;n<e.numLayers;){for(var a=[],r=[],o=[],i=[],s=n;s<e.strides.length&&e.strides[s]===e.strides[n];){var c=wG(e.minScale,e.maxScale,s,e.strides.length);if(0===s&&e.reduceBoxesInLowestLayer)o.push(1),o.push(2),o.push(.5),i.push(.1),i.push(c),i.push(c);else{for(var u=0;u<e.aspectRatios.length;++u)o.push(e.aspectRatios[u]),i.push(c);if(e.interpolatedScaleAspectRatio>0){var l=s===e.strides.length-1?1:wG(e.minScale,e.maxScale,s+1,e.strides.length);i.push(Math.sqrt(c*l)),o.push(e.interpolatedScaleAspectRatio)}}s++}for(var d=0;d<o.length;++d){var p=Math.sqrt(o[d]);a.push(i[d]/p),r.push(i[d]*p)}var h=0,f=0;if(e.featureMapHeight.length>0)h=e.featureMapHeight[n],f=e.featureMapWidth[n];else{var m=e.strides[n];h=Math.ceil(e.inputSizeHeight/m),f=Math.ceil(e.inputSizeWidth/m)}for(var g=0;g<h;++g)for(var y=0;y<f;++y)for(var b=0;b<a.length;++b){var x={xCenter:(y+e.anchorOffsetX)/f,yCenter:(g+e.anchorOffsetY)/h,width:0,height:0};e.fixedAnchorSize?(x.width=1,x.height=1):(x.width=r[b],x.height=a[b]),t.push(x)}n=s}return t}(VG);var i=ch(this.anchors.map((function(e){return e.width}))),s=ch(this.anchors.map((function(e){return e.height}))),c=ch(this.anchors.map((function(e){return e.xCenter}))),u=ch(this.anchors.map((function(e){return e.yCenter})));this.anchorTensor={x:c,y:u,w:i,h:s},this.prevFilteredSegmentationMask=this.enableSegmentation?uh([],[0,0]):null}return e.prototype.estimatePoses=function(e,t,n){return HV(this,void 0,void 0,(function(){var a,r,o,i,s,c,u,l,d,p,h,f,m,g,y,b,x,v,w,k,S,C,I;return jV(this,(function(N){switch(N.label){case 0:return a=function(e){var t;if(null==(t=null==e?HG:GV({},e)).maxPoses&&(t.maxPoses=1),t.maxPoses<=0)throw new Error("Invalid maxPoses ".concat(t.maxPoses,". Should be > 0."));if(t.maxPoses>1)throw new Error("Multi-pose detection is not implemented yet. Please set maxPoses to 1.");return t}(t),null==e?(this.reset(),[2,[]]):(this.maxPoses=a.maxPoses,this.timestamp=null!=n?1e3*n:kG(e)?1e6*e.currentTime:null,r=uG(e),o=Zi((function(){return ic(dG(e),"float32")})),null!=(i=this.regionOfInterest)?[3,2]:[4,this.detectPose(o)]);case 1:if(0===(s=N.sent()).length)return this.reset(),o.dispose(),[2,[]];c=s[0],i=this.poseDetectionToRoi(c,r),N.label=2;case 2:return[4,this.poseLandmarksByRoi(i,o)];case 3:return u=N.sent(),o.dispose(),null==u?(this.reset(),[2,[]]):(l=u.landmarks,d=u.auxiliaryLandmarks,p=u.poseScore,h=u.worldLandmarks,f=u.segmentationMask,m=this.poseLandmarkFiltering(l,d,h,r),g=m.actualLandmarksFiltered,y=m.auxiliaryLandmarksFiltered,b=m.actualWorldLandmarksFiltered,x=this.poseLandmarksToRoi(y,r),this.regionOfInterest=x,v=this.smoothSegmentation&&null!=f?this.poseSegmentationFiltering(f):f,null!=(w=null!=g?IG(g,r):null)&&w.forEach((function(e,t){e.name=XV[t]})),null!=(k=b)&&k.forEach((function(e,t){e.name=XV[t]})),S={score:p,keypoints:w,keypoints3D:k},null!==v&&(C=Zi((function(){var e=pd(v,2),t=ip(e,[[0,0],[0,0],[0,1]]);return Zd(t,[[0,0],[0,0],[0,2]],"symmetric")})),this.smoothSegmentation||$i(v),I={maskValueToLabel:oH,mask:new rH(C)},S.segmentation=I),[2,[S]])}}))}))},e.prototype.poseSegmentationFiltering=function(e){var t=this.prevFilteredSegmentationMask;return 0===t.size?this.prevFilteredSegmentationMask=e:(this.prevFilteredSegmentationMask=function(e,t,n){return"webgl"===es()?function(e,t,n){var a=n.combineWithPreviousRatio.toFixed(2),r={variableNames:["prevMask","newMask"],outputShape:e.shape,userCode:"\n  void main() {\n      ivec2 coords = getOutputCoords();\n      int height = coords[0];\n      int width = coords[1];\n\n      float prevMaskValue = getPrevMask(height, width);\n      float newMaskValue = getNewMask(height, width);\n\n      /*\n      * Assume p := newMaskValue\n      * H(p) := 1 + (p * log(p) + (1-p) * log(1-p)) / log(2)\n      * uncertainty alpha(p) =\n      *   Clamp(1 - (1 - H(p)) * (1 - H(p)), 0, 1) [squaring the\n      * uncertainty]\n      *\n      * The following polynomial approximates uncertainty alpha as a\n      * function of (p + 0.5):\n      */\n      const float c1 = 5.68842;\n      const float c2 = -0.748699;\n      const float c3 = -57.8051;\n      const float c4 = 291.309;\n      const float c5 = -624.717;\n      float t = newMaskValue - 0.5;\n      float x = t * t;\n\n      float uncertainty =\n        1.0 - min(1.0, x * (c1 + x * (c2 + x * (c3 + x * (c4 + x * c5)))));\n\n      float outputValue = newMaskValue + (prevMaskValue - newMaskValue) *\n                             (uncertainty * ".concat(a,");\n\n      setOutput(outputValue);\n    }\n")},o=ns();return Zi((function(){var n=o.compileAndRun(r,[e,t]);return Qi().makeTensorFromDataId(n.dataId,n.shape,n.dtype)}))}(e,t,n):Zi((function(){var a=Nc(t,.5),r=fc(a),o=Nc(1,Qd(1,pc(r,uc(5.68842,pc(r,uc(-.748699,pc(r,uc(-57.8051,pc(r,uc(291.309,pc(r,-624.717)))))))))));return uc(t,pc(Nc(e,t),pc(o,n.combineWithPreviousRatio)))}))}(t,e,aH),$i(e)),$i(t),this.prevFilteredSegmentationMask},e.prototype.dispose=function(){this.detectorModel.dispose(),this.landmarkModel.dispose(),$i([this.anchorTensor.x,this.anchorTensor.y,this.anchorTensor.w,this.anchorTensor.h,this.prevFilteredSegmentationMask])},e.prototype.reset=function(){this.regionOfInterest=null,this.enableSegmentation&&($i(this.prevFilteredSegmentationMask),this.prevFilteredSegmentationMask=uh([],[0,0])),this.visibilitySmoothingFilterActual=null,this.visibilitySmoothingFilterAuxiliary=null,this.landmarksSmoothingFilterActual=null,this.landmarksSmoothingFilterAuxiliary=null},e.prototype.detectPose=function(e){return HV(this,void 0,void 0,(function(){var t,n,a,r,o,i,s,c,u,l;return jV(this,(function(d){switch(d.label){case 0:return t=vG(e,qG),n=t.imageTensor,a=t.padding,r=this.detectorModel.predict(n),o=function(e){return Zi((function(){var t=function(e){return Zi((function(){return[ul(e,[0,0,0],[1,-1,1]),ul(e,[0,0,1],[1,-1,-1])]}))}(e),n=t[0],a=t[1];return{boxes:ah(a),logits:ah(n)}}))}(r),i=o.boxes,[4,_G([s=o.logits,i],this.anchorTensor,jG)];case 1:return 0===(c=d.sent()).length?($i([n,r,s,i]),[2,c]):[4,CG(c,this.maxPoses,.3)];case 2:return u=d.sent(),l=function(e,t){void 0===e&&(e=[]);for(var n=t.left,a=t.top,r=t.left+t.right,o=t.top+t.bottom,i=0;i<e.length;i++){var s=e[i],c=s.locationData.relativeBoundingBox,u=(c.xMin-n)/(1-r),l=(c.yMin-a)/(1-o),d=c.width/(1-r),p=c.height/(1-o);c.xMin=u,c.yMin=l,c.width=d,c.height=p,c.xMax=u+d,c.yMax=l+p;var h=s.locationData.relativeKeypoints;h&&h.forEach((function(e){var t=(e.x-n)/(1-r),i=(e.y-a)/(1-o);e.x=t,e.y=i}))}return e}(u,a),$i([n,r,s,i]),[2,l]}}))}))},e.prototype.poseDetectionToRoi=function(e,t){return FG(fG(e,t,{rotationVectorEndKeypointIndex:1,rotationVectorStartKeypointIndex:0,rotationVectorTargetAngleDegree:90}),t,KG)},e.prototype.poseLandmarksByRoi=function(e,t){return HV(this,void 0,void 0,(function(){var n,a,r,o,i,s,c,u,l,d,p,h,f,m;return jV(this,(function(g){switch(g.label){case 0:if(n=uG(t),a=vG(t,XG,e),r=a.imageTensor,o=a.padding,i=a.transformationMatrix,"lite"!==this.modelType&&"full"!==this.modelType&&"heavy"!==this.modelType)throw new Error("Model type must be one of lite, full or heavy,"+"but got ".concat(this.modelType));return s=["ld_3d","output_poseflag","activation_heatmap","world_3d"],this.enableSegmentation&&s.push("activation_segmentation"),c=this.landmarkModel.execute(r,s),[4,this.tensorsToPoseLandmarksAndSegmentation(c)];case 1:return null==(u=g.sent())?($i(c),$i(r),[2,null]):(l=u.landmarks,d=u.auxiliaryLandmarks,p=u.poseScore,h=u.worldLandmarks,f=u.segmentationMask,[4,this.poseLandmarksAndSegmentationInverseProjection(n,e,o,i,l,d,h,f)]);case 2:return m=g.sent(),$i(c),$i(r),[2,GV({poseScore:p},m)]}}))}))},e.prototype.poseLandmarksAndSegmentationInverseProjection=function(e,t,n,a,r,o,i,s){return HV(this,void 0,void 0,(function(){var c,u,l,d,p,h;return jV(this,(function(f){return c=TG(r,n),u=TG(o,n),l=bG(c,t),d=bG(u,t),p=function(e,t){for(var n=[],a=0,r=e;a<r.length;a++){var o=r[a],i=o.x,s=o.y,c=t.rotation,u=Math.cos(c)*i-Math.sin(c)*s,l=Math.sin(c)*i+Math.cos(c)*s,d=GV({},o);d.x=u,d.y=l,n.push(d)}return n}(i,t),h=null,this.enableSegmentation&&(h=Zi((function(){var t=s.shape,n=t[0],r=t[1],o=function(e){var t=mG(new Array(16).fill(0));t[0][0]=yG(e,0,0),t[1][0]=-yG(e,0,1),t[2][0]=yG(e,0,2),t[3][0]=-yG(e,0,3),t[0][2]=yG(e,2,0),t[1][2]=-yG(e,2,1),t[2][2]=yG(e,2,2),t[3][2]=-yG(e,2,3),t[0][1]=-yG(e,1,0),t[1][1]=yG(e,1,1),t[2][1]=-yG(e,1,2),t[3][1]=yG(e,1,3),t[0][3]=-yG(e,3,0),t[1][3]=yG(e,3,1),t[2][3]=-yG(e,3,2),t[3][3]=yG(e,3,3);for(var n=e[0][0]*t[0][0]+e[1][0]*t[0][1]+e[2][0]*t[0][2]+e[3][0]*t[0][3],a=0;a<t.length;a++)for(var r=0;r<t.length;r++)t[a][r]/=n;return t}(a),i=uh(pG(o,{width:r,height:n},e),[1,8]),c=[1,n,r,1];return ah(Wf.transform(al(s,c),i,"bilinear","constant",0,[e.height,e.width]),[0,3])})),$i(s)),[2,{landmarks:l,auxiliaryLandmarks:d,worldLandmarks:p,segmentationMask:h}]}))}))},e.prototype.tensorsToPoseLandmarksAndSegmentation=function(e){return HV(this,void 0,void 0,(function(){var t,n,a,r,o,i,s,c,u,l,d,p,h;return jV(this,(function(f){switch(f.label){case 0:return t=e[0],n=e[1],a=e[2],r=e[3],o=this.enableSegmentation?e[4]:null,[4,n.data()];case 1:return(i=f.sent()[0])<.5?[2,null]:[4,OG(t,YG)];case 2:return[4,NG(f.sent(),a,ZG)];case 3:return s=f.sent(),c=s.slice(0,33),u=s.slice(33,35),[4,OG(r,QG)];case 4:return l=f.sent(),d=l.slice(0,33),p=function(e,t,n){void 0===n&&(n=!0);for(var a=[],r=0;r<e.length;r++){var o=GV({},t[r]);n&&(o.score=e[r].score),a.push(o)}return a}(c,d,!0),h=this.enableSegmentation?function(e,t){return Zi((function(){var n=ah(e,[0]),a=n.shape[2];if(1===a){var r=n;switch(t.activation){case"none":break;case"sigmoid":r=cl(r);break;case"softmax":throw new Error("Softmax activation requires two channels.");default:throw new Error("Activation not supported (".concat(t.activation,")"))}return ah(r,[2])}throw new Error("Unsupported number of tensor channels ".concat(a))}))}(o,nH):null,[2,{landmarks:c,auxiliaryLandmarks:u,poseScore:i,worldLandmarks:p,segmentationMask:h}]}}))}))},e.prototype.poseLandmarksToRoi=function(e,t){return FG(fG(SG(e),t,{rotationVectorStartKeypointIndex:0,rotationVectorEndKeypointIndex:1,rotationVectorTargetAngleDegree:90}),t,KG)},e.prototype.poseLandmarkFiltering=function(e,t,n,a){var r,o,i;if(null!=this.timestamp&&this.enableSmoothing){var s=fG(SG(t),a,{rotationVectorEndKeypointIndex:0,rotationVectorStartKeypointIndex:1,rotationVectorTargetAngleDegree:90});null==this.visibilitySmoothingFilterActual&&(this.visibilitySmoothingFilterActual=new UG($G)),r=this.visibilitySmoothingFilterActual.apply(e),null==this.visibilitySmoothingFilterAuxiliary&&(this.visibilitySmoothingFilterAuxiliary=new UG($G)),o=this.visibilitySmoothingFilterAuxiliary.apply(t),i=this.visibilitySmoothingFilterActual.apply(n),null==this.landmarksSmoothingFilterActual&&(this.landmarksSmoothingFilterActual=new WG(JG)),r=this.landmarksSmoothingFilterActual.apply(r,this.timestamp,a,!0,s),null==this.landmarksSmoothingFilterAuxiliary&&(this.landmarksSmoothingFilterAuxiliary=new WG(eH)),o=this.landmarksSmoothingFilterAuxiliary.apply(o,this.timestamp,a,!0,s),null==this.worldLandmarksSmoothingFilterActual&&(this.worldLandmarksSmoothingFilterActual=new WG(tH)),i=this.worldLandmarksSmoothingFilterActual.apply(n,this.timestamp)}else r=e,o=t,i=n;return{actualLandmarksFiltered:r,auxiliaryLandmarksFiltered:o,actualWorldLandmarksFiltered:i}},e}();function sH(e){return HV(this,void 0,void 0,(function(){var t,n,a,r,o,i;return jV(this,(function(s){switch(s.label){case 0:return t=function(e){var t=GV({},null==e?GG:e);if(null==t.enableSmoothing&&(t.enableSmoothing=GG.enableSmoothing),null==t.enableSegmentation&&(t.enableSegmentation=GG.enableSegmentation),null==t.smoothSegmentation&&(t.smoothSegmentation=GG.smoothSegmentation),null==t.modelType&&(t.modelType=GG.modelType),null==t.detectorModelUrl&&(t.detectorModelUrl=GG.detectorModelUrl),null==t.landmarkModelUrl)switch(t.modelType){case"lite":t.landmarkModelUrl="https://tfhub.dev/mediapipe/tfjs-model/blazepose_3d/landmark/lite/2";break;case"heavy":t.landmarkModelUrl="https://tfhub.dev/mediapipe/tfjs-model/blazepose_3d/landmark/heavy/2";break;default:t.landmarkModelUrl="https://tfhub.dev/mediapipe/tfjs-model/blazepose_3d/landmark/full/2"}return t}(e),n="string"==typeof t.detectorModelUrl&&t.detectorModelUrl.indexOf("https://tfhub.dev")>-1,a="string"==typeof t.landmarkModelUrl&&t.landmarkModelUrl.indexOf("https://tfhub.dev")>-1,[4,Promise.all([WV(t.detectorModelUrl,{fromTFHub:n}),WV(t.landmarkModelUrl,{fromTFHub:a})])];case 1:return r=s.sent(),o=r[0],i=r[1],[2,new iH(o,i,t.enableSmoothing,t.enableSegmentation,t.smoothSegmentation,t.modelType)]}}))}))}var cH,uH,lH,dH=function(){function e(e){!function(e){if(e.maxTracks<1)throw new Error("Must specify 'maxTracks' to be at least 1, but "+"encountered ".concat(e.maxTracks));if(e.maxAge<=0)throw new Error("Must specify 'maxAge' to be positive, but "+"encountered ".concat(e.maxAge));if(void 0!==e.keypointTrackerParams){if(e.keypointTrackerParams.keypointConfidenceThreshold<0||e.keypointTrackerParams.keypointConfidenceThreshold>1)throw new Error("Must specify 'keypointConfidenceThreshold' to be in the range [0, 1], but encountered "+"".concat(e.keypointTrackerParams.keypointConfidenceThreshold));if(e.keypointTrackerParams.minNumberOfKeypoints<1)throw new Error("Must specify 'minNumberOfKeypoints' to be at least 1, but "+"encountered ".concat(e.keypointTrackerParams.minNumberOfKeypoints));for(var t=0,n=e.keypointTrackerParams.keypointFalloff;t<n.length;t++){var a=n[t];if(a<=0)throw new Error("Must specify each keypoint falloff parameterto be positive "+"but encountered ".concat(a))}}}(e),this.tracks=[],this.maxTracks=e.maxTracks,this.maxAge=1e3*e.maxAge,this.minSimilarity=e.minSimilarity,this.nextID=1}return e.prototype.apply=function(e,t){this.filterOldTracks(t);var n=this.computeSimilarity(e);return this.assignTracks(e,n,t),this.updateTracks(t),e},e.prototype.getTracks=function(){return this.tracks.slice()},e.prototype.getTrackIDs=function(){return new Set(this.tracks.map((function(e){return e.id})))},e.prototype.filterOldTracks=function(e){var t=this;this.tracks=this.tracks.filter((function(n){return e-n.lastTimestamp<=t.maxAge}))},e.prototype.assignTracks=function(e,t,n){for(var a=Array.from(Array(t[0].length).keys()),r=[],o=0,i=Array.from(Array(e.length).keys());o<i.length;o++){var s=i[o];if(0!==a.length){for(var c=-1,u=-1,l=0,d=a;l<d.length;l++){var p=d[l],h=t[s][p];h>=this.minSimilarity&&h>u&&(c=p,u=h)}if(c>=0){var f=this.tracks[c];f=Object.assign(f,this.createTrack(e[s],n,f.id)),e[s].id=f.id;var m=a.indexOf(c);a.splice(m,1)}else r.push(s)}else r.push(s)}for(var g=0,y=r;g<y.length;g++){s=y[g];var b=this.createTrack(e[s],n);this.tracks.push(b),e[s].id=b.id}},e.prototype.updateTracks=function(e){this.tracks.sort((function(e,t){return t.lastTimestamp-e.lastTimestamp})),this.tracks=this.tracks.slice(0,this.maxTracks)},e.prototype.createTrack=function(e,t,n){var a={id:n||this.nextTrackID(),lastTimestamp:t,keypoints:KV([],e.keypoints,!0).map((function(e){return GV({},e)}))};return void 0!==e.box&&(a.box=GV({},e.box)),a},e.prototype.nextTrackID=function(){var e=this.nextID;return this.nextID+=1,e},e.prototype.remove=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.tracks=this.tracks.filter((function(t){return!e.includes(t.id)}))},e.prototype.reset=function(){this.tracks=[]},e}(),pH=function(e){function t(t){return e.call(this,t)||this}return VV(t,e),t.prototype.computeSimilarity=function(e){var t=this;return 0===e.length||0===this.tracks.length?[[]]:e.map((function(e){return t.tracks.map((function(n){return t.iou(e,n)}))}))},t.prototype.iou=function(e,t){var n=Math.max(e.box.xMin,t.box.xMin),a=Math.max(e.box.yMin,t.box.yMin),r=Math.min(e.box.xMax,t.box.xMax),o=Math.min(e.box.yMax,t.box.yMax);if(n>=r||a>=o)return 0;var i=(r-n)*(o-a);return i/(e.box.width*e.box.height+t.box.width*t.box.height-i)},t}(dH),hH=function(e){function t(t){var n=e.call(this,t)||this;return n.keypointThreshold=t.keypointTrackerParams.keypointConfidenceThreshold,n.keypointFalloff=t.keypointTrackerParams.keypointFalloff,n.minNumKeyoints=t.keypointTrackerParams.minNumberOfKeypoints,n}return VV(t,e),t.prototype.computeSimilarity=function(e){if(0===e.length||0===this.tracks.length)return[[]];for(var t=[],n=0,a=e;n<a.length;n++){for(var r=a[n],o=[],i=0,s=this.tracks;i<s.length;i++){var c=s[i];o.push(this.oks(r,c))}t.push(o)}return t},t.prototype.oks=function(e,t){for(var n=this.area(t.keypoints)+1e-6,a=0,r=0,o=0;o<e.keypoints.length;++o){var i=e.keypoints[o],s=t.keypoints[o];if(!(i.score<this.keypointThreshold||s.score<this.keypointThreshold)){r+=1;var c=Math.pow(i.x-s.x,2)+Math.pow(i.y-s.y,2),u=2*this.keypointFalloff[o];a+=Math.exp(-1*c/(2*n*Math.pow(u,2)))}}return r<this.minNumKeyoints?0:a/r},t.prototype.area=function(e){var t=this,n=e.filter((function(e){return e.score>t.keypointThreshold})),a=Math.min.apply(Math,KV([1],n.map((function(e){return e.x})),!1)),r=Math.max.apply(Math,KV([0],n.map((function(e){return e.x})),!1)),o=Math.min.apply(Math,KV([1],n.map((function(e){return e.y})),!1));return(r-a)*(Math.max.apply(Math,KV([0],n.map((function(e){return e.y})),!1))-o)},t}(dH);function fH(e){switch(e){case uH.BlazePose:return XV.reduce((function(e,t,n){return e[t]=n,e}),{});case uH.PoseNet:case uH.MoveNet:return qV.reduce((function(e,t,n){return e[t]=n,e}),{});default:throw new Error("Model ".concat(e," is not supported."))}}(lH=cH||(cH={})).Keypoint="keypoint",lH.BoundingBox="boundingBox",function(e){e.MoveNet="MoveNet",e.BlazePose="BlazePose",e.PoseNet="PoseNet"}(uH||(uH={}));var mH=Object.freeze({__proto__:null,getKeypointIndexBySide:function(e){switch(e){case uH.BlazePose:return YV;case uH.PoseNet:case uH.MoveNet:return QV;default:throw new Error("Model ".concat(e," is not supported."))}},getAdjacentPairs:function(e){switch(e){case uH.BlazePose:return $V;case uH.PoseNet:case uH.MoveNet:return ZV;default:throw new Error("Model ".concat(e," is not supported."))}},getKeypointIndexByName:fH}),gH=["SinglePose.Lightning","SinglePose.Thunder","MultiPose.Lightning"],yH={modelType:"SinglePose.Lightning",enableSmoothing:!0},bH={},xH={frequency:30,minCutOff:2.5,beta:300,derivateCutOff:2.5,thresholdCutOff:.5,thresholdBeta:5,disableValueScaling:!0},vH={maxTracks:18,maxAge:1e3,minSimilarity:.2,keypointTrackerParams:{keypointConfidenceThreshold:.3,keypointFalloff:[.026,.025,.025,.035,.035,.079,.079,.072,.072,.062,.062,.107,.107,.087,.087,.089,.089],minNumberOfKeypoints:4}},wH={maxTracks:18,maxAge:1e3,minSimilarity:.15,trackerParams:{}};function kH(e,t){var n,a,r,o;return e?t.width>t.height?(n=1,a=t.height/t.width,r=0,o=(t.width/2-t.height/2)/t.width):(n=t.width/t.height,a=1,r=(t.height/2-t.width/2)/t.height,o=0):t.width>t.height?(n=t.width/t.height,a=1,r=(t.height/2-t.width/2)/t.height,o=0):(n=1,a=t.height/t.width,r=0,o=(t.width/2-t.height/2)/t.width),{yMin:r,xMin:o,yMax:r+n,xMax:o+a,height:n,width:a}}function SH(e,t){var n={maxTracks:e.maxTracks,maxAge:e.maxAge,minSimilarity:e.minSimilarity};return null!=t.maxTracks&&(n.maxTracks=t.maxTracks),null!=t.maxAge&&(n.maxAge=t.maxAge),null!=t.minSimilarity&&(n.minSimilarity=t.minSimilarity),n}var CH=function(){function e(e,t){this.moveNetModel=e,this.modelInputResolution={height:0,width:0},this.keypointIndexByName=fH(uH.MoveNet),"SinglePose.Lightning"===t.modelType?(this.modelInputResolution.width=192,this.modelInputResolution.height=192):"SinglePose.Thunder"===t.modelType&&(this.modelInputResolution.width=256,this.modelInputResolution.height=256),this.multiPoseModel="MultiPose.Lightning"===t.modelType,this.multiPoseModel||(this.keypointFilter=new LG(xH),this.cropRegionFilterYMin=new MG(.9),this.cropRegionFilterXMin=new MG(.9),this.cropRegionFilterYMax=new MG(.9),this.cropRegionFilterXMax=new MG(.9)),this.enableSmoothing=t.enableSmoothing,t.minPoseScore?this.minPoseScore=t.minPoseScore:this.minPoseScore=.25,t.multiPoseMaxDimension?this.multiPoseMaxDimension=t.multiPoseMaxDimension:this.multiPoseMaxDimension=256,this.enableTracking=t.enableTracking,this.multiPoseModel&&this.enableTracking&&(t.trackerType===cH.Keypoint?this.tracker=new hH(t.trackerConfig):t.trackerType===cH.BoundingBox&&(this.tracker=new pH(t.trackerConfig)),this.enableSmoothing&&(this.keypointFilterMap=new Map))}return e.prototype.runSinglePersonPoseModel=function(e){return HV(this,void 0,void 0,(function(){var t,n,a,r,o;return jV(this,(function(i){switch(i.label){case 0:if(4!==(t=this.moveNetModel.execute(e)).shape.length||1!==t.shape[0]||1!==t.shape[1]||17!==t.shape[2]||3!==t.shape[3])throw t.dispose(),new Error("Unexpected output shape from model: [".concat(t.shape,"]"));return"webgpu"===es()?[3,1]:(n=t.dataSync(),[3,3]);case 1:return[4,t.data()];case 2:n=i.sent(),i.label=3;case 3:for(t.dispose(),a={keypoints:[],score:0},r=0,o=0;o<17;++o)a.keypoints[o]={y:n[3*o],x:n[3*o+1],score:n[3*o+2]},a.keypoints[o].score>.2&&(++r,a.score+=a.keypoints[o].score);return r>0&&(a.score/=r),[2,a]}}))}))},e.prototype.runMultiPersonPoseModel=function(e){return HV(this,void 0,void 0,(function(){var t,n,a,r,o,i,s,c;return jV(this,(function(u){switch(u.label){case 0:if(3!==(t=this.moveNetModel.execute(e)).shape.length||1!==t.shape[0]||56!==t.shape[2])throw t.dispose(),new Error("Unexpected output shape from model: [".concat(t.shape,"]"));return"webgpu"===es()?[3,1]:(n=t.dataSync(),[3,3]);case 1:return[4,t.data()];case 2:n=u.sent(),u.label=3;case 3:for(t.dispose(),a=[],r=n.length/56,o=0;o<r;++o)for(a[o]={keypoints:[]},i=56*o+51,a[o].box={yMin:n[i],xMin:n[i+1],yMax:n[i+2],xMax:n[i+3],width:n[i+3]-n[i+1],height:n[i+2]-n[i]},s=56*o+55,a[o].score=n[s],a[o].keypoints=[],c=0;c<17;++c)a[o].keypoints[c]={y:n[56*o+3*c],x:n[56*o+3*c+1],score:n[56*o+3*c+2]};return[2,a]}}))}))},e.prototype.estimatePoses=function(e,t,n){return void 0===t&&(t=bH),HV(this,void 0,void 0,(function(){var a,r,o,i,s,c;return jV(this,(function(u){switch(u.label){case 0:return t=function(e){return null==e?bH:GV({},e)}(t),null==e?(this.reset(),[2,[]]):(null==n?kG(e)&&(n=1e6*e.currentTime):n*=1e3,a=dG(e),r=uG(a),o=pd(a,0),e instanceof pi||a.dispose(),i=[],this.multiPoseModel?[3,2]:[4,this.estimateSinglePose(o,r,n)]);case 1:return i=u.sent(),[3,4];case 2:return[4,this.estimateMultiplePoses(o,r,n)];case 3:i=u.sent(),u.label=4;case 4:for(s=0;s<i.length;++s)for(c=0;c<i[s].keypoints.length;++c)i[s].keypoints[c].name=qV[c],i[s].keypoints[c].y*=r.height,i[s].keypoints[c].x*=r.width;return[2,i]}}))}))},e.prototype.estimateSinglePose=function(e,t,n){return HV(this,void 0,void 0,(function(){var a,r,o,i,s=this;return jV(this,(function(c){switch(c.label){case 0:return this.cropRegion||(this.cropRegion=kH(null==this.cropRegion,t)),a=Zi((function(){var t=uh([[s.cropRegion.yMin,s.cropRegion.xMin,s.cropRegion.yMax,s.cropRegion.xMax]]),n=qd([1],"int32"),a=[s.modelInputResolution.height,s.modelInputResolution.width];return ic(Wf.cropAndResize(e,t,n,a,"bilinear",0),"int32")})),e.dispose(),[4,this.runSinglePersonPoseModel(a)];case 1:if(r=c.sent(),a.dispose(),r.score<this.minPoseScore)return this.reset(),[2,[]];for(o=0;o<r.keypoints.length;++o)r.keypoints[o].y=this.cropRegion.yMin+r.keypoints[o].y*this.cropRegion.height,r.keypoints[o].x=this.cropRegion.xMin+r.keypoints[o].x*this.cropRegion.width;return null!=n&&this.enableSmoothing&&(r.keypoints=this.keypointFilter.apply(r.keypoints,n,1)),i=function(e,t,n,a){for(var r={},o=0,i=qV;o<i.length;o++){var s=i[o];r[s]=[t[n[s]].y*a.height,t[n[s]].x*a.width]}if(function(e,t){return(e[t.left_hip].score>.2||e[t.right_hip].score>.2)&&(e[t.left_shoulder].score>.2||e[t.right_shoulder].score>.2)}(t,n)){var c=(r.left_hip[0]+r.right_hip[0])/2,u=(r.left_hip[1]+r.right_hip[1])/2,l=function(e,t,n,a,r){for(var o=["left_shoulder","right_shoulder","left_hip","right_hip"],i=0,s=0,c=0;c<o.length;c++)(h=Math.abs(a-n[o[c]][0]))>i&&(i=h),(f=Math.abs(r-n[o[c]][1]))>s&&(s=f);for(var u=0,l=0,d=0,p=Object.keys(n);d<p.length;d++){var h,f,m=p[d];e[t[m]].score<.2||((h=Math.abs(a-n[m][0]))>u&&(u=h),(f=Math.abs(r-n[m][1]))>l&&(l=f))}return[i,s,u,l]}(t,n,r,c,u),d=l[0],p=l[1],h=l[2],f=l[3],m=Math.max(1.9*p,1.9*d,1.2*h,1.2*f),g=[c-(m=Math.min(m,Math.max(u,a.width-u,c,a.height-c))),u-m];if(m>Math.max(a.width,a.height)/2)return kH(null==e,a);var y=2*m;return{yMin:g[0]/a.height,xMin:g[1]/a.width,yMax:(g[0]+y)/a.height,xMax:(g[1]+y)/a.width,height:(g[0]+y)/a.height-g[0]/a.height,width:(g[1]+y)/a.width-g[1]/a.width}}return kH(null==e,a)}(this.cropRegion,r.keypoints,this.keypointIndexByName,t),this.cropRegion=this.filterCropRegion(i),[2,[r]]}}))}))},e.prototype.estimateMultiplePoses=function(e,t,n){return HV(this,void 0,void 0,(function(){var a,r,o,i,s,c,u,l,d,p,h,f=this;return jV(this,(function(m){switch(m.label){case 0:return t.width>t.height?(r=this.multiPoseMaxDimension,o=Math.round(this.multiPoseMaxDimension*t.height/t.width),a=Wf.resizeBilinear(e,[o,r]),s=r,c=32*Math.ceil(o/32),i=ip(a,[[0,0],[0,c-o],[0,0],[0,0]])):(r=Math.round(this.multiPoseMaxDimension*t.width/t.height),o=this.multiPoseMaxDimension,a=Wf.resizeBilinear(e,[o,r]),s=32*Math.ceil(r/32),c=o,i=ip(a,[[0,0],[0,0],[0,s-r],[0,0]])),a.dispose(),e.dispose(),u=ic(i,"int32"),i.dispose(),[4,this.runMultiPersonPoseModel(u)];case 1:for(l=m.sent(),u.dispose(),l=l.filter((function(e){return e.score>=f.minPoseScore})),p=0;p<l.length;++p)for(d=0;d<l[p].keypoints.length;++d)l[p].keypoints[d].y*=c/o,l[p].keypoints[d].x*=s/r;if(this.enableTracking&&(this.tracker.apply(l,n),this.enableSmoothing)){for(p=0;p<l.length;++p)this.keypointFilterMap.has(l[p].id)||this.keypointFilterMap.set(l[p].id,new LG(xH)),l[p].keypoints=this.keypointFilterMap.get(l[p].id).apply(l[p].keypoints,n,1);h=this.tracker.getTrackIDs(),this.keypointFilterMap.forEach((function(e,t){h.has(t)||f.keypointFilterMap.delete(t)}))}return[2,l]}}))}))},e.prototype.filterCropRegion=function(e){if(e){var t=this.cropRegionFilterYMin.apply(e.yMin),n=this.cropRegionFilterXMin.apply(e.xMin),a=this.cropRegionFilterYMax.apply(e.yMax),r=this.cropRegionFilterXMax.apply(e.xMax);return{yMin:t,xMin:n,yMax:a,xMax:r,height:a-t,width:r-n}}return this.cropRegionFilterYMin.reset(),this.cropRegionFilterXMin.reset(),this.cropRegionFilterYMax.reset(),this.cropRegionFilterXMax.reset(),null},e.prototype.dispose=function(){this.moveNetModel.dispose()},e.prototype.reset=function(){this.cropRegion=null,this.resetFilters()},e.prototype.resetFilters=function(){this.keypointFilter.reset(),this.cropRegionFilterYMin.reset(),this.cropRegionFilterXMin.reset(),this.cropRegionFilterYMax.reset(),this.cropRegionFilterXMax.reset()},e}();function IH(e){return void 0===e&&(e=yH),HV(this,void 0,void 0,(function(){var t,n,a,r;return jV(this,(function(o){switch(o.label){case 0:return t=function(e){var t,n=null==e?yH:GV({},e);if(null==n.modelType)n.modelType="SinglePose.Lightning";else if(gH.indexOf(n.modelType)<0)throw new Error("Invalid architecture ".concat(n.modelType,". ")+"Should be one of ".concat(gH));if(null==n.enableSmoothing&&(n.enableSmoothing=!0),null!=n.minPoseScore&&(n.minPoseScore<0||n.minPoseScore>1))throw new Error("minPoseScore should be between 0.0 and 1.0");if(null!=n.multiPoseMaxDimension&&(n.multiPoseMaxDimension%32!=0||n.multiPoseMaxDimension<32))throw new Error("multiPoseMaxDimension must be a multiple of 32 and higher than 0");if("MultiPose.Lightning"===n.modelType&&null==n.enableTracking&&(n.enableTracking=!0),"MultiPose.Lightning"===n.modelType&&!0===n.enableTracking)if(null==n.trackerType&&(n.trackerType=cH.BoundingBox),n.trackerType===cH.Keypoint)null!=n.trackerConfig?n.trackerConfig=function(e){var t=SH(vH,e);return t.keypointTrackerParams=GV({},vH.keypointTrackerParams),null!=e.keypointTrackerParams&&(null!=e.keypointTrackerParams.keypointConfidenceThreshold&&(t.keypointTrackerParams.keypointConfidenceThreshold=e.keypointTrackerParams.keypointConfidenceThreshold),null!=e.keypointTrackerParams.keypointFalloff&&(t.keypointTrackerParams.keypointFalloff=e.keypointTrackerParams.keypointFalloff),null!=e.keypointTrackerParams.minNumberOfKeypoints&&(t.keypointTrackerParams.minNumberOfKeypoints=e.keypointTrackerParams.minNumberOfKeypoints)),t}(n.trackerConfig):n.trackerConfig=vH;else{if(n.trackerType!==cH.BoundingBox)throw new Error("Tracker type not supported by MoveNet");null!=n.trackerConfig?n.trackerConfig=(t=n.trackerConfig,SH(wH,t)):n.trackerConfig=wH}return n}(e),a=!0,t.modelUrl?(a="string"==typeof t.modelUrl&&t.modelUrl.indexOf("https://tfhub.dev")>-1,[4,WV(t.modelUrl,{fromTFHub:a})]):[3,2];case 1:return n=o.sent(),[3,4];case 2:return r=void 0,"SinglePose.Lightning"===t.modelType?r="https://tfhub.dev/google/tfjs-model/movenet/singlepose/lightning/4":"SinglePose.Thunder"===t.modelType?r="https://tfhub.dev/google/tfjs-model/movenet/singlepose/thunder/4":"MultiPose.Lightning"===t.modelType&&(r="https://tfhub.dev/google/tfjs-model/movenet/multipose/lightning/1"),[4,WV(r,{fromTFHub:a})];case 3:n=o.sent(),o.label=4;case 4:return"webgl"===es()&&nn().set("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",0),[2,new CH(n,t)]}}))}))}var NH={architecture:"MobileNetV1",outputStride:16,multiplier:.75,inputResolution:{height:257,width:257}},TH=["MobileNetV1","ResNet50"],_H={MobileNetV1:[8,16],ResNet50:[16]},EH=[8,16,32],RH={MobileNetV1:[.5,.75,1],ResNet50:[1]},AH=[1,2,4],OH={maxPoses:1,flipHorizontal:!1},FH={maxPoses:5,flipHorizontal:!1,scoreThreshold:.5,nmsRadius:20},DH=[-123.15,-115.9,-103.06];function MH(e){return Math.floor(e/2)}var PH=function(){function e(e,t){this.priorityQueue=new Array(e),this.numberOfElements=-1,this.getElementValue=t}return e.prototype.enqueue=function(e){this.priorityQueue[++this.numberOfElements]=e,this.swim(this.numberOfElements)},e.prototype.dequeue=function(){var e=this.priorityQueue[0];return this.exchange(0,this.numberOfElements--),this.sink(0),this.priorityQueue[this.numberOfElements+1]=null,e},e.prototype.empty=function(){return-1===this.numberOfElements},e.prototype.size=function(){return this.numberOfElements+1},e.prototype.all=function(){return this.priorityQueue.slice(0,this.numberOfElements+1)},e.prototype.max=function(){return this.priorityQueue[0]},e.prototype.swim=function(e){for(;e>0&&this.less(MH(e),e);)this.exchange(e,MH(e)),e=MH(e)},e.prototype.sink=function(e){for(;2*e<=this.numberOfElements;){var t=2*e;if(t<this.numberOfElements&&this.less(t,t+1)&&t++,!this.less(e,t))break;this.exchange(e,t),e=t}},e.prototype.getValueAt=function(e){return this.getElementValue(this.priorityQueue[e])},e.prototype.less=function(e,t){return this.getValueAt(e)<this.getValueAt(t)},e.prototype.exchange=function(e,t){var n=this.priorityQueue[e];this.priorityQueue[e]=this.priorityQueue[t],this.priorityQueue[t]=n},e}();function LH(e,t,n,a,r,o){for(var i=o.shape,s=i[0],c=i[1],u=!0,l=Math.max(n-r,0),d=Math.min(n+r+1,s),p=l;p<d;++p){for(var h=Math.max(a-r,0),f=Math.min(a+r+1,c),m=h;m<f;++m)if(o.get(p,m,e)>t){u=!1;break}if(!u)break}return u}function zH(e){return HV(this,void 0,void 0,(function(){return jV(this,(function(t){return[2,Promise.all(e.map((function(e){return e.buffer()})))]}))}))}function BH(e,t,n,a){return{y:a.get(e,t,n),x:a.get(e,t,n+17)}}function WH(e,t,n){var a=BH(e.heatmapY,e.heatmapX,e.id,n),r=a.y,o=a.x;return{x:e.heatmapX*t+o,y:e.heatmapY*t+r}}function UH(e,t,n,a){var r=n.x,o=n.y;return e.some((function(e){var n,i,s,c,u=e.keypoints;return n=o,i=r,(s=u[a].y-n)*s+(c=u[a].x-i)*c<=t}))}var VH=qV.reduce((function(e,t,n){return e[t]=n,e}),{}),GH=[["nose","left_eye"],["left_eye","left_ear"],["nose","right_eye"],["right_eye","right_ear"],["nose","left_shoulder"],["left_shoulder","left_elbow"],["left_elbow","left_wrist"],["left_shoulder","left_hip"],["left_hip","left_knee"],["left_knee","left_ankle"],["nose","right_shoulder"],["right_shoulder","right_elbow"],["right_elbow","right_wrist"],["right_shoulder","right_hip"],["right_hip","right_knee"],["right_knee","right_ankle"]].map((function(e){var t=e[0],n=e[1];return[VH[t],VH[n]]})),HH=GH.map((function(e){return e[1]})),jH=GH.map((function(e){return e[0]}));function KH(e,t,n){return e<t?t:e>n?n:e}function qH(e,t,n,a){return{y:KH(Math.round(e.y/t),0,n-1),x:KH(Math.round(e.x/t),0,a-1)}}function XH(e,t){return{x:e.x+t.x,y:e.y+t.y}}function YH(e,t,n,a,r,o,i,s){void 0===s&&(s=2);for(var c=a.shape,u=c[0],l=c[1],d={y:t.y,x:t.x},p=XH(d,function(e,t,n){var a=n.shape[2]/2;return{y:n.get(t.y,t.x,e),x:n.get(t.y,t.x,a+e)}}(e,qH(d,o,u,l),i)),h=0;h<s;h++){var f=qH(p,o,u,l),m=BH(f.y,f.x,n,r);p=XH({x:f.x*o,y:f.y*o},{x:m.x,y:m.y})}var g=qH(p,o,u,l),y=a.get(g.y,g.x,n);return{y:p.y,x:p.x,name:qV[n],score:y}}function QH(e,t,n,a,r,o){var i=t.shape[2],s=HH.length,c=new Array(i),u=e.part,l=e.score,d=WH(u,a,n);c[u.id]={score:l,name:qV[u.id],y:d.y,x:d.x};for(var p=s-1;p>=0;--p){var h=HH[p],f=jH[p];c[h]&&!c[f]&&(c[f]=YH(p,c[h],f,t,n,a,o))}for(p=0;p<s;++p)h=jH[p],f=HH[p],c[h]&&!c[f]&&(c[f]=YH(p,c[h],f,t,n,a,r));return c}function ZH(e,t,n){return n.reduce((function(n,a,r){var o=a.y,i=a.x,s=a.score;return UH(e,t,{y:o,x:i},r)||(n+=s),n}),0)/n.length}function $H(e,t,n,a,r,o,i,s){return void 0===i&&(i=.5),void 0===s&&(s=20),HV(this,void 0,void 0,(function(){var c,u,l,d,p,h,f,m,g,y,b,x;return jV(this,(function(v){switch(v.label){case 0:return[4,zH([e,t,n,a])];case 1:for(c=v.sent(),u=c[0],l=c[1],d=c[2],p=c[3],h=[],f=function(e,t,n){for(var a=n.shape,r=a[0],o=a[1],i=a[2],s=new PH(r*o*i,(function(e){return e.score})),c=0;c<r;++c)for(var u=0;u<o;++u)for(var l=0;l<i;++l){var d=n.get(c,u,l);d<e||LH(l,d,c,u,1,n)&&s.enqueue({score:d,part:{heatmapY:c,heatmapX:u,id:l}})}return s}(i,0,u),m=s*s;h.length<o&&!f.empty();)g=f.dequeue(),y=WH(g.part,r,l),UH(h,m,y,g.part.id)||(b=QH(g,u,l,r,d,p),x=ZH(h,m,b),h.push({keypoints:b,score:x}));return[2,h]}}))}))}function JH(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];switch(t.length){case 0:e="fn main() ";break;case 1:e="fn main(".concat(t[0]," : i32)");break;default:throw Error("Unreachable")}return e}var ej=function(){function e(e){this.variableNames=["A","B"],this.size=!0,this.workgroupSize=[32,1,1],this.outputShape=[e[0],1],this.dispatchLayout=OT(this.outputShape),this.dispatch=ET(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="getpointsConfidenceOp"}return e.prototype.getUserCode=function(){return"\n        ".concat(JH("index")," {\n          if (index < uniforms.size) {\n            let y = B[index * 2];\n            let x = B[index * 2 + 1];\n            let outIndex = y * uniforms.aShape.x * uniforms.aShape.z + x * uniforms.aShape.z + index;\n            result[index] = A[outIndex];\n          }\n        }\n        ")},e}();var tj=function(){function e(e){if(this.variableNames=["A","B"],this.size=!0,this.supportedLastDimension=2,2!==e.length||e[1]!==this.supportedLastDimension)throw new Error("GetOffsetVectorsProgram only supports shape of [x, ".concat(this.supportedLastDimension,"], but current shape is ").concat(e));this.workgroupSize=[32,1,1],this.outputShape=e;var t=[e[0],1];this.dispatchLayout=OT(t),this.dispatch=ET(this.dispatchLayout,t,this.workgroupSize),this.shaderKey="GetOffsetVectors"}return e.prototype.getUserCode=function(){return"\n    fn getOffsetPoint(y: i32, x: i32, index: i32) -> vec2<i32> {\n      let outIndexY = y * uniforms.bShape.x * uniforms.bShape.y + x * uniforms.bShape.y + index;\n      let outIndexX = outIndexY + uniforms.bShape.z;\n      let outY = i32(B[outIndexY]);\n      let outX = i32(B[outIndexX]);\n      return vec2<i32>(outY, outX);\n    }\n\n    ".concat(JH("index")," {\n      if (index < uniforms.size) {\n        let indexY = index * ").concat(this.supportedLastDimension,";\n        let indexX = indexY + 1;\n        let heatmapY = A[indexY];\n        let heatmapX = A[indexX];\n        let out = getOffsetPoint(i32(heatmapY), i32(heatmapX), index);\n        result[indexY] = f32(out[0]);\n        result[indexX] = f32(out[1]);\n      }\n    }\n    ")},e}();function nj(e){var t=e.shape,n=t[0],a=t[1],r=t[2];return Zi((function(){var t,o,i=al(e,[n*a,r]),s=Mu(i,0),c=pd(dc(s,yc(a,"int32")),1),u=pd((t=s,o=a,Zi((function(){var e=dc(t,yc(o,"int32"));return Nc(t,pc(e,yc(o,"int32")))}))),1);return il([c,u],1)}))}function aj(e,t,n){return Zi((function(){var a=function(e,t){for(var n=[],a=0;a<qV.length;a++){var r=rj(e.get(a,0).valueOf(),e.get(a,1).valueOf(),a,t),o=r.x,i=r.y;n.push(i),n.push(o)}return uh(n,[qV.length,2])}(e,n);return uc(ic(pc(e.toTensor(),yc(t,"int32")),"float32"),a)}))}function rj(e,t,n,a){return{y:a.get(e,t,n),x:a.get(e,t,n+qV.length)}}function oj(e,t,n){return HV(this,void 0,void 0,(function(){var a,r,o,i,s,c,u,l,d,p;return jV(this,(function(h){switch(h.label){case 0:return a=0,r=nj(e),[4,Promise.all([e.buffer(),t.buffer(),r.buffer()])];case 1:return o=h.sent(),i=o[0],s=o[1],c=o[2],[4,(u=aj(c,n,s)).buffer()];case 2:return l=h.sent(),d=Array.from(function(e,t){for(var n=t.shape[0],a=new Float32Array(n),r=0;r<n;r++){var o=t.get(r,0),i=t.get(r,1);a[r]=e.get(o,i,r)}return a}(i,c)),p=d.map((function(e,t){return a+=e,{y:l.get(t,0),x:l.get(t,1),score:e,name:qV[t]}})),r.dispose(),u.dispose(),[2,{keypoints:p,score:a/p.length}]}}))}))}function ij(e,t,n){return HV(this,void 0,void 0,(function(){var a,r,o;return jV(this,(function(i){return a=nj(e),r=function(e,t,n){return Zi((function(){var a=function(e,t){if(ns()instanceof zT)return function(e,t){var n=ns(),a=new tj(e.shape),r=n.runWebGPUProgram(a,[e,t],"float32");return Qi().makeTensorFromTensorInfo(r)}(e,t);throw new Error("getOffsetVectorsGPU is not supported in this backend!")}(e,n);return uc(ic(pc(e,yc(t,"int32")),"float32"),a)}))}(a,n,t),o=function(e,t){if(ns()instanceof zT)return function(e,t){var n=ns(),a=new ej(t.shape),r=n.runWebGPUProgram(a,[e,t],"float32");return Qi().makeTensorFromTensorInfo(r)}(e,t);throw new Error("getPointsConfidenceWebGPU is not supported in this backend!")}(e,a),[2,[r,o]]}))}))}function sj(e,t){return(e-1)%t==0}var cj="https://storage.googleapis.com/tfjs-models/savedmodel/posenet/mobilenet/",uj="https://storage.googleapis.com/tfjs-models/savedmodel/posenet/resnet50/";function lj(e,t){return function(e,t){return(e-1)%t==0}(e,t)?e:Math.floor(e/t)*t+1}var dj=function(){function e(e,t){this.posenetModel=e;var n=this.posenetModel.inputs[0].shape;kt(-1===n[1]&&-1===n[2],(function(){return"Input shape [".concat(n[1],", ").concat(n[2],"] ")+"must both be equal to or -1"}));var a,r,o=(a=t.inputResolution,r=t.outputStride,{height:lj(a.height,r),width:lj(a.width,r)});!function(e){kt(EH.indexOf(e)>=0,(function(){return"outputStride of ".concat(e," is invalid. ")+"It must be either 8 or 16."}))}(t.outputStride),function(e,t){kt(sj(e.height,t),(function(){return"height of ".concat(e.height," is invalid for output stride ")+"".concat(t,".")})),kt(sj(e.width,t),(function(){return"width of ".concat(e.width," is invalid for output stride ")+"".concat(t,".")}))}(o,t.outputStride),this.inputResolution=o,this.outputStride=t.outputStride,this.architecture=t.architecture}return e.prototype.estimatePoses=function(e,t){return void 0===t&&(t=OH),HV(this,void 0,void 0,(function(){return jV(this,(function(n){return[2,this.estimatePosesGPU(e,t,!1)]}))}))},e.prototype.estimatePosesGPU=function(e,t,n){return void 0===t&&(t=OH),void 0===n&&(n=!1),HV(this,void 0,void 0,(function(){var a,r,o,i,s,c,u,l,d,p,h,f,m,g,y,b,x,v;return jV(this,(function(w){switch(w.label){case 0:return a=function(e){var t=e;if(null==t.maxPoses&&(t.maxPoses=1),t.maxPoses<=0)throw new Error("Invalid maxPoses ".concat(t.maxPoses,". Should be > 0."));if(t.maxPoses>1){if((t=GV(GV({},FH),t)).scoreThreshold<0||t.scoreThreshold>1)throw new Error("Invalid scoreThreshold ".concat(t.scoreThreshold,". ")+"Should be in range [0.0, 1.0]");if(t.nmsRadius<=0)throw new Error("Invalid nmsRadius ".concat(t.nmsRadius,"."))}return t}(t),null==e?[2,n?[[],[]]:[]]:(this.maxPoses=a.maxPoses,r=vG(e,{outputTensorSize:this.inputResolution,keepAspectRatio:!0,borderMode:"replicate"}),o=r.imageTensor,i=r.padding,s="ResNet50"===this.architecture?uc(o,DH):xG(o,[-1,1]),c=this.posenetModel.predict(s),"ResNet50"===this.architecture?(u=ah(c[2],[0]),l=ah(c[3],[0]),d=ah(c[0],[0]),p=ah(c[1],[0])):(u=ah(c[0],[0]),l=ah(c[1],[0]),d=ah(c[2],[0]),p=ah(c[3],[0])),h=cl(l),1!==this.maxPoses?[3,5]:n?[4,ij(h,u,this.outputStride)]:[3,2]);case 1:return m=w.sent(),y=m[0],g=m[1],f=[y,g],[3,4];case 2:return[4,oj(h,u,this.outputStride)];case 3:y=w.sent(),f=[y],w.label=4;case 4:return[3,7];case 5:if(n)throw new Error("GPU renderer only supports single pose!");return[4,$H(h,u,d,p,this.outputStride,this.maxPoses,a.scoreThreshold,a.nmsRadius)];case 6:f=w.sent(),w.label=7;case 7:if(n){if(!0===a.flipHorizontal)throw new Error("flipHorizontal is not supported!");b=this.getCanvasInfo(uG(e),this.inputResolution,i)}else v=uG(e),x=function(e,t,n,a){var r=t.height,o=t.width,i=r/(n.height*(1-a.top-a.bottom)),s=o/(n.width*(1-a.left-a.right)),c=-a.top*n.height,u=-a.left*n.width;if(1===s&&1===i&&0===c&&0===u)return e;for(var l=0,d=e;l<d.length;l++)for(var p=0,h=d[l].keypoints;p<h.length;p++){var f=h[p];f.x=(f.x+u)*s,f.y=(f.y+c)*i}return e}(f,v,this.inputResolution,i),a.flipHorizontal&&(x=function(e,t){for(var n=0,a=e;n<a.length;n++)for(var r=0,o=a[n].keypoints;r<o.length;r++){var i=o[r];i.x=t.width-1-i.x}return e}(x,v));return o.dispose(),s.dispose(),$i(c),u.dispose(),l.dispose(),d.dispose(),p.dispose(),h.dispose(),[2,n?[f,b]:x]}}))}))},e.prototype.getCanvasInfo=function(e,t,n){var a=e.height,r=e.width,o=a/(t.height*(1-n.top-n.bottom)),i=r/(t.width*(1-n.left-n.right)),s=-n.top*t.height;return[-n.left*t.width,s,i,o,e.width,e.height]},e.prototype.dispose=function(){this.posenetModel.dispose()},e.prototype.reset=function(){},e}();function pj(e){return void 0===e&&(e=NH),HV(this,void 0,void 0,(function(){var t,n,a,r,o;return jV(this,(function(i){switch(i.label){case 0:return"ResNet50"!==(t=function(e){var t=e||NH;if(null==t.architecture&&(t.architecture="MobileNetV1"),TH.indexOf(t.architecture)<0)throw new Error("Invalid architecture ".concat(t.architecture,". ")+"Should be one of ".concat(TH));if(null==t.inputResolution&&(t.inputResolution={height:257,width:257}),null==t.outputStride&&(t.outputStride=16),_H[t.architecture].indexOf(t.outputStride)<0)throw new Error("Invalid outputStride ".concat(t.outputStride,". ")+"Should be one of ".concat(_H[t.architecture]," ")+"for architecture ".concat(t.architecture,"."));if(null==t.multiplier&&(t.multiplier=1),RH[t.architecture].indexOf(t.multiplier)<0)throw new Error("Invalid multiplier ".concat(t.multiplier,". ")+"Should be one of ".concat(RH[t.architecture]," ")+"for architecture ".concat(t.architecture,"."));if(null==t.quantBytes&&(t.quantBytes=4),AH.indexOf(t.quantBytes)<0)throw new Error("Invalid quantBytes ".concat(t.quantBytes,". ")+"Should be one of ".concat(AH," ")+"for architecture ".concat(t.architecture,"."));if("MobileNetV1"===t.architecture&&32===t.outputStride&&1!==t.multiplier)throw new Error("When using an output stride of 32, you must select 1 as the multiplier.");return t}(e)).architecture?[3,2]:(s=t.outputStride,c=t.quantBytes,u="model-stride".concat(s,".json"),n=4===c?uj+"float/"+u:uj+"quant".concat(c,"/")+u,[4,WV(t.modelUrl||n)]);case 1:return a=i.sent(),[2,new dj(a,t)];case 2:return r=function(e,t,n){var a={1:"100",.75:"075",.5:"050"},r="model-stride".concat(e,".json");return 4===n?cj+"float/".concat(a[t],"/")+r:cj+"quant".concat(n,"/").concat(a[t],"/")+r}(t.outputStride,t.multiplier,t.quantBytes),[4,WV(t.modelUrl||r)];case 3:return o=i.sent(),[2,new dj(o,t)]}var s,c,u}))}))}var hj={SINGLEPOSE_LIGHTNING:"SinglePose.Lightning",SINGLEPOSE_THUNDER:"SinglePose.Thunder",MULTIPOSE_LIGHTNING:"MultiPose.Lightning"};const fj={"640 X 480":{width:640,height:480},"640 X 360":{width:640,height:360},"360 X 270":{width:360,height:270}},mj={camera:{targetFPS:60,sizeOption:"640 X 480"},backend:"",flags:{},modelConfig:{}};uH.PoseNet,uH.MoveNet,uH.BlazePose;function gj(){return/Android/i.test(navigator.userAgent)||/iPhone|iPad|iPod/i.test(navigator.userAgent)}class yj{constructor(){this.video=document.getElementById("video")}static async setup(e){navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||alert("Browser API navigator.mediaDevices.getUserMedia not available");const{targetFPS:t,sizeOption:n}=e,a=fj[n],r={audio:!1,video:{facingMode:"user",width:gj()?fj["360 X 270"].width:a.width,height:gj()?fj["360 X 270"].height:a.height,frameRate:{ideal:t}}},o=await navigator.mediaDevices.getUserMedia(r),i=new yj;i.video.srcObject=o,await new Promise((e=>{i.video.onloadedmetadata=()=>{e(i.video)}})),i.video.play();const s=i.video.videoWidth,c=i.video.videoHeight;i.video.width=s,i.video.height=c;return document.querySelector(".canvas-wrapper").style={width:"".concat(s,"px"),height:"".concat(c,"px")},i}}const bj=["#ffffff","#800000","#469990","#e6194b","#42d4f4","#fabed4","#aaffc3","#9a6324","#000075","#f58231","#4363d8","#ffd8b1","#dcbeff","#808000","#ffe119","#911eb4","#bfef45","#f032e6","#3cb44b","#a9a9a9"];class xj{constructor(e,t){this.ctx=e.getContext("2d"),this.videoWidth=e.width,this.videoHeight=e.height,this.scaleFactor=t,this.flip(this.videoWidth,this.videoHeight)}flip(e,t){this.ctx.translate(e,0),this.ctx.scale(-1,1)}draw(e){const[t,n]=e;this.drawCtx(t),n&&n.length>0&&this.drawResults(n)}drawCtx(e){this.ctx.drawImage(e,0,0,this.videoWidth,this.videoHeight)}clearCtx(){this.ctx.clearRect(0,0,this.videoWidth,this.videoHeight)}drawResults(e){for(const t of e)this.drawResult(t)}drawResult(e){null!=e.keypoints&&this.drawKeypoints(e.keypoints)}drawKeypoints(e){this.ctx.fillStyle="Red",this.ctx.strokeStyle="White",this.ctx.lineWidth=2;for(let t=0;t<e.length;t++)this.drawKeypoint(e[t])}drawKeypoint(e){if((null!=e.score?e.score:1)>=.3){const t=new Path2D;t.arc(e.x*this.scaleFactor,e.y*this.scaleFactor,4,0,2*Math.PI),this.ctx.fill(t),this.ctx.stroke(t)}}drawSkeleton(e,t){const n=mj.modelConfig.enableTracking&&null!=t?bj[t%20]:"White";this.ctx.fillStyle=n,this.ctx.strokeStyle=n,this.ctx.lineWidth=2,mH.getAdjacentPairs(mj.model).forEach((t=>{let[n,a]=t;const r=e[n],o=e[a],i=null!=r.score?r.score:1,s=null!=o.score?o.score:1,c=mj.modelConfig.scoreThreshold||0;i>=c&&s>=c&&(this.ctx.beginPath(),this.ctx.moveTo(r.x,r.y),this.ctx.lineTo(o.x,o.y),this.ctx.stroke())}))}}const vj=n.p+"static/media/sample1.c621ac599acd5d3a470a.mp4",wj=JSON.parse("[[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],[[-98.21250472241871,118.2351997749995],[-95.06297769973264,115.36032526512372],[-99.45962772533687,119.86344784589562],[-90.8682612130882,118.06593292890238],[-94.68041356348749,118.51820870072083],[-95.97473327803203,118.03626694832792],[-96.91818476440812,114.41831254416843],[-95.59932247818239,117.15379297206914],[-94.87596700290487,118.30906363109057],[-91.34962755703106,116.77515199704203],[-95.65212004800082,119.12331730135202],[-95.57289448887224,119.10453825038996],[-95.4270392910039,115.68424210482931],[-92.49188922337925,118.01925734958866],[-95.04214897949265,114.65087474716847],[-99.72185679734491,108.4372456560418],[-98.90669281992331,109.61309030685425],[-100.77560755219764,115.85360438433565],[-100.27261222836182,108.83544249841145],[-104.70819060549911,118.00276874823044],[-93.58571648821953,112.53665652175982],[-99.29262998540435,120.08792044105064],[-100.3776688590653,115.78391118243394],[-102.47508499368337,118.67846794390391],[-102.99729403745573,116.91715915515613],[-104.14276810931517,118.18282454557027],[-104.9060821761305,118.24734840608221],[-102.6266801949086,122.50268873903258],[-104.23353486372821,122.23175601026458],[-102.9146647228427,123.682235493353],[-97.06875241749998,123.88620473482797],[-97.55346480020569,124.55797206552086],[-95.89857995193637,122.71027306078793],[-91.63066242376931,121.11515535897843],[-93.1812238770815,131.0900944554445],[-95.2136171048212,129.57292703136613],[-92.26523536565958,132.89411962779513],[-78.91151764144968,134.34310397853744],[-80.26903125864612,127.9098297843957],[-80.8495954881364,134.93968137833576],[-83.58435932943917,136.67927683338394],[-80.25598058538276,150.5634135919588],[-81.69705576335792,147.42131117191195],[-84.29145474365458,145.40799656342767],[-91.91422802283012,145.6115178508171],[-93.35765542212437,148.2285125430766],[-88.0878345727869,145.41612565568403],[-95.08127994431817,140.94894206141407],[-104.33757909718867,137.96390229420444],[-99.46283648834725,137.01663066004244],[-100.66145154107704,144.06851356399693],[-106.42070056017843,137.2722670752446],[-106.12290528591177,125.38114542303492],[-104.42097539130532,130.45735519979553],[-111.96543680491749,133.42318360396894],[-113.80794900986342,133.64060713630977],[-105.87738010347948,129.83058540691547],[-112.07734479978018,130.5073732341025],[-118.0614672702398,126.51408105687233],[-119.32916719978675,126.11316789154125],[-115.7816651129321,127.32726592545896],[-118.16710468109841,123.66009038249751],[-119.30873148648413,125.0360734064426],[-115.47142741944134,130.54363243364992],[-110.22571333530203,135.13028436308116],[-107.22333609725325,129.6295618027608],[-107.39224664663232,124.08668684875738],[-104.35004103546811,130.9641878874603],[-101.48723650503558,127.0676641556704],[-103.24316737312745,126.84634339667457],[-110.35312411476343,139.62566847488256],[-141.27453896092663,145.9459701910614],[-96.86795272713351,132.8382776537171],[-99.6714036407696,122.1735794305356],[-101.67409473211251,116.14001119305067],[-101.04990727844034,120.29280905117844],[-101.01130802480509,124.18136004078849],[-105.24767712132001,124.6214762555419],[-105.71246741549601,133.11646292189369],[-94.65157990343818,137.22754656090876],[-88.7293351307456,139.09722203365277],[-87.93026228308656,144.47230478080678],[-80.10619777409079,141.97217022996188],[-84.84404500824735,148.468083624668],[-81.95853491939357,143.06197651204775],[-86.89759541983676,143.71234705423058],[-88.9793534035087,135.54990628091707],[-84.17062973804138,134.98753334823232],[-90.33739503715486,132.96123249946538],[-88.37301570728533,126.31995259303994],[-87.77316491399,122.6378380361117],[-90.5752203186371,122.86180997364193],[-95.45090563134664,116.62451197460803],[-95.74053031048192,119.56521979670538],[-93.34385639696109,120.11092657845097],[-87.90392474318844,123.82335250849485],[-90.62391582413318,123.17036605570593],[-87.52607507341759,135.23133483972833],[-85.21173497878976,138.3878587248695],[-81.27868011153987,140.54136424481044],[-76.19094281099967,139.36694074689672],[-73.30845438168967,141.80617463149315],[-69.97403661056671,143.82703047809582],[-72.05433983184298,147.64845992743858],[-77.12038870839183,146.2715181071634],[-85.25936994064614,136.5845361732271],[-84.30480042962824,133.34548212634684],[-92.3852707465461,133.28165505865934],[-88.29467892949583,133.25847074744388],[-92.39994946263687,129.16563889172107],[-99.43342802715836,123.29193357430904],[-97.64204403498593,124.40562050548692],[-100.7416271743387,123.9107101271079],[-100.61122545377293,120.25698674145201],[-100.8516615966696,121.29097018535163],[-101.29574798370089,115.74617294478765],[-107.85978111568181,110.9989430405883],[-102.24059647203973,116.11790375337375],[-100.06635159907529,110.75253446859972],[-102.57030045647332,105.49434007467346],[-101.18052923699048,97.2393053395707],[-108.98437971316059,93.26873004273227],[-104.5971187409254,85.82112450072748],[-116.05432837940998,81.08774351062357],[-121.39373722532537,80.86255079481032],[-120.66872383466699,80.04035729597149],[-107.55532542683068,80.42029655727765],[-108.61836646026097,91.41532016377664],[-113.51241801131425,88.76100694900799],[-113.89618024743692,92.79078224815112],[-116.42169867838817,100.29870575354414],[-112.4292415843492,105.04735920530584],[-113.59289159552117,102.93046963732377],[-109.47872250486557,108.67416597695899],[-112.361687078116,112.88493260255632],[-104.41686265954701,117.24714200835206],[-100.29566910950007,120.85523979685001],[-95.72597590201383,128.1704941947322],[-97.20218747357512,136.25539792883],[-98.24523664986822,138.5002738977496],[-91.51551165365191,137.48397806107653],[-85.89892715582562,142.17776594801842],[-91.85296262829627,140.07774089503175],[-93.91250705865446,147.497641664149],[-88.81139188982763,142.3813779117197],[-91.04947988264178,137.3975681442273],[-94.93072985477261,138.57072944060224],[-83.20194288325251,136.5511841463915],[-94.77650016487144,137.44130309889795],[-103.41618733091047,130.8391961114943],[-98.06153413715441,127.58319355853973],[-95.1041397433296,127.2568426097605],[-99.15164640111738,125.69966140232202],[-110.84778672242197,143.79619081634542],[-104.3705162386695,139.30020365487167],[-98.37536641655856,132.3459382794423],[-95.08372307221038,145.74318533598966],[-79.31845294445111,151.49306378272354],[-49.8084295562893,154.5988763068541],[-49.46411714549913,154.4919287929987],[-57.743872110007544,149.06678963514537],[-72.86499975345976,146.06601987208046],[-75.76353950382162,140.19246114202872],[-91.99114328564451,134.52279514330212],[-93.56187041667903,125.81588013960959],[-94.3533319222226,130.4711986088746],[-95.3012316816135,135.39820249503668],[-98.04354350109634,129.03844704018718],[-102.6115829659816,132.09766261646405],[-104.49123701629037,122.42493853738188],[-103.08852219003114,122.74303957534016],[-112.22252926377888,123.06989491474621],[-104.61746881211201,120.06592384930048],[-97.66124746877551,116.41353227074967],[-93.73589762862639,122.12412269978654],[-82.26234249418576,123.663856780743],[-76.01799644622895,134.86004193016618],[-77.08784496379849,128.4870909793682],[-77.16002040408,137.44712765914062],[-78.93983705372398,137.59679042516302],[-83.63203602604665,140.12795754240688],[-90.5581684697371,136.3674377132453],[-86.32399116054876,133.54846360540614],[-88.60364607108181,136.8830047627547],[-78.58009966424129,135.3388421515382],[-80.61208966136587,134.3672547134688],[-84.24889722133389,134.17641346625248],[-87.03745888341393,131.67060840744603],[-90.5611530970865,132.42650899074488],[-88.9081708630132,135.465321234537],[-90.64591537108117,144.72505154383487],[-88.04698923823958,141.5052417587077],[-88.21534115831128,142.8574895792501],[-78.31227791355218,141.30586285965603],[-74.92700778757137,147.45567009020147],[-76.73828812344465,146.51401287042415],[-72.94062678877162,148.2392884115202],[-77.81087228468812,135.92560686065997],[-79.92018643290055,140.95285440703742],[-89.9769460011783,134.60107930176957],[-98.1094369935181,134.24872572297443],[-98.66556484372074,128.6380151285424],[-90.22993219029422,134.45686876909713],[-109.83592360849048,117.53725890583212],[-111.18163185720141,115.16084084907675],[-117.26120108269822,114.42590890040663],[-97.48265847091278,114.75683710470071],[-97.47757132834977,112.23712475578225],[-92.56736633121557,104.86142694801117],[-72.28832121683058,100.05108789036387],[-64.7887723446799,108.90198050286392],[-73.90087024000991,124.00346297877206],[-55.07740731763107,131.42282182105578],[-52.96034527839333,126.52564054084098],[-56.26613340017076,128.77536616084785],[-54.36783202992103,131.6834335962427],[-44.53994984169947,130.1425014593018],[-38.32065903878379,133.2319097865368],[-53.96580833199664,120.46693301859318],[-58.012297921345294,113.78035014367435],[-79.84465605139633,113.07565844087503],[-83.27336913083462,116.05691300767899],[-94.5729420499149,113.50503938383838],[-84.11173268498624,120.12270152800966],[-87.63119161930973,111.77390924801148],[-96.18496571109608,110.65088330293861],[-98.5945471294927,107.32101900095483],[-101.69784915326352,104.90030650245365],[-100.91259266104805,100.00828714029558],[-100.30218411780044,98.5544908533659],[-105.08319729204067,100.7046804080037],[-103.318177302972,94.3877045650379],[-99.00712441272691,97.46334151937583],[-94.16539054309533,98.29125850390756],[-91.23762397688716,94.9707565619583],[-88.3925322516605,90.01492130441318],[-86.97677463551764,81.84681415842249],[-76.87294401087411,83.38127607618787],[-82.63094406235507,80.96064651548932],[-80.21829566740507,87.59802094718736],[-73.29323144183769,91.77240658536175],[-72.12772090486101,88.3865010400682],[-70.09969737391856,90.27622368052016],[-72.924257055223,93.63630584020041],[-77.68380835400598,93.970749393755],[-75.88793083808224,99.22131531224375],[-76.01800212573283,95.98438469005396],[-70.80405432644432,97.13333536752714],[-75.42614474160735,93.01186848533905],[-77.45952919164131,94.95533393408505],[-76.05844206056554,86.03595644168945],[-80.78866415776855,86.76371718523615],[-86.12004473819576,83.28344264268776],[-77.33990852843209,82.90762525163257],[-71.46035773036596,87.55750993034849],[-70.12730935426822,88.1582461094672],[-72.70611710983724,84.87054618094658],[-68.7331223026685,83.16672276413772],[-73.50123680966163,83.72782641558547],[-69.11360948911823,84.80376241048498],[-66.46393339680816,84.87962298680907],[-64.00228045718148,91.00343492260538],[-61.681612054821414,86.04074526956708],[-58.16330065108673,87.93265031293322],[-61.032996954133466,86.21340678497302],[-63.70737091722265,85.07752158342782],[-61.30654852496605,83.31533146044728],[-60.39006566830807,79.24903870765888],[-67.58362240772334,81.74117562019092],[-64.11098479298391,79.44451139798764],[-69.64620119086408,80.65125339749102],[-71.30764586892502,77.96061584300128],[-68.68787501916097,81.73410922592689],[-64.49454002039437,78.73890361647489],[-75.97041062722525,81.29163317672862],[-74.01030368993713,84.27695544547032],[-74.11070378742448,82.97759921452814],[-78.94240834562078,79.60891329560343],[-72.34271920696534,75.9480220878363],[-75.2571268083438,73.51291479685881],[-73.00859686579702,71.88749991425595],[-66.81136723523917,72.2863923822822],[-67.86704998887365,72.18366627663261],[-69.7410831212398,77.57693268819366],[-71.00487872398833,82.51923454303449],[-76.73939916866112,81.81386991708223],[-82.5944902717203,90.17905939120635],[-79.67058056308394,90.58683762111286],[-80.32658722414214,100.3529919894687],[-75.60487894036135,103.829197075391],[-85.54659218534658,104.47825817907119],[-81.05180677025544,108.64270866293452],[-79.72511301537372,111.87044668359897],[-73.5858551023997,111.51183208407224],[-82.30424249891814,112.38000396871644],[-79.81655445376077,111.43092134733911],[-78.7330226931166,111.42177164884902],[-76.80676753618366,102.43613226836533],[-84.14236591340347,100.27132698148762],[-92.11607216770255,103.37272002250575],[-83.15298666682696,95.45766843149954],[-87.26044176568479,93.50666545425872],[-97.26292079493135,93.84259881023308],[-94.76059971522488,97.3296631618133],[-89.97864510354879,100.87465811570235],[-96.88150807552546,96.55823149876005],[-97.1706912925577,93.03162564319666],[-94.92346075369113,95.32876642496899],[-94.39931247805362,99.99934598328127],[-100.04810364375555,109.24988052633671],[-98.17086110853364,111.63837992282072],[-97.16888401870631,108.04388989254983],[-105.825292009505,113.61837812658848],[-103.10427107873795,110.9311952358778],[-97.29746538061147,114.63686703790302],[-104.22568277397414,114.14957959551043],[-92.17448981001121,121.60331235254057],[-88.52305705297397,124.65229009741438],[-86.10026842124881,125.54409775332033],[-86.40649330806423,126.44847186212371],[-80.42296697829977,124.0583972451443],[-80.866199412875,123.1397253864875],[-82.58525721806245,120.75947640101492],[-74.18433865858606,131.7304288090893],[-85.84472522718289,122.19542438593692],[-83.84133842850753,124.87987327907285],[-73.155920383833,117.69672040700868],[-65.15016935788447,118.28645966767033],[-70.49450333117323,117.83101425233212],[-64.71861719838876,116.67264463480831],[-73.21226482716429,121.64079382462637],[-93.86445819490558,115.24002312095934],[-87.1204887412789,114.21101629343491],[-86.65647089383151,108.65899890717583],[-90.27151613552769,106.76836037164901],[-93.65863246682943,106.5674180911808],[-86.05690378942535,105.90802360492091],[-93.45439509007952,109.7996016333941],[-105.70134333064073,109.73312975140436],[-107.12143625364973,109.44457064504968],[-105.70541763723509,106.82761271100662],[-101.66728890668145,112.41590208661682],[-105.31245575760039,110.88336405354232],[-98.23660751829289,113.8031098495145],[-93.11676288490065,113.19195563435676],[-92.35137891136611,111.25340566890338],[-100.80075892351005,117.25272234175202],[-102.74456710569552,119.28498342272667],[-103.50256400871609,121.25313235693693],[-102.38812427136554,127.81483151100542],[-105.53687930342261,127.81753825933083],[-107.24340778373374,131.9501414387205],[-128.5184756417649,130.54509486392965],[-122.49364671223896,135.0136232829616],[-136.31949760012446,126.75513899692214],[-122.81462740498591,138.94719529768042]],[[81.31514775642268,7.661178462201519],[81.59895203411554,0.21014239470844132],[79.28138216020056,-7.192128017487448],[85.76993280513113,0.8082697798304253],[80.46166899775596,-8.512452458241228],[83.18026926745802,-3.562662141256851],[85.74362213187476,-1.5324197496150873],[79.14992241964035,-2.92408084864428],[79.10149941682721,7.574340811672869],[78.90538569197918,-2.7560274583241835],[76.05588778821254,0.7469681411959073],[82.9048728103478,6.548584088677899],[80.1482439174481,0.8941222427299635],[83.83813733065813,5.22888117600769],[77.77172132166027,-0.6765316495930165],[86.1234370409519,-0.017199628145135648],[99.90692678968935,1.1238589061262019],[97.10125466971692,-0.4294025191054516],[88.15524871912874,3.2766833577834404],[79.24312146239635,-6.74622239748453],[70.60143883526086,-4.60940053702177],[83.25837752349992,-16.406345075828426],[76.60951416331886,-14.439185963072305],[74.52854472666706,-15.147585865187693],[76.42342439302308,-15.642672472309869],[72.6260799691006,-12.93394246661137],[70.0738633511038,-10.134513990757],[75.67584444146667,-13.710937362178583],[83.71250018351213,-8.213964156306474],[84.33929151707628,8.481986445666053],[86.23580465791383,2.032173619089349],[91.86726432618627,-3.6562286630118024],[90.42261039217044,-0.4562907823720934],[93.62946691265245,-9.910566308886473],[113.59537556153725,20.037234219936522],[112.84097590084389,50.90656049105144],[139.36288557325133,132.7918269135074],[123.79270743260179,203.41651944915407],[104.58983230308797,230.98616044252537],[102.1775128641533,258.9075112865596],[74.33530700543406,287.60563827338365],[68.65064280200579,298.3938980973305],[84.6472005255996,281.1060716206912],[86.11286209059472,279.6943891925158],[86.94209218864421,275.6419303296341],[123.11187325736148,266.7242545374895],[139.09147527345772,242.15732544887908],[147.64531566028256,219.1998124029726],[150.17171096958918,185.3914250643487],[154.2773618312316,134.340660129551],[150.7248585094526,82.44426750184266],[141.88050383452764,45.36008883049453],[135.7152245343285,49.67636659322898],[142.3093486751668,61.92714372334069],[158.35650599702637,82.31955100272421],[178.71026269630943,97.0015013655161],[142.29694993685075,121.62271378186051],[176.16230323587683,116.16452869428213],[187.63512448631377,131.29327524145674],[188.24563454376596,142.4889473565438],[190.43889119517462,158.00005805346416],[191.95759043540545,161.87068342676218],[195.81692543633756,167.6038852957621],[191.47868833278824,159.77623082432058],[183.73227433730415,138.99265382679414],[191.6003807641447,135.9893690583059],[178.2228763836307,122.60884956661437],[171.5397923687899,108.0772073202719],[148.7613933805235,93.00980824843077],[147.05142004328843,73.31708168716227],[144.03004247402816,77.60718574626173],[90.22900254974695,70.56669377866149],[127.16868078484686,27.473393650091452],[112.53053751735581,14.14772033109034],[105.20671970833803,6.236954507237783],[113.37886437940767,9.31074312378837],[121.36499928551473,15.755652653131506],[124.7738744608613,27.424094995376663],[136.60756643336492,43.118944637129516],[122.34593961027304,58.76258461104953],[102.58457311169252,81.76493477921804],[86.77709479478085,87.31837907666386],[81.99023250544269,79.12721680607774],[83.38324093057429,69.91669745785373],[83.78380851569602,71.58516940674247],[94.04944625280177,60.852135153896484],[95.62067679932193,46.93127117770882],[111.84683643621088,38.99177998867424],[103.12783161799882,17.8900837453275],[106.76290547080532,6.659143100241749],[99.72357699494978,4.194249203054937],[97.78024441109949,-0.26370303924363725],[92.40580442295254,5.029009813653261],[90.34835481048094,9.182109299320018],[91.56485485172527,5.002039562960022],[99.13525577285736,8.041658576648047],[96.88121971091607,5.879284925168122],[96.69907545767808,5.929038208768702],[103.55458332496778,4.96872940564549],[87.31625142111557,9.192274856416816],[78.53455150256889,-6.854053101859904],[75.42081786245183,-15.664122265971514],[78.08504712478657,-23.35138212015238],[82.8334548392869,-22.21661188560722],[79.42706569068105,-22.155926660114233],[96.82734242755214,-7.828665478842595],[109.92545865499028,10.606494960264968],[102.96795879691729,20.209925750415664],[106.7342807844019,18.28867796453278],[91.36221252137364,10.14776663103828],[105.4657754903958,21.522881573544737],[119.38998758036439,24.542012001195985],[127.38094657968009,31.083407475343733],[135.27424627157973,34.176480639235024],[125.07347742910508,39.94610453683447],[126.1957978595168,34.7222088162182],[103.1709995296784,22.043600748927133],[87.07532597963052,16.46102441635344],[47.74495512810097,12.898125569218337],[57.56592204566425,18.139400557150907],[56.93665515918042,16.200356323631468],[52.3576185928809,11.366844590011283],[59.80480052275408,4.0039818910044005],[67.61742358528033,0.4523484237380444],[56.94054621506791,2.2461131978665207],[66.02532980095862,11.769391453668504],[65.18375336140622,15.375775929913516],[66.25282205359906,6.497985761304562],[67.75236054930906,5.115456895112402],[82.85591010373821,31.23370560727301],[95.57544274125587,29.354716202536338],[103.09771890164296,30.542437605824034],[116.39905076542806,43.41189069447785],[123.90571373100533,46.888017828278066],[120.73532067485269,46.40638346617811],[138.31793960420543,57.18610340802104],[153.82737778497426,90.32698105359032],[151.66363259779268,116.3968317568964],[163.16769309491985,175.39011935373526],[152.6784145825659,209.587515758437],[138.39886024350483,220.00750483600427],[137.24484335418117,244.43832162209924],[136.13513305507013,228.23770254112014],[139.32493636147194,220.5738886175793],[143.57304620166087,216.5823671274428],[160.40695134861244,213.28775762296095],[172.39807366980062,162.17793806096336],[187.006542058749,113.9241137208628],[155.3261578088085,67.94493006627476],[132.41657570205427,29.13516349605834],[130.07316451981296,17.5313796029443],[128.91320514269398,32.41758111465242],[117.92272440367731,39.23125549800068],[93.78062896842096,63.093285051611474],[64.12786747436553,127.59684417717176],[40.44903289799561,162.8972625844948],[-12.838474317144914,192.5908684034157],[20.552901738968217,149.62598231705272],[-48.50466951894674,188.93096498658167],[-60.17594668686155,180.2548658457365],[-90.0089908188479,179.76165777934887],[-59.186733033356234,181.4031651065061],[-46.44199794123375,175.85483894890115],[-2.2173195782933135,159.87553830810953],[25.800016523462943,143.6504840827448],[49.31963580690274,105.07166312498703],[78.16840457261242,62.74282118578947],[101.18106602379783,22.089329823791445],[102.86034913637593,12.608587409803135],[106.48682921540001,9.795318368247422],[111.88486753022949,11.335549166680153],[111.38703912746382,13.316366559524567],[117.88233617525361,9.544979697728081],[131.06504868212426,18.093321632386278],[134.86418028974856,46.228997903818936],[125.61254093648836,51.838592771178696],[92.14933594764364,34.66341530101761],[96.78840387561706,26.514540084974783],[96.18030129205852,3.499101348662748],[102.10149244241722,5.7575758694296155],[95.14303531217956,16.612841629927175],[100.47207119398229,15.38896675435285],[106.55546577968039,17.47923763852168],[111.1799137318219,33.30363823139032],[109.60921678212162,22.793570032563025],[97.88514955685434,14.865456130446319],[93.73150662825958,10.924390597827937],[98.18231406029031,2.075697476703226],[93.31880387245235,-8.465680171592567],[89.79352444037113,5.166679615239445],[94.4247377261031,8.696029288437103],[101.0611962356727,9.79102012463386],[114.89025999000114,11.093540056174106],[124.66572628372057,18.932851034174064],[149.74648880781876,45.29663518004213],[109.64604660811722,54.54589540523284],[135.5280334869916,83.04734045838404],[140.96695043311058,99.47090019401253],[138.39276866499358,110.57788316137419],[153.94989892329414,111.26732780110228],[163.80176931903372,99.1520340624163],[143.42245631067624,62.601799311768445],[134.82630531550922,38.95389035798564],[136.80322320190464,27.157398061883214],[112.35144173813615,24.014408703529625],[110.0219820361441,13.246945009902106],[110.37719791270013,13.774564333837816],[97.91234547707239,11.9855930301228],[74.44381622351966,10.854243952459683],[38.58444749963343,11.671040832615063],[-4.971669965142553,16.931065406659286],[-70.03540464458587,41.07656002796364],[-61.388500395764424,66.1276633411477],[-80.87350218205233,76.74923433677088],[-17.910928564757114,102.75438722151807],[-61.49647467138482,76.05743386650761],[-38.81101116722982,59.67428044877056],[-13.583055397121257,50.77931488743741],[20.66337700055226,26.581464782162925],[52.315885032381175,21.02227594679175],[74.65134905038565,28.634761908948917],[90.12152980439646,7.252422235510153],[111.81853674557203,8.229652910659524],[100.43828547392536,16.447101385214864],[98.96752445821687,31.39404978032576],[98.22578871863686,24.259547725947414],[71.95040609286139,0.7436684430734886],[75.35103460364701,-3.6352732376200265],[81.23421436862122,-2.4195147125791436],[91.7975279572317,10.201829741664824],[100.90858093122239,22.326060892429382],[111.32518431157115,28.70117321245573],[107.94627852466692,23.91375547791972],[104.04326803067408,21.4245181097383],[87.40145948185733,13.198768372616883],[81.69388811727435,14.147355632314884],[36.437340878090765,-8.195338854833494],[53.41889914829386,-4.057775990275559],[38.46195188660215,-7.084611044226563],[40.66189845868428,-7.3728051238332455],[32.52106850648215,-4.634984830193503],[26.1321573548812,-4.248992214731061],[54.80734186834343,2.7898800603080645],[63.538829754740505,3.38119683805985],[81.14040138417306,16.599753968916843],[79.89046865365799,19.93551331272056],[90.89501219172655,17.153360646600618],[85.80862922142876,16.513824873014983],[85.4092387409994,18.26353910510261],[77.74119106049147,-1.8451414681727556],[57.90391103189768,-6.268685407675093],[53.976030212303385,-5.914264235063911],[60.7719992314328,-1.689441131459489],[66.7459004291477,3.454895821374862],[65.9484460642912,10.051061689915628],[68.34808292776421,5.627633545979847],[67.13205759041887,5.998745866216268],[68.01264298853152,2.7999474930342103],[60.87414261283385,1.30459749014733],[61.47518813500949,0.7235309857541097],[49.52521156589444,-6.507090027030813],[33.63277928110233,-4.005044454258609],[40.73615103722352,-3.9305130577889713],[41.7978830248328,-8.873258966804201],[42.45205295093558,-4.027326029757205],[49.42508547497414,-6.843738516750136],[52.21188957905645,-3.2735218781563162],[66.64028022651416,5.850125778115171],[70.85648928027604,7.52730050090247],[77.19326188929858,9.942154730974949],[74.70977210926287,8.72145139576378],[76.32921863453055,9.382774346163842],[73.223343664455,12.93716608393629],[74.64260769789655,10.131248293039107],[52.03716065352273,-5.483327137012452],[38.68581903106042,-6.428227129070933],[46.45829261365577,-7.28382087493469],[46.556896727724734,-7.07173456515261],[62.32047896134253,5.689143726855036],[70.60825598705964,13.293690475778362],[81.65651419686316,23.516791577553818],[86.81475498279502,23.597530586550192],[89.81321814969971,25.08844048883418],[86.498229256674,24.5664579823233],[89.49949317865855,22.47210134755619],[83.5257431555928,10.64533868527053],[70.51011154915022,-5.905379925759803],[60.8636370523443,-4.765691095322836],[53.27154266485701,-11.434695411182474],[54.960671986593866,-4.413733649880442],[64.74287653878889,-4.085805733949428],[81.6666171542787,5.744582968017767],[82.35525910250772,10.462687585579033],[90.37483816677354,14.071012003467786],[89.60934167943833,10.357330339901068],[91.5725555075071,11.505112157710073],[98.40283360481533,15.706493501778368],[94.00722374865825,8.997640097552448],[78.2749206888264,1.049497575053806],[57.18793500179606,-8.790150835560098],[50.33176089128659,-5.435949157643563],[49.952649344947474,-10.535572625198142],[49.63316810074508,-6.405990379171158],[56.039884901386245,-14.863633075915914],[61.15100276675827,-14.790287560720344],[81.55388132813442,3.2317953418059915],[87.91531056389164,18.468087510869964],[98.1697084139251,18.176641678880742],[94.8258900507443,19.363906255130587],[110.28983648504084,26.787641928649236],[138.1492607709315,54.11343332885815],[136.47834269848738,68.95156623845344],[152.01984261319262,85.66284667378704],[169.60886826935774,93.4051682468147],[168.29783385434087,93.09236206742412],[154.6942836743974,85.80363715762815],[163.69313094737663,82.0609490587118],[163.5949214016856,63.6062174354895],[146.01983751220303,52.74574544968448],[114.41995005850265,20.60637593055378],[96.52295649224538,14.405777600545548],[103.1669784773452,2.8128188621271875],[94.2008956465994,0.6112669754804756],[96.30130588861653,46.92363032247624],[125.88439962154405,104.91429456325989],[115.83468362266956,190.27353782633463],[81.39432251766436,221.69369569590458],[67.60758810793413,237.20959144764709],[76.63765688671742,241.91126976891132],[74.38055773821236,215.01142754917714],[101.15610834656525,200.94955691971006],[107.3821086411698,141.80973553862327],[115.99716321774235,77.39244158637712],[114.20684971504454,33.01896474786565],[92.04769059334092,25.478497951521376],[97.43134522849402,29.046325570639965],[117.67349546827882,45.452940402796116],[133.19141371889668,72.58164061462992],[130.29311691416615,97.38281284287712],[163.99108449881317,104.02520420421729],[172.8286420399835,110.8998608510002],[159.19788356204322,107.69756858989399],[163.38831457466097,92.01352337223864],[136.21846335021314,66.44719509608149],[116.5420137796059,49.124553072919525],[92.84004994119982,19.19498359415047],[90.752055185632,26.088523165986885],[95.60124068906725,17.42492491612495],[86.9460579632464,7.505784558591927],[103.88682667898024,23.677336391295285],[111.00376523511272,8.447983608433333],[122.945204366859,-1.6239405990552314],[132.1960153075629,5.471166219565362],[150.44669633219019,8.153821630800849],[156.4351110277605,17.67087623198347],[149.80753139968135,12.530674723179118]],[[-113.11836448366654,-33.276722594302214],[-108.39884138379159,-28.448897267100847],[-109.08882358812713,-30.56946118237647],[-106.54157168768165,-17.842484289837444],[-110.11686542480459,-25.645735086270406],[-110.31608759846574,-27.072261270427475],[-113.26996923825749,-23.82238599573759],[-109.63143734546844,-22.006122972872163],[-112.36548501064635,-31.311514171280578],[-100.27307467869065,-27.128434477316887],[-106.84262367184971,-19.37161034288374],[-108.45348095441716,-26.88672733829185],[-105.25728683777567,-27.56228609906168],[-106.06603326487806,-29.822439233699697],[-105.91240042469354,-27.2844781434236],[-109.03212081617585,-29.63062504889581],[-110.0436539935933,-28.732088413872702],[-109.68847608179243,-24.10332937779276],[-114.98071768350712,-38.771770083469846],[-114.14356519152699,-31.673010953565267],[-108.13096674159954,-33.043625638389244],[-115.70953394556403,-30.097204442641214],[-113.53847383857294,-28.957284714065622],[-112.4144373346976,-28.113485887561637],[-108.12617829220972,-34.24781444382438],[-106.795706555724,-28.46018850460075],[-119.0176265036311,-28.3525245038785],[-122.36206458183403,-27.926673180980174],[-121.38470015530487,-32.79426200766056],[-122.25382784041511,-31.711899710070725],[-117.85658426498156,-25.41652001170337],[-117.09002239323098,-27.918623299952287],[-114.32528170344534,-21.849586870541543],[-118.46675917630284,-26.090019772836854],[-147.25188798155256,12.124101135148294],[-161.69164758278737,26.413830824086062],[-164.12206004140484,115.05649211118623],[-157.73546307976062,179.59540198661523],[-142.96815446544622,214.00701917049173],[-123.68571989143965,268.78920880258397],[-118.22610806336121,274.15440844092177],[-118.13275055233856,285.58865741878594],[-103.0757920194252,286.85324168973375],[-111.60768563351104,268.55058437835874],[-129.07500707657687,285.52223550921167],[-146.1758880664114,245.93903378546122],[-167.45617536072143,217.9199840830331],[-180.6742546764841,196.0813006959056],[-200.90408067055262,152.912430557275],[-195.54864117255948,100.28467335326525],[-193.5427107767149,56.00938181349136],[-189.2619171191966,25.32560928503767],[-189.53118964770204,15.753703779476155],[-199.21361211185985,11.569847914671982],[-208.02044008376038,30.72220315074685],[-202.69970275404614,46.901094001428646],[-209.42856725620692,65.99595664399908],[-211.68868846715782,89.54847859902361],[-229.15011775470072,86.29994284603595],[-237.64504358430264,103.41237407066274],[-244.48553278244736,111.45132929644546],[-244.46999999723158,107.69646316350031],[-246.42489749868173,108.45535995470163],[-258.0284292809886,109.16873520719037],[-236.51112841334668,111.3578889285717],[-228.24916666160124,96.05782591289051],[-225.82160225513024,73.1354189328481],[-221.51726936310268,76.11954368671718],[-188.9613108445792,44.17114070235732],[-181.57156391279096,30.29369377301998],[-180.05581493163072,25.638150240240407],[-211.66566883664683,15.412912679624014],[-156.55116501406258,-10.256516612070072],[-137.52118899807522,-21.42843163090913],[-144.564535651609,-20.939269702530623],[-139.40145457774423,-27.02633046770063],[-159.19729221924655,-21.819288870457285],[-168.61454270823475,2.4744258532292633],[-171.9699347517053,19.632964132886627],[-158.61637171891613,37.30270463034117],[-140.33415530187096,73.07521871005554],[-122.30793534216002,85.93513667559444],[-98.86114504456532,66.93744571452726],[-108.21101831034332,72.97643521113639],[-122.33514841869368,65.92400842413997],[-126.48474736165855,59.41593234165066],[-130.61173657880772,35.26798984806203],[-132.54659464915812,33.60409003949951],[-142.0977706729164,11.21064784610303],[-137.56117725756218,1.6690047653562488],[-127.64412375919397,-12.153865398153812],[-130.10937023615128,-18.281733721909177],[-128.42341038758462,-18.455177529320054],[-124.66767681290526,-20.11642788894585],[-131.82413129485212,-16.173309917273173],[-141.77141566468617,-0.9883994019348847],[-135.25362001759845,-9.696477407784982],[-115.87356382751835,0.45574234043897377],[-106.84019905145726,-6.132334738089412],[-76.22313926818072,6.627326962794086],[-74.02796811300266,-2.4077325237606146],[-61.649039633453754,-4.663424453018706],[-61.17294363156054,-9.198795189118869],[-63.262593773678645,-6.319306958546463],[-63.98368854599812,-8.471210826515971],[-85.6194639615876,-13.867334833752352],[-104.0084353222033,-1.1587801705362608],[-120.21333163000412,4.483685649306949],[-132.51153115362172,1.9026732410718523],[-144.51968695118717,-5.250742897111763],[-145.94154040158776,-5.671059609550298],[-146.4744932777586,0.2620190837035352],[-148.71413032334232,-3.0691424606725377],[-142.06675917854386,-4.054259126865304],[-146.21247944950255,1.3709308210062545],[-139.3289996503948,-19.035010423299127],[-139.19850534847996,-23.504359377178957],[-149.14814271160992,-20.510147446519113],[-115.20431815898843,-19.266739856136496],[-112.25359377835042,-14.300000020911398],[-113.14702280759292,-18.348880383911364],[-114.52062599621809,-28.999752863343815],[-108.76901268293597,-40.700372995485395],[-118.93688786606259,-44.55796719365162],[-122.23566362879336,-48.76556730884647],[-122.65555651826236,-47.70115007672075],[-112.75940641257756,-40.508004155862864],[-111.14094914528926,-24.97568487661124],[-119.53462059316388,-26.812608082094698],[-106.78090265358423,-34.23476552989689],[-128.17127191096836,-34.727862701279605],[-133.806480835892,-20.52908551587177],[-133.74375861973232,-23.153867234184304],[-140.1479793844274,-19.56984245164051],[-138.26963502892653,-14.063620790663663],[-134.8834143343405,-0.4658154483852286],[-123.10896374538561,11.4168610669102],[-94.99422374502137,56.01475737864473],[-79.2513318336853,139.4075311567916],[-86.54583862801547,180.77813704370737],[-66.54426845956141,221.0431158873165],[-60.64996849348461,221.50167387130386],[-30.889541750989224,255.1933114307227],[-52.24258463369324,238.06795337241635],[-68.3174087291543,195.92192456870157],[-56.37923714092551,206.70457097072176],[-124.66601105891374,130.79126629412156],[-149.8421616044949,82.58681192898825],[-155.52353681050351,31.752048351624353],[-159.08184190318195,-2.2638816791885574],[-136.535677108857,-18.293881911823178],[-148.3082631790208,-14.96501723542383],[-164.86913701402534,-8.459716778292659],[-189.30353684564977,21.998446979044616],[-215.06536670148267,69.18504972420544],[-210.78895293098708,113.53113394039144],[-202.88390857216706,146.46896739973226],[-176.3876188158941,172.42091963648102],[-148.99833298102044,171.0993756289795],[-125.33307287048541,171.8204529797631],[-155.08135905222025,162.07088564428693],[-158.30901668673926,155.173452984385],[-168.03082560388242,125.9248265889911],[-198.9723077378443,100.33723033540207],[-216.0924580109708,77.66472511371455],[-205.28598961032162,29.521141150796097],[-184.5130731626822,9.361530053586534],[-176.85489185601415,-6.5971426382640175],[-147.84736089610544,-6.054825132019687],[-130.35795237018192,-18.79824247013596],[-132.4773561830014,-16.06415256336811],[-155.76693458264458,-16.734516652090747],[-166.82998539081177,-13.013408967201485],[-169.4461549148869,-14.546459141861078],[-154.6120860502573,-2.6407420264855546],[-145.60773052944893,-4.359486961396442],[-148.6815589084892,7.626653697137272],[-149.91404418167895,11.17711799748804],[-150.20662057533298,26.239021125799354],[-152.21453467055017,27.378126381198626],[-158.35221298442605,39.33706138797868],[-146.70440354338865,12.773228560049233],[-147.64108181633225,11.1249248737264],[-146.64341395466835,6.7858355828109325],[-136.18896906938147,8.565056863573659],[-133.44727708017223,4.647719127634446],[-143.5843410499943,3.6344727683386964],[-135.67786202520574,-0.7362675266247152],[-139.6101217916389,0.9619367403757906],[-132.95271261391815,2.816592749831443],[-141.63851316970477,9.803620083601686],[-144.95946219631833,10.965953610965698],[-149.92528640572039,15.18231969732642],[-126.86689020876099,1.68537303944845],[-73.48517736322935,27.76545325198208],[-29.601647906398057,42.011207354924636],[-8.417963686693838,68.26978219744137],[18.320466029339173,92.64639459860723],[-29.909225556951924,94.2275007500657],[-49.7314987285485,70.3805861858682],[-38.55140523690807,56.84818336109663],[-59.55323487415956,28.95977912206945],[-81.35645183765405,14.312319614591956],[-120.45777124469964,-11.630949612552627],[-132.28046895716903,-20.629952289620064],[-133.13942809087956,-26.422822701390032],[-119.96316009103106,-23.505479635120878],[-113.12212251585663,-37.98397376165292],[-109.27107910288476,-40.85558241979527],[-106.22805242621178,-30.33391177156375],[-102.81814262222105,-6.316149929212656],[-120.69646264994617,25.35251956133675],[-122.72374928549459,49.59442885201918],[-150.27992296027463,66.59928995007806],[-156.70100780166007,81.96674383264633],[-148.8166372032323,65.4518008703792],[-104.0950948203648,50.94156251123911],[-119.79182107398475,43.401322145234985],[-105.60531861598491,4.143511854720259],[-99.33900496555339,-27.38567844769409],[-114.78099563517111,-10.02529127393018],[-106.11551184180684,-18.228481146403624],[-127.08775653843554,-21.868237647476803],[-124.1948139247491,-6.752067347636057],[-98.67678882138688,-8.337679647074197],[-109.8255611188473,-2.8999793095108544],[-69.2540636881194,-18.63056562312113],[-54.879995149002355,-25.019223406695005],[-83.73048164701788,-23.942681833154325],[-111.38848008987662,-21.070942021920132],[-132.1740581979111,-20.367846168581764],[-143.54456213823454,-27.030044015533804],[-135.98506808280294,-17.48690454214693],[-127.51811243197787,-12.256218227089676],[-118.68986775057675,-16.017630116142755],[-114.49714399288598,-25.511071602551056],[-98.13156547526114,-20.990830136456452],[-96.52555135824747,-30.287877244074934],[-94.63595467437949,-31.705493421029132],[-94.88808838231398,-19.65623402433198],[-86.08992338143457,-15.017429670836464],[-88.25366157604651,-10.102169202208415],[-93.79999702059399,-12.159618958880856],[-111.82426477372064,-10.696007854404115],[-118.31188655199276,-6.497893359415571],[-112.1472147110535,-8.769669622644528],[-117.89552728155257,-9.765403694089173],[-106.94838602201656,-9.502685930329676],[-101.85200814959359,-9.854681833205177],[-70.45691019988618,-17.508522074362304],[-63.572049628595096,-20.58985655381457],[-60.61990684160662,-21.661901750303286],[-70.95635018240466,-23.61520068124355],[-88.0093929306081,-14.03657485425299],[-96.06793891866556,-0.5335049996846237],[-101.09699776430705,-5.895541846111996],[-99.2992286914531,-10.216323595153654],[-96.52607853309672,-9.597325066577469],[-102.67061197104118,-10.676937065136258],[-103.63000462841455,-7.30203493402837],[-99.26903314509713,-3.0550327765500924],[-91.16097044136791,-3.3010001550826473],[-78.62266211980341,-9.929701605531932],[-70.77504960947181,-9.837852287532087],[-74.85184073110781,-6.426747635755419],[-83.8338803643802,-14.268937049711894],[-90.40056429397447,-7.569399541483108],[-90.9592991542408,-0.7613296715967408],[-98.47721419284073,-5.045789426613624],[-95.56164878510037,-4.99758391300054],[-96.79384742685221,-11.329143692804791],[-95.43710414112883,-15.909343034971016],[-96.35341313487692,-12.724176803611044],[-94.76595646122297,-11.725428032204036],[-91.53711341829182,-24.986390258279243],[-78.35316949570415,-19.78050859702671],[-83.18439015877141,-21.389610489346524],[-94.71821843532501,-22.702385936880887],[-90.81925177456168,-14.280512427781332],[-95.56604831127561,-15.833936611872105],[-88.75939435738735,-18.634764714126618],[-89.62401109525939,-19.94505841169746],[-89.89210202180107,-23.52835816885556],[-94.6132560908004,-14.468426011566066],[-103.65402752563114,-7.705502082138196],[-102.90034318726208,-14.253150655649279],[-91.31825184338248,-20.70076126996298],[-71.03107071271927,-20.33238521436283],[-69.63635278356435,-17.146574951078378],[-74.04264784062792,-10.722921088286512],[-94.96204492500738,-15.80548822163371],[-104.89674469191363,-9.577054690587033],[-118.19789436086319,5.473205238215428],[-129.02069619628037,18.072965561595424],[-134.881550122566,19.35697872447463],[-132.4031017895013,17.78764129846195],[-132.70543412025847,12.234826577834156],[-122.96877399156386,3.0701413482182716],[-120.68540154409516,-8.188186343839106],[-107.89064880453964,-25.809075695742536],[-87.47045810505409,-31.01075098600768],[-86.61733757209896,-33.6877701579391],[-96.31282570586535,-34.41172423371677],[-102.46680245401359,-31.0978042980571],[-105.56237306767719,-26.153933178145053],[-111.4892729281043,-20.83041266110274],[-110.9864111283236,-24.423801141534],[-122.46514982462804,-30.38475920728729],[-126.76072812645953,-31.773347382740212],[-134.23260971191138,-16.219965378865936],[-153.42787672584308,17.51510243160419],[-166.58892825178242,38.07502205814308],[-209.54952880371422,43.23632921910246],[-220.69751668658603,52.53121797644724],[-214.92248794456145,55.949156105582574],[-223.0286332680381,48.88487092010348],[-200.88735843505822,49.1727848870928],[-181.92704122385436,41.89417957046487],[-149.8864689382214,45.29938033782196],[-148.24270918757247,15.404868966444951],[-119.73980310344706,1.5750637903346387],[-111.24119823890294,-1.086200344961867],[-117.19706662291776,-0.24742517392962782],[-135.6055845426731,32.14401521103082],[-156.95714871379136,82.52093764060771],[-154.52301015891902,168.15145371081735],[-119.02467181087155,195.7987721950699],[-90.97101284074819,243.78428934737246],[-102.27767317433461,241.19633015672707],[-108.87253694494149,219.42803610717954],[-141.93476537585735,180.93056861725188],[-168.94080677387598,116.16342251931064],[-164.5974901908187,44.11021425559227],[-136.5163398161564,-3.6434741712570258],[-123.3607587255085,-13.540787683342728],[-133.2083351520992,-15.221078571745693],[-159.42491178562034,0.3338088330579012],[-160.37312234152887,43.33418848204644],[-194.30954471517924,64.30425346407094],[-213.07249703403386,80.55310780401157],[-199.80300877283588,79.67750659390003],[-202.1910839002549,70.82882006823161],[-199.73607028395054,57.99585704276967],[-183.2509431252705,35.9100976271684],[-147.61461277622726,4.434116096018897],[-117.24720163110271,-1.5430582941756938],[-119.16963681325012,-11.987140813604697],[-121.82788535142004,-7.962160101505106],[-132.78409460081645,-2.225900800440968],[-134.84286794922832,4.538995014389684],[-138.47520388362676,2.1665326650444285],[-140.14909905329324,4.529511386420381],[-159.58812647526736,-11.66470931675235],[-155.70952931565841,-15.154067968311779],[-170.70047610756217,-39.190129690296885],[-164.3959519403569,-28.13122811205335]],[[77.99944289848543,-124.25147521913698],[81.3695792925165,-116.52564042668337],[87.06651170771943,-127.07496271380205],[97.0724180901268,-125.21246950657974],[85.43835001544142,-135.73217251401206],[85.84345267769197,-129.51177562804935],[85.88357999637412,-132.0246888247226],[81.40213986800109,-127.80106940517692],[83.80791259636146,-119.30348476449831],[81.65820080190394,-122.41798450966792],[74.63920864738975,-121.1998588621259],[78.86934331581642,-131.95549612030186],[80.87863698062927,-113.60268474676786],[87.65919544776034,-110.10325533494893],[82.13050182018037,-126.3965698413947],[93.52425236855652,-127.45234262543886],[100.63409289731726,-126.46258609676147],[99.57317685927808,-128.3908350154545],[86.49905762270453,-127.17537330371738],[63.95574455863817,-131.8593751509402],[61.78694269868822,-126.68723489153979],[48.55873446960334,-132.66231672250717],[51.889214178422435,-131.18363280940503],[48.40236120393649,-135.02065236655403],[62.63656558053208,-140.27303536423688],[56.236755198943,-142.25415731028215],[61.45716054393506,-134.2146253756349],[64.64198507472895,-132.50976284062506],[62.01891680345318,-130.0806071702915],[79.14962665130156,-116.96495892093412],[88.70971023377297,-118.62375514427913],[76.8843640644211,-134.90894292752648],[71.02586657680445,-119.00517526198917],[61.83890923361196,-130.36699059431953],[67.07351263874784,-37.68936539976835],[31.91162870491098,78.9237877001051],[40.84276902837348,204.45776552052223],[58.06301589671591,308.0008367347174],[57.815730815790516,347.88971676437006],[54.10671103118125,384.8141361628044],[53.08370222657675,402.82518281815584],[38.48062459023174,413.6962970823656],[26.50349358105268,403.1981260629969],[18.684480023631636,396.59395542159643],[25.759800481743355,397.6053040511009],[30.162590058473484,372.44350039465735],[27.302170043488218,352.71233505316604],[53.49448920077134,315.6893916156248],[59.07999582859304,270.87779158623107],[75.08800675596763,214.4644714748522],[94.52286411835496,166.85589495496117],[87.96900475450684,129.53179955050484],[89.07362570951852,123.23700192201204],[103.98379859969634,124.98713085508166],[133.4498995945263,123.99449881499197],[165.91470480166447,151.39129355058083],[207.48459848405423,160.3383972937852],[252.6474247615854,181.70696532295608],[277.4032177588474,177.73833561552794],[294.03150769903516,186.07459390187216],[309.9345088638411,182.37238305244546],[318.88174107066357,185.54868189380522],[329.45629904354416,174.59839529054898],[316.93546180807414,174.34209045335786],[304.59600635119205,166.29961137941962],[311.4267706226814,174.92915122766715],[277.7130267974901,164.49813197237722],[260.2838303927615,164.1009301519789],[221.0009925578903,149.48585054640523],[178.44297637959937,117.34696739674177],[145.70380816831334,102.2679421104474],[92.76365048393518,59.862108204750825],[111.57129907388423,108.83288882715328],[86.40358339030001,94.35935310979391],[74.93536763242946,92.05196844611544],[82.02804635023324,90.33870329300964],[72.75943748693714,114.10166541644503],[64.91547176785639,118.55771580117846],[81.31916587059129,123.72743261608287],[80.36735979551202,128.5069944806254],[80.13532771009511,130.29936722079583],[67.03943537814757,140.04316099889263],[55.230211992492286,118.8608633646993],[50.498731190938656,121.17916318346442],[36.65127901551239,114.69053880417391],[43.13541365773483,115.7914861031087],[49.793343436445184,103.86066344589108],[65.29160813610486,97.56885362809828],[63.543637641471264,69.9795882282441],[62.1545224124593,70.60580523248154],[64.04390610488724,43.80891983407662],[59.63704392308637,45.3434360412042],[68.81956110374324,21.130807219972667],[77.23987434051253,25.146416933236765],[77.6695133534331,21.370562643471658],[79.62962028257027,10.16530107857352],[68.84251917268637,9.731983048442771],[78.975707285255,-21.66863404027424],[87.95398347961839,-51.822327518536554],[112.9406633724667,-90.74017438551618],[118.86887438534245,-126.53232098370813],[127.88855006480833,-136.51220256092142],[85.13783318029061,-152.8595064402864],[124.25562101061598,-139.44538155172063],[108.78451575526958,-133.4684457736755],[125.98422049592375,-105.36697628861839],[116.45285265547227,-77.51264067959096],[96.97623857176075,-47.544623147801985],[93.22119197147595,-34.33584178821866],[16.876164522236877,-2.7097386509284433],[72.11321796893617,25.932772688704745],[89.23547390538101,46.77181686431243],[90.0082833423038,69.5828916382934],[72.25547803631707,98.26173525147817],[102.13784219303955,60.23096998783535],[53.53544149827633,77.43749961254775],[35.64465746378812,36.078973869577226],[-11.161339995826324,13.916068877394537],[-44.53785226894843,-32.977185935863645],[8.97964252719737,-51.812659377720365],[46.26922425819123,-79.45866596101712],[82.08414563918285,-91.93123603678396],[68.43777772989091,-109.78509971023607],[-15.058688630234315,-130.1072713014811],[-33.59060568585892,-132.49617659846308],[0.8294196618043088,-118.41366540834088],[-20.171557558138886,-111.99685811020254],[-15.600105789069062,-88.57124696819005],[-11.775513385201748,-61.432498744771806],[-0.7042606378386722,-8.40063452693073],[8.062800436780492,28.696252486012895],[23.555923907123486,54.38866061609815],[30.81020389404324,80.36132741756637],[47.18186562964604,117.37630328608816],[53.87894216611903,110.42526812520566],[74.39002202882398,121.0157973651203],[73.31412126614521,155.92853241948194],[86.3339670184381,199.41717545644485],[99.1920163879297,249.85289894213565],[105.54912604925687,300.01449303785125],[131.06948161169532,334.8062030925089],[151.0024758112046,354.84290648714307],[161.54577297689457,348.10956707725313],[163.60470545107432,348.0136316530338],[156.73641287489465,330.01430589028655],[138.83104876320203,310.8937306513319],[114.97127701480395,253.76496734812247],[111.03518232737736,200.8412393663284],[206.04016639976066,76.07057599242535],[76.38676524117932,98.21693128357947],[71.5663489560203,77.1581613333343],[58.202257314948156,93.14994012841953],[23.803266232212422,118.96369948263487],[-23.350908341531863,149.8803893277667],[-55.33608788115214,190.88977408140158],[-109.64336034691553,259.8760705370554],[-150.02684203894182,287.84259780895286],[-171.11698913837256,285.5086404958487],[-192.16771381174317,287.9591846257613],[-205.40351527497234,281.0336663820128],[-204.3742762616979,276.9981237760454],[-199.6908385907144,285.6026874365664],[-171.74234512185484,263.3825163016552],[-139.77608369976474,244.915961485229],[-114.77139471233141,219.07951297586328],[-63.23740471499116,142.68576087031943],[-44.364803608394936,124.23776337058962],[41.88289409151787,20.97815501483501],[33.358928641115995,23.69871285858312],[51.02296958264287,6.2494015767731526],[51.964812904530845,6.890635273604744],[43.81882212291862,14.49900841241083],[42.76213508598312,36.70431454781624],[55.01441720368439,56.16426650517781],[41.99899471853678,70.5606132715867],[18.70463801697906,64.75849211893524],[4.785598225371018,43.93787270996086],[0.500150292362946,19.8550451680984],[3.3485219511254627,50.75730061156173],[11.860555009577183,46.98419232205492],[13.54747995473167,12.337851528180067],[29.975654038166795,0.9273328232659424],[31.009265621894883,27.293571955799848],[29.483532901435183,8.00535144545995],[11.38388445037151,23.554803301754532],[8.045542245360707,-10.687514518504372],[11.008343708992925,-36.73277904032477],[14.196441285601736,-55.12920510209324],[18.65150286735343,-29.11725858129762],[18.183287350358,-41.28423469416134],[32.3824881461004,-35.25149128872113],[44.90313985681178,-15.574120764997133],[66.70760702505618,29.618847892063627],[86.88214664980103,51.980216417288375],[103.06329501044218,71.30636304855159],[151.5319142285682,94.10923845313437],[201.07933566739393,103.61443583103073],[237.3711429413031,123.70102921612465],[216.7986761931105,129.42841909342837],[229.85396833014687,130.48498160121449],[187.6809849094824,118.00617163566335],[124.85976180345153,99.51802341514622],[109.03252907205723,111.03166324220604],[81.30198803423599,99.9246075724185],[34.32810858835069,89.72697655691059],[46.92488773645226,59.43498265474557],[37.85699805124375,36.948007942687354],[7.1984800844438155,53.9742926795783],[-31.374723088243456,66.73717096105952],[-62.945392893382405,51.79275279587682],[-119.63820737879513,61.30212232722897],[-203.8237486338066,75.1266144871912],[-227.26258302815177,71.69895213349264],[-262.0789953510143,81.54663177874],[-152.1747336982076,94.50808005400279],[-222.2046521522342,66.10769296270007],[-203.53717137554872,67.22790004632134],[-196.37047849697439,77.49013047962728],[-136.40581849711208,77.1386221072164],[-54.243029223949065,69.47967641265257],[16.460709445056068,58.61426157248172],[20.497251854418437,75.35225433469668],[29.43107486346662,61.15968925029051],[41.24363754866124,-6.963821207826413],[87.62641869945105,-60.85087598173436],[96.66078696133559,-71.61826039188736],[115.47844944003396,-125.84624919180828],[110.26208691874842,-123.95213763198944],[89.35996788126852,-125.64651051716078],[75.16009778588875,-94.4169852422441],[54.59460737904368,-45.916945509895754],[50.27763298149705,-1.3116645329960193],[30.098178901591325,20.34270691198776],[23.493194559876997,27.64981298127509],[-0.6771903969759023,15.579682465569249],[-13.436638373710252,-23.918166960924964],[-26.02191471073064,-94.62845802410698],[2.3957275184547484,-120.63515682500088],[-10.461072937032952,-118.66828321758135],[-26.775832416396952,-115.92751709404297],[-22.961848478179434,-107.36639804572246],[-32.01196336699178,-85.15633188441882],[-1.384352068828207,-60.498440394032286],[4.475664018710972,-35.06518751179749],[55.22520186342763,-9.261302898152849],[11.917069180347994,37.13533293403259],[44.94992608341795,21.89136026948404],[38.86666361687412,-4.852661725444932],[59.914006935644124,-41.39206383872863],[77.29662510625246,-96.12321283311746],[79.96416512865096,-98.51973698942447],[69.59044811519414,-101.66373893268792],[45.31345659867918,-84.90318958920113],[31.95802732492575,-57.29969478757425],[40.51401298779706,-17.116274330569013],[13.829707549735076,7.890896704862712],[14.974932709277255,16.871475444401426],[28.783175575938742,1.3706641473404488],[10.884528917274451,1.4715962782357792],[2.37939375394717,-20.218447294158295],[-8.223181833484432,-51.7998998793546],[-4.869956018222069,-78.74447489725594],[34.71258380252732,-77.61331676136444],[29.93285302730169,-85.31960651786892],[23.604430530184572,-82.69248904503365],[6.215980522039445,-79.20518773109745],[-3.0471568247680807,-50.19681574341075],[33.01413385606577,-25.614058420028755],[24.391528039792775,-5.781681880939459],[39.215316687070185,7.954318555772147],[31.242287502434692,9.730792392685089],[28.072057663529563,11.501975997914656],[18.480096349355335,14.024395331465826],[23.879264199041813,-23.401928826702147],[-3.1150467079789905,-83.1331754952688],[27.164896818881004,-101.32916735400863],[33.933143576443115,-96.6273308462869],[4.617469283879757,-88.67189292993521],[-2.8516762254026844,-52.30023628850711],[6.9348946876958735,-28.78191747697406],[23.27420110388067,-7.431604952396356],[28.780480120073207,6.944725385194829],[36.386079639144725,4.80320744534697],[26.993834302850587,-3.9745660884620975],[43.67875841920983,-14.623156171757387],[53.75176350063248,-53.34007905326553],[51.34830193084747,-105.43511295723965],[63.947396661170046,-97.03378113609097],[64.68586370245617,-111.51656784111401],[53.24162738629741,-104.48805857385469],[40.60959504055927,-99.01119623632337],[41.60344714105656,-75.09718380640174],[45.90940716558657,-50.34391191404484],[58.154249316304345,-12.696376344020337],[38.815223116970515,-3.280273298079237],[29.156886777893305,-5.579779285922655],[48.429278407745414,-15.087099072863452],[13.129897286068513,-25.51705648692132],[20.41466838549883,-65.86206577003338],[65.94937600089793,-103.84154480871894],[19.94615707360373,-129.88531000878515],[17.170963400937126,-134.4204724868165],[0.40116029802317144,-133.03934925033138],[4.779743526572872,-127.01570889221739],[7.28761634075471,-110.71939869945231],[15.190450122017069,-83.74628126949483],[8.011588418987117,-39.995819495627984],[11.421029308384846,-13.395531554803483],[20.661357119253523,-11.811921280408455],[20.906088222948256,9.093939460973957],[82.44783719793361,20.4070505132197],[162.80340920256708,28.8133237779316],[245.58294439517226,41.14944888903062],[293.38820422675207,67.68167320316309],[300.47422490568556,76.78879320580586],[292.61102291530574,67.2169763153446],[285.35040551269253,58.58862800772704],[255.16499903749695,36.170949266367984],[208.2105143836866,25.9391895980134],[147.40587146213943,10.92455250392186],[103.38334413108294,-25.23746645468634],[40.97395367332615,22.488089410622138],[20.534183100307132,54.88719034619817],[4.808901024130705,106.03526908581966],[23.269127303326172,161.77725712204938],[29.195710674571046,258.964135660333],[49.372734308145255,310.6842315943029],[59.231866305041194,335.79777303935435],[49.88160959007439,337.84830328736695],[51.13184725817064,316.08414450977307],[34.77181768356229,283.3429895347633],[29.60269130299025,204.47711918434436],[39.94105715806734,132.63350676814935],[53.10773613697825,82.52542337177374],[16.92005309857052,74.80674033293258],[28.911527707000005,63.03554009543416],[56.72658849856407,62.75871691860095],[164.39836860473076,66.50368296749298],[217.66887405984505,83.28023485975427],[264.2005258201964,101.85765076383734],[287.5443885126174,108.56239729252172],[283.9110381664692,97.29801501523241],[279.9558590548994,65.07894267257939],[254.09437098062324,21.32434504656203],[181.64916505271447,-31.07935061163232],[86.76717023541505,-52.86259587663233],[58.28433732853068,-34.71439719949399],[67.91847299178505,-23.247758979054993],[20.931327592774892,-18.85506011594032],[55.95786711373205,-41.36071461785559],[23.098592385314078,-51.96574811240521],[53.74004455375132,-80.99130746465471],[93.0422397550235,-118.4967014391658],[144.47637732194983,-127.95679648650139],[179.685763621403,-116.67104468761295],[171.99708303815225,-122.50139701407022]],[[-93.23522205838276,-152.57307369257353],[-101.29236991263065,-150.03130222233722],[-103.73320994339798,-154.1854374812449],[-103.40571894540545,-148.26402125006916],[-102.6857376324565,-147.49312205057754],[-104.85030044912145,-147.55609786526873],[-100.69530982403671,-149.27516615410934],[-94.56734005415171,-147.3816311876286],[-90.91332195447308,-149.387458155275],[-84.09989007348253,-152.2316225365213],[-88.01814400819205,-157.16295970080046],[-88.3007202939948,-156.16577365305443],[-90.13142013149036,-156.93532799615627],[-94.3595541349406,-154.72071309482112],[-97.8270688475489,-156.1290916934936],[-96.18828705269357,-161.2877807594557],[-91.00017712648486,-161.8427611172517],[-97.13225505034649,-150.27402503947883],[-103.65069078420379,-168.99821566961077],[-111.99273952360915,-155.21661247890597],[-115.98130751572393,-162.10894987307063],[-116.38048620956931,-155.55508941447454],[-117.08125163159087,-152.1315708612933],[-117.60499823776848,-160.5332228312991],[-112.22766824018714,-162.48900803084712],[-108.36344495208294,-156.75100473405746],[-118.55981342455289,-159.33937244916126],[-118.83573355770659,-156.09868196874402],[-121.39559294226001,-160.92724831497924],[-111.09046247181351,-166.32735290637243],[-103.48793381199721,-161.97401657503337],[-96.69570591075728,-161.1812311613529],[-98.28932085208157,-158.45646556474037],[-94.8145819861578,-153.54891665322998],[-98.16139546587124,-54.619975929864495],[-53.39380749814859,95.29685767213323],[-92.92380322482018,209.03007509653014],[-106.20171114754726,289.2507769056514],[-110.36774851620498,337.8263477818725],[-100.48709474304087,384.8080526374088],[-97.55407143461838,402.2527457152345],[-89.0255729657008,406.66913921143924],[-74.9621516647536,415.74053967706743],[-73.90327273186068,409.2578089365983],[-87.81728373428786,410.2011662033659],[-107.75204152305224,383.66004402986607],[-110.24941375767946,350.1095818518388],[-119.84887007778633,313.84194257671356],[-134.99742734646372,265.28987483802564],[-127.62301288136831,210.34344045838702],[-138.2887465102217,149.71586688536286],[-132.58766501094874,104.23175676802077],[-136.8572616479844,88.16917595120174],[-160.81906875214077,92.73076521439816],[-188.29754731639395,115.83004840628098],[-225.05751225774765,125.41321916323136],[-268.3445858779828,136.22497254930363],[-297.79784978034115,145.99785498013057],[-322.756622838871,129.23898042263056],[-353.1203813087668,142.36827761487268],[-357.48286722327,127.9245827701128],[-365.1747666975989,120.50014598718383],[-367.8554045344089,106.51510052116942],[-374.09226839375737,116.33068096158252],[-369.63687630227616,117.24215667856947],[-355.0280634036611,112.66993091587244],[-346.90833083230143,106.54683345125432],[-316.6523043439915,112.46984991743],[-272.27689908348543,97.61548062957036],[-229.24886641666768,104.83305970837137],[-208.27427347905922,96.6056038561727],[-211.94538029473313,99.0548445863044],[-158.06035902767138,70.96033438372433],[-136.62309461631492,54.82936765873194],[-119.30330853527892,59.40794602253288],[-113.86196006014313,70.98202076917505],[-125.21360491025229,75.80731884167017],[-134.0713992582513,88.84031875150004],[-133.0083258136213,111.50735755213145],[-129.47601482097156,123.07307806879226],[-123.72020728819092,119.59338484379077],[-101.76461030842796,136.1290945574226],[-74.17083095595058,113.93749982194856],[-69.75826052506608,121.02034559158835],[-81.7820935098323,116.39378654447228],[-83.55571697533765,121.7747050195544],[-87.15465442726747,113.03444477491564],[-69.11441419796898,120.92260399929978],[-79.30072662230168,104.77940565685208],[-58.42259221039194,87.03627280734031],[-60.564595661317185,62.978043882100565],[-82.89497916430355,20.441304318892094],[-96.32277416889605,-0.4501204105185934],[-78.20656395055187,24.09747218658083],[-87.20039687812209,6.7097052423566765],[-84.48971660207349,1.0590256910205653],[-55.12304184454774,9.1789872785439],[-35.09407600642112,-26.161414894242398],[8.751099821696016,-51.76303198264566],[-8.61785706456908,-88.66055465280806],[-23.097892388397213,-120.54588557087845],[-16.350490252316945,-145.50266591302216],[-17.42554411590868,-149.99632579721333],[-25.37088202987877,-141.42226883108515],[-14.243846007864818,-133.61017174913604],[-23.65274125173653,-122.53781744144044],[-40.70476562027977,-89.22392984497446],[-65.51813285789706,-51.70759348640104],[-79.67259347286574,-30.6481501132115],[-79.99566936320593,-21.665917135239965],[-88.03926985788229,0.5027433786972324],[-89.22482980463104,24.97116424344813],[-97.46722479643381,40.4798867314513],[-95.45248578704093,57.03760803355681],[-101.33021092726165,58.88403980603903],[-93.0195659256396,46.25894675024006],[-54.7388178360365,43.02667425877826],[-113.47323668810628,-1.0852607002688046],[-124.64531467897973,-48.501621233629066],[-142.51087230939947,-83.97794555073449],[-146.37440738296885,-119.93072572606297],[-166.14633497693723,-145.89714742556862],[-158.9809460117898,-176.79749245073356],[-153.4785474263964,-168.86913553866304],[-162.07813236218766,-173.3718633444878],[-158.92260772736955,-156.27733212035196],[-135.86583081668635,-147.57179541213918],[-131.68292357526633,-106.66632463558108],[-130.82406950876003,-77.78819279045706],[-108.10204833742245,-53.21565457169936],[-91.58888978599737,2.049887086484091],[-67.31134263276891,48.565764214603746],[-69.7416316077838,65.26383513558324],[-67.92652219712681,70.43804746586716],[-65.33672445815046,93.05007472452064],[-79.54154267985894,52.74481749238237],[-64.21235872646452,97.06059649608494],[-56.80703498034745,131.3669795699417],[-3.1806890732784723,241.99310604167],[-15.055768018607068,304.5603264895966],[-13.530592220828908,333.19053894793876],[-13.459704787122746,357.3153855396214],[-2.0802777487779167,359.6433445965612],[-3.0006587195600787,353.4710197156452],[-10.853556964035306,341.14060622929117],[-19.020385977912838,324.9808508086652],[-36.36012362348538,230.7718049406319],[-65.36835024817549,182.27440273763182],[-88.17351074466467,142.6270083741249],[-105.80147493777753,85.79072666089883],[-95.76619009651688,75.34991679267125],[-96.34453184633162,83.69515042520266],[-113.62262866902432,94.22421610247045],[-139.78552732176416,117.4406679525656],[-175.58256763615896,182.20479868497728],[-204.41801013951635,227.02179906616811],[-238.39704792009826,260.00481232413995],[-230.43161719472783,266.2623875410643],[-230.76561293305542,278.86423429905096],[-223.40405892326243,264.4702629401412],[-232.05346424715276,255.88114688298276],[-251.26246525603335,240.5371120225086],[-251.73663421352936,220.091940260495],[-232.3801071914427,215.06246253683378],[-215.6190548738274,188.58995077006057],[-195.9000012014949,109.6968681775054],[-113.94688587247725,109.73313001793883],[-116.50732979806384,48.833145350559676],[-98.55288654071569,24.779487170752077],[-88.8467214503442,15.088329343617715],[-91.64443993538634,14.786008179080227],[-104.88116459907081,24.88854897895203],[-89.74439663983765,29.18073578754081],[-94.85594758153172,7.731713991336619],[-85.73465947709371,-5.242393184424714],[-52.55753021689975,1.809637243554448],[-72.18357428480522,36.50893785765845],[-64.52549743458223,12.93834433157781],[-58.01594917500233,67.09291658974166],[-61.90254971284617,51.33909076707016],[-84.97794506305809,24.336977655065425],[-70.24190002190915,6.1157029075093305],[-73.98669590269822,-9.023504127455226],[-71.85163451686026,4.844757605397149],[-69.12581066785776,5.108456301096112],[-76.83654922124629,-14.590732249834787],[-88.02544448548997,-18.562749005605724],[-79.58781842445842,-19.613954643352713],[-81.17701266130632,-26.501860061596403],[-93.77666046450474,-38.2050125183531],[-89.73451474890919,-26.222738152543116],[-74.61636825535072,-18.206079883110306],[-54.46754399351403,17.93778275204363],[-25.498349338017533,45.69127300044158],[34.529302923956834,81.65824375900218],[117.08538820487001,98.83068515067441],[167.2243987025322,106.08452504893773],[202.89553294761402,126.29528324819057],[-2.130215990994543,116.35100633342688],[57.43976881218276,98.7388100372865],[99.011467758957,111.82182124182975],[74.34788133046254,101.30403281355893],[8.473180878506412,86.6424917357491],[-41.06221275954147,60.96601507565708],[-55.19553777441763,59.31778042355211],[-77.6984350159783,45.736446709946335],[-78.30717698239937,37.109095199394915],[-82.43961483143596,31.086163988374437],[-82.98639285376879,49.83661675107692],[-122.97047381579864,24.90064918138978],[-163.6963875210634,49.58424495963902],[-221.02982618950952,62.67027611363267],[-237.8369550413376,69.59836025222478],[-259.3941103100182,69.30726746562402],[-266.8841921387945,76.42969764804866],[-252.64056128475437,69.37382810872703],[-211.95480375348978,63.81420011301259],[-202.6482717205825,77.32047698761505],[-164.43161024723304,60.881854564291075],[-113.14062789503544,46.58348360793423],[-72.532724876222,59.319740984465284],[-50.41986423623621,75.22907171899578],[-65.79587002989922,39.75808499148866],[-40.59778678783624,-12.646760597141451],[-46.07143388599661,-73.48841873152458],[-62.07820509458281,-86.05946140746244],[-16.372734928736236,-140.51870451483205],[-0.7835202244401671,-150.7625421013886],[-18.45395501801329,-138.52402150195576],[-39.53150763404233,-94.76193457639101],[-49.97106434445567,-46.25103504942035],[-57.200314903344065,-17.072196219301304],[-57.48871409533041,22.368607638771323],[-60.747163021894494,40.183786531426676],[-62.80041981550232,23.17073726476906],[-85.1484724193661,-21.36528313075644],[-103.14773907316601,-106.3562755022532],[-118.62646882439373,-146.41127545239306],[-122.40648043979957,-147.19532264629493],[-115.8596843566105,-131.10602999113803],[-101.62658013635121,-118.38178569764591],[-94.86851669786546,-83.99798153924269],[-80.54191019042679,-62.70416195729206],[-76.6081711555936,-32.958406691940354],[-69.97410789069812,1.2451667023326536],[-59.196321905493505,19.05843214717936],[-57.79370181089172,11.235218083397058],[-38.332244427865135,-8.439763279809881],[-29.52296256569815,-47.18818797552399],[-21.39666412856019,-115.9883905023571],[-41.34976542766839,-113.92220488861597],[-13.708890004405418,-113.47641466064078],[-20.278813250558017,-86.07679621566717],[-31.32767578429224,-56.55443634803294],[-60.08532674517363,-22.642583803346383],[-58.57838479324437,10.486083759641701],[-58.51499844416526,18.00117606274341],[-54.95475661178489,18.66937571691176],[-58.30286829346505,9.621390645549013],[-66.28722728373725,-13.579564375308678],[-78.70235849592001,-49.12278641494322],[-91.35406075792088,-76.8319448554364],[-97.44643670055689,-90.89807167267202],[-84.85969005804179,-91.18713315372588],[-74.69663884213264,-90.54510498808816],[-65.55694841100808,-78.83750890817112],[-61.54943137515926,-53.8983602203092],[-57.73871950857654,-23.5483029784034],[-53.03815168321182,-14.296496730892727],[-62.227212889630266,-5.14156805734126],[-41.26492947300892,8.863392824143261],[-42.314391887615216,7.389198261200249],[-40.1534506070098,5.214733710841983],[-47.549558407358234,-27.48003994953308],[-63.06015044546291,-86.10611092206011],[-87.62039644428916,-109.66451370532218],[-78.2576586462664,-107.34789206945902],[-74.76544709285548,-93.05338905148074],[-63.41049913133742,-63.721860914551826],[-66.0696612588485,-41.39011270096637],[-56.32480624276013,-10.124358075029932],[-55.95750115239605,-3.3812198883118754],[-52.08889904169848,-5.352941223890639],[-54.09727797929082,-5.50132135985632],[-69.80004340291589,-32.77706049427229],[-66.21391841574098,-75.92127685072342],[-55.10727905408004,-102.73688994366375],[-49.677930954732915,-123.66205261729215],[-57.35057012010543,-122.62778615369575],[-59.09331011683139,-114.63576883037695],[-57.54981649576439,-110.75359651601786],[-44.31164563651981,-76.97419942357521],[-48.38160141070307,-52.48665951693965],[-76.32619237826708,-14.886660268798778],[-79.6526494239319,-6.506778907830267],[-85.56066100362068,-7.414865909708283],[-74.01525834892533,-12.726159029097403],[-73.03397746627189,-32.13876475587347],[-95.23375237291714,-76.79288251973333],[-107.90036733216641,-133.93354675023807],[-103.87878288927288,-150.19060935835296],[-86.86638874681455,-156.28365090823263],[-80.21435378005805,-148.05920295002443],[-86.74384074123805,-127.6064713629637],[-81.35551526762379,-113.23763837938179],[-89.83166927328637,-76.9042522312127],[-88.82893651141171,-44.18586630497816],[-72.20755871446607,-25.48868656096056],[-87.30471551855078,-20.457120149666025],[-77.90210940194805,4.067769087784882],[-164.27161429477889,1.1581149789528808],[-238.9644088962222,-2.476765212024702],[-307.2989800299932,-0.3363534508960129],[-329.3586587018682,14.691671960811163],[-332.6851316252292,23.062242679475958],[-337.0534552041936,15.603571093344726],[-315.0244832807002,7.353369237011293],[-275.7736019342827,-3.353987113023436],[-217.46653778642712,7.826927195597705],[-148.0016742482884,2.9230201799585984],[-80.48166077486218,21.109620052905825],[-50.28571671501106,40.39701980941197],[-48.969079507213564,56.03458908052255],[-51.99073752825893,111.46336157176768],[-81.62012524973363,175.4019677509025],[-95.48944636888416,261.6380385545963],[-96.89534640980861,316.5597413972524],[-87.21028737189874,334.1711609692958],[-86.5831523395596,335.53646448102336],[-85.62198514956344,331.8557255181404],[-95.8929039651058,288.6999112723339],[-103.92893497438081,205.38015795865203],[-92.16530664034349,120.80650456465003],[-79.23453576064378,64.93566137551124],[-64.39807199782132,64.5440168287264],[-76.56060264714893,60.806164210094835],[-117.46605079748866,43.65820669205425],[-190.44413320298491,35.61308087430268],[-291.33587362939005,52.53253848480949],[-320.7518121685989,67.82283548078249],[-322.73397793174917,65.27725691672754],[-314.5992699251154,59.309526083469905],[-310.8220797787458,27.790666323489518],[-282.9993561960233,-17.005831918410536],[-213.1500819857148,-67.9098059879276],[-127.34357883915311,-74.74239304803643],[-59.17203882023654,-32.468594541591415],[-80.34798938230222,-26.956846606216118],[-88.43098561441411,-13.399643488848255],[-98.36086015695537,-26.148658123039468],[-92.84000880360941,-38.71114444982004],[-101.56925598143033,-39.08132700350325],[-120.00695853136887,-52.37840969792137],[-106.3112457314046,-38.962926690492964],[-84.64693924638294,-47.78571416377861],[-91.56193994596856,-50.31269562234388]],[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],[[35.44955625623993,-323.8238322786443],[69.13366422714557,-297.248735089958],[63.80204905838491,-305.1531572199849],[59.08799706540253,-306.6425770669962],[56.98688045289589,-314.588526662674],[47.727345474526146,-310.0888655280777],[47.25575800986837,-315.12200485119536],[43.0688574144076,-319.6221478870351],[38.444493376752234,-314.0704922160537],[36.257943852941025,-318.5401668182127],[31.146425119192713,-324.6566245819163],[31.40753457017047,-322.1692075345004],[40.7252813261473,-324.4146729447673],[46.39952870103434,-325.95850286622317],[37.266634668656934,-329.5125577514393],[52.49909496417047,-327.4312439395562],[58.93846622703825,-323.08377736202715],[62.438805477503934,-325.72794921395734],[67.77355467758173,-320.4884664816882],[72.8840121631502,-312.6422791236373],[77.23502416765109,-321.224459736275],[69.06976864443345,-315.2644514608054],[64.76626070142322,-319.26437463060483],[60.62168127106372,-323.5474452115568],[59.02387574080933,-319.87954431446815],[63.54454345889326,-319.4463650884518],[66.68194378728231,-317.4206110940953],[71.69783478097247,-317.8950760184024],[62.56525618154626,-321.1888560490719],[58.775030190273924,-326.1962078686108],[51.26402628154153,-324.3427908291917],[43.95232529639895,-332.6491169663724],[38.88147101892821,-333.8084306224515],[33.38008240057741,-328.4947341399129],[30.074312214827046,-336.6472550382657],[36.32143819480325,-338.5109306901403],[38.733504493859414,-349.8132472627452],[40.74127146011733,-359.43270117827524],[43.84623711820598,-355.4917402877028],[46.0566246126366,-365.59102372067014],[34.12636935460989,-369.67718753079794],[30.33455962323535,-374.3284747731411],[36.677665024400085,-367.4232312071915],[40.58267971419298,-369.62891317456933],[38.331171231431654,-359.3730411784784],[38.85080641495881,-354.3048450178874],[35.36420677949127,-355.0788904413371],[39.00326072029975,-354.07001778069684],[33.94940229237932,-352.04433838835143],[43.19199377446432,-354.83240150874155],[51.16132408253986,-352.53136915007485],[46.786883484438476,-338.4799069257963],[49.184538450305354,-341.5337206792692],[47.707587107947006,-339.9926383577458],[40.768820062440454,-327.1840885688074],[52.09589828414914,-332.32329977846325],[47.37583914926472,-331.5730617775383],[51.36117872345619,-323.5896101133135],[51.605089996090896,-339.65075228144633],[44.877804940323585,-332.69535245711063],[43.159815521588484,-331.32858814889505],[41.59841365587749,-337.2334957121345],[42.941821123652744,-341.27488866015926],[46.58134461329041,-343.238184808797],[46.675390257917684,-341.01883397814254],[46.761287638779436,-337.69305775732073],[43.1075266928317,-343.78134692462254],[44.2051267212081,-333.338770858775],[42.57841234018724,-332.7538573270431],[47.03522087520628,-334.55050634398356],[37.380590654236585,-329.6112669107588],[7.726739816561917,-323.7506960106],[45.534143897213426,-337.3129290329173],[42.565224814957105,-335.4287961587363],[42.78198230422913,-344.8392258236265],[47.40272414705805,-341.09352327576744],[45.08275768923511,-341.35147825926674],[38.125279403560285,-339.25532454605127],[47.249304619835584,-350.1391233611057],[48.47902649906814,-351.71437000022866],[50.73941720443872,-348.59265825861735],[49.28673842712226,-352.1337657903314],[49.36065043920814,-357.0921500669192],[48.73697472782624,-355.3393506143499],[40.94942584738408,-359.07465960848845],[38.6630292192458,-352.42462628083103],[34.92949349716673,-349.6710195135788],[43.35104166270787,-349.5473515361673],[33.48439219877082,-344.9875025958353],[41.47941308070381,-340.0906992498619],[38.13878467078018,-337.69603643595815],[36.367288869743675,-336.5493899757731],[32.89357083711786,-344.7271105891622],[38.11520787056236,-342.7169317956584],[35.77811778766613,-343.6543559502934],[37.75747770677674,-336.34579760128224],[29.238146468691752,-339.4780317375569],[20.879667386369988,-331.1879804270757],[16.087855810508586,-332.2060608491121],[10.718376395916493,-316.29766701959284],[6.313386647775246,-312.34644528880904],[3.1279832327877557,-317.7393252620366],[10.215666625829726,-315.4451998631869],[11.774319482554915,-318.72728378333],[7.830649249757926,-318.3485031110704],[17.747653100903563,-328.0834345079479],[16.861171308345092,-326.6166205854306],[23.09853426051893,-335.941491741032],[21.82583205993376,-337.08001803800676],[31.944031015666496,-345.7092417364356],[36.23445516108427,-345.1862877433732],[40.19755835743956,-344.9270632393907],[49.30098045600403,-348.27607064914923],[55.61036695879068,-348.7876190231916],[51.57324347124995,-339.87438522337106],[56.36781486464395,-343.81987324770273],[58.01571436185304,-348.64830552297644],[55.96117045852134,-339.4757220238977],[74.80623420921722,-342.1353993290611],[77.08668782143127,-329.06526716616577],[88.12618700180178,-323.94604596517866],[87.56447280424419,-319.1079468261048],[100.27968259697985,-315.3603014754823],[109.59246133261854,-295.7576630096961],[110.63664696939463,-287.3397316014691],[119.23946321082235,-286.50929102164855],[118.18934191642796,-303.2686520747775],[112.13671389489696,-308.35175463202427],[96.83611309974208,-319.5412480996645],[89.79029956344277,-322.9015124972841],[79.84202692912311,-321.6046167767182],[83.64094192353463,-331.3470969108066],[78.98681978164353,-332.9270318793425],[80.98983502787394,-334.4732737131035],[75.25154822180514,-335.92290039934664],[70.45931656686173,-333.19379478625615],[68.89588827928867,-339.43325852847806],[63.49419664330139,-347.6144233336486],[47.858125123188074,-349.91588426784847],[22.944438252114196,-338.3169162328412],[34.45260229442181,-343.3175322554896],[27.66004727825566,-351.5002404728382],[17.488327529398248,-352.63592942907997],[12.020458573109067,-347.94554802506286],[7.3238021508470865,-347.3488961143694],[11.84062785252911,-342.9990113909396],[14.011489103777194,-348.83344178729726],[24.3067203496596,-354.35432825096655],[29.698808351207845,-337.43626426991204],[39.293432354277115,-338.31285897962425],[48.26189414791486,-342.52206873010107],[58.21661944475261,-350.61030931630125],[63.76762507691046,-351.03600954568435],[67.69138980237074,-357.5913153881479],[67.72933041965837,-354.0456875487098],[68.66240767286308,-354.91287078515643],[63.35649414918237,-368.9818117657485],[51.79933766228851,-372.3107043695436],[51.81406814331814,-377.74729245729964],[51.30826680998496,-378.93842995296177],[41.55107217130245,-383.2252472664409],[50.857664533059676,-373.72615501933774],[54.94953300645767,-372.26578073158316],[56.0198934212126,-362.48330933706234],[54.82495095479322,-355.4720802994668],[58.201326753245326,-351.34034987480663],[63.106428203299856,-349.65289523882507],[66.84309229035966,-339.500476463788],[65.11003319768224,-334.88119464751094],[60.5168097556699,-340.3879676237723],[50.23069922844172,-341.0931449300308],[50.105069417079676,-345.2794139389605],[45.92729408034597,-342.25030337603584],[43.67809084292571,-342.3738500158952],[41.09441801864989,-345.60002434190585],[41.98449178501687,-353.3805855976377],[43.08493835570005,-346.68321463228995],[42.81161983882373,-349.8450268870822],[34.46190633082847,-353.4834799293576],[33.609990729767446,-351.5170579100783],[29.966053310431448,-346.2319395715374],[19.103980095751808,-345.3099081962073],[20.733286930898544,-347.5150838228126],[24.772362632824866,-346.4652665742444],[24.242228873634076,-338.5473418182512],[31.7584295662424,-345.45695587339105],[27.759642892927445,-349.1257584400147],[30.22491312192733,-345.3487950438912],[27.213814945774857,-346.29148852316496],[14.99423166711074,-347.4518540346878],[16.25535076964502,-344.93246626814755],[16.754557376410503,-342.4801675248234],[14.722121732319465,-332.63179022640793],[18.713426892192956,-334.3531397984259],[18.53048857725048,-332.30459918070926],[20.95797295426462,-337.4506607725018],[32.91306193156561,-339.4992119651487],[43.77394497317039,-344.86036459872594],[59.547112272014374,-335.8543946457994],[74.00664093377424,-329.10972507283554],[96.59842994415544,-323.8872288952721],[104.12220474132403,-323.5653353020049],[105.57512745542999,-323.83447836788037],[70.98960050300985,-324.1141918003798],[53.498135123640225,-328.264101890985],[45.225117118270305,-333.6519467451102],[58.373899369074934,-330.8090539834684],[63.542732841003954,-322.36248256821796],[83.19619133703526,-328.4174954698037],[102.71717602653905,-329.1690054134813],[106.42034026575936,-315.5944129971997],[112.39580196389329,-312.2348930102488],[113.96984601774182,-310.62364656766044],[103.33741240381016,-316.52991175227874],[95.1380239944225,-308.93540278407863],[80.1461278476437,-313.78736821275857],[81.28506640548028,-329.831054108716],[60.047419763029325,-322.4859984015038],[63.00151384853609,-322.908032029277],[61.9434328270612,-334.07585993745465],[60.6733671495756,-326.62218051931393],[65.98889674022496,-324.1388473851712],[60.14848009393245,-326.4378190216926],[83.25234337066956,-308.5424552995239],[87.41758872439516,-297.4268948254951],[81.54933438798378,-300.9837430174748],[104.00039704761355,-277.1713088582917],[111.82958306823173,-269.281268878535],[111.6423119400227,-275.7802620436596],[96.63557593117497,-282.0010720484414],[82.34249512758981,-282.8419654845061],[73.27686454329341,-284.5719502938482],[65.9323417886539,-283.94607570108656],[68.58057825922856,-282.42244203657833],[80.60737951166124,-277.05612377147713],[74.86561679396573,-264.0813780388378],[89.42017442125547,-259.26772538931573],[92.33007783113044,-248.71079923651268],[80.39850075637742,-252.30088088196908],[71.43869634999021,-255.22716381992586],[62.01407130278358,-253.29030971327938],[48.736115662259294,-257.57657658358835],[46.11073484447695,-256.75001566835726],[39.30542002847528,-259.5752494265498],[34.87691391546423,-253.60214454126321],[30.439985673541855,-252.46360813331853],[34.24009249083201,-255.7229697688233],[38.49025160104827,-242.89650312210722],[34.286743893596054,-241.5220417146586],[39.4919229953191,-231.21423473834602],[46.76963509963525,-231.22239230740115],[60.77231947879841,-220.80071955159303],[61.13190851476202,-221.95188313172162],[61.30739232188637,-223.03704800763512],[47.67576505623117,-215.9800383482443],[42.22668799444108,-219.23336189029862],[37.658700043638476,-222.54588926118242],[36.81477726855201,-219.5792029785706],[39.934586032465006,-212.97388189780554],[45.62473450463051,-207.12113334382752],[43.48447960553165,-206.14915716365465],[38.091151450571715,-206.54117367612002],[36.531335427101226,-205.5316096475907],[33.84238692470694,-208.28284902711403],[26.286467270457024,-209.82024174695778],[20.464009295653568,-210.50262116550198],[24.771088483734275,-217.90028983562013],[27.97655941005155,-210.41695418673908],[24.468439382690008,-210.5115089169302],[26.971171047141524,-212.70047396845223],[29.1911304774203,-213.00123605363342],[35.826057954510475,-215.90540866926017],[42.00176926657082,-211.51707254004805],[50.485006477251204,-209.33604507782388],[63.55758064918393,-204.59715343058554],[70.255157914503,-199.81433627117087],[70.70895452183089,-207.9611800231428],[58.2675188713913,-220.3072003112302],[48.008106940462085,-229.22665748965096],[31.21528651892612,-231.37267359740395],[22.382844856877114,-233.91743572452015],[21.205844804415847,-234.2384253564129],[21.061028062035746,-236.29068318065333],[32.14567830234756,-235.58172679542736],[51.25206113853676,-239.23387617391904],[64.38013672687475,-234.8657939362265],[71.15641457414756,-242.23540686504577],[52.82549943058416,-233.77208535449336],[47.39249180262351,-241.72370355071052],[31.214394476461166,-245.96249162507956],[22.808482495767976,-251.24967324168665],[17.20585922226826,-254.82680934819166],[19.604542053389878,-255.5018685080961],[25.608152714297375,-254.31764468545612],[26.52847016713315,-261.8227672681219],[29.659001677144715,-257.4936309697109],[40.53164087053415,-259.2007665407691],[43.850157058086666,-257.34150860554314],[57.21978618658369,-258.47110838806316],[73.35986632245374,-256.8058709221368],[91.68560760918638,-263.5534400683807],[89.21725741362161,-261.95842062003044],[91.82823588962708,-263.3541639041073],[81.16080301387399,-278.5224712385659],[68.19594477211677,-284.2425660298129],[55.3031966769405,-289.74481469548573],[46.66908789202171,-296.0766084766466],[44.14620442509704,-299.03655310260615],[49.65778130396279,-296.0525880285762],[54.48183605359941,-294.2549708166507],[75.41625079378332,-292.58608458347976],[77.37317221025364,-294.20673598311646],[63.42732437405198,-288.2724831324366],[61.87291552025209,-298.13440248423694],[53.373748427282976,-297.220933606726],[39.76145654952518,-297.9972110936419],[37.53519418204701,-294.7301583358583],[31.253271118411135,-298.66115615135834],[31.977046730764982,-298.64013003179707],[26.35126719716925,-300.1335139926417],[31.65072208212098,-295.73556572557777],[27.386427558261175,-296.9436337967502],[26.86860013224532,-299.4542605443569],[32.174685275219645,-303.6000496877763],[33.42398385713,-308.12867881658747],[38.30211205266926,-307.453466209972],[42.72916833162401,-307.14682010192246],[41.861218412168455,-310.67418305201795],[41.52924767220861,-306.761114910159],[46.4225517632882,-298.63231393616707],[47.390040691940726,-292.16154436865077],[40.12722651129343,-292.9837168670065],[36.13933818783926,-288.0956627047565],[34.96242909492628,-290.2223439696836],[30.85589530610025,-295.1358475323018],[35.397773880232535,-298.8947505309874],[38.82242686734219,-289.8378290357132],[37.90855348938044,-292.35582703645036],[29.81214239247447,-281.46617702018534],[26.09201400596271,-283.8729634677727],[22.89186298788718,-290.7723643326847],[27.40938559183371,-283.49629810765305],[33.69057446316606,-296.72127779002653],[42.02941315639259,-298.2476672147179],[53.123387746784715,-310.509797038691],[39.09248239571673,-324.9711649229704],[41.46695720346975,-322.9044933095207],[44.30444485033445,-335.6707269610108],[45.23617034380277,-336.2316356913675],[47.031622084478954,-338.3184527383112],[46.00748124607833,-342.81397530545007],[49.329210070874296,-340.5534988717561],[44.387576587142235,-366.8495984721635],[59.70184379217187,-368.9226612488126],[63.83700998423171,-392.6295882146758],[66.6868409259348,-396.61012840420256]],[[-52.75682391862517,-324.2615193869159],[-44.59943188541604,-319.22665465768205],[-49.941676875171595,-311.5959479035148],[-51.62157716051985,-314.9509968482623],[-60.887538207651346,-321.21995030055496],[-67.42069954564533,-315.58379737910957],[-70.44895842725361,-320.39968425378936],[-76.66896178126171,-320.694741498222],[-71.67882708494619,-316.4384942425784],[-58.88724841863473,-317.33816998962027],[-58.058233917580196,-322.75575014284505],[-50.70215324514095,-322.9157514966446],[-60.94890001066392,-327.5143825448413],[-66.4615912248903,-331.1288861229666],[-73.60983287175009,-326.93856327455046],[-93.34160361111071,-327.77432081684424],[-79.16996640204098,-326.2204195104214],[-79.4695976729356,-327.1893870201616],[-72.02608087217686,-326.33352690169795],[-60.02731906161375,-323.73530558909806],[-51.58670343025119,-330.47137295772643],[-45.38155999950118,-328.0684880395046],[-43.040412840431145,-331.20312075538504],[-39.52281337984732,-328.1237788908352],[-40.08700039630105,-327.4360376520315],[-40.09858336542237,-326.2082225880347],[-49.01046429322827,-330.8530587904876],[-53.77516523690434,-334.92054484487187],[-63.74435314637941,-332.4530681501959],[-70.96359444909632,-333.0874701460191],[-74.96952270895423,-335.13425847023154],[-84.71797584893511,-334.43935898234383],[-88.71063964422245,-333.51680658517023],[-86.94873843397926,-330.39332169302725],[-84.87620671420234,-333.7213439304787],[-89.64282364958416,-340.4631360856746],[-82.25705725010357,-339.81015569765566],[-79.75462571800688,-348.392877468601],[-79.65043769517831,-347.20717203253923],[-77.60738256874492,-353.2172969030619],[-78.30648718437055,-357.7901898170928],[-79.0775745774439,-367.1128955088184],[-80.66731120523775,-361.0840208708198],[-79.31508280549264,-363.09738180346994],[-75.79226582930602,-348.8761183030672],[-68.68866866783253,-343.41955273794497],[-67.99127096637136,-350.1328756339258],[-67.4896662089667,-348.7702346934766],[-68.72515947775588,-348.93637896566725],[-59.263320451758034,-349.60853279235005],[-60.194303166390284,-352.51435348549785],[-58.022208357585555,-342.664057235206],[-56.023257913834925,-338.73130333781046],[-55.414030429390436,-344.60434749580327],[-61.850202223487656,-328.1600961116932],[-49.822514661387515,-333.2773921084138],[-51.28758358503461,-340.52182513788296],[-51.027079949314896,-332.8243535756203],[-52.62624133211733,-345.1341536864402],[-50.027755004507924,-344.78345832484],[-55.72209680650616,-342.29588976965374],[-58.923918350707936,-346.3790626268635],[-56.49294769978724,-350.53334781847445],[-48.8722935090629,-354.24636694266326],[-51.65524455078764,-351.3818197758417],[-51.06866954185739,-350.3317667716285],[-53.033787286501365,-355.6077174077773],[-55.67207367608819,-342.9861096513623],[-51.48936694932257,-340.75633052938156],[-56.175679660156106,-336.4771620712198],[-65.04469919988787,-333.19099232682106],[-96.70071188284203,-326.42830003795825],[-55.3807270186,-337.935577924977],[-58.26248274155239,-339.3987677436726],[-60.443970501179365,-342.9861780178603],[-54.76019954292627,-338.9624967498305],[-57.00545133772067,-336.63755590722417],[-62.03567542804956,-345.00148588325715],[-58.68380450913634,-347.3010059781768],[-54.687589759647665,-349.5743224746643],[-51.21755947618698,-349.9765010636911],[-52.964089002047785,-348.59748893450796],[-52.22199866762793,-355.0795684845293],[-56.901483260921,-353.92819772213204],[-63.02089943264747,-357.74502442200105],[-66.29984170595304,-355.4916602584881],[-68.36542208179861,-354.50608342308306],[-62.583738068148136,-342.5987175218288],[-74.9123419935678,-338.568251259513],[-71.37386397786906,-331.42002893445306],[-75.73463232932136,-329.80396786432516],[-76.67157531526868,-331.0312349169004],[-77.4585754223175,-334.8788894059286],[-74.07024429058333,-336.46198244381276],[-74.68474819220046,-334.4735130012357],[-75.70840201745659,-329.7100599119825],[-81.68138327900556,-330.69316623700183],[-85.82287364925264,-325.93636030288553],[-86.90382182233168,-326.11172873745306],[-94.40190470205425,-320.27824155031067],[-98.20500034979796,-316.549892219258],[-96.73474799612654,-308.5970402624275],[-100.53216815559335,-319.4664528063065],[-99.55140168735647,-322.1856648551882],[-91.37046654745325,-316.25094582511997],[-91.26777580267037,-320.5991800414579],[-87.83000942230308,-323.93291549904234],[-89.53549049617595,-327.6154899169678],[-82.63822396743274,-330.49431570505294],[-84.11818683701472,-338.15110516909226],[-77.0031282041897,-338.24914069308693],[-68.89517272886167,-343.83874389303287],[-63.4244174748593,-345.7717234161146],[-50.07871413900148,-343.3976344237667],[-51.91074839499356,-342.12088407886813],[-43.481872486455984,-343.95099566352326],[-44.23083854693124,-346.61053393984116],[-37.52540029684678,-340.9523420663155],[-16.10946214410575,-342.28162049639104],[-19.206683848588682,-338.4483461790178],[-5.454531254059702,-338.3034073738959],[-8.452456816717074,-336.5115993957254],[5.924085607493566,-323.49468293614643],[11.849061212572053,-312.74179121174086],[12.773263074021486,-305.70299045292745],[17.822906067832378,-307.8292479727445],[22.78344849175437,-320.86622455006477],[17.026552547343158,-327.99958721825715],[3.2771445138345143,-329.9393068234881],[-1.2207062865432476,-334.57374924354485],[-13.602051995492957,-333.5762202051973],[-11.323544393813052,-341.14881272036905],[-14.447701358667757,-338.00456022796754],[-21.210492675944522,-343.79086931533107],[-24.14552313427089,-346.7717979477293],[-29.265607589035653,-336.7707820325734],[-34.412583542167226,-344.4413259260293],[-41.288667817310284,-352.2183013809281],[-53.548816639603956,-349.5811671774559],[-72.44087847157545,-345.6101913459614],[-69.17671232384419,-340.12944390903476],[-73.11994544935169,-347.8659401989578],[-70.5507567863641,-351.37585748962886],[-70.09741684803157,-345.89733849001254],[-67.19424151309295,-343.92212542217385],[-67.37535409617965,-338.5398764193735],[-62.55277569005557,-347.9715367880042],[-51.830559477279394,-353.0941858777999],[-61.704239043178404,-336.57801027336313],[-75.63505736880916,-338.4677807420403],[-77.25208843503708,-344.34847897565135],[-74.24543255033575,-350.5679957769223],[-71.12547980894891,-358.71201300224914],[-58.85375493078931,-362.0995650377549],[-51.1604817404226,-356.30510490220854],[-43.56214215835382,-356.874301470712],[-40.51263113340934,-373.9772155240046],[-42.274497126747974,-377.67397594633326],[-24.386593591116934,-383.586623656915],[-26.21727966234147,-382.83345099591725],[-33.31647017539575,-382.91195489671213],[-28.76399240744746,-375.9383204086055],[-29.9604991726427,-379.21771346022183],[-30.463733105793892,-366.93268335271387],[-28.89405258554973,-364.75795874465894],[-41.89462103321546,-363.84167875200956],[-43.2029151103884,-362.80451605478265],[-57.95081143776508,-358.5196467030495],[-61.00367256597082,-345.0461651211158],[-68.08720441227206,-347.0322901925374],[-69.03487917950451,-347.56266419370695],[-78.20087944824013,-347.170615455424],[-80.5227801558159,-349.99652408320435],[-82.1501310419535,-350.6200430280312],[-80.96528045504851,-348.5842808354704],[-81.63687334063275,-356.68874407877115],[-86.72341501293681,-347.61008835427197],[-84.23223247615203,-350.35213362666514],[-83.37338759591171,-347.8169719838379],[-73.75573707137528,-345.6772694410687],[-73.76917287218987,-339.5425569240231],[-69.15645172897678,-346.0101039541714],[-70.50126653543384,-343.9339527491811],[-71.58912157748989,-341.42656688723855],[-67.120785457171,-340.98346726552745],[-64.50589391651908,-345.7569398800724],[-68.86901334952245,-344.25494343444655],[-62.77731420739019,-343.6622863553637],[-71.91816266524484,-341.5080042061396],[-70.347358687157,-337.34042216083503],[-72.70080839420507,-338.46512015396377],[-81.34047072177736,-342.9723227466077],[-88.181089230662,-333.57463483764195],[-89.78998432215201,-334.49197537894656],[-110.49147020192038,-332.0111076320944],[-119.58302298371632,-330.7550259617567],[-118.91876044498719,-331.7981880622277],[-111.36182262925496,-330.42897460150243],[-98.10991229100188,-330.3244644637823],[-90.84935272431886,-329.0952223939514],[-67.94715725761608,-333.08934120006165],[-57.10953130149585,-334.1443157696907],[-41.33401013755321,-341.9167780120699],[-48.487677505932254,-336.88864801049976],[-44.50098802809907,-338.41384670857576],[-53.36198725945138,-339.26492934332043],[-49.76865749828971,-335.7611532027804],[-44.39324900916574,-329.29966657924933],[-39.67117800848803,-340.6540417215924],[-36.1757738938968,-341.38235338739946],[-45.800184286486115,-335.6570800416348],[-60.93735680932383,-333.7884881917795],[-69.52009380385402,-329.67404121390814],[-75.53535596104086,-317.74521737122734],[-76.79308491927759,-310.2463543374056],[-74.60245268844892,-316.55611088035107],[-62.12703920164165,-321.0246159795995],[-56.53744067602588,-325.8457270017341],[-46.936154107825814,-328.1692203362046],[-52.101848364966486,-341.2993078007871],[-69.72379427296289,-325.448846037522],[-86.77385927824582,-317.674199320591],[-103.82370226643081,-314.1899760734127],[-112.57723390086954,-300.0499327358666],[-104.5027267583946,-301.975074976358],[-108.32596812710301,-300.97661699607215],[-74.4297572158685,-298.1576570792172],[-63.285677585899066,-294.70201435880676],[-53.54415390774062,-298.0658899322782],[-37.63359782957616,-300.46200254789244],[-35.71729833414366,-300.5058718841724],[-35.22140442766664,-305.6004459872927],[-36.56110236212237,-303.85419700975694],[-28.773863887287064,-301.2410373933883],[-26.69491350812683,-301.039553318245],[-34.371232211675704,-287.958863976816],[-39.27934339159896,-274.8976967835199],[-47.29086873203221,-271.8191029528127],[-60.83633122484787,-260.28243835848616],[-65.0741554130446,-257.3405743769847],[-65.4828020348034,-249.76044217263416],[-68.90220999456773,-248.1181133124685],[-53.590043615858406,-258.0950225401964],[-42.975302738390894,-261.77992541006165],[-37.788421778122824,-256.35302835111156],[-42.42720131575629,-253.76520791780968],[-50.609442093163864,-254.20393016596222],[-56.00388212877351,-241.7342534985902],[-63.90641934017157,-232.36718437844092],[-67.58133574714992,-227.87270288581476],[-59.57260189317054,-228.20608578264705],[-45.34554494691099,-229.76260002712218],[-38.53328087023931,-230.27816583135927],[-33.15168270142635,-233.91747152778294],[-34.146588588984514,-225.64242664162316],[-34.04131088660364,-226.83692472351333],[-34.73517243027288,-226.76432960393538],[-35.96817900543124,-226.12392182603128],[-40.2264589301538,-224.96572580268912],[-47.03401948816804,-224.29649978404427],[-56.198911411680456,-219.33936086479605],[-59.87115259792995,-212.1305280593417],[-61.0852441928169,-209.33180677286407],[-60.03329302332389,-205.34803784117776],[-62.79736454534424,-209.643247605194],[-55.08956794922926,-205.5844778502037],[-45.08602081290019,-215.53595402837948],[-37.71430457965005,-209.49084145103825],[-32.57863457516078,-209.64311956494896],[-38.199889780431135,-213.44972020435046],[-46.45874513253,-215.08815210173566],[-49.38680101033867,-216.85121363519806],[-66.5593878128679,-213.44724655190794],[-71.6616459185098,-209.84070936390935],[-78.4562789795396,-218.34444498658593],[-65.35290805590148,-217.6342708304154],[-50.43230601201884,-223.68956935848428],[-38.81528804264707,-226.91545523202444],[-28.930451678272448,-234.853808745768],[-34.31992643058038,-235.38675994592222],[-33.20934292297221,-237.57367180183178],[-34.049073521081255,-237.51790776501218],[-34.61033773806378,-238.12750291234238],[-36.10947333151586,-236.0456622013985],[-39.45259805916038,-237.7354722859343],[-49.98950972159952,-236.50684984339932],[-67.91757682702598,-229.80579216130866],[-71.9910136498599,-229.55807752783835],[-71.02398093694097,-241.00424159436352],[-69.84849869080921,-246.67835221503924],[-64.65602856403132,-253.88137165014814],[-53.75119291386875,-257.3520932625521],[-43.34663051161664,-258.2366086620982],[-36.40873881509572,-253.96073091079597],[-40.29129519057858,-259.9743386796831],[-47.61804949028675,-263.53434189461086],[-58.07258977509855,-261.41837894067385],[-69.14631837677797,-262.5005479945762],[-81.5318704770126,-267.4387591605864],[-72.42661143306339,-279.029456569815],[-46.927319897140535,-283.33905711247326],[-33.36764312456029,-296.3462909410039],[-28.78346152120315,-295.27377977139054],[-20.050179661083575,-295.412545729625],[-17.248969349573372,-294.9034560419516],[-19.385933784818064,-300.2117169973376],[-21.710979341969278,-300.5435717113629],[-29.370505440554496,-301.56518946142296],[-34.5265416857377,-302.7107846237019],[-40.349677547649264,-299.4561761887553],[-48.53481500197,-300.9974453268344],[-53.8453356742462,-303.1841539722234],[-71.01917570422984,-294.09287390717543],[-79.6736243039415,-299.41607528754344],[-79.9126784966727,-295.69468481418835],[-88.38525461525984,-297.61636277574075],[-83.91021590100854,-298.3953157133524],[-78.120635663945,-299.69150521719723],[-74.35072177108754,-298.03144696669847],[-70.90692198986147,-296.2842744086439],[-70.56703764582028,-292.3726695829141],[-78.00629811302764,-293.29723011185934],[-83.62539911417821,-294.33209521868275],[-76.16799038862149,-294.36855291437644],[-75.54767348254569,-301.0141194372544],[-64.56136701847083,-303.6856783687083],[-51.48186560467707,-302.59342655222804],[-39.621846307960595,-303.7464837259315],[-46.96961885146476,-302.9721475954759],[-37.913570549611336,-298.38906302800115],[-34.73194762871941,-290.36531398254874],[-38.39753457183565,-298.3297631899902],[-40.021417927308505,-292.90271300373684],[-36.17991428687071,-291.9847187540595],[-37.287299539604646,-297.81266288500024],[-38.23423176848769,-297.67310039197685],[-36.55059852281698,-292.70376992248976],[-33.618366583950376,-296.4305017014992],[-39.053091004453336,-291.7119194895183],[-38.17420159725367,-292.9543295905655],[-37.02179534639515,-296.3569346244076],[-34.44203666281442,-288.2691519469563],[-30.90607781122219,-293.0513954343569],[-28.74275753169718,-294.19428516953235],[-24.604029201673256,-299.8525281159532],[-41.57143245836096,-311.35806231140384],[-51.11834753050283,-312.89918545389503],[-53.93166073544029,-325.38582738136415],[-50.984523977158574,-332.35575497195464],[-46.71987823750976,-339.35414189289804],[-54.24552682074278,-351.7271446001279],[-54.87388423147081,-357.1262433614736],[-55.602423166789436,-383.9704149939016],[-42.708751476538566,-396.1774364383141],[-44.72197849315984,-414.8817163215758],[-43.69412129403804,-419.9542512859356]],[[13.58868562008081,-499.6529303426331],[89.15630443449675,-452.53477686310384],[90.19262242010245,-503.08911646033243],[87.29460979514931,-502.904407826192],[77.78306539530968,-520.8018235992242],[66.04318467515031,-488.737902845609],[48.86758982741742,-510.0382626851243],[38.51901758238023,-494.5597056838759],[23.50830168069399,-494.1663445788686],[21.92739882821479,-504.6488958628862],[12.808991458909304,-484.4029220778548],[21.817473961556516,-486.53905173132625],[22.856039592586285,-507.0255730191586],[28.810661789181495,-503.92829199041034],[26.423903154965046,-515.9451491254401],[48.02468877240824,-509.92958476164813],[64.80176815884113,-507.0865176362904],[75.51913717222101,-502.65916193006524],[94.0676741773915,-502.8275786184977],[107.7534966435905,-482.30337157274425],[111.11686715538019,-513.5588318207878],[104.28408012465843,-509.331435155702],[96.6292264474398,-509.4884168212859],[84.8228849042498,-502.3363935168916],[87.78459523881929,-499.45717455148906],[93.49079763089003,-493.2447549456433],[100.3542909763338,-492.3818710056072],[101.99546141006556,-496.45242578457317],[89.33154118613652,-495.5058738364452],[72.60219098972743,-520.7662996688202],[61.16052514597345,-503.68366430505785],[41.202536165518154,-503.2881916746252],[29.166069035741998,-522.5124870573544],[29.36969726564746,-504.15892584967105],[18.77185961112025,-514.6780920599797],[16.12302614991654,-515.8818013868541],[19.98828658605339,-526.7704060545351],[18.83415435142956,-533.3390842198419],[17.340793394707134,-530.8277597324192],[18.621209905406886,-547.3125756179772],[19.147843050189408,-537.6501911139851],[16.171955273362755,-553.0136611941007],[26.157514980994165,-534.3536073608045],[30.666368050903202,-537.9569598144483],[25.935272054013467,-540.7738195387419],[26.974411192141588,-523.4759577075242],[25.16717835153247,-533.6068335553889],[32.554377396135465,-530.2054871596833],[27.777475762772383,-526.0769963660744],[39.60017116714994,-534.6624205003621],[46.01425502675738,-533.6843373083179],[51.039344815049844,-533.8639319580934],[50.8372163649849,-534.5327398450877],[49.70870567216048,-545.4296984988514],[45.345306697241995,-509.05856245446796],[56.312180844702084,-525.4451042137953],[61.49992664727813,-510.82012172167344],[65.64540555418307,-502.1186310634505],[56.82343104644326,-544.7563537167559],[60.10545014674608,-507.0697650411928],[62.927186545532436,-502.39917019704694],[59.08016142246436,-508.85288115423464],[56.814115685871116,-523.8454559300247],[61.52435310117312,-510.70422967998695],[59.66818445571084,-518.4646181622618],[62.08244848772961,-508.64249434387875],[55.56812399188402,-519.8169787286145],[60.410622646387424,-503.0066170535374],[55.5265490417039,-521.0791798819707],[56.876258758663084,-528.4564403297253],[50.11419335858193,-518.2521865591702],[17.74699327679366,-528.5228671706332],[51.86741371720632,-522.0070929203832],[47.484477830921264,-528.3003516134129],[43.94171591085728,-540.8268168966201],[46.38260348163385,-543.1923928097985],[46.8448078287621,-548.7099312330738],[48.69850574317991,-539.7306213661718],[43.51169444333948,-549.3899551892691],[46.92988669982685,-535.275709163567],[48.06272112478132,-536.1463855986674],[46.70905532032384,-533.1585939284607],[50.06791342647375,-550.5235666929229],[50.038828810462064,-537.8906063475184],[43.21585411002718,-526.1512069544867],[39.58728982942591,-522.9683584723841],[37.83334166990653,-536.0683934053889],[38.37743712329075,-527.8527916326404],[20.840730632270947,-530.8866639099507],[22.103363620273967,-527.0174540449207],[19.72879990373349,-523.1230219083004],[13.4089100978847,-528.6034557628801],[10.771373450586907,-521.2714331785206],[7.0011669694467855,-543.1233957375496],[10.12701900672812,-534.7485414220848],[9.57497712421366,-524.4899308645398],[3.624218408973661,-528.8267411358427],[0.10061001155804661,-519.8965800481683],[5.228858426953934,-528.3035085579842],[-2.4036888465475386,-508.9796836549351],[-8.282939651560696,-520.7859657101333],[-8.069381537609843,-508.3784145478726],[-10.083849958107976,-500.82460394156374],[-7.600113188840737,-504.4012946627163],[-6.959863269980133,-496.74205936669546],[-5.866052399450382,-494.59016838364414],[1.6708003992192744,-506.8627130239229],[-4.763768867743011,-514.6570260029459],[5.630757569855632,-520.210358895587],[9.691065939330656,-524.0453824418605],[19.520034667524897,-514.5721950233183],[21.40033214701009,-527.6823734769746],[33.291147518872776,-534.0702854272015],[44.87622019070625,-523.7215022707412],[53.71313786152916,-523.9975979284013],[59.37678364226906,-529.5549044419955],[64.52364993157221,-528.2239993859589],[68.74165095046067,-512.843687293575],[90.515531229119,-527.6615620767386],[90.29794899074341,-514.4912173023758],[109.09850643699133,-510.44696788722536],[103.74747823239187,-494.85881827130834],[120.73707934031569,-497.0993670204406],[131.04844857548676,-487.6809358012473],[143.9105788887174,-491.0636826362602],[149.25032832909426,-475.4648835751859],[152.87700570785438,-511.6743421807978],[145.46524272208,-492.52459746417935],[123.99922704516734,-501.39220598981933],[119.32173055794067,-497.38485778286395],[110.94447060094308,-500.2350162343329],[106.71343747284135,-498.85880552654135],[102.3988267463265,-519.9803733081343],[97.7170743296897,-516.2780937927098],[87.37252921657011,-531.5789593917173],[76.48818415917276,-540.989192073931],[71.82044297236712,-554.9079704494857],[59.403446648615386,-565.7419905701961],[44.052182020157375,-560.7604730641422],[26.58752665670295,-518.5195682353266],[22.041232237206373,-541.694504176472],[10.74526022286068,-527.1378214708564],[7.4891716065166065,-522.6190044543267],[-0.017823694868980056,-514.7513746424409],[-4.049307736201058,-516.4639180597221],[-12.686362020151819,-518.3548156931231],[-5.054968273459963,-517.9726578142531],[6.967479839874045,-522.2209226574046],[9.110874264911445,-511.0580056950116],[8.70074783454595,-526.1446953307163],[26.43762891130848,-514.4574378715205],[44.128722594114606,-525.2300426002628],[57.56719553947903,-531.7649716710315],[75.54680963187548,-533.5166422046459],[90.7890770108869,-545.9597612045736],[97.05726859651418,-519.6815213697553],[107.33287599138748,-558.6056992460847],[106.32798697155317,-593.8831647308759],[127.72779079437197,-598.5843124294599],[125.56149619105145,-606.9145026655472],[130.05905982099915,-597.6645058844585],[135.40032007603116,-583.4031362059945],[125.66120694507396,-591.4861537871052],[123.65047530795482,-572.5438752321836],[119.3504415112414,-544.2713645978163],[115.67979910838085,-534.713134480794],[110.7598857209639,-530.914987980633],[96.88523328612064,-520.4920258086623],[82.57860126336698,-518.9088614422637],[71.72662902682043,-537.0972147463694],[64.15840759561127,-526.4015444211991],[50.94024691676236,-524.6291080781848],[42.17631287308393,-531.7711978184902],[35.67674499387874,-526.0456737513866],[33.34384334572519,-531.0204037570826],[30.687067831470472,-547.7649316986642],[22.32891056443509,-532.5557170243897],[23.90967434985157,-547.5633945065692],[15.12662747034301,-533.6222086094576],[12.125011488604628,-550.8956919060273],[3.946233330289033,-531.696457561322],[-1.207362837089022,-538.9125865924159],[8.992517432388809,-531.4681091525379],[3.7007664830928206,-533.0318341982231],[13.438130773480339,-526.0604752422764],[14.685337664962049,-529.8801438306391],[7.78116821264166,-533.459296393526],[10.956082136071927,-525.5967891471012],[3.8546830200680233,-529.6398281312205],[-5.404429364096245,-528.708913437094],[-0.5852169766495763,-523.0594113048636],[-2.2906839558852425,-541.7857740262066],[8.247381756414029,-531.9486135937666],[18.213400365958364,-546.2773336078851],[26.122780228720444,-553.2306323290735],[37.485115240619166,-516.8483548802576],[57.05994692199465,-521.2435876533942],[76.2548372503311,-565.6793701753925],[100.93668599343209,-523.3069226942598],[124.43752493439541,-499.2176777924949],[151.93967733195745,-498.61327806330746],[155.1713901496346,-500.7963958158399],[139.89721545463647,-514.0935068024837],[87.12050624127488,-527.3834778575365],[81.47461777556737,-518.2762801342911],[74.60472050647962,-519.7291579250799],[95.01705793607078,-509.06264788548515],[125.26959088720992,-501.40136365012063],[162.52537280470688,-502.09484461243505],[188.4077047651499,-473.42070486255466],[202.2451057125612,-468.5233051770763],[193.2122757466093,-476.4286174004018],[170.202236177994,-485.5316608500659],[139.38335396935122,-484.4886634787687],[116.96318417805128,-483.27507121066014],[100.15851663025626,-503.64904364894164],[92.79694455319395,-518.8240204602048],[69.36706387128777,-508.6775436863593],[74.50742576530183,-506.0902925070444],[65.70427784288677,-508.9694014079712],[74.73525050237129,-512.9518752273613],[84.21108154748435,-521.2378624338164],[83.19746784709457,-522.8195315180669],[113.75477454101804,-496.9328359937888],[138.09309306355158,-480.82639932409825],[138.0218373656819,-503.0436441364177],[171.8403183584452,-446.0286233093325],[180.28572514066832,-424.48526130634355],[174.2793629136561,-437.58463359252846],[150.20191699999384,-459.3387371275586],[124.87504590212734,-443.6582814603405],[105.3017830715865,-426.0828666485784],[100.24208649466459,-424.0360540375664],[118.15409659460352,-419.99777150278123],[129.91869407926032,-405.3370833529923],[138.83829641431805,-379.03979427114086],[151.7034565412012,-384.28574637996985],[150.28511443047648,-373.6645352156761],[122.96599987246066,-371.03053061960486],[99.27997929694004,-374.18322506100685],[81.39625858337558,-389.3819572915329],[64.0063085409181,-394.520578308475],[56.70833223161969,-390.77057561908873],[44.17970536391874,-389.24646915037215],[34.200321298201516,-377.4557387653126],[34.73344259563578,-377.2590861381052],[41.51552079934231,-393.0121874605645],[54.05767934301821,-390.30126140375467],[55.01593097842442,-386.2582670821639],[65.36522900170121,-370.11725925584255],[84.52442172204337,-387.47818012581024],[103.60479677597266,-375.9970852130631],[106.37673496185289,-377.77079012947024],[97.35341302815675,-357.3203076797697],[82.81517338633472,-339.49987773843054],[70.93759606979285,-339.83281052230166],[66.9224855639028,-333.03735968814306],[70.66291055336364,-315.50884937733133],[73.50634923302897,-308.3413654002834],[78.64010971962864,-311.2764628406576],[72.78116721269112,-304.6294566517132],[55.60246352254126,-306.79308809648865],[48.439223576917016,-306.309207694227],[40.04720378045181,-317.83383305939174],[30.076347288237116,-313.33553519398595],[28.39080458891374,-317.15152358677983],[23.077878499385747,-323.82345239565655],[21.95004590562644,-317.90496521380373],[22.082884170792227,-315.93964682952003],[26.373963146102483,-326.8666832974726],[31.501722863817236,-330.7415495366474],[44.0941554625806,-325.71579035559193],[55.49533470543258,-328.3645130784421],[72.87369669037571,-311.8016385262879],[94.20768571658505,-315.3533110055929],[119.36035899105605,-303.6909279129201],[113.7773877299237,-312.1782587045316],[88.36925833373948,-315.8713866902913],[66.04120092072066,-335.3864331272914],[50.582016943184215,-339.3525743702214],[29.124614720808154,-360.92364575041233],[24.973008272660707,-374.24543975003564],[28.8598078114926,-372.6040567601449],[42.858372695594085,-357.755241541194],[77.5110761234535,-396.33894666566266],[100.80686740240264,-399.5160205643988],[101.05248862876806,-393.50902666583113],[77.14086924882304,-397.4432108245676],[57.974566279673525,-389.9987912828915],[40.82460930007676,-404.9766131127244],[28.59826717633848,-390.5965621471396],[18.923494831050107,-400.4241955620024],[16.254670377827438,-407.4805012447407],[25.832026394177547,-390.22897664745324],[22.94752854833621,-402.414960550293],[28.563678027812898,-400.2380947531349],[39.3860673634025,-399.75245376622456],[56.75121194527105,-388.22099383420755],[68.97272885163403,-398.00193569428166],[97.87506571704216,-389.92373311041774],[126.9849780759996,-387.89705968461476],[143.7284941737558,-403.2073438560667],[139.21569264443275,-404.97266980504014],[123.74010889632552,-429.5215658169802],[101.17720670048806,-448.45536323100305],[83.69913243645823,-441.8132624312375],[63.56744014633432,-450.2164947324003],[66.24522747291019,-461.62292799751094],[65.89177206213998,-463.1523234935365],[90.137568166054,-461.91470636451663],[110.62497557107997,-462.92796357098587],[126.83828169471622,-445.50529243922165],[104.72688129662947,-475.4923666838241],[83.09560290296037,-464.42577189759436],[63.01375248346267,-478.19841945965663],[43.55626765627824,-464.6275614444071],[32.285008684203035,-472.51933661573],[26.82977306488749,-466.1940774227868],[24.971187175130808,-474.0461415759323],[15.256959883169998,-472.4343647041386],[22.627381433244068,-453.9194080383818],[15.705146103970833,-454.44540457228914],[14.433680206477447,-471.69200288039747],[23.14624358149979,-462.01778041316936],[27.63446537803179,-467.4391193685466],[35.929643658532655,-474.7151743167349],[43.38247608949939,-487.8794911764144],[50.94831778323521,-479.28932376746684],[53.6738880878321,-481.21008101714506],[58.97578482916526,-451.8722316841379],[60.47332776023029,-442.7656116125056],[55.8061786398157,-460.30475245606567],[47.503158744431744,-460.6153320084493],[45.4072180287078,-472.1866635737788],[43.750609314689314,-480.4564502677738],[47.55265028996723,-475.44201944562167],[49.14541337930848,-458.05639912141964],[50.69419874608809,-465.3259181041151],[43.342870788156006,-451.1092893807863],[38.70214440544305,-452.7174692602275],[38.8456642811916,-472.40572620179523],[39.22179251588,-467.122370438208],[39.53431651720041,-465.43384547523806],[51.0685860670817,-480.15292979044307],[50.30160816434079,-490.2411785598183],[35.18444426754138,-488.36506104672856],[36.61199538939695,-493.98134758014646],[31.93977433564055,-511.2264501903908],[25.607372777731825,-496.12747831356614],[27.189310325583506,-512.1427102261291],[29.255963942000562,-523.7742076266292],[35.92389481162445,-532.8479056979693],[28.070830408888582,-540.7629839767703],[67.0164181395744,-523.763785035791],[71.50211277579297,-549.9577794258098],[81.47693088863502,-555.8921397271173]],[[-51.79484213455896,-492.47064165976315],[-14.564579249995631,-487.74129969793967],[-23.74218733343156,-475.0246452034153],[-26.713853340923038,-496.40276593857516],[-43.184876090181206,-497.66996680504553],[-54.133957211303766,-479.3870459204278],[-71.94701352263877,-480.85253709990786],[-83.69828493305528,-481.038803355135],[-89.92730523926474,-474.7747435252154],[-70.51920764622685,-487.27621123068513],[-56.99510286563259,-489.87014993565435],[-45.62904905704647,-486.9134412027536],[-53.727361644382086,-516.1275232362475],[-69.97215292347767,-501.5243177968398],[-78.96820046308903,-516.2282459926175],[-109.98571581619655,-516.3920054704502],[-93.52632125150978,-505.50480043550806],[-83.08240702690978,-512.8563058153038],[-59.014956353131936,-498.3054686653161],[-48.07429305093035,-513.8063516377308],[-28.695199011796035,-514.5618656849705],[-18.5146640618579,-523.4595928782745],[-12.598804390223734,-521.2279572163075],[-10.904252886579798,-516.443904941711],[-11.42881272448534,-513.6586226158624],[-11.229163675638006,-510.74273433938083],[-20.936178833416648,-526.809761615133],[-29.04193939397129,-525.7093758350312],[-45.81942219646652,-503.97177304364425],[-60.51641762569835,-508.14450877276226],[-77.56095006973658,-500.70667532916764],[-92.66433332056494,-499.98098485255616],[-101.8647403879798,-503.1176639271956],[-95.71726176355963,-497.3129928041135],[-91.02655720957489,-510.5837955654183],[-91.45958143960053,-520.9067504197627],[-90.31387233642192,-527.1455625558064],[-83.77958608230614,-537.1312655935665],[-89.06159041819188,-544.3404330667969],[-81.89349567862126,-540.774204300988],[-83.51860041980541,-543.4795184472325],[-88.52628030028654,-556.2839340056128],[-88.87384087518728,-538.7583058483269],[-88.55276317912,-539.5503812032616],[-86.10284543695474,-523.6291156297507],[-69.7244534577352,-525.37944410811],[-69.14223777761487,-542.8547493456008],[-61.53604901364247,-537.3775289989146],[-62.34071570455205,-524.2739851153583],[-51.93748123138471,-526.9192339528637],[-51.0957019179566,-525.2723621900323],[-46.0544115413457,-512.2406864454563],[-39.24565406812195,-516.0007166515093],[-34.18365011119488,-525.4306697115258],[-41.53216083002479,-508.60570144630503],[-30.59999640844285,-512.4879628080107],[-30.105394083513147,-527.3483611369694],[-28.68774750810678,-518.3133961921815],[-30.581191983130566,-542.235536643127],[-29.11123694208095,-518.3620819878754],[-34.299279734869344,-507.7966726652944],[-36.835282316018265,-516.9520889999308],[-36.65476742911642,-535.2923932363557],[-26.090794106784074,-523.9936036583136],[-32.77964572484234,-530.0730949375647],[-32.36723023250431,-525.8311680235176],[-30.86155431216048,-533.6909156675151],[-37.367766554806735,-510.466474749144],[-36.1403536117582,-534.7597580734653],[-35.756775957402965,-530.5007862664007],[-40.42976486608052,-526.6081811240592],[-69.80698117001896,-507.508815064961],[-38.747384825453764,-526.4958455432466],[-39.686412824386366,-517.4041460546255],[-41.97604164783979,-527.3515522709106],[-39.67432728270592,-523.1671696213673],[-40.68186032257222,-523.8234727681258],[-46.14532407913282,-528.3989841580058],[-43.96827166577327,-527.8093821177974],[-42.0743968661227,-529.3007634487103],[-37.74987520731054,-530.0959827918898],[-38.85119330784107,-527.8838767417737],[-36.58000423669171,-536.9121529565875],[-39.799827547467544,-527.1656192812885],[-53.14761319813903,-524.5407656908696],[-58.563588734975895,-522.9623603616064],[-58.54484018285041,-527.3286155289588],[-61.1731807184417,-521.9807056015461],[-73.47098690672419,-513.1734997210759],[-72.93048675418584,-524.1607548687928],[-75.73263738335845,-518.2229358867164],[-78.94573747544882,-518.8860548350905],[-83.11651421570241,-512.6049191069156],[-81.56481935666113,-532.7040845045985],[-80.22159160416129,-522.9592215519785],[-83.0459788544099,-520.9928389792086],[-86.75230376663546,-521.8237576839908],[-92.93003160945727,-512.6237987274137],[-91.99424155808674,-518.0393214510408],[-96.79135236781951,-507.1531778020046],[-101.55482193032208,-505.68801559827784],[-102.78139570029839,-488.10760278591283],[-104.21033490707259,-486.88813503551614],[-102.82364603485837,-494.1369214814731],[-101.15611191382948,-492.9086479869263],[-96.68216075048986,-484.35644203343736],[-98.32667649003349,-491.4811858252806],[-96.69639994078784,-498.69200739119606],[-89.90336967703331,-501.5254033464712],[-85.71291326167159,-506.1448194189659],[-77.49218927096399,-506.8998485619288],[-62.735051250044876,-517.7453223022874],[-51.17758860453728,-533.1329884546446],[-38.38992262502245,-518.9498296531706],[-33.77761504792011,-514.2420210345049],[-23.59754568122537,-529.8920763683908],[-22.35704669142649,-522.0831831198186],[-11.592852704096458,-518.9462950603169],[8.315539019550101,-529.6384545658987],[12.087984098917218,-506.58451631647563],[29.120660119169088,-513.0599063771117],[20.59552787090746,-503.47936529390654],[33.18453799687512,-496.57095533676613],[39.271615033163016,-493.9766093131635],[36.624986873234434,-485.5623724894874],[41.082958452716866,-495.77427239090866],[52.9548686638654,-509.4448120515749],[49.42667709589182,-504.2828712750975],[36.315938463066914,-510.56348677387314],[30.897570854801415,-509.5785530334115],[23.36391132384017,-505.56367790390493],[24.950162316614694,-502.6529687760574],[23.22789385199286,-530.0571710804214],[16.038677789767462,-524.4664029718888],[5.8518238452701326,-536.8807596676031],[-3.592739497520938,-531.5847522476959],[-7.252206843862723,-542.5130987949317],[-14.527155399900266,-548.2362226139035],[-42.268631514737024,-543.4473646363303],[-61.78556135247635,-516.4022834818694],[-65.2282869273979,-517.4225043846652],[-74.21652554916659,-522.5121818455561],[-74.55115608153176,-525.2028244646225],[-83.0279301897175,-516.2208552995635],[-74.89458494550558,-513.4299822465605],[-75.86771625492258,-515.1096542143334],[-68.71978199446357,-521.5546958878738],[-54.999913379243026,-511.44107683887773],[-55.553968897395634,-498.7126756775324],[-67.61623143494967,-523.7614502400936],[-80.42777533370565,-532.0057610941709],[-82.53824222694965,-549.593689103076],[-72.69593900750016,-563.305970703521],[-55.527559962756925,-549.1361381990805],[-37.033436946503855,-548.3501408469922],[-27.699733441882813,-547.0730153473446],[-18.9831929999292,-585.2877067511863],[-12.747542275657452,-591.8796608705791],[9.575253894680827,-608.1867236754138],[6.823938032620845,-595.2446723951475],[6.234521601890833,-598.120253975515],[8.920819667006185,-590.5533489178297],[10.44860668638404,-594.786362313004],[5.973740151443849,-576.7608120344175],[0.47384075648369617,-570.5064420716058],[-12.922849561405485,-562.5970498654196],[-16.522189889243748,-560.7472859807353],[-29.756005343967047,-560.9305418541386],[-42.436084250559475,-541.0018491602007],[-47.402695214197024,-555.079328349713],[-56.94697273486804,-542.9557884816488],[-77.92816651383373,-536.9354238377166],[-85.63838138588812,-560.7818732598196],[-95.26836100841956,-554.788720032594],[-97.42346413446069,-557.8615193806774],[-91.00522788045737,-563.7085549103451],[-93.40165119887081,-547.0852681815497],[-92.16723100667411,-553.1802856704226],[-82.41121751447838,-549.268372690618],[-71.0962097827171,-546.2671193040215],[-64.24425107009006,-526.0818308188648],[-59.2509835467356,-508.99674697807905],[-52.77263700853439,-503.33945851642943],[-46.82976843546567,-508.1199602640502],[-41.733686293305595,-502.08467961094743],[-34.79012492512038,-505.3922284591981],[-39.16994489082924,-503.90332546932393],[-40.59214083514439,-505.45272028859404],[-50.0930346738478,-511.9465102271098],[-58.705038734396794,-504.761070161436],[-65.93005411391403,-512.4442896052745],[-82.85047614354403,-521.1559582991465],[-95.26921208368083,-510.95240707484095],[-111.32218788554036,-514.719511461408],[-139.66371082220724,-499.1428900132513],[-169.95626240054122,-503.2209414635938],[-170.9404916762499,-504.3465998147111],[-170.29182809223585,-508.7477306556764],[-133.18063802732757,-514.8954346332125],[-110.35776598471438,-510.6772326144885],[-78.32447976875011,-513.3570304550381],[-53.25453022940013,-523.3173854250118],[-18.7499469725027,-528.8245525743341],[-18.70114469178378,-533.9421882541012],[-7.604411995496719,-526.7686606205185],[-7.680172666711883,-533.3323508479608],[-9.001417430755623,-526.963786888168],[-13.945923427923958,-532.8422085204302],[-22.55299515857689,-539.2187359416912],[-30.13323130203969,-531.1476594652465],[-53.36138910591512,-533.5095187473223],[-80.54151269678187,-535.8024929508919],[-105.88272361825022,-520.8296395580558],[-126.77037266174716,-503.28702824031313],[-125.67517484342943,-496.42677645288677],[-85.04239326593864,-506.40116549280333],[-51.95143812337494,-517.8965415724913],[-22.655741001987394,-512.7772267680375],[-9.145127564306563,-504.9063018876333],[-8.353536415440999,-507.79033650650854],[-45.87003284273817,-481.20170131927887],[-72.20949687013456,-489.5327915046573],[-116.23065537869246,-476.5713527027656],[-148.50319928919993,-447.59219366190996],[-143.40779825124088,-454.93024499351077],[-150.3671480294629,-459.19254170050067],[-90.78443380974892,-456.83805129054394],[-56.256666670941286,-457.835083355254],[-37.36280395946767,-471.98664749309796],[-19.83557810543965,-483.4990700056668],[-15.716338269233177,-472.34750785090023],[-15.8754106618008,-462.42337656460086],[-13.877455014508428,-466.79754311992997],[-8.60702531298233,-478.40408074200013],[-12.774453857861772,-486.1729720865476],[-36.67263591522499,-456.5596136694069],[-44.783346098306936,-446.41610118818676],[-61.30196062575595,-454.9091854552769],[-88.8088010892991,-459.6256448369695],[-110.62639880312275,-435.7151731762917],[-104.39630493537368,-417.5034745231028],[-81.47624469503461,-412.10967262332383],[-47.91169253967945,-412.3086268797606],[-19.07060704545279,-389.2841192158635],[-13.556700545767171,-373.1298652316898],[-21.598111487198253,-369.8977017032553],[-38.576644477147056,-367.6954271112595],[-52.11984921997242,-347.07370476348035],[-67.72881795045066,-341.21731961287765],[-79.28793361669756,-322.21541872908847],[-67.3701723943409,-336.76009899452515],[-43.20480457049746,-336.43934705720096],[-28.42489746755325,-340.1662108744738],[-18.300201390677955,-339.1335897412416],[-19.0821701745989,-343.3760098866951],[-18.770321217499543,-348.6756685122035],[-21.26468134620859,-345.77967531971274],[-25.131207611376453,-344.0197599532056],[-32.12873945374997,-357.1568962815725],[-41.31195089210928,-360.0956750969128],[-55.79418083338459,-355.87223293597606],[-67.56276324645023,-337.0320581483668],[-79.34202384341575,-341.3997034686387],[-79.32986457070297,-331.4075453952696],[-76.77539439047405,-340.9056124345731],[-58.86349412160939,-341.32203579421343],[-36.693811541596006,-333.0388967697678],[-23.635997181846506,-316.04554045692225],[-23.306988483673308,-313.41314180489746],[-23.821941250985105,-318.77482394977426],[-38.494051157908075,-333.01358542536104],[-56.75898449904673,-342.3401723149432],[-88.02427963922582,-335.5694790653115],[-114.77531407031762,-342.1355328774214],[-111.92857564480465,-339.24848818619796],[-86.3434959789862,-349.9004519753213],[-57.60115926392376,-357.3472769305388],[-44.487044985796615,-358.6342917746199],[-24.90302893885024,-370.95713275078106],[-30.40462241740289,-367.621460087425],[-21.4154797281314,-365.66275866205706],[-21.08256338822173,-372.2710612185714],[-21.25931454155659,-372.3513086599471],[-23.39797323406981,-376.02892569975234],[-35.6738150304156,-367.08663614524426],[-55.4905340367784,-357.1936038623926],[-80.36953252441054,-348.08316357186357],[-92.66386892901187,-337.8488667799231],[-83.24537255754052,-342.92764122182257],[-71.141766077532,-354.1155197833002],[-60.39525005874674,-361.2276366383451],[-47.6496001828001,-380.08168730869613],[-39.09160079464351,-375.46208655624037],[-25.82169873998123,-378.8055458979168],[-26.01018248122648,-399.00675680957283],[-33.8836787765548,-400.92174811058976],[-47.49101364550279,-420.55262240664297],[-69.27829286424424,-421.71763755723214],[-92.50719268972546,-434.63128191953524],[-74.86922648906881,-447.92837600750613],[-37.75492977640198,-447.2645543547603],[-17.11482772322728,-468.7974044893158],[-14.086813685142374,-454.4036986680858],[-3.234808670060602,-458.3822359509775],[4.282047311900044,-464.9423629519449],[13.014478103958197,-457.65393946178574],[6.062869704309605,-457.3320489501597],[9.494346533919952,-471.7806038866395],[7.119439484989243,-476.0857420265196],[-7.523740633469856,-462.9699529199095],[-30.37703514683068,-463.1976352716513],[-51.48288400597778,-474.79164021166343],[-74.29748943146006,-456.31408991645924],[-95.81523983188083,-462.01207183244605],[-106.66138981091234,-456.72704194996004],[-105.86343481946619,-460.59499531838605],[-90.88993507026692,-456.0495149297658],[-80.05243971053432,-459.9932702814875],[-69.86396779459562,-461.98152531862866],[-64.19150052798557,-456.21881095066203],[-59.874033117954696,-452.46895853262095],[-69.41745472281252,-455.7479929044978],[-75.68600960144954,-463.9916270557078],[-68.4682914040618,-446.37274686269745],[-62.35211976779897,-445.4494059371731],[-48.50822573367327,-455.3937048572018],[-36.7189775248894,-463.91066855476174],[-26.253755190113225,-457.20251751120736],[-27.104078607843803,-461.4369292738204],[-17.950522883882115,-449.3190506866961],[-15.00380293479816,-442.63619627162257],[-11.70982812376576,-450.8568314510094],[-13.068332359772057,-454.84467670041204],[-11.928315021045478,-459.89053612035104],[-13.45142237396692,-466.48079384451967],[-11.631118323937926,-469.8131525107134],[-9.660990652646888,-454.3472996513069],[-5.703635312973972,-460.5444779071993],[-9.3901952261254,-449.8442750225388],[-9.387230987296391,-441.5171745134751],[-9.157523682530893,-453.8373115623558],[-2.3662914077286814,-436.9699214131965],[-5.286542497785149,-437.54258244459356],[-3.3004624896612995,-437.6872294633688],[0.4569487389458118,-439.80808339937744],[-14.107310949223688,-436.9501024939492],[-31.409398952242952,-431.83616481492106],[-30.33608246660873,-450.11022214658533],[-38.45406708928135,-479.6054030686239],[-26.4931028563185,-547.3021386109449],[-29.543775632642053,-560.6228091082309],[-39.50032511551552,-582.7275351633714],[-30.669185715970855,-616.850444663406],[-7.267453489292166,-659.8927554873044],[-3.8080824389710415,-630.6706541718104],[-5.212606416016058,-639.5673619592745]]]"),kj=JSON.parse("[[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],[[-98.21250472241871,118.2351997749995],[-95.06297769973264,115.36032526512372],[-99.45962772533687,119.86344784589562],[-90.8682612130882,118.06593292890238],[-94.68041356348749,118.51820870072083],[-95.97473327803203,118.03626694832792],[-96.91818476440812,114.41831254416843],[-95.59932247818239,117.15379297206914],[-94.87596700290487,118.30906363109057],[-91.34962755703106,116.77515199704203],[-95.65212004800082,119.12331730135202],[-95.57289448887224,119.10453825038996],[-95.4270392910039,115.68424210482931],[-92.49188922337925,118.01925734958866],[-95.04214897949265,114.65087474716847],[-99.72185679734491,108.4372456560418],[-98.90669281992331,109.61309030685425],[-100.77560755219764,115.85360438433565],[-100.27261222836182,108.83544249841145],[-104.70819060549911,118.00276874823044],[-93.58571648821953,112.53665652175982],[-99.29262998540435,120.08792044105064],[-100.3776688590653,115.78391118243394],[-102.47508499368337,118.67846794390391],[-102.99729403745573,116.91715915515613],[-104.14276810931517,118.18282454557027],[-104.9060821761305,118.24734840608221],[-102.6266801949086,122.50268873903258],[-104.23353486372821,122.23175601026458],[-102.9146647228427,123.682235493353],[-97.06875241749998,123.88620473482797],[-97.55346480020569,124.55797206552086],[-95.89857995193637,122.71027306078793],[-91.63066242376931,121.11515535897843],[-93.1812238770815,131.0900944554445],[-95.2136171048212,129.57292703136613],[-92.26523536565958,132.89411962779513],[-78.91151764144968,134.34310397853744],[-80.26903125864612,127.9098297843957],[-80.8495954881364,134.93968137833576],[-83.58435932943917,136.67927683338394],[-80.25598058538276,150.5634135919588],[-81.69705576335792,147.42131117191195],[-84.29145474365458,145.40799656342767],[-91.91422802283012,145.6115178508171],[-93.35765542212437,148.2285125430766],[-88.0878345727869,145.41612565568403],[-95.08127994431817,140.94894206141407],[-104.33757909718867,137.96390229420444],[-99.46283648834725,137.01663066004244],[-100.66145154107704,144.06851356399693],[-106.42070056017843,137.2722670752446],[-106.12290528591177,125.38114542303492],[-104.42097539130532,130.45735519979553],[-111.96543680491749,133.42318360396894],[-113.80794900986342,133.64060713630977],[-105.87738010347948,129.83058540691547],[-112.07734479978018,130.5073732341025],[-118.0614672702398,126.51408105687233],[-119.32916719978675,126.11316789154125],[-115.7816651129321,127.32726592545896],[-118.16710468109841,123.66009038249751],[-119.30873148648413,125.0360734064426],[-115.47142741944134,130.54363243364992],[-110.22571333530203,135.13028436308116],[-107.22333609725325,129.6295618027608],[-107.39224664663232,124.08668684875738],[-104.35004103546811,130.9641878874603],[-101.48723650503558,127.0676641556704],[-103.24316737312745,126.84634339667457],[-110.35312411476343,139.62566847488256],[-141.27453896092663,145.9459701910614],[-96.86795272713351,132.8382776537171],[-99.6714036407696,122.1735794305356],[-101.67409473211251,116.14001119305067],[-101.04990727844034,120.29280905117844],[-101.01130802480509,124.18136004078849],[-105.24767712132001,124.6214762555419],[-105.71246741549601,133.11646292189369],[-94.65157990343818,137.22754656090876],[-88.7293351307456,139.09722203365277],[-87.93026228308656,144.47230478080678],[-80.10619777409079,141.97217022996188],[-84.84404500824735,148.468083624668],[-81.95853491939357,143.06197651204775],[-86.89759541983676,143.71234705423058],[-88.9793534035087,135.54990628091707],[-84.17062973804138,134.98753334823232],[-90.33739503715486,132.96123249946538],[-88.37301570728533,126.31995259303994],[-87.77316491399,122.6378380361117],[-90.5752203186371,122.86180997364193],[-95.45090563134664,116.62451197460803],[-95.74053031048192,119.56521979670538],[-93.34385639696109,120.11092657845097],[-87.90392474318844,123.82335250849485],[-90.62391582413318,123.17036605570593],[-87.52607507341759,135.23133483972833],[-85.21173497878976,138.3878587248695],[-81.27868011153987,140.54136424481044],[-76.19094281099967,139.36694074689672],[-73.30845438168967,141.80617463149315],[-69.97403661056671,143.82703047809582],[-72.05433983184298,147.64845992743858],[-77.12038870839183,146.2715181071634],[-85.25936994064614,136.5845361732271],[-84.30480042962824,133.34548212634684],[-92.3852707465461,133.28165505865934],[-88.29467892949583,133.25847074744388],[-92.39994946263687,129.16563889172107],[-99.43342802715836,123.29193357430904],[-97.64204403498593,124.40562050548692],[-100.7416271743387,123.9107101271079],[-100.61122545377293,120.25698674145201],[-100.8516615966696,121.29097018535163],[-101.29574798370089,115.74617294478765],[-107.85978111568181,110.9989430405883],[-102.24059647203973,116.11790375337375],[-100.06635159907529,110.75253446859972],[-102.57030045647332,105.49434007467346],[-101.18052923699048,97.2393053395707],[-108.98437971316059,93.26873004273227],[-104.5971187409254,85.82112450072748],[-116.05432837940998,81.08774351062357],[-121.39373722532537,80.86255079481032],[-120.66872383466699,80.04035729597149],[-107.55532542683068,80.42029655727765],[-108.61836646026097,91.41532016377664],[-113.51241801131425,88.76100694900799],[-113.89618024743692,92.79078224815112],[-116.42169867838817,100.29870575354414],[-112.4292415843492,105.04735920530584],[-113.59289159552117,102.93046963732377],[-109.47872250486557,108.67416597695899],[-112.361687078116,112.88493260255632],[-104.41686265954701,117.24714200835206],[-100.29566910950007,120.85523979685001],[-95.72597590201383,128.1704941947322],[-97.20218747357512,136.25539792883],[-98.24523664986822,138.5002738977496],[-91.51551165365191,137.48397806107653],[-85.89892715582562,142.17776594801842],[-91.85296262829627,140.07774089503175],[-93.91250705865446,147.497641664149],[-88.81139188982763,142.3813779117197],[-91.04947988264178,137.3975681442273],[-94.93072985477261,138.57072944060224],[-83.20194288325251,136.5511841463915],[-94.77650016487144,137.44130309889795],[-103.41618733091047,130.8391961114943],[-98.06153413715441,127.58319355853973],[-95.1041397433296,127.2568426097605],[-99.15164640111738,125.69966140232202],[-110.84778672242197,143.79619081634542],[-104.3705162386695,139.30020365487167],[-98.37536641655856,132.3459382794423],[-95.08372307221038,145.74318533598966],[-79.31845294445111,151.49306378272354],[-49.8084295562893,154.5988763068541],[-49.46411714549913,154.4919287929987],[-57.743872110007544,149.06678963514537],[-72.86499975345976,146.06601987208046],[-75.76353950382162,140.19246114202872],[-91.99114328564451,134.52279514330212],[-93.56187041667903,125.81588013960959],[-94.3533319222226,130.4711986088746],[-95.3012316816135,135.39820249503668],[-98.04354350109634,129.03844704018718],[-102.6115829659816,132.09766261646405],[-104.49123701629037,122.42493853738188],[-103.08852219003114,122.74303957534016],[-112.22252926377888,123.06989491474621],[-104.61746881211201,120.06592384930048],[-97.66124746877551,116.41353227074967],[-93.73589762862639,122.12412269978654],[-82.26234249418576,123.663856780743],[-76.01799644622895,134.86004193016618],[-77.08784496379849,128.4870909793682],[-77.16002040408,137.44712765914062],[-78.93983705372398,137.59679042516302],[-83.63203602604665,140.12795754240688],[-90.5581684697371,136.3674377132453],[-86.32399116054876,133.54846360540614],[-88.60364607108181,136.8830047627547],[-78.58009966424129,135.3388421515382],[-80.61208966136587,134.3672547134688],[-84.24889722133389,134.17641346625248],[-87.03745888341393,131.67060840744603],[-90.5611530970865,132.42650899074488],[-88.9081708630132,135.465321234537],[-90.64591537108117,144.72505154383487],[-88.04698923823958,141.5052417587077],[-88.21534115831128,142.8574895792501],[-78.31227791355218,141.30586285965603],[-74.92700778757137,147.45567009020147],[-76.73828812344465,146.51401287042415],[-72.94062678877162,148.2392884115202],[-77.81087228468812,135.92560686065997],[-79.92018643290055,140.95285440703742],[-89.9769460011783,134.60107930176957],[-98.1094369935181,134.24872572297443],[-98.66556484372074,128.6380151285424],[-90.22993219029422,134.45686876909713],[-109.83592360849048,117.53725890583212],[-111.18163185720141,115.16084084907675],[-117.26120108269822,114.42590890040663],[-97.48265847091278,114.75683710470071],[-97.47757132834977,112.23712475578225],[-92.56736633121557,104.86142694801117],[-72.28832121683058,100.05108789036387],[-64.7887723446799,108.90198050286392],[-73.90087024000991,124.00346297877206],[-55.07740731763107,131.42282182105578],[-52.96034527839333,126.52564054084098],[-56.26613340017076,128.77536616084785],[-54.36783202992103,131.6834335962427],[-44.53994984169947,130.1425014593018],[-38.32065903878379,133.2319097865368],[-53.96580833199664,120.46693301859318],[-58.012297921345294,113.78035014367435],[-79.84465605139633,113.07565844087503],[-83.27336913083462,116.05691300767899],[-94.5729420499149,113.50503938383838],[-84.11173268498624,120.12270152800966],[-87.63119161930973,111.77390924801148],[-96.18496571109608,110.65088330293861],[-98.5945471294927,107.32101900095483],[-101.69784915326352,104.90030650245365],[-100.91259266104805,100.00828714029558],[-100.30218411780044,98.5544908533659],[-105.08319729204067,100.7046804080037],[-103.318177302972,94.3877045650379],[-99.00712441272691,97.46334151937583],[-94.16539054309533,98.29125850390756],[-91.23762397688716,94.9707565619583],[-88.3925322516605,90.01492130441318],[-86.97677463551764,81.84681415842249],[-76.87294401087411,83.38127607618787],[-82.63094406235507,80.96064651548932],[-80.21829566740507,87.59802094718736],[-73.29323144183769,91.77240658536175],[-72.12772090486101,88.3865010400682],[-70.09969737391856,90.27622368052016],[-72.924257055223,93.63630584020041],[-77.68380835400598,93.970749393755],[-75.88793083808224,99.22131531224375],[-76.01800212573283,95.98438469005396],[-70.80405432644432,97.13333536752714],[-75.42614474160735,93.01186848533905],[-77.45952919164131,94.95533393408505],[-76.05844206056554,86.03595644168945],[-80.78866415776855,86.76371718523615],[-86.12004473819576,83.28344264268776],[-77.33990852843209,82.90762525163257],[-71.46035773036596,87.55750993034849],[-70.12730935426822,88.1582461094672],[-72.70611710983724,84.87054618094658],[-68.7331223026685,83.16672276413772],[-73.50123680966163,83.72782641558547],[-69.11360948911823,84.80376241048498],[-66.46393339680816,84.87962298680907],[-64.00228045718148,91.00343492260538],[-61.681612054821414,86.04074526956708],[-58.16330065108673,87.93265031293322],[-61.032996954133466,86.21340678497302],[-63.70737091722265,85.07752158342782],[-61.30654852496605,83.31533146044728],[-60.39006566830807,79.24903870765888],[-67.58362240772334,81.74117562019092],[-64.11098479298391,79.44451139798764],[-69.64620119086408,80.65125339749102],[-71.30764586892502,77.96061584300128],[-68.68787501916097,81.73410922592689],[-64.49454002039437,78.73890361647489],[-75.97041062722525,81.29163317672862],[-74.01030368993713,84.27695544547032],[-74.11070378742448,82.97759921452814],[-78.94240834562078,79.60891329560343],[-72.34271920696534,75.9480220878363],[-75.2571268083438,73.51291479685881],[-73.00859686579702,71.88749991425595],[-66.81136723523917,72.2863923822822],[-67.86704998887365,72.18366627663261],[-69.7410831212398,77.57693268819366],[-71.00487872398833,82.51923454303449],[-76.73939916866112,81.81386991708223],[-82.5944902717203,90.17905939120635],[-79.67058056308394,90.58683762111286],[-80.32658722414214,100.3529919894687],[-75.60487894036135,103.829197075391],[-85.54659218534658,104.47825817907119],[-81.05180677025544,108.64270866293452],[-79.72511301537372,111.87044668359897],[-73.5858551023997,111.51183208407224],[-82.30424249891814,112.38000396871644],[-79.81655445376077,111.43092134733911],[-78.7330226931166,111.42177164884902],[-76.80676753618366,102.43613226836533],[-84.14236591340347,100.27132698148762],[-92.11607216770255,103.37272002250575],[-83.15298666682696,95.45766843149954],[-87.26044176568479,93.50666545425872],[-97.26292079493135,93.84259881023308],[-94.76059971522488,97.3296631618133],[-89.97864510354879,100.87465811570235],[-96.88150807552546,96.55823149876005],[-97.1706912925577,93.03162564319666],[-94.92346075369113,95.32876642496899],[-94.39931247805362,99.99934598328127],[-100.04810364375555,109.24988052633671],[-98.17086110853364,111.63837992282072],[-97.16888401870631,108.04388989254983],[-105.825292009505,113.61837812658848],[-103.10427107873795,110.9311952358778],[-97.29746538061147,114.63686703790302],[-104.22568277397414,114.14957959551043],[-92.17448981001121,121.60331235254057],[-88.52305705297397,124.65229009741438],[-86.10026842124881,125.54409775332033],[-86.40649330806423,126.44847186212371],[-80.42296697829977,124.0583972451443],[-80.866199412875,123.1397253864875],[-82.58525721806245,120.75947640101492],[-74.18433865858606,131.7304288090893],[-85.84472522718289,122.19542438593692],[-83.84133842850753,124.87987327907285],[-73.155920383833,117.69672040700868],[-65.15016935788447,118.28645966767033],[-70.49450333117323,117.83101425233212],[-64.71861719838876,116.67264463480831],[-73.21226482716429,121.64079382462637],[-93.86445819490558,115.24002312095934],[-87.1204887412789,114.21101629343491],[-86.65647089383151,108.65899890717583],[-90.27151613552769,106.76836037164901],[-93.65863246682943,106.5674180911808],[-86.05690378942535,105.90802360492091],[-93.45439509007952,109.7996016333941],[-105.70134333064073,109.73312975140436],[-107.12143625364973,109.44457064504968],[-105.70541763723509,106.82761271100662],[-101.66728890668145,112.41590208661682],[-105.31245575760039,110.88336405354232],[-98.23660751829289,113.8031098495145],[-93.11676288490065,113.19195563435676],[-92.35137891136611,111.25340566890338],[-100.80075892351005,117.25272234175202],[-102.74456710569552,119.28498342272667],[-103.50256400871609,121.25313235693693],[-102.38812427136554,127.81483151100542],[-105.53687930342261,127.81753825933083],[-107.24340778373374,131.9501414387205],[-128.5184756417649,130.54509486392965],[-122.49364671223896,135.0136232829616],[-136.31949760012446,126.75513899692214],[-122.81462740498591,138.94719529768042]],[[81.31514775642268,7.661178462201519],[81.59895203411554,0.21014239470844132],[79.28138216020056,-7.192128017487448],[85.76993280513113,0.8082697798304253],[80.46166899775596,-8.512452458241228],[83.18026926745802,-3.562662141256851],[85.74362213187476,-1.5324197496150873],[79.14992241964035,-2.92408084864428],[79.10149941682721,7.574340811672869],[78.90538569197918,-2.7560274583241835],[76.05588778821254,0.7469681411959073],[82.9048728103478,6.548584088677899],[80.1482439174481,0.8941222427299635],[83.83813733065813,5.22888117600769],[77.77172132166027,-0.6765316495930165],[86.1234370409519,-0.017199628145135648],[99.90692678968935,1.1238589061262019],[97.10125466971692,-0.4294025191054516],[88.15524871912874,3.2766833577834404],[79.24312146239635,-6.74622239748453],[70.60143883526086,-4.60940053702177],[83.25837752349992,-16.406345075828426],[76.60951416331886,-14.439185963072305],[74.52854472666706,-15.147585865187693],[76.42342439302308,-15.642672472309869],[72.6260799691006,-12.93394246661137],[70.0738633511038,-10.134513990757],[75.67584444146667,-13.710937362178583],[83.71250018351213,-8.213964156306474],[84.33929151707628,8.481986445666053],[86.23580465791383,2.032173619089349],[91.86726432618627,-3.6562286630118024],[90.42261039217044,-0.4562907823720934],[93.62946691265245,-9.910566308886473],[113.59537556153725,20.037234219936522],[112.84097590084389,50.90656049105144],[139.36288557325133,132.7918269135074],[123.79270743260179,203.41651944915407],[104.58983230308797,230.98616044252537],[102.1775128641533,258.9075112865596],[74.33530700543406,287.60563827338365],[68.65064280200579,298.3938980973305],[84.6472005255996,281.1060716206912],[86.11286209059472,279.6943891925158],[86.94209218864421,275.6419303296341],[123.11187325736148,266.7242545374895],[139.09147527345772,242.15732544887908],[147.64531566028256,219.1998124029726],[150.17171096958918,185.3914250643487],[154.2773618312316,134.340660129551],[150.7248585094526,82.44426750184266],[141.88050383452764,45.36008883049453],[135.7152245343285,49.67636659322898],[142.3093486751668,61.92714372334069],[158.35650599702637,82.31955100272421],[178.71026269630943,97.0015013655161],[142.29694993685075,121.62271378186051],[176.16230323587683,116.16452869428213],[187.63512448631377,131.29327524145674],[188.24563454376596,142.4889473565438],[190.43889119517462,158.00005805346416],[191.95759043540545,161.87068342676218],[195.81692543633756,167.6038852957621],[191.47868833278824,159.77623082432058],[183.73227433730415,138.99265382679414],[191.6003807641447,135.9893690583059],[178.2228763836307,122.60884956661437],[171.5397923687899,108.0772073202719],[148.7613933805235,93.00980824843077],[147.05142004328843,73.31708168716227],[144.03004247402816,77.60718574626173],[90.22900254974695,70.56669377866149],[127.16868078484686,27.473393650091452],[112.53053751735581,14.14772033109034],[105.20671970833803,6.236954507237783],[113.37886437940767,9.31074312378837],[121.36499928551473,15.755652653131506],[124.7738744608613,27.424094995376663],[136.60756643336492,43.118944637129516],[122.34593961027304,58.76258461104953],[102.58457311169252,81.76493477921804],[86.77709479478085,87.31837907666386],[81.99023250544269,79.12721680607774],[83.38324093057429,69.91669745785373],[83.78380851569602,71.58516940674247],[94.04944625280177,60.852135153896484],[95.62067679932193,46.93127117770882],[111.84683643621088,38.99177998867424],[103.12783161799882,17.8900837453275],[106.76290547080532,6.659143100241749],[99.72357699494978,4.194249203054937],[97.78024441109949,-0.26370303924363725],[92.40580442295254,5.029009813653261],[90.34835481048094,9.182109299320018],[91.56485485172527,5.002039562960022],[99.13525577285736,8.041658576648047],[96.88121971091607,5.879284925168122],[96.69907545767808,5.929038208768702],[103.55458332496778,4.96872940564549],[87.31625142111557,9.192274856416816],[78.53455150256889,-6.854053101859904],[75.42081786245183,-15.664122265971514],[78.08504712478657,-23.35138212015238],[82.8334548392869,-22.21661188560722],[79.42706569068105,-22.155926660114233],[96.82734242755214,-7.828665478842595],[109.92545865499028,10.606494960264968],[102.96795879691729,20.209925750415664],[106.7342807844019,18.28867796453278],[91.36221252137364,10.14776663103828],[105.4657754903958,21.522881573544737],[119.38998758036439,24.542012001195985],[127.38094657968009,31.083407475343733],[135.27424627157973,34.176480639235024],[125.07347742910508,39.94610453683447],[126.1957978595168,34.7222088162182],[103.1709995296784,22.043600748927133],[87.07532597963052,16.46102441635344],[47.74495512810097,12.898125569218337],[57.56592204566425,18.139400557150907],[56.93665515918042,16.200356323631468],[52.3576185928809,11.366844590011283],[59.80480052275408,4.0039818910044005],[67.61742358528033,0.4523484237380444],[56.94054621506791,2.2461131978665207],[66.02532980095862,11.769391453668504],[65.18375336140622,15.375775929913516],[66.25282205359906,6.497985761304562],[67.75236054930906,5.115456895112402],[82.85591010373821,31.23370560727301],[95.57544274125587,29.354716202536338],[103.09771890164296,30.542437605824034],[116.39905076542806,43.41189069447785],[123.90571373100533,46.888017828278066],[120.73532067485269,46.40638346617811],[138.31793960420543,57.18610340802104],[153.82737778497426,90.32698105359032],[151.66363259779268,116.3968317568964],[163.16769309491985,175.39011935373526],[152.6784145825659,209.587515758437],[138.39886024350483,220.00750483600427],[137.24484335418117,244.43832162209924],[136.13513305507013,228.23770254112014],[139.32493636147194,220.5738886175793],[143.57304620166087,216.5823671274428],[160.40695134861244,213.28775762296095],[172.39807366980062,162.17793806096336],[187.006542058749,113.9241137208628],[155.3261578088085,67.94493006627476],[132.41657570205427,29.13516349605834],[130.07316451981296,17.5313796029443],[128.91320514269398,32.41758111465242],[117.92272440367731,39.23125549800068],[93.78062896842096,63.093285051611474],[64.12786747436553,127.59684417717176],[40.44903289799561,162.8972625844948],[-12.838474317144914,192.5908684034157],[20.552901738968217,149.62598231705272],[-48.50466951894674,188.93096498658167],[-60.17594668686155,180.2548658457365],[-90.0089908188479,179.76165777934887],[-59.186733033356234,181.4031651065061],[-46.44199794123375,175.85483894890115],[-2.2173195782933135,159.87553830810953],[25.800016523462943,143.6504840827448],[49.31963580690274,105.07166312498703],[78.16840457261242,62.74282118578947],[101.18106602379783,22.089329823791445],[102.86034913637593,12.608587409803135],[106.48682921540001,9.795318368247422],[111.88486753022949,11.335549166680153],[111.38703912746382,13.316366559524567],[117.88233617525361,9.544979697728081],[131.06504868212426,18.093321632386278],[134.86418028974856,46.228997903818936],[125.61254093648836,51.838592771178696],[92.14933594764364,34.66341530101761],[96.78840387561706,26.514540084974783],[96.18030129205852,3.499101348662748],[102.10149244241722,5.7575758694296155],[95.14303531217956,16.612841629927175],[100.47207119398229,15.38896675435285],[106.55546577968039,17.47923763852168],[111.1799137318219,33.30363823139032],[109.60921678212162,22.793570032563025],[97.88514955685434,14.865456130446319],[93.73150662825958,10.924390597827937],[98.18231406029031,2.075697476703226],[93.31880387245235,-8.465680171592567],[89.79352444037113,5.166679615239445],[94.4247377261031,8.696029288437103],[101.0611962356727,9.79102012463386],[114.89025999000114,11.093540056174106],[124.66572628372057,18.932851034174064],[149.74648880781876,45.29663518004213],[109.64604660811722,54.54589540523284],[135.5280334869916,83.04734045838404],[140.96695043311058,99.47090019401253],[138.39276866499358,110.57788316137419],[153.94989892329414,111.26732780110228],[163.80176931903372,99.1520340624163],[143.42245631067624,62.601799311768445],[134.82630531550922,38.95389035798564],[136.80322320190464,27.157398061883214],[112.35144173813615,24.014408703529625],[110.0219820361441,13.246945009902106],[110.37719791270013,13.774564333837816],[97.91234547707239,11.9855930301228],[74.44381622351966,10.854243952459683],[38.58444749963343,11.671040832615063],[-4.971669965142553,16.931065406659286],[-70.03540464458587,41.07656002796364],[-61.388500395764424,66.1276633411477],[-80.87350218205233,76.74923433677088],[-17.910928564757114,102.75438722151807],[-61.49647467138482,76.05743386650761],[-38.81101116722982,59.67428044877056],[-13.583055397121257,50.77931488743741],[20.66337700055226,26.581464782162925],[52.315885032381175,21.02227594679175],[74.65134905038565,28.634761908948917],[90.12152980439646,7.252422235510153],[111.81853674557203,8.229652910659524],[100.43828547392536,16.447101385214864],[98.96752445821687,31.39404978032576],[98.22578871863686,24.259547725947414],[71.95040609286139,0.7436684430734886],[75.35103460364701,-3.6352732376200265],[81.23421436862122,-2.4195147125791436],[91.7975279572317,10.201829741664824],[100.90858093122239,22.326060892429382],[111.32518431157115,28.70117321245573],[107.94627852466692,23.91375547791972],[104.04326803067408,21.4245181097383],[87.40145948185733,13.198768372616883],[81.69388811727435,14.147355632314884],[36.437340878090765,-8.195338854833494],[53.41889914829386,-4.057775990275559],[38.46195188660215,-7.084611044226563],[40.66189845868428,-7.3728051238332455],[32.52106850648215,-4.634984830193503],[26.1321573548812,-4.248992214731061],[54.80734186834343,2.7898800603080645],[63.538829754740505,3.38119683805985],[81.14040138417306,16.599753968916843],[79.89046865365799,19.93551331272056],[90.89501219172655,17.153360646600618],[85.80862922142876,16.513824873014983],[85.4092387409994,18.26353910510261],[77.74119106049147,-1.8451414681727556],[57.90391103189768,-6.268685407675093],[53.976030212303385,-5.914264235063911],[60.7719992314328,-1.689441131459489],[66.7459004291477,3.454895821374862],[65.9484460642912,10.051061689915628],[68.34808292776421,5.627633545979847],[67.13205759041887,5.998745866216268],[68.01264298853152,2.7999474930342103],[60.87414261283385,1.30459749014733],[61.47518813500949,0.7235309857541097],[49.52521156589444,-6.507090027030813],[33.63277928110233,-4.005044454258609],[40.73615103722352,-3.9305130577889713],[41.7978830248328,-8.873258966804201],[42.45205295093558,-4.027326029757205],[49.42508547497414,-6.843738516750136],[52.21188957905645,-3.2735218781563162],[66.64028022651416,5.850125778115171],[70.85648928027604,7.52730050090247],[77.19326188929858,9.942154730974949],[74.70977210926287,8.72145139576378],[76.32921863453055,9.382774346163842],[73.223343664455,12.93716608393629],[74.64260769789655,10.131248293039107],[52.03716065352273,-5.483327137012452],[38.68581903106042,-6.428227129070933],[46.45829261365577,-7.28382087493469],[46.556896727724734,-7.07173456515261],[62.32047896134253,5.689143726855036],[70.60825598705964,13.293690475778362],[81.65651419686316,23.516791577553818],[86.81475498279502,23.597530586550192],[89.81321814969971,25.08844048883418],[86.498229256674,24.5664579823233],[89.49949317865855,22.47210134755619],[83.5257431555928,10.64533868527053],[70.51011154915022,-5.905379925759803],[60.8636370523443,-4.765691095322836],[53.27154266485701,-11.434695411182474],[54.960671986593866,-4.413733649880442],[64.74287653878889,-4.085805733949428],[81.6666171542787,5.744582968017767],[82.35525910250772,10.462687585579033],[90.37483816677354,14.071012003467786],[89.60934167943833,10.357330339901068],[91.5725555075071,11.505112157710073],[98.40283360481533,15.706493501778368],[94.00722374865825,8.997640097552448],[78.2749206888264,1.049497575053806],[57.18793500179606,-8.790150835560098],[50.33176089128659,-5.435949157643563],[49.952649344947474,-10.535572625198142],[49.63316810074508,-6.405990379171158],[56.039884901386245,-14.863633075915914],[61.15100276675827,-14.790287560720344],[81.55388132813442,3.2317953418059915],[87.91531056389164,18.468087510869964],[98.1697084139251,18.176641678880742],[94.8258900507443,19.363906255130587],[110.28983648504084,26.787641928649236],[138.1492607709315,54.11343332885815],[136.47834269848738,68.95156623845344],[152.01984261319262,85.66284667378704],[169.60886826935774,93.4051682468147],[168.29783385434087,93.09236206742412],[154.6942836743974,85.80363715762815],[163.69313094737663,82.0609490587118],[163.5949214016856,63.6062174354895],[146.01983751220303,52.74574544968448],[114.41995005850265,20.60637593055378],[96.52295649224538,14.405777600545548],[103.1669784773452,2.8128188621271875],[94.2008956465994,0.6112669754804756],[96.30130588861653,46.92363032247624],[125.88439962154405,104.91429456325989],[115.83468362266956,190.27353782633463],[81.39432251766436,221.69369569590458],[67.60758810793413,237.20959144764709],[76.63765688671742,241.91126976891132],[74.38055773821236,215.01142754917714],[101.15610834656525,200.94955691971006],[107.3821086411698,141.80973553862327],[115.99716321774235,77.39244158637712],[114.20684971504454,33.01896474786565],[92.04769059334092,25.478497951521376],[97.43134522849402,29.046325570639965],[117.67349546827882,45.452940402796116],[133.19141371889668,72.58164061462992],[130.29311691416615,97.38281284287712],[163.99108449881317,104.02520420421729],[172.8286420399835,110.8998608510002],[159.19788356204322,107.69756858989399],[163.38831457466097,92.01352337223864],[136.21846335021314,66.44719509608149],[116.5420137796059,49.124553072919525],[92.84004994119982,19.19498359415047],[90.752055185632,26.088523165986885],[95.60124068906725,17.42492491612495],[86.9460579632464,7.505784558591927],[103.88682667898024,23.677336391295285],[111.00376523511272,8.447983608433333],[122.945204366859,-1.6239405990552314],[132.1960153075629,5.471166219565362],[150.44669633219019,8.153821630800849],[156.4351110277605,17.67087623198347],[149.80753139968135,12.530674723179118]],[[-113.11836448366654,-33.276722594302214],[-108.39884138379159,-28.448897267100847],[-109.08882358812713,-30.56946118237647],[-106.54157168768165,-17.842484289837444],[-110.11686542480459,-25.645735086270406],[-110.31608759846574,-27.072261270427475],[-113.26996923825749,-23.82238599573759],[-109.63143734546844,-22.006122972872163],[-112.36548501064635,-31.311514171280578],[-100.27307467869065,-27.128434477316887],[-106.84262367184971,-19.37161034288374],[-108.45348095441716,-26.88672733829185],[-105.25728683777567,-27.56228609906168],[-106.06603326487806,-29.822439233699697],[-105.91240042469354,-27.2844781434236],[-109.03212081617585,-29.63062504889581],[-110.0436539935933,-28.732088413872702],[-109.68847608179243,-24.10332937779276],[-114.98071768350712,-38.771770083469846],[-114.14356519152699,-31.673010953565267],[-108.13096674159954,-33.043625638389244],[-115.70953394556403,-30.097204442641214],[-113.53847383857294,-28.957284714065622],[-112.4144373346976,-28.113485887561637],[-108.12617829220972,-34.24781444382438],[-106.795706555724,-28.46018850460075],[-119.0176265036311,-28.3525245038785],[-122.36206458183403,-27.926673180980174],[-121.38470015530487,-32.79426200766056],[-122.25382784041511,-31.711899710070725],[-117.85658426498156,-25.41652001170337],[-117.09002239323098,-27.918623299952287],[-114.32528170344534,-21.849586870541543],[-118.46675917630284,-26.090019772836854],[-147.25188798155256,12.124101135148294],[-161.69164758278737,26.413830824086062],[-164.12206004140484,115.05649211118623],[-157.73546307976062,179.59540198661523],[-142.96815446544622,214.00701917049173],[-123.68571989143965,268.78920880258397],[-118.22610806336121,274.15440844092177],[-118.13275055233856,285.58865741878594],[-103.0757920194252,286.85324168973375],[-111.60768563351104,268.55058437835874],[-129.07500707657687,285.52223550921167],[-146.1758880664114,245.93903378546122],[-167.45617536072143,217.9199840830331],[-180.6742546764841,196.0813006959056],[-200.90408067055262,152.912430557275],[-195.54864117255948,100.28467335326525],[-193.5427107767149,56.00938181349136],[-189.2619171191966,25.32560928503767],[-189.53118964770204,15.753703779476155],[-199.21361211185985,11.569847914671982],[-208.02044008376038,30.72220315074685],[-202.69970275404614,46.901094001428646],[-209.42856725620692,65.99595664399908],[-211.68868846715782,89.54847859902361],[-229.15011775470072,86.29994284603595],[-237.64504358430264,103.41237407066274],[-244.48553278244736,111.45132929644546],[-244.46999999723158,107.69646316350031],[-246.42489749868173,108.45535995470163],[-258.0284292809886,109.16873520719037],[-236.51112841334668,111.3578889285717],[-228.24916666160124,96.05782591289051],[-225.82160225513024,73.1354189328481],[-221.51726936310268,76.11954368671718],[-188.9613108445792,44.17114070235732],[-181.57156391279096,30.29369377301998],[-180.05581493163072,25.638150240240407],[-211.66566883664683,15.412912679624014],[-156.55116501406258,-10.256516612070072],[-137.52118899807522,-21.42843163090913],[-144.564535651609,-20.939269702530623],[-139.40145457774423,-27.02633046770063],[-159.19729221924655,-21.819288870457285],[-168.61454270823475,2.4744258532292633],[-171.9699347517053,19.632964132886627],[-158.61637171891613,37.30270463034117],[-140.33415530187096,73.07521871005554],[-122.30793534216002,85.93513667559444],[-98.86114504456532,66.93744571452726],[-108.21101831034332,72.97643521113639],[-122.33514841869368,65.92400842413997],[-126.48474736165855,59.41593234165066],[-130.61173657880772,35.26798984806203],[-132.54659464915812,33.60409003949951],[-142.0977706729164,11.21064784610303],[-137.56117725756218,1.6690047653562488],[-127.64412375919397,-12.153865398153812],[-130.10937023615128,-18.281733721909177],[-128.42341038758462,-18.455177529320054],[-124.66767681290526,-20.11642788894585],[-131.82413129485212,-16.173309917273173],[-141.77141566468617,-0.9883994019348847],[-135.25362001759845,-9.696477407784982],[-115.87356382751835,0.45574234043897377],[-106.84019905145726,-6.132334738089412],[-76.22313926818072,6.627326962794086],[-74.02796811300266,-2.4077325237606146],[-61.649039633453754,-4.663424453018706],[-61.17294363156054,-9.198795189118869],[-63.262593773678645,-6.319306958546463],[-63.98368854599812,-8.471210826515971],[-85.6194639615876,-13.867334833752352],[-104.0084353222033,-1.1587801705362608],[-120.21333163000412,4.483685649306949],[-132.51153115362172,1.9026732410718523],[-144.51968695118717,-5.250742897111763],[-145.94154040158776,-5.671059609550298],[-146.4744932777586,0.2620190837035352],[-148.71413032334232,-3.0691424606725377],[-142.06675917854386,-4.054259126865304],[-146.21247944950255,1.3709308210062545],[-139.3289996503948,-19.035010423299127],[-139.19850534847996,-23.504359377178957],[-149.14814271160992,-20.510147446519113],[-115.20431815898843,-19.266739856136496],[-112.25359377835042,-14.300000020911398],[-113.14702280759292,-18.348880383911364],[-114.52062599621809,-28.999752863343815],[-108.76901268293597,-40.700372995485395],[-118.93688786606259,-44.55796719365162],[-122.23566362879336,-48.76556730884647],[-122.65555651826236,-47.70115007672075],[-112.75940641257756,-40.508004155862864],[-111.14094914528926,-24.97568487661124],[-119.53462059316388,-26.812608082094698],[-106.78090265358423,-34.23476552989689],[-128.17127191096836,-34.727862701279605],[-133.806480835892,-20.52908551587177],[-133.74375861973232,-23.153867234184304],[-140.1479793844274,-19.56984245164051],[-138.26963502892653,-14.063620790663663],[-134.8834143343405,-0.4658154483852286],[-123.10896374538561,11.4168610669102],[-94.99422374502137,56.01475737864473],[-79.2513318336853,139.4075311567916],[-86.54583862801547,180.77813704370737],[-66.54426845956141,221.0431158873165],[-60.64996849348461,221.50167387130386],[-30.889541750989224,255.1933114307227],[-52.24258463369324,238.06795337241635],[-68.3174087291543,195.92192456870157],[-56.37923714092551,206.70457097072176],[-124.66601105891374,130.79126629412156],[-149.8421616044949,82.58681192898825],[-155.52353681050351,31.752048351624353],[-159.08184190318195,-2.2638816791885574],[-136.535677108857,-18.293881911823178],[-148.3082631790208,-14.96501723542383],[-164.86913701402534,-8.459716778292659],[-189.30353684564977,21.998446979044616],[-215.06536670148267,69.18504972420544],[-210.78895293098708,113.53113394039144],[-202.88390857216706,146.46896739973226],[-176.3876188158941,172.42091963648102],[-148.99833298102044,171.0993756289795],[-125.33307287048541,171.8204529797631],[-155.08135905222025,162.07088564428693],[-158.30901668673926,155.173452984385],[-168.03082560388242,125.9248265889911],[-198.9723077378443,100.33723033540207],[-216.0924580109708,77.66472511371455],[-205.28598961032162,29.521141150796097],[-184.5130731626822,9.361530053586534],[-176.85489185601415,-6.5971426382640175],[-147.84736089610544,-6.054825132019687],[-130.35795237018192,-18.79824247013596],[-132.4773561830014,-16.06415256336811],[-155.76693458264458,-16.734516652090747],[-166.82998539081177,-13.013408967201485],[-169.4461549148869,-14.546459141861078],[-154.6120860502573,-2.6407420264855546],[-145.60773052944893,-4.359486961396442],[-148.6815589084892,7.626653697137272],[-149.91404418167895,11.17711799748804],[-150.20662057533298,26.239021125799354],[-152.21453467055017,27.378126381198626],[-158.35221298442605,39.33706138797868],[-146.70440354338865,12.773228560049233],[-147.64108181633225,11.1249248737264],[-146.64341395466835,6.7858355828109325],[-136.18896906938147,8.565056863573659],[-133.44727708017223,4.647719127634446],[-143.5843410499943,3.6344727683386964],[-135.67786202520574,-0.7362675266247152],[-139.6101217916389,0.9619367403757906],[-132.95271261391815,2.816592749831443],[-141.63851316970477,9.803620083601686],[-144.95946219631833,10.965953610965698],[-149.92528640572039,15.18231969732642],[-126.86689020876099,1.68537303944845],[-73.48517736322935,27.76545325198208],[-29.601647906398057,42.011207354924636],[-8.417963686693838,68.26978219744137],[18.320466029339173,92.64639459860723],[-29.909225556951924,94.2275007500657],[-49.7314987285485,70.3805861858682],[-38.55140523690807,56.84818336109663],[-59.55323487415956,28.95977912206945],[-81.35645183765405,14.312319614591956],[-120.45777124469964,-11.630949612552627],[-132.28046895716903,-20.629952289620064],[-133.13942809087956,-26.422822701390032],[-119.96316009103106,-23.505479635120878],[-113.12212251585663,-37.98397376165292],[-109.27107910288476,-40.85558241979527],[-106.22805242621178,-30.33391177156375],[-102.81814262222105,-6.316149929212656],[-120.69646264994617,25.35251956133675],[-122.72374928549459,49.59442885201918],[-150.27992296027463,66.59928995007806],[-156.70100780166007,81.96674383264633],[-148.8166372032323,65.4518008703792],[-104.0950948203648,50.94156251123911],[-119.79182107398475,43.401322145234985],[-105.60531861598491,4.143511854720259],[-99.33900496555339,-27.38567844769409],[-114.78099563517111,-10.02529127393018],[-106.11551184180684,-18.228481146403624],[-127.08775653843554,-21.868237647476803],[-124.1948139247491,-6.752067347636057],[-98.67678882138688,-8.337679647074197],[-109.8255611188473,-2.8999793095108544],[-69.2540636881194,-18.63056562312113],[-54.879995149002355,-25.019223406695005],[-83.73048164701788,-23.942681833154325],[-111.38848008987662,-21.070942021920132],[-132.1740581979111,-20.367846168581764],[-143.54456213823454,-27.030044015533804],[-135.98506808280294,-17.48690454214693],[-127.51811243197787,-12.256218227089676],[-118.68986775057675,-16.017630116142755],[-114.49714399288598,-25.511071602551056],[-98.13156547526114,-20.990830136456452],[-96.52555135824747,-30.287877244074934],[-94.63595467437949,-31.705493421029132],[-94.88808838231398,-19.65623402433198],[-86.08992338143457,-15.017429670836464],[-88.25366157604651,-10.102169202208415],[-93.79999702059399,-12.159618958880856],[-111.82426477372064,-10.696007854404115],[-118.31188655199276,-6.497893359415571],[-112.1472147110535,-8.769669622644528],[-117.89552728155257,-9.765403694089173],[-106.94838602201656,-9.502685930329676],[-101.85200814959359,-9.854681833205177],[-70.45691019988618,-17.508522074362304],[-63.572049628595096,-20.58985655381457],[-60.61990684160662,-21.661901750303286],[-70.95635018240466,-23.61520068124355],[-88.0093929306081,-14.03657485425299],[-96.06793891866556,-0.5335049996846237],[-101.09699776430705,-5.895541846111996],[-99.2992286914531,-10.216323595153654],[-96.52607853309672,-9.597325066577469],[-102.67061197104118,-10.676937065136258],[-103.63000462841455,-7.30203493402837],[-99.26903314509713,-3.0550327765500924],[-91.16097044136791,-3.3010001550826473],[-78.62266211980341,-9.929701605531932],[-70.77504960947181,-9.837852287532087],[-74.85184073110781,-6.426747635755419],[-83.8338803643802,-14.268937049711894],[-90.40056429397447,-7.569399541483108],[-90.9592991542408,-0.7613296715967408],[-98.47721419284073,-5.045789426613624],[-95.56164878510037,-4.99758391300054],[-96.79384742685221,-11.329143692804791],[-95.43710414112883,-15.909343034971016],[-96.35341313487692,-12.724176803611044],[-94.76595646122297,-11.725428032204036],[-91.53711341829182,-24.986390258279243],[-78.35316949570415,-19.78050859702671],[-83.18439015877141,-21.389610489346524],[-94.71821843532501,-22.702385936880887],[-90.81925177456168,-14.280512427781332],[-95.56604831127561,-15.833936611872105],[-88.75939435738735,-18.634764714126618],[-89.62401109525939,-19.94505841169746],[-89.89210202180107,-23.52835816885556],[-94.6132560908004,-14.468426011566066],[-103.65402752563114,-7.705502082138196],[-102.90034318726208,-14.253150655649279],[-91.31825184338248,-20.70076126996298],[-71.03107071271927,-20.33238521436283],[-69.63635278356435,-17.146574951078378],[-74.04264784062792,-10.722921088286512],[-94.96204492500738,-15.80548822163371],[-104.89674469191363,-9.577054690587033],[-118.19789436086319,5.473205238215428],[-129.02069619628037,18.072965561595424],[-134.881550122566,19.35697872447463],[-132.4031017895013,17.78764129846195],[-132.70543412025847,12.234826577834156],[-122.96877399156386,3.0701413482182716],[-120.68540154409516,-8.188186343839106],[-107.89064880453964,-25.809075695742536],[-87.47045810505409,-31.01075098600768],[-86.61733757209896,-33.6877701579391],[-96.31282570586535,-34.41172423371677],[-102.46680245401359,-31.0978042980571],[-105.56237306767719,-26.153933178145053],[-111.4892729281043,-20.83041266110274],[-110.9864111283236,-24.423801141534],[-122.46514982462804,-30.38475920728729],[-126.76072812645953,-31.773347382740212],[-134.23260971191138,-16.219965378865936],[-153.42787672584308,17.51510243160419],[-166.58892825178242,38.07502205814308],[-209.54952880371422,43.23632921910246],[-220.69751668658603,52.53121797644724],[-214.92248794456145,55.949156105582574],[-223.0286332680381,48.88487092010348],[-200.88735843505822,49.1727848870928],[-181.92704122385436,41.89417957046487],[-149.8864689382214,45.29938033782196],[-148.24270918757247,15.404868966444951],[-119.73980310344706,1.5750637903346387],[-111.24119823890294,-1.086200344961867],[-117.19706662291776,-0.24742517392962782],[-135.6055845426731,32.14401521103082],[-156.95714871379136,82.52093764060771],[-154.52301015891902,168.15145371081735],[-119.02467181087155,195.7987721950699],[-90.97101284074819,243.78428934737246],[-102.27767317433461,241.19633015672707],[-108.87253694494149,219.42803610717954],[-141.93476537585735,180.93056861725188],[-168.94080677387598,116.16342251931064],[-164.5974901908187,44.11021425559227],[-136.5163398161564,-3.6434741712570258],[-123.3607587255085,-13.540787683342728],[-133.2083351520992,-15.221078571745693],[-159.42491178562034,0.3338088330579012],[-160.37312234152887,43.33418848204644],[-194.30954471517924,64.30425346407094],[-213.07249703403386,80.55310780401157],[-199.80300877283588,79.67750659390003],[-202.1910839002549,70.82882006823161],[-199.73607028395054,57.99585704276967],[-183.2509431252705,35.9100976271684],[-147.61461277622726,4.434116096018897],[-117.24720163110271,-1.5430582941756938],[-119.16963681325012,-11.987140813604697],[-121.82788535142004,-7.962160101505106],[-132.78409460081645,-2.225900800440968],[-134.84286794922832,4.538995014389684],[-138.47520388362676,2.1665326650444285],[-140.14909905329324,4.529511386420381],[-159.58812647526736,-11.66470931675235],[-155.70952931565841,-15.154067968311779],[-170.70047610756217,-39.190129690296885],[-164.3959519403569,-28.13122811205335]],[[77.99944289848543,-124.25147521913698],[81.3695792925165,-116.52564042668337],[87.06651170771943,-127.07496271380205],[97.0724180901268,-125.21246950657974],[85.43835001544142,-135.73217251401206],[85.84345267769197,-129.51177562804935],[85.88357999637412,-132.0246888247226],[81.40213986800109,-127.80106940517692],[83.80791259636146,-119.30348476449831],[81.65820080190394,-122.41798450966792],[74.63920864738975,-121.1998588621259],[78.86934331581642,-131.95549612030186],[80.87863698062927,-113.60268474676786],[87.65919544776034,-110.10325533494893],[82.13050182018037,-126.3965698413947],[93.52425236855652,-127.45234262543886],[100.63409289731726,-126.46258609676147],[99.57317685927808,-128.3908350154545],[86.49905762270453,-127.17537330371738],[63.95574455863817,-131.8593751509402],[61.78694269868822,-126.68723489153979],[48.55873446960334,-132.66231672250717],[51.889214178422435,-131.18363280940503],[48.40236120393649,-135.02065236655403],[62.63656558053208,-140.27303536423688],[56.236755198943,-142.25415731028215],[61.45716054393506,-134.2146253756349],[64.64198507472895,-132.50976284062506],[62.01891680345318,-130.0806071702915],[79.14962665130156,-116.96495892093412],[88.70971023377297,-118.62375514427913],[76.8843640644211,-134.90894292752648],[71.02586657680445,-119.00517526198917],[61.83890923361196,-130.36699059431953],[67.07351263874784,-37.68936539976835],[31.91162870491098,78.9237877001051],[40.84276902837348,204.45776552052223],[58.06301589671591,308.0008367347174],[57.815730815790516,347.88971676437006],[54.10671103118125,384.8141361628044],[53.08370222657675,402.82518281815584],[38.48062459023174,413.6962970823656],[26.50349358105268,403.1981260629969],[18.684480023631636,396.59395542159643],[25.759800481743355,397.6053040511009],[30.162590058473484,372.44350039465735],[27.302170043488218,352.71233505316604],[53.49448920077134,315.6893916156248],[59.07999582859304,270.87779158623107],[75.08800675596763,214.4644714748522],[94.52286411835496,166.85589495496117],[87.96900475450684,129.53179955050484],[89.07362570951852,123.23700192201204],[103.98379859969634,124.98713085508166],[133.4498995945263,123.99449881499197],[165.91470480166447,151.39129355058083],[207.48459848405423,160.3383972937852],[252.6474247615854,181.70696532295608],[277.4032177588474,177.73833561552794],[294.03150769903516,186.07459390187216],[309.9345088638411,182.37238305244546],[318.88174107066357,185.54868189380522],[329.45629904354416,174.59839529054898],[316.93546180807414,174.34209045335786],[304.59600635119205,166.29961137941962],[311.4267706226814,174.92915122766715],[277.7130267974901,164.49813197237722],[260.2838303927615,164.1009301519789],[221.0009925578903,149.48585054640523],[178.44297637959937,117.34696739674177],[145.70380816831334,102.2679421104474],[92.76365048393518,59.862108204750825],[111.57129907388423,108.83288882715328],[86.40358339030001,94.35935310979391],[74.93536763242946,92.05196844611544],[82.02804635023324,90.33870329300964],[72.75943748693714,114.10166541644503],[64.91547176785639,118.55771580117846],[81.31916587059129,123.72743261608287],[80.36735979551202,128.5069944806254],[80.13532771009511,130.29936722079583],[67.03943537814757,140.04316099889263],[55.230211992492286,118.8608633646993],[50.498731190938656,121.17916318346442],[36.65127901551239,114.69053880417391],[43.13541365773483,115.7914861031087],[49.793343436445184,103.86066344589108],[65.29160813610486,97.56885362809828],[63.543637641471264,69.9795882282441],[62.1545224124593,70.60580523248154],[64.04390610488724,43.80891983407662],[59.63704392308637,45.3434360412042],[68.81956110374324,21.130807219972667],[77.23987434051253,25.146416933236765],[77.6695133534331,21.370562643471658],[79.62962028257027,10.16530107857352],[68.84251917268637,9.731983048442771],[78.975707285255,-21.66863404027424],[87.95398347961839,-51.822327518536554],[112.9406633724667,-90.74017438551618],[118.86887438534245,-126.53232098370813],[127.88855006480833,-136.51220256092142],[85.13783318029061,-152.8595064402864],[124.25562101061598,-139.44538155172063],[108.78451575526958,-133.4684457736755],[125.98422049592375,-105.36697628861839],[116.45285265547227,-77.51264067959096],[96.97623857176075,-47.544623147801985],[93.22119197147595,-34.33584178821866],[16.876164522236877,-2.7097386509284433],[72.11321796893617,25.932772688704745],[89.23547390538101,46.77181686431243],[90.0082833423038,69.5828916382934],[72.25547803631707,98.26173525147817],[102.13784219303955,60.23096998783535],[53.53544149827633,77.43749961254775],[35.64465746378812,36.078973869577226],[-11.161339995826324,13.916068877394537],[-44.53785226894843,-32.977185935863645],[8.97964252719737,-51.812659377720365],[46.26922425819123,-79.45866596101712],[82.08414563918285,-91.93123603678396],[68.43777772989091,-109.78509971023607],[-15.058688630234315,-130.1072713014811],[-33.59060568585892,-132.49617659846308],[0.8294196618043088,-118.41366540834088],[-20.171557558138886,-111.99685811020254],[-15.600105789069062,-88.57124696819005],[-11.775513385201748,-61.432498744771806],[-0.7042606378386722,-8.40063452693073],[8.062800436780492,28.696252486012895],[23.555923907123486,54.38866061609815],[30.81020389404324,80.36132741756637],[47.18186562964604,117.37630328608816],[53.87894216611903,110.42526812520566],[74.39002202882398,121.0157973651203],[73.31412126614521,155.92853241948194],[86.3339670184381,199.41717545644485],[99.1920163879297,249.85289894213565],[105.54912604925687,300.01449303785125],[131.06948161169532,334.8062030925089],[151.0024758112046,354.84290648714307],[161.54577297689457,348.10956707725313],[163.60470545107432,348.0136316530338],[156.73641287489465,330.01430589028655],[138.83104876320203,310.8937306513319],[114.97127701480395,253.76496734812247],[111.03518232737736,200.8412393663284],[206.04016639976066,76.07057599242535],[76.38676524117932,98.21693128357947],[71.5663489560203,77.1581613333343],[58.202257314948156,93.14994012841953],[23.803266232212422,118.96369948263487],[-23.350908341531863,149.8803893277667],[-55.33608788115214,190.88977408140158],[-109.64336034691553,259.8760705370554],[-150.02684203894182,287.84259780895286],[-171.11698913837256,285.5086404958487],[-192.16771381174317,287.9591846257613],[-205.40351527497234,281.0336663820128],[-204.3742762616979,276.9981237760454],[-199.6908385907144,285.6026874365664],[-171.74234512185484,263.3825163016552],[-139.77608369976474,244.915961485229],[-114.77139471233141,219.07951297586328],[-63.23740471499116,142.68576087031943],[-44.364803608394936,124.23776337058962],[41.88289409151787,20.97815501483501],[33.358928641115995,23.69871285858312],[51.02296958264287,6.2494015767731526],[51.964812904530845,6.890635273604744],[43.81882212291862,14.49900841241083],[42.76213508598312,36.70431454781624],[55.01441720368439,56.16426650517781],[41.99899471853678,70.5606132715867],[18.70463801697906,64.75849211893524],[4.785598225371018,43.93787270996086],[0.500150292362946,19.8550451680984],[3.3485219511254627,50.75730061156173],[11.860555009577183,46.98419232205492],[13.54747995473167,12.337851528180067],[29.975654038166795,0.9273328232659424],[31.009265621894883,27.293571955799848],[29.483532901435183,8.00535144545995],[11.38388445037151,23.554803301754532],[8.045542245360707,-10.687514518504372],[11.008343708992925,-36.73277904032477],[14.196441285601736,-55.12920510209324],[18.65150286735343,-29.11725858129762],[18.183287350358,-41.28423469416134],[32.3824881461004,-35.25149128872113],[44.90313985681178,-15.574120764997133],[66.70760702505618,29.618847892063627],[86.88214664980103,51.980216417288375],[103.06329501044218,71.30636304855159],[151.5319142285682,94.10923845313437],[201.07933566739393,103.61443583103073],[237.3711429413031,123.70102921612465],[216.7986761931105,129.42841909342837],[229.85396833014687,130.48498160121449],[187.6809849094824,118.00617163566335],[124.85976180345153,99.51802341514622],[109.03252907205723,111.03166324220604],[81.30198803423599,99.9246075724185],[34.32810858835069,89.72697655691059],[46.92488773645226,59.43498265474557],[37.85699805124375,36.948007942687354],[7.1984800844438155,53.9742926795783],[-31.374723088243456,66.73717096105952],[-62.945392893382405,51.79275279587682],[-119.63820737879513,61.30212232722897],[-203.8237486338066,75.1266144871912],[-227.26258302815177,71.69895213349264],[-262.0789953510143,81.54663177874],[-152.1747336982076,94.50808005400279],[-222.2046521522342,66.10769296270007],[-203.53717137554872,67.22790004632134],[-196.37047849697439,77.49013047962728],[-136.40581849711208,77.1386221072164],[-54.243029223949065,69.47967641265257],[16.460709445056068,58.61426157248172],[20.497251854418437,75.35225433469668],[29.43107486346662,61.15968925029051],[41.24363754866124,-6.963821207826413],[87.62641869945105,-60.85087598173436],[96.66078696133559,-71.61826039188736],[115.47844944003396,-125.84624919180828],[110.26208691874842,-123.95213763198944],[89.35996788126852,-125.64651051716078],[75.16009778588875,-94.4169852422441],[54.59460737904368,-45.916945509895754],[50.27763298149705,-1.3116645329960193],[30.098178901591325,20.34270691198776],[23.493194559876997,27.64981298127509],[-0.6771903969759023,15.579682465569249],[-13.436638373710252,-23.918166960924964],[-26.02191471073064,-94.62845802410698],[2.3957275184547484,-120.63515682500088],[-10.461072937032952,-118.66828321758135],[-26.775832416396952,-115.92751709404297],[-22.961848478179434,-107.36639804572246],[-32.01196336699178,-85.15633188441882],[-1.384352068828207,-60.498440394032286],[4.475664018710972,-35.06518751179749],[55.22520186342763,-9.261302898152849],[11.917069180347994,37.13533293403259],[44.94992608341795,21.89136026948404],[38.86666361687412,-4.852661725444932],[59.914006935644124,-41.39206383872863],[77.29662510625246,-96.12321283311746],[79.96416512865096,-98.51973698942447],[69.59044811519414,-101.66373893268792],[45.31345659867918,-84.90318958920113],[31.95802732492575,-57.29969478757425],[40.51401298779706,-17.116274330569013],[13.829707549735076,7.890896704862712],[14.974932709277255,16.871475444401426],[28.783175575938742,1.3706641473404488],[10.884528917274451,1.4715962782357792],[2.37939375394717,-20.218447294158295],[-8.223181833484432,-51.7998998793546],[-4.869956018222069,-78.74447489725594],[34.71258380252732,-77.61331676136444],[29.93285302730169,-85.31960651786892],[23.604430530184572,-82.69248904503365],[6.215980522039445,-79.20518773109745],[-3.0471568247680807,-50.19681574341075],[33.01413385606577,-25.614058420028755],[24.391528039792775,-5.781681880939459],[39.215316687070185,7.954318555772147],[31.242287502434692,9.730792392685089],[28.072057663529563,11.501975997914656],[18.480096349355335,14.024395331465826],[23.879264199041813,-23.401928826702147],[-3.1150467079789905,-83.1331754952688],[27.164896818881004,-101.32916735400863],[33.933143576443115,-96.6273308462869],[4.617469283879757,-88.67189292993521],[-2.8516762254026844,-52.30023628850711],[6.9348946876958735,-28.78191747697406],[23.27420110388067,-7.431604952396356],[28.780480120073207,6.944725385194829],[36.386079639144725,4.80320744534697],[26.993834302850587,-3.9745660884620975],[43.67875841920983,-14.623156171757387],[53.75176350063248,-53.34007905326553],[51.34830193084747,-105.43511295723965],[63.947396661170046,-97.03378113609097],[64.68586370245617,-111.51656784111401],[53.24162738629741,-104.48805857385469],[40.60959504055927,-99.01119623632337],[41.60344714105656,-75.09718380640174],[45.90940716558657,-50.34391191404484],[58.154249316304345,-12.696376344020337],[38.815223116970515,-3.280273298079237],[29.156886777893305,-5.579779285922655],[48.429278407745414,-15.087099072863452],[13.129897286068513,-25.51705648692132],[20.41466838549883,-65.86206577003338],[65.94937600089793,-103.84154480871894],[19.94615707360373,-129.88531000878515],[17.170963400937126,-134.4204724868165],[0.40116029802317144,-133.03934925033138],[4.779743526572872,-127.01570889221739],[7.28761634075471,-110.71939869945231],[15.190450122017069,-83.74628126949483],[8.011588418987117,-39.995819495627984],[11.421029308384846,-13.395531554803483],[20.661357119253523,-11.811921280408455],[20.906088222948256,9.093939460973957],[82.44783719793361,20.4070505132197],[162.80340920256708,28.8133237779316],[245.58294439517226,41.14944888903062],[293.38820422675207,67.68167320316309],[300.47422490568556,76.78879320580586],[292.61102291530574,67.2169763153446],[285.35040551269253,58.58862800772704],[255.16499903749695,36.170949266367984],[208.2105143836866,25.9391895980134],[147.40587146213943,10.92455250392186],[103.38334413108294,-25.23746645468634],[40.97395367332615,22.488089410622138],[20.534183100307132,54.88719034619817],[4.808901024130705,106.03526908581966],[23.269127303326172,161.77725712204938],[29.195710674571046,258.964135660333],[49.372734308145255,310.6842315943029],[59.231866305041194,335.79777303935435],[49.88160959007439,337.84830328736695],[51.13184725817064,316.08414450977307],[34.77181768356229,283.3429895347633],[29.60269130299025,204.47711918434436],[39.94105715806734,132.63350676814935],[53.10773613697825,82.52542337177374],[16.92005309857052,74.80674033293258],[28.911527707000005,63.03554009543416],[56.72658849856407,62.75871691860095],[164.39836860473076,66.50368296749298],[217.66887405984505,83.28023485975427],[264.2005258201964,101.85765076383734],[287.5443885126174,108.56239729252172],[283.9110381664692,97.29801501523241],[279.9558590548994,65.07894267257939],[254.09437098062324,21.32434504656203],[181.64916505271447,-31.07935061163232],[86.76717023541505,-52.86259587663233],[58.28433732853068,-34.71439719949399],[67.91847299178505,-23.247758979054993],[20.931327592774892,-18.85506011594032],[55.95786711373205,-41.36071461785559],[23.098592385314078,-51.96574811240521],[53.74004455375132,-80.99130746465471],[93.0422397550235,-118.4967014391658],[144.47637732194983,-127.95679648650139],[179.685763621403,-116.67104468761295],[171.99708303815225,-122.50139701407022]],[[-93.23522205838276,-152.57307369257353],[-101.29236991263065,-150.03130222233722],[-103.73320994339798,-154.1854374812449],[-103.40571894540545,-148.26402125006916],[-102.6857376324565,-147.49312205057754],[-104.85030044912145,-147.55609786526873],[-100.69530982403671,-149.27516615410934],[-94.56734005415171,-147.3816311876286],[-90.91332195447308,-149.387458155275],[-84.09989007348253,-152.2316225365213],[-88.01814400819205,-157.16295970080046],[-88.3007202939948,-156.16577365305443],[-90.13142013149036,-156.93532799615627],[-94.3595541349406,-154.72071309482112],[-97.8270688475489,-156.1290916934936],[-96.18828705269357,-161.2877807594557],[-91.00017712648486,-161.8427611172517],[-97.13225505034649,-150.27402503947883],[-103.65069078420379,-168.99821566961077],[-111.99273952360915,-155.21661247890597],[-115.98130751572393,-162.10894987307063],[-116.38048620956931,-155.55508941447454],[-117.08125163159087,-152.1315708612933],[-117.60499823776848,-160.5332228312991],[-112.22766824018714,-162.48900803084712],[-108.36344495208294,-156.75100473405746],[-118.55981342455289,-159.33937244916126],[-118.83573355770659,-156.09868196874402],[-121.39559294226001,-160.92724831497924],[-111.09046247181351,-166.32735290637243],[-103.48793381199721,-161.97401657503337],[-96.69570591075728,-161.1812311613529],[-98.28932085208157,-158.45646556474037],[-94.8145819861578,-153.54891665322998],[-98.16139546587124,-54.619975929864495],[-53.39380749814859,95.29685767213323],[-92.92380322482018,209.03007509653014],[-106.20171114754726,289.2507769056514],[-110.36774851620498,337.8263477818725],[-100.48709474304087,384.8080526374088],[-97.55407143461838,402.2527457152345],[-89.0255729657008,406.66913921143924],[-74.9621516647536,415.74053967706743],[-73.90327273186068,409.2578089365983],[-87.81728373428786,410.2011662033659],[-107.75204152305224,383.66004402986607],[-110.24941375767946,350.1095818518388],[-119.84887007778633,313.84194257671356],[-134.99742734646372,265.28987483802564],[-127.62301288136831,210.34344045838702],[-138.2887465102217,149.71586688536286],[-132.58766501094874,104.23175676802077],[-136.8572616479844,88.16917595120174],[-160.81906875214077,92.73076521439816],[-188.29754731639395,115.83004840628098],[-225.05751225774765,125.41321916323136],[-268.3445858779828,136.22497254930363],[-297.79784978034115,145.99785498013057],[-322.756622838871,129.23898042263056],[-353.1203813087668,142.36827761487268],[-357.48286722327,127.9245827701128],[-365.1747666975989,120.50014598718383],[-367.8554045344089,106.51510052116942],[-374.09226839375737,116.33068096158252],[-369.63687630227616,117.24215667856947],[-355.0280634036611,112.66993091587244],[-346.90833083230143,106.54683345125432],[-316.6523043439915,112.46984991743],[-272.27689908348543,97.61548062957036],[-229.24886641666768,104.83305970837137],[-208.27427347905922,96.6056038561727],[-211.94538029473313,99.0548445863044],[-158.06035902767138,70.96033438372433],[-136.62309461631492,54.82936765873194],[-119.30330853527892,59.40794602253288],[-113.86196006014313,70.98202076917505],[-125.21360491025229,75.80731884167017],[-134.0713992582513,88.84031875150004],[-133.0083258136213,111.50735755213145],[-129.47601482097156,123.07307806879226],[-123.72020728819092,119.59338484379077],[-101.76461030842796,136.1290945574226],[-74.17083095595058,113.93749982194856],[-69.75826052506608,121.02034559158835],[-81.7820935098323,116.39378654447228],[-83.55571697533765,121.7747050195544],[-87.15465442726747,113.03444477491564],[-69.11441419796898,120.92260399929978],[-79.30072662230168,104.77940565685208],[-58.42259221039194,87.03627280734031],[-60.564595661317185,62.978043882100565],[-82.89497916430355,20.441304318892094],[-96.32277416889605,-0.4501204105185934],[-78.20656395055187,24.09747218658083],[-87.20039687812209,6.7097052423566765],[-84.48971660207349,1.0590256910205653],[-55.12304184454774,9.1789872785439],[-35.09407600642112,-26.161414894242398],[8.751099821696016,-51.76303198264566],[-8.61785706456908,-88.66055465280806],[-23.097892388397213,-120.54588557087845],[-16.350490252316945,-145.50266591302216],[-17.42554411590868,-149.99632579721333],[-25.37088202987877,-141.42226883108515],[-14.243846007864818,-133.61017174913604],[-23.65274125173653,-122.53781744144044],[-40.70476562027977,-89.22392984497446],[-65.51813285789706,-51.70759348640104],[-79.67259347286574,-30.6481501132115],[-79.99566936320593,-21.665917135239965],[-88.03926985788229,0.5027433786972324],[-89.22482980463104,24.97116424344813],[-97.46722479643381,40.4798867314513],[-95.45248578704093,57.03760803355681],[-101.33021092726165,58.88403980603903],[-93.0195659256396,46.25894675024006],[-54.7388178360365,43.02667425877826],[-113.47323668810628,-1.0852607002688046],[-124.64531467897973,-48.501621233629066],[-142.51087230939947,-83.97794555073449],[-146.37440738296885,-119.93072572606297],[-166.14633497693723,-145.89714742556862],[-158.9809460117898,-176.79749245073356],[-153.4785474263964,-168.86913553866304],[-162.07813236218766,-173.3718633444878],[-158.92260772736955,-156.27733212035196],[-135.86583081668635,-147.57179541213918],[-131.68292357526633,-106.66632463558108],[-130.82406950876003,-77.78819279045706],[-108.10204833742245,-53.21565457169936],[-91.58888978599737,2.049887086484091],[-67.31134263276891,48.565764214603746],[-69.7416316077838,65.26383513558324],[-67.92652219712681,70.43804746586716],[-65.33672445815046,93.05007472452064],[-79.54154267985894,52.74481749238237],[-64.21235872646452,97.06059649608494],[-56.80703498034745,131.3669795699417],[-3.1806890732784723,241.99310604167],[-15.055768018607068,304.5603264895966],[-13.530592220828908,333.19053894793876],[-13.459704787122746,357.3153855396214],[-2.0802777487779167,359.6433445965612],[-3.0006587195600787,353.4710197156452],[-10.853556964035306,341.14060622929117],[-19.020385977912838,324.9808508086652],[-36.36012362348538,230.7718049406319],[-65.36835024817549,182.27440273763182],[-88.17351074466467,142.6270083741249],[-105.80147493777753,85.79072666089883],[-95.76619009651688,75.34991679267125],[-96.34453184633162,83.69515042520266],[-113.62262866902432,94.22421610247045],[-139.78552732176416,117.4406679525656],[-175.58256763615896,182.20479868497728],[-204.41801013951635,227.02179906616811],[-238.39704792009826,260.00481232413995],[-230.43161719472783,266.2623875410643],[-230.76561293305542,278.86423429905096],[-223.40405892326243,264.4702629401412],[-232.05346424715276,255.88114688298276],[-251.26246525603335,240.5371120225086],[-251.73663421352936,220.091940260495],[-232.3801071914427,215.06246253683378],[-215.6190548738274,188.58995077006057],[-195.9000012014949,109.6968681775054],[-113.94688587247725,109.73313001793883],[-116.50732979806384,48.833145350559676],[-98.55288654071569,24.779487170752077],[-88.8467214503442,15.088329343617715],[-91.64443993538634,14.786008179080227],[-104.88116459907081,24.88854897895203],[-89.74439663983765,29.18073578754081],[-94.85594758153172,7.731713991336619],[-85.73465947709371,-5.242393184424714],[-52.55753021689975,1.809637243554448],[-72.18357428480522,36.50893785765845],[-64.52549743458223,12.93834433157781],[-58.01594917500233,67.09291658974166],[-61.90254971284617,51.33909076707016],[-84.97794506305809,24.336977655065425],[-70.24190002190915,6.1157029075093305],[-73.98669590269822,-9.023504127455226],[-71.85163451686026,4.844757605397149],[-69.12581066785776,5.108456301096112],[-76.83654922124629,-14.590732249834787],[-88.02544448548997,-18.562749005605724],[-79.58781842445842,-19.613954643352713],[-81.17701266130632,-26.501860061596403],[-93.77666046450474,-38.2050125183531],[-89.73451474890919,-26.222738152543116],[-74.61636825535072,-18.206079883110306],[-54.46754399351403,17.93778275204363],[-25.498349338017533,45.69127300044158],[34.529302923956834,81.65824375900218],[117.08538820487001,98.83068515067441],[167.2243987025322,106.08452504893773],[202.89553294761402,126.29528324819057],[-2.130215990994543,116.35100633342688],[57.43976881218276,98.7388100372865],[99.011467758957,111.82182124182975],[74.34788133046254,101.30403281355893],[8.473180878506412,86.6424917357491],[-41.06221275954147,60.96601507565708],[-55.19553777441763,59.31778042355211],[-77.6984350159783,45.736446709946335],[-78.30717698239937,37.109095199394915],[-82.43961483143596,31.086163988374437],[-82.98639285376879,49.83661675107692],[-122.97047381579864,24.90064918138978],[-163.6963875210634,49.58424495963902],[-221.02982618950952,62.67027611363267],[-237.8369550413376,69.59836025222478],[-259.3941103100182,69.30726746562402],[-266.8841921387945,76.42969764804866],[-252.64056128475437,69.37382810872703],[-211.95480375348978,63.81420011301259],[-202.6482717205825,77.32047698761505],[-164.43161024723304,60.881854564291075],[-113.14062789503544,46.58348360793423],[-72.532724876222,59.319740984465284],[-50.41986423623621,75.22907171899578],[-65.79587002989922,39.75808499148866],[-40.59778678783624,-12.646760597141451],[-46.07143388599661,-73.48841873152458],[-62.07820509458281,-86.05946140746244],[-16.372734928736236,-140.51870451483205],[-0.7835202244401671,-150.7625421013886],[-18.45395501801329,-138.52402150195576],[-39.53150763404233,-94.76193457639101],[-49.97106434445567,-46.25103504942035],[-57.200314903344065,-17.072196219301304],[-57.48871409533041,22.368607638771323],[-60.747163021894494,40.183786531426676],[-62.80041981550232,23.17073726476906],[-85.1484724193661,-21.36528313075644],[-103.14773907316601,-106.3562755022532],[-118.62646882439373,-146.41127545239306],[-122.40648043979957,-147.19532264629493],[-115.8596843566105,-131.10602999113803],[-101.62658013635121,-118.38178569764591],[-94.86851669786546,-83.99798153924269],[-80.54191019042679,-62.70416195729206],[-76.6081711555936,-32.958406691940354],[-69.97410789069812,1.2451667023326536],[-59.196321905493505,19.05843214717936],[-57.79370181089172,11.235218083397058],[-38.332244427865135,-8.439763279809881],[-29.52296256569815,-47.18818797552399],[-21.39666412856019,-115.9883905023571],[-41.34976542766839,-113.92220488861597],[-13.708890004405418,-113.47641466064078],[-20.278813250558017,-86.07679621566717],[-31.32767578429224,-56.55443634803294],[-60.08532674517363,-22.642583803346383],[-58.57838479324437,10.486083759641701],[-58.51499844416526,18.00117606274341],[-54.95475661178489,18.66937571691176],[-58.30286829346505,9.621390645549013],[-66.28722728373725,-13.579564375308678],[-78.70235849592001,-49.12278641494322],[-91.35406075792088,-76.8319448554364],[-97.44643670055689,-90.89807167267202],[-84.85969005804179,-91.18713315372588],[-74.69663884213264,-90.54510498808816],[-65.55694841100808,-78.83750890817112],[-61.54943137515926,-53.8983602203092],[-57.73871950857654,-23.5483029784034],[-53.03815168321182,-14.296496730892727],[-62.227212889630266,-5.14156805734126],[-41.26492947300892,8.863392824143261],[-42.314391887615216,7.389198261200249],[-40.1534506070098,5.214733710841983],[-47.549558407358234,-27.48003994953308],[-63.06015044546291,-86.10611092206011],[-87.62039644428916,-109.66451370532218],[-78.2576586462664,-107.34789206945902],[-74.76544709285548,-93.05338905148074],[-63.41049913133742,-63.721860914551826],[-66.0696612588485,-41.39011270096637],[-56.32480624276013,-10.124358075029932],[-55.95750115239605,-3.3812198883118754],[-52.08889904169848,-5.352941223890639],[-54.09727797929082,-5.50132135985632],[-69.80004340291589,-32.77706049427229],[-66.21391841574098,-75.92127685072342],[-55.10727905408004,-102.73688994366375],[-49.677930954732915,-123.66205261729215],[-57.35057012010543,-122.62778615369575],[-59.09331011683139,-114.63576883037695],[-57.54981649576439,-110.75359651601786],[-44.31164563651981,-76.97419942357521],[-48.38160141070307,-52.48665951693965],[-76.32619237826708,-14.886660268798778],[-79.6526494239319,-6.506778907830267],[-85.56066100362068,-7.414865909708283],[-74.01525834892533,-12.726159029097403],[-73.03397746627189,-32.13876475587347],[-95.23375237291714,-76.79288251973333],[-107.90036733216641,-133.93354675023807],[-103.87878288927288,-150.19060935835296],[-86.86638874681455,-156.28365090823263],[-80.21435378005805,-148.05920295002443],[-86.74384074123805,-127.6064713629637],[-81.35551526762379,-113.23763837938179],[-89.83166927328637,-76.9042522312127],[-88.82893651141171,-44.18586630497816],[-72.20755871446607,-25.48868656096056],[-87.30471551855078,-20.457120149666025],[-77.90210940194805,4.067769087784882],[-164.27161429477889,1.1581149789528808],[-238.9644088962222,-2.476765212024702],[-307.2989800299932,-0.3363534508960129],[-329.3586587018682,14.691671960811163],[-332.6851316252292,23.062242679475958],[-337.0534552041936,15.603571093344726],[-315.0244832807002,7.353369237011293],[-275.7736019342827,-3.353987113023436],[-217.46653778642712,7.826927195597705],[-148.0016742482884,2.9230201799585984],[-80.48166077486218,21.109620052905825],[-50.28571671501106,40.39701980941197],[-48.969079507213564,56.03458908052255],[-51.99073752825893,111.46336157176768],[-81.62012524973363,175.4019677509025],[-95.48944636888416,261.6380385545963],[-96.89534640980861,316.5597413972524],[-87.21028737189874,334.1711609692958],[-86.5831523395596,335.53646448102336],[-85.62198514956344,331.8557255181404],[-95.8929039651058,288.6999112723339],[-103.92893497438081,205.38015795865203],[-92.16530664034349,120.80650456465003],[-79.23453576064378,64.93566137551124],[-64.39807199782132,64.5440168287264],[-76.56060264714893,60.806164210094835],[-117.46605079748866,43.65820669205425],[-190.44413320298491,35.61308087430268],[-291.33587362939005,52.53253848480949],[-320.7518121685989,67.82283548078249],[-322.73397793174917,65.27725691672754],[-314.5992699251154,59.309526083469905],[-310.8220797787458,27.790666323489518],[-282.9993561960233,-17.005831918410536],[-213.1500819857148,-67.9098059879276],[-127.34357883915311,-74.74239304803643],[-59.17203882023654,-32.468594541591415],[-80.34798938230222,-26.956846606216118],[-88.43098561441411,-13.399643488848255],[-98.36086015695537,-26.148658123039468],[-92.84000880360941,-38.71114444982004],[-101.56925598143033,-39.08132700350325],[-120.00695853136887,-52.37840969792137],[-106.3112457314046,-38.962926690492964],[-84.64693924638294,-47.78571416377861],[-91.56193994596856,-50.31269562234388]],[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],[[35.44955625623993,-323.8238322786443],[69.13366422714557,-297.248735089958],[63.80204905838491,-305.1531572199849],[59.08799706540253,-306.6425770669962],[56.98688045289589,-314.588526662674],[47.727345474526146,-310.0888655280777],[47.25575800986837,-315.12200485119536],[43.0688574144076,-319.6221478870351],[38.444493376752234,-314.0704922160537],[36.257943852941025,-318.5401668182127],[31.146425119192713,-324.6566245819163],[31.40753457017047,-322.1692075345004],[40.7252813261473,-324.4146729447673],[46.39952870103434,-325.95850286622317],[37.266634668656934,-329.5125577514393],[52.49909496417047,-327.4312439395562],[58.93846622703825,-323.08377736202715],[62.438805477503934,-325.72794921395734],[67.77355467758173,-320.4884664816882],[72.8840121631502,-312.6422791236373],[77.23502416765109,-321.224459736275],[69.06976864443345,-315.2644514608054],[64.76626070142322,-319.26437463060483],[60.62168127106372,-323.5474452115568],[59.02387574080933,-319.87954431446815],[63.54454345889326,-319.4463650884518],[66.68194378728231,-317.4206110940953],[71.69783478097247,-317.8950760184024],[62.56525618154626,-321.1888560490719],[58.775030190273924,-326.1962078686108],[51.26402628154153,-324.3427908291917],[43.95232529639895,-332.6491169663724],[38.88147101892821,-333.8084306224515],[33.38008240057741,-328.4947341399129],[30.074312214827046,-336.6472550382657],[36.32143819480325,-338.5109306901403],[38.733504493859414,-349.8132472627452],[40.74127146011733,-359.43270117827524],[43.84623711820598,-355.4917402877028],[46.0566246126366,-365.59102372067014],[34.12636935460989,-369.67718753079794],[30.33455962323535,-374.3284747731411],[36.677665024400085,-367.4232312071915],[40.58267971419298,-369.62891317456933],[38.331171231431654,-359.3730411784784],[38.85080641495881,-354.3048450178874],[35.36420677949127,-355.0788904413371],[39.00326072029975,-354.07001778069684],[33.94940229237932,-352.04433838835143],[43.19199377446432,-354.83240150874155],[51.16132408253986,-352.53136915007485],[46.786883484438476,-338.4799069257963],[49.184538450305354,-341.5337206792692],[47.707587107947006,-339.9926383577458],[40.768820062440454,-327.1840885688074],[52.09589828414914,-332.32329977846325],[47.37583914926472,-331.5730617775383],[51.36117872345619,-323.5896101133135],[51.605089996090896,-339.65075228144633],[44.877804940323585,-332.69535245711063],[43.159815521588484,-331.32858814889505],[41.59841365587749,-337.2334957121345],[42.941821123652744,-341.27488866015926],[46.58134461329041,-343.238184808797],[46.675390257917684,-341.01883397814254],[46.761287638779436,-337.69305775732073],[43.1075266928317,-343.78134692462254],[44.2051267212081,-333.338770858775],[42.57841234018724,-332.7538573270431],[47.03522087520628,-334.55050634398356],[37.380590654236585,-329.6112669107588],[7.726739816561917,-323.7506960106],[45.534143897213426,-337.3129290329173],[42.565224814957105,-335.4287961587363],[42.78198230422913,-344.8392258236265],[47.40272414705805,-341.09352327576744],[45.08275768923511,-341.35147825926674],[38.125279403560285,-339.25532454605127],[47.249304619835584,-350.1391233611057],[48.47902649906814,-351.71437000022866],[50.73941720443872,-348.59265825861735],[49.28673842712226,-352.1337657903314],[49.36065043920814,-357.0921500669192],[48.73697472782624,-355.3393506143499],[40.94942584738408,-359.07465960848845],[38.6630292192458,-352.42462628083103],[34.92949349716673,-349.6710195135788],[43.35104166270787,-349.5473515361673],[33.48439219877082,-344.9875025958353],[41.47941308070381,-340.0906992498619],[38.13878467078018,-337.69603643595815],[36.367288869743675,-336.5493899757731],[32.89357083711786,-344.7271105891622],[38.11520787056236,-342.7169317956584],[35.77811778766613,-343.6543559502934],[37.75747770677674,-336.34579760128224],[29.238146468691752,-339.4780317375569],[20.879667386369988,-331.1879804270757],[16.087855810508586,-332.2060608491121],[10.718376395916493,-316.29766701959284],[6.313386647775246,-312.34644528880904],[3.1279832327877557,-317.7393252620366],[10.215666625829726,-315.4451998631869],[11.774319482554915,-318.72728378333],[7.830649249757926,-318.3485031110704],[17.747653100903563,-328.0834345079479],[16.861171308345092,-326.6166205854306],[23.09853426051893,-335.941491741032],[21.82583205993376,-337.08001803800676],[31.944031015666496,-345.7092417364356],[36.23445516108427,-345.1862877433732],[40.19755835743956,-344.9270632393907],[49.30098045600403,-348.27607064914923],[55.61036695879068,-348.7876190231916],[51.57324347124995,-339.87438522337106],[56.36781486464395,-343.81987324770273],[58.01571436185304,-348.64830552297644],[55.96117045852134,-339.4757220238977],[74.80623420921722,-342.1353993290611],[77.08668782143127,-329.06526716616577],[88.12618700180178,-323.94604596517866],[87.56447280424419,-319.1079468261048],[100.27968259697985,-315.3603014754823],[109.59246133261854,-295.7576630096961],[110.63664696939463,-287.3397316014691],[119.23946321082235,-286.50929102164855],[118.18934191642796,-303.2686520747775],[112.13671389489696,-308.35175463202427],[96.83611309974208,-319.5412480996645],[89.79029956344277,-322.9015124972841],[79.84202692912311,-321.6046167767182],[83.64094192353463,-331.3470969108066],[78.98681978164353,-332.9270318793425],[80.98983502787394,-334.4732737131035],[75.25154822180514,-335.92290039934664],[70.45931656686173,-333.19379478625615],[68.89588827928867,-339.43325852847806],[63.49419664330139,-347.6144233336486],[47.858125123188074,-349.91588426784847],[22.944438252114196,-338.3169162328412],[34.45260229442181,-343.3175322554896],[27.66004727825566,-351.5002404728382],[17.488327529398248,-352.63592942907997],[12.020458573109067,-347.94554802506286],[7.3238021508470865,-347.3488961143694],[11.84062785252911,-342.9990113909396],[14.011489103777194,-348.83344178729726],[24.3067203496596,-354.35432825096655],[29.698808351207845,-337.43626426991204],[39.293432354277115,-338.31285897962425],[48.26189414791486,-342.52206873010107],[58.21661944475261,-350.61030931630125],[63.76762507691046,-351.03600954568435],[67.69138980237074,-357.5913153881479],[67.72933041965837,-354.0456875487098],[68.66240767286308,-354.91287078515643],[63.35649414918237,-368.9818117657485],[51.79933766228851,-372.3107043695436],[51.81406814331814,-377.74729245729964],[51.30826680998496,-378.93842995296177],[41.55107217130245,-383.2252472664409],[50.857664533059676,-373.72615501933774],[54.94953300645767,-372.26578073158316],[56.0198934212126,-362.48330933706234],[54.82495095479322,-355.4720802994668],[58.201326753245326,-351.34034987480663],[63.106428203299856,-349.65289523882507],[66.84309229035966,-339.500476463788],[65.11003319768224,-334.88119464751094],[60.5168097556699,-340.3879676237723],[50.23069922844172,-341.0931449300308],[50.105069417079676,-345.2794139389605],[45.92729408034597,-342.25030337603584],[43.67809084292571,-342.3738500158952],[41.09441801864989,-345.60002434190585],[41.98449178501687,-353.3805855976377],[43.08493835570005,-346.68321463228995],[42.81161983882373,-349.8450268870822],[34.46190633082847,-353.4834799293576],[33.609990729767446,-351.5170579100783],[29.966053310431448,-346.2319395715374],[19.103980095751808,-345.3099081962073],[20.733286930898544,-347.5150838228126],[24.772362632824866,-346.4652665742444],[24.242228873634076,-338.5473418182512],[31.7584295662424,-345.45695587339105],[27.759642892927445,-349.1257584400147],[30.22491312192733,-345.3487950438912],[27.213814945774857,-346.29148852316496],[14.99423166711074,-347.4518540346878],[16.25535076964502,-344.93246626814755],[16.754557376410503,-342.4801675248234],[14.722121732319465,-332.63179022640793],[18.713426892192956,-334.3531397984259],[18.53048857725048,-332.30459918070926],[20.95797295426462,-337.4506607725018],[32.91306193156561,-339.4992119651487],[43.77394497317039,-344.86036459872594],[59.547112272014374,-335.8543946457994],[74.00664093377424,-329.10972507283554],[96.59842994415544,-323.8872288952721],[104.12220474132403,-323.5653353020049],[105.57512745542999,-323.83447836788037],[70.98960050300985,-324.1141918003798],[53.498135123640225,-328.264101890985],[45.225117118270305,-333.6519467451102],[58.373899369074934,-330.8090539834684],[63.542732841003954,-322.36248256821796],[83.19619133703526,-328.4174954698037],[102.71717602653905,-329.1690054134813],[106.42034026575936,-315.5944129971997],[112.39580196389329,-312.2348930102488],[113.96984601774182,-310.62364656766044],[103.33741240381016,-316.52991175227874],[95.1380239944225,-308.93540278407863],[80.1461278476437,-313.78736821275857],[81.28506640548028,-329.831054108716],[60.047419763029325,-322.4859984015038],[63.00151384853609,-322.908032029277],[61.9434328270612,-334.07585993745465],[60.6733671495756,-326.62218051931393],[65.98889674022496,-324.1388473851712],[60.14848009393245,-326.4378190216926],[83.25234337066956,-308.5424552995239],[87.41758872439516,-297.4268948254951],[81.54933438798378,-300.9837430174748],[104.00039704761355,-277.1713088582917],[111.82958306823173,-269.281268878535],[111.6423119400227,-275.7802620436596],[96.63557593117497,-282.0010720484414],[82.34249512758981,-282.8419654845061],[73.27686454329341,-284.5719502938482],[65.9323417886539,-283.94607570108656],[68.58057825922856,-282.42244203657833],[80.60737951166124,-277.05612377147713],[74.86561679396573,-264.0813780388378],[89.42017442125547,-259.26772538931573],[92.33007783113044,-248.71079923651268],[80.39850075637742,-252.30088088196908],[71.43869634999021,-255.22716381992586],[62.01407130278358,-253.29030971327938],[48.736115662259294,-257.57657658358835],[46.11073484447695,-256.75001566835726],[39.30542002847528,-259.5752494265498],[34.87691391546423,-253.60214454126321],[30.439985673541855,-252.46360813331853],[34.24009249083201,-255.7229697688233],[38.49025160104827,-242.89650312210722],[34.286743893596054,-241.5220417146586],[39.4919229953191,-231.21423473834602],[46.76963509963525,-231.22239230740115],[60.77231947879841,-220.80071955159303],[61.13190851476202,-221.95188313172162],[61.30739232188637,-223.03704800763512],[47.67576505623117,-215.9800383482443],[42.22668799444108,-219.23336189029862],[37.658700043638476,-222.54588926118242],[36.81477726855201,-219.5792029785706],[39.934586032465006,-212.97388189780554],[45.62473450463051,-207.12113334382752],[43.48447960553165,-206.14915716365465],[38.091151450571715,-206.54117367612002],[36.531335427101226,-205.5316096475907],[33.84238692470694,-208.28284902711403],[26.286467270457024,-209.82024174695778],[20.464009295653568,-210.50262116550198],[24.771088483734275,-217.90028983562013],[27.97655941005155,-210.41695418673908],[24.468439382690008,-210.5115089169302],[26.971171047141524,-212.70047396845223],[29.1911304774203,-213.00123605363342],[35.826057954510475,-215.90540866926017],[42.00176926657082,-211.51707254004805],[50.485006477251204,-209.33604507782388],[63.55758064918393,-204.59715343058554],[70.255157914503,-199.81433627117087],[70.70895452183089,-207.9611800231428],[58.2675188713913,-220.3072003112302],[48.008106940462085,-229.22665748965096],[31.21528651892612,-231.37267359740395],[22.382844856877114,-233.91743572452015],[21.205844804415847,-234.2384253564129],[21.061028062035746,-236.29068318065333],[32.14567830234756,-235.58172679542736],[51.25206113853676,-239.23387617391904],[64.38013672687475,-234.8657939362265],[71.15641457414756,-242.23540686504577],[52.82549943058416,-233.77208535449336],[47.39249180262351,-241.72370355071052],[31.214394476461166,-245.96249162507956],[22.808482495767976,-251.24967324168665],[17.20585922226826,-254.82680934819166],[19.604542053389878,-255.5018685080961],[25.608152714297375,-254.31764468545612],[26.52847016713315,-261.8227672681219],[29.659001677144715,-257.4936309697109],[40.53164087053415,-259.2007665407691],[43.850157058086666,-257.34150860554314],[57.21978618658369,-258.47110838806316],[73.35986632245374,-256.8058709221368],[91.68560760918638,-263.5534400683807],[89.21725741362161,-261.95842062003044],[91.82823588962708,-263.3541639041073],[81.16080301387399,-278.5224712385659],[68.19594477211677,-284.2425660298129],[55.3031966769405,-289.74481469548573],[46.66908789202171,-296.0766084766466],[44.14620442509704,-299.03655310260615],[49.65778130396279,-296.0525880285762],[54.48183605359941,-294.2549708166507],[75.41625079378332,-292.58608458347976],[77.37317221025364,-294.20673598311646],[63.42732437405198,-288.2724831324366],[61.87291552025209,-298.13440248423694],[53.373748427282976,-297.220933606726],[39.76145654952518,-297.9972110936419],[37.53519418204701,-294.7301583358583],[31.253271118411135,-298.66115615135834],[31.977046730764982,-298.64013003179707],[26.35126719716925,-300.1335139926417],[31.65072208212098,-295.73556572557777],[27.386427558261175,-296.9436337967502],[26.86860013224532,-299.4542605443569],[32.174685275219645,-303.6000496877763],[33.42398385713,-308.12867881658747],[38.30211205266926,-307.453466209972],[42.72916833162401,-307.14682010192246],[41.861218412168455,-310.67418305201795],[41.52924767220861,-306.761114910159],[46.4225517632882,-298.63231393616707],[47.390040691940726,-292.16154436865077],[40.12722651129343,-292.9837168670065],[36.13933818783926,-288.0956627047565],[34.96242909492628,-290.2223439696836],[30.85589530610025,-295.1358475323018],[35.397773880232535,-298.8947505309874],[38.82242686734219,-289.8378290357132],[37.90855348938044,-292.35582703645036],[29.81214239247447,-281.46617702018534],[26.09201400596271,-283.8729634677727],[22.89186298788718,-290.7723643326847],[27.40938559183371,-283.49629810765305],[33.69057446316606,-296.72127779002653],[42.02941315639259,-298.2476672147179],[53.123387746784715,-310.509797038691],[39.09248239571673,-324.9711649229704],[41.46695720346975,-322.9044933095207],[44.30444485033445,-335.6707269610108],[45.23617034380277,-336.2316356913675],[47.031622084478954,-338.3184527383112],[46.00748124607833,-342.81397530545007],[49.329210070874296,-340.5534988717561],[44.387576587142235,-366.8495984721635],[59.70184379217187,-368.9226612488126],[63.83700998423171,-392.6295882146758],[66.6868409259348,-396.61012840420256]],[[-52.75682391862517,-324.2615193869159],[-44.59943188541604,-319.22665465768205],[-49.941676875171595,-311.5959479035148],[-51.62157716051985,-314.9509968482623],[-60.887538207651346,-321.21995030055496],[-67.42069954564533,-315.58379737910957],[-70.44895842725361,-320.39968425378936],[-76.66896178126171,-320.694741498222],[-71.67882708494619,-316.4384942425784],[-58.88724841863473,-317.33816998962027],[-58.058233917580196,-322.75575014284505],[-50.70215324514095,-322.9157514966446],[-60.94890001066392,-327.5143825448413],[-66.4615912248903,-331.1288861229666],[-73.60983287175009,-326.93856327455046],[-93.34160361111071,-327.77432081684424],[-79.16996640204098,-326.2204195104214],[-79.4695976729356,-327.1893870201616],[-72.02608087217686,-326.33352690169795],[-60.02731906161375,-323.73530558909806],[-51.58670343025119,-330.47137295772643],[-45.38155999950118,-328.0684880395046],[-43.040412840431145,-331.20312075538504],[-39.52281337984732,-328.1237788908352],[-40.08700039630105,-327.4360376520315],[-40.09858336542237,-326.2082225880347],[-49.01046429322827,-330.8530587904876],[-53.77516523690434,-334.92054484487187],[-63.74435314637941,-332.4530681501959],[-70.96359444909632,-333.0874701460191],[-74.96952270895423,-335.13425847023154],[-84.71797584893511,-334.43935898234383],[-88.71063964422245,-333.51680658517023],[-86.94873843397926,-330.39332169302725],[-84.87620671420234,-333.7213439304787],[-89.64282364958416,-340.4631360856746],[-82.25705725010357,-339.81015569765566],[-79.75462571800688,-348.392877468601],[-79.65043769517831,-347.20717203253923],[-77.60738256874492,-353.2172969030619],[-78.30648718437055,-357.7901898170928],[-79.0775745774439,-367.1128955088184],[-80.66731120523775,-361.0840208708198],[-79.31508280549264,-363.09738180346994],[-75.79226582930602,-348.8761183030672],[-68.68866866783253,-343.41955273794497],[-67.99127096637136,-350.1328756339258],[-67.4896662089667,-348.7702346934766],[-68.72515947775588,-348.93637896566725],[-59.263320451758034,-349.60853279235005],[-60.194303166390284,-352.51435348549785],[-58.022208357585555,-342.664057235206],[-56.023257913834925,-338.73130333781046],[-55.414030429390436,-344.60434749580327],[-61.850202223487656,-328.1600961116932],[-49.822514661387515,-333.2773921084138],[-51.28758358503461,-340.52182513788296],[-51.027079949314896,-332.8243535756203],[-52.62624133211733,-345.1341536864402],[-50.027755004507924,-344.78345832484],[-55.72209680650616,-342.29588976965374],[-58.923918350707936,-346.3790626268635],[-56.49294769978724,-350.53334781847445],[-48.8722935090629,-354.24636694266326],[-51.65524455078764,-351.3818197758417],[-51.06866954185739,-350.3317667716285],[-53.033787286501365,-355.6077174077773],[-55.67207367608819,-342.9861096513623],[-51.48936694932257,-340.75633052938156],[-56.175679660156106,-336.4771620712198],[-65.04469919988787,-333.19099232682106],[-96.70071188284203,-326.42830003795825],[-55.3807270186,-337.935577924977],[-58.26248274155239,-339.3987677436726],[-60.443970501179365,-342.9861780178603],[-54.76019954292627,-338.9624967498305],[-57.00545133772067,-336.63755590722417],[-62.03567542804956,-345.00148588325715],[-58.68380450913634,-347.3010059781768],[-54.687589759647665,-349.5743224746643],[-51.21755947618698,-349.9765010636911],[-52.964089002047785,-348.59748893450796],[-52.22199866762793,-355.0795684845293],[-56.901483260921,-353.92819772213204],[-63.02089943264747,-357.74502442200105],[-66.29984170595304,-355.4916602584881],[-68.36542208179861,-354.50608342308306],[-62.583738068148136,-342.5987175218288],[-74.9123419935678,-338.568251259513],[-71.37386397786906,-331.42002893445306],[-75.73463232932136,-329.80396786432516],[-76.67157531526868,-331.0312349169004],[-77.4585754223175,-334.8788894059286],[-74.07024429058333,-336.46198244381276],[-74.68474819220046,-334.4735130012357],[-75.70840201745659,-329.7100599119825],[-81.68138327900556,-330.69316623700183],[-85.82287364925264,-325.93636030288553],[-86.90382182233168,-326.11172873745306],[-94.40190470205425,-320.27824155031067],[-98.20500034979796,-316.549892219258],[-96.73474799612654,-308.5970402624275],[-100.53216815559335,-319.4664528063065],[-99.55140168735647,-322.1856648551882],[-91.37046654745325,-316.25094582511997],[-91.26777580267037,-320.5991800414579],[-87.83000942230308,-323.93291549904234],[-89.53549049617595,-327.6154899169678],[-82.63822396743274,-330.49431570505294],[-84.11818683701472,-338.15110516909226],[-77.0031282041897,-338.24914069308693],[-68.89517272886167,-343.83874389303287],[-63.4244174748593,-345.7717234161146],[-50.07871413900148,-343.3976344237667],[-51.91074839499356,-342.12088407886813],[-43.481872486455984,-343.95099566352326],[-44.23083854693124,-346.61053393984116],[-37.52540029684678,-340.9523420663155],[-16.10946214410575,-342.28162049639104],[-19.206683848588682,-338.4483461790178],[-5.454531254059702,-338.3034073738959],[-8.452456816717074,-336.5115993957254],[5.924085607493566,-323.49468293614643],[11.849061212572053,-312.74179121174086],[12.773263074021486,-305.70299045292745],[17.822906067832378,-307.8292479727445],[22.78344849175437,-320.86622455006477],[17.026552547343158,-327.99958721825715],[3.2771445138345143,-329.9393068234881],[-1.2207062865432476,-334.57374924354485],[-13.602051995492957,-333.5762202051973],[-11.323544393813052,-341.14881272036905],[-14.447701358667757,-338.00456022796754],[-21.210492675944522,-343.79086931533107],[-24.14552313427089,-346.7717979477293],[-29.265607589035653,-336.7707820325734],[-34.412583542167226,-344.4413259260293],[-41.288667817310284,-352.2183013809281],[-53.548816639603956,-349.5811671774559],[-72.44087847157545,-345.6101913459614],[-69.17671232384419,-340.12944390903476],[-73.11994544935169,-347.8659401989578],[-70.5507567863641,-351.37585748962886],[-70.09741684803157,-345.89733849001254],[-67.19424151309295,-343.92212542217385],[-67.37535409617965,-338.5398764193735],[-62.55277569005557,-347.9715367880042],[-51.830559477279394,-353.0941858777999],[-61.704239043178404,-336.57801027336313],[-75.63505736880916,-338.4677807420403],[-77.25208843503708,-344.34847897565135],[-74.24543255033575,-350.5679957769223],[-71.12547980894891,-358.71201300224914],[-58.85375493078931,-362.0995650377549],[-51.1604817404226,-356.30510490220854],[-43.56214215835382,-356.874301470712],[-40.51263113340934,-373.9772155240046],[-42.274497126747974,-377.67397594633326],[-24.386593591116934,-383.586623656915],[-26.21727966234147,-382.83345099591725],[-33.31647017539575,-382.91195489671213],[-28.76399240744746,-375.9383204086055],[-29.9604991726427,-379.21771346022183],[-30.463733105793892,-366.93268335271387],[-28.89405258554973,-364.75795874465894],[-41.89462103321546,-363.84167875200956],[-43.2029151103884,-362.80451605478265],[-57.95081143776508,-358.5196467030495],[-61.00367256597082,-345.0461651211158],[-68.08720441227206,-347.0322901925374],[-69.03487917950451,-347.56266419370695],[-78.20087944824013,-347.170615455424],[-80.5227801558159,-349.99652408320435],[-82.1501310419535,-350.6200430280312],[-80.96528045504851,-348.5842808354704],[-81.63687334063275,-356.68874407877115],[-86.72341501293681,-347.61008835427197],[-84.23223247615203,-350.35213362666514],[-83.37338759591171,-347.8169719838379],[-73.75573707137528,-345.6772694410687],[-73.76917287218987,-339.5425569240231],[-69.15645172897678,-346.0101039541714],[-70.50126653543384,-343.9339527491811],[-71.58912157748989,-341.42656688723855],[-67.120785457171,-340.98346726552745],[-64.50589391651908,-345.7569398800724],[-68.86901334952245,-344.25494343444655],[-62.77731420739019,-343.6622863553637],[-71.91816266524484,-341.5080042061396],[-70.347358687157,-337.34042216083503],[-72.70080839420507,-338.46512015396377],[-81.34047072177736,-342.9723227466077],[-88.181089230662,-333.57463483764195],[-89.78998432215201,-334.49197537894656],[-110.49147020192038,-332.0111076320944],[-119.58302298371632,-330.7550259617567],[-118.91876044498719,-331.7981880622277],[-111.36182262925496,-330.42897460150243],[-98.10991229100188,-330.3244644637823],[-90.84935272431886,-329.0952223939514],[-67.94715725761608,-333.08934120006165],[-57.10953130149585,-334.1443157696907],[-41.33401013755321,-341.9167780120699],[-48.487677505932254,-336.88864801049976],[-44.50098802809907,-338.41384670857576],[-53.36198725945138,-339.26492934332043],[-49.76865749828971,-335.7611532027804],[-44.39324900916574,-329.29966657924933],[-39.67117800848803,-340.6540417215924],[-36.1757738938968,-341.38235338739946],[-45.800184286486115,-335.6570800416348],[-60.93735680932383,-333.7884881917795],[-69.52009380385402,-329.67404121390814],[-75.53535596104086,-317.74521737122734],[-76.79308491927759,-310.2463543374056],[-74.60245268844892,-316.55611088035107],[-62.12703920164165,-321.0246159795995],[-56.53744067602588,-325.8457270017341],[-46.936154107825814,-328.1692203362046],[-52.101848364966486,-341.2993078007871],[-69.72379427296289,-325.448846037522],[-86.77385927824582,-317.674199320591],[-103.82370226643081,-314.1899760734127],[-112.57723390086954,-300.0499327358666],[-104.5027267583946,-301.975074976358],[-108.32596812710301,-300.97661699607215],[-74.4297572158685,-298.1576570792172],[-63.285677585899066,-294.70201435880676],[-53.54415390774062,-298.0658899322782],[-37.63359782957616,-300.46200254789244],[-35.71729833414366,-300.5058718841724],[-35.22140442766664,-305.6004459872927],[-36.56110236212237,-303.85419700975694],[-28.773863887287064,-301.2410373933883],[-26.69491350812683,-301.039553318245],[-34.371232211675704,-287.958863976816],[-39.27934339159896,-274.8976967835199],[-47.29086873203221,-271.8191029528127],[-60.83633122484787,-260.28243835848616],[-65.0741554130446,-257.3405743769847],[-65.4828020348034,-249.76044217263416],[-68.90220999456773,-248.1181133124685],[-53.590043615858406,-258.0950225401964],[-42.975302738390894,-261.77992541006165],[-37.788421778122824,-256.35302835111156],[-42.42720131575629,-253.76520791780968],[-50.609442093163864,-254.20393016596222],[-56.00388212877351,-241.7342534985902],[-63.90641934017157,-232.36718437844092],[-67.58133574714992,-227.87270288581476],[-59.57260189317054,-228.20608578264705],[-45.34554494691099,-229.76260002712218],[-38.53328087023931,-230.27816583135927],[-33.15168270142635,-233.91747152778294],[-34.146588588984514,-225.64242664162316],[-34.04131088660364,-226.83692472351333],[-34.73517243027288,-226.76432960393538],[-35.96817900543124,-226.12392182603128],[-40.2264589301538,-224.96572580268912],[-47.03401948816804,-224.29649978404427],[-56.198911411680456,-219.33936086479605],[-59.87115259792995,-212.1305280593417],[-61.0852441928169,-209.33180677286407],[-60.03329302332389,-205.34803784117776],[-62.79736454534424,-209.643247605194],[-55.08956794922926,-205.5844778502037],[-45.08602081290019,-215.53595402837948],[-37.71430457965005,-209.49084145103825],[-32.57863457516078,-209.64311956494896],[-38.199889780431135,-213.44972020435046],[-46.45874513253,-215.08815210173566],[-49.38680101033867,-216.85121363519806],[-66.5593878128679,-213.44724655190794],[-71.6616459185098,-209.84070936390935],[-78.4562789795396,-218.34444498658593],[-65.35290805590148,-217.6342708304154],[-50.43230601201884,-223.68956935848428],[-38.81528804264707,-226.91545523202444],[-28.930451678272448,-234.853808745768],[-34.31992643058038,-235.38675994592222],[-33.20934292297221,-237.57367180183178],[-34.049073521081255,-237.51790776501218],[-34.61033773806378,-238.12750291234238],[-36.10947333151586,-236.0456622013985],[-39.45259805916038,-237.7354722859343],[-49.98950972159952,-236.50684984339932],[-67.91757682702598,-229.80579216130866],[-71.9910136498599,-229.55807752783835],[-71.02398093694097,-241.00424159436352],[-69.84849869080921,-246.67835221503924],[-64.65602856403132,-253.88137165014814],[-53.75119291386875,-257.3520932625521],[-43.34663051161664,-258.2366086620982],[-36.40873881509572,-253.96073091079597],[-40.29129519057858,-259.9743386796831],[-47.61804949028675,-263.53434189461086],[-58.07258977509855,-261.41837894067385],[-69.14631837677797,-262.5005479945762],[-81.5318704770126,-267.4387591605864],[-72.42661143306339,-279.029456569815],[-46.927319897140535,-283.33905711247326],[-33.36764312456029,-296.3462909410039],[-28.78346152120315,-295.27377977139054],[-20.050179661083575,-295.412545729625],[-17.248969349573372,-294.9034560419516],[-19.385933784818064,-300.2117169973376],[-21.710979341969278,-300.5435717113629],[-29.370505440554496,-301.56518946142296],[-34.5265416857377,-302.7107846237019],[-40.349677547649264,-299.4561761887553],[-48.53481500197,-300.9974453268344],[-53.8453356742462,-303.1841539722234],[-71.01917570422984,-294.09287390717543],[-79.6736243039415,-299.41607528754344],[-79.9126784966727,-295.69468481418835],[-88.38525461525984,-297.61636277574075],[-83.91021590100854,-298.3953157133524],[-78.120635663945,-299.69150521719723],[-74.35072177108754,-298.03144696669847],[-70.90692198986147,-296.2842744086439],[-70.56703764582028,-292.3726695829141],[-78.00629811302764,-293.29723011185934],[-83.62539911417821,-294.33209521868275],[-76.16799038862149,-294.36855291437644],[-75.54767348254569,-301.0141194372544],[-64.56136701847083,-303.6856783687083],[-51.48186560467707,-302.59342655222804],[-39.621846307960595,-303.7464837259315],[-46.96961885146476,-302.9721475954759],[-37.913570549611336,-298.38906302800115],[-34.73194762871941,-290.36531398254874],[-38.39753457183565,-298.3297631899902],[-40.021417927308505,-292.90271300373684],[-36.17991428687071,-291.9847187540595],[-37.287299539604646,-297.81266288500024],[-38.23423176848769,-297.67310039197685],[-36.55059852281698,-292.70376992248976],[-33.618366583950376,-296.4305017014992],[-39.053091004453336,-291.7119194895183],[-38.17420159725367,-292.9543295905655],[-37.02179534639515,-296.3569346244076],[-34.44203666281442,-288.2691519469563],[-30.90607781122219,-293.0513954343569],[-28.74275753169718,-294.19428516953235],[-24.604029201673256,-299.8525281159532],[-41.57143245836096,-311.35806231140384],[-51.11834753050283,-312.89918545389503],[-53.93166073544029,-325.38582738136415],[-50.984523977158574,-332.35575497195464],[-46.71987823750976,-339.35414189289804],[-54.24552682074278,-351.7271446001279],[-54.87388423147081,-357.1262433614736],[-55.602423166789436,-383.9704149939016],[-42.708751476538566,-396.1774364383141],[-44.72197849315984,-414.8817163215758],[-43.69412129403804,-419.9542512859356]],[[13.58868562008081,-499.6529303426331],[89.15630443449675,-452.53477686310384],[90.19262242010245,-503.08911646033243],[87.29460979514931,-502.904407826192],[77.78306539530968,-520.8018235992242],[66.04318467515031,-488.737902845609],[48.86758982741742,-510.0382626851243],[38.51901758238023,-494.5597056838759],[23.50830168069399,-494.1663445788686],[21.92739882821479,-504.6488958628862],[12.808991458909304,-484.4029220778548],[21.817473961556516,-486.53905173132625],[22.856039592586285,-507.0255730191586],[28.810661789181495,-503.92829199041034],[26.423903154965046,-515.9451491254401],[48.02468877240824,-509.92958476164813],[64.80176815884113,-507.0865176362904],[75.51913717222101,-502.65916193006524],[94.0676741773915,-502.8275786184977],[107.7534966435905,-482.30337157274425],[111.11686715538019,-513.5588318207878],[104.28408012465843,-509.331435155702],[96.6292264474398,-509.4884168212859],[84.8228849042498,-502.3363935168916],[87.78459523881929,-499.45717455148906],[93.49079763089003,-493.2447549456433],[100.3542909763338,-492.3818710056072],[101.99546141006556,-496.45242578457317],[89.33154118613652,-495.5058738364452],[72.60219098972743,-520.7662996688202],[61.16052514597345,-503.68366430505785],[41.202536165518154,-503.2881916746252],[29.166069035741998,-522.5124870573544],[29.36969726564746,-504.15892584967105],[18.77185961112025,-514.6780920599797],[16.12302614991654,-515.8818013868541],[19.98828658605339,-526.7704060545351],[18.83415435142956,-533.3390842198419],[17.340793394707134,-530.8277597324192],[18.621209905406886,-547.3125756179772],[19.147843050189408,-537.6501911139851],[16.171955273362755,-553.0136611941007],[26.157514980994165,-534.3536073608045],[30.666368050903202,-537.9569598144483],[25.935272054013467,-540.7738195387419],[26.974411192141588,-523.4759577075242],[25.16717835153247,-533.6068335553889],[32.554377396135465,-530.2054871596833],[27.777475762772383,-526.0769963660744],[39.60017116714994,-534.6624205003621],[46.01425502675738,-533.6843373083179],[51.039344815049844,-533.8639319580934],[50.8372163649849,-534.5327398450877],[49.70870567216048,-545.4296984988514],[45.345306697241995,-509.05856245446796],[56.312180844702084,-525.4451042137953],[61.49992664727813,-510.82012172167344],[65.64540555418307,-502.1186310634505],[56.82343104644326,-544.7563537167559],[60.10545014674608,-507.0697650411928],[62.927186545532436,-502.39917019704694],[59.08016142246436,-508.85288115423464],[56.814115685871116,-523.8454559300247],[61.52435310117312,-510.70422967998695],[59.66818445571084,-518.4646181622618],[62.08244848772961,-508.64249434387875],[55.56812399188402,-519.8169787286145],[60.410622646387424,-503.0066170535374],[55.5265490417039,-521.0791798819707],[56.876258758663084,-528.4564403297253],[50.11419335858193,-518.2521865591702],[17.74699327679366,-528.5228671706332],[51.86741371720632,-522.0070929203832],[47.484477830921264,-528.3003516134129],[43.94171591085728,-540.8268168966201],[46.38260348163385,-543.1923928097985],[46.8448078287621,-548.7099312330738],[48.69850574317991,-539.7306213661718],[43.51169444333948,-549.3899551892691],[46.92988669982685,-535.275709163567],[48.06272112478132,-536.1463855986674],[46.70905532032384,-533.1585939284607],[50.06791342647375,-550.5235666929229],[50.038828810462064,-537.8906063475184],[43.21585411002718,-526.1512069544867],[39.58728982942591,-522.9683584723841],[37.83334166990653,-536.0683934053889],[38.37743712329075,-527.8527916326404],[20.840730632270947,-530.8866639099507],[22.103363620273967,-527.0174540449207],[19.72879990373349,-523.1230219083004],[13.4089100978847,-528.6034557628801],[10.771373450586907,-521.2714331785206],[7.0011669694467855,-543.1233957375496],[10.12701900672812,-534.7485414220848],[9.57497712421366,-524.4899308645398],[3.624218408973661,-528.8267411358427],[0.10061001155804661,-519.8965800481683],[5.228858426953934,-528.3035085579842],[-2.4036888465475386,-508.9796836549351],[-8.282939651560696,-520.7859657101333],[-8.069381537609843,-508.3784145478726],[-10.083849958107976,-500.82460394156374],[-7.600113188840737,-504.4012946627163],[-6.959863269980133,-496.74205936669546],[-5.866052399450382,-494.59016838364414],[1.6708003992192744,-506.8627130239229],[-4.763768867743011,-514.6570260029459],[5.630757569855632,-520.210358895587],[9.691065939330656,-524.0453824418605],[19.520034667524897,-514.5721950233183],[21.40033214701009,-527.6823734769746],[33.291147518872776,-534.0702854272015],[44.87622019070625,-523.7215022707412],[53.71313786152916,-523.9975979284013],[59.37678364226906,-529.5549044419955],[64.52364993157221,-528.2239993859589],[68.74165095046067,-512.843687293575],[90.515531229119,-527.6615620767386],[90.29794899074341,-514.4912173023758],[109.09850643699133,-510.44696788722536],[103.74747823239187,-494.85881827130834],[120.73707934031569,-497.0993670204406],[131.04844857548676,-487.6809358012473],[143.9105788887174,-491.0636826362602],[149.25032832909426,-475.4648835751859],[152.87700570785438,-511.6743421807978],[145.46524272208,-492.52459746417935],[123.99922704516734,-501.39220598981933],[119.32173055794067,-497.38485778286395],[110.94447060094308,-500.2350162343329],[106.71343747284135,-498.85880552654135],[102.3988267463265,-519.9803733081343],[97.7170743296897,-516.2780937927098],[87.37252921657011,-531.5789593917173],[76.48818415917276,-540.989192073931],[71.82044297236712,-554.9079704494857],[59.403446648615386,-565.7419905701961],[44.052182020157375,-560.7604730641422],[26.58752665670295,-518.5195682353266],[22.041232237206373,-541.694504176472],[10.74526022286068,-527.1378214708564],[7.4891716065166065,-522.6190044543267],[-0.017823694868980056,-514.7513746424409],[-4.049307736201058,-516.4639180597221],[-12.686362020151819,-518.3548156931231],[-5.054968273459963,-517.9726578142531],[6.967479839874045,-522.2209226574046],[9.110874264911445,-511.0580056950116],[8.70074783454595,-526.1446953307163],[26.43762891130848,-514.4574378715205],[44.128722594114606,-525.2300426002628],[57.56719553947903,-531.7649716710315],[75.54680963187548,-533.5166422046459],[90.7890770108869,-545.9597612045736],[97.05726859651418,-519.6815213697553],[107.33287599138748,-558.6056992460847],[106.32798697155317,-593.8831647308759],[127.72779079437197,-598.5843124294599],[125.56149619105145,-606.9145026655472],[130.05905982099915,-597.6645058844585],[135.40032007603116,-583.4031362059945],[125.66120694507396,-591.4861537871052],[123.65047530795482,-572.5438752321836],[119.3504415112414,-544.2713645978163],[115.67979910838085,-534.713134480794],[110.7598857209639,-530.914987980633],[96.88523328612064,-520.4920258086623],[82.57860126336698,-518.9088614422637],[71.72662902682043,-537.0972147463694],[64.15840759561127,-526.4015444211991],[50.94024691676236,-524.6291080781848],[42.17631287308393,-531.7711978184902],[35.67674499387874,-526.0456737513866],[33.34384334572519,-531.0204037570826],[30.687067831470472,-547.7649316986642],[22.32891056443509,-532.5557170243897],[23.90967434985157,-547.5633945065692],[15.12662747034301,-533.6222086094576],[12.125011488604628,-550.8956919060273],[3.946233330289033,-531.696457561322],[-1.207362837089022,-538.9125865924159],[8.992517432388809,-531.4681091525379],[3.7007664830928206,-533.0318341982231],[13.438130773480339,-526.0604752422764],[14.685337664962049,-529.8801438306391],[7.78116821264166,-533.459296393526],[10.956082136071927,-525.5967891471012],[3.8546830200680233,-529.6398281312205],[-5.404429364096245,-528.708913437094],[-0.5852169766495763,-523.0594113048636],[-2.2906839558852425,-541.7857740262066],[8.247381756414029,-531.9486135937666],[18.213400365958364,-546.2773336078851],[26.122780228720444,-553.2306323290735],[37.485115240619166,-516.8483548802576],[57.05994692199465,-521.2435876533942],[76.2548372503311,-565.6793701753925],[100.93668599343209,-523.3069226942598],[124.43752493439541,-499.2176777924949],[151.93967733195745,-498.61327806330746],[155.1713901496346,-500.7963958158399],[139.89721545463647,-514.0935068024837],[87.12050624127488,-527.3834778575365],[81.47461777556737,-518.2762801342911],[74.60472050647962,-519.7291579250799],[95.01705793607078,-509.06264788548515],[125.26959088720992,-501.40136365012063],[162.52537280470688,-502.09484461243505],[188.4077047651499,-473.42070486255466],[202.2451057125612,-468.5233051770763],[193.2122757466093,-476.4286174004018],[170.202236177994,-485.5316608500659],[139.38335396935122,-484.4886634787687],[116.96318417805128,-483.27507121066014],[100.15851663025626,-503.64904364894164],[92.79694455319395,-518.8240204602048],[69.36706387128777,-508.6775436863593],[74.50742576530183,-506.0902925070444],[65.70427784288677,-508.9694014079712],[74.73525050237129,-512.9518752273613],[84.21108154748435,-521.2378624338164],[83.19746784709457,-522.8195315180669],[113.75477454101804,-496.9328359937888],[138.09309306355158,-480.82639932409825],[138.0218373656819,-503.0436441364177],[171.8403183584452,-446.0286233093325],[180.28572514066832,-424.48526130634355],[174.2793629136561,-437.58463359252846],[150.20191699999384,-459.3387371275586],[124.87504590212734,-443.6582814603405],[105.3017830715865,-426.0828666485784],[100.24208649466459,-424.0360540375664],[118.15409659460352,-419.99777150278123],[129.91869407926032,-405.3370833529923],[138.83829641431805,-379.03979427114086],[151.7034565412012,-384.28574637996985],[150.28511443047648,-373.6645352156761],[122.96599987246066,-371.03053061960486],[99.27997929694004,-374.18322506100685],[81.39625858337558,-389.3819572915329],[64.0063085409181,-394.520578308475],[56.70833223161969,-390.77057561908873],[44.17970536391874,-389.24646915037215],[34.200321298201516,-377.4557387653126],[34.73344259563578,-377.2590861381052],[41.51552079934231,-393.0121874605645],[54.05767934301821,-390.30126140375467],[55.01593097842442,-386.2582670821639],[65.36522900170121,-370.11725925584255],[84.52442172204337,-387.47818012581024],[103.60479677597266,-375.9970852130631],[106.37673496185289,-377.77079012947024],[97.35341302815675,-357.3203076797697],[82.81517338633472,-339.49987773843054],[70.93759606979285,-339.83281052230166],[66.9224855639028,-333.03735968814306],[70.66291055336364,-315.50884937733133],[73.50634923302897,-308.3413654002834],[78.64010971962864,-311.2764628406576],[72.78116721269112,-304.6294566517132],[55.60246352254126,-306.79308809648865],[48.439223576917016,-306.309207694227],[40.04720378045181,-317.83383305939174],[30.076347288237116,-313.33553519398595],[28.39080458891374,-317.15152358677983],[23.077878499385747,-323.82345239565655],[21.95004590562644,-317.90496521380373],[22.082884170792227,-315.93964682952003],[26.373963146102483,-326.8666832974726],[31.501722863817236,-330.7415495366474],[44.0941554625806,-325.71579035559193],[55.49533470543258,-328.3645130784421],[72.87369669037571,-311.8016385262879],[94.20768571658505,-315.3533110055929],[119.36035899105605,-303.6909279129201],[113.7773877299237,-312.1782587045316],[88.36925833373948,-315.8713866902913],[66.04120092072066,-335.3864331272914],[50.582016943184215,-339.3525743702214],[29.124614720808154,-360.92364575041233],[24.973008272660707,-374.24543975003564],[28.8598078114926,-372.6040567601449],[42.858372695594085,-357.755241541194],[77.5110761234535,-396.33894666566266],[100.80686740240264,-399.5160205643988],[101.05248862876806,-393.50902666583113],[77.14086924882304,-397.4432108245676],[57.974566279673525,-389.9987912828915],[40.82460930007676,-404.9766131127244],[28.59826717633848,-390.5965621471396],[18.923494831050107,-400.4241955620024],[16.254670377827438,-407.4805012447407],[25.832026394177547,-390.22897664745324],[22.94752854833621,-402.414960550293],[28.563678027812898,-400.2380947531349],[39.3860673634025,-399.75245376622456],[56.75121194527105,-388.22099383420755],[68.97272885163403,-398.00193569428166],[97.87506571704216,-389.92373311041774],[126.9849780759996,-387.89705968461476],[143.7284941737558,-403.2073438560667],[139.21569264443275,-404.97266980504014],[123.74010889632552,-429.5215658169802],[101.17720670048806,-448.45536323100305],[83.69913243645823,-441.8132624312375],[63.56744014633432,-450.2164947324003],[66.24522747291019,-461.62292799751094],[65.89177206213998,-463.1523234935365],[90.137568166054,-461.91470636451663],[110.62497557107997,-462.92796357098587],[126.83828169471622,-445.50529243922165],[104.72688129662947,-475.4923666838241],[83.09560290296037,-464.42577189759436],[63.01375248346267,-478.19841945965663],[43.55626765627824,-464.6275614444071],[32.285008684203035,-472.51933661573],[26.82977306488749,-466.1940774227868],[24.971187175130808,-474.0461415759323],[15.256959883169998,-472.4343647041386],[22.627381433244068,-453.9194080383818],[15.705146103970833,-454.44540457228914],[14.433680206477447,-471.69200288039747],[23.14624358149979,-462.01778041316936],[27.63446537803179,-467.4391193685466],[35.929643658532655,-474.7151743167349],[43.38247608949939,-487.8794911764144],[50.94831778323521,-479.28932376746684],[53.6738880878321,-481.21008101714506],[58.97578482916526,-451.8722316841379],[60.47332776023029,-442.7656116125056],[55.8061786398157,-460.30475245606567],[47.503158744431744,-460.6153320084493],[45.4072180287078,-472.1866635737788],[43.750609314689314,-480.4564502677738],[47.55265028996723,-475.44201944562167],[49.14541337930848,-458.05639912141964],[50.69419874608809,-465.3259181041151],[43.342870788156006,-451.1092893807863],[38.70214440544305,-452.7174692602275],[38.8456642811916,-472.40572620179523],[39.22179251588,-467.122370438208],[39.53431651720041,-465.43384547523806],[51.0685860670817,-480.15292979044307],[50.30160816434079,-490.2411785598183],[35.18444426754138,-488.36506104672856],[36.61199538939695,-493.98134758014646],[31.93977433564055,-511.2264501903908],[25.607372777731825,-496.12747831356614],[27.189310325583506,-512.1427102261291],[29.255963942000562,-523.7742076266292],[35.92389481162445,-532.8479056979693],[28.070830408888582,-540.7629839767703],[67.0164181395744,-523.763785035791],[71.50211277579297,-549.9577794258098],[81.47693088863502,-555.8921397271173]],[[-51.79484213455896,-492.47064165976315],[-14.564579249995631,-487.74129969793967],[-23.74218733343156,-475.0246452034153],[-26.713853340923038,-496.40276593857516],[-43.184876090181206,-497.66996680504553],[-54.133957211303766,-479.3870459204278],[-71.94701352263877,-480.85253709990786],[-83.69828493305528,-481.038803355135],[-89.92730523926474,-474.7747435252154],[-70.51920764622685,-487.27621123068513],[-56.99510286563259,-489.87014993565435],[-45.62904905704647,-486.9134412027536],[-53.727361644382086,-516.1275232362475],[-69.97215292347767,-501.5243177968398],[-78.96820046308903,-516.2282459926175],[-109.98571581619655,-516.3920054704502],[-93.52632125150978,-505.50480043550806],[-83.08240702690978,-512.8563058153038],[-59.014956353131936,-498.3054686653161],[-48.07429305093035,-513.8063516377308],[-28.695199011796035,-514.5618656849705],[-18.5146640618579,-523.4595928782745],[-12.598804390223734,-521.2279572163075],[-10.904252886579798,-516.443904941711],[-11.42881272448534,-513.6586226158624],[-11.229163675638006,-510.74273433938083],[-20.936178833416648,-526.809761615133],[-29.04193939397129,-525.7093758350312],[-45.81942219646652,-503.97177304364425],[-60.51641762569835,-508.14450877276226],[-77.56095006973658,-500.70667532916764],[-92.66433332056494,-499.98098485255616],[-101.8647403879798,-503.1176639271956],[-95.71726176355963,-497.3129928041135],[-91.02655720957489,-510.5837955654183],[-91.45958143960053,-520.9067504197627],[-90.31387233642192,-527.1455625558064],[-83.77958608230614,-537.1312655935665],[-89.06159041819188,-544.3404330667969],[-81.89349567862126,-540.774204300988],[-83.51860041980541,-543.4795184472325],[-88.52628030028654,-556.2839340056128],[-88.87384087518728,-538.7583058483269],[-88.55276317912,-539.5503812032616],[-86.10284543695474,-523.6291156297507],[-69.7244534577352,-525.37944410811],[-69.14223777761487,-542.8547493456008],[-61.53604901364247,-537.3775289989146],[-62.34071570455205,-524.2739851153583],[-51.93748123138471,-526.9192339528637],[-51.0957019179566,-525.2723621900323],[-46.0544115413457,-512.2406864454563],[-39.24565406812195,-516.0007166515093],[-34.18365011119488,-525.4306697115258],[-41.53216083002479,-508.60570144630503],[-30.59999640844285,-512.4879628080107],[-30.105394083513147,-527.3483611369694],[-28.68774750810678,-518.3133961921815],[-30.581191983130566,-542.235536643127],[-29.11123694208095,-518.3620819878754],[-34.299279734869344,-507.7966726652944],[-36.835282316018265,-516.9520889999308],[-36.65476742911642,-535.2923932363557],[-26.090794106784074,-523.9936036583136],[-32.77964572484234,-530.0730949375647],[-32.36723023250431,-525.8311680235176],[-30.86155431216048,-533.6909156675151],[-37.367766554806735,-510.466474749144],[-36.1403536117582,-534.7597580734653],[-35.756775957402965,-530.5007862664007],[-40.42976486608052,-526.6081811240592],[-69.80698117001896,-507.508815064961],[-38.747384825453764,-526.4958455432466],[-39.686412824386366,-517.4041460546255],[-41.97604164783979,-527.3515522709106],[-39.67432728270592,-523.1671696213673],[-40.68186032257222,-523.8234727681258],[-46.14532407913282,-528.3989841580058],[-43.96827166577327,-527.8093821177974],[-42.0743968661227,-529.3007634487103],[-37.74987520731054,-530.0959827918898],[-38.85119330784107,-527.8838767417737],[-36.58000423669171,-536.9121529565875],[-39.799827547467544,-527.1656192812885],[-53.14761319813903,-524.5407656908696],[-58.563588734975895,-522.9623603616064],[-58.54484018285041,-527.3286155289588],[-61.1731807184417,-521.9807056015461],[-73.47098690672419,-513.1734997210759],[-72.93048675418584,-524.1607548687928],[-75.73263738335845,-518.2229358867164],[-78.94573747544882,-518.8860548350905],[-83.11651421570241,-512.6049191069156],[-81.56481935666113,-532.7040845045985],[-80.22159160416129,-522.9592215519785],[-83.0459788544099,-520.9928389792086],[-86.75230376663546,-521.8237576839908],[-92.93003160945727,-512.6237987274137],[-91.99424155808674,-518.0393214510408],[-96.79135236781951,-507.1531778020046],[-101.55482193032208,-505.68801559827784],[-102.78139570029839,-488.10760278591283],[-104.21033490707259,-486.88813503551614],[-102.82364603485837,-494.1369214814731],[-101.15611191382948,-492.9086479869263],[-96.68216075048986,-484.35644203343736],[-98.32667649003349,-491.4811858252806],[-96.69639994078784,-498.69200739119606],[-89.90336967703331,-501.5254033464712],[-85.71291326167159,-506.1448194189659],[-77.49218927096399,-506.8998485619288],[-62.735051250044876,-517.7453223022874],[-51.17758860453728,-533.1329884546446],[-38.38992262502245,-518.9498296531706],[-33.77761504792011,-514.2420210345049],[-23.59754568122537,-529.8920763683908],[-22.35704669142649,-522.0831831198186],[-11.592852704096458,-518.9462950603169],[8.315539019550101,-529.6384545658987],[12.087984098917218,-506.58451631647563],[29.120660119169088,-513.0599063771117],[20.59552787090746,-503.47936529390654],[33.18453799687512,-496.57095533676613],[39.271615033163016,-493.9766093131635],[36.624986873234434,-485.5623724894874],[41.082958452716866,-495.77427239090866],[52.9548686638654,-509.4448120515749],[49.42667709589182,-504.2828712750975],[36.315938463066914,-510.56348677387314],[30.897570854801415,-509.5785530334115],[23.36391132384017,-505.56367790390493],[24.950162316614694,-502.6529687760574],[23.22789385199286,-530.0571710804214],[16.038677789767462,-524.4664029718888],[5.8518238452701326,-536.8807596676031],[-3.592739497520938,-531.5847522476959],[-7.252206843862723,-542.5130987949317],[-14.527155399900266,-548.2362226139035],[-42.268631514737024,-543.4473646363303],[-61.78556135247635,-516.4022834818694],[-65.2282869273979,-517.4225043846652],[-74.21652554916659,-522.5121818455561],[-74.55115608153176,-525.2028244646225],[-83.0279301897175,-516.2208552995635],[-74.89458494550558,-513.4299822465605],[-75.86771625492258,-515.1096542143334],[-68.71978199446357,-521.5546958878738],[-54.999913379243026,-511.44107683887773],[-55.553968897395634,-498.7126756775324],[-67.61623143494967,-523.7614502400936],[-80.42777533370565,-532.0057610941709],[-82.53824222694965,-549.593689103076],[-72.69593900750016,-563.305970703521],[-55.527559962756925,-549.1361381990805],[-37.033436946503855,-548.3501408469922],[-27.699733441882813,-547.0730153473446],[-18.9831929999292,-585.2877067511863],[-12.747542275657452,-591.8796608705791],[9.575253894680827,-608.1867236754138],[6.823938032620845,-595.2446723951475],[6.234521601890833,-598.120253975515],[8.920819667006185,-590.5533489178297],[10.44860668638404,-594.786362313004],[5.973740151443849,-576.7608120344175],[0.47384075648369617,-570.5064420716058],[-12.922849561405485,-562.5970498654196],[-16.522189889243748,-560.7472859807353],[-29.756005343967047,-560.9305418541386],[-42.436084250559475,-541.0018491602007],[-47.402695214197024,-555.079328349713],[-56.94697273486804,-542.9557884816488],[-77.92816651383373,-536.9354238377166],[-85.63838138588812,-560.7818732598196],[-95.26836100841956,-554.788720032594],[-97.42346413446069,-557.8615193806774],[-91.00522788045737,-563.7085549103451],[-93.40165119887081,-547.0852681815497],[-92.16723100667411,-553.1802856704226],[-82.41121751447838,-549.268372690618],[-71.0962097827171,-546.2671193040215],[-64.24425107009006,-526.0818308188648],[-59.2509835467356,-508.99674697807905],[-52.77263700853439,-503.33945851642943],[-46.82976843546567,-508.1199602640502],[-41.733686293305595,-502.08467961094743],[-34.79012492512038,-505.3922284591981],[-39.16994489082924,-503.90332546932393],[-40.59214083514439,-505.45272028859404],[-50.0930346738478,-511.9465102271098],[-58.705038734396794,-504.761070161436],[-65.93005411391403,-512.4442896052745],[-82.85047614354403,-521.1559582991465],[-95.26921208368083,-510.95240707484095],[-111.32218788554036,-514.719511461408],[-139.66371082220724,-499.1428900132513],[-169.95626240054122,-503.2209414635938],[-170.9404916762499,-504.3465998147111],[-170.29182809223585,-508.7477306556764],[-133.18063802732757,-514.8954346332125],[-110.35776598471438,-510.6772326144885],[-78.32447976875011,-513.3570304550381],[-53.25453022940013,-523.3173854250118],[-18.7499469725027,-528.8245525743341],[-18.70114469178378,-533.9421882541012],[-7.604411995496719,-526.7686606205185],[-7.680172666711883,-533.3323508479608],[-9.001417430755623,-526.963786888168],[-13.945923427923958,-532.8422085204302],[-22.55299515857689,-539.2187359416912],[-30.13323130203969,-531.1476594652465],[-53.36138910591512,-533.5095187473223],[-80.54151269678187,-535.8024929508919],[-105.88272361825022,-520.8296395580558],[-126.77037266174716,-503.28702824031313],[-125.67517484342943,-496.42677645288677],[-85.04239326593864,-506.40116549280333],[-51.95143812337494,-517.8965415724913],[-22.655741001987394,-512.7772267680375],[-9.145127564306563,-504.9063018876333],[-8.353536415440999,-507.79033650650854],[-45.87003284273817,-481.20170131927887],[-72.20949687013456,-489.5327915046573],[-116.23065537869246,-476.5713527027656],[-148.50319928919993,-447.59219366190996],[-143.40779825124088,-454.93024499351077],[-150.3671480294629,-459.19254170050067],[-90.78443380974892,-456.83805129054394],[-56.256666670941286,-457.835083355254],[-37.36280395946767,-471.98664749309796],[-19.83557810543965,-483.4990700056668],[-15.716338269233177,-472.34750785090023],[-15.8754106618008,-462.42337656460086],[-13.877455014508428,-466.79754311992997],[-8.60702531298233,-478.40408074200013],[-12.774453857861772,-486.1729720865476],[-36.67263591522499,-456.5596136694069],[-44.783346098306936,-446.41610118818676],[-61.30196062575595,-454.9091854552769],[-88.8088010892991,-459.6256448369695],[-110.62639880312275,-435.7151731762917],[-104.39630493537368,-417.5034745231028],[-81.47624469503461,-412.10967262332383],[-47.91169253967945,-412.3086268797606],[-19.07060704545279,-389.2841192158635],[-13.556700545767171,-373.1298652316898],[-21.598111487198253,-369.8977017032553],[-38.576644477147056,-367.6954271112595],[-52.11984921997242,-347.07370476348035],[-67.72881795045066,-341.21731961287765],[-79.28793361669756,-322.21541872908847],[-67.3701723943409,-336.76009899452515],[-43.20480457049746,-336.43934705720096],[-28.42489746755325,-340.1662108744738],[-18.300201390677955,-339.1335897412416],[-19.0821701745989,-343.3760098866951],[-18.770321217499543,-348.6756685122035],[-21.26468134620859,-345.77967531971274],[-25.131207611376453,-344.0197599532056],[-32.12873945374997,-357.1568962815725],[-41.31195089210928,-360.0956750969128],[-55.79418083338459,-355.87223293597606],[-67.56276324645023,-337.0320581483668],[-79.34202384341575,-341.3997034686387],[-79.32986457070297,-331.4075453952696],[-76.77539439047405,-340.9056124345731],[-58.86349412160939,-341.32203579421343],[-36.693811541596006,-333.0388967697678],[-23.635997181846506,-316.04554045692225],[-23.306988483673308,-313.41314180489746],[-23.821941250985105,-318.77482394977426],[-38.494051157908075,-333.01358542536104],[-56.75898449904673,-342.3401723149432],[-88.02427963922582,-335.5694790653115],[-114.77531407031762,-342.1355328774214],[-111.92857564480465,-339.24848818619796],[-86.3434959789862,-349.9004519753213],[-57.60115926392376,-357.3472769305388],[-44.487044985796615,-358.6342917746199],[-24.90302893885024,-370.95713275078106],[-30.40462241740289,-367.621460087425],[-21.4154797281314,-365.66275866205706],[-21.08256338822173,-372.2710612185714],[-21.25931454155659,-372.3513086599471],[-23.39797323406981,-376.02892569975234],[-35.6738150304156,-367.08663614524426],[-55.4905340367784,-357.1936038623926],[-80.36953252441054,-348.08316357186357],[-92.66386892901187,-337.8488667799231],[-83.24537255754052,-342.92764122182257],[-71.141766077532,-354.1155197833002],[-60.39525005874674,-361.2276366383451],[-47.6496001828001,-380.08168730869613],[-39.09160079464351,-375.46208655624037],[-25.82169873998123,-378.8055458979168],[-26.01018248122648,-399.00675680957283],[-33.8836787765548,-400.92174811058976],[-47.49101364550279,-420.55262240664297],[-69.27829286424424,-421.71763755723214],[-92.50719268972546,-434.63128191953524],[-74.86922648906881,-447.92837600750613],[-37.75492977640198,-447.2645543547603],[-17.11482772322728,-468.7974044893158],[-14.086813685142374,-454.4036986680858],[-3.234808670060602,-458.3822359509775],[4.282047311900044,-464.9423629519449],[13.014478103958197,-457.65393946178574],[6.062869704309605,-457.3320489501597],[9.494346533919952,-471.7806038866395],[7.119439484989243,-476.0857420265196],[-7.523740633469856,-462.9699529199095],[-30.37703514683068,-463.1976352716513],[-51.48288400597778,-474.79164021166343],[-74.29748943146006,-456.31408991645924],[-95.81523983188083,-462.01207183244605],[-106.66138981091234,-456.72704194996004],[-105.86343481946619,-460.59499531838605],[-90.88993507026692,-456.0495149297658],[-80.05243971053432,-459.9932702814875],[-69.86396779459562,-461.98152531862866],[-64.19150052798557,-456.21881095066203],[-59.874033117954696,-452.46895853262095],[-69.41745472281252,-455.7479929044978],[-75.68600960144954,-463.9916270557078],[-68.4682914040618,-446.37274686269745],[-62.35211976779897,-445.4494059371731],[-48.50822573367327,-455.3937048572018],[-36.7189775248894,-463.91066855476174],[-26.253755190113225,-457.20251751120736],[-27.104078607843803,-461.4369292738204],[-17.950522883882115,-449.3190506866961],[-15.00380293479816,-442.63619627162257],[-11.70982812376576,-450.8568314510094],[-13.068332359772057,-454.84467670041204],[-11.928315021045478,-459.89053612035104],[-13.45142237396692,-466.48079384451967],[-11.631118323937926,-469.8131525107134],[-9.660990652646888,-454.3472996513069],[-5.703635312973972,-460.5444779071993],[-9.3901952261254,-449.8442750225388],[-9.387230987296391,-441.5171745134751],[-9.157523682530893,-453.8373115623558],[-2.3662914077286814,-436.9699214131965],[-5.286542497785149,-437.54258244459356],[-3.3004624896612995,-437.6872294633688],[0.4569487389458118,-439.80808339937744],[-14.107310949223688,-436.9501024939492],[-31.409398952242952,-431.83616481492106],[-30.33608246660873,-450.11022214658533],[-38.45406708928135,-479.6054030686239],[-26.4931028563185,-547.3021386109449],[-29.543775632642053,-560.6228091082309],[-39.50032511551552,-582.7275351633714],[-30.669185715970855,-616.850444663406],[-7.267453489292166,-659.8927554873044],[-3.8080824389710415,-630.6706541718104],[-5.212606416016058,-639.5673619592745]]]"),Sj=JSON.parse("[[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],[[-98.21250472241871,118.2351997749995],[-95.06297769973264,115.36032526512372],[-99.45962772533687,119.86344784589562],[-90.8682612130882,118.06593292890238],[-94.68041356348749,118.51820870072083],[-95.97473327803203,118.03626694832792],[-96.91818476440812,114.41831254416843],[-95.59932247818239,117.15379297206914],[-94.87596700290487,118.30906363109057],[-91.34962755703106,116.77515199704203],[-95.65212004800082,119.12331730135202],[-95.57289448887224,119.10453825038996],[-95.4270392910039,115.68424210482931],[-92.49188922337925,118.01925734958866],[-95.04214897949265,114.65087474716847],[-99.72185679734491,108.4372456560418],[-98.90669281992331,109.61309030685425],[-100.77560755219764,115.85360438433565],[-100.27261222836182,108.83544249841145],[-104.70819060549911,118.00276874823044],[-93.58571648821953,112.53665652175982],[-99.29262998540435,120.08792044105064],[-100.3776688590653,115.78391118243394],[-102.47508499368337,118.67846794390391],[-102.99729403745573,116.91715915515613],[-104.14276810931517,118.18282454557027],[-104.9060821761305,118.24734840608221],[-102.6266801949086,122.50268873903258],[-104.23353486372821,122.23175601026458],[-102.9146647228427,123.682235493353],[-97.06875241749998,123.88620473482797],[-97.55346480020569,124.55797206552086],[-95.89857995193637,122.71027306078793],[-91.63066242376931,121.11515535897843],[-93.1812238770815,131.0900944554445],[-95.2136171048212,129.57292703136613],[-92.26523536565958,132.89411962779513],[-78.91151764144968,134.34310397853744],[-80.26903125864612,127.9098297843957],[-80.8495954881364,134.93968137833576],[-83.58435932943917,136.67927683338394],[-80.25598058538276,150.5634135919588],[-81.69705576335792,147.42131117191195],[-84.29145474365458,145.40799656342767],[-91.91422802283012,145.6115178508171],[-93.35765542212437,148.2285125430766],[-88.0878345727869,145.41612565568403],[-95.08127994431817,140.94894206141407],[-104.33757909718867,137.96390229420444],[-99.46283648834725,137.01663066004244],[-100.66145154107704,144.06851356399693],[-106.42070056017843,137.2722670752446],[-106.12290528591177,125.38114542303492],[-104.42097539130532,130.45735519979553],[-111.96543680491749,133.42318360396894],[-113.80794900986342,133.64060713630977],[-105.87738010347948,129.83058540691547],[-112.07734479978018,130.5073732341025],[-118.0614672702398,126.51408105687233],[-119.32916719978675,126.11316789154125],[-115.7816651129321,127.32726592545896],[-118.16710468109841,123.66009038249751],[-119.30873148648413,125.0360734064426],[-115.47142741944134,130.54363243364992],[-110.22571333530203,135.13028436308116],[-107.22333609725325,129.6295618027608],[-107.39224664663232,124.08668684875738],[-104.35004103546811,130.9641878874603],[-101.48723650503558,127.0676641556704],[-103.24316737312745,126.84634339667457],[-110.35312411476343,139.62566847488256],[-141.27453896092663,145.9459701910614],[-96.86795272713351,132.8382776537171],[-99.6714036407696,122.1735794305356],[-101.67409473211251,116.14001119305067],[-101.04990727844034,120.29280905117844],[-101.01130802480509,124.18136004078849],[-105.24767712132001,124.6214762555419],[-105.71246741549601,133.11646292189369],[-94.65157990343818,137.22754656090876],[-88.7293351307456,139.09722203365277],[-87.93026228308656,144.47230478080678],[-80.10619777409079,141.97217022996188],[-84.84404500824735,148.468083624668],[-81.95853491939357,143.06197651204775],[-86.89759541983676,143.71234705423058],[-88.9793534035087,135.54990628091707],[-84.17062973804138,134.98753334823232],[-90.33739503715486,132.96123249946538],[-88.37301570728533,126.31995259303994],[-87.77316491399,122.6378380361117],[-90.5752203186371,122.86180997364193],[-95.45090563134664,116.62451197460803],[-95.74053031048192,119.56521979670538],[-93.34385639696109,120.11092657845097],[-87.90392474318844,123.82335250849485],[-90.62391582413318,123.17036605570593],[-87.52607507341759,135.23133483972833],[-85.21173497878976,138.3878587248695],[-81.27868011153987,140.54136424481044],[-76.19094281099967,139.36694074689672],[-73.30845438168967,141.80617463149315],[-69.97403661056671,143.82703047809582],[-72.05433983184298,147.64845992743858],[-77.12038870839183,146.2715181071634],[-85.25936994064614,136.5845361732271],[-84.30480042962824,133.34548212634684],[-92.3852707465461,133.28165505865934],[-88.29467892949583,133.25847074744388],[-92.39994946263687,129.16563889172107],[-99.43342802715836,123.29193357430904],[-97.64204403498593,124.40562050548692],[-100.7416271743387,123.9107101271079],[-100.61122545377293,120.25698674145201],[-100.8516615966696,121.29097018535163],[-101.29574798370089,115.74617294478765],[-107.85978111568181,110.9989430405883],[-102.24059647203973,116.11790375337375],[-100.06635159907529,110.75253446859972],[-102.57030045647332,105.49434007467346],[-101.18052923699048,97.2393053395707],[-108.98437971316059,93.26873004273227],[-104.5971187409254,85.82112450072748],[-116.05432837940998,81.08774351062357],[-121.39373722532537,80.86255079481032],[-120.66872383466699,80.04035729597149],[-107.55532542683068,80.42029655727765],[-108.61836646026097,91.41532016377664],[-113.51241801131425,88.76100694900799],[-113.89618024743692,92.79078224815112],[-116.42169867838817,100.29870575354414],[-112.4292415843492,105.04735920530584],[-113.59289159552117,102.93046963732377],[-109.47872250486557,108.67416597695899],[-112.361687078116,112.88493260255632],[-104.41686265954701,117.24714200835206],[-100.29566910950007,120.85523979685001],[-95.72597590201383,128.1704941947322],[-97.20218747357512,136.25539792883],[-98.24523664986822,138.5002738977496],[-91.51551165365191,137.48397806107653],[-85.89892715582562,142.17776594801842],[-91.85296262829627,140.07774089503175],[-93.91250705865446,147.497641664149],[-88.81139188982763,142.3813779117197],[-91.04947988264178,137.3975681442273],[-94.93072985477261,138.57072944060224],[-83.20194288325251,136.5511841463915],[-94.77650016487144,137.44130309889795],[-103.41618733091047,130.8391961114943],[-98.06153413715441,127.58319355853973],[-95.1041397433296,127.2568426097605],[-99.15164640111738,125.69966140232202],[-110.84778672242197,143.79619081634542],[-104.3705162386695,139.30020365487167],[-98.37536641655856,132.3459382794423],[-95.08372307221038,145.74318533598966],[-79.31845294445111,151.49306378272354],[-49.8084295562893,154.5988763068541],[-49.46411714549913,154.4919287929987],[-57.743872110007544,149.06678963514537],[-72.86499975345976,146.06601987208046],[-75.76353950382162,140.19246114202872],[-91.99114328564451,134.52279514330212],[-93.56187041667903,125.81588013960959],[-94.3533319222226,130.4711986088746],[-95.3012316816135,135.39820249503668],[-98.04354350109634,129.03844704018718],[-102.6115829659816,132.09766261646405],[-104.49123701629037,122.42493853738188],[-103.08852219003114,122.74303957534016],[-112.22252926377888,123.06989491474621],[-104.61746881211201,120.06592384930048],[-97.66124746877551,116.41353227074967],[-93.73589762862639,122.12412269978654],[-82.26234249418576,123.663856780743],[-76.01799644622895,134.86004193016618],[-77.08784496379849,128.4870909793682],[-77.16002040408,137.44712765914062],[-78.93983705372398,137.59679042516302],[-83.63203602604665,140.12795754240688],[-90.5581684697371,136.3674377132453],[-86.32399116054876,133.54846360540614],[-88.60364607108181,136.8830047627547],[-78.58009966424129,135.3388421515382],[-80.61208966136587,134.3672547134688],[-84.24889722133389,134.17641346625248],[-87.03745888341393,131.67060840744603],[-90.5611530970865,132.42650899074488],[-88.9081708630132,135.465321234537],[-90.64591537108117,144.72505154383487],[-88.04698923823958,141.5052417587077],[-88.21534115831128,142.8574895792501],[-78.31227791355218,141.30586285965603],[-74.92700778757137,147.45567009020147],[-76.73828812344465,146.51401287042415],[-72.94062678877162,148.2392884115202],[-77.81087228468812,135.92560686065997],[-79.92018643290055,140.95285440703742],[-89.9769460011783,134.60107930176957],[-98.1094369935181,134.24872572297443],[-98.66556484372074,128.6380151285424],[-90.22993219029422,134.45686876909713],[-109.83592360849048,117.53725890583212],[-111.18163185720141,115.16084084907675],[-117.26120108269822,114.42590890040663],[-97.48265847091278,114.75683710470071],[-97.47757132834977,112.23712475578225],[-92.56736633121557,104.86142694801117],[-72.28832121683058,100.05108789036387],[-64.7887723446799,108.90198050286392],[-73.90087024000991,124.00346297877206],[-55.07740731763107,131.42282182105578],[-52.96034527839333,126.52564054084098],[-56.26613340017076,128.77536616084785],[-54.36783202992103,131.6834335962427],[-44.53994984169947,130.1425014593018],[-38.32065903878379,133.2319097865368],[-53.96580833199664,120.46693301859318],[-58.012297921345294,113.78035014367435],[-79.84465605139633,113.07565844087503],[-83.27336913083462,116.05691300767899],[-94.5729420499149,113.50503938383838],[-84.11173268498624,120.12270152800966],[-87.63119161930973,111.77390924801148],[-96.18496571109608,110.65088330293861],[-98.5945471294927,107.32101900095483],[-101.69784915326352,104.90030650245365],[-100.91259266104805,100.00828714029558],[-100.30218411780044,98.5544908533659],[-105.08319729204067,100.7046804080037],[-103.318177302972,94.3877045650379],[-99.00712441272691,97.46334151937583],[-94.16539054309533,98.29125850390756],[-91.23762397688716,94.9707565619583],[-88.3925322516605,90.01492130441318],[-86.97677463551764,81.84681415842249],[-76.87294401087411,83.38127607618787],[-82.63094406235507,80.96064651548932],[-80.21829566740507,87.59802094718736],[-73.29323144183769,91.77240658536175],[-72.12772090486101,88.3865010400682],[-70.09969737391856,90.27622368052016],[-72.924257055223,93.63630584020041],[-77.68380835400598,93.970749393755],[-75.88793083808224,99.22131531224375],[-76.01800212573283,95.98438469005396],[-70.80405432644432,97.13333536752714],[-75.42614474160735,93.01186848533905],[-77.45952919164131,94.95533393408505],[-76.05844206056554,86.03595644168945],[-80.78866415776855,86.76371718523615],[-86.12004473819576,83.28344264268776],[-77.33990852843209,82.90762525163257],[-71.46035773036596,87.55750993034849],[-70.12730935426822,88.1582461094672],[-72.70611710983724,84.87054618094658],[-68.7331223026685,83.16672276413772],[-73.50123680966163,83.72782641558547],[-69.11360948911823,84.80376241048498],[-66.46393339680816,84.87962298680907],[-64.00228045718148,91.00343492260538],[-61.681612054821414,86.04074526956708],[-58.16330065108673,87.93265031293322],[-61.032996954133466,86.21340678497302],[-63.70737091722265,85.07752158342782],[-61.30654852496605,83.31533146044728],[-60.39006566830807,79.24903870765888],[-67.58362240772334,81.74117562019092],[-64.11098479298391,79.44451139798764],[-69.64620119086408,80.65125339749102],[-71.30764586892502,77.96061584300128],[-68.68787501916097,81.73410922592689],[-64.49454002039437,78.73890361647489],[-75.97041062722525,81.29163317672862],[-74.01030368993713,84.27695544547032],[-74.11070378742448,82.97759921452814],[-78.94240834562078,79.60891329560343],[-72.34271920696534,75.9480220878363],[-75.2571268083438,73.51291479685881],[-73.00859686579702,71.88749991425595],[-66.81136723523917,72.2863923822822],[-67.86704998887365,72.18366627663261],[-69.7410831212398,77.57693268819366],[-71.00487872398833,82.51923454303449],[-76.73939916866112,81.81386991708223],[-82.5944902717203,90.17905939120635],[-79.67058056308394,90.58683762111286],[-80.32658722414214,100.3529919894687],[-75.60487894036135,103.829197075391],[-85.54659218534658,104.47825817907119],[-81.05180677025544,108.64270866293452],[-79.72511301537372,111.87044668359897],[-73.5858551023997,111.51183208407224],[-82.30424249891814,112.38000396871644],[-79.81655445376077,111.43092134733911],[-78.7330226931166,111.42177164884902],[-76.80676753618366,102.43613226836533],[-84.14236591340347,100.27132698148762],[-92.11607216770255,103.37272002250575],[-83.15298666682696,95.45766843149954],[-87.26044176568479,93.50666545425872],[-97.26292079493135,93.84259881023308],[-94.76059971522488,97.3296631618133],[-89.97864510354879,100.87465811570235],[-96.88150807552546,96.55823149876005],[-97.1706912925577,93.03162564319666],[-94.92346075369113,95.32876642496899],[-94.39931247805362,99.99934598328127],[-100.04810364375555,109.24988052633671],[-98.17086110853364,111.63837992282072],[-97.16888401870631,108.04388989254983],[-105.825292009505,113.61837812658848],[-103.10427107873795,110.9311952358778],[-97.29746538061147,114.63686703790302],[-104.22568277397414,114.14957959551043],[-92.17448981001121,121.60331235254057],[-88.52305705297397,124.65229009741438],[-86.10026842124881,125.54409775332033],[-86.40649330806423,126.44847186212371],[-80.42296697829977,124.0583972451443],[-80.866199412875,123.1397253864875],[-82.58525721806245,120.75947640101492],[-74.18433865858606,131.7304288090893],[-85.84472522718289,122.19542438593692],[-83.84133842850753,124.87987327907285],[-73.155920383833,117.69672040700868],[-65.15016935788447,118.28645966767033],[-70.49450333117323,117.83101425233212],[-64.71861719838876,116.67264463480831],[-73.21226482716429,121.64079382462637],[-93.86445819490558,115.24002312095934],[-87.1204887412789,114.21101629343491],[-86.65647089383151,108.65899890717583],[-90.27151613552769,106.76836037164901],[-93.65863246682943,106.5674180911808],[-86.05690378942535,105.90802360492091],[-93.45439509007952,109.7996016333941],[-105.70134333064073,109.73312975140436],[-107.12143625364973,109.44457064504968],[-105.70541763723509,106.82761271100662],[-101.66728890668145,112.41590208661682],[-105.31245575760039,110.88336405354232],[-98.23660751829289,113.8031098495145],[-93.11676288490065,113.19195563435676],[-92.35137891136611,111.25340566890338],[-100.80075892351005,117.25272234175202],[-102.74456710569552,119.28498342272667],[-103.50256400871609,121.25313235693693],[-102.38812427136554,127.81483151100542],[-105.53687930342261,127.81753825933083],[-107.24340778373374,131.9501414387205],[-128.5184756417649,130.54509486392965],[-122.49364671223896,135.0136232829616],[-136.31949760012446,126.75513899692214],[-122.81462740498591,138.94719529768042]],[[81.31514775642268,7.661178462201519],[81.59895203411554,0.21014239470844132],[79.28138216020056,-7.192128017487448],[85.76993280513113,0.8082697798304253],[80.46166899775596,-8.512452458241228],[83.18026926745802,-3.562662141256851],[85.74362213187476,-1.5324197496150873],[79.14992241964035,-2.92408084864428],[79.10149941682721,7.574340811672869],[78.90538569197918,-2.7560274583241835],[76.05588778821254,0.7469681411959073],[82.9048728103478,6.548584088677899],[80.1482439174481,0.8941222427299635],[83.83813733065813,5.22888117600769],[77.77172132166027,-0.6765316495930165],[86.1234370409519,-0.017199628145135648],[99.90692678968935,1.1238589061262019],[97.10125466971692,-0.4294025191054516],[88.15524871912874,3.2766833577834404],[79.24312146239635,-6.74622239748453],[70.60143883526086,-4.60940053702177],[83.25837752349992,-16.406345075828426],[76.60951416331886,-14.439185963072305],[74.52854472666706,-15.147585865187693],[76.42342439302308,-15.642672472309869],[72.6260799691006,-12.93394246661137],[70.0738633511038,-10.134513990757],[75.67584444146667,-13.710937362178583],[83.71250018351213,-8.213964156306474],[84.33929151707628,8.481986445666053],[86.23580465791383,2.032173619089349],[91.86726432618627,-3.6562286630118024],[90.42261039217044,-0.4562907823720934],[93.62946691265245,-9.910566308886473],[113.59537556153725,20.037234219936522],[112.84097590084389,50.90656049105144],[139.36288557325133,132.7918269135074],[123.79270743260179,203.41651944915407],[104.58983230308797,230.98616044252537],[102.1775128641533,258.9075112865596],[74.33530700543406,287.60563827338365],[68.65064280200579,298.3938980973305],[84.6472005255996,281.1060716206912],[86.11286209059472,279.6943891925158],[86.94209218864421,275.6419303296341],[123.11187325736148,266.7242545374895],[139.09147527345772,242.15732544887908],[147.64531566028256,219.1998124029726],[150.17171096958918,185.3914250643487],[154.2773618312316,134.340660129551],[150.7248585094526,82.44426750184266],[141.88050383452764,45.36008883049453],[135.7152245343285,49.67636659322898],[142.3093486751668,61.92714372334069],[158.35650599702637,82.31955100272421],[178.71026269630943,97.0015013655161],[142.29694993685075,121.62271378186051],[176.16230323587683,116.16452869428213],[187.63512448631377,131.29327524145674],[188.24563454376596,142.4889473565438],[190.43889119517462,158.00005805346416],[191.95759043540545,161.87068342676218],[195.81692543633756,167.6038852957621],[191.47868833278824,159.77623082432058],[183.73227433730415,138.99265382679414],[191.6003807641447,135.9893690583059],[178.2228763836307,122.60884956661437],[171.5397923687899,108.0772073202719],[148.7613933805235,93.00980824843077],[147.05142004328843,73.31708168716227],[144.03004247402816,77.60718574626173],[90.22900254974695,70.56669377866149],[127.16868078484686,27.473393650091452],[112.53053751735581,14.14772033109034],[105.20671970833803,6.236954507237783],[113.37886437940767,9.31074312378837],[121.36499928551473,15.755652653131506],[124.7738744608613,27.424094995376663],[136.60756643336492,43.118944637129516],[122.34593961027304,58.76258461104953],[102.58457311169252,81.76493477921804],[86.77709479478085,87.31837907666386],[81.99023250544269,79.12721680607774],[83.38324093057429,69.91669745785373],[83.78380851569602,71.58516940674247],[94.04944625280177,60.852135153896484],[95.62067679932193,46.93127117770882],[111.84683643621088,38.99177998867424],[103.12783161799882,17.8900837453275],[106.76290547080532,6.659143100241749],[99.72357699494978,4.194249203054937],[97.78024441109949,-0.26370303924363725],[92.40580442295254,5.029009813653261],[90.34835481048094,9.182109299320018],[91.56485485172527,5.002039562960022],[99.13525577285736,8.041658576648047],[96.88121971091607,5.879284925168122],[96.69907545767808,5.929038208768702],[103.55458332496778,4.96872940564549],[87.31625142111557,9.192274856416816],[78.53455150256889,-6.854053101859904],[75.42081786245183,-15.664122265971514],[78.08504712478657,-23.35138212015238],[82.8334548392869,-22.21661188560722],[79.42706569068105,-22.155926660114233],[96.82734242755214,-7.828665478842595],[109.92545865499028,10.606494960264968],[102.96795879691729,20.209925750415664],[106.7342807844019,18.28867796453278],[91.36221252137364,10.14776663103828],[105.4657754903958,21.522881573544737],[119.38998758036439,24.542012001195985],[127.38094657968009,31.083407475343733],[135.27424627157973,34.176480639235024],[125.07347742910508,39.94610453683447],[126.1957978595168,34.7222088162182],[103.1709995296784,22.043600748927133],[87.07532597963052,16.46102441635344],[47.74495512810097,12.898125569218337],[57.56592204566425,18.139400557150907],[56.93665515918042,16.200356323631468],[52.3576185928809,11.366844590011283],[59.80480052275408,4.0039818910044005],[67.61742358528033,0.4523484237380444],[56.94054621506791,2.2461131978665207],[66.02532980095862,11.769391453668504],[65.18375336140622,15.375775929913516],[66.25282205359906,6.497985761304562],[67.75236054930906,5.115456895112402],[82.85591010373821,31.23370560727301],[95.57544274125587,29.354716202536338],[103.09771890164296,30.542437605824034],[116.39905076542806,43.41189069447785],[123.90571373100533,46.888017828278066],[120.73532067485269,46.40638346617811],[138.31793960420543,57.18610340802104],[153.82737778497426,90.32698105359032],[151.66363259779268,116.3968317568964],[163.16769309491985,175.39011935373526],[152.6784145825659,209.587515758437],[138.39886024350483,220.00750483600427],[137.24484335418117,244.43832162209924],[136.13513305507013,228.23770254112014],[139.32493636147194,220.5738886175793],[143.57304620166087,216.5823671274428],[160.40695134861244,213.28775762296095],[172.39807366980062,162.17793806096336],[187.006542058749,113.9241137208628],[155.3261578088085,67.94493006627476],[132.41657570205427,29.13516349605834],[130.07316451981296,17.5313796029443],[128.91320514269398,32.41758111465242],[117.92272440367731,39.23125549800068],[93.78062896842096,63.093285051611474],[64.12786747436553,127.59684417717176],[40.44903289799561,162.8972625844948],[-12.838474317144914,192.5908684034157],[20.552901738968217,149.62598231705272],[-48.50466951894674,188.93096498658167],[-60.17594668686155,180.2548658457365],[-90.0089908188479,179.76165777934887],[-59.186733033356234,181.4031651065061],[-46.44199794123375,175.85483894890115],[-2.2173195782933135,159.87553830810953],[25.800016523462943,143.6504840827448],[49.31963580690274,105.07166312498703],[78.16840457261242,62.74282118578947],[101.18106602379783,22.089329823791445],[102.86034913637593,12.608587409803135],[106.48682921540001,9.795318368247422],[111.88486753022949,11.335549166680153],[111.38703912746382,13.316366559524567],[117.88233617525361,9.544979697728081],[131.06504868212426,18.093321632386278],[134.86418028974856,46.228997903818936],[125.61254093648836,51.838592771178696],[92.14933594764364,34.66341530101761],[96.78840387561706,26.514540084974783],[96.18030129205852,3.499101348662748],[102.10149244241722,5.7575758694296155],[95.14303531217956,16.612841629927175],[100.47207119398229,15.38896675435285],[106.55546577968039,17.47923763852168],[111.1799137318219,33.30363823139032],[109.60921678212162,22.793570032563025],[97.88514955685434,14.865456130446319],[93.73150662825958,10.924390597827937],[98.18231406029031,2.075697476703226],[93.31880387245235,-8.465680171592567],[89.79352444037113,5.166679615239445],[94.4247377261031,8.696029288437103],[101.0611962356727,9.79102012463386],[114.89025999000114,11.093540056174106],[124.66572628372057,18.932851034174064],[149.74648880781876,45.29663518004213],[109.64604660811722,54.54589540523284],[135.5280334869916,83.04734045838404],[140.96695043311058,99.47090019401253],[138.39276866499358,110.57788316137419],[153.94989892329414,111.26732780110228],[163.80176931903372,99.1520340624163],[143.42245631067624,62.601799311768445],[134.82630531550922,38.95389035798564],[136.80322320190464,27.157398061883214],[112.35144173813615,24.014408703529625],[110.0219820361441,13.246945009902106],[110.37719791270013,13.774564333837816],[97.91234547707239,11.9855930301228],[74.44381622351966,10.854243952459683],[38.58444749963343,11.671040832615063],[-4.971669965142553,16.931065406659286],[-70.03540464458587,41.07656002796364],[-61.388500395764424,66.1276633411477],[-80.87350218205233,76.74923433677088],[-17.910928564757114,102.75438722151807],[-61.49647467138482,76.05743386650761],[-38.81101116722982,59.67428044877056],[-13.583055397121257,50.77931488743741],[20.66337700055226,26.581464782162925],[52.315885032381175,21.02227594679175],[74.65134905038565,28.634761908948917],[90.12152980439646,7.252422235510153],[111.81853674557203,8.229652910659524],[100.43828547392536,16.447101385214864],[98.96752445821687,31.39404978032576],[98.22578871863686,24.259547725947414],[71.95040609286139,0.7436684430734886],[75.35103460364701,-3.6352732376200265],[81.23421436862122,-2.4195147125791436],[91.7975279572317,10.201829741664824],[100.90858093122239,22.326060892429382],[111.32518431157115,28.70117321245573],[107.94627852466692,23.91375547791972],[104.04326803067408,21.4245181097383],[87.40145948185733,13.198768372616883],[81.69388811727435,14.147355632314884],[36.437340878090765,-8.195338854833494],[53.41889914829386,-4.057775990275559],[38.46195188660215,-7.084611044226563],[40.66189845868428,-7.3728051238332455],[32.52106850648215,-4.634984830193503],[26.1321573548812,-4.248992214731061],[54.80734186834343,2.7898800603080645],[63.538829754740505,3.38119683805985],[81.14040138417306,16.599753968916843],[79.89046865365799,19.93551331272056],[90.89501219172655,17.153360646600618],[85.80862922142876,16.513824873014983],[85.4092387409994,18.26353910510261],[77.74119106049147,-1.8451414681727556],[57.90391103189768,-6.268685407675093],[53.976030212303385,-5.914264235063911],[60.7719992314328,-1.689441131459489],[66.7459004291477,3.454895821374862],[65.9484460642912,10.051061689915628],[68.34808292776421,5.627633545979847],[67.13205759041887,5.998745866216268],[68.01264298853152,2.7999474930342103],[60.87414261283385,1.30459749014733],[61.47518813500949,0.7235309857541097],[49.52521156589444,-6.507090027030813],[33.63277928110233,-4.005044454258609],[40.73615103722352,-3.9305130577889713],[41.7978830248328,-8.873258966804201],[42.45205295093558,-4.027326029757205],[49.42508547497414,-6.843738516750136],[52.21188957905645,-3.2735218781563162],[66.64028022651416,5.850125778115171],[70.85648928027604,7.52730050090247],[77.19326188929858,9.942154730974949],[74.70977210926287,8.72145139576378],[76.32921863453055,9.382774346163842],[73.223343664455,12.93716608393629],[74.64260769789655,10.131248293039107],[52.03716065352273,-5.483327137012452],[38.68581903106042,-6.428227129070933],[46.45829261365577,-7.28382087493469],[46.556896727724734,-7.07173456515261],[62.32047896134253,5.689143726855036],[70.60825598705964,13.293690475778362],[81.65651419686316,23.516791577553818],[86.81475498279502,23.597530586550192],[89.81321814969971,25.08844048883418],[86.498229256674,24.5664579823233],[89.49949317865855,22.47210134755619],[83.5257431555928,10.64533868527053],[70.51011154915022,-5.905379925759803],[60.8636370523443,-4.765691095322836],[53.27154266485701,-11.434695411182474],[54.960671986593866,-4.413733649880442],[64.74287653878889,-4.085805733949428],[81.6666171542787,5.744582968017767],[82.35525910250772,10.462687585579033],[90.37483816677354,14.071012003467786],[89.60934167943833,10.357330339901068],[91.5725555075071,11.505112157710073],[98.40283360481533,15.706493501778368],[94.00722374865825,8.997640097552448],[78.2749206888264,1.049497575053806],[57.18793500179606,-8.790150835560098],[50.33176089128659,-5.435949157643563],[49.952649344947474,-10.535572625198142],[49.63316810074508,-6.405990379171158],[56.039884901386245,-14.863633075915914],[61.15100276675827,-14.790287560720344],[81.55388132813442,3.2317953418059915],[87.91531056389164,18.468087510869964],[98.1697084139251,18.176641678880742],[94.8258900507443,19.363906255130587],[110.28983648504084,26.787641928649236],[138.1492607709315,54.11343332885815],[136.47834269848738,68.95156623845344],[152.01984261319262,85.66284667378704],[169.60886826935774,93.4051682468147],[168.29783385434087,93.09236206742412],[154.6942836743974,85.80363715762815],[163.69313094737663,82.0609490587118],[163.5949214016856,63.6062174354895],[146.01983751220303,52.74574544968448],[114.41995005850265,20.60637593055378],[96.52295649224538,14.405777600545548],[103.1669784773452,2.8128188621271875],[94.2008956465994,0.6112669754804756],[96.30130588861653,46.92363032247624],[125.88439962154405,104.91429456325989],[115.83468362266956,190.27353782633463],[81.39432251766436,221.69369569590458],[67.60758810793413,237.20959144764709],[76.63765688671742,241.91126976891132],[74.38055773821236,215.01142754917714],[101.15610834656525,200.94955691971006],[107.3821086411698,141.80973553862327],[115.99716321774235,77.39244158637712],[114.20684971504454,33.01896474786565],[92.04769059334092,25.478497951521376],[97.43134522849402,29.046325570639965],[117.67349546827882,45.452940402796116],[133.19141371889668,72.58164061462992],[130.29311691416615,97.38281284287712],[163.99108449881317,104.02520420421729],[172.8286420399835,110.8998608510002],[159.19788356204322,107.69756858989399],[163.38831457466097,92.01352337223864],[136.21846335021314,66.44719509608149],[116.5420137796059,49.124553072919525],[92.84004994119982,19.19498359415047],[90.752055185632,26.088523165986885],[95.60124068906725,17.42492491612495],[86.9460579632464,7.505784558591927],[103.88682667898024,23.677336391295285],[111.00376523511272,8.447983608433333],[122.945204366859,-1.6239405990552314],[132.1960153075629,5.471166219565362],[150.44669633219019,8.153821630800849],[156.4351110277605,17.67087623198347],[149.80753139968135,12.530674723179118]],[[-113.11836448366654,-33.276722594302214],[-108.39884138379159,-28.448897267100847],[-109.08882358812713,-30.56946118237647],[-106.54157168768165,-17.842484289837444],[-110.11686542480459,-25.645735086270406],[-110.31608759846574,-27.072261270427475],[-113.26996923825749,-23.82238599573759],[-109.63143734546844,-22.006122972872163],[-112.36548501064635,-31.311514171280578],[-100.27307467869065,-27.128434477316887],[-106.84262367184971,-19.37161034288374],[-108.45348095441716,-26.88672733829185],[-105.25728683777567,-27.56228609906168],[-106.06603326487806,-29.822439233699697],[-105.91240042469354,-27.2844781434236],[-109.03212081617585,-29.63062504889581],[-110.0436539935933,-28.732088413872702],[-109.68847608179243,-24.10332937779276],[-114.98071768350712,-38.771770083469846],[-114.14356519152699,-31.673010953565267],[-108.13096674159954,-33.043625638389244],[-115.70953394556403,-30.097204442641214],[-113.53847383857294,-28.957284714065622],[-112.4144373346976,-28.113485887561637],[-108.12617829220972,-34.24781444382438],[-106.795706555724,-28.46018850460075],[-119.0176265036311,-28.3525245038785],[-122.36206458183403,-27.926673180980174],[-121.38470015530487,-32.79426200766056],[-122.25382784041511,-31.711899710070725],[-117.85658426498156,-25.41652001170337],[-117.09002239323098,-27.918623299952287],[-114.32528170344534,-21.849586870541543],[-118.46675917630284,-26.090019772836854],[-147.25188798155256,12.124101135148294],[-161.69164758278737,26.413830824086062],[-164.12206004140484,115.05649211118623],[-157.73546307976062,179.59540198661523],[-142.96815446544622,214.00701917049173],[-123.68571989143965,268.78920880258397],[-118.22610806336121,274.15440844092177],[-118.13275055233856,285.58865741878594],[-103.0757920194252,286.85324168973375],[-111.60768563351104,268.55058437835874],[-129.07500707657687,285.52223550921167],[-146.1758880664114,245.93903378546122],[-167.45617536072143,217.9199840830331],[-180.6742546764841,196.0813006959056],[-200.90408067055262,152.912430557275],[-195.54864117255948,100.28467335326525],[-193.5427107767149,56.00938181349136],[-189.2619171191966,25.32560928503767],[-189.53118964770204,15.753703779476155],[-199.21361211185985,11.569847914671982],[-208.02044008376038,30.72220315074685],[-202.69970275404614,46.901094001428646],[-209.42856725620692,65.99595664399908],[-211.68868846715782,89.54847859902361],[-229.15011775470072,86.29994284603595],[-237.64504358430264,103.41237407066274],[-244.48553278244736,111.45132929644546],[-244.46999999723158,107.69646316350031],[-246.42489749868173,108.45535995470163],[-258.0284292809886,109.16873520719037],[-236.51112841334668,111.3578889285717],[-228.24916666160124,96.05782591289051],[-225.82160225513024,73.1354189328481],[-221.51726936310268,76.11954368671718],[-188.9613108445792,44.17114070235732],[-181.57156391279096,30.29369377301998],[-180.05581493163072,25.638150240240407],[-211.66566883664683,15.412912679624014],[-156.55116501406258,-10.256516612070072],[-137.52118899807522,-21.42843163090913],[-144.564535651609,-20.939269702530623],[-139.40145457774423,-27.02633046770063],[-159.19729221924655,-21.819288870457285],[-168.61454270823475,2.4744258532292633],[-171.9699347517053,19.632964132886627],[-158.61637171891613,37.30270463034117],[-140.33415530187096,73.07521871005554],[-122.30793534216002,85.93513667559444],[-98.86114504456532,66.93744571452726],[-108.21101831034332,72.97643521113639],[-122.33514841869368,65.92400842413997],[-126.48474736165855,59.41593234165066],[-130.61173657880772,35.26798984806203],[-132.54659464915812,33.60409003949951],[-142.0977706729164,11.21064784610303],[-137.56117725756218,1.6690047653562488],[-127.64412375919397,-12.153865398153812],[-130.10937023615128,-18.281733721909177],[-128.42341038758462,-18.455177529320054],[-124.66767681290526,-20.11642788894585],[-131.82413129485212,-16.173309917273173],[-141.77141566468617,-0.9883994019348847],[-135.25362001759845,-9.696477407784982],[-115.87356382751835,0.45574234043897377],[-106.84019905145726,-6.132334738089412],[-76.22313926818072,6.627326962794086],[-74.02796811300266,-2.4077325237606146],[-61.649039633453754,-4.663424453018706],[-61.17294363156054,-9.198795189118869],[-63.262593773678645,-6.319306958546463],[-63.98368854599812,-8.471210826515971],[-85.6194639615876,-13.867334833752352],[-104.0084353222033,-1.1587801705362608],[-120.21333163000412,4.483685649306949],[-132.51153115362172,1.9026732410718523],[-144.51968695118717,-5.250742897111763],[-145.94154040158776,-5.671059609550298],[-146.4744932777586,0.2620190837035352],[-148.71413032334232,-3.0691424606725377],[-142.06675917854386,-4.054259126865304],[-146.21247944950255,1.3709308210062545],[-139.3289996503948,-19.035010423299127],[-139.19850534847996,-23.504359377178957],[-149.14814271160992,-20.510147446519113],[-115.20431815898843,-19.266739856136496],[-112.25359377835042,-14.300000020911398],[-113.14702280759292,-18.348880383911364],[-114.52062599621809,-28.999752863343815],[-108.76901268293597,-40.700372995485395],[-118.93688786606259,-44.55796719365162],[-122.23566362879336,-48.76556730884647],[-122.65555651826236,-47.70115007672075],[-112.75940641257756,-40.508004155862864],[-111.14094914528926,-24.97568487661124],[-119.53462059316388,-26.812608082094698],[-106.78090265358423,-34.23476552989689],[-128.17127191096836,-34.727862701279605],[-133.806480835892,-20.52908551587177],[-133.74375861973232,-23.153867234184304],[-140.1479793844274,-19.56984245164051],[-138.26963502892653,-14.063620790663663],[-134.8834143343405,-0.4658154483852286],[-123.10896374538561,11.4168610669102],[-94.99422374502137,56.01475737864473],[-79.2513318336853,139.4075311567916],[-86.54583862801547,180.77813704370737],[-66.54426845956141,221.0431158873165],[-60.64996849348461,221.50167387130386],[-30.889541750989224,255.1933114307227],[-52.24258463369324,238.06795337241635],[-68.3174087291543,195.92192456870157],[-56.37923714092551,206.70457097072176],[-124.66601105891374,130.79126629412156],[-149.8421616044949,82.58681192898825],[-155.52353681050351,31.752048351624353],[-159.08184190318195,-2.2638816791885574],[-136.535677108857,-18.293881911823178],[-148.3082631790208,-14.96501723542383],[-164.86913701402534,-8.459716778292659],[-189.30353684564977,21.998446979044616],[-215.06536670148267,69.18504972420544],[-210.78895293098708,113.53113394039144],[-202.88390857216706,146.46896739973226],[-176.3876188158941,172.42091963648102],[-148.99833298102044,171.0993756289795],[-125.33307287048541,171.8204529797631],[-155.08135905222025,162.07088564428693],[-158.30901668673926,155.173452984385],[-168.03082560388242,125.9248265889911],[-198.9723077378443,100.33723033540207],[-216.0924580109708,77.66472511371455],[-205.28598961032162,29.521141150796097],[-184.5130731626822,9.361530053586534],[-176.85489185601415,-6.5971426382640175],[-147.84736089610544,-6.054825132019687],[-130.35795237018192,-18.79824247013596],[-132.4773561830014,-16.06415256336811],[-155.76693458264458,-16.734516652090747],[-166.82998539081177,-13.013408967201485],[-169.4461549148869,-14.546459141861078],[-154.6120860502573,-2.6407420264855546],[-145.60773052944893,-4.359486961396442],[-148.6815589084892,7.626653697137272],[-149.91404418167895,11.17711799748804],[-150.20662057533298,26.239021125799354],[-152.21453467055017,27.378126381198626],[-158.35221298442605,39.33706138797868],[-146.70440354338865,12.773228560049233],[-147.64108181633225,11.1249248737264],[-146.64341395466835,6.7858355828109325],[-136.18896906938147,8.565056863573659],[-133.44727708017223,4.647719127634446],[-143.5843410499943,3.6344727683386964],[-135.67786202520574,-0.7362675266247152],[-139.6101217916389,0.9619367403757906],[-132.95271261391815,2.816592749831443],[-141.63851316970477,9.803620083601686],[-144.95946219631833,10.965953610965698],[-149.92528640572039,15.18231969732642],[-126.86689020876099,1.68537303944845],[-73.48517736322935,27.76545325198208],[-29.601647906398057,42.011207354924636],[-8.417963686693838,68.26978219744137],[18.320466029339173,92.64639459860723],[-29.909225556951924,94.2275007500657],[-49.7314987285485,70.3805861858682],[-38.55140523690807,56.84818336109663],[-59.55323487415956,28.95977912206945],[-81.35645183765405,14.312319614591956],[-120.45777124469964,-11.630949612552627],[-132.28046895716903,-20.629952289620064],[-133.13942809087956,-26.422822701390032],[-119.96316009103106,-23.505479635120878],[-113.12212251585663,-37.98397376165292],[-109.27107910288476,-40.85558241979527],[-106.22805242621178,-30.33391177156375],[-102.81814262222105,-6.316149929212656],[-120.69646264994617,25.35251956133675],[-122.72374928549459,49.59442885201918],[-150.27992296027463,66.59928995007806],[-156.70100780166007,81.96674383264633],[-148.8166372032323,65.4518008703792],[-104.0950948203648,50.94156251123911],[-119.79182107398475,43.401322145234985],[-105.60531861598491,4.143511854720259],[-99.33900496555339,-27.38567844769409],[-114.78099563517111,-10.02529127393018],[-106.11551184180684,-18.228481146403624],[-127.08775653843554,-21.868237647476803],[-124.1948139247491,-6.752067347636057],[-98.67678882138688,-8.337679647074197],[-109.8255611188473,-2.8999793095108544],[-69.2540636881194,-18.63056562312113],[-54.879995149002355,-25.019223406695005],[-83.73048164701788,-23.942681833154325],[-111.38848008987662,-21.070942021920132],[-132.1740581979111,-20.367846168581764],[-143.54456213823454,-27.030044015533804],[-135.98506808280294,-17.48690454214693],[-127.51811243197787,-12.256218227089676],[-118.68986775057675,-16.017630116142755],[-114.49714399288598,-25.511071602551056],[-98.13156547526114,-20.990830136456452],[-96.52555135824747,-30.287877244074934],[-94.63595467437949,-31.705493421029132],[-94.88808838231398,-19.65623402433198],[-86.08992338143457,-15.017429670836464],[-88.25366157604651,-10.102169202208415],[-93.79999702059399,-12.159618958880856],[-111.82426477372064,-10.696007854404115],[-118.31188655199276,-6.497893359415571],[-112.1472147110535,-8.769669622644528],[-117.89552728155257,-9.765403694089173],[-106.94838602201656,-9.502685930329676],[-101.85200814959359,-9.854681833205177],[-70.45691019988618,-17.508522074362304],[-63.572049628595096,-20.58985655381457],[-60.61990684160662,-21.661901750303286],[-70.95635018240466,-23.61520068124355],[-88.0093929306081,-14.03657485425299],[-96.06793891866556,-0.5335049996846237],[-101.09699776430705,-5.895541846111996],[-99.2992286914531,-10.216323595153654],[-96.52607853309672,-9.597325066577469],[-102.67061197104118,-10.676937065136258],[-103.63000462841455,-7.30203493402837],[-99.26903314509713,-3.0550327765500924],[-91.16097044136791,-3.3010001550826473],[-78.62266211980341,-9.929701605531932],[-70.77504960947181,-9.837852287532087],[-74.85184073110781,-6.426747635755419],[-83.8338803643802,-14.268937049711894],[-90.40056429397447,-7.569399541483108],[-90.9592991542408,-0.7613296715967408],[-98.47721419284073,-5.045789426613624],[-95.56164878510037,-4.99758391300054],[-96.79384742685221,-11.329143692804791],[-95.43710414112883,-15.909343034971016],[-96.35341313487692,-12.724176803611044],[-94.76595646122297,-11.725428032204036],[-91.53711341829182,-24.986390258279243],[-78.35316949570415,-19.78050859702671],[-83.18439015877141,-21.389610489346524],[-94.71821843532501,-22.702385936880887],[-90.81925177456168,-14.280512427781332],[-95.56604831127561,-15.833936611872105],[-88.75939435738735,-18.634764714126618],[-89.62401109525939,-19.94505841169746],[-89.89210202180107,-23.52835816885556],[-94.6132560908004,-14.468426011566066],[-103.65402752563114,-7.705502082138196],[-102.90034318726208,-14.253150655649279],[-91.31825184338248,-20.70076126996298],[-71.03107071271927,-20.33238521436283],[-69.63635278356435,-17.146574951078378],[-74.04264784062792,-10.722921088286512],[-94.96204492500738,-15.80548822163371],[-104.89674469191363,-9.577054690587033],[-118.19789436086319,5.473205238215428],[-129.02069619628037,18.072965561595424],[-134.881550122566,19.35697872447463],[-132.4031017895013,17.78764129846195],[-132.70543412025847,12.234826577834156],[-122.96877399156386,3.0701413482182716],[-120.68540154409516,-8.188186343839106],[-107.89064880453964,-25.809075695742536],[-87.47045810505409,-31.01075098600768],[-86.61733757209896,-33.6877701579391],[-96.31282570586535,-34.41172423371677],[-102.46680245401359,-31.0978042980571],[-105.56237306767719,-26.153933178145053],[-111.4892729281043,-20.83041266110274],[-110.9864111283236,-24.423801141534],[-122.46514982462804,-30.38475920728729],[-126.76072812645953,-31.773347382740212],[-134.23260971191138,-16.219965378865936],[-153.42787672584308,17.51510243160419],[-166.58892825178242,38.07502205814308],[-209.54952880371422,43.23632921910246],[-220.69751668658603,52.53121797644724],[-214.92248794456145,55.949156105582574],[-223.0286332680381,48.88487092010348],[-200.88735843505822,49.1727848870928],[-181.92704122385436,41.89417957046487],[-149.8864689382214,45.29938033782196],[-148.24270918757247,15.404868966444951],[-119.73980310344706,1.5750637903346387],[-111.24119823890294,-1.086200344961867],[-117.19706662291776,-0.24742517392962782],[-135.6055845426731,32.14401521103082],[-156.95714871379136,82.52093764060771],[-154.52301015891902,168.15145371081735],[-119.02467181087155,195.7987721950699],[-90.97101284074819,243.78428934737246],[-102.27767317433461,241.19633015672707],[-108.87253694494149,219.42803610717954],[-141.93476537585735,180.93056861725188],[-168.94080677387598,116.16342251931064],[-164.5974901908187,44.11021425559227],[-136.5163398161564,-3.6434741712570258],[-123.3607587255085,-13.540787683342728],[-133.2083351520992,-15.221078571745693],[-159.42491178562034,0.3338088330579012],[-160.37312234152887,43.33418848204644],[-194.30954471517924,64.30425346407094],[-213.07249703403386,80.55310780401157],[-199.80300877283588,79.67750659390003],[-202.1910839002549,70.82882006823161],[-199.73607028395054,57.99585704276967],[-183.2509431252705,35.9100976271684],[-147.61461277622726,4.434116096018897],[-117.24720163110271,-1.5430582941756938],[-119.16963681325012,-11.987140813604697],[-121.82788535142004,-7.962160101505106],[-132.78409460081645,-2.225900800440968],[-134.84286794922832,4.538995014389684],[-138.47520388362676,2.1665326650444285],[-140.14909905329324,4.529511386420381],[-159.58812647526736,-11.66470931675235],[-155.70952931565841,-15.154067968311779],[-170.70047610756217,-39.190129690296885],[-164.3959519403569,-28.13122811205335]],[[77.99944289848543,-124.25147521913698],[81.3695792925165,-116.52564042668337],[87.06651170771943,-127.07496271380205],[97.0724180901268,-125.21246950657974],[85.43835001544142,-135.73217251401206],[85.84345267769197,-129.51177562804935],[85.88357999637412,-132.0246888247226],[81.40213986800109,-127.80106940517692],[83.80791259636146,-119.30348476449831],[81.65820080190394,-122.41798450966792],[74.63920864738975,-121.1998588621259],[78.86934331581642,-131.95549612030186],[80.87863698062927,-113.60268474676786],[87.65919544776034,-110.10325533494893],[82.13050182018037,-126.3965698413947],[93.52425236855652,-127.45234262543886],[100.63409289731726,-126.46258609676147],[99.57317685927808,-128.3908350154545],[86.49905762270453,-127.17537330371738],[63.95574455863817,-131.8593751509402],[61.78694269868822,-126.68723489153979],[48.55873446960334,-132.66231672250717],[51.889214178422435,-131.18363280940503],[48.40236120393649,-135.02065236655403],[62.63656558053208,-140.27303536423688],[56.236755198943,-142.25415731028215],[61.45716054393506,-134.2146253756349],[64.64198507472895,-132.50976284062506],[62.01891680345318,-130.0806071702915],[79.14962665130156,-116.96495892093412],[88.70971023377297,-118.62375514427913],[76.8843640644211,-134.90894292752648],[71.02586657680445,-119.00517526198917],[61.83890923361196,-130.36699059431953],[67.07351263874784,-37.68936539976835],[31.91162870491098,78.9237877001051],[40.84276902837348,204.45776552052223],[58.06301589671591,308.0008367347174],[57.815730815790516,347.88971676437006],[54.10671103118125,384.8141361628044],[53.08370222657675,402.82518281815584],[38.48062459023174,413.6962970823656],[26.50349358105268,403.1981260629969],[18.684480023631636,396.59395542159643],[25.759800481743355,397.6053040511009],[30.162590058473484,372.44350039465735],[27.302170043488218,352.71233505316604],[53.49448920077134,315.6893916156248],[59.07999582859304,270.87779158623107],[75.08800675596763,214.4644714748522],[94.52286411835496,166.85589495496117],[87.96900475450684,129.53179955050484],[89.07362570951852,123.23700192201204],[103.98379859969634,124.98713085508166],[133.4498995945263,123.99449881499197],[165.91470480166447,151.39129355058083],[207.48459848405423,160.3383972937852],[252.6474247615854,181.70696532295608],[277.4032177588474,177.73833561552794],[294.03150769903516,186.07459390187216],[309.9345088638411,182.37238305244546],[318.88174107066357,185.54868189380522],[329.45629904354416,174.59839529054898],[316.93546180807414,174.34209045335786],[304.59600635119205,166.29961137941962],[311.4267706226814,174.92915122766715],[277.7130267974901,164.49813197237722],[260.2838303927615,164.1009301519789],[221.0009925578903,149.48585054640523],[178.44297637959937,117.34696739674177],[145.70380816831334,102.2679421104474],[92.76365048393518,59.862108204750825],[111.57129907388423,108.83288882715328],[86.40358339030001,94.35935310979391],[74.93536763242946,92.05196844611544],[82.02804635023324,90.33870329300964],[72.75943748693714,114.10166541644503],[64.91547176785639,118.55771580117846],[81.31916587059129,123.72743261608287],[80.36735979551202,128.5069944806254],[80.13532771009511,130.29936722079583],[67.03943537814757,140.04316099889263],[55.230211992492286,118.8608633646993],[50.498731190938656,121.17916318346442],[36.65127901551239,114.69053880417391],[43.13541365773483,115.7914861031087],[49.793343436445184,103.86066344589108],[65.29160813610486,97.56885362809828],[63.543637641471264,69.9795882282441],[62.1545224124593,70.60580523248154],[64.04390610488724,43.80891983407662],[59.63704392308637,45.3434360412042],[68.81956110374324,21.130807219972667],[77.23987434051253,25.146416933236765],[77.6695133534331,21.370562643471658],[79.62962028257027,10.16530107857352],[68.84251917268637,9.731983048442771],[78.975707285255,-21.66863404027424],[87.95398347961839,-51.822327518536554],[112.9406633724667,-90.74017438551618],[118.86887438534245,-126.53232098370813],[127.88855006480833,-136.51220256092142],[85.13783318029061,-152.8595064402864],[124.25562101061598,-139.44538155172063],[108.78451575526958,-133.4684457736755],[125.98422049592375,-105.36697628861839],[116.45285265547227,-77.51264067959096],[96.97623857176075,-47.544623147801985],[93.22119197147595,-34.33584178821866],[16.876164522236877,-2.7097386509284433],[72.11321796893617,25.932772688704745],[89.23547390538101,46.77181686431243],[90.0082833423038,69.5828916382934],[72.25547803631707,98.26173525147817],[102.13784219303955,60.23096998783535],[53.53544149827633,77.43749961254775],[35.64465746378812,36.078973869577226],[-11.161339995826324,13.916068877394537],[-44.53785226894843,-32.977185935863645],[8.97964252719737,-51.812659377720365],[46.26922425819123,-79.45866596101712],[82.08414563918285,-91.93123603678396],[68.43777772989091,-109.78509971023607],[-15.058688630234315,-130.1072713014811],[-33.59060568585892,-132.49617659846308],[0.8294196618043088,-118.41366540834088],[-20.171557558138886,-111.99685811020254],[-15.600105789069062,-88.57124696819005],[-11.775513385201748,-61.432498744771806],[-0.7042606378386722,-8.40063452693073],[8.062800436780492,28.696252486012895],[23.555923907123486,54.38866061609815],[30.81020389404324,80.36132741756637],[47.18186562964604,117.37630328608816],[53.87894216611903,110.42526812520566],[74.39002202882398,121.0157973651203],[73.31412126614521,155.92853241948194],[86.3339670184381,199.41717545644485],[99.1920163879297,249.85289894213565],[105.54912604925687,300.01449303785125],[131.06948161169532,334.8062030925089],[151.0024758112046,354.84290648714307],[161.54577297689457,348.10956707725313],[163.60470545107432,348.0136316530338],[156.73641287489465,330.01430589028655],[138.83104876320203,310.8937306513319],[114.97127701480395,253.76496734812247],[111.03518232737736,200.8412393663284],[206.04016639976066,76.07057599242535],[76.38676524117932,98.21693128357947],[71.5663489560203,77.1581613333343],[58.202257314948156,93.14994012841953],[23.803266232212422,118.96369948263487],[-23.350908341531863,149.8803893277667],[-55.33608788115214,190.88977408140158],[-109.64336034691553,259.8760705370554],[-150.02684203894182,287.84259780895286],[-171.11698913837256,285.5086404958487],[-192.16771381174317,287.9591846257613],[-205.40351527497234,281.0336663820128],[-204.3742762616979,276.9981237760454],[-199.6908385907144,285.6026874365664],[-171.74234512185484,263.3825163016552],[-139.77608369976474,244.915961485229],[-114.77139471233141,219.07951297586328],[-63.23740471499116,142.68576087031943],[-44.364803608394936,124.23776337058962],[41.88289409151787,20.97815501483501],[33.358928641115995,23.69871285858312],[51.02296958264287,6.2494015767731526],[51.964812904530845,6.890635273604744],[43.81882212291862,14.49900841241083],[42.76213508598312,36.70431454781624],[55.01441720368439,56.16426650517781],[41.99899471853678,70.5606132715867],[18.70463801697906,64.75849211893524],[4.785598225371018,43.93787270996086],[0.500150292362946,19.8550451680984],[3.3485219511254627,50.75730061156173],[11.860555009577183,46.98419232205492],[13.54747995473167,12.337851528180067],[29.975654038166795,0.9273328232659424],[31.009265621894883,27.293571955799848],[29.483532901435183,8.00535144545995],[11.38388445037151,23.554803301754532],[8.045542245360707,-10.687514518504372],[11.008343708992925,-36.73277904032477],[14.196441285601736,-55.12920510209324],[18.65150286735343,-29.11725858129762],[18.183287350358,-41.28423469416134],[32.3824881461004,-35.25149128872113],[44.90313985681178,-15.574120764997133],[66.70760702505618,29.618847892063627],[86.88214664980103,51.980216417288375],[103.06329501044218,71.30636304855159],[151.5319142285682,94.10923845313437],[201.07933566739393,103.61443583103073],[237.3711429413031,123.70102921612465],[216.7986761931105,129.42841909342837],[229.85396833014687,130.48498160121449],[187.6809849094824,118.00617163566335],[124.85976180345153,99.51802341514622],[109.03252907205723,111.03166324220604],[81.30198803423599,99.9246075724185],[34.32810858835069,89.72697655691059],[46.92488773645226,59.43498265474557],[37.85699805124375,36.948007942687354],[7.1984800844438155,53.9742926795783],[-31.374723088243456,66.73717096105952],[-62.945392893382405,51.79275279587682],[-119.63820737879513,61.30212232722897],[-203.8237486338066,75.1266144871912],[-227.26258302815177,71.69895213349264],[-262.0789953510143,81.54663177874],[-152.1747336982076,94.50808005400279],[-222.2046521522342,66.10769296270007],[-203.53717137554872,67.22790004632134],[-196.37047849697439,77.49013047962728],[-136.40581849711208,77.1386221072164],[-54.243029223949065,69.47967641265257],[16.460709445056068,58.61426157248172],[20.497251854418437,75.35225433469668],[29.43107486346662,61.15968925029051],[41.24363754866124,-6.963821207826413],[87.62641869945105,-60.85087598173436],[96.66078696133559,-71.61826039188736],[115.47844944003396,-125.84624919180828],[110.26208691874842,-123.95213763198944],[89.35996788126852,-125.64651051716078],[75.16009778588875,-94.4169852422441],[54.59460737904368,-45.916945509895754],[50.27763298149705,-1.3116645329960193],[30.098178901591325,20.34270691198776],[23.493194559876997,27.64981298127509],[-0.6771903969759023,15.579682465569249],[-13.436638373710252,-23.918166960924964],[-26.02191471073064,-94.62845802410698],[2.3957275184547484,-120.63515682500088],[-10.461072937032952,-118.66828321758135],[-26.775832416396952,-115.92751709404297],[-22.961848478179434,-107.36639804572246],[-32.01196336699178,-85.15633188441882],[-1.384352068828207,-60.498440394032286],[4.475664018710972,-35.06518751179749],[55.22520186342763,-9.261302898152849],[11.917069180347994,37.13533293403259],[44.94992608341795,21.89136026948404],[38.86666361687412,-4.852661725444932],[59.914006935644124,-41.39206383872863],[77.29662510625246,-96.12321283311746],[79.96416512865096,-98.51973698942447],[69.59044811519414,-101.66373893268792],[45.31345659867918,-84.90318958920113],[31.95802732492575,-57.29969478757425],[40.51401298779706,-17.116274330569013],[13.829707549735076,7.890896704862712],[14.974932709277255,16.871475444401426],[28.783175575938742,1.3706641473404488],[10.884528917274451,1.4715962782357792],[2.37939375394717,-20.218447294158295],[-8.223181833484432,-51.7998998793546],[-4.869956018222069,-78.74447489725594],[34.71258380252732,-77.61331676136444],[29.93285302730169,-85.31960651786892],[23.604430530184572,-82.69248904503365],[6.215980522039445,-79.20518773109745],[-3.0471568247680807,-50.19681574341075],[33.01413385606577,-25.614058420028755],[24.391528039792775,-5.781681880939459],[39.215316687070185,7.954318555772147],[31.242287502434692,9.730792392685089],[28.072057663529563,11.501975997914656],[18.480096349355335,14.024395331465826],[23.879264199041813,-23.401928826702147],[-3.1150467079789905,-83.1331754952688],[27.164896818881004,-101.32916735400863],[33.933143576443115,-96.6273308462869],[4.617469283879757,-88.67189292993521],[-2.8516762254026844,-52.30023628850711],[6.9348946876958735,-28.78191747697406],[23.27420110388067,-7.431604952396356],[28.780480120073207,6.944725385194829],[36.386079639144725,4.80320744534697],[26.993834302850587,-3.9745660884620975],[43.67875841920983,-14.623156171757387],[53.75176350063248,-53.34007905326553],[51.34830193084747,-105.43511295723965],[63.947396661170046,-97.03378113609097],[64.68586370245617,-111.51656784111401],[53.24162738629741,-104.48805857385469],[40.60959504055927,-99.01119623632337],[41.60344714105656,-75.09718380640174],[45.90940716558657,-50.34391191404484],[58.154249316304345,-12.696376344020337],[38.815223116970515,-3.280273298079237],[29.156886777893305,-5.579779285922655],[48.429278407745414,-15.087099072863452],[13.129897286068513,-25.51705648692132],[20.41466838549883,-65.86206577003338],[65.94937600089793,-103.84154480871894],[19.94615707360373,-129.88531000878515],[17.170963400937126,-134.4204724868165],[0.40116029802317144,-133.03934925033138],[4.779743526572872,-127.01570889221739],[7.28761634075471,-110.71939869945231],[15.190450122017069,-83.74628126949483],[8.011588418987117,-39.995819495627984],[11.421029308384846,-13.395531554803483],[20.661357119253523,-11.811921280408455],[20.906088222948256,9.093939460973957],[82.44783719793361,20.4070505132197],[162.80340920256708,28.8133237779316],[245.58294439517226,41.14944888903062],[293.38820422675207,67.68167320316309],[300.47422490568556,76.78879320580586],[292.61102291530574,67.2169763153446],[285.35040551269253,58.58862800772704],[255.16499903749695,36.170949266367984],[208.2105143836866,25.9391895980134],[147.40587146213943,10.92455250392186],[103.38334413108294,-25.23746645468634],[40.97395367332615,22.488089410622138],[20.534183100307132,54.88719034619817],[4.808901024130705,106.03526908581966],[23.269127303326172,161.77725712204938],[29.195710674571046,258.964135660333],[49.372734308145255,310.6842315943029],[59.231866305041194,335.79777303935435],[49.88160959007439,337.84830328736695],[51.13184725817064,316.08414450977307],[34.77181768356229,283.3429895347633],[29.60269130299025,204.47711918434436],[39.94105715806734,132.63350676814935],[53.10773613697825,82.52542337177374],[16.92005309857052,74.80674033293258],[28.911527707000005,63.03554009543416],[56.72658849856407,62.75871691860095],[164.39836860473076,66.50368296749298],[217.66887405984505,83.28023485975427],[264.2005258201964,101.85765076383734],[287.5443885126174,108.56239729252172],[283.9110381664692,97.29801501523241],[279.9558590548994,65.07894267257939],[254.09437098062324,21.32434504656203],[181.64916505271447,-31.07935061163232],[86.76717023541505,-52.86259587663233],[58.28433732853068,-34.71439719949399],[67.91847299178505,-23.247758979054993],[20.931327592774892,-18.85506011594032],[55.95786711373205,-41.36071461785559],[23.098592385314078,-51.96574811240521],[53.74004455375132,-80.99130746465471],[93.0422397550235,-118.4967014391658],[144.47637732194983,-127.95679648650139],[179.685763621403,-116.67104468761295],[171.99708303815225,-122.50139701407022]],[[-93.23522205838276,-152.57307369257353],[-101.29236991263065,-150.03130222233722],[-103.73320994339798,-154.1854374812449],[-103.40571894540545,-148.26402125006916],[-102.6857376324565,-147.49312205057754],[-104.85030044912145,-147.55609786526873],[-100.69530982403671,-149.27516615410934],[-94.56734005415171,-147.3816311876286],[-90.91332195447308,-149.387458155275],[-84.09989007348253,-152.2316225365213],[-88.01814400819205,-157.16295970080046],[-88.3007202939948,-156.16577365305443],[-90.13142013149036,-156.93532799615627],[-94.3595541349406,-154.72071309482112],[-97.8270688475489,-156.1290916934936],[-96.18828705269357,-161.2877807594557],[-91.00017712648486,-161.8427611172517],[-97.13225505034649,-150.27402503947883],[-103.65069078420379,-168.99821566961077],[-111.99273952360915,-155.21661247890597],[-115.98130751572393,-162.10894987307063],[-116.38048620956931,-155.55508941447454],[-117.08125163159087,-152.1315708612933],[-117.60499823776848,-160.5332228312991],[-112.22766824018714,-162.48900803084712],[-108.36344495208294,-156.75100473405746],[-118.55981342455289,-159.33937244916126],[-118.83573355770659,-156.09868196874402],[-121.39559294226001,-160.92724831497924],[-111.09046247181351,-166.32735290637243],[-103.48793381199721,-161.97401657503337],[-96.69570591075728,-161.1812311613529],[-98.28932085208157,-158.45646556474037],[-94.8145819861578,-153.54891665322998],[-98.16139546587124,-54.619975929864495],[-53.39380749814859,95.29685767213323],[-92.92380322482018,209.03007509653014],[-106.20171114754726,289.2507769056514],[-110.36774851620498,337.8263477818725],[-100.48709474304087,384.8080526374088],[-97.55407143461838,402.2527457152345],[-89.0255729657008,406.66913921143924],[-74.9621516647536,415.74053967706743],[-73.90327273186068,409.2578089365983],[-87.81728373428786,410.2011662033659],[-107.75204152305224,383.66004402986607],[-110.24941375767946,350.1095818518388],[-119.84887007778633,313.84194257671356],[-134.99742734646372,265.28987483802564],[-127.62301288136831,210.34344045838702],[-138.2887465102217,149.71586688536286],[-132.58766501094874,104.23175676802077],[-136.8572616479844,88.16917595120174],[-160.81906875214077,92.73076521439816],[-188.29754731639395,115.83004840628098],[-225.05751225774765,125.41321916323136],[-268.3445858779828,136.22497254930363],[-297.79784978034115,145.99785498013057],[-322.756622838871,129.23898042263056],[-353.1203813087668,142.36827761487268],[-357.48286722327,127.9245827701128],[-365.1747666975989,120.50014598718383],[-367.8554045344089,106.51510052116942],[-374.09226839375737,116.33068096158252],[-369.63687630227616,117.24215667856947],[-355.0280634036611,112.66993091587244],[-346.90833083230143,106.54683345125432],[-316.6523043439915,112.46984991743],[-272.27689908348543,97.61548062957036],[-229.24886641666768,104.83305970837137],[-208.27427347905922,96.6056038561727],[-211.94538029473313,99.0548445863044],[-158.06035902767138,70.96033438372433],[-136.62309461631492,54.82936765873194],[-119.30330853527892,59.40794602253288],[-113.86196006014313,70.98202076917505],[-125.21360491025229,75.80731884167017],[-134.0713992582513,88.84031875150004],[-133.0083258136213,111.50735755213145],[-129.47601482097156,123.07307806879226],[-123.72020728819092,119.59338484379077],[-101.76461030842796,136.1290945574226],[-74.17083095595058,113.93749982194856],[-69.75826052506608,121.02034559158835],[-81.7820935098323,116.39378654447228],[-83.55571697533765,121.7747050195544],[-87.15465442726747,113.03444477491564],[-69.11441419796898,120.92260399929978],[-79.30072662230168,104.77940565685208],[-58.42259221039194,87.03627280734031],[-60.564595661317185,62.978043882100565],[-82.89497916430355,20.441304318892094],[-96.32277416889605,-0.4501204105185934],[-78.20656395055187,24.09747218658083],[-87.20039687812209,6.7097052423566765],[-84.48971660207349,1.0590256910205653],[-55.12304184454774,9.1789872785439],[-35.09407600642112,-26.161414894242398],[8.751099821696016,-51.76303198264566],[-8.61785706456908,-88.66055465280806],[-23.097892388397213,-120.54588557087845],[-16.350490252316945,-145.50266591302216],[-17.42554411590868,-149.99632579721333],[-25.37088202987877,-141.42226883108515],[-14.243846007864818,-133.61017174913604],[-23.65274125173653,-122.53781744144044],[-40.70476562027977,-89.22392984497446],[-65.51813285789706,-51.70759348640104],[-79.67259347286574,-30.6481501132115],[-79.99566936320593,-21.665917135239965],[-88.03926985788229,0.5027433786972324],[-89.22482980463104,24.97116424344813],[-97.46722479643381,40.4798867314513],[-95.45248578704093,57.03760803355681],[-101.33021092726165,58.88403980603903],[-93.0195659256396,46.25894675024006],[-54.7388178360365,43.02667425877826],[-113.47323668810628,-1.0852607002688046],[-124.64531467897973,-48.501621233629066],[-142.51087230939947,-83.97794555073449],[-146.37440738296885,-119.93072572606297],[-166.14633497693723,-145.89714742556862],[-158.9809460117898,-176.79749245073356],[-153.4785474263964,-168.86913553866304],[-162.07813236218766,-173.3718633444878],[-158.92260772736955,-156.27733212035196],[-135.86583081668635,-147.57179541213918],[-131.68292357526633,-106.66632463558108],[-130.82406950876003,-77.78819279045706],[-108.10204833742245,-53.21565457169936],[-91.58888978599737,2.049887086484091],[-67.31134263276891,48.565764214603746],[-69.7416316077838,65.26383513558324],[-67.92652219712681,70.43804746586716],[-65.33672445815046,93.05007472452064],[-79.54154267985894,52.74481749238237],[-64.21235872646452,97.06059649608494],[-56.80703498034745,131.3669795699417],[-3.1806890732784723,241.99310604167],[-15.055768018607068,304.5603264895966],[-13.530592220828908,333.19053894793876],[-13.459704787122746,357.3153855396214],[-2.0802777487779167,359.6433445965612],[-3.0006587195600787,353.4710197156452],[-10.853556964035306,341.14060622929117],[-19.020385977912838,324.9808508086652],[-36.36012362348538,230.7718049406319],[-65.36835024817549,182.27440273763182],[-88.17351074466467,142.6270083741249],[-105.80147493777753,85.79072666089883],[-95.76619009651688,75.34991679267125],[-96.34453184633162,83.69515042520266],[-113.62262866902432,94.22421610247045],[-139.78552732176416,117.4406679525656],[-175.58256763615896,182.20479868497728],[-204.41801013951635,227.02179906616811],[-238.39704792009826,260.00481232413995],[-230.43161719472783,266.2623875410643],[-230.76561293305542,278.86423429905096],[-223.40405892326243,264.4702629401412],[-232.05346424715276,255.88114688298276],[-251.26246525603335,240.5371120225086],[-251.73663421352936,220.091940260495],[-232.3801071914427,215.06246253683378],[-215.6190548738274,188.58995077006057],[-195.9000012014949,109.6968681775054],[-113.94688587247725,109.73313001793883],[-116.50732979806384,48.833145350559676],[-98.55288654071569,24.779487170752077],[-88.8467214503442,15.088329343617715],[-91.64443993538634,14.786008179080227],[-104.88116459907081,24.88854897895203],[-89.74439663983765,29.18073578754081],[-94.85594758153172,7.731713991336619],[-85.73465947709371,-5.242393184424714],[-52.55753021689975,1.809637243554448],[-72.18357428480522,36.50893785765845],[-64.52549743458223,12.93834433157781],[-58.01594917500233,67.09291658974166],[-61.90254971284617,51.33909076707016],[-84.97794506305809,24.336977655065425],[-70.24190002190915,6.1157029075093305],[-73.98669590269822,-9.023504127455226],[-71.85163451686026,4.844757605397149],[-69.12581066785776,5.108456301096112],[-76.83654922124629,-14.590732249834787],[-88.02544448548997,-18.562749005605724],[-79.58781842445842,-19.613954643352713],[-81.17701266130632,-26.501860061596403],[-93.77666046450474,-38.2050125183531],[-89.73451474890919,-26.222738152543116],[-74.61636825535072,-18.206079883110306],[-54.46754399351403,17.93778275204363],[-25.498349338017533,45.69127300044158],[34.529302923956834,81.65824375900218],[117.08538820487001,98.83068515067441],[167.2243987025322,106.08452504893773],[202.89553294761402,126.29528324819057],[-2.130215990994543,116.35100633342688],[57.43976881218276,98.7388100372865],[99.011467758957,111.82182124182975],[74.34788133046254,101.30403281355893],[8.473180878506412,86.6424917357491],[-41.06221275954147,60.96601507565708],[-55.19553777441763,59.31778042355211],[-77.6984350159783,45.736446709946335],[-78.30717698239937,37.109095199394915],[-82.43961483143596,31.086163988374437],[-82.98639285376879,49.83661675107692],[-122.97047381579864,24.90064918138978],[-163.6963875210634,49.58424495963902],[-221.02982618950952,62.67027611363267],[-237.8369550413376,69.59836025222478],[-259.3941103100182,69.30726746562402],[-266.8841921387945,76.42969764804866],[-252.64056128475437,69.37382810872703],[-211.95480375348978,63.81420011301259],[-202.6482717205825,77.32047698761505],[-164.43161024723304,60.881854564291075],[-113.14062789503544,46.58348360793423],[-72.532724876222,59.319740984465284],[-50.41986423623621,75.22907171899578],[-65.79587002989922,39.75808499148866],[-40.59778678783624,-12.646760597141451],[-46.07143388599661,-73.48841873152458],[-62.07820509458281,-86.05946140746244],[-16.372734928736236,-140.51870451483205],[-0.7835202244401671,-150.7625421013886],[-18.45395501801329,-138.52402150195576],[-39.53150763404233,-94.76193457639101],[-49.97106434445567,-46.25103504942035],[-57.200314903344065,-17.072196219301304],[-57.48871409533041,22.368607638771323],[-60.747163021894494,40.183786531426676],[-62.80041981550232,23.17073726476906],[-85.1484724193661,-21.36528313075644],[-103.14773907316601,-106.3562755022532],[-118.62646882439373,-146.41127545239306],[-122.40648043979957,-147.19532264629493],[-115.8596843566105,-131.10602999113803],[-101.62658013635121,-118.38178569764591],[-94.86851669786546,-83.99798153924269],[-80.54191019042679,-62.70416195729206],[-76.6081711555936,-32.958406691940354],[-69.97410789069812,1.2451667023326536],[-59.196321905493505,19.05843214717936],[-57.79370181089172,11.235218083397058],[-38.332244427865135,-8.439763279809881],[-29.52296256569815,-47.18818797552399],[-21.39666412856019,-115.9883905023571],[-41.34976542766839,-113.92220488861597],[-13.708890004405418,-113.47641466064078],[-20.278813250558017,-86.07679621566717],[-31.32767578429224,-56.55443634803294],[-60.08532674517363,-22.642583803346383],[-58.57838479324437,10.486083759641701],[-58.51499844416526,18.00117606274341],[-54.95475661178489,18.66937571691176],[-58.30286829346505,9.621390645549013],[-66.28722728373725,-13.579564375308678],[-78.70235849592001,-49.12278641494322],[-91.35406075792088,-76.8319448554364],[-97.44643670055689,-90.89807167267202],[-84.85969005804179,-91.18713315372588],[-74.69663884213264,-90.54510498808816],[-65.55694841100808,-78.83750890817112],[-61.54943137515926,-53.8983602203092],[-57.73871950857654,-23.5483029784034],[-53.03815168321182,-14.296496730892727],[-62.227212889630266,-5.14156805734126],[-41.26492947300892,8.863392824143261],[-42.314391887615216,7.389198261200249],[-40.1534506070098,5.214733710841983],[-47.549558407358234,-27.48003994953308],[-63.06015044546291,-86.10611092206011],[-87.62039644428916,-109.66451370532218],[-78.2576586462664,-107.34789206945902],[-74.76544709285548,-93.05338905148074],[-63.41049913133742,-63.721860914551826],[-66.0696612588485,-41.39011270096637],[-56.32480624276013,-10.124358075029932],[-55.95750115239605,-3.3812198883118754],[-52.08889904169848,-5.352941223890639],[-54.09727797929082,-5.50132135985632],[-69.80004340291589,-32.77706049427229],[-66.21391841574098,-75.92127685072342],[-55.10727905408004,-102.73688994366375],[-49.677930954732915,-123.66205261729215],[-57.35057012010543,-122.62778615369575],[-59.09331011683139,-114.63576883037695],[-57.54981649576439,-110.75359651601786],[-44.31164563651981,-76.97419942357521],[-48.38160141070307,-52.48665951693965],[-76.32619237826708,-14.886660268798778],[-79.6526494239319,-6.506778907830267],[-85.56066100362068,-7.414865909708283],[-74.01525834892533,-12.726159029097403],[-73.03397746627189,-32.13876475587347],[-95.23375237291714,-76.79288251973333],[-107.90036733216641,-133.93354675023807],[-103.87878288927288,-150.19060935835296],[-86.86638874681455,-156.28365090823263],[-80.21435378005805,-148.05920295002443],[-86.74384074123805,-127.6064713629637],[-81.35551526762379,-113.23763837938179],[-89.83166927328637,-76.9042522312127],[-88.82893651141171,-44.18586630497816],[-72.20755871446607,-25.48868656096056],[-87.30471551855078,-20.457120149666025],[-77.90210940194805,4.067769087784882],[-164.27161429477889,1.1581149789528808],[-238.9644088962222,-2.476765212024702],[-307.2989800299932,-0.3363534508960129],[-329.3586587018682,14.691671960811163],[-332.6851316252292,23.062242679475958],[-337.0534552041936,15.603571093344726],[-315.0244832807002,7.353369237011293],[-275.7736019342827,-3.353987113023436],[-217.46653778642712,7.826927195597705],[-148.0016742482884,2.9230201799585984],[-80.48166077486218,21.109620052905825],[-50.28571671501106,40.39701980941197],[-48.969079507213564,56.03458908052255],[-51.99073752825893,111.46336157176768],[-81.62012524973363,175.4019677509025],[-95.48944636888416,261.6380385545963],[-96.89534640980861,316.5597413972524],[-87.21028737189874,334.1711609692958],[-86.5831523395596,335.53646448102336],[-85.62198514956344,331.8557255181404],[-95.8929039651058,288.6999112723339],[-103.92893497438081,205.38015795865203],[-92.16530664034349,120.80650456465003],[-79.23453576064378,64.93566137551124],[-64.39807199782132,64.5440168287264],[-76.56060264714893,60.806164210094835],[-117.46605079748866,43.65820669205425],[-190.44413320298491,35.61308087430268],[-291.33587362939005,52.53253848480949],[-320.7518121685989,67.82283548078249],[-322.73397793174917,65.27725691672754],[-314.5992699251154,59.309526083469905],[-310.8220797787458,27.790666323489518],[-282.9993561960233,-17.005831918410536],[-213.1500819857148,-67.9098059879276],[-127.34357883915311,-74.74239304803643],[-59.17203882023654,-32.468594541591415],[-80.34798938230222,-26.956846606216118],[-88.43098561441411,-13.399643488848255],[-98.36086015695537,-26.148658123039468],[-92.84000880360941,-38.71114444982004],[-101.56925598143033,-39.08132700350325],[-120.00695853136887,-52.37840969792137],[-106.3112457314046,-38.962926690492964],[-84.64693924638294,-47.78571416377861],[-91.56193994596856,-50.31269562234388]],[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],[[35.44955625623993,-323.8238322786443],[69.13366422714557,-297.248735089958],[63.80204905838491,-305.1531572199849],[59.08799706540253,-306.6425770669962],[56.98688045289589,-314.588526662674],[47.727345474526146,-310.0888655280777],[47.25575800986837,-315.12200485119536],[43.0688574144076,-319.6221478870351],[38.444493376752234,-314.0704922160537],[36.257943852941025,-318.5401668182127],[31.146425119192713,-324.6566245819163],[31.40753457017047,-322.1692075345004],[40.7252813261473,-324.4146729447673],[46.39952870103434,-325.95850286622317],[37.266634668656934,-329.5125577514393],[52.49909496417047,-327.4312439395562],[58.93846622703825,-323.08377736202715],[62.438805477503934,-325.72794921395734],[67.77355467758173,-320.4884664816882],[72.8840121631502,-312.6422791236373],[77.23502416765109,-321.224459736275],[69.06976864443345,-315.2644514608054],[64.76626070142322,-319.26437463060483],[60.62168127106372,-323.5474452115568],[59.02387574080933,-319.87954431446815],[63.54454345889326,-319.4463650884518],[66.68194378728231,-317.4206110940953],[71.69783478097247,-317.8950760184024],[62.56525618154626,-321.1888560490719],[58.775030190273924,-326.1962078686108],[51.26402628154153,-324.3427908291917],[43.95232529639895,-332.6491169663724],[38.88147101892821,-333.8084306224515],[33.38008240057741,-328.4947341399129],[30.074312214827046,-336.6472550382657],[36.32143819480325,-338.5109306901403],[38.733504493859414,-349.8132472627452],[40.74127146011733,-359.43270117827524],[43.84623711820598,-355.4917402877028],[46.0566246126366,-365.59102372067014],[34.12636935460989,-369.67718753079794],[30.33455962323535,-374.3284747731411],[36.677665024400085,-367.4232312071915],[40.58267971419298,-369.62891317456933],[38.331171231431654,-359.3730411784784],[38.85080641495881,-354.3048450178874],[35.36420677949127,-355.0788904413371],[39.00326072029975,-354.07001778069684],[33.94940229237932,-352.04433838835143],[43.19199377446432,-354.83240150874155],[51.16132408253986,-352.53136915007485],[46.786883484438476,-338.4799069257963],[49.184538450305354,-341.5337206792692],[47.707587107947006,-339.9926383577458],[40.768820062440454,-327.1840885688074],[52.09589828414914,-332.32329977846325],[47.37583914926472,-331.5730617775383],[51.36117872345619,-323.5896101133135],[51.605089996090896,-339.65075228144633],[44.877804940323585,-332.69535245711063],[43.159815521588484,-331.32858814889505],[41.59841365587749,-337.2334957121345],[42.941821123652744,-341.27488866015926],[46.58134461329041,-343.238184808797],[46.675390257917684,-341.01883397814254],[46.761287638779436,-337.69305775732073],[43.1075266928317,-343.78134692462254],[44.2051267212081,-333.338770858775],[42.57841234018724,-332.7538573270431],[47.03522087520628,-334.55050634398356],[37.380590654236585,-329.6112669107588],[7.726739816561917,-323.7506960106],[45.534143897213426,-337.3129290329173],[42.565224814957105,-335.4287961587363],[42.78198230422913,-344.8392258236265],[47.40272414705805,-341.09352327576744],[45.08275768923511,-341.35147825926674],[38.125279403560285,-339.25532454605127],[47.249304619835584,-350.1391233611057],[48.47902649906814,-351.71437000022866],[50.73941720443872,-348.59265825861735],[49.28673842712226,-352.1337657903314],[49.36065043920814,-357.0921500669192],[48.73697472782624,-355.3393506143499],[40.94942584738408,-359.07465960848845],[38.6630292192458,-352.42462628083103],[34.92949349716673,-349.6710195135788],[43.35104166270787,-349.5473515361673],[33.48439219877082,-344.9875025958353],[41.47941308070381,-340.0906992498619],[38.13878467078018,-337.69603643595815],[36.367288869743675,-336.5493899757731],[32.89357083711786,-344.7271105891622],[38.11520787056236,-342.7169317956584],[35.77811778766613,-343.6543559502934],[37.75747770677674,-336.34579760128224],[29.238146468691752,-339.4780317375569],[20.879667386369988,-331.1879804270757],[16.087855810508586,-332.2060608491121],[10.718376395916493,-316.29766701959284],[6.313386647775246,-312.34644528880904],[3.1279832327877557,-317.7393252620366],[10.215666625829726,-315.4451998631869],[11.774319482554915,-318.72728378333],[7.830649249757926,-318.3485031110704],[17.747653100903563,-328.0834345079479],[16.861171308345092,-326.6166205854306],[23.09853426051893,-335.941491741032],[21.82583205993376,-337.08001803800676],[31.944031015666496,-345.7092417364356],[36.23445516108427,-345.1862877433732],[40.19755835743956,-344.9270632393907],[49.30098045600403,-348.27607064914923],[55.61036695879068,-348.7876190231916],[51.57324347124995,-339.87438522337106],[56.36781486464395,-343.81987324770273],[58.01571436185304,-348.64830552297644],[55.96117045852134,-339.4757220238977],[74.80623420921722,-342.1353993290611],[77.08668782143127,-329.06526716616577],[88.12618700180178,-323.94604596517866],[87.56447280424419,-319.1079468261048],[100.27968259697985,-315.3603014754823],[109.59246133261854,-295.7576630096961],[110.63664696939463,-287.3397316014691],[119.23946321082235,-286.50929102164855],[118.18934191642796,-303.2686520747775],[112.13671389489696,-308.35175463202427],[96.83611309974208,-319.5412480996645],[89.79029956344277,-322.9015124972841],[79.84202692912311,-321.6046167767182],[83.64094192353463,-331.3470969108066],[78.98681978164353,-332.9270318793425],[80.98983502787394,-334.4732737131035],[75.25154822180514,-335.92290039934664],[70.45931656686173,-333.19379478625615],[68.89588827928867,-339.43325852847806],[63.49419664330139,-347.6144233336486],[47.858125123188074,-349.91588426784847],[22.944438252114196,-338.3169162328412],[34.45260229442181,-343.3175322554896],[27.66004727825566,-351.5002404728382],[17.488327529398248,-352.63592942907997],[12.020458573109067,-347.94554802506286],[7.3238021508470865,-347.3488961143694],[11.84062785252911,-342.9990113909396],[14.011489103777194,-348.83344178729726],[24.3067203496596,-354.35432825096655],[29.698808351207845,-337.43626426991204],[39.293432354277115,-338.31285897962425],[48.26189414791486,-342.52206873010107],[58.21661944475261,-350.61030931630125],[63.76762507691046,-351.03600954568435],[67.69138980237074,-357.5913153881479],[67.72933041965837,-354.0456875487098],[68.66240767286308,-354.91287078515643],[63.35649414918237,-368.9818117657485],[51.79933766228851,-372.3107043695436],[51.81406814331814,-377.74729245729964],[51.30826680998496,-378.93842995296177],[41.55107217130245,-383.2252472664409],[50.857664533059676,-373.72615501933774],[54.94953300645767,-372.26578073158316],[56.0198934212126,-362.48330933706234],[54.82495095479322,-355.4720802994668],[58.201326753245326,-351.34034987480663],[63.106428203299856,-349.65289523882507],[66.84309229035966,-339.500476463788],[65.11003319768224,-334.88119464751094],[60.5168097556699,-340.3879676237723],[50.23069922844172,-341.0931449300308],[50.105069417079676,-345.2794139389605],[45.92729408034597,-342.25030337603584],[43.67809084292571,-342.3738500158952],[41.09441801864989,-345.60002434190585],[41.98449178501687,-353.3805855976377],[43.08493835570005,-346.68321463228995],[42.81161983882373,-349.8450268870822],[34.46190633082847,-353.4834799293576],[33.609990729767446,-351.5170579100783],[29.966053310431448,-346.2319395715374],[19.103980095751808,-345.3099081962073],[20.733286930898544,-347.5150838228126],[24.772362632824866,-346.4652665742444],[24.242228873634076,-338.5473418182512],[31.7584295662424,-345.45695587339105],[27.759642892927445,-349.1257584400147],[30.22491312192733,-345.3487950438912],[27.213814945774857,-346.29148852316496],[14.99423166711074,-347.4518540346878],[16.25535076964502,-344.93246626814755],[16.754557376410503,-342.4801675248234],[14.722121732319465,-332.63179022640793],[18.713426892192956,-334.3531397984259],[18.53048857725048,-332.30459918070926],[20.95797295426462,-337.4506607725018],[32.91306193156561,-339.4992119651487],[43.77394497317039,-344.86036459872594],[59.547112272014374,-335.8543946457994],[74.00664093377424,-329.10972507283554],[96.59842994415544,-323.8872288952721],[104.12220474132403,-323.5653353020049],[105.57512745542999,-323.83447836788037],[70.98960050300985,-324.1141918003798],[53.498135123640225,-328.264101890985],[45.225117118270305,-333.6519467451102],[58.373899369074934,-330.8090539834684],[63.542732841003954,-322.36248256821796],[83.19619133703526,-328.4174954698037],[102.71717602653905,-329.1690054134813],[106.42034026575936,-315.5944129971997],[112.39580196389329,-312.2348930102488],[113.96984601774182,-310.62364656766044],[103.33741240381016,-316.52991175227874],[95.1380239944225,-308.93540278407863],[80.1461278476437,-313.78736821275857],[81.28506640548028,-329.831054108716],[60.047419763029325,-322.4859984015038],[63.00151384853609,-322.908032029277],[61.9434328270612,-334.07585993745465],[60.6733671495756,-326.62218051931393],[65.98889674022496,-324.1388473851712],[60.14848009393245,-326.4378190216926],[83.25234337066956,-308.5424552995239],[87.41758872439516,-297.4268948254951],[81.54933438798378,-300.9837430174748],[104.00039704761355,-277.1713088582917],[111.82958306823173,-269.281268878535],[111.6423119400227,-275.7802620436596],[96.63557593117497,-282.0010720484414],[82.34249512758981,-282.8419654845061],[73.27686454329341,-284.5719502938482],[65.9323417886539,-283.94607570108656],[68.58057825922856,-282.42244203657833],[80.60737951166124,-277.05612377147713],[74.86561679396573,-264.0813780388378],[89.42017442125547,-259.26772538931573],[92.33007783113044,-248.71079923651268],[80.39850075637742,-252.30088088196908],[71.43869634999021,-255.22716381992586],[62.01407130278358,-253.29030971327938],[48.736115662259294,-257.57657658358835],[46.11073484447695,-256.75001566835726],[39.30542002847528,-259.5752494265498],[34.87691391546423,-253.60214454126321],[30.439985673541855,-252.46360813331853],[34.24009249083201,-255.7229697688233],[38.49025160104827,-242.89650312210722],[34.286743893596054,-241.5220417146586],[39.4919229953191,-231.21423473834602],[46.76963509963525,-231.22239230740115],[60.77231947879841,-220.80071955159303],[61.13190851476202,-221.95188313172162],[61.30739232188637,-223.03704800763512],[47.67576505623117,-215.9800383482443],[42.22668799444108,-219.23336189029862],[37.658700043638476,-222.54588926118242],[36.81477726855201,-219.5792029785706],[39.934586032465006,-212.97388189780554],[45.62473450463051,-207.12113334382752],[43.48447960553165,-206.14915716365465],[38.091151450571715,-206.54117367612002],[36.531335427101226,-205.5316096475907],[33.84238692470694,-208.28284902711403],[26.286467270457024,-209.82024174695778],[20.464009295653568,-210.50262116550198],[24.771088483734275,-217.90028983562013],[27.97655941005155,-210.41695418673908],[24.468439382690008,-210.5115089169302],[26.971171047141524,-212.70047396845223],[29.1911304774203,-213.00123605363342],[35.826057954510475,-215.90540866926017],[42.00176926657082,-211.51707254004805],[50.485006477251204,-209.33604507782388],[63.55758064918393,-204.59715343058554],[70.255157914503,-199.81433627117087],[70.70895452183089,-207.9611800231428],[58.2675188713913,-220.3072003112302],[48.008106940462085,-229.22665748965096],[31.21528651892612,-231.37267359740395],[22.382844856877114,-233.91743572452015],[21.205844804415847,-234.2384253564129],[21.061028062035746,-236.29068318065333],[32.14567830234756,-235.58172679542736],[51.25206113853676,-239.23387617391904],[64.38013672687475,-234.8657939362265],[71.15641457414756,-242.23540686504577],[52.82549943058416,-233.77208535449336],[47.39249180262351,-241.72370355071052],[31.214394476461166,-245.96249162507956],[22.808482495767976,-251.24967324168665],[17.20585922226826,-254.82680934819166],[19.604542053389878,-255.5018685080961],[25.608152714297375,-254.31764468545612],[26.52847016713315,-261.8227672681219],[29.659001677144715,-257.4936309697109],[40.53164087053415,-259.2007665407691],[43.850157058086666,-257.34150860554314],[57.21978618658369,-258.47110838806316],[73.35986632245374,-256.8058709221368],[91.68560760918638,-263.5534400683807],[89.21725741362161,-261.95842062003044],[91.82823588962708,-263.3541639041073],[81.16080301387399,-278.5224712385659],[68.19594477211677,-284.2425660298129],[55.3031966769405,-289.74481469548573],[46.66908789202171,-296.0766084766466],[44.14620442509704,-299.03655310260615],[49.65778130396279,-296.0525880285762],[54.48183605359941,-294.2549708166507],[75.41625079378332,-292.58608458347976],[77.37317221025364,-294.20673598311646],[63.42732437405198,-288.2724831324366],[61.87291552025209,-298.13440248423694],[53.373748427282976,-297.220933606726],[39.76145654952518,-297.9972110936419],[37.53519418204701,-294.7301583358583],[31.253271118411135,-298.66115615135834],[31.977046730764982,-298.64013003179707],[26.35126719716925,-300.1335139926417],[31.65072208212098,-295.73556572557777],[27.386427558261175,-296.9436337967502],[26.86860013224532,-299.4542605443569],[32.174685275219645,-303.6000496877763],[33.42398385713,-308.12867881658747],[38.30211205266926,-307.453466209972],[42.72916833162401,-307.14682010192246],[41.861218412168455,-310.67418305201795],[41.52924767220861,-306.761114910159],[46.4225517632882,-298.63231393616707],[47.390040691940726,-292.16154436865077],[40.12722651129343,-292.9837168670065],[36.13933818783926,-288.0956627047565],[34.96242909492628,-290.2223439696836],[30.85589530610025,-295.1358475323018],[35.397773880232535,-298.8947505309874],[38.82242686734219,-289.8378290357132],[37.90855348938044,-292.35582703645036],[29.81214239247447,-281.46617702018534],[26.09201400596271,-283.8729634677727],[22.89186298788718,-290.7723643326847],[27.40938559183371,-283.49629810765305],[33.69057446316606,-296.72127779002653],[42.02941315639259,-298.2476672147179],[53.123387746784715,-310.509797038691],[39.09248239571673,-324.9711649229704],[41.46695720346975,-322.9044933095207],[44.30444485033445,-335.6707269610108],[45.23617034380277,-336.2316356913675],[47.031622084478954,-338.3184527383112],[46.00748124607833,-342.81397530545007],[49.329210070874296,-340.5534988717561],[44.387576587142235,-366.8495984721635],[59.70184379217187,-368.9226612488126],[63.83700998423171,-392.6295882146758],[66.6868409259348,-396.61012840420256]],[[-52.75682391862517,-324.2615193869159],[-44.59943188541604,-319.22665465768205],[-49.941676875171595,-311.5959479035148],[-51.62157716051985,-314.9509968482623],[-60.887538207651346,-321.21995030055496],[-67.42069954564533,-315.58379737910957],[-70.44895842725361,-320.39968425378936],[-76.66896178126171,-320.694741498222],[-71.67882708494619,-316.4384942425784],[-58.88724841863473,-317.33816998962027],[-58.058233917580196,-322.75575014284505],[-50.70215324514095,-322.9157514966446],[-60.94890001066392,-327.5143825448413],[-66.4615912248903,-331.1288861229666],[-73.60983287175009,-326.93856327455046],[-93.34160361111071,-327.77432081684424],[-79.16996640204098,-326.2204195104214],[-79.4695976729356,-327.1893870201616],[-72.02608087217686,-326.33352690169795],[-60.02731906161375,-323.73530558909806],[-51.58670343025119,-330.47137295772643],[-45.38155999950118,-328.0684880395046],[-43.040412840431145,-331.20312075538504],[-39.52281337984732,-328.1237788908352],[-40.08700039630105,-327.4360376520315],[-40.09858336542237,-326.2082225880347],[-49.01046429322827,-330.8530587904876],[-53.77516523690434,-334.92054484487187],[-63.74435314637941,-332.4530681501959],[-70.96359444909632,-333.0874701460191],[-74.96952270895423,-335.13425847023154],[-84.71797584893511,-334.43935898234383],[-88.71063964422245,-333.51680658517023],[-86.94873843397926,-330.39332169302725],[-84.87620671420234,-333.7213439304787],[-89.64282364958416,-340.4631360856746],[-82.25705725010357,-339.81015569765566],[-79.75462571800688,-348.392877468601],[-79.65043769517831,-347.20717203253923],[-77.60738256874492,-353.2172969030619],[-78.30648718437055,-357.7901898170928],[-79.0775745774439,-367.1128955088184],[-80.66731120523775,-361.0840208708198],[-79.31508280549264,-363.09738180346994],[-75.79226582930602,-348.8761183030672],[-68.68866866783253,-343.41955273794497],[-67.99127096637136,-350.1328756339258],[-67.4896662089667,-348.7702346934766],[-68.72515947775588,-348.93637896566725],[-59.263320451758034,-349.60853279235005],[-60.194303166390284,-352.51435348549785],[-58.022208357585555,-342.664057235206],[-56.023257913834925,-338.73130333781046],[-55.414030429390436,-344.60434749580327],[-61.850202223487656,-328.1600961116932],[-49.822514661387515,-333.2773921084138],[-51.28758358503461,-340.52182513788296],[-51.027079949314896,-332.8243535756203],[-52.62624133211733,-345.1341536864402],[-50.027755004507924,-344.78345832484],[-55.72209680650616,-342.29588976965374],[-58.923918350707936,-346.3790626268635],[-56.49294769978724,-350.53334781847445],[-48.8722935090629,-354.24636694266326],[-51.65524455078764,-351.3818197758417],[-51.06866954185739,-350.3317667716285],[-53.033787286501365,-355.6077174077773],[-55.67207367608819,-342.9861096513623],[-51.48936694932257,-340.75633052938156],[-56.175679660156106,-336.4771620712198],[-65.04469919988787,-333.19099232682106],[-96.70071188284203,-326.42830003795825],[-55.3807270186,-337.935577924977],[-58.26248274155239,-339.3987677436726],[-60.443970501179365,-342.9861780178603],[-54.76019954292627,-338.9624967498305],[-57.00545133772067,-336.63755590722417],[-62.03567542804956,-345.00148588325715],[-58.68380450913634,-347.3010059781768],[-54.687589759647665,-349.5743224746643],[-51.21755947618698,-349.9765010636911],[-52.964089002047785,-348.59748893450796],[-52.22199866762793,-355.0795684845293],[-56.901483260921,-353.92819772213204],[-63.02089943264747,-357.74502442200105],[-66.29984170595304,-355.4916602584881],[-68.36542208179861,-354.50608342308306],[-62.583738068148136,-342.5987175218288],[-74.9123419935678,-338.568251259513],[-71.37386397786906,-331.42002893445306],[-75.73463232932136,-329.80396786432516],[-76.67157531526868,-331.0312349169004],[-77.4585754223175,-334.8788894059286],[-74.07024429058333,-336.46198244381276],[-74.68474819220046,-334.4735130012357],[-75.70840201745659,-329.7100599119825],[-81.68138327900556,-330.69316623700183],[-85.82287364925264,-325.93636030288553],[-86.90382182233168,-326.11172873745306],[-94.40190470205425,-320.27824155031067],[-98.20500034979796,-316.549892219258],[-96.73474799612654,-308.5970402624275],[-100.53216815559335,-319.4664528063065],[-99.55140168735647,-322.1856648551882],[-91.37046654745325,-316.25094582511997],[-91.26777580267037,-320.5991800414579],[-87.83000942230308,-323.93291549904234],[-89.53549049617595,-327.6154899169678],[-82.63822396743274,-330.49431570505294],[-84.11818683701472,-338.15110516909226],[-77.0031282041897,-338.24914069308693],[-68.89517272886167,-343.83874389303287],[-63.4244174748593,-345.7717234161146],[-50.07871413900148,-343.3976344237667],[-51.91074839499356,-342.12088407886813],[-43.481872486455984,-343.95099566352326],[-44.23083854693124,-346.61053393984116],[-37.52540029684678,-340.9523420663155],[-16.10946214410575,-342.28162049639104],[-19.206683848588682,-338.4483461790178],[-5.454531254059702,-338.3034073738959],[-8.452456816717074,-336.5115993957254],[5.924085607493566,-323.49468293614643],[11.849061212572053,-312.74179121174086],[12.773263074021486,-305.70299045292745],[17.822906067832378,-307.8292479727445],[22.78344849175437,-320.86622455006477],[17.026552547343158,-327.99958721825715],[3.2771445138345143,-329.9393068234881],[-1.2207062865432476,-334.57374924354485],[-13.602051995492957,-333.5762202051973],[-11.323544393813052,-341.14881272036905],[-14.447701358667757,-338.00456022796754],[-21.210492675944522,-343.79086931533107],[-24.14552313427089,-346.7717979477293],[-29.265607589035653,-336.7707820325734],[-34.412583542167226,-344.4413259260293],[-41.288667817310284,-352.2183013809281],[-53.548816639603956,-349.5811671774559],[-72.44087847157545,-345.6101913459614],[-69.17671232384419,-340.12944390903476],[-73.11994544935169,-347.8659401989578],[-70.5507567863641,-351.37585748962886],[-70.09741684803157,-345.89733849001254],[-67.19424151309295,-343.92212542217385],[-67.37535409617965,-338.5398764193735],[-62.55277569005557,-347.9715367880042],[-51.830559477279394,-353.0941858777999],[-61.704239043178404,-336.57801027336313],[-75.63505736880916,-338.4677807420403],[-77.25208843503708,-344.34847897565135],[-74.24543255033575,-350.5679957769223],[-71.12547980894891,-358.71201300224914],[-58.85375493078931,-362.0995650377549],[-51.1604817404226,-356.30510490220854],[-43.56214215835382,-356.874301470712],[-40.51263113340934,-373.9772155240046],[-42.274497126747974,-377.67397594633326],[-24.386593591116934,-383.586623656915],[-26.21727966234147,-382.83345099591725],[-33.31647017539575,-382.91195489671213],[-28.76399240744746,-375.9383204086055],[-29.9604991726427,-379.21771346022183],[-30.463733105793892,-366.93268335271387],[-28.89405258554973,-364.75795874465894],[-41.89462103321546,-363.84167875200956],[-43.2029151103884,-362.80451605478265],[-57.95081143776508,-358.5196467030495],[-61.00367256597082,-345.0461651211158],[-68.08720441227206,-347.0322901925374],[-69.03487917950451,-347.56266419370695],[-78.20087944824013,-347.170615455424],[-80.5227801558159,-349.99652408320435],[-82.1501310419535,-350.6200430280312],[-80.96528045504851,-348.5842808354704],[-81.63687334063275,-356.68874407877115],[-86.72341501293681,-347.61008835427197],[-84.23223247615203,-350.35213362666514],[-83.37338759591171,-347.8169719838379],[-73.75573707137528,-345.6772694410687],[-73.76917287218987,-339.5425569240231],[-69.15645172897678,-346.0101039541714],[-70.50126653543384,-343.9339527491811],[-71.58912157748989,-341.42656688723855],[-67.120785457171,-340.98346726552745],[-64.50589391651908,-345.7569398800724],[-68.86901334952245,-344.25494343444655],[-62.77731420739019,-343.6622863553637],[-71.91816266524484,-341.5080042061396],[-70.347358687157,-337.34042216083503],[-72.70080839420507,-338.46512015396377],[-81.34047072177736,-342.9723227466077],[-88.181089230662,-333.57463483764195],[-89.78998432215201,-334.49197537894656],[-110.49147020192038,-332.0111076320944],[-119.58302298371632,-330.7550259617567],[-118.91876044498719,-331.7981880622277],[-111.36182262925496,-330.42897460150243],[-98.10991229100188,-330.3244644637823],[-90.84935272431886,-329.0952223939514],[-67.94715725761608,-333.08934120006165],[-57.10953130149585,-334.1443157696907],[-41.33401013755321,-341.9167780120699],[-48.487677505932254,-336.88864801049976],[-44.50098802809907,-338.41384670857576],[-53.36198725945138,-339.26492934332043],[-49.76865749828971,-335.7611532027804],[-44.39324900916574,-329.29966657924933],[-39.67117800848803,-340.6540417215924],[-36.1757738938968,-341.38235338739946],[-45.800184286486115,-335.6570800416348],[-60.93735680932383,-333.7884881917795],[-69.52009380385402,-329.67404121390814],[-75.53535596104086,-317.74521737122734],[-76.79308491927759,-310.2463543374056],[-74.60245268844892,-316.55611088035107],[-62.12703920164165,-321.0246159795995],[-56.53744067602588,-325.8457270017341],[-46.936154107825814,-328.1692203362046],[-52.101848364966486,-341.2993078007871],[-69.72379427296289,-325.448846037522],[-86.77385927824582,-317.674199320591],[-103.82370226643081,-314.1899760734127],[-112.57723390086954,-300.0499327358666],[-104.5027267583946,-301.975074976358],[-108.32596812710301,-300.97661699607215],[-74.4297572158685,-298.1576570792172],[-63.285677585899066,-294.70201435880676],[-53.54415390774062,-298.0658899322782],[-37.63359782957616,-300.46200254789244],[-35.71729833414366,-300.5058718841724],[-35.22140442766664,-305.6004459872927],[-36.56110236212237,-303.85419700975694],[-28.773863887287064,-301.2410373933883],[-26.69491350812683,-301.039553318245],[-34.371232211675704,-287.958863976816],[-39.27934339159896,-274.8976967835199],[-47.29086873203221,-271.8191029528127],[-60.83633122484787,-260.28243835848616],[-65.0741554130446,-257.3405743769847],[-65.4828020348034,-249.76044217263416],[-68.90220999456773,-248.1181133124685],[-53.590043615858406,-258.0950225401964],[-42.975302738390894,-261.77992541006165],[-37.788421778122824,-256.35302835111156],[-42.42720131575629,-253.76520791780968],[-50.609442093163864,-254.20393016596222],[-56.00388212877351,-241.7342534985902],[-63.90641934017157,-232.36718437844092],[-67.58133574714992,-227.87270288581476],[-59.57260189317054,-228.20608578264705],[-45.34554494691099,-229.76260002712218],[-38.53328087023931,-230.27816583135927],[-33.15168270142635,-233.91747152778294],[-34.146588588984514,-225.64242664162316],[-34.04131088660364,-226.83692472351333],[-34.73517243027288,-226.76432960393538],[-35.96817900543124,-226.12392182603128],[-40.2264589301538,-224.96572580268912],[-47.03401948816804,-224.29649978404427],[-56.198911411680456,-219.33936086479605],[-59.87115259792995,-212.1305280593417],[-61.0852441928169,-209.33180677286407],[-60.03329302332389,-205.34803784117776],[-62.79736454534424,-209.643247605194],[-55.08956794922926,-205.5844778502037],[-45.08602081290019,-215.53595402837948],[-37.71430457965005,-209.49084145103825],[-32.57863457516078,-209.64311956494896],[-38.199889780431135,-213.44972020435046],[-46.45874513253,-215.08815210173566],[-49.38680101033867,-216.85121363519806],[-66.5593878128679,-213.44724655190794],[-71.6616459185098,-209.84070936390935],[-78.4562789795396,-218.34444498658593],[-65.35290805590148,-217.6342708304154],[-50.43230601201884,-223.68956935848428],[-38.81528804264707,-226.91545523202444],[-28.930451678272448,-234.853808745768],[-34.31992643058038,-235.38675994592222],[-33.20934292297221,-237.57367180183178],[-34.049073521081255,-237.51790776501218],[-34.61033773806378,-238.12750291234238],[-36.10947333151586,-236.0456622013985],[-39.45259805916038,-237.7354722859343],[-49.98950972159952,-236.50684984339932],[-67.91757682702598,-229.80579216130866],[-71.9910136498599,-229.55807752783835],[-71.02398093694097,-241.00424159436352],[-69.84849869080921,-246.67835221503924],[-64.65602856403132,-253.88137165014814],[-53.75119291386875,-257.3520932625521],[-43.34663051161664,-258.2366086620982],[-36.40873881509572,-253.96073091079597],[-40.29129519057858,-259.9743386796831],[-47.61804949028675,-263.53434189461086],[-58.07258977509855,-261.41837894067385],[-69.14631837677797,-262.5005479945762],[-81.5318704770126,-267.4387591605864],[-72.42661143306339,-279.029456569815],[-46.927319897140535,-283.33905711247326],[-33.36764312456029,-296.3462909410039],[-28.78346152120315,-295.27377977139054],[-20.050179661083575,-295.412545729625],[-17.248969349573372,-294.9034560419516],[-19.385933784818064,-300.2117169973376],[-21.710979341969278,-300.5435717113629],[-29.370505440554496,-301.56518946142296],[-34.5265416857377,-302.7107846237019],[-40.349677547649264,-299.4561761887553],[-48.53481500197,-300.9974453268344],[-53.8453356742462,-303.1841539722234],[-71.01917570422984,-294.09287390717543],[-79.6736243039415,-299.41607528754344],[-79.9126784966727,-295.69468481418835],[-88.38525461525984,-297.61636277574075],[-83.91021590100854,-298.3953157133524],[-78.120635663945,-299.69150521719723],[-74.35072177108754,-298.03144696669847],[-70.90692198986147,-296.2842744086439],[-70.56703764582028,-292.3726695829141],[-78.00629811302764,-293.29723011185934],[-83.62539911417821,-294.33209521868275],[-76.16799038862149,-294.36855291437644],[-75.54767348254569,-301.0141194372544],[-64.56136701847083,-303.6856783687083],[-51.48186560467707,-302.59342655222804],[-39.621846307960595,-303.7464837259315],[-46.96961885146476,-302.9721475954759],[-37.913570549611336,-298.38906302800115],[-34.73194762871941,-290.36531398254874],[-38.39753457183565,-298.3297631899902],[-40.021417927308505,-292.90271300373684],[-36.17991428687071,-291.9847187540595],[-37.287299539604646,-297.81266288500024],[-38.23423176848769,-297.67310039197685],[-36.55059852281698,-292.70376992248976],[-33.618366583950376,-296.4305017014992],[-39.053091004453336,-291.7119194895183],[-38.17420159725367,-292.9543295905655],[-37.02179534639515,-296.3569346244076],[-34.44203666281442,-288.2691519469563],[-30.90607781122219,-293.0513954343569],[-28.74275753169718,-294.19428516953235],[-24.604029201673256,-299.8525281159532],[-41.57143245836096,-311.35806231140384],[-51.11834753050283,-312.89918545389503],[-53.93166073544029,-325.38582738136415],[-50.984523977158574,-332.35575497195464],[-46.71987823750976,-339.35414189289804],[-54.24552682074278,-351.7271446001279],[-54.87388423147081,-357.1262433614736],[-55.602423166789436,-383.9704149939016],[-42.708751476538566,-396.1774364383141],[-44.72197849315984,-414.8817163215758],[-43.69412129403804,-419.9542512859356]],[[13.58868562008081,-499.6529303426331],[89.15630443449675,-452.53477686310384],[90.19262242010245,-503.08911646033243],[87.29460979514931,-502.904407826192],[77.78306539530968,-520.8018235992242],[66.04318467515031,-488.737902845609],[48.86758982741742,-510.0382626851243],[38.51901758238023,-494.5597056838759],[23.50830168069399,-494.1663445788686],[21.92739882821479,-504.6488958628862],[12.808991458909304,-484.4029220778548],[21.817473961556516,-486.53905173132625],[22.856039592586285,-507.0255730191586],[28.810661789181495,-503.92829199041034],[26.423903154965046,-515.9451491254401],[48.02468877240824,-509.92958476164813],[64.80176815884113,-507.0865176362904],[75.51913717222101,-502.65916193006524],[94.0676741773915,-502.8275786184977],[107.7534966435905,-482.30337157274425],[111.11686715538019,-513.5588318207878],[104.28408012465843,-509.331435155702],[96.6292264474398,-509.4884168212859],[84.8228849042498,-502.3363935168916],[87.78459523881929,-499.45717455148906],[93.49079763089003,-493.2447549456433],[100.3542909763338,-492.3818710056072],[101.99546141006556,-496.45242578457317],[89.33154118613652,-495.5058738364452],[72.60219098972743,-520.7662996688202],[61.16052514597345,-503.68366430505785],[41.202536165518154,-503.2881916746252],[29.166069035741998,-522.5124870573544],[29.36969726564746,-504.15892584967105],[18.77185961112025,-514.6780920599797],[16.12302614991654,-515.8818013868541],[19.98828658605339,-526.7704060545351],[18.83415435142956,-533.3390842198419],[17.340793394707134,-530.8277597324192],[18.621209905406886,-547.3125756179772],[19.147843050189408,-537.6501911139851],[16.171955273362755,-553.0136611941007],[26.157514980994165,-534.3536073608045],[30.666368050903202,-537.9569598144483],[25.935272054013467,-540.7738195387419],[26.974411192141588,-523.4759577075242],[25.16717835153247,-533.6068335553889],[32.554377396135465,-530.2054871596833],[27.777475762772383,-526.0769963660744],[39.60017116714994,-534.6624205003621],[46.01425502675738,-533.6843373083179],[51.039344815049844,-533.8639319580934],[50.8372163649849,-534.5327398450877],[49.70870567216048,-545.4296984988514],[45.345306697241995,-509.05856245446796],[56.312180844702084,-525.4451042137953],[61.49992664727813,-510.82012172167344],[65.64540555418307,-502.1186310634505],[56.82343104644326,-544.7563537167559],[60.10545014674608,-507.0697650411928],[62.927186545532436,-502.39917019704694],[59.08016142246436,-508.85288115423464],[56.814115685871116,-523.8454559300247],[61.52435310117312,-510.70422967998695],[59.66818445571084,-518.4646181622618],[62.08244848772961,-508.64249434387875],[55.56812399188402,-519.8169787286145],[60.410622646387424,-503.0066170535374],[55.5265490417039,-521.0791798819707],[56.876258758663084,-528.4564403297253],[50.11419335858193,-518.2521865591702],[17.74699327679366,-528.5228671706332],[51.86741371720632,-522.0070929203832],[47.484477830921264,-528.3003516134129],[43.94171591085728,-540.8268168966201],[46.38260348163385,-543.1923928097985],[46.8448078287621,-548.7099312330738],[48.69850574317991,-539.7306213661718],[43.51169444333948,-549.3899551892691],[46.92988669982685,-535.275709163567],[48.06272112478132,-536.1463855986674],[46.70905532032384,-533.1585939284607],[50.06791342647375,-550.5235666929229],[50.038828810462064,-537.8906063475184],[43.21585411002718,-526.1512069544867],[39.58728982942591,-522.9683584723841],[37.83334166990653,-536.0683934053889],[38.37743712329075,-527.8527916326404],[20.840730632270947,-530.8866639099507],[22.103363620273967,-527.0174540449207],[19.72879990373349,-523.1230219083004],[13.4089100978847,-528.6034557628801],[10.771373450586907,-521.2714331785206],[7.0011669694467855,-543.1233957375496],[10.12701900672812,-534.7485414220848],[9.57497712421366,-524.4899308645398],[3.624218408973661,-528.8267411358427],[0.10061001155804661,-519.8965800481683],[5.228858426953934,-528.3035085579842],[-2.4036888465475386,-508.9796836549351],[-8.282939651560696,-520.7859657101333],[-8.069381537609843,-508.3784145478726],[-10.083849958107976,-500.82460394156374],[-7.600113188840737,-504.4012946627163],[-6.959863269980133,-496.74205936669546],[-5.866052399450382,-494.59016838364414],[1.6708003992192744,-506.8627130239229],[-4.763768867743011,-514.6570260029459],[5.630757569855632,-520.210358895587],[9.691065939330656,-524.0453824418605],[19.520034667524897,-514.5721950233183],[21.40033214701009,-527.6823734769746],[33.291147518872776,-534.0702854272015],[44.87622019070625,-523.7215022707412],[53.71313786152916,-523.9975979284013],[59.37678364226906,-529.5549044419955],[64.52364993157221,-528.2239993859589],[68.74165095046067,-512.843687293575],[90.515531229119,-527.6615620767386],[90.29794899074341,-514.4912173023758],[109.09850643699133,-510.44696788722536],[103.74747823239187,-494.85881827130834],[120.73707934031569,-497.0993670204406],[131.04844857548676,-487.6809358012473],[143.9105788887174,-491.0636826362602],[149.25032832909426,-475.4648835751859],[152.87700570785438,-511.6743421807978],[145.46524272208,-492.52459746417935],[123.99922704516734,-501.39220598981933],[119.32173055794067,-497.38485778286395],[110.94447060094308,-500.2350162343329],[106.71343747284135,-498.85880552654135],[102.3988267463265,-519.9803733081343],[97.7170743296897,-516.2780937927098],[87.37252921657011,-531.5789593917173],[76.48818415917276,-540.989192073931],[71.82044297236712,-554.9079704494857],[59.403446648615386,-565.7419905701961],[44.052182020157375,-560.7604730641422],[26.58752665670295,-518.5195682353266],[22.041232237206373,-541.694504176472],[10.74526022286068,-527.1378214708564],[7.4891716065166065,-522.6190044543267],[-0.017823694868980056,-514.7513746424409],[-4.049307736201058,-516.4639180597221],[-12.686362020151819,-518.3548156931231],[-5.054968273459963,-517.9726578142531],[6.967479839874045,-522.2209226574046],[9.110874264911445,-511.0580056950116],[8.70074783454595,-526.1446953307163],[26.43762891130848,-514.4574378715205],[44.128722594114606,-525.2300426002628],[57.56719553947903,-531.7649716710315],[75.54680963187548,-533.5166422046459],[90.7890770108869,-545.9597612045736],[97.05726859651418,-519.6815213697553],[107.33287599138748,-558.6056992460847],[106.32798697155317,-593.8831647308759],[127.72779079437197,-598.5843124294599],[125.56149619105145,-606.9145026655472],[130.05905982099915,-597.6645058844585],[135.40032007603116,-583.4031362059945],[125.66120694507396,-591.4861537871052],[123.65047530795482,-572.5438752321836],[119.3504415112414,-544.2713645978163],[115.67979910838085,-534.713134480794],[110.7598857209639,-530.914987980633],[96.88523328612064,-520.4920258086623],[82.57860126336698,-518.9088614422637],[71.72662902682043,-537.0972147463694],[64.15840759561127,-526.4015444211991],[50.94024691676236,-524.6291080781848],[42.17631287308393,-531.7711978184902],[35.67674499387874,-526.0456737513866],[33.34384334572519,-531.0204037570826],[30.687067831470472,-547.7649316986642],[22.32891056443509,-532.5557170243897],[23.90967434985157,-547.5633945065692],[15.12662747034301,-533.6222086094576],[12.125011488604628,-550.8956919060273],[3.946233330289033,-531.696457561322],[-1.207362837089022,-538.9125865924159],[8.992517432388809,-531.4681091525379],[3.7007664830928206,-533.0318341982231],[13.438130773480339,-526.0604752422764],[14.685337664962049,-529.8801438306391],[7.78116821264166,-533.459296393526],[10.956082136071927,-525.5967891471012],[3.8546830200680233,-529.6398281312205],[-5.404429364096245,-528.708913437094],[-0.5852169766495763,-523.0594113048636],[-2.2906839558852425,-541.7857740262066],[8.247381756414029,-531.9486135937666],[18.213400365958364,-546.2773336078851],[26.122780228720444,-553.2306323290735],[37.485115240619166,-516.8483548802576],[57.05994692199465,-521.2435876533942],[76.2548372503311,-565.6793701753925],[100.93668599343209,-523.3069226942598],[124.43752493439541,-499.2176777924949],[151.93967733195745,-498.61327806330746],[155.1713901496346,-500.7963958158399],[139.89721545463647,-514.0935068024837],[87.12050624127488,-527.3834778575365],[81.47461777556737,-518.2762801342911],[74.60472050647962,-519.7291579250799],[95.01705793607078,-509.06264788548515],[125.26959088720992,-501.40136365012063],[162.52537280470688,-502.09484461243505],[188.4077047651499,-473.42070486255466],[202.2451057125612,-468.5233051770763],[193.2122757466093,-476.4286174004018],[170.202236177994,-485.5316608500659],[139.38335396935122,-484.4886634787687],[116.96318417805128,-483.27507121066014],[100.15851663025626,-503.64904364894164],[92.79694455319395,-518.8240204602048],[69.36706387128777,-508.6775436863593],[74.50742576530183,-506.0902925070444],[65.70427784288677,-508.9694014079712],[74.73525050237129,-512.9518752273613],[84.21108154748435,-521.2378624338164],[83.19746784709457,-522.8195315180669],[113.75477454101804,-496.9328359937888],[138.09309306355158,-480.82639932409825],[138.0218373656819,-503.0436441364177],[171.8403183584452,-446.0286233093325],[180.28572514066832,-424.48526130634355],[174.2793629136561,-437.58463359252846],[150.20191699999384,-459.3387371275586],[124.87504590212734,-443.6582814603405],[105.3017830715865,-426.0828666485784],[100.24208649466459,-424.0360540375664],[118.15409659460352,-419.99777150278123],[129.91869407926032,-405.3370833529923],[138.83829641431805,-379.03979427114086],[151.7034565412012,-384.28574637996985],[150.28511443047648,-373.6645352156761],[122.96599987246066,-371.03053061960486],[99.27997929694004,-374.18322506100685],[81.39625858337558,-389.3819572915329],[64.0063085409181,-394.520578308475],[56.70833223161969,-390.77057561908873],[44.17970536391874,-389.24646915037215],[34.200321298201516,-377.4557387653126],[34.73344259563578,-377.2590861381052],[41.51552079934231,-393.0121874605645],[54.05767934301821,-390.30126140375467],[55.01593097842442,-386.2582670821639],[65.36522900170121,-370.11725925584255],[84.52442172204337,-387.47818012581024],[103.60479677597266,-375.9970852130631],[106.37673496185289,-377.77079012947024],[97.35341302815675,-357.3203076797697],[82.81517338633472,-339.49987773843054],[70.93759606979285,-339.83281052230166],[66.9224855639028,-333.03735968814306],[70.66291055336364,-315.50884937733133],[73.50634923302897,-308.3413654002834],[78.64010971962864,-311.2764628406576],[72.78116721269112,-304.6294566517132],[55.60246352254126,-306.79308809648865],[48.439223576917016,-306.309207694227],[40.04720378045181,-317.83383305939174],[30.076347288237116,-313.33553519398595],[28.39080458891374,-317.15152358677983],[23.077878499385747,-323.82345239565655],[21.95004590562644,-317.90496521380373],[22.082884170792227,-315.93964682952003],[26.373963146102483,-326.8666832974726],[31.501722863817236,-330.7415495366474],[44.0941554625806,-325.71579035559193],[55.49533470543258,-328.3645130784421],[72.87369669037571,-311.8016385262879],[94.20768571658505,-315.3533110055929],[119.36035899105605,-303.6909279129201],[113.7773877299237,-312.1782587045316],[88.36925833373948,-315.8713866902913],[66.04120092072066,-335.3864331272914],[50.582016943184215,-339.3525743702214],[29.124614720808154,-360.92364575041233],[24.973008272660707,-374.24543975003564],[28.8598078114926,-372.6040567601449],[42.858372695594085,-357.755241541194],[77.5110761234535,-396.33894666566266],[100.80686740240264,-399.5160205643988],[101.05248862876806,-393.50902666583113],[77.14086924882304,-397.4432108245676],[57.974566279673525,-389.9987912828915],[40.82460930007676,-404.9766131127244],[28.59826717633848,-390.5965621471396],[18.923494831050107,-400.4241955620024],[16.254670377827438,-407.4805012447407],[25.832026394177547,-390.22897664745324],[22.94752854833621,-402.414960550293],[28.563678027812898,-400.2380947531349],[39.3860673634025,-399.75245376622456],[56.75121194527105,-388.22099383420755],[68.97272885163403,-398.00193569428166],[97.87506571704216,-389.92373311041774],[126.9849780759996,-387.89705968461476],[143.7284941737558,-403.2073438560667],[139.21569264443275,-404.97266980504014],[123.74010889632552,-429.5215658169802],[101.17720670048806,-448.45536323100305],[83.69913243645823,-441.8132624312375],[63.56744014633432,-450.2164947324003],[66.24522747291019,-461.62292799751094],[65.89177206213998,-463.1523234935365],[90.137568166054,-461.91470636451663],[110.62497557107997,-462.92796357098587],[126.83828169471622,-445.50529243922165],[104.72688129662947,-475.4923666838241],[83.09560290296037,-464.42577189759436],[63.01375248346267,-478.19841945965663],[43.55626765627824,-464.6275614444071],[32.285008684203035,-472.51933661573],[26.82977306488749,-466.1940774227868],[24.971187175130808,-474.0461415759323],[15.256959883169998,-472.4343647041386],[22.627381433244068,-453.9194080383818],[15.705146103970833,-454.44540457228914],[14.433680206477447,-471.69200288039747],[23.14624358149979,-462.01778041316936],[27.63446537803179,-467.4391193685466],[35.929643658532655,-474.7151743167349],[43.38247608949939,-487.8794911764144],[50.94831778323521,-479.28932376746684],[53.6738880878321,-481.21008101714506],[58.97578482916526,-451.8722316841379],[60.47332776023029,-442.7656116125056],[55.8061786398157,-460.30475245606567],[47.503158744431744,-460.6153320084493],[45.4072180287078,-472.1866635737788],[43.750609314689314,-480.4564502677738],[47.55265028996723,-475.44201944562167],[49.14541337930848,-458.05639912141964],[50.69419874608809,-465.3259181041151],[43.342870788156006,-451.1092893807863],[38.70214440544305,-452.7174692602275],[38.8456642811916,-472.40572620179523],[39.22179251588,-467.122370438208],[39.53431651720041,-465.43384547523806],[51.0685860670817,-480.15292979044307],[50.30160816434079,-490.2411785598183],[35.18444426754138,-488.36506104672856],[36.61199538939695,-493.98134758014646],[31.93977433564055,-511.2264501903908],[25.607372777731825,-496.12747831356614],[27.189310325583506,-512.1427102261291],[29.255963942000562,-523.7742076266292],[35.92389481162445,-532.8479056979693],[28.070830408888582,-540.7629839767703],[67.0164181395744,-523.763785035791],[71.50211277579297,-549.9577794258098],[81.47693088863502,-555.8921397271173]],[[-51.79484213455896,-492.47064165976315],[-14.564579249995631,-487.74129969793967],[-23.74218733343156,-475.0246452034153],[-26.713853340923038,-496.40276593857516],[-43.184876090181206,-497.66996680504553],[-54.133957211303766,-479.3870459204278],[-71.94701352263877,-480.85253709990786],[-83.69828493305528,-481.038803355135],[-89.92730523926474,-474.7747435252154],[-70.51920764622685,-487.27621123068513],[-56.99510286563259,-489.87014993565435],[-45.62904905704647,-486.9134412027536],[-53.727361644382086,-516.1275232362475],[-69.97215292347767,-501.5243177968398],[-78.96820046308903,-516.2282459926175],[-109.98571581619655,-516.3920054704502],[-93.52632125150978,-505.50480043550806],[-83.08240702690978,-512.8563058153038],[-59.014956353131936,-498.3054686653161],[-48.07429305093035,-513.8063516377308],[-28.695199011796035,-514.5618656849705],[-18.5146640618579,-523.4595928782745],[-12.598804390223734,-521.2279572163075],[-10.904252886579798,-516.443904941711],[-11.42881272448534,-513.6586226158624],[-11.229163675638006,-510.74273433938083],[-20.936178833416648,-526.809761615133],[-29.04193939397129,-525.7093758350312],[-45.81942219646652,-503.97177304364425],[-60.51641762569835,-508.14450877276226],[-77.56095006973658,-500.70667532916764],[-92.66433332056494,-499.98098485255616],[-101.8647403879798,-503.1176639271956],[-95.71726176355963,-497.3129928041135],[-91.02655720957489,-510.5837955654183],[-91.45958143960053,-520.9067504197627],[-90.31387233642192,-527.1455625558064],[-83.77958608230614,-537.1312655935665],[-89.06159041819188,-544.3404330667969],[-81.89349567862126,-540.774204300988],[-83.51860041980541,-543.4795184472325],[-88.52628030028654,-556.2839340056128],[-88.87384087518728,-538.7583058483269],[-88.55276317912,-539.5503812032616],[-86.10284543695474,-523.6291156297507],[-69.7244534577352,-525.37944410811],[-69.14223777761487,-542.8547493456008],[-61.53604901364247,-537.3775289989146],[-62.34071570455205,-524.2739851153583],[-51.93748123138471,-526.9192339528637],[-51.0957019179566,-525.2723621900323],[-46.0544115413457,-512.2406864454563],[-39.24565406812195,-516.0007166515093],[-34.18365011119488,-525.4306697115258],[-41.53216083002479,-508.60570144630503],[-30.59999640844285,-512.4879628080107],[-30.105394083513147,-527.3483611369694],[-28.68774750810678,-518.3133961921815],[-30.581191983130566,-542.235536643127],[-29.11123694208095,-518.3620819878754],[-34.299279734869344,-507.7966726652944],[-36.835282316018265,-516.9520889999308],[-36.65476742911642,-535.2923932363557],[-26.090794106784074,-523.9936036583136],[-32.77964572484234,-530.0730949375647],[-32.36723023250431,-525.8311680235176],[-30.86155431216048,-533.6909156675151],[-37.367766554806735,-510.466474749144],[-36.1403536117582,-534.7597580734653],[-35.756775957402965,-530.5007862664007],[-40.42976486608052,-526.6081811240592],[-69.80698117001896,-507.508815064961],[-38.747384825453764,-526.4958455432466],[-39.686412824386366,-517.4041460546255],[-41.97604164783979,-527.3515522709106],[-39.67432728270592,-523.1671696213673],[-40.68186032257222,-523.8234727681258],[-46.14532407913282,-528.3989841580058],[-43.96827166577327,-527.8093821177974],[-42.0743968661227,-529.3007634487103],[-37.74987520731054,-530.0959827918898],[-38.85119330784107,-527.8838767417737],[-36.58000423669171,-536.9121529565875],[-39.799827547467544,-527.1656192812885],[-53.14761319813903,-524.5407656908696],[-58.563588734975895,-522.9623603616064],[-58.54484018285041,-527.3286155289588],[-61.1731807184417,-521.9807056015461],[-73.47098690672419,-513.1734997210759],[-72.93048675418584,-524.1607548687928],[-75.73263738335845,-518.2229358867164],[-78.94573747544882,-518.8860548350905],[-83.11651421570241,-512.6049191069156],[-81.56481935666113,-532.7040845045985],[-80.22159160416129,-522.9592215519785],[-83.0459788544099,-520.9928389792086],[-86.75230376663546,-521.8237576839908],[-92.93003160945727,-512.6237987274137],[-91.99424155808674,-518.0393214510408],[-96.79135236781951,-507.1531778020046],[-101.55482193032208,-505.68801559827784],[-102.78139570029839,-488.10760278591283],[-104.21033490707259,-486.88813503551614],[-102.82364603485837,-494.1369214814731],[-101.15611191382948,-492.9086479869263],[-96.68216075048986,-484.35644203343736],[-98.32667649003349,-491.4811858252806],[-96.69639994078784,-498.69200739119606],[-89.90336967703331,-501.5254033464712],[-85.71291326167159,-506.1448194189659],[-77.49218927096399,-506.8998485619288],[-62.735051250044876,-517.7453223022874],[-51.17758860453728,-533.1329884546446],[-38.38992262502245,-518.9498296531706],[-33.77761504792011,-514.2420210345049],[-23.59754568122537,-529.8920763683908],[-22.35704669142649,-522.0831831198186],[-11.592852704096458,-518.9462950603169],[8.315539019550101,-529.6384545658987],[12.087984098917218,-506.58451631647563],[29.120660119169088,-513.0599063771117],[20.59552787090746,-503.47936529390654],[33.18453799687512,-496.57095533676613],[39.271615033163016,-493.9766093131635],[36.624986873234434,-485.5623724894874],[41.082958452716866,-495.77427239090866],[52.9548686638654,-509.4448120515749],[49.42667709589182,-504.2828712750975],[36.315938463066914,-510.56348677387314],[30.897570854801415,-509.5785530334115],[23.36391132384017,-505.56367790390493],[24.950162316614694,-502.6529687760574],[23.22789385199286,-530.0571710804214],[16.038677789767462,-524.4664029718888],[5.8518238452701326,-536.8807596676031],[-3.592739497520938,-531.5847522476959],[-7.252206843862723,-542.5130987949317],[-14.527155399900266,-548.2362226139035],[-42.268631514737024,-543.4473646363303],[-61.78556135247635,-516.4022834818694],[-65.2282869273979,-517.4225043846652],[-74.21652554916659,-522.5121818455561],[-74.55115608153176,-525.2028244646225],[-83.0279301897175,-516.2208552995635],[-74.89458494550558,-513.4299822465605],[-75.86771625492258,-515.1096542143334],[-68.71978199446357,-521.5546958878738],[-54.999913379243026,-511.44107683887773],[-55.553968897395634,-498.7126756775324],[-67.61623143494967,-523.7614502400936],[-80.42777533370565,-532.0057610941709],[-82.53824222694965,-549.593689103076],[-72.69593900750016,-563.305970703521],[-55.527559962756925,-549.1361381990805],[-37.033436946503855,-548.3501408469922],[-27.699733441882813,-547.0730153473446],[-18.9831929999292,-585.2877067511863],[-12.747542275657452,-591.8796608705791],[9.575253894680827,-608.1867236754138],[6.823938032620845,-595.2446723951475],[6.234521601890833,-598.120253975515],[8.920819667006185,-590.5533489178297],[10.44860668638404,-594.786362313004],[5.973740151443849,-576.7608120344175],[0.47384075648369617,-570.5064420716058],[-12.922849561405485,-562.5970498654196],[-16.522189889243748,-560.7472859807353],[-29.756005343967047,-560.9305418541386],[-42.436084250559475,-541.0018491602007],[-47.402695214197024,-555.079328349713],[-56.94697273486804,-542.9557884816488],[-77.92816651383373,-536.9354238377166],[-85.63838138588812,-560.7818732598196],[-95.26836100841956,-554.788720032594],[-97.42346413446069,-557.8615193806774],[-91.00522788045737,-563.7085549103451],[-93.40165119887081,-547.0852681815497],[-92.16723100667411,-553.1802856704226],[-82.41121751447838,-549.268372690618],[-71.0962097827171,-546.2671193040215],[-64.24425107009006,-526.0818308188648],[-59.2509835467356,-508.99674697807905],[-52.77263700853439,-503.33945851642943],[-46.82976843546567,-508.1199602640502],[-41.733686293305595,-502.08467961094743],[-34.79012492512038,-505.3922284591981],[-39.16994489082924,-503.90332546932393],[-40.59214083514439,-505.45272028859404],[-50.0930346738478,-511.9465102271098],[-58.705038734396794,-504.761070161436],[-65.93005411391403,-512.4442896052745],[-82.85047614354403,-521.1559582991465],[-95.26921208368083,-510.95240707484095],[-111.32218788554036,-514.719511461408],[-139.66371082220724,-499.1428900132513],[-169.95626240054122,-503.2209414635938],[-170.9404916762499,-504.3465998147111],[-170.29182809223585,-508.7477306556764],[-133.18063802732757,-514.8954346332125],[-110.35776598471438,-510.6772326144885],[-78.32447976875011,-513.3570304550381],[-53.25453022940013,-523.3173854250118],[-18.7499469725027,-528.8245525743341],[-18.70114469178378,-533.9421882541012],[-7.604411995496719,-526.7686606205185],[-7.680172666711883,-533.3323508479608],[-9.001417430755623,-526.963786888168],[-13.945923427923958,-532.8422085204302],[-22.55299515857689,-539.2187359416912],[-30.13323130203969,-531.1476594652465],[-53.36138910591512,-533.5095187473223],[-80.54151269678187,-535.8024929508919],[-105.88272361825022,-520.8296395580558],[-126.77037266174716,-503.28702824031313],[-125.67517484342943,-496.42677645288677],[-85.04239326593864,-506.40116549280333],[-51.95143812337494,-517.8965415724913],[-22.655741001987394,-512.7772267680375],[-9.145127564306563,-504.9063018876333],[-8.353536415440999,-507.79033650650854],[-45.87003284273817,-481.20170131927887],[-72.20949687013456,-489.5327915046573],[-116.23065537869246,-476.5713527027656],[-148.50319928919993,-447.59219366190996],[-143.40779825124088,-454.93024499351077],[-150.3671480294629,-459.19254170050067],[-90.78443380974892,-456.83805129054394],[-56.256666670941286,-457.835083355254],[-37.36280395946767,-471.98664749309796],[-19.83557810543965,-483.4990700056668],[-15.716338269233177,-472.34750785090023],[-15.8754106618008,-462.42337656460086],[-13.877455014508428,-466.79754311992997],[-8.60702531298233,-478.40408074200013],[-12.774453857861772,-486.1729720865476],[-36.67263591522499,-456.5596136694069],[-44.783346098306936,-446.41610118818676],[-61.30196062575595,-454.9091854552769],[-88.8088010892991,-459.6256448369695],[-110.62639880312275,-435.7151731762917],[-104.39630493537368,-417.5034745231028],[-81.47624469503461,-412.10967262332383],[-47.91169253967945,-412.3086268797606],[-19.07060704545279,-389.2841192158635],[-13.556700545767171,-373.1298652316898],[-21.598111487198253,-369.8977017032553],[-38.576644477147056,-367.6954271112595],[-52.11984921997242,-347.07370476348035],[-67.72881795045066,-341.21731961287765],[-79.28793361669756,-322.21541872908847],[-67.3701723943409,-336.76009899452515],[-43.20480457049746,-336.43934705720096],[-28.42489746755325,-340.1662108744738],[-18.300201390677955,-339.1335897412416],[-19.0821701745989,-343.3760098866951],[-18.770321217499543,-348.6756685122035],[-21.26468134620859,-345.77967531971274],[-25.131207611376453,-344.0197599532056],[-32.12873945374997,-357.1568962815725],[-41.31195089210928,-360.0956750969128],[-55.79418083338459,-355.87223293597606],[-67.56276324645023,-337.0320581483668],[-79.34202384341575,-341.3997034686387],[-79.32986457070297,-331.4075453952696],[-76.77539439047405,-340.9056124345731],[-58.86349412160939,-341.32203579421343],[-36.693811541596006,-333.0388967697678],[-23.635997181846506,-316.04554045692225],[-23.306988483673308,-313.41314180489746],[-23.821941250985105,-318.77482394977426],[-38.494051157908075,-333.01358542536104],[-56.75898449904673,-342.3401723149432],[-88.02427963922582,-335.5694790653115],[-114.77531407031762,-342.1355328774214],[-111.92857564480465,-339.24848818619796],[-86.3434959789862,-349.9004519753213],[-57.60115926392376,-357.3472769305388],[-44.487044985796615,-358.6342917746199],[-24.90302893885024,-370.95713275078106],[-30.40462241740289,-367.621460087425],[-21.4154797281314,-365.66275866205706],[-21.08256338822173,-372.2710612185714],[-21.25931454155659,-372.3513086599471],[-23.39797323406981,-376.02892569975234],[-35.6738150304156,-367.08663614524426],[-55.4905340367784,-357.1936038623926],[-80.36953252441054,-348.08316357186357],[-92.66386892901187,-337.8488667799231],[-83.24537255754052,-342.92764122182257],[-71.141766077532,-354.1155197833002],[-60.39525005874674,-361.2276366383451],[-47.6496001828001,-380.08168730869613],[-39.09160079464351,-375.46208655624037],[-25.82169873998123,-378.8055458979168],[-26.01018248122648,-399.00675680957283],[-33.8836787765548,-400.92174811058976],[-47.49101364550279,-420.55262240664297],[-69.27829286424424,-421.71763755723214],[-92.50719268972546,-434.63128191953524],[-74.86922648906881,-447.92837600750613],[-37.75492977640198,-447.2645543547603],[-17.11482772322728,-468.7974044893158],[-14.086813685142374,-454.4036986680858],[-3.234808670060602,-458.3822359509775],[4.282047311900044,-464.9423629519449],[13.014478103958197,-457.65393946178574],[6.062869704309605,-457.3320489501597],[9.494346533919952,-471.7806038866395],[7.119439484989243,-476.0857420265196],[-7.523740633469856,-462.9699529199095],[-30.37703514683068,-463.1976352716513],[-51.48288400597778,-474.79164021166343],[-74.29748943146006,-456.31408991645924],[-95.81523983188083,-462.01207183244605],[-106.66138981091234,-456.72704194996004],[-105.86343481946619,-460.59499531838605],[-90.88993507026692,-456.0495149297658],[-80.05243971053432,-459.9932702814875],[-69.86396779459562,-461.98152531862866],[-64.19150052798557,-456.21881095066203],[-59.874033117954696,-452.46895853262095],[-69.41745472281252,-455.7479929044978],[-75.68600960144954,-463.9916270557078],[-68.4682914040618,-446.37274686269745],[-62.35211976779897,-445.4494059371731],[-48.50822573367327,-455.3937048572018],[-36.7189775248894,-463.91066855476174],[-26.253755190113225,-457.20251751120736],[-27.104078607843803,-461.4369292738204],[-17.950522883882115,-449.3190506866961],[-15.00380293479816,-442.63619627162257],[-11.70982812376576,-450.8568314510094],[-13.068332359772057,-454.84467670041204],[-11.928315021045478,-459.89053612035104],[-13.45142237396692,-466.48079384451967],[-11.631118323937926,-469.8131525107134],[-9.660990652646888,-454.3472996513069],[-5.703635312973972,-460.5444779071993],[-9.3901952261254,-449.8442750225388],[-9.387230987296391,-441.5171745134751],[-9.157523682530893,-453.8373115623558],[-2.3662914077286814,-436.9699214131965],[-5.286542497785149,-437.54258244459356],[-3.3004624896612995,-437.6872294633688],[0.4569487389458118,-439.80808339937744],[-14.107310949223688,-436.9501024939492],[-31.409398952242952,-431.83616481492106],[-30.33608246660873,-450.11022214658533],[-38.45406708928135,-479.6054030686239],[-26.4931028563185,-547.3021386109449],[-29.543775632642053,-560.6228091082309],[-39.50032511551552,-582.7275351633714],[-30.669185715970855,-616.850444663406],[-7.267453489292166,-659.8927554873044],[-3.8080824389710415,-630.6706541718104],[-5.212606416016058,-639.5673619592745]]]");let Cj,Ij,Nj,Tj;function _j(e,t){const n=e[0]*t[0]+e[1]*t[1],a=Math.sqrt(e[0]**2+e[1]**2),r=Math.sqrt(t[0]**2+t[1]**2);if(0===a||0===r)return 0;return n/(a*r)}var Ej;!function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(gU)throw new Error("The WASM backend was already initialized. Make sure you call `setWasmPaths()` before you call `tf.setBackend()` or `tf.ready()`");if("string"===typeof e)fU=e;else{mU=e;const t=pU.filter((e=>null==mU[e]));if(t.length>0)throw new Error("There were no entries found for the following binaries: "+"".concat(t.join(","),". Please either call setWasmPaths with a ")+"map providing a path for each binary, or with a string indicating the directory where all the binaries can be found.")}yU=t}("https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-backend-wasm@".concat("4.20.0","/dist/")),Ej="webgl",Oi.setBackend(Ej);let Rj=(new Date).getTime(),Aj=0,Oj=10,Fj=[];for(let n=0;n<=16;n++)Fj.push([0,0]);let Dj=Array(17).fill(-1).map((()=>Array(wj[0].length).fill(-1))),Mj=null,Pj=null,Lj=!1,zj=(new Date).getTime()/1e3;async function Bj(){await Oi.ready(),Cj=hj.SINGLEPOSE_LIGHTNING;const e={modelType:Cj};Ij=await yj.setup(mj.camera),Nj=await function(e,t){return HV(this,void 0,void 0,(function(){var n,a;return jV(this,(function(r){switch(e){case uH.PoseNet:return[2,pj(t)];case uH.BlazePose:if(a=void 0,null!=(n=t)){if("tfjs"===n.runtime)return[2,sH(t)];if("mediapipe"===n.runtime)return[2,cG(t)];a=n.runtime}throw new Error("Expect modelConfig.runtime to be either 'tfjs' "+"or 'mediapipe', but got ".concat(a));case uH.MoveNet:return[2,IH(t)];default:throw new Error("".concat(e," is not a supported model name."))}}))}))}("MoveNet",e);const t=document.getElementById("output"),n=Ij.video.width>Ij.video.height,a=n?window.innerHeight/Ij.video.height:window.innerWidth/Ij.video.width;t.width=Ij.video.width*a,t.height=Ij.video.height*a,t.style.left=n?(window.innerWidth-t.width)/2+"px":"",t.style.top=n?"":(window.innerHeight-t.height)/2+"px",Tj=new xj(t,a)}async function Wj(){await async function(){Ij.video.readyState<2&&await new Promise((e=>{Ij.video.onloadeddata=()=>{e(Ij.video)}})),Lj||(document.getElementById("input-video"),document.getElementById("output"),console.log(Ij.video.height),Lj=!0);let e=Ij.video;const t=document.getElementById("output");t.getContext("2d").drawImage(e,0,0,t.width,t.height);let n=document.getElementById("input-video");if(n.ended&&(Rj=((new Date).getTime()-Rj)/1e3,n.currentTime=0,n.play(),Mj=-1),null!=Nj)try{Pj=await Nj.estimatePoses(Ij.video,{flipHorizontal:!0})}catch(f){Nj.dispose(),Nj=null}if(0==Pj.length)return;let a,r,o=[];if([5,6,11,12].forEach((e=>{Pj[0].keypoints[e].score>Aj&&o.push(e)})),o.includes(5)&&o.includes(12))a=Pj[0].keypoints[5],r=Pj[0].keypoints[12];else{if(!o.includes(6)||!o.includes(11)){for(let e=0;e<=16;e++);return}a=Pj[0].keypoints[6],r=Pj[0].keypoints[11]}let i=[(a.x+r.x)/2,(a.y+r.y)/2],s=Math.abs(a.y-r.y)/6;Oj=s;for(let m=0;m<Pj[0].keypoints.length;m++){if(5===m||6===m||11===m||12===m)continue;let e=Pj[0].keypoints[m];if(e.score<Aj);else{let t=[e.x-i[0],i[1]-e.y];Fj[m]=t}}for(let m=0;m<=16;m++)if(!(m<7||11===m||12===m))for(let e=0;e<wj[m].length;e++)if(0!=Fj[m][0]&&0!=Fj[m][1]){let t=_j(Fj[m],wj[m][e]);Dj[m][e]=t}let c=document.getElementById("input-video").currentTime,u=Math.round(10*c)/10;u*=10;let l=Math.max(u-4,0),d=Math.min(u+4,parseInt(10*document.getElementById("input-video").duration)),p=!1;for(let m=l;m<d;m++){let e=!0;for(let t=9;t<=16;t++)if(!(t>=11&&t<=14)&&Dj[t][m]<.5&&-1!=Dj[t][m]&&0!=Dj[t][m]){e=!1;break}if(e){p=!0;break}}let h=(new Date).getTime()/1e3;if(p)document.getElementsByTagName("body")[0].style.backgroundColor="green",zj=h;else if(h-zj>.75){document.getElementsByTagName("body")[0].style.backgroundColor="lightblue";let e=[];for(let r=0;r<Dj[14].length;r++){let t=0;for(let e=9;e<=16;e++)e>=11&&e<=14||-1!=Dj[e][r]&&0!=Dj[e][r]&&(t+=Dj[e][r]);e.push(t)}let t=e;const n=Math.max(...t);console.log(n);const a=t.indexOf(n);document.getElementById("input-video").currentTime=a/10,zj=h}Dj=Array(17).fill(-1).map((()=>Array(wj[0].length).fill(-1)))}();requestAnimationFrame(Wj)}async function Uj(e){try{let t=new URLSearchParams(window.location.search).get("data");t.startsWith("sample")?setTimeout((async()=>{"sample1"==t?Vj(e,wj,vj):"sample2"==t?Vj(e,kj,vj):"sample3"==t?Vj(e,Sj,vj):window.location.href="/danceteacher"}),20):t.startsWith("https://l73smpwh.use.devtunnels.ms:5000/")?async function(e,t){let n=[];const a=document.createElement("video");a.id="video",a.muted=!0,a.playsInline=!0,a.width=640,a.height=480,a.style.display="none",a.crossOrigin="anonymous";const r=document.createElement("source");r.src=e,a.appendChild(r),document.getElementsByTagName("body")[0].appendChild(a);const o=document.createElement("canvas"),i=o.getContext("2d");let s,c,u=[[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]],l=!1;async function d(){async function r(){try{if(a.currentTime>=a.duration)return n=u,void Vj(t,n,e);if(i.clearRect(0,0,o.width,o.height),i.drawImage(a,0,0,o.width,o.height),null!=Nj)try{Pj=await Nj.estimatePoses(a)}catch(s){Nj.dispose(),Nj=null}if(0==Pj.length)return void requestAnimationFrame(r);if(a.currentTime<1&&!l)return void requestAnimationFrame(r);l||(a.currentTime=0),l=!0;let c=Pj[0].keypoints[5],d=Pj[0].keypoints[12],p=[(c.x+d.x)/2,(c.y+d.y)/2],h=Math.abs(c.y-d.y)/6;Oj=h;for(let e=0;e<Pj[0].keypoints.length;e++){if(e<6||11===e||12===e){u[e].push([0,0]);continue}let t=Pj[0].keypoints[e];u[e].push([t.x-p[0],p[1]-t.y])}i.beginPath(),i.arc(p[0],p[1],20,0,2*Math.PI),i.fillStyle="green",i.fill(),Pj[0].keypoints.forEach(((e,t)=>{5!==t&&6!==t&&11!==t&&12!==t||(i.beginPath(),i.arc(e.x,e.y,10,0,2*Math.PI),i.fillStyle="red",i.fill())})),a.currentTime+=.1,requestAnimationFrame(r)}catch(jj){console.log(jj)}}a.play(),r()}a.addEventListener("loadeddata",(()=>{s=a.videoWidth,c=a.videoHeight,o.width=s,o.height=c,d()})),a.load()}(t,e):window.location.href="/danceteacher"}catch(jj){window.location.href="/danceteacher"}}function Vj(e,t,n){console.log("here"),document.getElementById("ahhh").src=n,document.getElementById("input-video").load(),wj=t,e(!1),Wj()}const Gj=()=>{const[e,t]=(0,T.useState)(!0);return Bj().then((()=>{Uj(t)})),(0,at.jsxs)(at.Fragment,{children:[(0,at.jsxs)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",display:e?"block":"none"},children:[(0,at.jsx)("div",{className:"loader"}),(0,at.jsx)("div",{style:{fontSize:"36px",color:"white",marginTop:"20px",fontWeight:"500",fontstyle:"normal"},id:"processing-video",children:"Processing Video"})]}),(0,at.jsx)("div",{id:"main",children:(0,at.jsx)("div",{className:"container",children:(0,at.jsxs)("div",{className:"canvas-wrapper",children:[(0,at.jsx)("canvas",{id:"output",style:{position:"fixed",display:"none"},children:" "}),(0,at.jsx)("video",{id:"input-video",muted:!0,playsInline:!0,autoPlay:!0,style:{WebkitTransform:"scaleX(-1)",transform:"scaleX(-1)",visibility:e?"hidden":"initial",width:"100%",height:"100%",maxWidth:"100vw",maxHeight:"100vh",margin:"auto",position:"fixed",transform:"rotateY(180deg)"},children:(0,at.jsx)("source",{src:"a.mp4",id:"ahhh",type:"video/mp4"})}),(0,at.jsx)("video",{id:"video",playsInline:!0,style:{WebkitTransform:"scaleX(-1)",transform:"scaleX(-1)",visibility:"hidden",width:"auto",height:"auto"}})]})})})]})};function Hj(){return(0,at.jsx)(Ze,{children:(0,at.jsxs)(je,{children:[(0,at.jsx)(Ge,{path:"danceteacher",element:(0,at.jsxs)(at.Fragment,{children:[(0,at.jsx)(rt,{}),(0,at.jsx)(pt,{})]})}),(0,at.jsx)(Ge,{path:"danceteacher/investors",element:(0,at.jsx)(ht,{})}),(0,at.jsx)(Ge,{path:"danceteacher/learn",element:(0,at.jsx)(Gj,{})}),(0,at.jsx)(Ge,{path:"*",element:(0,at.jsx)(ft,{})})]})})}E.createRoot(document.getElementById("root")).render((0,at.jsx)(Hj,{})),R()})()})();
//# sourceMappingURL=main.1186fee7.js.map